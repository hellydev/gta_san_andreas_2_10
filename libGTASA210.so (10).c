50.0) + -3000.0) - *(float *)&this;
  v12.n64_f32[0] = *(float *)&this - (float)((float)((float)v18 * 750.0) + -3000.0);
  v13.n64_f32[0] = x - (float)((float)((float)v16 * 750.0) + -3000.0);
  v10.n64_f32[0] = (float)((float)((float)(v16 + 1) * 750.0) + -3000.0) - x;
  v22 = vmin_f32(vmin_f32(vmin_f32(v12, v11), v13), v10).n64_f32[0];
  if ( pClosestDist > v22 )
  {
    v23 = ~v19;
    v24 = -8;
    if ( ~v19 < -8 || v19 == 7 )
      v23 = -8;
    if ( ~v20 > -8 )
      v24 = ~v20;
    v25 = ~v23 - 8 * v24;
    v26 = 1;
    v49 = -17 - v23 - 8 * v24;
    v27 = v46;
    v42 = v16;
    v48 = -16 - v23 - 8 * v24;
    v47 = -18 - v23 - 8 * v24;
    v50 = -3 - v24;
    v28 = 1;
    do
    {
      v45 = v25;
      v51 = v28;
      v44 = v46 - v28;
      if ( (unsigned int)(v46 - v28) <= 7 )
      {
        v29 = v28 + v16;
        if ( v16 - v28 <= v28 + v16 )
        {
          v30 = v50;
          v31 = v47;
          do
          {
            if ( (unsigned int)++v30 <= 7 )
            {
              *(_QWORD *)&v56.y = v52;
              LODWORD(v56.x) = this;
              CPathFind::FindNodeClosestInRegion(
                (CPathFind *)retstr,
                &pNodeFound,
                v31,
                v56,
                SLODWORD(SearchCoors.z),
                &pClosestDist,
                SLODWORD(CutoffDist),
                bIgnoreBetweenLevels,
                bIgnoreAlreadyFound,
                0);
            }
            v31 += 8;
          }
          while ( v30 < v29 );
        }
      }
      v32 = v16 - v51;
      v43 = v51 + v46;
      if ( (unsigned int)(v51 + v46) <= 7 && (int)v32 <= v51 + v42 )
      {
        v33 = v50;
        v34 = v48;
        do
        {
          if ( (unsigned int)++v33 <= 7 )
          {
            *(_QWORD *)&v57.y = v52;
            LODWORD(v57.x) = this;
            CPathFind::FindNodeClosestInRegion(
              (CPathFind *)retstr,
              &pNodeFound,
              v34,
              v57,
              SLODWORD(SearchCoors.z),
              &pClosestDist,
              SLODWORD(CutoffDist),
              bIgnoreBetweenLevels,
              bIgnoreAlreadyFound,
              0);
          }
          v34 += 8;
        }
        while ( v33 < v51 + v42 );
      }
      if ( v32 <= 7 )
      {
        v35 = v44 + 1;
        if ( v44 + 1 < v43 )
        {
          v36 = v49;
          v37 = v26;
          do
          {
            if ( v35 < 8 )
            {
              *(_QWORD *)&v58.y = v52;
              LODWORD(v58.x) = this;
              CPathFind::FindNodeClosestInRegion(
                (CPathFind *)retstr,
                &pNodeFound,
                v36,
                v58,
                SLODWORD(SearchCoors.z),
                &pClosestDist,
                SLODWORD(CutoffDist),
                bIgnoreBetweenLevels,
                bIgnoreAlreadyFound,
                0);
            }
            ++v36;
            --v37;
            ++v35;
          }
          while ( v37 );
        }
      }
      v16 = v42;
      if ( (unsigned int)(v51 + v42) <= 7 && v44 + 1 < v43 )
      {
        v38 = 0;
        do
        {
          if ( (unsigned int)(v27 + v38) < 8 )
          {
            *(_QWORD *)&v59.y = v52;
            LODWORD(v59.x) = this;
            CPathFind::FindNodeClosestInRegion(
              (CPathFind *)retstr,
              &pNodeFound,
              v45 + v38,
              v59,
              SLODWORD(SearchCoors.z),
              &pClosestDist,
              SLODWORD(CutoffDist),
              bIgnoreBetweenLevels,
              bIgnoreAlreadyFound,
              0);
          }
          ++v38;
        }
        while ( v26 != v38 );
      }
      v22 = v22 + 750.0;
      if ( pClosestDist < v22 )
        break;
      v25 = v45 + 7;
      --v27;
      v26 += 2;
      v49 -= 9;
      v48 -= 7;
      --v50;
      v47 -= 9;
      v28 = v51 + 1;
    }
    while ( v51 <= 3 );
  }
  if ( !bBoatNodes )
  {
    *(_QWORD *)&v60.y = v52;
    LODWORD(v60.x) = this;
    CPathFind::FindNodeClosestInRegion(
      (CPathFind *)retstr,
      &pNodeFound,
      0x40u,
      v60,
      SLODWORD(SearchCoors.z),
      &pClosestDist,
      SLODWORD(CutoffDist),
      bIgnoreBetweenLevels,
      bIgnoreAlreadyFound,
      0);
    *(_QWORD *)&v61.y = v52;
    LODWORD(v61.x) = this;
    CPathFind::FindNodeClosestInRegion(
      (CPathFind *)retstr,
      &pNodeFound,
      0x41u,
      v61,
      SLODWORD(SearchCoors.z),
      &pClosestDist,
      SLODWORD(CutoffDist),
      bIgnoreBetweenLevels,
      bIgnoreAlreadyFound,
      0);
    *(_QWORD *)&v62.y = v52;
    LODWORD(v62.x) = this;
    CPathFind::FindNodeClosestInRegion(
      (CPathFind *)retstr,
      &pNodeFound,
      0x42u,
      v62,
      SLODWORD(SearchCoors.z),
      &pClosestDist,
      SLODWORD(CutoffDist),
      bIgnoreBetweenLevels,
      bIgnoreAlreadyFound,
      0);
    *(_QWORD *)&v63.y = v52;
    LODWORD(v63.x) = this;
    CPathFind::FindNodeClosestInRegion(
      (CPathFind *)retstr,
      &pNodeFound,
      0x43u,
      v63,
      SLODWORD(SearchCoors.z),
      &pClosestDist,
      SLODWORD(CutoffDist),
      bIgnoreBetweenLevels,
      bIgnoreAlreadyFound,
      0);
    *(_QWORD *)&v64.y = v52;
    LODWORD(v64.x) = this;
    CPathFind::FindNodeClosestInRegion(
      (CPathFind *)retstr,
      &pNodeFound,
      0x44u,
      v64,
      SLODWORD(SearchCoors.z),
      &pClosestDist,
      SLODWORD(CutoffDist),
      bIgnoreBetweenLevels,
      bIgnoreAlreadyFound,
      0);
    *(_QWORD *)&v65.y = v52;
    LODWORD(v65.x) = this;
    CPathFind::FindNodeClosestInRegion(
      (CPathFind *)retstr,
      &pNodeFound,
      0x45u,
      v65,
      SLODWORD(SearchCoors.z),
      &pClosestDist,
      SLODWORD(CutoffDist),
      bIgnoreBetweenLevels,
      bIgnoreAlreadyFound,
      0);
    *(_QWORD *)&v66.y = v52;
    LODWORD(v66.x) = this;
    CPathFind::FindNodeClosestInRegion(
      (CPathFind *)retstr,
      &pNodeFound,
      0x46u,
      v66,
      SLODWORD(SearchCoors.z),
      &pClosestDist,
      SLODWORD(CutoffDist),
      bIgnoreBetweenLevels,
      bIgnoreAlreadyFound,
      0);
    *(_QWORD *)&v67.y = v52;
    LODWORD(v67.x) = this;
    CPathFind::FindNodeClosestInRegion(
      (CPathFind *)retstr,
      &pNodeFound,
      0x47u,
      v67,
      SLODWORD(SearchCoors.z),
      &pClosestDist,
      SLODWORD(CutoffDist),
      bIgnoreBetweenLevels,
      bIgnoreAlreadyFound,
      0);
  }
  return (CNodeAddress *)pNodeFound;
}
// 315D90: fragmented variable at 0:r2.8,8:^A0.4 may be wrong
// 315D90: variables would overlap: 0:r2.8,8:^A0.4 and ^A0.4
// 315D90: fragmented variable at r3.4 may be wrong
// 315D90: fragmented variable at ^0.4 may be wrong
// 315D90: fragmented variable at ^4.4 may be wrong
// 315D90: using guessed type float arg_8;
// 315D90: using guessed type int arg_10;

//----- (0031622E) --------------------------------------------------------
void __fastcall CPathFind::AddNodeToList(CPathFind *this, CPathNode *pNode, Int32 Dist)
{
  char *v3; // lr
  CPathNode *v4; // lr
  CPathNode *v5; // t1

  v3 = (char *)this + 4 * (Dist & 0x1FF);
  v5 = (CPathNode *)*((_DWORD *)v3 + 1);
  v4 = (CPathNode *)(v3 + 4);
  pNode->pNext = v5;
  pNode->pPrevious = v4;
  if ( v4->pNext )
    v4->pNext->pPrevious = pNode;
  v4->pNext = pNode;
  pNode->DistanceToTarget = Dist;
  ++this->NodesOnListDuringPathfinding;
}

//----- (00316264) --------------------------------------------------------
void __fastcall CPathFind::RemoveNodeFromList(CPathFind *this, CPathNode *pNode)
{
  pNode->pPrevious->pNext = pNode->pNext;
  if ( pNode->pNext )
    pNode->pNext->pPrevious = pNode->pPrevious;
  --this->NodesOnListDuringPathfinding;
}

//----- (00316280) --------------------------------------------------------
int __fastcall CPathFind::RemoveBadStartNode(
        int result,
        unsigned int a2,
        unsigned int a3,
        int a4,
        _DWORD *a5,
        __int16 *a6)
{
  int16x4_t v6; // d16
  int16x4_t v7; // d17
  int v8; // lr
  int v9; // r8
  unsigned int v10; // r6
  unsigned __int64 v11; // d0

  v8 = *a6;
  if ( v8 >= 2 )
  {
    v9 = *(_DWORD *)(result + 4 * (unsigned __int16)*a5 + 2052);
    if ( v9 )
    {
      v10 = a5[1];
      result = *(_DWORD *)(result + 4 * (unsigned __int16)v10 + 2052);
      if ( result )
      {
        v6.n64_u32[0] = *(_DWORD *)(result + 28 * HIWORD(v10) + 8);
        result = v9 + 28 * HIWORD(*a5) + 8;
        v7.n64_u32[0] = *(_DWORD *)result;
        v11 = vmul_f32(
                vsub_f32(
                  vmul_f32(vcvt_f32_s32((int32x2_t)vmovl_s16(v7).n128_u64[0]), (float32x2_t)0x3E0000003E000000LL),
                  (float32x2_t)__PAIR64__(a3, a2)),
                vsub_f32(
                  vmul_f32(vcvt_f32_s32((int32x2_t)vmovl_s16(v6).n128_u64[0]), (float32x2_t)0x3E0000003E000000LL),
                  (float32x2_t)__PAIR64__(a3, a2))).n64_u64[0];
        if ( (float)(*(float *)&v11 + *((float *)&v11 + 1)) < 0.0 )
        {
          *a6 = v8 - 1;
          result = (__int16)(v8 - 1);
          if ( result >= 1 )
          {
            result = 0;
            do
            {
              a5[result] = a5[result + 1];
              result = (__int16)(result + 1);
            }
            while ( result < *a6 );
          }
        }
      }
    }
  }
  return result;
}
// 3162E2: variable 'v7' is possibly undefined
// 3162DE: variable 'v6' is possibly undefined

//----- (00316348) --------------------------------------------------------
void __fastcall CPathFind::CountFloodFillGroups(CPathFind *this, UInt8 GraphType)
{
  Int32 v2; // r9
  Int32 v3; // r10
  int i; // r4
  Int32 *v5; // r2
  char *v6; // r2
  int v7; // r2
  int v8; // r3
  char v9; // r4
  int v10; // r6
  Int32 *v11; // r2
  char *v12; // r2
  CPathNode *v13; // r5
  Int32 v14; // r2
  char v16; // r11
  CPathNode *pNext; // r6
  CPathNode *v18; // r8
  __int16 v19; // r9
  int v20; // r12
  int v21; // r6
  CNodeAddress v22; // r2
  CPathNode *v23; // r2
  Int32 v24; // [sp+4h] [bp-20h]

  for ( i = 0; i != 64; ++i )
  {
    if ( GraphType == 1 )
    {
      v6 = (char *)this + 4 * i;
      v2 = *((_DWORD *)v6 + 1089);
      v5 = (Int32 *)(v6 + 4068);
    }
    else
    {
      if ( GraphType )
        goto LABEL_7;
      v2 = 0;
      v5 = &this->NumNodesCarNodes[i];
    }
    v3 = *v5;
LABEL_7:
    if ( v2 < v3 )
    {
      v7 = v3 - v2;
      v8 = 28 * v2 + 23;
      do
      {
        --v7;
        *((_BYTE *)&this->pNodes[i]->pNext + v8) = 0;
        v8 += 28;
      }
      while ( v7 );
    }
  }
  v9 = 0;
LABEL_13:
  ++v9;
  v10 = 0;
  do
  {
    if ( GraphType == 1 )
    {
      v12 = (char *)this + 4 * v10;
      v2 = *((_DWORD *)v12 + 1089);
      v11 = (Int32 *)(v12 + 4068);
    }
    else
    {
      if ( GraphType )
        goto LABEL_19;
      v2 = 0;
      v11 = &this->NumNodesCarNodes[v10];
    }
    v3 = *v11;
LABEL_19:
    if ( v2 < v3 )
    {
      v13 = &this->pNodes[v10][v2];
      v14 = v2;
      while ( v13->Group )
      {
        ++v14;
        ++v13;
        if ( v14 >= v3 )
          goto LABEL_23;
      }
      v13->Group = v9;
      v13->pNext = 0;
      if ( v13 )
      {
        v16 = v9;
        v24 = v2;
        pNext = 0;
        if ( !v9 )
          v16 = 0x80;
        while ( 1 )
        {
          LOBYTE(v19) = *((_WORD *)v13 + 12);
          if ( (*((_WORD *)v13 + 12) & 0xF) != 0 )
          {
            v18 = pNext;
            v20 = 0;
            v21 = 0;
            do
            {
              v22 = this->pAdjacentNodes[v13->Address.Region][v13->IndexAdjacentNodes + v20];
              v23 = &this->pNodes[v22.Region][HIWORD(*(unsigned int *)&v22)];
              if ( !v23->Group )
              {
                v23->Group = v16;
                v23->pNext = v18;
                v18 = v23;
                v19 = *((_WORD *)v13 + 12);
              }
              v20 = (__int16)++v21;
            }
            while ( (__int16)v21 < (v19 & 0xF) );
            if ( !v18 )
            {
LABEL_12:
              v2 = v24;
              goto LABEL_13;
            }
          }
          else
          {
            v18 = pNext;
            if ( !pNext )
              goto LABEL_12;
          }
          pNext = v18->pNext;
          v13 = v18;
        }
      }
      goto LABEL_13;
    }
LABEL_23:
    ;
  }
  while ( v10++ <= 62 );
}
// 316384: variable 'v2' is possibly undefined
// 316384: variable 'v3' is possibly undefined

//----- (003164CE) --------------------------------------------------------
void __fastcall CPathFind::CheckGrid(CPathFind *this)
{
  int i; // r1
  int v2; // r2
  int j; // r3

  for ( i = 0; i != 64; ++i )
  {
    v2 = this->NumNodesPedNodes[i] + this->NumNodesCarNodes[i];
    if ( v2 >= 1 )
    {
      for ( j = 0; j < v2; ++j )
        ;
    }
  }
}

//----- (00316504) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
void __fastcall CPathFind::FindNextNodeWandering(
        CPathFind *this,
        int GraphType,
        CVector CurrentCoors,
        CNodeAddress *pCurrentNode,
        CNodeAddress *pResultNode,
        unsigned int Direction,
        UInt8 *pDirectionFound)
{
  unsigned int v7; // lr
  float32x2_t v8; // d0
  float32x2_t v9; // d3
  int16x4_t v10; // d17
  int16x4_t v11; // d18
  CNodeAddress *v13; // r10
  CNodeAddress *NodeClosestToCoors; // r11
  CNodeAddress v15; // r5
  int Region; // r0
  CPathNode *v17; // r0
  CPathNode *v18; // r0
  RwReal x; // r1
  CPathNode *v20; // r9
  float v21; // r8
  float v22; // r0
  CPathNode *v23; // r1
  __int16 *v24; // r1
  __int16 v25; // t1
  __int16 v26; // r12
  float v27; // s6
  float v28; // s0
  int v29; // r6
  CPathNode *v30; // r3
  float v31; // s2
  unsigned __int32 *p_CoorsX; // r10
  Int16 *p_IndexAdjacentNodes; // r2
  CNodeAddress *p_Address; // r3
  int v35; // lr
  CNodeAddress v36; // r8
  CPathNode *v37; // r6
  unsigned int v38; // r9
  float32x2_t v39; // d4
  unsigned __int64 v40; // d5
  float v41; // s12
  float v42; // s10
  float v43; // s12
  float v44; // s6
  UInt8 v45; // r0
  __int16 v46; // r0
  CNodeAddress v47; // r1
  UInt16 v48; // r3
  __int16 v49; // r1
  int v50; // r1
  CPathNode *v51; // r0
  bool v52; // zf
  CNodeAddress *v53; // r0
  int v54; // r2
  CNodeAddress v55; // r3
  bool v57; // [sp+1Ch] [bp-24h]
  __int16 v58; // [sp+1Ch] [bp-24h]

  v13 = pResultNode;
  if ( !pCurrentNode )
  {
    v15.Region = -1;
LABEL_7:
    x = CurrentCoors.x;
    CurrentCoors.x = CurrentCoors.y;
    CurrentCoors.y = CurrentCoors.z;
    NodeClosestToCoors = CPathFind::FindNodeClosestToCoors(
                           (CNodeAddress *)this,
                           (CPathFind *)LODWORD(x),
                           CurrentCoors,
                           1000000.0,
                           0.0,
                           0,
                           0,
                           0,
                           0,
                           v57);
    goto LABEL_8;
  }
  NodeClosestToCoors = (CNodeAddress *)*pCurrentNode;
  v15.Region = -1;
  Region = pCurrentNode->Region;
  v7 = HIWORD(*(unsigned int *)pCurrentNode);
  if ( Region == 0xFFFF )
    goto LABEL_7;
  v17 = this->pNodes[Region];
  if ( !v17 )
  {
    pResultNode->Region = -1;
    *pDirectionFound = 0;
    return;
  }
  v18 = &v17[v7];
  v15 = *pCurrentNode;
  v9.n64_u32[0] = 7.0;
  v8.n64_f32[0] = (float)v18->Width * 0.125;
  if ( sqrtf(
         (float)((float)((float)(CurrentCoors.x - (float)((float)v18->CoorsX * 0.125))
                       * (float)(CurrentCoors.x - (float)((float)v18->CoorsX * 0.125)))
               + (float)((float)(CurrentCoors.y - (float)((float)v18->CoorsY * 0.125))
                       * (float)(CurrentCoors.y - (float)((float)v18->CoorsY * 0.125))))
       + (float)((float)(CurrentCoors.z - (float)((float)v18->CoorsZ * 0.125))
               * (float)(CurrentCoors.z - (float)((float)v18->CoorsZ * 0.125)))) > vmax_f32(v8, v9).n64_f32[0] )
    goto LABEL_7;
LABEL_8:
  if ( (unsigned __int16)NodeClosestToCoors == 0xFFFF || (v20 = this->pNodes[(unsigned __int16)NodeClosestToCoors]) == 0 )
  {
    pResultNode->Region = -1;
    v46 = -1;
    v48 = v15.Region;
  }
  else
  {
    v58 = v7;
    pResultNode->Region = -1;
    v21 = sinf((float)Direction * 0.7854);
    v22 = cosf((float)Direction * 0.7854);
    v23 = &v20[(unsigned int)NodeClosestToCoors >> 16];
    v25 = *((_WORD *)v23 + 12);
    v24 = (__int16 *)((char *)v23 + 24);
    v26 = v25;
    if ( (v25 & 0xF) != 0 )
    {
      v27 = -1000000.0;
      v28 = v22;
      v29 = 0;
      v30 = &v20[(unsigned int)NodeClosestToCoors >> 16];
      v31 = v21;
      p_CoorsX = (unsigned __int32 *)&v30->CoorsX;
      p_IndexAdjacentNodes = &v30->IndexAdjacentNodes;
      p_Address = &v30->Address;
      v35 = 0;
      do
      {
        v36 = this->pAdjacentNodes[p_Address->Region][*p_IndexAdjacentNodes + v29];
        v37 = this->pNodes[v36.Region];
        if ( !v37 )
          goto LABEL_36;
        v38 = HIWORD(*(unsigned int *)&v36);
        if ( (v26 & 0x20) == 0 && (*((_WORD *)&v37[v38] + 12) & 0x20) != 0 )
          goto LABEL_36;
        if ( (v26 & 0x400) == 0 && (*((_WORD *)&v37[v38] + 12) & 0x400) != 0 )
          goto LABEL_36;
        v10.n64_u32[0] = *p_CoorsX;
        v11.n64_u32[0] = *(_DWORD *)&v37[v38].CoorsX;
        v10.n64_u64[0] = vmul_f32(
                           vcvt_f32_s32((int32x2_t)vmovl_s16(v10).n128_u64[0]),
                           (float32x2_t)0x3E0000003E000000LL).n64_u64[0];
        v11.n64_u64[0] = vmul_f32(
                           vcvt_f32_s32((int32x2_t)vmovl_s16(v11).n128_u64[0]),
                           (float32x2_t)0x3E0000003E000000LL).n64_u64[0];
        v39.n64_u64[0] = vsub_f32(v11, v10).n64_u64[0];
        v40 = vmul_f32(v39, v39).n64_u64[0];
        v41 = sqrtf(*(float *)&v40 + *((float *)&v40 + 1));
        v42 = v39.n64_f32[1] / v41;
        v43 = v39.n64_f32[0] / v41;
        if ( (float)((float)(v31 * v43) + (float)(v28 * v42)) < v27 )
          goto LABEL_36;
        v44 = fabsf(v42);
        *pResultNode = v36;
        if ( v43 >= 0.0 )
        {
          if ( v43 <= (float)(v44 + v44) )
          {
            if ( v42 <= (float)(v43 + v43) )
            {
              if ( v42 >= (float)(v43 * -2.0) )
              {
                v45 = 3;
                if ( v42 > 0.0 )
                  v45 = 1;
                goto LABEL_34;
              }
              goto LABEL_31;
            }
            goto LABEL_29;
          }
          *pDirectionFound = 2;
        }
        else
        {
          if ( (float)(v44 + v44) >= (float)-v43 )
          {
            if ( v42 <= (float)(v43 * -2.0) )
            {
              if ( v42 >= (float)(v43 + v43) )
              {
                v45 = 5;
                if ( v42 > 0.0 )
                  v45 = 7;
LABEL_34:
                *pDirectionFound = v45;
                goto LABEL_35;
              }
LABEL_31:
              *pDirectionFound = 4;
              goto LABEL_35;
            }
LABEL_29:
            *pDirectionFound = 0;
            goto LABEL_35;
          }
          *pDirectionFound = 6;
        }
LABEL_35:
        v27 = (float)(v31 * v43) + (float)(v28 * v42);
LABEL_36:
        ++v35;
        v26 = *v24;
        v29 = (__int16)v35;
      }
      while ( (__int16)v35 < (*v24 & 0xF) );
    }
    *pCurrentNode = (CNodeAddress)NodeClosestToCoors;
    v46 = (__int16)NodeClosestToCoors;
    v13 = pResultNode;
    v47 = (CNodeAddress)pResultNode->Region;
    LOWORD(v7) = v58;
    v48 = v15.Region;
    if ( v47 != 0xFFFF )
      goto LABEL_41;
  }
  *pDirectionFound = 0;
  v49 = v46;
  v47.Index = (unsigned __int16)NodeClosestToCoors;
  *v13 = v47;
  v47.Region = v46;
LABEL_41:
  if ( v47.Region == v48 && v48 != 0xFFFF )
  {
    v50 = (unsigned __int16)v7;
    if ( v13->Index == (unsigned __int16)v7 )
    {
      v51 = this->pNodes[v48];
      v52 = v51 == 0;
      if ( v51 )
      {
        v51 += (unsigned __int16)v7;
        v50 = *((_WORD *)v51 + 12) & 0xF;
        v52 = v50 == 0;
      }
      if ( !v52 )
      {
        v53 = &this->pAdjacentNodes[v51->Address.Region][v51->IndexAdjacentNodes];
        v54 = 0;
        while ( 1 )
        {
          v55 = v53[v54];
          if ( this->pNodes[v55.Region] )
            break;
          if ( ++v54 >= v50 )
            return;
        }
        *v13 = v55;
      }
    }
  }
}
// 316882: masking with 0xFFFFFF was optimized away because r1.4 <= 0xFFFF
// 316504: fragmented variable at 0:r2.8,8:^48.4 may be wrong
// 316504: variables would overlap: 0:r2.8,8:^48.4 and ^48.4

//----- (003168D0) --------------------------------------------------------
int __fastcall CPathFind::GeneratePedCreationCoors(
        CPathFind *this,
        float CentreX,
        float CentreY,
        float MinRad,
        float MaxRad,
        float MinRadClose,
        float MaxRadClose,
        CVector *pResult,
        CNodeAddress *pFromNode,
        CNodeAddress *pToNode,
        float *pFraction,
        int bIncludeSwitchedOffs,
        CMatrix *pInvCam)
{
  int16x4_t v13; // d16
  float32x2_t v15; // d8
  float v16; // s22
  int v18; // s4
  float v19; // s18
  float v20; // s0
  int v21; // s6
  int v22; // r1
  float v23; // s22
  int v24; // r2
  char *v25; // r0
  _DWORD *v26; // r11
  int v27; // r0
  int v28; // r4
  bool v29; // zf
  int v30; // r5
  int v31; // r0
  __int16 *v32; // r6
  unsigned __int64 v33; // d0
  float v34; // s29
  int v35; // r10
  __int16 *v36; // r9
  int v37; // r5
  int v38; // r0
  unsigned int v39; // r1
  CPathNode *v40; // r0
  unsigned int v41; // r1
  unsigned int v42; // r2
  CPathNode *v43; // r0
  unsigned __int64 v44; // d0
  int v45; // r8
  _BOOL4 IsSphereVisible; // r0
  float v47; // s4
  float v48; // s12
  float v49; // s14
  float v50; // s0
  float v51; // s18
  float v52; // s4
  float GroundZFor3DCoord; // r0
  CPathFind *v55; // [sp+8h] [bp-D0h]
  int v56; // [sp+24h] [bp-B4h]
  CNodeAddress *p_Address; // [sp+28h] [bp-B0h]
  int *v58; // [sp+30h] [bp-A8h]
  _WORD *v59; // [sp+34h] [bp-A4h]
  CNodeAddress *v60; // [sp+38h] [bp-A0h]
  Int16 *p_CoorsY; // [sp+3Ch] [bp-9Ch]
  Int16 *p_CoorsZ; // [sp+40h] [bp-98h]
  Int16 *p_CoorsX; // [sp+44h] [bp-94h]
  __int16 *v64; // [sp+48h] [bp-90h]
  __int16 *v65; // [sp+4Ch] [bp-8Ch]
  _DWORD *v66; // [sp+50h] [bp-88h]
  _DWORD *v67; // [sp+54h] [bp-84h]
  _DWORD *v68; // [sp+58h] [bp-80h]
  bool pBool; // [sp+5Fh] [bp-79h] BYREF
  CVector posn; // [sp+60h] [bp-78h] BYREF
  RwV3d_0 pointsIn; // [sp+6Ch] [bp-6Ch] BYREF

  v15.n64_u64[0] = __PAIR64__(LODWORD(CentreY), LODWORD(CentreX));
  v16 = (float)(CentreX + 3000.0) / 750.0;
  v18 = (int)(float)((float)(CentreY + 3000.0) / 750.0);
  v19 = MaxRad;
  v20 = (float)((float)(unsigned __int16)rand() * 0.000015259) * 15.0;
  v21 = (int)v16;
  v22 = v18;
  v23 = v19 + v19;
  v24 = v21;
  if ( v18 <= 0 )
    v22 = 0;
  if ( v22 >= 7 )
    v22 = 7;
  if ( v21 <= 0 )
    v24 = 0;
  if ( v24 >= 7 )
    v24 = 7;
  v25 = (char *)this + 4 * (v24 | (8 * v22));
  v58 = (int *)(v25 + 4356);
  v26 = v25 + 3204;
  v67 = v25 + 4644;
  v66 = v25 + 2628;
  v68 = v25 + 2052;
  v56 = (int)v20;
  v27 = 0;
  while ( 1 )
  {
    v28 = v27;
    v29 = *v68 == 0;
    if ( *v68 )
      v29 = *v67 == 0;
    if ( !v29 )
    {
      v30 = *v58;
      v31 = *v68 + 28 * (rand() % *v67 + v30);
      v32 = (__int16 *)(v31 + 8);
      v13.n64_u32[0] = *(_DWORD *)(v31 + 8);
      v13.n64_u64[0] = vsub_f32(
                         vmul_f32(
                           vcvt_f32_s32((int32x2_t)vmovl_s16(v13).n128_u64[0]),
                           (float32x2_t)0x3E0000003E000000LL),
                         v15).n64_u64[0];
      v33 = vmul_f32(v13, v13).n64_u64[0];
      v34 = *(float *)&v33 + *((float *)&v33 + 1);
      if ( (float)(*(float *)&v33 + *((float *)&v33 + 1)) < (float)((float)(MaxRad + 30.0) * (float)(MaxRad + 30.0)) )
      {
        v59 = (_WORD *)(v31 + 24);
        if ( v56 < (int)(((unsigned int)(*(unsigned __int16 *)(v31 + 24) | (*(unsigned __int8 *)(v31 + 26) << 16)) >> 16) & 0xF) )
        {
          v35 = *(_WORD *)(v31 + 24) & 0xF;
          if ( v35 )
            break;
        }
      }
    }
LABEL_50:
    v27 = v28 + 1;
    if ( v28 > 298 )
      return 0;
  }
  v36 = (__int16 *)(v31 + 16);
  v65 = (__int16 *)(v31 + 12);
  v37 = 0;
  v64 = (__int16 *)(v31 + 10);
  v60 = (CNodeAddress *)(v31 + 18);
  while ( 1 )
  {
    v38 = *v36 + v37;
    if ( *(unsigned __int8 *)(*v26 + v38) << 31 )
      goto LABEL_49;
    v39 = *(_DWORD *)(*v66 + 4 * v38);
    if ( (v39 & 0xFFC0) > 0x3F )
      goto LABEL_49;
    v40 = this->pNodes[(unsigned __int16)v39];
    if ( !v40 )
      goto LABEL_49;
    v41 = HIWORD(v39);
    if ( (*v59 & 0x20) == 0 )
      break;
    if ( bIncludeSwitchedOffs == 1 )
    {
      v42 = *((unsigned __int16 *)&v40[v41] + 12) | (*((unsigned __int8 *)&v40[v41] + 26) << 16);
      goto LABEL_26;
    }
LABEL_49:
    if ( ++v37 >= v35 )
      goto LABEL_50;
  }
  v42 = *((unsigned __int16 *)&v40[v41] + 12) | (*((unsigned __int8 *)&v40[v41] + 26) << 16);
  if ( (*((_WORD *)&v40[v41] + 12) & 0x20) != 0 && !bIncludeSwitchedOffs )
    goto LABEL_49;
LABEL_26:
  if ( v56 >= (int)(HIWORD(v42) & 0xF) )
    goto LABEL_49;
  v34 = sqrtf(v34);
  v43 = &v40[v41];
  if ( v34 >= v19 )
  {
    v13.n64_u32[0] = *(_DWORD *)&v43->CoorsX;
    v13.n64_u64[0] = vsub_f32(
                       vmul_f32(vcvt_f32_s32((int32x2_t)vmovl_s16(v13).n128_u64[0]), (float32x2_t)0x3E0000003E000000LL),
                       v15).n64_u64[0];
    v44 = vmul_f32(v13, v13).n64_u64[0];
    if ( sqrtf(*(float *)&v44 + *((float *)&v44 + 1)) >= v19 )
      goto LABEL_49;
  }
  p_CoorsX = &v43->CoorsX;
  v55 = this;
  v45 = -1;
  p_CoorsZ = &v43->CoorsZ;
  p_CoorsY = &v43->CoorsY;
  p_Address = &v43->Address;
  while ( 1 )
  {
    v47 = (float)(unsigned __int8)rand() * 0.0039062;
    *pFraction = v47;
    v48 = (float)*p_CoorsZ;
    v49 = (float)*v65;
    v50 = (float)((float)((float)*v32 * 0.125) * (float)(1.0 - v47)) + (float)(v47 * (float)((float)*p_CoorsX * 0.125));
    posn.y = (float)((float)(1.0 - v47) * (float)((float)*v64 * 0.125))
           + (float)(v47 * (float)((float)*p_CoorsY * 0.125));
    posn.x = v50;
    v51 = sqrtf(
            (float)((float)(v50 - v15.n64_f32[0]) * (float)(v50 - v15.n64_f32[0]))
          + (float)((float)(posn.y - v15.n64_f32[1]) * (float)(posn.y - v15.n64_f32[1])));
    v52 = (float)((float)(1.0 - v47) * (float)(v49 * 0.125)) + (float)(v47 * (float)(v48 * 0.125));
    posn.z = v52;
    if ( pInvCam )
    {
      pointsIn.y = posn.y;
      pointsIn.x = v50;
      pointsIn.z = v52;
      RwV3dTransformPoints(&pointsIn, &pointsIn, 1, (const RwMatrix *)pInvCam);
      IsSphereVisible = (float)(pointsIn.y + 2.0) >= CDraw::ms_fNearClipZ
                     && (float)(pointsIn.y + -2.0) <= CDraw::ms_fFarClipZ
                     && (float)((float)(pointsIn.x * TheCamera.m_vecFrustumNormals[0].x)
                              + (float)(pointsIn.y * TheCamera.m_vecFrustumNormals[0].y)) <= 2.0
                     && (float)((float)(pointsIn.x * TheCamera.m_vecFrustumNormals[1].x)
                              + (float)(pointsIn.y * TheCamera.m_vecFrustumNormals[1].y)) <= 2.0
                     && (float)((float)(pointsIn.y * TheCamera.m_vecFrustumNormals[2].y)
                              + (float)(pointsIn.z * TheCamera.m_vecFrustumNormals[2].z)) <= 2.0
                     && (float)((float)(pointsIn.y * TheCamera.m_vecFrustumNormals[3].y)
                              + (float)(pointsIn.z * TheCamera.m_vecFrustumNormals[3].z)) <= 2.0;
    }
    else
    {
      IsSphereVisible = CCamera::IsSphereVisible(&TheCamera, &posn, 2.0);
    }
    if ( v51 < v23 && v51 > MinRad && IsSphereVisible
      || v51 < MaxRadClose && v51 > MinRadClose && !IsSphereVisible && (rand() & 2u) <= 1 )
    {
      *pFromNode = *v60;
      *pToNode = *p_Address;
      v13.n64_u64[0] = *(unsigned __int64 *)&posn.x;
      pResult->z = posn.z;
      *(int16x4_t *)&pResult->x = v13;
      GroundZFor3DCoord = CWorld::FindGroundZFor3DCoord(posn.x, posn.y, posn.z + 2.0, &pBool, 0);
      if ( pBool )
        break;
    }
    if ( ++v45 >= 4 )
    {
      this = v55;
      v19 = MaxRad;
      goto LABEL_49;
    }
  }
  if ( fabsf(GroundZFor3DCoord - posn.z) > 3.0 )
    return 0;
  pResult->z = GroundZFor3DCoord;
  return 1;
}
// 316A3E: variable 'v13' is possibly undefined

//----- (00316E64) --------------------------------------------------------
Int32 __fastcall CPathFind::FindRegionForCoors(CPathFind *this, float X, float Y)
{
  int v4; // r1
  int v5; // r2

  v4 = 0;
  v5 = (int)(float)((float)(Y + 3000.0) / 750.0);
  if ( v5 <= 0 )
    v5 = 0;
  if ( v5 >= 7 )
    v5 = 7;
  if ( (int)(float)((float)(X + 3000.0) / 750.0) > 0 )
    v4 = (int)(float)((float)(X + 3000.0) / 750.0);
  if ( v4 >= 7 )
    v4 = 7;
  return v4 | (8 * v5);
}

//----- (00316EC0) --------------------------------------------------------
int __fastcall CPathFind::GeneratePedCreationCoors_Interior(
        CPathFind *this,
        float CentreX,
        float CentreY,
        CVector *pResult,
        CNodeAddress *pFromNode,
        CNodeAddress *pToNode,
        float *pFraction)
{
  int16x4_t v7; // d16
  float32x2_t v9; // d8
  int v10; // s0
  int v11; // r1
  int v12; // r2
  char *v13; // r0
  char *v14; // r1
  int v15; // r0
  int v16; // r6
  bool v17; // zf
  int v18; // r5
  int v19; // r0
  __int16 *v20; // r11
  unsigned __int64 v21; // d0
  int v22; // r5
  unsigned int v23; // r0
  CPathNode *v24; // r1
  int v25; // r9
  CPathNode *v26; // r0
  Int16 *p_CoorsZ; // r6
  Int16 *p_CoorsY; // r10
  Int16 *p_CoorsX; // r8
  float v30; // s0
  RwReal v31; // s2
  RwReal v32; // s4
  RwReal v33; // s0
  float GroundZFor3DCoord; // r0
  int *v36; // [sp+4h] [bp-8Ch]
  int v38; // [sp+Ch] [bp-84h]
  int v39; // [sp+10h] [bp-80h]
  __int16 *v40; // [sp+14h] [bp-7Ch]
  char *v41; // [sp+18h] [bp-78h]
  _DWORD *v42; // [sp+1Ch] [bp-74h]
  _DWORD *v43; // [sp+20h] [bp-70h]
  bool pBool; // [sp+2Fh] [bp-61h] BYREF

  v9.n64_u64[0] = __PAIR64__(LODWORD(CentreY), LODWORD(CentreX));
  v10 = (int)(float)((float)(CentreX + 3000.0) / 750.0);
  v11 = (int)(float)((float)(CentreY + 3000.0) / 750.0);
  v12 = v10;
  if ( v11 <= 0 )
    v11 = 0;
  if ( v11 >= 7 )
    v11 = 7;
  if ( v10 <= 0 )
    v12 = 0;
  if ( v12 >= 7 )
    v12 = 7;
  v13 = (char *)this + 4 * (v12 | (8 * v11));
  v36 = (int *)(v13 + 4356);
  v42 = v13 + 4644;
  v14 = v13 + 2628;
  v43 = v13 + 2052;
  v15 = 0;
  v41 = v14;
  while ( 1 )
  {
    v16 = v15;
    v17 = *v43 == 0;
    if ( *v43 )
      v17 = *v42 == 0;
    if ( !v17 )
    {
      v18 = *v36;
      v19 = *v43 + 28 * (rand() % *v42 + v18);
      v20 = (__int16 *)(v19 + 12);
      if ( (float)((float)*(__int16 *)(v19 + 12) * 0.125) > 900.0 )
      {
        v7.n64_u32[0] = *(_DWORD *)(v19 + 8);
        v7.n64_u64[0] = vsub_f32(
                          vmul_f32(
                            vcvt_f32_s32((int32x2_t)vmovl_s16(v7).n128_u64[0]),
                            (float32x2_t)0x3E0000003E000000LL),
                          v9).n64_u64[0];
        v21 = vmul_f32(v7, v7).n64_u64[0];
        if ( (float)(*(float *)&v21 + *((float *)&v21 + 1)) < 2500.0 )
        {
          v39 = *(_WORD *)(v19 + 24) & 0xF;
          if ( v39 )
            break;
        }
      }
    }
LABEL_24:
    v15 = v16 + 1;
    if ( v16 >= 199 )
      return 0;
  }
  v22 = 0;
  v40 = (__int16 *)(v19 + 16);
  v38 = v16;
  while ( 1 )
  {
    v23 = *(_DWORD *)(*(_DWORD *)v41 + 4 * (*v40 + v22));
    if ( (v23 & 0xFFC0) <= 0x3F )
    {
      v24 = this->pNodes[(unsigned __int16)v23];
      if ( v24 )
        break;
    }
LABEL_23:
    ++v22;
    v16 = v38;
    if ( v22 >= v39 )
      goto LABEL_24;
  }
  v25 = -1;
  v26 = &v24[HIWORD(v23)];
  p_CoorsZ = &v26->CoorsZ;
  p_CoorsY = &v26->CoorsY;
  p_CoorsX = &v26->CoorsX;
  while ( 1 )
  {
    v30 = (float)(unsigned __int8)rand() * 0.0039062;
    *pFraction = v30;
    v31 = (float)((float)(1.0 - v30) * (float)((float)*v20 * 0.125)) + (float)(v30 * (float)((float)*p_CoorsZ * 0.125));
    v32 = (float)((float)((float)*(v20 - 2) * 0.125) * (float)(1.0 - v30))
        + (float)(v30 * (float)((float)*p_CoorsX * 0.125));
    v33 = (float)((float)(1.0 - v30) * (float)((float)*(v20 - 1) * 0.125))
        + (float)(v30 * (float)((float)*p_CoorsY * 0.125));
    pResult->x = v32;
    pResult->y = v33;
    pResult->z = v31;
    GroundZFor3DCoord = CWorld::FindGroundZFor3DCoord(v32, v33, v31 + 2.0, &pBool, 0);
    if ( pBool && fabsf(GroundZFor3DCoord - pResult->z) < 3.0 )
      break;
    if ( ++v25 >= 4 )
      goto LABEL_23;
  }
  pResult->z = GroundZFor3DCoord;
  return 1;
}
// 316FC0: variable 'v7' is possibly undefined

//----- (00317180) --------------------------------------------------------
int __fastcall CPathFind::TestCoorsCloseness(CPathFind *this, CVector Coors, RwReal GraphType, CVector PlayerCoors)
{
  int v4; // r4
  float pDistance[8]; // [sp+40h] [bp-20h] BYREF

  v4 = 0;
  CPathFind::DoPathSearch(
    this,
    GraphType,
    PlayerCoors,
    (CNodeAddress)0xFFFF,
    Coors,
    0,
    &DummyResult2,
    0,
    pDistance,
    50.0,
    0,
    100.0,
    0,
    EmptyNodeAddress,
    0,
    0);
  if ( pDistance[0] < 100.0 )
    return 1;
  return v4;
}
// 317180: using guessed type float var_20[8];

//----- (0031720C) --------------------------------------------------------
float __fastcall CPathFind::CalcRoadDensity(CPathFind *this, float TestX, float TestY)
{
  float v3; // s0
  int v6; // r2
  char *v7; // r1
  int v8; // r10
  int v9; // r9
  _DWORD *v10; // r11
  int v11; // r5
  __int16 *v12; // r2
  float v13; // s10
  float v14; // s12
  int v15; // r1
  int v16; // r2
  int v17; // r8
  int v18; // lr
  int v19; // r2
  int v20; // r3
  unsigned int v21; // r1
  CPathNode *v22; // r4
  CPathNode *v23; // r1
  float CoorsY; // s14
  float CoorsX; // s1
  unsigned int v26; // r1
  char *v27; // r12
  unsigned int v28; // r1
  float v29; // s14
  int v31; // [sp+0h] [bp-24h]
  _DWORD *v32; // [sp+4h] [bp-20h]

  v3 = 0.0;
  v6 = 0;
  do
  {
    v7 = (char *)this + 4 * v6;
    v8 = *((_DWORD *)v7 + 513);
    v31 = v6;
    if ( v8 )
    {
      v9 = *((_DWORD *)v7 + 1089);
      if ( v9 >= 1 )
      {
        v10 = v7 + 3492;
        v11 = 0;
        v32 = v7 + 2628;
        do
        {
          v12 = (__int16 *)(v8 + 28 * v11);
          v13 = (float)v12[4] * 0.125;
          if ( fabsf(v13 - TestX) < 80.0 )
          {
            v14 = (float)v12[5] * 0.125;
            if ( fabsf(v14 - TestY) < 80.0 )
            {
              v15 = v12[12] & 0xF;
              if ( v15 )
              {
                v16 = v12[8];
                v17 = 2 * v16;
                v18 = *v32 + 4 * v16;
                v19 = v15 & 0xFFFFFF;
                v20 = 0;
                do
                {
                  v21 = *(_DWORD *)(v18 + 4 * v20);
                  v22 = this->pNodes[(unsigned __int16)v21];
                  if ( v22 )
                  {
                    v23 = &v22[HIWORD(v21)];
                    CoorsY = (float)v23->CoorsY;
                    CoorsX = (float)v23->CoorsX;
                    v26 = *(unsigned __int16 *)(*v10 + v17 + 2 * v20);
                    v27 = (char *)this + 4 * (v26 >> 10);
                    if ( *((_DWORD *)v27 + 513) )
                    {
                      v28 = *(unsigned __int16 *)(*((_DWORD *)v27 + 585) + 14 * (v26 & 0x3FF) + 11);
                      v29 = sqrtf(
                              (float)((float)(v13 - (float)(CoorsX * 0.125)) * (float)(v13 - (float)(CoorsX * 0.125)))
                            + (float)((float)(v14 - (float)(CoorsY * 0.125)) * (float)(v14 - (float)(CoorsY * 0.125))));
                      v3 = (float)(v3 + (float)(v29 * (float)(v28 & 7))) + (float)(v29 * (float)((v28 >> 3) & 7));
                    }
                  }
                  ++v20;
                }
                while ( v20 < v19 );
              }
            }
          }
          ++v11;
        }
        while ( v11 < v9 );
      }
    }
    v6 = v31 + 1;
  }
  while ( v31 != 63 );
  return v3 / 2500.0;
}

//----- (003173A4) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
float __fastcall CPathFind::CalcDistToAnyConnectingLinks(CPathFind *this, CPathNode *pNode, CVector SearchCoors)
{
  float32x2_t v3; // d0
  float32x2_t v4; // d8
  __int16 v7; // r0
  __int16 *v8; // r11
  int v9; // r6
  CNodeAddress v10; // r1
  CPathNode *v11; // r2
  __int16 *v12; // r0
  RwReal v13; // s2
  RwReal v14; // s4
  int v15; // s2
  int v16; // s4
  CVector pVecEnd; // [sp+4h] [bp-54h] BYREF
  CVector pVecStart; // [sp+10h] [bp-48h] BYREF
  CVector pPoint; // [sp+1Ch] [bp-3Ch] BYREF

  pPoint = SearchCoors;
  v8 = (__int16 *)((char *)pNode + 24);
  v7 = *((_WORD *)pNode + 12);
  v4.n64_u32[0] = 1232348158;
  if ( (v7 & 0xF) != 0 )
  {
    v9 = 0;
    do
    {
      v10 = this->pAdjacentNodes[pNode->Address.Region][pNode->IndexAdjacentNodes + v9];
      v11 = this->pNodes[v10.Region];
      if ( v11 )
      {
        v12 = (__int16 *)&v11[HIWORD(*(unsigned int *)&v10)];
        v13 = (float)pNode->CoorsX * 0.125;
        v14 = (float)pNode->CoorsZ * 0.125;
        pVecStart.y = (float)pNode->CoorsY * 0.125;
        pVecStart.x = v13;
        pVecStart.z = v14;
        v15 = v12[4];
        v16 = v12[6];
        pVecEnd.y = (float)v12[5] * 0.125;
        pVecEnd.x = (float)v15 * 0.125;
        pVecEnd.z = (float)v16 * 0.125;
        v3.n64_u32[0] = CCollision::DistToLineSqr(&pVecStart, &pVecEnd, &pPoint);
        v4.n64_u64[0] = vmin_f32(v4, v3).n64_u64[0];
        v7 = *v8;
      }
      ++v9;
    }
    while ( v9 < (v7 & 0xF) );
  }
  return sqrtf(v4.n64_f32[0]);
}
// 3173A4: fragmented variable at 0:r2.8,8:^60.4 may be wrong
// 3173A4: variables would overlap: 0:r2.8,8:^60.4 and ^60.4

//----- (003174D0) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
void __fastcall CPathFind::FindNodeClosestInRegion(
        CPathFind *this,
        CNodeAddress *pNodeFound,
        int Region,
        CVector SearchCoors,
        int GraphType,
        float *pClosestDist,
        int bIgnoreSwitchedOff,
        int bIgnoreAlreadyFound,
        int bBoatNodes,
        bool bIgnoreInteriors)
{
  int v10; // r5
  char *v11; // r1
  RwReal x; // r12
  int v13; // r0
  int v14; // r2
  int *v15; // r2
  int *v17; // r10
  int v18; // r4
  float *v19; // r9
  int v20; // r8
  float v21; // s20
  int i; // r6
  int v23; // r1
  float v24; // s30
  int v25; // r9
  RwReal v26; // r11
  float v27; // r0
  float v28; // s0
  UInt16 v30; // [sp+8h] [bp-68h]
  CVector v32; // 0:r2.8,8:^0.4

  v30 = Region;
  v11 = (char *)this + 4 * Region;
  x = SearchCoors.x;
  v13 = *((_DWORD *)v11 + 513);
  if ( !v13 )
    return;
  v14 = GraphType;
  if ( GraphType == 1 )
  {
    v10 = *((_DWORD *)v11 + 1089);
    v15 = (int *)(v11 + 4068);
LABEL_6:
    v14 = *v15;
    if ( v10 >= v14 )
      return;
    goto LABEL_7;
  }
  if ( !GraphType )
  {
    v10 = 0;
    v15 = (int *)(v11 + 4356);
    goto LABEL_6;
  }
LABEL_7:
  v17 = (int *)(v11 + 2052);
  v18 = bIgnoreSwitchedOff;
  v19 = pClosestDist;
  v20 = v14 - 1;
  v21 = SearchCoors.x;
  for ( i = 28 * v10; ; i += 28 )
  {
    v23 = v13 + i;
    if ( v18 != 1 || (*(_WORD *)(v23 + 24) & 0x20) == 0 )
    {
      if ( ((*(_WORD *)(v23 + 24) & 0x200) == 0) | bIgnoreAlreadyFound ^ 1 )
      {
        if ( bBoatNodes == (((unsigned int)(*(unsigned __int16 *)(v23 + 24) | (*(unsigned __int8 *)(v23 + 26) << 16)) >> 7) & 1) )
        {
          v24 = (float)((float)(fabsf((float)((float)*(__int16 *)(v23 + 8) * 0.125) - v21)
                              + fabsf((float)((float)*(__int16 *)(v23 + 10) * 0.125) - SearchCoors.y))
                      + (float)(fabsf((float)((float)*(__int16 *)(v23 + 12) * 0.125) - SearchCoors.z) * 3.0))
              * 0.3;
          if ( v24 < *v19 )
          {
            *(_QWORD *)&v32.x = __PAIR64__(LODWORD(SearchCoors.y), LODWORD(x));
            v32.z = SearchCoors.z;
            v25 = bBoatNodes;
            v26 = x;
            v27 = CPathFind::CalcDistToAnyConnectingLinks(this, (CPathNode *)v23, v32);
            x = v26;
            bBoatNodes = v25;
            v18 = bIgnoreSwitchedOff;
            v19 = pClosestDist;
            v28 = v24 + (float)(v27 * 0.2);
            if ( v28 < *pClosestDist )
            {
              *pClosestDist = v28;
              pNodeFound->Index = v10;
              pNodeFound->Region = v30;
            }
          }
        }
      }
    }
    if ( v20 == v10 )
      break;
    ++v10;
    v13 = *v17;
  }
}
// 3174D0: fragmented variable at 0:r3.4,4:^78.8 may be wrong
// 3174D0: variables would overlap: 0:r3.4,4:^78.8 and ^78.4
// 3174D0: variables would overlap: 0:r3.4,4:^78.8 and ^7C.4
// 3174D0: variables would overlap: ^84.4 and ^84.8
// 3174D0: using guessed type _DWORD bIgnoreSwitchedOff_0;
// 3174D0: using guessed type _DWORD bBoatNodes_0;

//----- (00317650) --------------------------------------------------------
Int32 __fastcall CPathFind::FindXRegionForCoors(CPathFind *this, float X)
{
  Int32 result; // r0

  result = (int)(float)((float)(X + 3000.0) / 750.0);
  if ( result <= 0 )
    result = 0;
  if ( result >= 7 )
    return 7;
  return result;
}

//----- (00317684) --------------------------------------------------------
Int32 __fastcall CPathFind::FindYRegionForCoors(CPathFind *this, float Y)
{
  Int32 result; // r0

  result = (int)(float)((float)(Y + 3000.0) / 750.0);
  if ( result <= 0 )
    result = 0;
  if ( result >= 7 )
    return 7;
  return result;
}

//----- (003176B8) --------------------------------------------------------
float __fastcall CPathFind::FindXCoorsForRegion(CPathFind *this, Int32 Region)
{
  return (float)((float)Region * 750.0) + -3000.0;
}

//----- (003176E0) --------------------------------------------------------
float __fastcall CPathFind::FindYCoorsForRegion(CPathFind *this, Int32 Region)
{
  return (float)((float)Region * 750.0) + -3000.0;
}

//----- (00317708) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
CNodeAddress *__fastcall CPathFind::FindNthNodeClosestToCoors(
        CNodeAddress *retstr,
        CPathFind *this,
        CVector SearchCoors,
        float GraphType,
        float CutoffDist,
        bool bIgnoreSwitchedOff,
        int bIgnoreBetweenLevels,
        Int32 N,
        int bWaterNode,
        _DWORD *bIgnoreInteriors,
        CNodeAddress *pNMinus1th)
{
  CNodeAddress *v11; // r11
  CNodeAddress *v12; // r8
  int i; // r1
  CNodeAddress *v14; // r2
  CNodeAddress v15; // r6
  CNodeAddress **v16; // r3
  CNodeAddress *v17; // r2
  int v18; // r6
  int v19; // r5
  int v20; // r12
  char v21; // lr
  RwReal v22; // r6
  int v23; // r11
  CNodeAddress *result; // r0
  unsigned int v25; // r0
  __int16 v26; // t1
  char v27; // r2
  RwReal SearchCoorsa; // [sp+1Ch] [bp-34h]
  RwReal x; // [sp+24h] [bp-2Ch]
  CVector v31; // 0:r2.8,8:^0.4
  CVector v32; // 0:r2.8,8:^0.4

  v12 = retstr;
  x = SearchCoors.x;
  SearchCoorsa = SearchCoors.y;
  for ( i = 0; i != 72; ++i )
  {
    v14 = &v12[i];
    v15 = v14[513];
    if ( !*(_DWORD *)&v15 )
      continue;
    if ( LODWORD(SearchCoors.z) == 1 )
    {
      retstr = (CNodeAddress *)v14[1089];
      v16 = (CNodeAddress **)&v14[1017];
      goto LABEL_7;
    }
    if ( !LODWORD(SearchCoors.z) )
    {
      v16 = (CNodeAddress **)&v14[1089];
      retstr = 0;
LABEL_7:
      v11 = *v16;
    }
    if ( (int)retstr < (int)v11 )
    {
      *(_WORD *)(*(_DWORD *)&v15 + 28 * (_DWORD)retstr + 24) &= ~0x200u;
      if ( (CNodeAddress *)((char *)&retstr->Region + 1) != v11 )
      {
        v17 = v14 + 513;
        v18 = (char *)&v11[-1].Index + 1 - (char *)retstr;
        v19 = 28 * (_DWORD)retstr + 52;
        do
        {
          --v18;
          v20 = *(_DWORD *)v17 + v19;
          v21 = *(_BYTE *)(v20 + 2);
          *(_WORD *)v20 &= ~0x200u;
          v19 += 28;
          *(_BYTE *)(v20 + 2) = v21;
        }
        while ( v18 );
      }
    }
  }
  v22 = SearchCoorsa;
  if ( bIgnoreBetweenLevels < 1 )
  {
LABEL_19:
    v32.z = SearchCoors.z;
    *(_QWORD *)&v32.x = __PAIR64__(LODWORD(v22), LODWORD(x));
    return CPathFind::FindNodeClosestToCoors(v12, this, v32, GraphType, CutoffDist, 0, 1, N, 0, SLOBYTE(SearchCoorsa));
  }
  else
  {
    v23 = bIgnoreBetweenLevels + 1;
    while ( 1 )
    {
      v31.z = SearchCoors.z;
      *(_QWORD *)&v31.x = __PAIR64__(LODWORD(v22), LODWORD(x));
      result = CPathFind::FindNodeClosestToCoors(
                 v12,
                 this,
                 v31,
                 GraphType,
                 CutoffDist,
                 0,
                 1,
                 N,
                 bWaterNode,
                 SLOBYTE(SearchCoorsa));
      if ( bIgnoreInteriors )
        *bIgnoreInteriors = result;
      if ( (unsigned __int16)result == 0xFFFF )
        break;
      --v23;
      v25 = *(_DWORD *)&v12[(unsigned __int16)result + 513] + 28 * ((unsigned int)result >> 16);
      v26 = *(_WORD *)(v25 + 24);
      v25 += 24;
      v27 = *(_BYTE *)(v25 + 2);
      *(_WORD *)v25 = v26 | 0x200;
      *(_BYTE *)(v25 + 2) = v27;
      if ( v23 <= 1 )
        goto LABEL_19;
    }
  }
  return result;
}
// 317708: fragmented variable at 0:r2.8,8:^58.4 may be wrong
// 317708: variables would overlap: 0:r2.8,8:^58.4 and ^58.4

//----- (0031784C) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
void __fastcall CPathFind::Find2NodesForCarCreation(
        CPathFind *this,
        CVector SearchCoors,
        CNodeAddress *ClosestNode,
        CNodeAddress *OtherNode,
        float bIgnoreSwitchedOff)
{
  RwReal y; // r10
  RwReal x; // r9
  int v8; // lr
  char *v9; // r2
  int v10; // r6
  int v11; // r3
  _DWORD *v12; // r2
  int v13; // r3
  int v14; // r6
  int v15; // r4
  char v16; // r0
  CNodeAddress NodeClosestToCoors; // r0
  CPathNode *v18; // r1
  __int16 v19; // t1
  char v20; // r3
  CNodeAddress v21; // r0
  CNodeAddress *v22; // r1
  CNodeAddress v23; // r0
  CPathNode *v24; // r1
  __int16 v25; // t1
  char v26; // r3
  CNodeAddress *v27; // r0
  CPathFind *v28; // r1
  CNodeAddress *v29; // r9
  RwReal v30; // r3
  CPathNode *v31; // r0
  __int16 v32; // t1
  char v33; // r2
  RwReal v34; // r2
  CNodeAddress v35; // r0
  CPathNode *v36; // r1
  __int16 v37; // t1
  char v38; // r3
  int v39; // r4
  CPathNode *v40; // r5
  int v41; // r3
  int v42; // r12
  CNodeAddress *v43; // r5
  int v44; // r4
  int v45; // r3
  CPathNode *v46; // r6
  int v47; // r3
  CNodeAddress *v48; // r1
  int v49; // r6
  CPathNode *v50; // r5
  int v51; // r4
  int v52; // r3
  CNodeAddress *v53; // r5
  int v54; // [sp+0h] [bp-50h]
  int v55; // [sp+0h] [bp-50h]
  bool bIgnoreInteriors; // [sp+1Ch] [bp-34h]
  bool bIgnoreInteriorsa; // [sp+1Ch] [bp-34h]
  _BOOL2 bIgnoreInteriorsb; // [sp+1Ch] [bp-34h]
  RwReal SearchCoorsa; // [sp+20h] [bp-30h]
  CNodeAddress v60; // [sp+24h] [bp-2Ch]
  CNodeAddress v61; // [sp+28h] [bp-28h]
  CNodeAddress v62; // [sp+2Ch] [bp-24h]
  CNodeAddress v63; // [sp+30h] [bp-20h]
  CVector v64; // 0:r2.8,8:^0.4
  CVector v65; // 0:r2.8,8:^0.4

  y = SearchCoors.y;
  x = SearchCoors.x;
  v62.Region = -1;
  v8 = 0;
  v63.Region = -1;
  SearchCoorsa = SearchCoors.z;
  do
  {
    v9 = (char *)this + 4 * v8;
    v10 = *((_DWORD *)v9 + 513);
    if ( v10 )
    {
      v11 = *((_DWORD *)v9 + 1089);
      if ( v11 >= 1 )
      {
        *(_WORD *)(v10 + 24) &= ~0x200u;
        if ( v11 != 1 )
        {
          v12 = v9 + 2052;
          v13 = v11 - 1;
          v14 = 52;
          do
          {
            --v13;
            v15 = *v12 + v14;
            v16 = *(_BYTE *)(v15 + 2);
            *(_WORD *)v15 &= ~0x200u;
            v14 += 28;
            *(_BYTE *)(v15 + 2) = v16;
          }
          while ( v13 );
        }
      }
    }
    ++v8;
  }
  while ( v8 != 72 );
  v54 = 0;
  SearchCoors.y = y;
  SearchCoors.z = SearchCoorsa;
  NodeClosestToCoors = (CNodeAddress)CPathFind::FindNodeClosestToCoors(
                                       (CNodeAddress *)this,
                                       (CPathFind *)LODWORD(SearchCoors.x),
                                       *(CVector *)&SearchCoors.y,
                                       1000000.0,
                                       bIgnoreSwitchedOff,
                                       0,
                                       1,
                                       0,
                                       1,
                                       255);
  if ( NodeClosestToCoors.Region == 0xFFFF )
  {
    ClosestNode->Region = -1;
    OtherNode->Region = -1;
    return;
  }
  v18 = &this->pNodes[NodeClosestToCoors.Region][HIWORD(*(unsigned int *)&NodeClosestToCoors)];
  v19 = *((_WORD *)v18 + 12);
  v18 = (CPathNode *)((char *)v18 + 24);
  v20 = BYTE2(v18->pNext);
  LOWORD(v18->pNext) = v19 | 0x200;
  v64.x = y;
  BYTE2(v18->pNext) = v20;
  v60 = NodeClosestToCoors;
  v64.z = 0.0;
  v64.y = SearchCoorsa;
  v21 = (CNodeAddress)CPathFind::FindNodeClosestToCoors(
                        (CNodeAddress *)this,
                        (CPathFind *)LODWORD(x),
                        v64,
                        1000000.0,
                        bIgnoreSwitchedOff,
                        0,
                        1,
                        0,
                        1,
                        bIgnoreInteriors);
  if ( v21.Region == 0xFFFF )
  {
    v22 = ClosestNode;
    v23 = v60;
LABEL_22:
    *v22 = v23;
    return;
  }
  v24 = &this->pNodes[v21.Region][HIWORD(*(unsigned int *)&v21)];
  v25 = *((_WORD *)v24 + 12);
  v24 = (CPathNode *)((char *)v24 + 24);
  v26 = BYTE2(v24->pNext);
  LOWORD(v24->pNext) = v25 | 0x200;
  v65.x = y;
  BYTE2(v24->pNext) = v26;
  v61 = v21;
  v65.z = 0.0;
  v65.y = SearchCoorsa;
  v27 = CPathFind::FindNodeClosestToCoors(
          (CNodeAddress *)this,
          (CPathFind *)LODWORD(x),
          v65,
          1000000.0,
          bIgnoreSwitchedOff,
          0,
          1,
          0,
          1,
          bIgnoreInteriorsa);
  v28 = (CPathFind *)LODWORD(x);
  v29 = v27;
  v30 = SearchCoorsa;
  if ( (unsigned __int16)v27 == 0xFFFF )
  {
    LOWORD(v29) = -1;
  }
  else
  {
    v31 = &this->pNodes[(unsigned __int16)v27][(unsigned int)v27 >> 16];
    v32 = *((_WORD *)v31 + 12);
    v31 = (CPathNode *)((char *)v31 + 24);
    v33 = BYTE2(v31->pNext);
    LOWORD(v31->pNext) = v32 | 0x200;
    BYTE2(v31->pNext) = v33;
    v55 = 0;
    v34 = y;
    v62 = (CNodeAddress)v29;
    v35 = (CNodeAddress)CPathFind::FindNodeClosestToCoors(
                          (CNodeAddress *)this,
                          v28,
                          *(CVector *)(&v30 - 1),
                          1000000.0,
                          bIgnoreSwitchedOff,
                          0,
                          1,
                          0,
                          1,
                          bIgnoreInteriorsb);
    if ( v35.Region != 0xFFFF )
    {
      v36 = &this->pNodes[v35.Region][HIWORD(*(unsigned int *)&v35)];
      v37 = *((_WORD *)v36 + 12);
      v36 = (CPathNode *)((char *)v36 + 24);
      v38 = BYTE2(v36->pNext);
      LOWORD(v36->pNext) = v37 | 0x200;
      BYTE2(v36->pNext) = v38;
      v63 = v35;
      bIgnoreInteriorsb = v35.Region;
    }
  }
  *ClosestNode = v60;
  v39 = HIWORD(*(unsigned int *)&v60);
  v23 = v61;
  v40 = ThePaths.pNodes[v60.Region];
  v41 = *((_WORD *)&v40[HIWORD(*(unsigned int *)&v60)] + 12) & 0xF;
  if ( !v41 )
    goto LABEL_21;
  v42 = v39;
  v43 = &ThePaths.pAdjacentNodes[v60.Region][v40[v39].IndexAdjacentNodes];
  v44 = v41 & 0xFFFFFF;
  v45 = 0;
  while ( v43[v45].Region != v61.Region || v43[v45].Index != HIWORD(*(unsigned int *)&v61) )
  {
    if ( ++v45 >= v44 )
      goto LABEL_21;
  }
  if ( (unsigned __int16)v29 != 0xFFFF )
  {
    v23 = v62;
    v50 = ThePaths.pNodes[v60.Region];
    if ( (*((_WORD *)&v50[HIWORD(*(unsigned int *)&v60)] + 12) & 0xF) == 0 )
      goto LABEL_21;
    v51 = *((_WORD *)&v50[HIWORD(*(unsigned int *)&v60)] + 12) & 0xF;
    v52 = 0;
    v53 = &ThePaths.pAdjacentNodes[v60.Region][v50[v42].IndexAdjacentNodes];
    while ( v53[v52].Region != v62.Region || v53[v52].Index != HIWORD(*(unsigned int *)&v62) )
    {
      if ( ++v52 >= v51 )
        goto LABEL_21;
    }
  }
  if ( bIgnoreInteriorsb == 0xFFFF )
    return;
  v23 = v63;
  v46 = ThePaths.pNodes[v60.Region];
  v47 = *((_WORD *)&v46[HIWORD(*(unsigned int *)&v60)] + 12) & 0xF;
  if ( !v47 )
  {
LABEL_21:
    v22 = OtherNode;
    goto LABEL_22;
  }
  v48 = &ThePaths.pAdjacentNodes[v60.Region][v46[v42].IndexAdjacentNodes];
  v49 = 0;
  while ( v48[v49].Region != v63.Region || v48[v49].Index != HIWORD(*(unsigned int *)&v63) )
  {
    if ( ++v49 >= v47 )
      goto LABEL_21;
  }
}
// 317AF4: masking with 0xFFFFFF was optimized away because r3.4 <= 0xF
// 317B4E: masking with 0xFFFFFF was optimized away because r3.4 <= 0xF
// 31784C: fragmented variable at 0:r1.12 may be wrong
// 31784C: fragmented variable at r3.4 may be wrong

//----- (00317BA0) --------------------------------------------------------
void __fastcall CPathFind::RecordNodesClosestToCoors(
        CPathFind *this,
        CVector SearchCoors,
        float GraphType,
        Int32 NoOfNodes,
        CNodeAddress *ClosestNodes,
        float CutoffDist,
        float bIgnoreSwitchedOff,
        bool bIgnoreBetweenLevels,
        int bWaterNode,
        int bIgnoreInteriors)
{
  CPathFind *v10; // r10
  CPathFind *v12; // r8
  RwReal v13; // r12
  int i; // r1
  char *v15; // r5
  int v16; // r6
  CPathFind **v17; // r2
  _DWORD *v18; // r5
  int v19; // r6
  int v20; // r2
  int v21; // lr
  char v22; // r11
  RwReal z; // r4
  int v24; // r11
  CNodeAddress NodeClosestToCoors; // r0
  int v26; // r1
  __int16 v27; // t1
  char v28; // r3
  char SearchCoorsa; // [sp+1Ch] [bp-34h]
  RwReal x; // [sp+20h] [bp-30h]
  RwReal y; // [sp+24h] [bp-2Ch]
  CVector v32; // 0:r2.8,8:^0.4

  v12 = this;
  v13 = GraphType;
  y = SearchCoors.y;
  SearchCoorsa = LOBYTE(SearchCoors.z);
  x = SearchCoors.x;
  for ( i = 0; i != 72; ++i )
  {
    v15 = (char *)v12 + 4 * i;
    v16 = *((_DWORD *)v15 + 513);
    if ( !v16 )
      continue;
    if ( LODWORD(v13) == 1 )
    {
      this = (CPathFind *)*((_DWORD *)v15 + 1089);
      v17 = (CPathFind **)(v15 + 4068);
      goto LABEL_7;
    }
    if ( v13 == 0.0 )
    {
      v17 = (CPathFind **)(v15 + 4356);
      this = 0;
LABEL_7:
      v10 = *v17;
    }
    if ( (int)this < (int)v10 )
    {
      *(_WORD *)(v16 + 28 * (_DWORD)this + 24) &= ~0x200u;
      if ( &this->ColourGroups[1] != (UInt8 *)v10 )
      {
        v18 = v15 + 2052;
        v19 = (char *)&v10[-1].RequestMaxY + 3 - (char *)this;
        v20 = 28 * (_DWORD)this + 52;
        do
        {
          --v19;
          v21 = *v18 + v20;
          v22 = *(_BYTE *)(v21 + 2);
          *(_WORD *)v21 &= ~0x200u;
          v20 += 28;
          *(_BYTE *)(v21 + 2) = v22;
        }
        while ( v19 );
        v13 = GraphType;
      }
    }
  }
  z = SearchCoors.z;
  if ( NoOfNodes >= 1 )
  {
    v24 = NoOfNodes + 1;
    do
    {
      v32.z = v13;
      *(_QWORD *)&v32.x = __PAIR64__(LODWORD(z), LODWORD(y));
      NodeClosestToCoors = (CNodeAddress)CPathFind::FindNodeClosestToCoors(
                                           (CNodeAddress *)v12,
                                           (CPathFind *)LODWORD(x),
                                           v32,
                                           CutoffDist,
                                           bIgnoreSwitchedOff,
                                           0,
                                           1,
                                           bWaterNode,
                                           bIgnoreInteriors,
                                           SearchCoorsa);
      v13 = GraphType;
      if ( NodeClosestToCoors.Region == 0xFFFF )
        break;
      --v24;
      v26 = (int)&v12->pNodes[NodeClosestToCoors.Region][HIWORD(*(unsigned int *)&NodeClosestToCoors)];
      v27 = *(_WORD *)(v26 + 24);
      v26 += 24;
      v28 = *(_BYTE *)(v26 + 2);
      *(_WORD *)v26 = v27 | 0x200;
      *(_BYTE *)(v26 + 2) = v28;
      *ClosestNodes++ = NodeClosestToCoors;
    }
    while ( v24 > 1 );
  }
}
// 317BF2: variable 'v10' is possibly undefined
// 317C80: variable 'SearchCoorsa' is possibly undefined

//----- (00317CCC) --------------------------------------------------------
int __fastcall CPathFind::These2NodesAreAdjacent(CPathFind *this, CNodeAddress Node1, CNodeAddress Node2)
{
  CPathNode *v3; // r3
  int v4; // lr
  CNodeAddress *v5; // r1
  int v6; // r0

  v3 = ThePaths.pNodes[Node1.Region];
  v4 = *((_WORD *)&v3[Node1.Index] + 12) & 0xF;
  if ( !v4 )
    return 0;
  v5 = &ThePaths.pAdjacentNodes[Node1.Region][v3[Node1.Index].IndexAdjacentNodes];
  v6 = 0;
  while ( v5[v6].Region != Node2.Region || v5[v6].Index != Node2.Index )
  {
    if ( ++v6 >= (v4 & 0xFFFFFF) )
      return 0;
  }
  return 1;
}

//----- (00317D48) --------------------------------------------------------
Int32 __fastcall CPathFind::RecordNodesInCircle(
        CPathFind *this,
        const CVector *Centre,
        const float Radius,
        int GraphType,
        Int32 NoOfNodes,
        CNodeAddress *Nodes,
        int bIgnoreSwitchedOff,
        bool bIgnoreBetweenLevels,
        int bIgnoreAlreadyFound,
        int bBoatNodes,
        bool bIgnoreInteriors)
{
  int v11; // r8
  int v12; // r12
  int16x4_t v13; // d17
  float v14; // s0
  int v15; // r0
  int v16; // r2
  int v17; // r9
  char *v18; // r5
  int v19; // r0
  int *v20; // r3
  int *v21; // r10
  int v22; // r5
  int v23; // r11
  int v24; // r0
  unsigned __int64 v25; // d3
  CNodeAddress *v26; // r0

  v14 = Radius * Radius;
  v15 = 0;
  v16 = 0;
  while ( 1 )
  {
    v17 = v15;
    v18 = (char *)this + 4 * v15;
    v19 = *((_DWORD *)v18 + 513);
    if ( v19 )
      break;
LABEL_19:
    v15 = v17 + 1;
    if ( v17 >= 71 )
      return v16;
  }
  if ( GraphType == 1 )
  {
    v12 = *((_DWORD *)v18 + 1089);
    v20 = (int *)(v18 + 4068);
  }
  else
  {
    if ( GraphType )
      goto LABEL_8;
    v12 = 0;
    v20 = (int *)(v18 + 4356);
  }
  v11 = *v20;
LABEL_8:
  if ( v12 >= v11 )
    goto LABEL_19;
  v21 = (int *)(v18 + 2052);
  v22 = v12;
  v23 = 28 * v12;
  if ( bIgnoreSwitchedOff == 1 )
    goto LABEL_12;
LABEL_13:
  while ( 1 )
  {
    v24 = v19 + v23;
    if ( ((*(_WORD *)(v24 + 24) & 0x200) == 0) | bIgnoreAlreadyFound ^ 1
      && bBoatNodes == (((unsigned int)(*(unsigned __int16 *)(v24 + 24) | (*(unsigned __int8 *)(v24 + 26) << 16)) >> 7) & 1) )
    {
      v13.n64_u32[0] = *(_DWORD *)(v24 + 10);
      v13.n64_u64[0] = vsub_f32(
                         *(float32x2_t *)&Centre->y,
                         vmul_f32(
                           vcvt_f32_s32((int32x2_t)vmovl_s16(v13).n128_u64[0]),
                           (float32x2_t)0x3E0000003E000000LL)).n64_u64[0];
      v25 = vmul_f32(v13, v13).n64_u64[0];
      if ( (float)((float)((float)((float)(Centre->x + (float)((float)*(__int16 *)(v24 + 8) * -0.125))
                                 * (float)(Centre->x + (float)((float)*(__int16 *)(v24 + 8) * -0.125)))
                         + *(float *)&v25)
                 + *((float *)&v25 + 1)) < v14 )
      {
        Nodes[v16].Region = v17;
        v26 = &Nodes[v16++];
        v26->Index = v22;
      }
      if ( v16 == NoOfNodes )
        return v16;
    }
    while ( 1 )
    {
      if ( ++v22 >= v11 )
        goto LABEL_19;
      v19 = *v21;
      v23 += 28;
      if ( bIgnoreSwitchedOff != 1 )
        break;
LABEL_12:
      if ( (*(_WORD *)(v19 + v23 + 24) & 0x20) == 0 )
        goto LABEL_13;
    }
  }
}
// 317DAE: variable 'v12' is possibly undefined
// 317DAE: variable 'v11' is possibly undefined
// 317E1E: variable 'v13' is possibly undefined

//----- (00317E84) --------------------------------------------------------
CNodeAddress __fastcall CPathFind::FindNodeClosestToCoorsFavourDirection(
        CPathFind *this,
        CVector SearchCoors,
        int GraphType,
        float DirX,
        float DirY)
{
  int v5; // r5
  int v6; // r9
  float v7; // s0
  float v8; // s6
  float v9; // s4
  float v10; // s12
  unsigned __int16 v11; // lr
  int i; // r11
  char *v13; // r6
  int v14; // r4
  int *v15; // r5
  __int16 *v16; // r6
  int v17; // r4
  float v18; // s7
  float v19; // s11
  float v20; // s9
  float v21; // s13
  float v22; // s11
  float v23; // s7

  v7 = DirY;
  v8 = sqrtf((float)(DirX * DirX) + (float)(v7 * v7));
  if ( v8 == 0.0 )
  {
    v9 = 1.0;
  }
  else
  {
    v7 = DirY / v8;
    v9 = DirX / v8;
  }
  v10 = 10000.0;
  v11 = -1;
  for ( i = 0; i != 72; ++i )
  {
    v13 = (char *)this + 4 * i;
    v14 = *((_DWORD *)v13 + 513);
    if ( !v14 )
      continue;
    if ( GraphType == 1 )
    {
      v6 = *((_DWORD *)v13 + 1089);
      v15 = (int *)(v13 + 4068);
    }
    else
    {
      if ( GraphType )
        goto LABEL_11;
      v15 = (int *)(v13 + 4356);
      v6 = 0;
    }
    v5 = *v15;
LABEL_11:
    if ( v6 < v5 )
    {
      v16 = (__int16 *)(v14 + 28 * v6 + 8);
      v17 = v6;
      do
      {
        v18 = (float)((float)v16[1] * 0.125) - SearchCoors.y;
        v19 = (float)((float)*v16 * 0.125) - SearchCoors.x;
        v20 = (float)(fabsf(v19) + fabsf(v18)) + (float)(fabsf((float)((float)v16[2] * 0.125) - SearchCoors.z) * 3.0);
        if ( v20 < v10 )
        {
          v21 = sqrtf((float)(v19 * v19) + (float)(v18 * v18));
          if ( v21 == 0.0 )
          {
            v22 = 1.0;
          }
          else
          {
            v18 = v18 / v21;
            v22 = v19 / v21;
          }
          v23 = v20 + (float)((float)((float)((float)(v9 * v22) + (float)(v7 * v18)) + -1.0) * -20.0);
          if ( v23 < v10 )
          {
            v11 = i;
            v10 = v23;
          }
        }
        ++v17;
        v16 += 14;
      }
      while ( v5 != v17 );
    }
  }
  return (CNodeAddress)v11;
}
// 317F1E: variable 'v6' is possibly undefined
// 317F1E: variable 'v5' is possibly undefined

//----- (00318000) --------------------------------------------------------
void __fastcall CPathFind::FindNodePairClosestToCoors(
        CPathFind *this,
        CVector SearchCoors,
        int GraphType,
        CNodeAddress *pNode1,
        CNodeAddress *pNode2,
        float *pOrientation,
        float MinDistApart,
        float CutoffDistForNodeSearch,
        unsigned int bIgnoreSwitchedOff,
        bool bIgnoreBetweenLevels,
        int bWaterNode)
{
  int v11; // r9
  int v12; // r10
  int16x4_t v13; // d17
  int v14; // r4
  float v15; // s8
  float x; // s12
  float z; // s6
  float y; // s10
  __int64 v19; // r2
  char *v20; // r1
  int v21; // r11
  int *v22; // r5
  int v23; // r1
  int v24; // r5
  unsigned int v25; // r4
  float v26; // s3
  float32x2_t v27; // d8
  float v28; // s5
  int v29; // r12
  int v30; // r1
  unsigned int v31; // r8
  CPathNode *v32; // r5
  CPathNode *v33; // r3
  unsigned __int64 v34; // d9
  CPathNode **pNodes; // r0
  CPathNode *v36; // r3
  int v37; // r0
  CPathNode *v38; // r1
  int CoorsX; // r2
  int CoorsY; // r1
  int v41; // s4
  float v42; // s8
  float v43; // s0
  int v44; // [sp+0h] [bp-60h]
  _DWORD *v45; // [sp+4h] [bp-5Ch]
  unsigned __int16 x_low; // [sp+8h] [bp-58h]
  unsigned int v47; // [sp+Ch] [bp-54h]
  int v48; // [sp+10h] [bp-50h]
  unsigned __int16 v49; // [sp+14h] [bp-4Ch]
  int v50; // [sp+18h] [bp-48h]
  CVector v51; // [sp+24h] [bp-3Ch] BYREF

  v14 = GraphType;
  v15 = 10000.0;
  x = SearchCoors.x;
  x_low = LOWORD(SearchCoors.x);
  v49 = -1;
  z = SearchCoors.z;
  y = SearchCoors.y;
  v19 = bIgnoreSwitchedOff ^ 1LL;
  LOWORD(v47) = -1;
  LOWORD(v48) = -1;
  do
  {
    v20 = (char *)this + 4 * HIDWORD(v19);
    v21 = *((_DWORD *)v20 + 513);
    if ( !v21 )
      goto LABEL_23;
    if ( v14 == 1 )
    {
      v22 = (int *)(v20 + 4068);
      v11 = *((_DWORD *)v20 + 1089);
    }
    else
    {
      if ( v14 )
        goto LABEL_8;
      v22 = (int *)(v20 + 4356);
      v11 = 0;
    }
    v12 = *v22;
LABEL_8:
    if ( v11 < v12 )
    {
      v50 = HIDWORD(v19);
      v44 = v11;
      v45 = v20 + 2628;
      do
      {
        v23 = v21 + 28 * v11;
        v24 = *(unsigned __int16 *)(v23 + 24);
        v25 = v24 | (*(unsigned __int8 *)(v23 + 26) << 16);
        if ( ((v24 & 0x20) == 0) | (unsigned int)v19 )
        {
          if ( bWaterNode == ((v25 >> 7) & 1) )
          {
            v13.n64_u32[0] = *(_DWORD *)(v23 + 10);
            v13.n64_u64[0] = vcvt_f32_s32((int32x2_t)vmovl_s16(v13).n128_u64[0]).n64_u64[0];
            v26 = (float)*(__int16 *)(v23 + 8) * 0.125;
            v27.n64_u64[0] = vmul_f32(v13, (float32x2_t)0x3E0000003E000000LL).n64_u64[0];
            v28 = (float)(fabsf(v26 - x) + fabsf(v27.n64_f32[0] - y)) + (float)(fabsf(v27.n64_f32[1] - z) * 3.0);
            if ( v28 < v15 && (v24 & 0xF) != 0 )
            {
              v29 = 0;
              v30 = *v45 + 4 * *(__int16 *)(v23 + 16);
              do
              {
                v31 = *(_DWORD *)(v30 + 4 * v29);
                v32 = this->pNodes[(unsigned __int16)v31];
                if ( v32 )
                {
                  HIDWORD(v19) = (*((_WORD *)&v32[HIWORD(v31)] + 12) & 0x20) == 0;
                  if ( v19 )
                  {
                    if ( bWaterNode == (((unsigned int)(*((unsigned __int16 *)&v32[HIWORD(v31)] + 12) | (*((unsigned __int8 *)&v32[HIWORD(v31)] + 26) << 16)) >> 7) & 1) )
                    {
                      v33 = &v32[HIWORD(v31)];
                      v13.n64_u32[0] = *(_DWORD *)&v33->CoorsY;
                      v13.n64_u64[0] = vsub_f32(
                                         v27,
                                         vmul_f32(
                                           vcvt_f32_s32((int32x2_t)vmovl_s16(v13).n128_u64[0]),
                                           (float32x2_t)0x3E0000003E000000LL)).n64_u64[0];
                      v34 = vmul_f32(v13, v13).n64_u64[0];
                      if ( sqrtf(
                             (float)((float)((float)(v26 + (float)((float)v33->CoorsX * -0.125))
                                           * (float)(v26 + (float)((float)v33->CoorsX * -0.125)))
                                   + *(float *)&v34)
                           + *((float *)&v34 + 1)) > MinDistApart )
                      {
                        v15 = v28;
                        v47 = HIWORD(v31);
                        v48 = *(_DWORD *)(v30 + 4 * v29);
                        v49 = v50;
                        x_low = v11;
                      }
                    }
                  }
                }
                ++v29;
              }
              while ( v29 < (unsigned __int8)(v25 & 0xF) );
            }
          }
        }
        ++v11;
      }
      while ( v11 != v12 );
      v14 = GraphType;
      HIDWORD(v19) = v50;
      v11 = v44;
    }
LABEL_23:
    ++HIDWORD(v19);
  }
  while ( HIDWORD(v19) != 72 );
  if ( v15 >= CutoffDistForNodeSearch )
  {
    v43 = 0.0;
    pNode1->Region = -1;
    pNode2->Region = -1;
  }
  else
  {
    pNodes = this->pNodes;
    *pNode1 = (CNodeAddress)v49;
    *pNode2 = (CNodeAddress)(unsigned __int16)v48;
    v36 = pNodes[(unsigned __int16)v48];
    v37 = (int)&pNodes[v49][x_low];
    v38 = &v36[(unsigned __int16)v47];
    CoorsX = v38->CoorsX;
    CoorsY = v38->CoorsY;
    v41 = *(__int16 *)(v37 + 10);
    v42 = (float)*(__int16 *)(v37 + 8);
    v51.z = 0.0;
    v51.y = (float)((float)v41 * 0.125) - (float)((float)CoorsY * 0.125);
    v51.x = (float)(v42 * 0.125) - (float)((float)CoorsX * 0.125);
    CVector::Normalise(&v51);
    v43 = (float)(atan2f(COERCE_FLOAT(LODWORD(v51.x) ^ 0x80000000), v51.y) * 180.0) / 3.1416;
  }
  *pOrientation = v43;
}
// 318086: variable 'v11' is possibly undefined
// 318086: variable 'v12' is possibly undefined
// 3180D8: variable 'v13' is possibly undefined

//----- (003182F4) --------------------------------------------------------
float __fastcall CPathFind::FindNodeOrientationForCarPlacement(CPathFind *this, CNodeAddress CarNode)
{
  int Region; // r10
  float v3; // s0
  UInt8 *v4; // r8
  int v5; // r2
  int Index; // r9
  __int16 *v7; // lr
  __int16 v8; // r6
  int v9; // r2
  __int16 *v10; // r1
  int v11; // r1
  int v12; // r4
  int v13; // r5
  int v14; // r6
  __int16 v15; // r12
  unsigned int v16; // r2
  char *v17; // r1
  unsigned __int16 *v18; // r1
  int v19; // r2
  int v20; // r1
  CPathNode *v21; // r0
  CPathNode *v22; // r0
  float v23; // s2
  int CoorsY; // s4
  float v25; // s6
  float CoorsX; // s8
  CVector v28; // [sp+4h] [bp-24h] BYREF

  Region = CarNode.Region;
  v3 = 0.0;
  v4 = &this->ColourGroups[4 * CarNode.Region];
  v5 = *((_DWORD *)v4 + 513);
  if ( v5 )
  {
    Index = CarNode.Index;
    v7 = (__int16 *)(v5 + 28 * CarNode.Index);
    v8 = v7[12];
    v9 = v8 & 0xF;
    if ( v9 )
    {
      v10 = v7 + 8;
      if ( (v8 & 0xE) != 0 )
      {
        v11 = *v10;
        v12 = 0;
        v13 = *((_DWORD *)v4 + 873) + 2 * v11;
        v14 = (v9 & 0xFFFFFF) - 1;
        v15 = v11;
        while ( 1 )
        {
          v16 = *(unsigned __int16 *)(v13 + 2 * v12);
          v17 = (char *)this + 4 * (v16 >> 10);
          if ( *((_DWORD *)v17 + 513) )
          {
            v18 = (unsigned __int16 *)(*((_DWORD *)v17 + 585) + 14 * (v16 & 0x3FF));
            if ( v18[2] != Region )
            {
              v19 = *(unsigned __int16 *)((char *)v18 + 11);
LABEL_11:
              if ( v19 << 29 )
                goto LABEL_15;
              goto LABEL_12;
            }
            v19 = *(unsigned __int16 *)((char *)v18 + 11);
            if ( v18[3] != Index )
              goto LABEL_11;
            if ( (v19 & 0x38) != 0 )
              goto LABEL_15;
          }
LABEL_12:
          if ( ++v12 >= v14 )
            goto LABEL_15;
        }
      }
      v15 = *v10;
      v12 = 0;
LABEL_15:
      v20 = *(_DWORD *)(*((_DWORD *)v4 + 657) + 4 * (v12 + v15));
      v21 = this->pNodes[(unsigned __int16)v20];
      if ( v21 )
      {
        v22 = &v21[HIWORD(v20)];
        v23 = (float)v7[5];
        CoorsY = v22->CoorsY;
        v25 = (float)v7[4];
        CoorsX = (float)v22->CoorsX;
        v28.z = 0.0;
        v28.y = (float)((float)CoorsY * 0.125) - (float)(v23 * 0.125);
        v28.x = (float)(CoorsX * 0.125) - (float)(v25 * 0.125);
        CVector::Normalise(&v28);
        return (float)(atan2f(COERCE_FLOAT(LODWORD(v28.x) ^ 0x80000000), v28.y) * 180.0) / 3.1416;
      }
    }
  }
  return v3;
}

//----- (00318460) --------------------------------------------------------
float __fastcall CPathFind::FindNodeOrientationForCarPlacementFacingDestination(
        CPathFind *this,
        CNodeAddress CarNode,
        float DestX,
        float DestY,
        bool bTowardsDest)
{
  return 0.0;
}

//----- (00318470) --------------------------------------------------------
bool __fastcall CPathFind::ThisNodeWillLeadIntoADeadEnd(CPathFind *this, CPathNode *pToNode, CPathNode *pFromNode)
{
  CPathNode *v3; // r8
  int v4; // r5
  CNodeAddress v5; // r6
  CPathNode *v6; // r3
  unsigned int v7; // r11
  CPathNode *v8; // r6
  bool v9; // zf

  do
  {
    if ( (*((_WORD *)pToNode + 12) & 0xF) == 0 )
      break;
    v3 = 0;
    v4 = 0;
    do
    {
      v5 = ThePaths.pAdjacentNodes[pToNode->Address.Region][pToNode->IndexAdjacentNodes + v4];
      v6 = this->pNodes[v5.Region];
      if ( v6 )
      {
        v7 = HIWORD(*(unsigned int *)&v5);
        v8 = &v6[HIWORD(*(unsigned int *)&v5)];
        if ( v8 != pFromNode && ((unsigned int)(*((unsigned __int8 *)&v6[v7] + 26) << 16) >> 20) - 1 >= 0xA )
        {
          v9 = v3 == 0;
          v3 = v8;
          if ( !v9 )
            return 0;
        }
      }
      ++v4;
    }
    while ( v4 < (*((_WORD *)pToNode + 12) & 0xF) );
    pFromNode = pToNode;
    pToNode = v3;
  }
  while ( v3 );
  return 1;
}
// 31848E: masking with 0xFFFFFF was optimized away because r3.4 <= 0xF

//----- (0031850C) --------------------------------------------------------
void __fastcall CPathFind::SwitchRoadsOffInArea(
        CPathFind *this,
        float MinX,
        float MaxX,
        float MinY,
        float MaxY,
        float MinZ,
        float MaxZ,
        int SwitchRoadsOff,
        int bCars,
        int bBackToOriginal)
{
  Int32 i; // r9
  Int32 NumNodeSwitches; // r1
  Int32 *p_NumNodeSwitches; // r0
  Int32 j; // r2
  char *v17; // r12
  Int32 v18; // r5
  __int64 v19; // d17
  __int64 v20; // d18
  __int64 v21; // d19

  for ( i = 0; i != 64; ++i )
    CPathFind::SwitchRoadsOffInAreaForOneRegion(
      this,
      MinX,
      MaxX,
      MinY,
      MaxY,
      MinZ,
      MaxZ,
      SwitchRoadsOff,
      bCars,
      i,
      bBackToOriginal);
  NumNodeSwitches = this->NumNodeSwitches;
  p_NumNodeSwitches = &this->NumNodeSwitches;
  if ( NumNodeSwitches >= 1 )
  {
    for ( j = 0; j < NumNodeSwitches; ++j )
    {
      v17 = (char *)this + 28 * j;
      if ( *((float *)v17 + 3435) >= MinX
        && *((float *)v17 + 3437) >= MinY
        && *((float *)v17 + 3439) >= MinZ
        && *((float *)v17 + 3436) <= MaxX
        && *((float *)v17 + 3438) <= MaxY
        && *((float *)v17 + 3440) <= MaxZ )
      {
        if ( j < --NumNodeSwitches )
        {
          v18 = j;
          do
          {
            v19 = *((_QWORD *)v17 + 1722);
            ++v18;
            v20 = *(_QWORD *)(v17 + 13780);
            v21 = *(_QWORD *)(v17 + 13788);
            *(_QWORD *)(v17 + 13740) = *((_QWORD *)v17 + 1721);
            *(_QWORD *)(v17 + 13748) = v19;
            *((_QWORD *)v17 + 1719) = v20;
            *((_QWORD *)v17 + 1720) = v21;
            NumNodeSwitches = *p_NumNodeSwitches - 1;
          }
          while ( v18 < NumNodeSwitches );
        }
        --j;
        *p_NumNodeSwitches = NumNodeSwitches;
      }
    }
  }
  if ( NumNodeSwitches <= 63 && !bBackToOriginal )
  {
    this->NodeSwitches[NumNodeSwitches].MinX = MinX;
    this->NodeSwitches[*p_NumNodeSwitches].MaxX = MaxX;
    this->NodeSwitches[*p_NumNodeSwitches].MinY = MinY;
    this->NodeSwitches[*p_NumNodeSwitches].MaxY = MaxY;
    this->NodeSwitches[*p_NumNodeSwitches].MinZ = MinZ;
    this->NodeSwitches[*p_NumNodeSwitches].MaxZ = MaxZ;
    this->NodeSwitches[*p_NumNodeSwitches].bOff = SwitchRoadsOff;
    this->NodeSwitches[(*p_NumNodeSwitches)++].bCars = bCars;
  }
}
// 31850C: using guessed type int bCars_0;

//----- (003186DA) --------------------------------------------------------
void __fastcall CPathFind::TidyUpNodeSwitchesAfterMission(CPathFind *this)
{
  int NumNodeSwitches; // r2

  NumNodeSwitches = this->NumNodeSwitches;
  if ( NumNodeSwitches >= 54 )
    NumNodeSwitches = 54;
  this->NumNodeSwitches = NumNodeSwitches;
}

//----- (003186EA) --------------------------------------------------------
void __fastcall CPathFind::SwitchPedRoadsOffInArea(
        CPathFind *this,
        float MinX,
        float MaxX,
        float MinY,
        float MaxY,
        float MinZ,
        float MaxZ,
        int SwitchRoadsOff,
        int bBackToOriginal)
{
  CPathFind::SwitchRoadsOffInArea(this, MinX, MaxX, MinY, MaxY, MinZ, MaxZ, SwitchRoadsOff, 0, bBackToOriginal);
}

//----- (0031871E) --------------------------------------------------------
bool __fastcall CPathFind::ThisNodeHasToBeSwitchedOff(CPathFind *this, CPathNode *pNode)
{
  return ((((unsigned int)(*((unsigned __int8 *)pNode + 26) << 16) >> 20) - 1) & 0xFFFFFF) > 1;
}

//----- (00318738) --------------------------------------------------------
void __fastcall CPathFind::SwitchOffNodeAndNeighbours(
        CPathFind *this,
        CPathNode *pNode,
        CPathNode **ppNextNode1,
        CPathNode **ppNextNode2,
        int bWhatToSwitchTo,
        int bBackToOriginal)
{
  int v6; // r5
  _WORD *v7; // r4
  unsigned int v8; // r6
  __int16 v9; // r9
  int v10; // r4
  int v11; // r12
  CNodeAddress *v12; // r5
  CPathNode *v13; // r3
  int v14; // r8
  CNodeAddress v15; // r4
  CPathNode *v16; // r5
  int v17; // lr
  CPathNode *v18; // r11
  unsigned int v19; // r4
  int v20; // r2
  int v21; // r2
  int v22; // lr
  CPathNode *v23; // r2
  int v24; // r5
  CNodeAddress *v25; // r4
  CPathNode *v26; // r3
  CPathNode **v27; // r2

  LOWORD(v6) = bWhatToSwitchTo;
  v7 = (_WORD *)((char *)pNode + 24);
  v8 = *((unsigned __int16 *)pNode + 12) | (*((unsigned __int8 *)pNode + 26) << 16);
  if ( bBackToOriginal == 1 )
    v6 = (v8 >> 8) & 1;
  *((_BYTE *)pNode + 26) = BYTE2(v8);
  *v7 = v8 & 0xFFDF | (32 * v6);
  *ppNextNode1 = 0;
  if ( ppNextNode2 )
    *ppNextNode2 = 0;
  LOBYTE(v9) = *v7;
  if ( (*v7 & 0xF) != 0 )
  {
    v10 = *v7 & 0xF;
    v11 = 0;
    v12 = &this->pAdjacentNodes[pNode->Address.Region][pNode->IndexAdjacentNodes];
    do
    {
      v13 = this->pNodes[v12->Region];
      if ( v13
        && ((((unsigned int)(*((unsigned __int8 *)&v13[HIWORD(*(unsigned int *)v12)] + 26) << 16) >> 20) - 1) & 0xFFFFFF) > 1 )
      {
        ++v11;
      }
      --v10;
      ++v12;
    }
    while ( v10 );
    if ( v11 <= 2 )
    {
      v14 = 0;
      do
      {
        v15 = this->pAdjacentNodes[pNode->Address.Region][pNode->IndexAdjacentNodes + v14];
        v16 = this->pNodes[v15.Region];
        if ( v16 )
        {
          v17 = HIWORD(*(unsigned int *)&v15);
          v18 = &v16[HIWORD(*(unsigned int *)&v15)];
          v19 = *((unsigned __int16 *)v18 + 12) | (*((unsigned __int8 *)v18 + 26) << 16);
          if ( (((v19 >> 20) - 1) & 0xFFFFFF) >= 2 )
          {
            v20 = bBackToOriginal ? (v19 >> 8) & 1 : bWhatToSwitchTo;
            if ( ((v19 >> 5) & 1) != v20 )
            {
              if ( (*((_WORD *)v18 + 12) & 0xF) == 0 )
                goto LABEL_26;
              v21 = v17;
              v22 = *((_WORD *)v18 + 12) & 0xF;
              v23 = &v16[v21];
              v24 = 0;
              v25 = &this->pAdjacentNodes[v23->Address.Region][v23->IndexAdjacentNodes];
              do
              {
                v26 = this->pNodes[v25->Region];
                if ( v26
                  && ((((unsigned int)(*((unsigned __int8 *)&v26[HIWORD(*(unsigned int *)v25)] + 26) << 16) >> 20) - 1) & 0xFFFFFF) > 1 )
                {
                  ++v24;
                }
                --v22;
                ++v25;
              }
              while ( v22 );
              if ( v24 <= 2 )
              {
LABEL_26:
                v27 = ppNextNode2;
                if ( !*ppNextNode1 )
                  v27 = ppNextNode1;
                *v27 = v18;
                v9 = *((_WORD *)pNode + 12);
              }
            }
          }
        }
        ++v14;
      }
      while ( v14 < (v9 & 0xF) );
    }
  }
}
// 3187FA: conditional instruction was optimized away because r10.4 is in (1..F)
// 31879E: masking with 0xFFFFFF was optimized away because r10.4 <= 0xF

//----- (003188F2) --------------------------------------------------------
Int32 __fastcall CPathFind::CountNeighboursToBeSwitchedOff(CPathFind *this, CPathNode *pNode)
{
  int v2; // r2
  CNodeAddress *v3; // lr
  int v4; // r3
  Int32 v5; // r1
  int v6; // r2
  CNodeAddress v7; // r4
  CPathNode *v8; // r5

  v2 = *((_WORD *)pNode + 12) & 0xF;
  if ( !v2 )
    return 0;
  v3 = &this->pAdjacentNodes[pNode->Address.Region][pNode->IndexAdjacentNodes];
  v4 = v2 & 0xFFFFFF;
  v5 = 0;
  v6 = 0;
  do
  {
    v7 = v3[v6];
    v8 = this->pNodes[v7.Region];
    if ( v8
      && ((((unsigned int)(*((unsigned __int8 *)&v8[HIWORD(*(unsigned int *)&v7)] + 26) << 16) >> 20) - 1) & 0xFFFFFF) > 1 )
    {
      ++v5;
    }
    ++v6;
  }
  while ( v6 < v4 );
  return v5;
}

//----- (00318960) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
void __fastcall CPathFind::MarkRoadNodeAsDontWander(CPathFind *this, float NodeX, float NodeY, float NodeZ)
{
  CNodeAddress *NodeClosestToCoors; // r0
  CPathNode *v6; // r0
  __int16 v7; // t1
  char v8; // r2
  int v9; // [sp+0h] [bp-28h]
  bool v10; // [sp+1Ch] [bp-Ch]

  v9 = 0;
  NodeClosestToCoors = CPathFind::FindNodeClosestToCoors(
                         (CNodeAddress *)this,
                         (CPathFind *)LODWORD(NodeX),
                         *(CVector *)&NodeY,
                         1000000.0,
                         0.0,
                         0,
                         0,
                         0,
                         0,
                         v10);
  if ( (unsigned __int16)NodeClosestToCoors != 0xFFFF )
  {
    v6 = &this->pNodes[(unsigned __int16)NodeClosestToCoors][(unsigned int)NodeClosestToCoors >> 16];
    v7 = *((_WORD *)v6 + 12);
    v6 = (CPathNode *)((char *)v6 + 24);
    v8 = BYTE2(v6->pNext);
    LOWORD(v6->pNext) = v7 | 0x400;
    BYTE2(v6->pNext) = v8;
  }
}
// 318960: fragmented variable at r2.4 may be wrong
// 318960: fragmented variable at r3.4 may be wrong

//----- (003189B6) --------------------------------------------------------
void __fastcall CPathFind::UnMarkAllRoadNodesAsDontWander(CPathFind *this)
{
  int i; // lr
  char *v2; // r1
  int v3; // r2
  int *v4; // r8
  _DWORD *v5; // r9
  int v6; // r1
  int v7; // r4
  int v8; // r3
  char v9; // r2

  for ( i = 0; i != 64; ++i )
  {
    v2 = (char *)this + 4 * i;
    v3 = *((_DWORD *)v2 + 513);
    if ( v3 )
    {
      if ( *((int *)v2 + 1089) >= 1 )
      {
        v4 = (int *)(v2 + 4356);
        *(_WORD *)(v3 + 24) &= ~0x400u;
        if ( *((int *)v2 + 1089) >= 2 )
        {
          v5 = v2 + 2052;
          v6 = 1;
          v7 = 52;
          do
          {
            ++v6;
            v8 = *v5 + v7;
            v9 = *(_BYTE *)(v8 + 2);
            *(_WORD *)v8 &= ~0x400u;
            v7 += 28;
            *(_BYTE *)(v8 + 2) = v9;
          }
          while ( v6 < *v4 );
        }
      }
    }
  }
}

//----- (00318A2A) --------------------------------------------------------
int __fastcall CPathFind::TestForPedTrafficLight(CPathFind *this, CNodeAddress Node1, CNodeAddress Node2)
{
  UInt8 *v3; // r12
  int v4; // r4
  int Region; // r3
  CPathNode *Index; // r0
  bool v7; // zf
  int v8; // lr
  int v9; // r2
  int v10; // r1
  int v11; // r0
  int v12; // r5
  int v13; // r4
  int v14; // r0
  int v15; // r5

  v3 = &this->ColourGroups[4 * Node1.Region];
  v4 = *((_DWORD *)v3 + 513);
  if ( !v4 )
    return 0;
  Region = Node2.Region;
  Index = this->pNodes[Node2.Region];
  v7 = Index == 0;
  if ( Index )
  {
    Index = (CPathNode *)Node1.Index;
    Node1 = (CNodeAddress)(*(_WORD *)(v4 + 28 * Node1.Index + 24) & 0xF);
    v7 = Node1 == 0;
  }
  if ( v7 )
    return 0;
  v8 = Node2.Index;
  v9 = *((_DWORD *)v3 + 657);
  v10 = *(_DWORD *)&Node1 & 0xFFFFFF;
  v11 = v4 + 28 * (_DWORD)Index;
  v12 = 0;
  v13 = 0;
  v14 = *(__int16 *)(v11 + 16);
  while ( 1 )
  {
    v15 = v12 + v14;
    if ( *(unsigned __int16 *)(v9 + 4 * v15) == Region && *(unsigned __int16 *)(v9 + 4 * v15 + 2) == v8 )
      break;
    v12 = (__int16)++v13;
    if ( (__int16)v13 >= v10 )
      return 0;
  }
  return (*(unsigned __int8 *)(*((_DWORD *)v3 + 801) + v15) >> 1) & 1;
}

//----- (00318AB4) --------------------------------------------------------
bool __fastcall CAutomobile::HasCarStoppedBecauseOfLight(const CAutomobile *this)
{
  CNodeAddress OldNode; // r3
  int Region; // r12
  CPathNode *v3; // r1
  int v4; // r11
  unsigned int v5; // r6
  int v6; // r5
  int v7; // r4
  int IndexAdjacentNodes; // r1
  _DWORD *v9; // lr
  int v10; // r9
  int v11; // r3
  unsigned int v12; // r1
  CNodeAddress VeryOldNode; // r3
  CPathNode *v14; // r2
  bool v15; // zf
  CPathNode *v16; // r2
  int v17; // r5
  int v18; // r2
  char *v19; // r3
  int v20; // r9
  int v21; // r1
  unsigned int v22; // r2

  if ( (*(_BYTE *)&this->m_info & 0xF0) != 16 )
    return 0;
  OldNode = this->AutoPilot.OldNode;
  Region = OldNode.Region;
  v3 = ThePaths.pNodes[OldNode.Region];
  if ( !v3 )
    return 0;
  v4 = this->AutoPilot.NewNode.Region;
  if ( !ThePaths.pNodes[v4] )
    return 0;
  v5 = HIWORD(*(unsigned int *)&OldNode);
  v6 = 8 * HIWORD(*(unsigned int *)&OldNode);
  v7 = *((_WORD *)&v3[HIWORD(*(unsigned int *)&OldNode)] + 12) & 0xF;
  if ( v7 )
  {
    v6 = 0;
    IndexAdjacentNodes = v3[v5].IndexAdjacentNodes;
    v5 = (unsigned int)&ThePaths.ColourGroups[4 * OldNode.Region];
    v9 = (_DWORD *)(v5 + 3492);
    v10 = 2 * IndexAdjacentNodes;
    v11 = *(_DWORD *)(v5 + 2628) + 4 * IndexAdjacentNodes;
    do
    {
      if ( *(unsigned __int16 *)(v11 + 4 * v6) == v4 )
      {
        v5 = *(unsigned __int16 *)(v11 + 4 * v6 + 2);
        if ( v5 == this->AutoPilot.NewNode.Index )
        {
          v12 = *(unsigned __int16 *)(*v9 + v10 + 2 * v6);
          v5 = v12 >> 10;
          if ( ThePaths.pNodes[v12 >> 10] )
          {
            if ( *((unsigned __int8 *)&ThePaths.pLinks[v5][v12 & 0x3FF] + 12) << 30 )
              return 1;
          }
        }
      }
    }
    while ( ++v6 < v7 );
  }
  if ( this->AutoPilot.VeryOldNode.Region == 0xFFFF )
    return 0;
  VeryOldNode = this->AutoPilot.VeryOldNode;
  v14 = ThePaths.pNodes[VeryOldNode.Region];
  v15 = v14 == 0;
  if ( v14 )
  {
    v6 = HIWORD(*(unsigned int *)&VeryOldNode);
    v5 = *((_WORD *)&v14[HIWORD(*(unsigned int *)&VeryOldNode)] + 12) & 0xF;
    v15 = v5 == 0;
  }
  if ( v15 )
    return 0;
  v16 = &v14[v6];
  v17 = 0;
  v18 = v16->IndexAdjacentNodes;
  v19 = (char *)&ThePaths + 4 * VeryOldNode.Region;
  v20 = 2 * v18;
  v21 = *((_DWORD *)v19 + 657) + 4 * v18;
  while ( 1 )
  {
    if ( *(unsigned __int16 *)(v21 + 4 * v17) == Region
      && *(unsigned __int16 *)(v21 + 4 * v17 + 2) == this->AutoPilot.OldNode.Index )
    {
      v22 = *(unsigned __int16 *)(*((_DWORD *)v19 + 873) + v20 + 2 * v17);
      if ( ThePaths.pNodes[v22 >> 10] )
      {
        if ( *((unsigned __int8 *)&ThePaths.pLinks[v22 >> 10][v22 & 0x3FF] + 12) << 30 )
          break;
      }
    }
    if ( ++v17 >= (int)(v5 & 0xFFFFFF) )
      return 0;
  }
  return 1;
}
// 318B18: masking with 0xFFFFFF was optimized away because r4.4 <= 0xF

//----- (00318C90) --------------------------------------------------------
int __fastcall CPathFind::TestCrossesRoad(CPathFind *this, CNodeAddress Node1, CNodeAddress Node2)
{
  UInt8 *v3; // r12
  int v4; // r4
  int Region; // r3
  CPathNode *Index; // r0
  bool v7; // zf
  int v8; // lr
  int v9; // r2
  int v10; // r1
  int v11; // r0
  int v12; // r5
  int v13; // r4
  int v14; // r0
  int v15; // r5

  v3 = &this->ColourGroups[4 * Node1.Region];
  v4 = *((_DWORD *)v3 + 513);
  if ( !v4 )
    return 0;
  Region = Node2.Region;
  Index = this->pNodes[Node2.Region];
  v7 = Index == 0;
  if ( Index )
  {
    Index = (CPathNode *)Node1.Index;
    Node1 = (CNodeAddress)(*(_WORD *)(v4 + 28 * Node1.Index + 24) & 0xF);
    v7 = Node1 == 0;
  }
  if ( v7 )
    return 0;
  v8 = Node2.Index;
  v9 = *((_DWORD *)v3 + 657);
  v10 = *(_DWORD *)&Node1 & 0xFFFFFF;
  v11 = v4 + 28 * (_DWORD)Index;
  v12 = 0;
  v13 = 0;
  v14 = *(__int16 *)(v11 + 16);
  while ( 1 )
  {
    v15 = v12 + v14;
    if ( *(unsigned __int16 *)(v9 + 4 * v15) == Region && *(unsigned __int16 *)(v9 + 4 * v15 + 2) == v8 )
      break;
    v12 = (__int16)++v13;
    if ( (__int16)v13 >= v10 )
      return 0;
  }
  return *(_BYTE *)(*((_DWORD *)v3 + 801) + v15) & 1;
}

//----- (00318D18) --------------------------------------------------------
void __fastcall CPathFind::FindStartPointOfRegion(
        CPathFind *this,
        Int32 RegionX,
        Int32 RegionY,
        float *ResultX,
        float *ResultY)
{
  *ResultX = (float)((float)RegionX * 750.0) + -3000.0;
  *ResultY = (float)((float)RegionY * 750.0) + -3000.0;
}

//----- (00318D54) --------------------------------------------------------
void __fastcall CPathFind::SetLinksBridgeLights(
        CPathFind *this,
        float MinX,
        float MaxX,
        float MinY,
        float MaxY,
        __int16 Value)
{
  int i; // r9
  char *v9; // r3
  int v10; // r1
  int *v11; // r8
  _DWORD *v12; // r4
  int v13; // r5
  int j; // r6
  float v15; // s10
  int v16; // r3
  float v17; // s10

  for ( i = 0; i != 64; ++i )
  {
    v9 = (char *)this + 4 * i;
    if ( *((_DWORD *)v9 + 513) )
    {
      v10 = *((_DWORD *)v9 + 1233);
      if ( v10 >= 1 )
      {
        v11 = (int *)(v9 + 4932);
        v12 = v9 + 2340;
        v13 = 0;
        for ( j = 0; j < v10; ++j )
        {
          v15 = (float)*(__int16 *)(*v12 + v13) * 0.125;
          if ( v15 > MinX && v15 < MaxX )
          {
            v16 = *v12 + v13;
            v17 = (float)*(__int16 *)(v16 + 2) * 0.125;
            if ( v17 > MinY && v17 < MaxY )
            {
              *(_WORD *)(v16 + 11) = *(_WORD *)(v16 + 11) & 0xFBFF | (Value << 10);
              v10 = *v11;
            }
          }
          v13 += 14;
        }
      }
    }
  }
}

//----- (00318E14) --------------------------------------------------------
CVector *__fastcall CPathFind::FindNodeCoorsForScript(
        CVector *retstr,
        CPathFind *this,
        CNodeAddress Node,
        bool *pSuccess)
{
  int v4; // r4
  char *v5; // lr
  int16x4_t v6; // d16
  int16x4_t v7; // d17
  int Region; // r12
  bool v9; // zf
  float v10; // s0
  float v11; // s4
  float v12; // s2
  int Index; // r3
  int v14; // r2
  int v15; // r5
  int v16; // r3
  unsigned int v17; // r5
  CPathNode *v18; // r1
  float32x2_t v19; // d0
  float32x2_t v20; // d1
  unsigned __int64 v21; // d2
  float v22; // s4
  float v23; // s6
  float v24; // s4
  float v25; // s0
  __int16 *v26; // r1
  int v27; // s6
  int v28; // s4
  int v29; // s2
  float v30; // s6

  Region = Node.Region;
  v9 = Node.Region == 0xFFFF;
  if ( Node.Region != 0xFFFF )
  {
    v5 = (char *)this + 4 * Node.Region;
    v4 = *((_DWORD *)v5 + 513);
    v9 = v4 == 0;
  }
  if ( !v9 )
  {
    if ( pSuccess )
    {
      *pSuccess = 1;
      v4 = *((_DWORD *)v5 + 513);
    }
    Index = Node.Index;
    v14 = v4 + 28 * Node.Index;
    if ( *(_BYTE *)(v14 + 22) )
    {
      v15 = Index;
      v16 = v4 + 28 * Index;
      if ( *(unsigned __int16 *)(v16 + 24) << 28 )
      {
        v17 = *(_DWORD *)(*((_DWORD *)v5 + 657) + 4 * ThePaths.pNodes[Region][v15].IndexAdjacentNodes);
        v18 = this->pNodes[(unsigned __int16)v17];
        if ( v18 )
        {
          v6.n64_u32[0] = *(_DWORD *)(v16 + 8);
          v7.n64_u32[0] = *(_DWORD *)&v18[HIWORD(v17)].CoorsX;
          v19.n64_u64[0] = vmul_f32(
                             vcvt_f32_s32((int32x2_t)vmovl_s16(v6).n128_u64[0]),
                             (float32x2_t)0x3E0000003E000000LL).n64_u64[0];
          v20.n64_u64[0] = vsub_f32(
                             vmul_f32(
                               vcvt_f32_s32((int32x2_t)vmovl_s16(v7).n128_u64[0]),
                               (float32x2_t)0x3E0000003E000000LL),
                             v19).n64_u64[0];
          v21 = vmul_f32(v20, v20).n64_u64[0];
          v22 = *(float *)&v21 + *((float *)&v21 + 1);
          if ( v22 <= 0.0 )
          {
            v24 = 1.0;
          }
          else
          {
            v23 = 1.0 / sqrtf(v22);
            v24 = v20.n64_f32[0] * v23;
            v20.n64_f32[1] = v20.n64_f32[1] * v23;
            if ( (float)(v20.n64_f32[0] * v23) < 0.0 )
            {
              v20.n64_f32[1] = -v20.n64_f32[1];
              v24 = -v24;
            }
          }
          v30 = (float)((float)*(unsigned __int8 *)(v14 + 22) * 0.0625) + 2.7;
          v11 = v19.n64_f32[1] + (float)(v24 * v30);
          v12 = (float)((float)*(__int16 *)(v16 + 12) * 0.125) + (float)(v30 * 0.0);
          v10 = v19.n64_f32[0] - (float)(v20.n64_f32[1] * v30);
          goto LABEL_22;
        }
      }
      v25 = 0.125;
      v27 = *(__int16 *)(v16 + 8);
      v28 = *(__int16 *)(v16 + 10);
      v29 = *(__int16 *)(v16 + 12);
    }
    else
    {
      v25 = 0.125;
      v26 = (__int16 *)(v4 + 28 * Index);
      v27 = v26[4];
      v28 = v26[5];
      v29 = v26[6];
    }
    v12 = (float)v29 * v25;
    v11 = (float)v28 * v25;
    v10 = (float)v27 * v25;
    goto LABEL_22;
  }
  v10 = 0.0;
  if ( pSuccess )
    *pSuccess = 0;
  v11 = 0.0;
  v12 = 0.0;
LABEL_22:
  retstr->x = v10;
  retstr->y = v11;
  retstr->z = v12;
  return retstr;
}
// 318E4E: variable 'v5' is possibly undefined
// 318E60: variable 'v4' is possibly undefined
// 318EBA: variable 'v6' is possibly undefined
// 318ECA: variable 'v7' is possibly undefined

//----- (00318FE8) --------------------------------------------------------
int __fastcall CPathFind::FindNodeCoorsForScript(
        CVector *retstr,
        CPathFind *this,
        CNodeAddress CurrentNode,
        CNodeAddress NewNode,
        float *pOrientation,
        bool *pSuccess)
{
  char *Region; // r6
  int v8; // r5
  int *v9; // r0
  bool v10; // zf
  char *v11; // r12
  _DWORD *v12; // r1
  int v13; // r5
  _DWORD *v14; // r6
  __int16 *v15; // r8
  __int16 *v16; // r6
  int v17; // t1
  __int16 *v18; // r10
  unsigned __int8 *v19; // r5
  int v20; // t1
  unsigned __int8 *v21; // r9
  int result; // r0
  float v23; // s0
  RwReal v24; // s4
  RwReal v25; // s0
  CVector v26; // [sp+4h] [bp-34h] BYREF

  Region = (char *)CurrentNode.Region;
  v8 = 0xFFFF;
  if ( CurrentNode.Region == 0xFFFF )
    goto LABEL_12;
  v9 = (int *)NewNode.Region;
  v10 = NewNode.Region == 0xFFFF;
  if ( NewNode.Region != 0xFFFF )
  {
    Region = (char *)this + 4 * CurrentNode.Region;
    v8 = *((_DWORD *)Region + 513);
    v10 = v8 == 0;
  }
  if ( v10 || (v11 = (char *)this + 4 * NewNode.Region, (v12 = (_DWORD *)*((_DWORD *)v11 + 513)) == 0) )
  {
LABEL_12:
    if ( pSuccess )
      *pSuccess = 0;
    result = 0;
    retstr->x = 0.0;
    retstr->y = 0.0;
    retstr->z = 0.0;
  }
  else
  {
    if ( pSuccess )
    {
      v9 = (int *)(Region + 2052);
      v12 = v11 + 2052;
      *pSuccess = 1;
    }
    if ( pSuccess )
    {
      v12 = (_DWORD *)*v12;
      v8 = *v9;
    }
    v13 = v8 + 28 * CurrentNode.Index;
    v14 = &v12[7 * NewNode.Index];
    v15 = (__int16 *)(v13 + 8);
    v17 = *((__int16 *)v14 + 4);
    v16 = (__int16 *)(v14 + 2);
    v18 = (__int16 *)(v13 + 10);
    *pOrientation = (float)(atan2f(
                              -(float)((float)((float)v17 * 0.125) - (float)((float)*(__int16 *)(v13 + 8) * 0.125)),
                              (float)((float)v16[1] * 0.125) - (float)((float)*(__int16 *)(v13 + 10) * 0.125))
                          * 180.0)
                  / 3.1416;
    v20 = *(unsigned __int8 *)(v13 + 22);
    v19 = (unsigned __int8 *)(v13 + 22);
    v21 = v19 - 10;
    if ( v20 )
    {
      v26.x = (float)((float)*v16 * 0.125) - (float)((float)*v15 * 0.125);
      v26.y = (float)((float)v16[1] * 0.125) - (float)((float)*v18 * 0.125);
      CVector::Normalise(&v26);
      result = *(__int16 *)v21;
      v23 = (float)((float)*v19 * 0.0625) + 2.7;
      v24 = (float)((float)*v18 * 0.125) - (float)(v26.x * v23);
      retstr->x = (float)((float)*v15 * 0.125) + (float)(v26.y * v23);
      retstr->y = v24;
      retstr->z = (float)((float)result * 0.125) + (float)(v23 * 0.0);
    }
    else
    {
      result = *(__int16 *)v21;
      v25 = (float)*v18 * 0.125;
      retstr->x = (float)*v15 * 0.125;
      retstr->y = v25;
      retstr->z = (float)result * 0.125;
    }
  }
  return result;
}

//----- (00319230) --------------------------------------------------------
void __fastcall CPathFind::Shutdown(CPathFind *this)
{
  CPathNode **v1; // r4
  int i; // r5

  v1 = &this->pNodes[56];
  for ( i = 0; i != 8; ++i )
  {
    if ( *(v1 - 56) )
      CStreaming::RemoveModel(i + 25511);
    if ( *(v1 - 48) )
      CStreaming::RemoveModel(i + 25519);
    if ( *(v1 - 40) )
      CStreaming::RemoveModel(i + 25527);
    if ( *(v1 - 32) )
      CStreaming::RemoveModel(i + 25535);
    if ( *(v1 - 24) )
      CStreaming::RemoveModel(i + 25543);
    if ( *(v1 - 16) )
      CStreaming::RemoveModel(i + 25551);
    if ( *(v1 - 8) )
      CStreaming::RemoveModel(i + 25559);
    if ( *v1 )
      CStreaming::RemoveModel(i + 25567);
    ++v1;
  }
}

//----- (003192E8) --------------------------------------------------------
CVector *__fastcall CPathFind::TakeWidthIntoAccountForWandering(
        CVector *retstr,
        CPathFind *this,
        CNodeAddress Node,
        UInt16 RandomSeed)
{
  float v4; // s0
  float v5; // s2
  float v6; // s4
  CPathNode *v7; // r12
  CPathNode *v8; // r1
  int CoorsX; // r12
  int CoorsY; // r3
  int CoorsZ; // lr

  v4 = 0.0;
  if ( Node.Region == 0xFFFF )
  {
    v5 = 0.0;
    v6 = 0.0;
  }
  else
  {
    v5 = 0.0;
    v6 = 0.0;
    v7 = this->pNodes[Node.Region];
    if ( v7 )
    {
      LOBYTE(Node.Region) = RandomSeed;
      v8 = &v7[Node.Index];
      CoorsX = v8->CoorsX;
      CoorsY = v8->CoorsY;
      CoorsZ = v8->CoorsZ;
      LOWORD(v8) = v8->Width;
      v6 = (float)CoorsZ * 0.125;
      v5 = (float)((float)CoorsY * 0.125)
         + (float)((float)((__int16)((LOBYTE(Node.Region) >> 4) - 7) * (__int16)v8) * 0.00775);
      v4 = (float)((float)CoorsX * 0.125) + (float)((float)((__int16)((Node.Region & 0xF) - 7) * (__int16)v8) * 0.00775);
    }
  }
  retstr->x = v4;
  retstr->y = v5;
  retstr->z = v6;
  return retstr;
}

//----- (003193B0) --------------------------------------------------------
void __fastcall CPathFind::TakeWidthIntoAccountForCoors(
        CPathFind *this,
        CNodeAddress Node1,
        CNodeAddress Node2,
        UInt16 RandomSeed,
        float *pX,
        float *pY)
{
  int Region; // lr
  bool v7; // zf
  CPathNode *v8; // r12
  bool v9; // zf
  CPathNode *v10; // r1
  CPathNode *v11; // r0
  CPathNode *v12; // r2

  v7 = Node1.Region == 0xFFFF;
  if ( Node1.Region != 0xFFFF )
  {
    Region = Node2.Region;
    v7 = Node2.Region == 0xFFFF;
  }
  if ( !v7 )
  {
    v8 = this->pNodes[Node1.Region];
    v9 = v8 == 0;
    if ( v8 )
    {
      this = (CPathFind *)this->pNodes[Region];
      v9 = this == 0;
    }
    if ( !v9 )
    {
      v10 = &v8[Node1.Index];
      v11 = (CPathNode *)((char *)this + 28 * Node2.Index);
      v12 = v11;
      if ( v10->Width < (unsigned int)v11->Width )
        v12 = v10;
      *pX = *pX + (float)((float)((__int16)((RandomSeed & 0xF) - 7) * v12->Width) * 0.00775);
      if ( v10->Width < (unsigned int)v11->Width )
        v11 = v10;
      *pY = *pY + (float)((float)((__int16)(((unsigned __int8)RandomSeed >> 4) - 7) * v11->Width) * 0.00775);
    }
  }
}
// 3193D6: variable 'Region' is possibly undefined

//----- (00319468) --------------------------------------------------------
float __fastcall CCarPathLink::OneWayLaneOffset(CCarPathLink *this)
{
  unsigned int v1; // r2
  bool v2; // zf
  int v3; // r2
  float v5; // s0
  int v6; // r0

  v1 = *(unsigned __int16 *)((char *)this + 11);
  v2 = (v1 & 7) == 0;
  v3 = (v1 >> 3) & 7;
  if ( v2 )
  {
    v5 = 0.5;
    v6 = (unsigned __int16)v3;
  }
  else
  {
    if ( v3 )
      return (float)((float)this->Width / 86.4) + 0.5;
    v5 = 0.5;
    v6 = *(_WORD *)((char *)this + 11) & 7;
  }
  return v5 - (float)((float)(unsigned int)v6 * v5);
}

//----- (003194C0) --------------------------------------------------------
void __fastcall CPathFind::MarkRegionsForCoors(int a1, float a2, float a3, int a4, float a5)
{
  float v6; // s4
  int v7; // r1
  int v8; // r0
  int v9; // r9
  int v10; // r4
  int v11; // r10
  int v12; // r2
  int v13; // r6
  unsigned int v14; // r2
  int v15; // r5
  int v16; // r1
  unsigned int v17; // r2
  size_t v18; // r8
  int v19; // r6
  UInt8 *v20; // r5

  v6 = a2 - a5;
  v7 = 0;
  v8 = 7;
  v9 = 7;
  v10 = (int)(float)((float)((float)(a2 + a5) + 3000.0) / 750.0);
  v11 = (int)(float)((float)((float)(a3 + a5) + 3000.0) / 750.0);
  v12 = (int)(float)((float)((float)(a3 - a5) + 3000.0) / 750.0);
  if ( v11 <= 0 )
    v11 = 0;
  if ( v11 >= 7 )
    v11 = 7;
  if ( v12 <= 0 )
    v12 = 0;
  if ( v12 < 7 )
    v9 = v12;
  if ( v10 <= 0 )
    v10 = 0;
  if ( v10 >= 7 )
    v10 = 7;
  if ( (int)(float)((float)(v6 + 3000.0) / 750.0) > 0 )
    v7 = (int)(float)((float)(v6 + 3000.0) / 750.0);
  if ( v7 < 7 )
    v8 = v7;
  if ( v8 <= v10 )
  {
    v13 = v11;
    v14 = ~v12;
    if ( v9 > v11 )
      v13 = v9;
    v15 = -8;
    if ( v14 <= 0xFFFFFFF8 )
      v14 = -8;
    v16 = ~v7;
    v17 = v14 + v13;
    if ( v16 > -8 )
      v15 = v16;
    v18 = v17 + 2;
    v19 = -2 - v15;
    v20 = &ToBeStreamed[v8][v9];
    do
    {
      if ( v9 <= v11 )
        memset(v20, 1, v18);
      ++v19;
      v20 += 8;
    }
    while ( v19 < v10 );
  }
}

//----- (003195D0) --------------------------------------------------------
void __fastcall CPathFind::SetPathsNeededAtPosition(CPathFind *this, const CVector *posn)
{
  __int64 v2; // d16

  v2 = *(_QWORD *)&posn->x;
  gPathPosn.z = posn->z;
  *(_QWORD *)&gPathPosn.x = v2;
  gNeedExtraPaths = 1;
}
// 7AEE04: using guessed type char gNeedExtraPaths;

//----- (003195F4) --------------------------------------------------------
void __fastcall CPathFind::UpdateStreaming(CPathFind *this, bool bForceLoad)
{
  int v2; // r1
  int v3; // r0
  int v4; // r9
  int v5; // r4
  int v6; // r10
  int v7; // r2
  int v8; // r6
  unsigned int v9; // r2
  int v10; // r5
  int v11; // r1
  unsigned int v12; // r2
  size_t v13; // r8
  int v14; // r6
  UInt8 *v15; // r5
  int v16; // r10
  int v17; // r0
  int v18; // r2
  int v19; // r4
  int v20; // r11
  int v21; // r1
  int v22; // r6
  unsigned int v23; // r1
  int v24; // r5
  size_t v25; // r9
  int v26; // r6
  UInt8 *v27; // r5
  CVehiclePool *v28; // r6
  int32 m_nSize; // r5
  int v30; // r1
  int v31; // r11
  float *v32; // r2
  float v33; // s0
  float v34; // s2
  int v35; // r2
  int v36; // s4
  int v37; // s0
  int v38; // s6
  int v39; // s2
  int v40; // r10
  int v41; // r8
  int v42; // r1
  int v43; // r3
  int v44; // r3
  unsigned int v45; // r2
  int v46; // r1
  int v47; // r2
  UInt8 *v48; // r4
  int v49; // r9
  int v50; // r0
  unsigned int v51; // r1
  int v52; // r0
  int v53; // r10
  int v54; // r1
  int v55; // r11
  int v56; // r9
  int v57; // r2
  int v58; // r5
  unsigned int v59; // r2
  int v60; // r4
  int v61; // r1
  unsigned int v62; // r2
  size_t v63; // r8
  int v64; // r5
  UInt8 *v65; // r6
  UInt8 *v66; // r4
  int v67; // r10
  UInt8 (*v68)[8]; // r6
  CPathNode **pNodes; // r8
  UInt8 (*v70)[8]; // r11
  int v71; // r2
  int v72; // r5
  CPathNode **v73; // r9
  int32 v74; // r4
  CPathNode *v75; // r0
  int32 v76; // r1
  size_t v78; // [sp+8h] [bp-50h]
  int v79; // [sp+8h] [bp-50h]
  CVector v80; // [sp+Ch] [bp-4Ch] BYREF

  if ( bForceLoad
    || gNeedExtraPaths
    || (CTimer::m_snTimeInMilliseconds ^ CTimer::m_snPreviousTimeInMilliseconds) >= 0x200 )
  {
    *(_QWORD *)&ToBeStreamed[6][0] = 0LL;
    *(_QWORD *)&ToBeStreamed[7][0] = 0LL;
    *(_QWORD *)&ToBeStreamed[4][0] = 0LL;
    *(_QWORD *)&ToBeStreamed[5][0] = 0LL;
    *(_QWORD *)&ToBeStreamed[0][0] = 0LL;
    *(_QWORD *)&ToBeStreamed[1][0] = 0LL;
    *(_QWORD *)&ToBeStreamed[2][0] = 0LL;
    *(_QWORD *)&ToBeStreamed[3][0] = 0LL;
    *(_QWORD *)&ToBeStreamedForScript[6][0] = 0LL;
    *(_QWORD *)&ToBeStreamedForScript[7][0] = 0LL;
    *(_QWORD *)&ToBeStreamedForScript[4][0] = 0LL;
    *(_QWORD *)&ToBeStreamedForScript[5][0] = 0LL;
    *(_QWORD *)&ToBeStreamedForScript[0][0] = 0LL;
    *(_QWORD *)&ToBeStreamedForScript[1][0] = 0LL;
    *(_QWORD *)&ToBeStreamedForScript[2][0] = 0LL;
    *(_QWORD *)&ToBeStreamedForScript[3][0] = 0LL;
    if ( FindPlayerPed(-1) )
    {
      FindPlayerCoors(&v80, -1);
      v2 = 0;
      v3 = 7;
      v4 = 7;
      v5 = (int)(float)((float)((float)(v80.x + 350.0) + 3000.0) / 750.0);
      v6 = (int)(float)((float)((float)(v80.y + 350.0) + 3000.0) / 750.0);
      v7 = (int)(float)((float)((float)(v80.y + -350.0) + 3000.0) / 750.0);
      if ( v6 <= 0 )
        v6 = 0;
      if ( v6 >= 7 )
        v6 = 7;
      if ( v7 <= 0 )
        v7 = 0;
      if ( v7 < 7 )
        v4 = v7;
      if ( v5 <= 0 )
        v5 = 0;
      if ( v5 >= 7 )
        v5 = 7;
      if ( (int)(float)((float)((float)(v80.x + -350.0) + 3000.0) / 750.0) > 0 )
        v2 = (int)(float)((float)((float)(v80.x + -350.0) + 3000.0) / 750.0);
      if ( v2 < 7 )
        v3 = v2;
      if ( v3 <= v5 )
      {
        v8 = v6;
        v9 = ~v7;
        if ( v4 > v6 )
          v8 = v4;
        v10 = -8;
        if ( v9 <= 0xFFFFFFF8 )
          v9 = -8;
        v11 = ~v2;
        v12 = v9 + v8;
        if ( v11 > -8 )
          v10 = v11;
        v13 = v12 + 2;
        v14 = -2 - v10;
        v15 = &ToBeStreamed[v3][v4];
        do
        {
          if ( v4 <= v6 )
            memset(v15, 1, v13);
          ++v14;
          v15 += 8;
        }
        while ( v14 < v5 );
      }
    }
    if ( gNeedExtraPaths == 1 )
    {
      v16 = 7;
      v17 = 7;
      v18 = (int)(float)((float)((float)(gPathPosn.x + -300.0) + 3000.0) / 750.0);
      v19 = (int)(float)((float)((float)(gPathPosn.x + 300.0) + 3000.0) / 750.0);
      v20 = (int)(float)((float)((float)(gPathPosn.y + 300.0) + 3000.0) / 750.0);
      v21 = (int)(float)((float)((float)(gPathPosn.y + -300.0) + 3000.0) / 750.0);
      if ( v20 <= 0 )
        v20 = 0;
      if ( v20 >= 7 )
        v20 = 7;
      if ( v21 <= 0 )
        v21 = 0;
      if ( v21 < 7 )
        v16 = v21;
      if ( v19 <= 0 )
        v19 = 0;
      if ( v19 >= 7 )
        v19 = 7;
      if ( v18 <= 0 )
        v18 = 0;
      if ( v18 < 7 )
        v17 = v18;
      if ( v17 <= v19 )
      {
        v22 = v20;
        if ( v16 > v20 )
          v22 = v16;
        v23 = ~v21;
        v24 = -8;
        if ( v23 <= 0xFFFFFFF8 )
          v23 = -8;
        v25 = v23 + v22 + 2;
        if ( ~v18 >= -8 && v18 != 7 )
          v24 = ~v18;
        v26 = -2 - v24;
        v27 = &ToBeStreamed[v17][v16];
        do
        {
          if ( v16 <= v20 )
            memset(v27, 1, v25);
          ++v26;
          v27 += 8;
        }
        while ( v26 < v19 );
      }
      gNeedExtraPaths = 0;
    }
    v28 = CPools::ms_pVehiclePool;
    m_nSize = CPools::ms_pVehiclePool->m_nSize;
    while ( m_nSize )
    {
      if ( (v28->m_aFlags[--m_nSize] & 0x80u) == 0 )
      {
        v50 = (int)v28->m_aStorage[m_nSize];
        if ( v50 )
        {
          v51 = *(_DWORD *)(v50 + 1444);
          if ( (v51 > 8 || ((1 << v51) & 0x178) == 0) && *(_BYTE *)(v50 + 1192) == 2 )
          {
            v30 = *(_DWORD *)(v50 + 20);
            v31 = 7;
            v32 = (float *)(v30 + 48);
            if ( !v30 )
              v32 = (float *)(v50 + 4);
            v33 = *v32;
            v34 = v32[1];
            v35 = 0;
            v36 = (int)(float)((float)((float)(v33 + -300.0) + 3000.0) / 750.0);
            v37 = (int)(float)((float)((float)(v33 + 300.0) + 3000.0) / 750.0);
            v38 = (int)(float)((float)((float)(v34 + 300.0) + 3000.0) / 750.0);
            v39 = (int)(float)((float)((float)(v34 + -300.0) + 3000.0) / 750.0);
            v40 = v37;
            v41 = v38;
            if ( v38 <= 0 )
              v41 = 0;
            if ( v41 >= 7 )
              v41 = 7;
            if ( v39 > 0 )
              v35 = v39;
            if ( v35 < 7 )
              v31 = v35;
            if ( v37 <= 0 )
              v40 = 0;
            if ( v40 >= 7 )
              v40 = 7;
            v42 = v36;
            if ( v36 <= 0 )
              v42 = 0;
            v43 = 7;
            if ( v42 < 7 )
              v43 = v42;
            if ( v43 <= v40 )
            {
              v44 = v41;
              if ( v31 > v41 )
                v44 = v31;
              v45 = ~v35;
              if ( v45 <= 0xFFFFFFF8 )
                v45 = -8;
              v46 = ~v42;
              v78 = v45 + v44 + 2;
              v47 = -1;
              if ( v39 > 0 )
                v47 = ~v39;
              if ( v47 <= -8 )
                v47 = -8;
              if ( v46 <= -8 )
                v46 = -8;
              v48 = &ToBeStreamed[-1][-v47 - 1 + -8 * v46];
              v49 = -2 - v46;
              do
              {
                if ( v31 <= v41 )
                  memset(v48, 1, v78);
                ++v49;
                v48 += 8;
              }
              while ( v49 < v40 );
            }
          }
        }
      }
    }
    if ( this->bActiveRequestForRegions )
    {
      v52 = 7;
      v53 = 7;
      v54 = 0;
      v55 = (int)(float)((float)(this->RequestMaxX + 3000.0) / 750.0);
      v56 = (int)(float)((float)(this->RequestMaxY + 3000.0) / 750.0);
      v57 = (int)(float)((float)(this->RequestMinY + 3000.0) / 750.0);
      if ( v56 <= 0 )
        v56 = 0;
      if ( v56 >= 7 )
        v56 = 7;
      if ( v57 <= 0 )
        v57 = 0;
      if ( v57 < 7 )
        v53 = v57;
      if ( v55 <= 0 )
        v55 = 0;
      if ( v55 >= 7 )
        v55 = 7;
      if ( (int)(float)((float)(this->RequestMinX + 3000.0) / 750.0) > 0 )
        v54 = (int)(float)((float)(this->RequestMinX + 3000.0) / 750.0);
      if ( v54 < 7 )
        v52 = v54;
      if ( v52 <= v55 )
      {
        v58 = v56;
        if ( v53 > v56 )
          v58 = v53;
        v59 = ~v57;
        v60 = -8;
        if ( v59 <= 0xFFFFFFF8 )
          v59 = -8;
        v61 = ~v54;
        v62 = v59 + v58;
        if ( v61 > -8 )
          v60 = v61;
        v63 = v62 + 2;
        v64 = -2 - v60;
        v65 = &ToBeStreamedForScript[v52][v53];
        v66 = &ToBeStreamed[v52][v53];
        do
        {
          if ( v53 <= v56 )
          {
            memset(v66, 1, v63);
            memset(v65, 1, v63);
          }
          ++v64;
          v65 += 8;
          v66 += 8;
        }
        while ( v64 < v55 );
      }
    }
    v67 = 25511;
    v68 = ToBeStreamed;
    pNodes = this->pNodes;
    v70 = ToBeStreamedForScript;
    v71 = 0;
    do
    {
      v72 = 0;
      v73 = pNodes;
      v74 = v67;
      v79 = v71;
      do
      {
        v75 = *v73;
        if ( (*v68)[v72] )
        {
          if ( !v75 )
          {
            if ( (*v70)[v72] )
              v76 = 4;
            else
              v76 = 8;
            CStreaming::RequestModel(v74, v76);
          }
        }
        else if ( v75 )
        {
          CStreaming::RemoveModel(v74);
        }
        ++v72;
        v73 += 8;
        v74 += 8;
      }
      while ( v72 != 8 );
      ++v70;
      ++v68;
      ++pNodes;
      v71 = v79 + 1;
      ++v67;
    }
    while ( v79 != 7 );
  }
}
// 7AEE04: using guessed type char gNeedExtraPaths;

//----- (00319C38) --------------------------------------------------------
void __fastcall CPathFind::MakeRequestForNodesToBeLoaded(
        CPathFind *this,
        float MinX,
        float MaxX,
        float MinY,
        float MaxY)
{
  this->RequestMinX = MinX;
  this->bActiveRequestForRegions = 1;
  this->RequestMaxX = MaxX;
  this->RequestMinY = MinY;
  this->RequestMaxY = MaxY;
  CPathFind::UpdateStreaming(this, 1);
}

//----- (00319C68) --------------------------------------------------------
bool __fastcall CPathFind::HaveRequestedNodesBeenLoaded(CPathFind *this)
{
  int v1; // r3
  int v2; // r1
  int v3; // r12
  int v4; // r4
  int v5; // r2
  int v6; // lr
  int v8; // r4
  int v9; // r5
  int v10; // r3
  CPathNode **v11; // r0
  int v12; // r3
  int v13; // r4
  CPathNode **v14; // r5

  v1 = 0;
  v2 = 7;
  v3 = 7;
  v4 = (int)(float)((float)(this->RequestMinY + 3000.0) / 750.0);
  v5 = (int)(float)((float)(this->RequestMaxY + 3000.0) / 750.0);
  v6 = (int)(float)((float)(this->RequestMaxX + 3000.0) / 750.0);
  if ( v5 <= 0 )
    v5 = 0;
  if ( v5 >= 7 )
    v5 = 7;
  if ( v6 <= 0 )
    v6 = 0;
  if ( v6 >= 7 )
    v6 = 7;
  if ( v4 <= 0 )
    v4 = 0;
  if ( v4 < 7 )
    v3 = v4;
  if ( (int)(float)((float)(this->RequestMinX + 3000.0) / 750.0) > 0 )
    v1 = (int)(float)((float)(this->RequestMinX + 3000.0) / 750.0);
  if ( v1 < 7 )
    v2 = v1;
  if ( v2 > v6 )
    return 1;
  v8 = ~v4;
  v9 = -8;
  v10 = ~v1;
  if ( v8 <= -8 )
    v8 = -8;
  if ( v10 > -8 )
    v9 = v10;
  v11 = &this->apHashTable[503 - v9 - 8 * v8];
  v12 = -2 - v8;
  while ( 1 )
  {
    v13 = v12;
    v14 = v11;
    if ( v3 <= v5 )
      break;
LABEL_27:
    ++v11;
    if ( v2++ >= v6 )
      return 1;
  }
  while ( *v14 )
  {
    ++v13;
    v14 += 8;
    if ( v13 >= v5 )
      goto LABEL_27;
  }
  return 0;
}

//----- (00319D88) --------------------------------------------------------
bool __fastcall CPathFind::AreNodesLoadedForArea(CPathFind *this, float MinX, float MaxX, float MinY, float MaxY)
{
  int v7; // r3
  int v8; // r2
  int v9; // r12
  float v10; // s6
  int v11; // r1
  float v12; // s4
  int v13; // s6
  int v14; // r4
  int v15; // lr
  int v17; // r4
  int v18; // r5
  int v19; // r3
  CPathNode **v20; // r0
  int v21; // r3
  CPathNode **v22; // r4
  int v23; // r5

  v7 = 0;
  v8 = 7;
  v9 = 7;
  v10 = (float)(MinX + 3000.0) / 750.0;
  v11 = (int)(float)((float)(MaxY + 3000.0) / 750.0);
  v12 = (float)(MinY + 3000.0) / 750.0;
  v13 = (int)v10;
  if ( v11 <= 0 )
    v11 = 0;
  if ( v11 >= 7 )
    v11 = 7;
  v14 = (int)v12;
  v15 = (int)(float)((float)(MaxX + 3000.0) / 750.0);
  if ( v15 <= 0 )
    v15 = 0;
  if ( v15 >= 7 )
    v15 = 7;
  if ( (int)v12 <= 0 )
    v14 = 0;
  if ( v14 < 7 )
    v9 = v14;
  if ( v13 > 0 )
    v7 = v13;
  if ( v7 < 7 )
    v8 = v7;
  if ( v8 > v15 )
    return 1;
  v17 = ~v14;
  v18 = -8;
  v19 = ~v7;
  if ( v17 <= -8 )
    v17 = -8;
  if ( v19 > -8 )
    v18 = v19;
  v20 = &this->apHashTable[503 - v18 - 8 * v17];
  v21 = -2 - v17;
  while ( 1 )
  {
    v22 = v20;
    v23 = v21;
    if ( v9 <= v11 )
      break;
LABEL_27:
    ++v20;
    if ( v8++ >= v15 )
      return 1;
  }
  while ( *v22 )
  {
    ++v23;
    v22 += 8;
    if ( v23 >= v11 )
      goto LABEL_27;
  }
  return 0;
}

//----- (00319E90) --------------------------------------------------------
void __fastcall CPathFind::LoadSceneForPathNodes(CPathFind *this, CVector CenterCoors)
{
  int v2; // r9
  float v3; // s4
  float v4; // s2
  int v5; // r1
  int v6; // r0
  int v7; // r4
  int v8; // r10
  int v9; // r2
  int v10; // r6
  unsigned int v11; // r2
  int v12; // r5
  int v13; // r1
  unsigned int v14; // r2
  size_t v15; // r8
  int v16; // r6
  UInt8 *v17; // r5
  int v18; // r5
  UInt8 *v19; // r4

  v2 = 7;
  v3 = (float)(CenterCoors.x + -350.0) + 3000.0;
  v4 = (float)(CenterCoors.x + 350.0) + 3000.0;
  *(_QWORD *)&ToBeStreamed[6][0] = 0LL;
  *(_QWORD *)&ToBeStreamed[7][0] = 0LL;
  *(_QWORD *)&ToBeStreamed[4][0] = 0LL;
  *(_QWORD *)&ToBeStreamed[5][0] = 0LL;
  v5 = 0;
  *(_QWORD *)&ToBeStreamed[0][0] = 0LL;
  *(_QWORD *)&ToBeStreamed[1][0] = 0LL;
  *(_QWORD *)&ToBeStreamed[2][0] = 0LL;
  *(_QWORD *)&ToBeStreamed[3][0] = 0LL;
  v6 = 7;
  v7 = (int)(float)(v4 / 750.0);
  v8 = (int)(float)((float)((float)(CenterCoors.y + 350.0) + 3000.0) / 750.0);
  v9 = (int)(float)((float)((float)(CenterCoors.y + -350.0) + 3000.0) / 750.0);
  if ( v8 <= 0 )
    v8 = 0;
  if ( v8 >= 7 )
    v8 = 7;
  if ( v9 <= 0 )
    v9 = 0;
  if ( v9 < 7 )
    v2 = v9;
  if ( v7 <= 0 )
    v7 = 0;
  if ( v7 >= 7 )
    v7 = 7;
  if ( (int)(float)(v3 / 750.0) > 0 )
    v5 = (int)(float)(v3 / 750.0);
  if ( v5 < 7 )
    v6 = v5;
  if ( v6 <= v7 )
  {
    v10 = v8;
    v11 = ~v9;
    if ( v2 > v8 )
      v10 = v2;
    v12 = -8;
    if ( v11 <= 0xFFFFFFF8 )
      v11 = -8;
    v13 = ~v5;
    v14 = v11 + v10;
    if ( v13 > -8 )
      v12 = v13;
    v15 = v14 + 2;
    v16 = -2 - v12;
    v17 = &ToBeStreamed[v6][v2];
    do
    {
      if ( v2 <= v8 )
        memset(v17, 1, v15);
      ++v16;
      v17 += 8;
    }
    while ( v16 < v7 );
  }
  v18 = 0;
  v19 = &ToBeStreamed[0][7];
  do
  {
    if ( *(v19 - 7) )
      CStreaming::RequestModel(v18 + 25511, 0);
    if ( ToBeStreamed[v18][1] )
      CStreaming::RequestModel(v18 + 25519, 0);
    if ( ToBeStreamed[v18][2] )
      CStreaming::RequestModel(v18 + 25527, 0);
    if ( ToBeStreamed[v18][3] )
      CStreaming::RequestModel(v18 + 25535, 0);
    if ( ToBeStreamed[v18][4] )
      CStreaming::RequestModel(v18 + 25543, 0);
    if ( ToBeStreamed[v18][5] )
      CStreaming::RequestModel(v18 + 25551, 0);
    if ( ToBeStreamed[v18][6] )
      CStreaming::RequestModel(v18 + 25559, 0);
    if ( *v19 )
      CStreaming::RequestModel(v18 + 25567, 0);
    ++v18;
    v19 += 8;
  }
  while ( v18 != 8 );
}

//----- (0031A0D0) --------------------------------------------------------
int __fastcall CPathFind::IsWaterNodeNearby(CPathFind *this, CVector Coors, float Range)
{
  float x; // s4
  int v4; // r1
  float y; // s2
  int v6; // lr
  char *v7; // r2
  int v8; // r1
  int v9; // r3
  _WORD *v10; // r1
  int v11; // r2
  float v12; // s8
  float v13; // s10

  x = Coors.x;
  Coors.x = 0.0;
  y = Coors.y;
  while ( 1 )
  {
    v6 = v4;
    v7 = (char *)this + 4 * v4;
    v8 = *((_DWORD *)v7 + 513);
    if ( v8 )
    {
      v9 = *((_DWORD *)v7 + 1089);
      if ( v9 >= 1 )
        break;
    }
LABEL_8:
    v4 = v6 + 1;
    if ( v6 >= 63 )
      return 0;
  }
  v10 = (_WORD *)(v8 + 24);
  v11 = 0;
  while ( 1 )
  {
    if ( (*v10 & 0x80) != 0 )
    {
      v12 = y - (float)((float)(__int16)*(v10 - 7) * 0.125);
      v13 = x - (float)((float)(__int16)*(v10 - 8) * 0.125);
      if ( sqrtf((float)(v13 * v13) + (float)(v12 * v12)) < Range )
        return 1;
    }
    ++v11;
    v10 += 14;
    if ( v11 >= v9 )
      goto LABEL_8;
  }
}

//----- (0031A164) --------------------------------------------------------
void __fastcall CPathFind::StartNewInterior(CPathFind *this, UInt32 ID)
{
  UInt32 *InteriorID; // r0
  int v3; // r1
  UInt32 v4; // r2

  InteriorIDBeingBuilt = ID;
  InteriorID = this->InteriorID;
  bInteriorBeingBuilt = 1;
  v3 = 0;
  NumNodesGiven = 0;
  NumLinksToExteriorNodes = 0;
  do
    v4 = InteriorID[v3++];
  while ( v4 != -1 );
  NewInteriorSlot = v3 - 1;
}

//----- (0031A1C8) --------------------------------------------------------
CNodeAddress __fastcall CPathFind::AddNodeToNewInterior(
        CPathFind *this,
        float X,
        float Y,
        float Z,
        bool bDontWander,
        Int8 ConnectsTo1,
        Int8 ConnectsTo2,
        Int8 ConnectsTo3,
        Int8 ConnectsTo4,
        Int8 ConnectsTo5,
        Int8 ConnectsTo6)
{
  Int32 v11; // r6
  Int8 *v12; // r5
  __int16 v13; // r1

  v11 = NumNodesGiven;
  YCoorGiven[NumNodesGiven] = Y;
  DontWanderGiven[v11] = bDontWander;
  ConnectsToGiven[6 * v11] = ConnectsTo1;
  v12 = &ConnectsToGiven[6 * v11];
  XCoorGiven[v11] = X;
  v12[1] = ConnectsTo2;
  v12[2] = ConnectsTo3;
  v13 = NewInteriorSlot;
  ZCoorGiven[v11] = Z;
  v12[3] = ConnectsTo4;
  v12[4] = ConnectsTo5;
  v12[5] = ConnectsTo6;
  NumNodesGiven = v11 + 1;
  return (CNodeAddress)(unsigned __int16)(v13 + 64);
}

//----- (0031A27C) --------------------------------------------------------
void __fastcall CPathFind::AddInteriorLink(CPathFind *this, Int32 Node1, Int32 Node2)
{
  int v3; // r0
  int v4; // r3
  bool v5; // cc
  int v6; // r12
  Int8 *v7; // r0
  int v8; // r3
  Int8 *v9; // r2
  int v10; // r0

  v3 = 0;
  do
  {
    v4 = v3 + 1;
    if ( v3 > 5 )
      break;
    v5 = ConnectsToGiven[6 * Node1 + v3++] <= -1;
  }
  while ( !v5 );
  v6 = 3 * Node2;
  v7 = &ConnectsToGiven[6 * Node1 + v4];
  v8 = 0;
  *(v7 - 1) = Node2;
  v9 = &ConnectsToGiven[6 * Node2];
  do
  {
    v10 = v8 + 1;
    if ( v8 > 5 )
      break;
    v5 = v9[v8++] <= -1;
  }
  while ( !v5 );
  ConnectsToGiven[2 * v6 - 1 + v10] = Node1;
}

//----- (0031A2EC) --------------------------------------------------------
void __fastcall CPathFind::AddInteriorLinkToExternalNode(CPathFind *this, Int32 Node, CNodeAddress ExternalNode)
{
  Int32 v3; // r3

  v3 = NumLinksToExteriorNodes;
  aInteriorNodeLinkedToExterior[NumLinksToExteriorNodes] = Node;
  aExteriorNodeLinkedTo[v3] = ExternalNode;
  NumLinksToExteriorNodes = v3 + 1;
}

//----- (0031A324) --------------------------------------------------------
void __fastcall CPathFind::RemoveInteriorLinks(CPathFind *this, Int32 Node)
{
  Int32 v2; // r12
  Int32 v3; // r3
  Int8 *v4; // r2
  Int8 *v5; // r5

  v2 = NumNodesGiven;
  if ( NumNodesGiven >= 1 )
  {
    v3 = 0;
    v4 = &ConnectsToGiven[5];
    do
    {
      if ( Node == v3 )
      {
        *(v4 - 1) = -1;
        v5 = v4;
        *(_DWORD *)(v4 - 5) = -1;
      }
      else
      {
        if ( *(v4 - 5) == Node )
          *(v4 - 5) = -1;
        if ( *(v4 - 4) == Node )
          *(v4 - 4) = -1;
        if ( *(v4 - 3) == Node )
          *(v4 - 3) = -1;
        if ( *(v4 - 2) == Node )
          *(v4 - 2) = -1;
        if ( *(v4 - 1) == Node )
          *(v4 - 1) = -1;
        if ( *v4 != Node )
          goto LABEL_18;
        v5 = &ConnectsToGiven[6 * v3 + 5];
      }
      *v5 = -1;
LABEL_18:
      ++v3;
      v4 += 6;
    }
    while ( v3 < v2 );
  }
}

//----- (0031A3C8) --------------------------------------------------------
CNodeAddress __fastcall CPathFind::FindNearestExteriorNodeToInteriorNode(CPathFind *this, Int32 Node)
{
  bool v3; // [sp+1Ch] [bp-Ch]
  CVector v4; // 0:r2.8,8:^0.4

  v4.y = ZCoorGiven[Node];
  v4.x = YCoorGiven[Node];
  LODWORD(v4.z) = 1;
  return (CNodeAddress)CPathFind::FindNodeClosestToCoors(
                         (CNodeAddress *)&ThePaths,
                         (CPathFind *)LODWORD(XCoorGiven[Node]),
                         v4,
                         3.0,
                         0.0,
                         0,
                         0,
                         0,
                         1,
                         v3);
}
// 31A412: variable 'v3' is possibly undefined

//----- (0031A42C) --------------------------------------------------------
void __fastcall MakeSureLinkExists(Int8 Node, Int8 LinkedTo)
{
  int v2; // r3
  int v3; // r1
  Int8 *v4; // r12
  char v5; // r5
  Int8 *v6; // r12
  int v7; // t1
  Int8 *v8; // lr
  char v9; // r11
  Int8 *v10; // lr
  int v11; // t1
  Int8 *v12; // r8
  Int8 *v13; // r8
  char v14; // r10
  int v15; // t1
  Int8 *v16; // r6
  Int8 *v17; // r6
  char v18; // r9
  int v19; // t1
  int v20; // [sp+4h] [bp-20h]

  v2 = 3 * LinkedTo;
  v3 = (unsigned __int8)ConnectsToGiven[6 * LinkedTo];
  if ( v3 != (unsigned __int8)Node )
  {
    v4 = &ConnectsToGiven[2 * v2];
    v7 = (unsigned __int8)v4[1];
    v6 = v4 + 1;
    v5 = v7;
    if ( v7 != (unsigned __int8)Node )
    {
      v8 = &ConnectsToGiven[2 * v2];
      v11 = (unsigned __int8)v8[2];
      v10 = v8 + 2;
      v9 = v11;
      if ( v11 != (unsigned __int8)Node )
      {
        v12 = &ConnectsToGiven[2 * v2];
        v15 = (unsigned __int8)v12[3];
        v13 = v12 + 3;
        v14 = v15;
        if ( v15 != (unsigned __int8)Node )
        {
          v20 = (unsigned __int8)ConnectsToGiven[2 * v2 + 4];
          if ( v20 != (unsigned __int8)Node )
          {
            v16 = &ConnectsToGiven[2 * v2];
            v19 = (unsigned __int8)v16[5];
            v17 = v16 + 5;
            v18 = v19;
            if ( v19 != (unsigned __int8)Node )
            {
              if ( (v3 & 0x80u) != 0 )
              {
                v6 = &ConnectsToGiven[2 * v2];
              }
              else if ( v5 > -1 )
              {
                v6 = v10;
                if ( v9 >= 0 )
                {
                  v6 = v13;
                  if ( v14 >= 0 )
                  {
                    v6 = &ConnectsToGiven[2 * v2 + 4];
                    if ( (v20 & 0x80u) == 0 )
                    {
                      if ( v18 < 0 )
                        *v17 = Node;
                      return;
                    }
                  }
                }
              }
              *v6 = Node;
            }
          }
        }
      }
    }
  }
}

//----- (0031A510) --------------------------------------------------------
void __fastcall SetOneAdjacentNodeForThisNode(
        Int32 Region,
        int Node,
        Int32 AdjRegion,
        Int32 AdjNode,
        Int32 FreeSlot,
        int *a6)
{
  int16x4_t v6; // d16
  int16x4_t v7; // d17
  int v8; // r4
  UInt8 *v9; // r6
  CPathNode *v10; // r4
  int v11; // r0
  CPathNode *v12; // r2
  CPathNode *v13; // r3
  float v14; // s0
  float32x2_t v15; // d16
  unsigned __int64 v16; // d1
  float v17; // s0
  unsigned int v18; // r1
  CPathNode **v19; // r2
  int v20; // r0
  __int16 v21; // t1

  v8 = *a6;
  v9 = ThePaths.pAdjacentNodesDist[FreeSlot - 8];
  *(_WORD *)&v9[4 * *a6] = AdjRegion;
  *(_WORD *)&v9[4 * v8 + 2] = AdjNode;
  v10 = ThePaths.pNodes[Region];
  v11 = Node;
  v12 = &ThePaths.pNodes[AdjRegion][AdjNode];
  v13 = &v10[Node];
  v6.n64_u32[0] = *(_DWORD *)&v12->CoorsY;
  v7.n64_u32[0] = *(_DWORD *)&v13->CoorsY;
  v14 = (float)((float)v13->CoorsX * 0.125) - (float)((float)v12->CoorsX * 0.125);
  v15.n64_u64[0] = vsub_f32(
                     vmul_f32(vcvt_f32_s32((int32x2_t)vmovl_s16(v7).n128_u64[0]), (float32x2_t)0x3E0000003E000000LL),
                     vmul_f32(vcvt_f32_s32((int32x2_t)vmovl_s16(v6).n128_u64[0]), (float32x2_t)0x3E0000003E000000LL)).n64_u64[0];
  v16 = vmul_f32(v15, v15).n64_u64[0];
  v17 = sqrtf((float)((float)(v14 * v14) + *(float *)&v16) + *((float *)&v16 + 1));
  v18 = (unsigned int)v17;
  if ( v17 > 255.0 || v18 )
  {
    if ( v17 > 255.0 )
      LOBYTE(v18) = -1;
  }
  else
  {
    LOBYTE(v18) = 1;
  }
  v19 = &ThePaths.apHashTable[FreeSlot + 63];
  *((_BYTE *)&v19[729]->pNext + *a6) = v18;
  *((_BYTE *)&v19[801]->pNext + *a6) = 0;
  v20 = (int)&v19[513][v11];
  v21 = *(_WORD *)(v20 + 24);
  v20 += 24;
  *(_BYTE *)(v20 + 2) = *(_BYTE *)(v20 + 2);
  *(_WORD *)v20 = ((_BYTE)v21 + 1) & 0xF | v21 & 0xFFF0;
  ++*a6;
}
// 31A59A: variable 'v7' is possibly undefined
// 31A592: variable 'v6' is possibly undefined

//----- (0031A65C) --------------------------------------------------------
void __fastcall CPathFind::CompleteNewInterior(CPathFind *this, CNodeAddress *pNearestExteriorNode)
{
  Int32 v2; // r0
  CPathFind *v3; // r10
  CPathNode *v4; // r0
  CPathNode **v5; // r1
  CPathNode **v6; // r3
  int v7; // r5
  float *v8; // lr
  Int32 v9; // r10
  float *v10; // r12
  float *v11; // r11
  char *v12; // r0
  int v13; // s2
  int v14; // s6
  int v15; // r0
  int v16; // r9
  char v17; // r8
  int v18; // r6
  char v19; // r4
  int v20; // r4
  int v21; // r4
  int v22; // r4
  unsigned __int16 *v23; // r2
  int v24; // r6
  int v25; // r1
  int v26; // r2
  int v27; // r2
  unsigned __int16 *v28; // r1
  int v29; // r4
  int v30; // r2
  unsigned __int16 *v31; // r1
  int v32; // r4
  int v33; // r2
  int v34; // r2
  Int8 *v35; // r1
  int i; // r0
  int v37; // r6
  int v38; // r5
  int v39; // lr
  Int8 *v40; // r4
  Int8 *v41; // r4
  char v42; // r9
  int v43; // t1
  Int8 *v44; // r12
  char v45; // r11
  Int8 *v46; // r12
  int v47; // t1
  Int8 *v48; // r6
  int v49; // r8
  int v50; // r11
  int v51; // r2
  unsigned __int8 *v52; // r0
  int v53; // r8
  UInt8 *v54; // r0
  Int32 FreeSlot; // r1
  int v56; // r0
  __int16 v57; // r2
  Int32 v58; // r11
  int v59; // r5
  Int8 *j; // r6
  CPathNode **v61; // r3
  Int8 v62; // r10
  int v63; // r2
  __int16 v64; // t1
  char v65; // r4
  Int32 v66; // r3
  Int32 v67; // r3
  Int32 v68; // r3
  Int32 v69; // r3
  Int32 v70; // r3
  Int32 v71; // r3
  __int16 v72; // r0
  Int32 v73; // r1
  UInt8 *v74; // r3
  int v75; // r4
  CNodeAddress v76; // r5
  unsigned __int16 v77; // r6
  Int8 *v78; // [sp+8h] [bp-50h]
  int v79; // [sp+10h] [bp-48h]
  int v80; // [sp+14h] [bp-44h]
  Int32 v81; // [sp+28h] [bp-30h]
  int v82; // [sp+28h] [bp-30h]
  __int16 v84; // [sp+30h] [bp-28h]
  UInt8 Group; // [sp+34h] [bp-24h]
  int v86[8]; // [sp+38h] [bp-20h] BYREF

  if ( pNearestExteriorNode )
    pNearestExteriorNode->Region = -1;
  v2 = NumNodesGiven;
  if ( !NumNodesGiven )
    goto LABEL_61;
  if ( NumLinksToExteriorNodes < 1 )
  {
    Group = NewInteriorSlot + 100;
    v3 = this;
  }
  else
  {
    v3 = this;
    Group = this->pNodes[aExteriorNodeLinkedTo[0].Region][HIWORD(*(_DWORD *)aExteriorNodeLinkedTo)].Group;
  }
  v3->InteriorID[NewInteriorSlot] = InteriorIDBeingBuilt;
  v4 = (CPathNode *)CMemoryMgr::Malloc(28 * v2);
  v84 = NewInteriorSlot + 64;
  v5 = &v3->apHashTable[NewInteriorSlot + 63];
  v5[513] = v4;
  v81 = NumNodesGiven;
  if ( NumNodesGiven < 1 )
  {
    v50 = 0;
    goto LABEL_39;
  }
  v6 = v5 + 513;
  v7 = 24;
  v8 = YCoorGiven;
  v9 = 0;
  v10 = XCoorGiven;
  v11 = ZCoorGiven;
  while ( 1 )
  {
    v12 = (char *)v4 + v7;
    v13 = (int)(float)(*v11 * 8.0);
    v14 = (int)(float)(*v10 * 8.0);
    *((_WORD *)v12 - 7) = (int)(float)(*v8 * 8.0);
    *((_WORD *)v12 - 8) = v14;
    *((_WORD *)v12 - 6) = v13;
    v15 = (int)*v6 + v7;
    *(_WORD *)(v15 - 4) = v9;
    *(_WORD *)(v15 - 6) = v84;
    *((_BYTE *)*v6 + v7 - 2) = 0;
    *((_BYTE *)*v6 + v7 - 1) = Group;
    *(_WORD *)((char *)&(*v6)->pNext + v7) &= ~0x10u;
    v16 = (int)*v6 + v7;
    v17 = *(_BYTE *)(v16 + 2);
    *(_WORD *)v16 |= 0x20u;
    *(_BYTE *)(v16 + 2) = v17;
    v18 = (int)*v6 + v7;
    v19 = *(_BYTE *)(v18 + 2);
    *(_WORD *)v18 |= 0x100u;
    *(_BYTE *)(v18 + 2) = v19;
    v20 = (int)*v6 + v7;
    LOBYTE(v18) = *(_BYTE *)(v20 + 2);
    *(_WORD *)v20 &= ~0x40u;
    *(_BYTE *)(v20 + 2) = v18;
    v21 = (int)*v6 + v7;
    LOBYTE(v18) = *(_BYTE *)(v21 + 2);
    *(_WORD *)v21 &= ~0x80u;
    *(_BYTE *)(v21 + 2) = v18;
    v22 = (int)*v6 + v7;
    LOBYTE(v18) = *(_BYTE *)(v22 + 2);
    *(_WORD *)v22 &= ~0x200u;
    *(_BYTE *)(v22 + 2) = v18;
    v23 = (unsigned __int16 *)((char *)*v6 + v7);
    v24 = DontWanderGiven[v9++];
    v25 = (*v23 | (*((unsigned __int8 *)v23 + 2) << 16)) & 0xFFFBFF | (v24 << 10);
    *v23 = *v23 & 0xFBFF | ((_WORD)v24 << 10);
    *((_BYTE *)v23 + 2) = BYTE2(v25);
    v26 = (int)*v6 + v7;
    LOBYTE(v22) = *(_BYTE *)(v26 + 2);
    *(_WORD *)v26 |= 0x800u;
    *(_BYTE *)(v26 + 2) = v22;
    v27 = (int)*v6 + v7;
    LOBYTE(v22) = *(_BYTE *)(v27 + 2);
    *(_WORD *)v27 &= 0xCFFFu;
    *(_BYTE *)(v27 + 2) = v22;
    v28 = (unsigned __int16 *)((char *)*v6 + v7);
    v29 = *v28;
    v30 = *((unsigned __int8 *)v28 + 2);
    *v28 = v29;
    *((_BYTE *)v28 + 2) = (v29 | (v30 << 16) | 0xF0000u) >> 16;
    v31 = (unsigned __int16 *)((char *)*v6 + v7);
    v32 = *v31;
    v33 = *((unsigned __int8 *)v31 + 2);
    *v31 = v32;
    *((_BYTE *)v31 + 2) = ((v32 | (v33 << 16)) & 0xFFFFFu) >> 16;
    *(_WORD *)((char *)*v6 + v7 - 10) = 32766;
    if ( v9 >= v81 )
      break;
    v7 += 28;
    ++v11;
    ++v8;
    v4 = *v6;
    ++v10;
  }
  if ( NumNodesGiven < 1 )
  {
LABEL_38:
    v50 = 0;
    v3 = this;
    goto LABEL_39;
  }
  v34 = 0;
  v35 = ConnectsToGiven;
  v79 = NumNodesGiven;
  do
  {
    for ( i = 0; i != 6; ++i )
    {
      v37 = v35[i];
      if ( v37 >= 0 )
      {
        v38 = 3 * v37;
        v39 = (unsigned __int8)ConnectsToGiven[6 * v37];
        if ( v39 != (unsigned __int8)v34 )
        {
          v40 = &ConnectsToGiven[6 * v37];
          v43 = (unsigned __int8)v40[1];
          v41 = v40 + 1;
          v42 = v43;
          if ( v43 != (unsigned __int8)v34 )
          {
            v44 = &ConnectsToGiven[6 * v37];
            v47 = (unsigned __int8)v44[2];
            v46 = v44 + 2;
            v45 = v47;
            if ( v47 != (unsigned __int8)v34 )
            {
              v82 = (unsigned __int8)ConnectsToGiven[6 * v37 + 3];
              if ( v82 != (unsigned __int8)v34 )
              {
                v48 = &ConnectsToGiven[6 * v37];
                v49 = (unsigned __int8)v48[4];
                if ( v49 != (unsigned __int8)v34 )
                {
                  v78 = &ConnectsToGiven[2 * v38 + 5];
                  if ( (unsigned __int8)*v78 != (unsigned __int8)v34 )
                  {
                    if ( (v39 & 0x80u) != 0 )
                    {
                      v41 = &ConnectsToGiven[2 * v38];
LABEL_30:
                      *v41 = v34;
                      continue;
                    }
                    if ( v42 <= -1 )
                      goto LABEL_30;
                    v41 = v46;
                    if ( v45 < 0 )
                      goto LABEL_30;
                    v41 = &ConnectsToGiven[2 * v38 + 3];
                    if ( (v82 & 0x80u) != 0 )
                      goto LABEL_30;
                    v41 = v48 + 4;
                    if ( (v49 & 0x80u) != 0 )
                      goto LABEL_30;
                    if ( *v78 < 0 )
                      *v78 = v34;
                  }
                }
              }
            }
          }
        }
      }
    }
    ++v34;
    v35 += 6;
  }
  while ( v34 < v79 );
  if ( v79 < 1 )
    goto LABEL_38;
  v50 = 0;
  v3 = this;
  v51 = 0;
  v52 = (unsigned __int8 *)&ConnectsToGiven[2];
  do
  {
    ++v51;
    v50 += ((v52[2] >> 7) ^ 1)
         + ((*(v52 - 2) >> 7) ^ 1)
         + ((*(v52 - 1) >> 7) ^ 1)
         + ((*v52 >> 7) ^ 1)
         + ((v52[1] >> 7) ^ 1)
         + ((v52[3] >> 7) ^ 1);
    v52 += 6;
  }
  while ( v51 < v79 );
LABEL_39:
  v53 = v50 + 192;
  v3->pAdjacentNodes[NewInteriorSlot + 64] = (CNodeAddress *)CMemoryMgr::Malloc(4 * (v50 + 192));
  v3->pAdjacentNodesDist[NewInteriorSlot + 64] = (UInt8 *)CMemoryMgr::Malloc(v50 + 192);
  v54 = (UInt8 *)CMemoryMgr::Malloc(v50 + 192);
  FreeSlot = NewInteriorSlot;
  v3->pAdjacentNodesFlags[NewInteriorSlot + 64] = v54;
  v86[0] = 0;
  v56 = v50;
  if ( NumNodesGiven >= 1 )
  {
    v80 = v50;
    v57 = 0;
    v58 = 1;
    v59 = 16;
    for ( j = &ConnectsToGiven[5]; ; j += 6 )
    {
      v61 = &v3->apHashTable[FreeSlot + 63];
      v62 = v58 - 1;
      *(_WORD *)((char *)&v61[513]->pNext + v59) = v57;
      v63 = (int)v61[513] + v59;
      v64 = *(_WORD *)(v63 + 8);
      v63 += 8;
      v65 = *(_BYTE *)(v63 + 2);
      *(_WORD *)v63 = v64 & 0xFFF0;
      *(_BYTE *)(v63 + 2) = v65;
      v66 = *(j - 5);
      if ( v66 >= 0 )
        SetOneAdjacentNodeForThisNode(FreeSlot + 64, v62, FreeSlot + 64, v66, FreeSlot, v86);
      v67 = *(j - 4);
      if ( v67 > -1 )
        SetOneAdjacentNodeForThisNode(NewInteriorSlot + 64, v62, NewInteriorSlot + 64, v67, NewInteriorSlot, v86);
      v68 = *(j - 3);
      if ( v68 >= 0 )
        SetOneAdjacentNodeForThisNode(NewInteriorSlot + 64, v62, NewInteriorSlot + 64, v68, NewInteriorSlot, v86);
      v69 = *(j - 2);
      if ( v69 >= 0 )
        SetOneAdjacentNodeForThisNode(NewInteriorSlot + 64, v62, NewInteriorSlot + 64, v69, NewInteriorSlot, v86);
      v70 = *(j - 1);
      if ( v70 >= 0 )
        SetOneAdjacentNodeForThisNode(NewInteriorSlot + 64, v62, NewInteriorSlot + 64, v70, NewInteriorSlot, v86);
      v71 = *j;
      if ( v71 >= 0 )
        SetOneAdjacentNodeForThisNode(NewInteriorSlot + 64, v62, NewInteriorSlot + 64, v71, NewInteriorSlot, v86);
      if ( v58 >= NumNodesGiven )
        break;
      v59 += 28;
      v57 = v86[0];
      ++v58;
      v3 = this;
      FreeSlot = NewInteriorSlot;
    }
    v50 = v80;
    v3 = this;
    v56 = v80;
  }
  do
    v3->pAdjacentNodes[NewInteriorSlot + 64][v56++].Region = -1;
  while ( v56 < v53 );
  v72 = NewInteriorSlot;
  v73 = NumNodesGiven;
  v74 = &v3->ColourGroups[4 * NewInteriorSlot];
  *((_DWORD *)v74 + 1153) = 0;
  *((_DWORD *)v74 + 1081) = v73;
  *((_DWORD *)v74 + 1225) = v73;
  *((_DWORD *)v74 + 1297) = 0;
  *((_DWORD *)v74 + 1369) = v50;
  if ( NumLinksToExteriorNodes >= 1 )
  {
    v75 = 0;
    while ( 1 )
    {
      v76 = aExteriorNodeLinkedTo[v75];
      v77 = v72 + 64;
      CPathFind::AddDynamicLinkBetween2Nodes_For1Node(this, (CNodeAddress)(unsigned __int16)(v72 + 64), v76);
      CPathFind::AddDynamicLinkBetween2Nodes_For1Node(this, v76, (CNodeAddress)v77);
      if ( ++v75 >= NumLinksToExteriorNodes )
        break;
      v72 = NewInteriorSlot;
    }
  }
LABEL_61:
  bInteriorBeingBuilt = 0;
}

//----- (0031AD34) --------------------------------------------------------
void __fastcall CPathFind::AddDynamicLinkBetween2Nodes(
        CPathFind *this,
        CNodeAddress NodeAddress1,
        CNodeAddress NodeAddress2)
{
  CPathFind::AddDynamicLinkBetween2Nodes_For1Node(this, NodeAddress1, NodeAddress2);
  CPathFind::AddDynamicLinkBetween2Nodes_For1Node(this, NodeAddress2, NodeAddress1);
}

//----- (0031AD56) --------------------------------------------------------
void __fastcall CPathFind::AddDynamicLinkBetween2Nodes_For1Node(
        CPathFind *this,
        CNodeAddress Node,
        CNodeAddress LinkedToNode)
{
  unsigned int Region; // r9
  int Index; // r3
  UInt8 *v5; // lr
  int v6; // r6
  int v7; // r12
  int *v8; // r10
  int v9; // r1
  CNodeAddress v10; // r5
  int v11; // r4
  __int16 *v12; // r4
  int v13; // r6
  int v14; // t1
  int v15; // r4
  int v16; // r2
  int v17; // r11
  _WORD *v18; // r11
  __int16 v19; // t1
  int v20; // r8
  _DWORD *v21; // r5
  int v22; // r12
  char v23; // r4
  int *v24; // r0
  _DWORD *v25; // r2
  int v26; // r6
  int *v27; // r0
  __int16 *v29; // [sp+4h] [bp-24h]

  Region = Node.Region;
  Index = Node.Index;
  v5 = &this->ColourGroups[4 * Node.Region];
  v6 = 7 * Node.Index;
  v7 = *((_DWORD *)v5 + 513);
  v8 = (int *)(v5 + 2628);
  v9 = *((_DWORD *)v5 + 1305);
  v10 = LinkedToNode;
  v11 = v7 + 4 * v6;
  v14 = *(__int16 *)(v11 + 16);
  v12 = (__int16 *)(v11 + 16);
  v13 = v14;
  if ( v9 <= v14 )
  {
    v18 = (_WORD *)(v7 + 28 * Index + 24);
    goto LABEL_45;
  }
  v29 = v12;
  v15 = *v8;
  do
  {
    v16 = *(unsigned __int16 *)(v15 + 4 * v9);
    v9 += 12;
  }
  while ( v16 != 0xFFFF );
  v17 = v7 + 28 * Index;
  v19 = *(_WORD *)(v17 + 24);
  v18 = (_WORD *)(v17 + 24);
  if ( (v19 & 0xF) != 0 )
  {
    v20 = v9 - 12;
    v21 = v5 + 3204;
    v22 = 0;
    while ( 1 )
    {
      *(_DWORD *)(v15 + 4 * v20) = *(_DWORD *)(v15 + 4 * v13 + 4 * v22);
      *(_BYTE *)(*((_DWORD *)v5 + 729) + v20) = *(_BYTE *)(*((_DWORD *)v5 + 729) + v13 + v22);
      v23 = *(_BYTE *)(*v21 + v13 + v22++);
      *(_BYTE *)(*v21 + v20) = v23;
      if ( v22 >= (*v18 & 0xF) )
        break;
      v15 = *v8;
      ++v20;
    }
  }
  if ( Region > 0x3F )
  {
    v10 = LinkedToNode;
    v12 = v29;
    v13 = v9 - 12;
    goto LABEL_45;
  }
  v24 = (int *)((char *)this + 64 * Region);
  v10 = LinkedToNode;
  v12 = v29;
  if ( v24[1377] < 0 )
  {
    v25 = v24 + 1377;
    v26 = 0;
LABEL_44:
    v27 = &v24[v26];
    *v25 = *v29;
    v13 = v9 - 12;
    v27[2401] = v9 - 12;
    goto LABEL_45;
  }
  if ( v24[1378] < 0 )
  {
    v25 = v24 + 1378;
    v26 = 1;
    goto LABEL_44;
  }
  if ( v24[1379] < 0 )
  {
    v25 = v24 + 1379;
    v26 = 2;
    goto LABEL_44;
  }
  if ( v24[1380] < 0 )
  {
    v25 = v24 + 1380;
    v26 = 3;
    goto LABEL_44;
  }
  if ( v24[1381] < 0 )
  {
    v25 = v24 + 1381;
    v26 = 4;
    goto LABEL_44;
  }
  if ( v24[1382] < 0 )
  {
    v25 = v24 + 1382;
    v26 = 5;
    goto LABEL_44;
  }
  if ( v24[1383] < 0 )
  {
    v25 = v24 + 1383;
    v26 = 6;
    goto LABEL_44;
  }
  if ( v24[1384] < 0 )
  {
    v25 = v24 + 1384;
    v26 = 7;
    goto LABEL_44;
  }
  if ( v24[1385] < 0 )
  {
    v25 = v24 + 1385;
    v26 = 8;
    goto LABEL_44;
  }
  if ( v24[1386] < 0 )
  {
    v25 = v24 + 1386;
    v26 = 9;
    goto LABEL_44;
  }
  if ( v24[1387] < 0 )
  {
    v25 = v24 + 1387;
    v26 = 10;
    goto LABEL_44;
  }
  if ( v24[1388] < 0 )
  {
    v25 = v24 + 1388;
    v26 = 11;
    goto LABEL_44;
  }
  if ( v24[1389] < 0 )
  {
    v25 = v24 + 1389;
    v26 = 12;
    goto LABEL_44;
  }
  if ( v24[1390] < 0 )
  {
    v25 = v24 + 1390;
    v26 = 13;
    goto LABEL_44;
  }
  if ( v24[1391] < 0 )
  {
    v25 = v24 + 1391;
    v26 = 14;
    goto LABEL_44;
  }
  if ( v24[1392] < 0 )
  {
    v25 = v24 + 1392;
    v26 = 15;
    goto LABEL_44;
  }
  v13 = v9 - 12;
LABEL_45:
  *(CNodeAddress *)(*v8 + 4 * ((*v18 & 0xF) + v13)) = v10;
  *(_BYTE *)(*((_DWORD *)v5 + 729) + (*v18 & 0xF) + v13) = 5;
  *(_BYTE *)(*((_DWORD *)v5 + 801) + (*v18 & 0xF) + v13) = 0;
  *v18 = ((unsigned __int8)*v18 + 1) & 0xF | *v18 & 0xFFF0;
  *v12 = v13;
}

//----- (0031AFA4) --------------------------------------------------------
void __fastcall CPathFind::RemoveInterior(CPathFind *this, UInt32 ID)
{
  int v3; // r6
  char *v4; // r0
  int v5; // r0
  int v6; // r1
  UInt8 *v7; // r4
  int v8; // r1
  int v9; // r2
  _DWORD *v10; // lr
  _DWORD *v11; // r8
  _DWORD *v12; // r11
  char *v13; // r6
  _DWORD *v14; // r10
  int v15; // r9
  int v16; // r3
  __int16 *v17; // r12
  unsigned __int16 *v18; // r9
  int v19; // t1
  unsigned int v20; // r1
  _DWORD *v21; // r10
  int v22; // lr
  int v23; // r4
  int v24; // r8
  int v25; // r3
  unsigned int v26; // r6
  int i; // r3
  int v28; // r1
  int v29; // r1
  _DWORD *v30; // r4
  int v31; // r1
  int v32; // r1
  char *v33; // r1
  void **v34; // r4
  void *v35; // r0
  void *v36; // r0
  void *v37; // r0
  UInt32 v38; // [sp+4h] [bp-74h]
  int v39; // [sp+8h] [bp-70h]
  _DWORD *v40; // [sp+Ch] [bp-6Ch]
  _DWORD *v41; // [sp+10h] [bp-68h]
  _DWORD *v42; // [sp+14h] [bp-64h]
  _DWORD *v43; // [sp+18h] [bp-60h]
  _DWORD *v44; // [sp+1Ch] [bp-5Ch]
  _DWORD *v45; // [sp+20h] [bp-58h]
  _DWORD *v46; // [sp+24h] [bp-54h]
  _DWORD *v47; // [sp+28h] [bp-50h]
  _DWORD *v48; // [sp+2Ch] [bp-4Ch]
  _DWORD *v49; // [sp+30h] [bp-48h]
  _DWORD *v50; // [sp+34h] [bp-44h]
  _DWORD *v51; // [sp+38h] [bp-40h]
  _DWORD *v52; // [sp+3Ch] [bp-3Ch]
  _DWORD *v53; // [sp+40h] [bp-38h]
  _DWORD *v54; // [sp+44h] [bp-34h]
  _DWORD *v55; // [sp+4Ch] [bp-2Ch]
  int v56; // [sp+50h] [bp-28h]
  _DWORD *v57; // [sp+54h] [bp-24h]
  _DWORD *v58; // [sp+58h] [bp-20h]

  v3 = 0;
  v38 = ID;
  do
  {
    v4 = (char *)this + 4 * v3;
    if ( *((_DWORD *)v4 + 3426) != ID )
      goto LABEL_56;
    *((_DWORD *)v4 + 3426) = -1;
    v5 = v3 + 64;
    v6 = 0;
    v39 = v3;
    do
    {
      v7 = &this->ColourGroups[4 * v6];
      v56 = v6;
      v8 = *((_DWORD *)v7 + 513);
      if ( v8 )
      {
        v9 = *((_DWORD *)v7 + 1089);
        if ( v9 < *((_DWORD *)v7 + 1017) )
        {
          v10 = v7 + 2052;
          v11 = v7 + 4068;
          v12 = v7 + 2628;
          v13 = (char *)this + 64 * v56;
          v41 = v13 + 9660;
          v42 = v13 + 9656;
          v43 = v13 + 9652;
          v44 = v13 + 9648;
          v45 = v13 + 9644;
          v46 = v13 + 9640;
          v47 = v13 + 9636;
          v48 = v13 + 9632;
          v49 = v13 + 9628;
          v50 = v13 + 9624;
          v51 = v13 + 9620;
          v52 = v13 + 9616;
          v53 = v13 + 9612;
          v54 = v13 + 9608;
          v55 = v13 + 9604;
          v14 = v7 + 5220;
          v40 = v13 + 9664;
          v57 = v7 + 5220;
          v58 = v7 + 4068;
          while ( 1 )
          {
            v15 = v8 + 28 * v9;
            v17 = (__int16 *)(v15 + 16);
            v16 = *(__int16 *)(v15 + 16);
            if ( *v14 <= v16 )
            {
              v19 = *(unsigned __int16 *)(v15 + 24);
              v18 = (unsigned __int16 *)(v15 + 24);
              v20 = v19 | (*((unsigned __int8 *)v18 + 2) << 16);
              if ( (v19 & 0xF) != 0 )
              {
                v21 = v10;
                v22 = 0;
                v23 = 0;
                v24 = 0;
                while ( 1 )
                {
                  v25 = v22 + (__int16)v16;
                  v26 = *(unsigned __int16 *)(*v12 + 4 * v25);
                  if ( v26 == v5 )
                  {
                    if ( v22 < (int)((v20 & 0xF) - 1) )
                    {
                      this->pAdjacentNodes[v25] = this->pAdjacentNodes[v25 + 1];
                      v20 = *v18 | (*((unsigned __int8 *)v18 + 2) << 16);
                      for ( i = v22 + 1; i < (*v18 & 0xF) - 1; v20 = *v18 | (*((unsigned __int8 *)v18 + 2) << 16) )
                      {
                        v28 = *v17 + i++;
                        this->pAdjacentNodes[v28] = this->pAdjacentNodes[v28 + 1];
                      }
                    }
                    --v22;
                    v20 = v20 & 0xFFFFFFF0 | ((_BYTE)v20 + 15) & 0xF;
                    *v18 = v20;
                    v24 = 1;
                    *((_BYTE *)v18 + 2) = BYTE2(v20);
                  }
                  else
                  {
                    v23 |= v26 > 0x3F;
                  }
                  if ( ++v22 >= (unsigned __int8)(v20 & 0xF) )
                    break;
                  LOWORD(v16) = *v17;
                }
                v29 = v23 | ~v24;
                v10 = v21;
                v14 = v57;
                v11 = v58;
                if ( !(v29 << 31) )
                {
                  *(_WORD *)(*v12 + 4 * *v17) = -1;
                  *(_WORD *)(*v12 + 4 * *v17 + 4) = -1;
                  *(_WORD *)(*v12 + 4 * *v17 + 8) = -1;
                  *(_WORD *)(*v12 + 4 * *v17 + 12) = -1;
                  *(_WORD *)(*v12 + 4 * *v17 + 16) = -1;
                  *(_WORD *)(*v12 + 4 * *v17 + 20) = -1;
                  *(_WORD *)(*v12 + 4 * *v17 + 24) = -1;
                  *(_WORD *)(*v12 + 4 * *v17 + 28) = -1;
                  *(_WORD *)(*v12 + 4 * *v17 + 32) = -1;
                  *(_WORD *)(*v12 + 4 * *v17 + 36) = -1;
                  *(_WORD *)(*v12 + 4 * *v17 + 40) = -1;
                  *(_WORD *)(*v12 + 4 * *v17 + 44) = -1;
                  v30 = v55;
                  v31 = *v17;
                  if ( *v55 == v31 )
                  {
                    v32 = 0;
                  }
                  else
                  {
                    v30 = v54;
                    if ( *v54 == v31 )
                    {
                      v32 = 1;
                    }
                    else
                    {
                      v30 = v53;
                      if ( *v53 == v31 )
                      {
                        v32 = 2;
                      }
                      else
                      {
                        v30 = v52;
                        if ( *v52 == v31 )
                        {
                          v32 = 3;
                        }
                        else
                        {
                          v30 = v51;
                          if ( *v51 == v31 )
                          {
                            v32 = 4;
                          }
                          else
                          {
                            v30 = v50;
                            if ( *v50 == v31 )
                            {
                              v32 = 5;
                            }
                            else
                            {
                              v30 = v49;
                              if ( *v49 == v31 )
                              {
                                v32 = 6;
                              }
                              else
                              {
                                v30 = v48;
                                if ( *v48 == v31 )
                                {
                                  v32 = 7;
                                }
                                else
                                {
                                  v30 = v47;
                                  if ( *v47 == v31 )
                                  {
                                    v32 = 8;
                                  }
                                  else
                                  {
                                    v30 = v46;
                                    if ( *v46 == v31 )
                                    {
                                      v32 = 9;
                                    }
                                    else
                                    {
                                      v30 = v45;
                                      if ( *v45 == v31 )
                                      {
                                        v32 = 10;
                                      }
                                      else
                                      {
                                        v30 = v44;
                                        if ( *v44 == v31 )
                                        {
                                          v32 = 11;
                                        }
                                        else
                                        {
                                          v30 = v43;
                                          if ( *v43 == v31 )
                                          {
                                            v32 = 12;
                                          }
                                          else
                                          {
                                            v30 = v42;
                                            if ( *v42 == v31 )
                                            {
                                              v32 = 13;
                                            }
                                            else
                                            {
                                              v30 = v41;
                                              if ( *v41 == v31 )
                                              {
                                                v32 = 14;
                                              }
                                              else
                                              {
                                                if ( *v40 != v31 )
                                                  goto LABEL_53;
                                                v32 = 15;
                                                v30 = v40;
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                  v33 = (char *)this + 64 * v56 + 4 * v32;
                  *v17 = *((_DWORD *)v33 + 1377);
                  *((_DWORD *)v33 + 1377) = -1;
                  *v30 = -1;
                }
              }
            }
LABEL_53:
            if ( ++v9 >= *v11 )
              break;
            v8 = *v10;
          }
        }
      }
      v6 = v56 + 1;
    }
    while ( v56 != 63 );
    v34 = (void **)((char *)this + 4 * v5);
    CMemoryMgr::Free(v34[513]);
    v35 = v34[657];
    v34[513] = 0;
    CMemoryMgr::Free(v35);
    v36 = v34[729];
    v34[657] = 0;
    CMemoryMgr::Free(v36);
    v37 = v34[801];
    v34[729] = 0;
    CMemoryMgr::Free(v37);
    v34[1089] = 0;
    v34[1161] = 0;
    v34[1233] = 0;
    v34[1305] = 0;
    v34[1017] = 0;
    v34[801] = 0;
    ID = v38;
    v3 = v39;
LABEL_56:
    ++v3;
  }
  while ( v3 != 8 );
}

//----- (0031B38C) --------------------------------------------------------
CNodeAddress __fastcall CPathFind::ReturnInteriorNodeIndex(CPathFind *this, UInt32 ID, Int32 Index)
{
  int v3; // r0

  if ( this->InteriorID[0] == ID )
  {
    v3 = 64;
  }
  else if ( this->InteriorID[1] == ID )
  {
    v3 = 65;
  }
  else if ( this->InteriorID[2] == ID )
  {
    v3 = 66;
  }
  else if ( this->InteriorID[3] == ID )
  {
    v3 = 67;
  }
  else if ( this->InteriorID[4] == ID )
  {
    v3 = 68;
  }
  else if ( this->InteriorID[5] == ID )
  {
    v3 = 69;
  }
  else if ( this->InteriorID[6] == ID )
  {
    v3 = 70;
  }
  else
  {
    if ( this->InteriorID[7] != ID )
      return (CNodeAddress)0xFFFF;
    v3 = 71;
  }
  return (CNodeAddress)(v3 | (Index << 16));
}

//----- (0031B40C) --------------------------------------------------------
int __fastcall CPathFind::FindLinkBetweenNodes(CPathFind *this, CNodeAddress Node1, CNodeAddress Node2)
{
  int Region; // r12
  CPathNode *v5; // r3
  int result; // r0
  int v7; // r4
  int Index; // r0
  char *v9; // r2
  int v10; // lr
  int v11; // r2
  int i; // r1

  Region = Node1.Region;
  v5 = this->pNodes[Node1.Region];
  result = 0xFFFF;
  if ( v5 )
  {
    v7 = Node2.Region;
    if ( this->pNodes[Node2.Region] )
    {
      Index = Node2.Index;
      v9 = (char *)&ThePaths + 4 * Node1.Region;
      v10 = *((_DWORD *)v9 + 513);
      v11 = *((_DWORD *)v9 + 657);
      for ( i = *(__int16 *)(v10 + 28 * Node1.Index + 16);
            *(unsigned __int16 *)(v11 + 1 * i) != v7 || *(unsigned __int16 *)(v11 + 1 * i + 2) != Index;
            ++i )
      {
        ;
      }
      return ThePaths.pAdjacentLinks[Region][i].Address;
    }
  }
  return result;
}

//----- (0031B48C) --------------------------------------------------------
CVector *__fastcall CPathFind::FindParkingNodeInArea(
        CVector *retstr,
        CPathFind *this,
        float MinX,
        float MaxX,
        float MinY,
        float MaxY,
        float MinZ,
        float MaxZ)
{
  float v8; // s0
  float v9; // s1
  float v10; // s2
  float v11; // s4
  float v12; // s5
  float v13; // s7
  int v16; // r3
  char v17; // r12
  int v18; // r10
  int v19; // r6
  char *v20; // r4
  int v21; // r5
  int v22; // r4
  __int16 *v23; // r5
  float v24; // s11
  float v25; // s13
  float v26; // s15
  char v27; // r2
  _BOOL4 v28; // r2
  int v29; // r2

  v16 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  do
  {
    v20 = (char *)this + 4 * v16;
    v21 = *((_DWORD *)v20 + 513);
    if ( v21 )
    {
      v22 = *((_DWORD *)v20 + 1089);
      if ( v22 >= 1 )
      {
        v23 = (__int16 *)(v21 + 12);
        do
        {
          v24 = (float)*(v23 - 2) * 0.125;
          if ( v24 > MinX && v24 < MaxX )
          {
            v25 = (float)*(v23 - 1) * 0.125;
            if ( v25 > MinY && v25 < MaxY )
            {
              v26 = (float)*v23 * 0.125;
              if ( v26 > MinZ && v26 < MaxZ && ((*((unsigned __int8 *)v23 + 14) << 16) & 0xF00000) == 0x200000 )
              {
                v27 = 0;
                if ( v19 == CPathFind::FindParkingNodeInArea(float,float,float,float,float,float)::LookingForIndex )
                {
                  v13 = (float)*v23 * 0.125;
                  v12 = (float)*(v23 - 1) * 0.125;
                  v9 = (float)*(v23 - 2) * 0.125;
                }
                if ( !v19 )
                {
                  v8 = (float)*v23 * 0.125;
                  v11 = (float)*(v23 - 1) * 0.125;
                  v10 = (float)*(v23 - 2) * 0.125;
                }
                if ( v19 == CPathFind::FindParkingNodeInArea(float,float,float,float,float,float)::LookingForIndex )
                  v27 = 1;
                v17 |= v27;
                v28 = v19++ == 0;
                v18 |= v28;
              }
            }
          }
          v23 += 14;
          --v22;
        }
        while ( v22 );
      }
    }
    ++v16;
  }
  while ( v16 != 64 );
  v29 = CPathFind::FindParkingNodeInArea(float,float,float,float,float,float)::LookingForIndex + 1;
  if ( CPathFind::FindParkingNodeInArea(float,float,float,float,float,float)::LookingForIndex + 1 >= v19 )
    v29 = 0;
  CPathFind::FindParkingNodeInArea(float,float,float,float,float,float)::LookingForIndex = v29;
  if ( v18 << 31 )
  {
    if ( (v17 & 1) != 0 )
    {
      v8 = v13;
      v11 = v12;
      v10 = v9;
    }
  }
  else
  {
    v10 = 0.0;
    v11 = 0.0;
    v8 = 0.0;
  }
  retstr->x = v10;
  retstr->y = v11;
  retstr->z = v8;
  return retstr;
}
// 31B5C0: variable 'v13' is possibly undefined
// 31B5C4: variable 'v12' is possibly undefined
// 31B5C8: variable 'v9' is possibly undefined
// 31B5DA: variable 'v10' is possibly undefined
// 31B5DE: variable 'v11' is possibly undefined
// 31B5E2: variable 'v8' is possibly undefined

//----- (0031B5F8) --------------------------------------------------------
int __fastcall CPedPath::CalcPedRoute(
        int Flag,
        CVector StartCoors,
        CVector TargetCoors,
        CVector *pCoorsList,
        Int16 *pNumNodesGiven,
        int NumNodesRequested)
{
  float x; // s2
  int result; // r0
  float y; // s4
  float v10; // s20
  float v11; // s18
  int v12; // r11
  int v13; // lr
  bool v14; // zf
  CPedPathNode *v15; // r2
  int v16; // r12
  Int8 v17; // r6
  int v18; // r5
  int v19; // r4
  CPedPathNode *v20; // r3
  uint16 v21; // r8
  float v22; // r5
  float v23; // r6
  float v24; // s18
  float v25; // r0
  int v26; // s0
  int v27; // r1
  int v28; // r0
  int v29; // r1
  int v30; // r1
  int v31; // r10
  CPtrNode *m_pHead; // r9
  CPtrNode v33; // kr00_8
  int v34; // r2
  bool v35; // zf
  CPtrNode *v36; // r4
  CPtrNode v37; // kr08_8
  int v38; // r2
  bool v39; // zf
  bool v40; // cc
  int i; // r0
  char *v42; // r1
  CPedPathNode *v43; // r10
  CPedPathNode *v44; // lr
  Int16 v45; // r8
  Int16 v46; // r9
  CPedPathNode **v47; // r5
  CPedPathNode **v48; // r11
  int DistanceToTarget; // r0
  CPedPathNode *v50; // r4
  CPedPathNode **p_pNext; // r1
  CPedPathNode **p_pPrevious; // r0
  int v53; // r0
  Int8 *p_Y; // r6
  int v55; // r2
  CPedPathNode *v56; // r4
  CPedPathNode **v57; // r1
  CPedPathNode **v58; // r0
  int v59; // r2
  CPedPathNode *v60; // r4
  CPedPathNode **v61; // r0
  CPedPathNode **v62; // r2
  int v63; // r0
  CPedPathNode *v64; // r1
  CPedPathNode **v65; // r0
  CPedPathNode *pNext; // r2
  int v67; // r0
  int v68; // r2
  CPedPathNode *v69; // r1
  CPedPathNode **v70; // r0
  CPedPathNode *v71; // r2
  int v72; // r0
  CPedPathNode *v73; // r1
  CPedPathNode **v74; // r0
  CPedPathNode *v75; // r2
  int v76; // r0
  CPedPathNode *v77; // r4
  int v78; // r1
  CPedPathNode **v79; // r0
  CPedPathNode *v80; // r1
  CPedPathNode *v81; // r4
  int v82; // r0
  CPedPathNode **v83; // r0
  CPedPathNode *v84; // r1
  int v85; // r1
  int v86; // r2
  int v87; // r3
  int v88; // r0
  CPedPathNode *v89; // r3
  int v90; // r6
  int v91; // r1
  int v92; // r1
  __int64 v93; // d16
  CVector *v94; // r1
  Int16 v95; // r0
  int v96; // [sp+8h] [bp-7E90h]
  int v97; // [sp+Ch] [bp-7E8Ch]
  int v98; // [sp+14h] [bp-7E84h]
  int v99; // [sp+18h] [bp-7E80h]
  int v100; // [sp+1Ch] [bp-7E7Ch]
  CPedPathNode *v101; // [sp+20h] [bp-7E78h]
  int v102; // [sp+24h] [bp-7E74h]
  int v103; // [sp+28h] [bp-7E70h]
  char *v104; // [sp+28h] [bp-7E70h]
  int v105; // [sp+2Ch] [bp-7E6Ch]
  char *v106; // [sp+2Ch] [bp-7E6Ch]
  char v107[8]; // [sp+30h] [bp-7E68h] BYREF
  CPedPathNode *v108; // [sp+38h] [bp-7E60h]
  CVector v109; // [sp+1A30h] [bp-6468h] BYREF
  CPedPathNode aNodes[40]; // [sp+1A40h] [bp-6458h] BYREF

  x = StartCoors.x;
  result = 0;
  *pNumNodesGiven = 0;
  if ( fabsf(TargetCoors.x - StartCoors.x) <= 23.8 )
  {
    y = StartCoors.y;
    if ( fabsf(TargetCoors.y - StartCoors.y) > 23.8 || fabsf(TargetCoors.z - StartCoors.z) > 23.8 )
      return 0;
    v10 = (float)((float)(StartCoors.x + TargetCoors.x) * 0.5) + -14.0;
    v11 = (float)((float)(StartCoors.y + TargetCoors.y) * 0.5) + -14.0;
    v109.z = (float)(StartCoors.z + TargetCoors.z) * 0.5;
    v109.y = v11;
    v109.x = v10;
    result = 0;
    v12 = (int)(float)((float)(TargetCoors.x - v10) / 0.7);
    v13 = (int)(float)((float)(StartCoors.x - v10) / 0.7);
    v14 = v13 == v12;
    if ( v13 == v12 )
      v14 = COERCE_INT((float)(StartCoors.y - v11) / 0.7) == COERCE_INT((float)(TargetCoors.y - v11) / 0.7);
    if ( !v14 )
    {
      v15 = aNodes;
      v16 = 0;
      v17 = 0;
      do
      {
        v18 = 0;
        v19 = 0;
        do
        {
          v20 = &v15[v18];
          v15[v18++].BlockedState = 0;
          v20->DistanceToTarget = 0x7FFF;
          v20->X = v17;
          v20->Y = v19++;
        }
        while ( v18 != 40 );
        ++v16;
        v15 += 40;
        ++v17;
      }
      while ( v16 != 40 );
      v97 = (int)(float)((float)(y - v11) / 0.7);
      v96 = (int)(float)((float)(TargetCoors.y - v11) / 0.7);
      if ( CWorld::ms_nCurrentScanCode == 0xFFFF )
      {
        CWorld::ClearScanCodes();
        v21 = 1;
      }
      else
      {
        v21 = CWorld::ms_nCurrentScanCode + 1;
      }
      v22 = floorf((float)(v10 / 50.0) + 60.0);
      v23 = floorf((float)(v11 / 50.0) + 60.0);
      v24 = floorf((float)((float)(v11 + 28.0) / 50.0) + 60.0);
      v25 = floorf((float)((float)(v10 + 28.0) / 50.0) + 60.0);
      CWorld::ms_nCurrentScanCode = v21;
      v26 = (int)v25;
      v27 = 119;
      v28 = (int)v24;
      if ( (int)v24 >= 119 )
        v28 = 119;
      v98 = v28;
      if ( v26 < 119 )
        v27 = v26;
      v105 = v27;
      v29 = (int)v23;
      if ( (int)v23 <= 0 )
        v29 = 0;
      v100 = v29;
      v30 = (int)v22;
      if ( (int)v22 <= 0 )
        v30 = 0;
      v99 = v30;
      if ( Flag != 1 && v100 <= v28 )
      {
        do
        {
          if ( v99 <= v105 )
          {
            v31 = v99;
            v103 = (unsigned __int8)(16 * v100);
            do
            {
              m_pHead = CWorld::ms_aRepeatSectors[v31 & 0xF | v103].m_ptrListArray[0].m_pHead;
              while ( m_pHead )
              {
                v33 = *m_pHead;
                m_pHead = m_pHead->m_pNext;
                v34 = *((unsigned __int16 *)v33.m_pVoid + 24);
                v35 = v34 == CWorld::ms_nCurrentScanCode;
                if ( v34 != CWorld::ms_nCurrentScanCode )
                  v35 = *((unsigned __int8 *)v33.m_pVoid + 28) << 31 == 0;
                if ( !v35 )
                {
                  *((_WORD *)v33.m_pVoid + 24) = CWorld::ms_nCurrentScanCode;
                  CPedPath::AddBlockade((CEntity *)v33.m_pVoid, (CPedPathNode (*)[40])aNodes, &v109);
                }
              }
              v36 = CWorld::ms_aRepeatSectors[v31 & 0xF | v103].m_ptrListArray[2].m_pHead;
              while ( v36 )
              {
                v37 = *v36;
                v36 = v36->m_pNext;
                v38 = *((unsigned __int16 *)v37.m_pVoid + 24);
                v39 = v38 == CWorld::ms_nCurrentScanCode;
                if ( v38 != CWorld::ms_nCurrentScanCode )
                  v39 = *((unsigned __int8 *)v37.m_pVoid + 28) << 31 == 0;
                if ( !v39 )
                {
                  *((_WORD *)v37.m_pVoid + 24) = CWorld::ms_nCurrentScanCode;
                  CPedPath::AddBlockade((CEntity *)v37.m_pVoid, (CPedPathNode (*)[40])aNodes, &v109);
                }
              }
              v40 = v31++ < v105;
            }
            while ( v40 );
          }
          v40 = v100++ < v98;
        }
        while ( v40 );
      }
      for ( i = 0; i != 6656; i += 16 )
      {
        v42 = &v107[i];
        *((_DWORD *)v42 + 2) = 0;
        *((_DWORD *)v42 + 3) = 0;
      }
      v43 = &aNodes[40 * v12 + v96];
      v108 = v43;
      v43->BlockedState = 0;
      v43->DistanceToTarget = 0;
      v102 = 0;
      v43->pNext = 0;
      v43->pPrevious = (CPedPathNode *)v107;
      v101 = v43;
      v44 = &aNodes[40 * (int)(float)((float)(x - v10) / 0.7) + v97];
      if ( !v43 )
      {
LABEL_130:
        do
        {
          v85 = v102;
          if ( v102 == 414 )
            return 0;
          ++v102;
          v43 = *(CPedPathNode **)&v107[16 * v85 + 24];
        }
        while ( !v43 );
      }
      v45 = v102 + 7;
      v46 = v102 + 5;
      v104 = &v107[(v102 + 7) << 16 >> 12];
      v47 = (CPedPathNode **)(v104 + 8);
      v106 = &v107[(v102 + 5) << 16 >> 12];
      v48 = (CPedPathNode **)(v106 + 8);
      while ( v43 != v44 )
      {
        if ( v43->X < 1 )
          goto LABEL_170;
        if ( !v43[-40].BlockedState )
        {
          DistanceToTarget = v43[-40].DistanceToTarget;
          if ( DistanceToTarget > v46 )
          {
            v50 = v43 - 40;
            p_pNext = &v43[-40].pNext;
            if ( DistanceToTarget == 0x7FFF )
            {
              p_pPrevious = &v43[-40].pPrevious;
            }
            else
            {
              v43[-40].pPrevious->pNext = *p_pNext;
              p_pPrevious = &v43[-40].pPrevious;
              if ( *p_pNext )
                (*p_pNext)->pPrevious = *p_pPrevious;
            }
            *p_pNext = *v48;
            *p_pPrevious = (CPedPathNode *)v106;
            if ( *v48 )
              (*v48)->pPrevious = v50;
            *v48 = v50;
            v43[-40].DistanceToTarget = v46;
          }
        }
        p_Y = &v43->Y;
        v53 = v43->Y;
        if ( v53 < 1 )
          goto LABEL_172;
        if ( !v43[-41].BlockedState )
        {
          v55 = v43[-41].DistanceToTarget;
          if ( v55 > v45 )
          {
            v56 = v43 - 41;
            v57 = &v43[-41].pNext;
            if ( v55 == 0x7FFF )
            {
              v58 = &v43[-41].pPrevious;
            }
            else
            {
              v43[-41].pPrevious->pNext = *v57;
              v58 = &v43[-41].pPrevious;
              if ( *v57 )
                (*v57)->pPrevious = *v58;
            }
            *v57 = *v47;
            *v58 = (CPedPathNode *)v104;
            if ( *v47 )
              (*v47)->pPrevious = v56;
            *v47 = v56;
            v43[-41].DistanceToTarget = v45;
            LOBYTE(v53) = *p_Y;
          }
        }
        if ( (char)v53 <= 38 )
        {
LABEL_172:
          if ( !v43[-39].BlockedState )
          {
            v59 = v43[-39].DistanceToTarget;
            if ( v59 > v45 )
            {
              v60 = v43 - 39;
              v61 = &v43[-39].pNext;
              if ( v59 == 0x7FFF )
              {
                v62 = &v43[-39].pPrevious;
              }
              else
              {
                v43[-39].pPrevious->pNext = *v61;
                v62 = &v43[-39].pPrevious;
                if ( *v61 )
                  (*v61)->pPrevious = *v62;
              }
              *v61 = *v47;
              *v62 = (CPedPathNode *)v104;
              if ( *v47 )
                (*v47)->pPrevious = v60;
              *v47 = v60;
              v43[-39].DistanceToTarget = v45;
            }
          }
        }
        if ( v43->X <= 38 )
        {
LABEL_170:
          if ( !v43[40].BlockedState )
          {
            v63 = v43[40].DistanceToTarget;
            if ( v63 > v46 )
            {
              v64 = v43 + 40;
              if ( v63 == 0x7FFF )
              {
                v65 = &v43[40].pPrevious;
              }
              else
              {
                v43[40].pPrevious->pNext = v43[40].pNext;
                v65 = &v43[40].pPrevious;
                pNext = v43[40].pNext;
                if ( pNext )
                  pNext->pPrevious = *v65;
              }
              v43[40].pNext = *v48;
              *v65 = (CPedPathNode *)v106;
              if ( *v48 )
                (*v48)->pPrevious = v64;
              *v48 = v64;
              v43[40].DistanceToTarget = v46;
            }
          }
          p_Y = &v43->Y;
          v67 = v43->Y;
          if ( v67 < 1 )
            goto LABEL_171;
          if ( !v43[39].BlockedState )
          {
            v68 = v43[39].DistanceToTarget;
            if ( v68 > v45 )
            {
              v69 = v43 + 39;
              if ( v68 == 0x7FFF )
              {
                v70 = &v43[39].pPrevious;
              }
              else
              {
                v43[39].pPrevious->pNext = v43[39].pNext;
                v70 = &v43[39].pPrevious;
                v71 = v43[39].pNext;
                if ( v71 )
                  v71->pPrevious = *v70;
              }
              v43[39].pNext = *v47;
              *v70 = (CPedPathNode *)v104;
              if ( *v47 )
                (*v47)->pPrevious = v69;
              *v47 = v69;
              LOBYTE(v67) = v43->Y;
              v43[39].DistanceToTarget = v45;
            }
          }
          if ( (char)v67 <= 38 )
          {
LABEL_171:
            if ( !v43[41].BlockedState )
            {
              v72 = v43[41].DistanceToTarget;
              if ( v72 > v45 )
              {
                v73 = v43 + 41;
                if ( v72 == 0x7FFF )
                {
                  v74 = &v43[41].pPrevious;
                }
                else
                {
                  v43[41].pPrevious->pNext = v43[41].pNext;
                  v74 = &v43[41].pPrevious;
                  v75 = v43[41].pNext;
                  if ( v75 )
                    v75->pPrevious = *v74;
                }
                v43[41].pNext = *v47;
                *v74 = (CPedPathNode *)v104;
                if ( *v47 )
                  (*v47)->pPrevious = v73;
                *v47 = v73;
                v43[41].DistanceToTarget = v45;
              }
            }
          }
        }
        v76 = *p_Y;
        if ( v76 < 1 )
          goto LABEL_120;
        v77 = v43 - 1;
        if ( !v43[-1].BlockedState )
        {
          v78 = v43[-1].DistanceToTarget;
          if ( v78 > v46 )
          {
            if ( v78 == 0x7FFF )
            {
              v79 = &v43[-1].pPrevious;
            }
            else
            {
              v79 = &v43[-1].pPrevious;
              v43[-1].pPrevious->pNext = v43[-1].pNext;
              v80 = v43[-1].pNext;
              if ( v80 )
                v80->pPrevious = *v79;
            }
            v43[-1].pNext = *v48;
            *v79 = (CPedPathNode *)v106;
            if ( *v48 )
              (*v48)->pPrevious = v77;
            *v48 = v77;
            v43[-1].DistanceToTarget = v46;
            LOBYTE(v76) = *p_Y;
          }
        }
        if ( (char)v76 <= 38 )
        {
LABEL_120:
          v81 = v43 + 1;
          if ( !v43[1].BlockedState )
          {
            v82 = v43[1].DistanceToTarget;
            if ( v82 > v46 )
            {
              if ( v82 == 0x7FFF )
              {
                v83 = &v43[1].pPrevious;
              }
              else
              {
                v83 = &v43[1].pPrevious;
                v43[1].pPrevious->pNext = v43[1].pNext;
                v84 = v43[1].pNext;
                if ( v84 )
                  v84->pPrevious = *v83;
              }
              v43[1].pNext = *v48;
              *v83 = (CPedPathNode *)v106;
              if ( *v48 )
                (*v48)->pPrevious = v81;
              *v48 = v81;
              v43[1].DistanceToTarget = v46;
            }
          }
        }
        v43 = v43->pNext;
        if ( !v43 )
          goto LABEL_130;
      }
      *pNumNodesGiven = 0;
      result = 1;
      if ( NumNodesRequested >= 1 && v44 != v101 )
      {
        LOWORD(v86) = 0;
        while ( 1 )
        {
          v87 = v44->X;
          if ( v87 <= 0 )
          {
            LOWORD(v88) = v44->DistanceToTarget;
          }
          else
          {
            v88 = v44->DistanceToTarget;
            if ( v44[-40].DistanceToTarget + 5 == v88 )
            {
              v89 = v44 - 40;
              goto LABEL_166;
            }
            if ( v87 > 38 )
              goto LABEL_142;
          }
          if ( v44[40].DistanceToTarget + 5 == (__int16)v88 )
          {
            v89 = v44 + 40;
            goto LABEL_166;
          }
LABEL_142:
          v90 = v44->Y;
          if ( v90 <= 0 )
          {
            v91 = (__int16)v88;
          }
          else
          {
            v91 = (__int16)v88;
            if ( v44[-1].DistanceToTarget + 5 == (__int16)v88 )
            {
              v89 = v44 - 1;
              goto LABEL_166;
            }
            if ( v90 > 38 )
              goto LABEL_149;
          }
          if ( v44[1].DistanceToTarget + 5 == v91 )
          {
            v89 = v44 + 1;
            goto LABEL_166;
          }
LABEL_149:
          if ( v87 >= 1 )
          {
            if ( v90 <= 0 )
            {
              v92 = (__int16)v88;
LABEL_155:
              if ( v44[-39].DistanceToTarget + 7 == v92 )
              {
                v89 = v44 - 39;
                goto LABEL_166;
              }
            }
            else
            {
              v92 = (__int16)v88;
              if ( v44[-41].DistanceToTarget + 7 == (__int16)v88 )
              {
                v89 = v44 - 41;
                goto LABEL_166;
              }
              if ( v90 <= 38 )
                goto LABEL_155;
            }
            if ( v87 > 38 )
              goto LABEL_165;
          }
          if ( v90 < 1 )
            goto LABEL_162;
          if ( v44[39].DistanceToTarget + 7 == (__int16)v88 )
          {
            v89 = v44 + 39;
            goto LABEL_166;
          }
          if ( v90 <= 38 )
          {
LABEL_162:
            v89 = 0;
            if ( v44[41].DistanceToTarget + 7 == (__int16)v88 )
              v89 = v44 + 41;
            goto LABEL_166;
          }
LABEL_165:
          v89 = 0;
LABEL_166:
          v93 = *(_QWORD *)&v109.x;
          v94 = &pCoorsList[(__int16)v86];
          v94->z = v109.z;
          *(_QWORD *)&v94->x = v93;
          pCoorsList[*pNumNodesGiven].x = pCoorsList[*pNumNodesGiven].x + (float)((float)v89->X * 0.7);
          pCoorsList[*pNumNodesGiven].y = pCoorsList[*pNumNodesGiven].y + (float)((float)v89->Y * 0.7);
          v95 = *pNumNodesGiven + 1;
          *pNumNodesGiven = v95;
          v86 = v95;
          result = 1;
          if ( v86 < NumNodesRequested )
          {
            v44 = v89;
            if ( v89 != v101 )
              continue;
          }
          return result;
        }
      }
    }
  }
  return result;
}

//----- (0031BECC) --------------------------------------------------------
void __fastcall CPedPath::AddBlockadeSectorList(CPtrList *list, CPedPathNode (*aNodes)[40], CVector *pTopLeftPoint)
{
  CPtrNode *m_pHead; // r6
  CPtrNode v6; // kr00_8
  int v7; // r2
  bool v8; // zf

  m_pHead = list->m_pHead;
  while ( m_pHead )
  {
    while ( 1 )
    {
      v6 = *m_pHead;
      m_pHead = m_pHead->m_pNext;
      v7 = *((unsigned __int16 *)v6.m_pVoid + 24);
      v8 = v7 == CWorld::ms_nCurrentScanCode;
      if ( v7 != CWorld::ms_nCurrentScanCode )
        v8 = *((unsigned __int8 *)v6.m_pVoid + 28) << 31 == 0;
      if ( !v8 )
        break;
      if ( !m_pHead )
        return;
    }
    *((_WORD *)v6.m_pVoid + 24) = CWorld::ms_nCurrentScanCode;
    CPedPath::AddBlockade((CEntity *)v6.m_pVoid, aNodes, pTopLeftPoint);
  }
}

//----- (0031BF14) --------------------------------------------------------
void __fastcall CPedPath::AddBlockade(CEntity *pEntity, CPedPathNode (*aNodes)[40], CVector *pTopLeftPoint)
{
  float y; // s16
  float v7; // s18
  float x; // s22
  CMatrix *m_pMat; // r0
  float xy; // r9
  float yy; // r10
  float xx; // s20
  float v13; // s26
  float yx; // s24
  RwReal *p_y; // r11
  float v16; // s28
  float v17; // s26
  float ty; // s30
  int i; // r0
  CPedPathNode (*v20)[40]; // r3
  int v21; // r2
  float v22; // s1
  float v23; // s14
  float v24; // s1
  float v25; // s3
  float v26; // s3
  CVector v27; // [sp+0h] [bp-90h] BYREF
  CVector v28; // [sp+Ch] [bp-84h] BYREF
  CVector v29; // [sp+18h] [bp-78h] BYREF
  CVector v30; // [sp+24h] [bp-6Ch] BYREF

  y = CEntity::GetColModel(pEntity)->m_boxBound.m_vecMax.y;
  v7 = CEntity::GetColModel(pEntity)->m_boxBound.m_vecMin.y;
  x = CEntity::GetColModel(pEntity)->m_boxBound.m_vecMax.x;
  m_pMat = pEntity->m_pMat;
  if ( m_pMat )
  {
    xy = m_pMat->xy;
LABEL_4:
    yy = m_pMat->yy;
LABEL_5:
    xx = m_pMat->xx;
LABEL_6:
    v13 = pTopLeftPoint->x;
    yx = m_pMat->yx;
LABEL_7:
    p_y = &pTopLeftPoint->y;
    v16 = pTopLeftPoint->y;
    v17 = v13 - m_pMat->tx;
    goto LABEL_8;
  }
  CPlaceable::AllocateMatrix(pEntity);
  CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
  m_pMat = pEntity->m_pMat;
  xy = m_pMat->xy;
  if ( m_pMat )
    goto LABEL_4;
  CPlaceable::AllocateMatrix(pEntity);
  CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
  m_pMat = pEntity->m_pMat;
  yy = m_pMat->yy;
  if ( m_pMat )
    goto LABEL_5;
  CPlaceable::AllocateMatrix(pEntity);
  CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
  m_pMat = pEntity->m_pMat;
  xx = m_pMat->xx;
  if ( m_pMat )
    goto LABEL_6;
  CPlaceable::AllocateMatrix(pEntity);
  CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
  m_pMat = pEntity->m_pMat;
  v13 = pTopLeftPoint->x;
  yx = m_pMat->yx;
  if ( m_pMat )
    goto LABEL_7;
  CPlaceable::AllocateMatrix(pEntity);
  CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
  m_pMat = pEntity->m_pMat;
  p_y = &pTopLeftPoint->y;
  v16 = pTopLeftPoint->y;
  v17 = v13 - m_pMat->tx;
  if ( !m_pMat )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
    m_pMat = pEntity->m_pMat;
  }
LABEL_8:
  ty = m_pMat->ty;
  CEntity::GetBoundCentre(&v30, pEntity);
  if ( (float)(v30.x + CModelInfo::ms_modelInfoPtrs[pEntity->m_nModelIndex]->m_pColModel->m_sphereBound.m_fRadius) >= pTopLeftPoint->x )
  {
    CEntity::GetBoundCentre(&v29, pEntity);
    if ( (float)(v29.y + CModelInfo::ms_modelInfoPtrs[pEntity->m_nModelIndex]->m_pColModel->m_sphereBound.m_fRadius) >= *p_y )
    {
      CEntity::GetBoundCentre(&v28, pEntity);
      if ( (float)(v28.x - CModelInfo::ms_modelInfoPtrs[pEntity->m_nModelIndex]->m_pColModel->m_sphereBound.m_fRadius) <= (float)(pTopLeftPoint->x + 28.0) )
      {
        CEntity::GetBoundCentre(&v27, pEntity);
        if ( (float)(v27.y - CModelInfo::ms_modelInfoPtrs[pEntity->m_nModelIndex]->m_pColModel->m_sphereBound.m_fRadius) <= (float)(*p_y + 28.0) )
        {
          for ( i = 0; i != 40; ++i )
          {
            v20 = aNodes;
            v21 = 0;
            v22 = v17 + (float)((float)(__int16)i * 0.7);
            v23 = v22 * xy;
            v24 = xx * v22;
            do
            {
              if ( !*(_BYTE *)v20 )
              {
                v25 = (float)(v16 - ty) + (float)((float)(__int16)v21 * 0.7);
                if ( fabsf(v24 + (float)(yx * v25)) < (float)(x + 0.3) )
                {
                  v26 = v23 + (float)(v25 * yy);
                  if ( v26 < (float)(y + 0.3) && v26 > (float)(v7 + -0.3) )
                    *(_BYTE *)v20 = 1;
                }
              }
              ++v21;
              v20 = (CPedPathNode (*)[40])((char *)v20 + 16);
            }
            while ( v21 != 40 );
            ++aNodes;
          }
        }
      }
    }
  }
}

//----- (0031C1C0) --------------------------------------------------------
void __fastcall CPedPath::AddBuildingBlockade(CEntity *pEntity, CPedPathNode (*aNodes)[40], CVector *pTopLeftPoint)
{
  float y; // s16
  float v7; // s18
  float x; // s22
  CMatrix *m_pMat; // r0
  float xy; // r9
  float yy; // r10
  float xx; // s20
  float v13; // s26
  float yx; // s24
  RwReal *p_y; // r11
  float v16; // s28
  float v17; // s26
  float ty; // s30
  int i; // r0
  CPedPathNode (*v20)[40]; // r3
  int v21; // r2
  float v22; // s1
  float v23; // s14
  float v24; // s1
  float v25; // s3
  float v26; // s3
  CVector v27; // [sp+0h] [bp-90h] BYREF
  CVector v28; // [sp+Ch] [bp-84h] BYREF
  CVector v29; // [sp+18h] [bp-78h] BYREF
  CVector v30; // [sp+24h] [bp-6Ch] BYREF

  if ( (*(_BYTE *)&pEntity->m_info & 7) != 1 )
    return;
  y = CEntity::GetColModel(pEntity)->m_boxBound.m_vecMax.y;
  v7 = CEntity::GetColModel(pEntity)->m_boxBound.m_vecMin.y;
  x = CEntity::GetColModel(pEntity)->m_boxBound.m_vecMax.x;
  m_pMat = pEntity->m_pMat;
  if ( m_pMat )
  {
    xy = m_pMat->xy;
LABEL_5:
    yy = m_pMat->yy;
LABEL_6:
    xx = m_pMat->xx;
LABEL_7:
    v13 = pTopLeftPoint->x;
    yx = m_pMat->yx;
    goto LABEL_8;
  }
  CPlaceable::AllocateMatrix(pEntity);
  CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
  m_pMat = pEntity->m_pMat;
  xy = m_pMat->xy;
  if ( m_pMat )
    goto LABEL_5;
  CPlaceable::AllocateMatrix(pEntity);
  CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
  m_pMat = pEntity->m_pMat;
  yy = m_pMat->yy;
  if ( m_pMat )
    goto LABEL_6;
  CPlaceable::AllocateMatrix(pEntity);
  CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
  m_pMat = pEntity->m_pMat;
  xx = m_pMat->xx;
  if ( m_pMat )
    goto LABEL_7;
  CPlaceable::AllocateMatrix(pEntity);
  CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
  m_pMat = pEntity->m_pMat;
  v13 = pTopLeftPoint->x;
  yx = m_pMat->yx;
  if ( !m_pMat )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
    m_pMat = pEntity->m_pMat;
    p_y = &pTopLeftPoint->y;
    v16 = pTopLeftPoint->y;
    v17 = v13 - m_pMat->tx;
    if ( !m_pMat )
    {
      CPlaceable::AllocateMatrix(pEntity);
      CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
      m_pMat = pEntity->m_pMat;
    }
    goto LABEL_9;
  }
LABEL_8:
  p_y = &pTopLeftPoint->y;
  v16 = pTopLeftPoint->y;
  v17 = v13 - m_pMat->tx;
LABEL_9:
  ty = m_pMat->ty;
  CEntity::GetBoundCentre(&v30, pEntity);
  if ( (float)(v30.x + CModelInfo::ms_modelInfoPtrs[pEntity->m_nModelIndex]->m_pColModel->m_sphereBound.m_fRadius) >= pTopLeftPoint->x )
  {
    CEntity::GetBoundCentre(&v29, pEntity);
    if ( (float)(v29.y + CModelInfo::ms_modelInfoPtrs[pEntity->m_nModelIndex]->m_pColModel->m_sphereBound.m_fRadius) >= *p_y )
    {
      CEntity::GetBoundCentre(&v28, pEntity);
      if ( (float)(v28.x - CModelInfo::ms_modelInfoPtrs[pEntity->m_nModelIndex]->m_pColModel->m_sphereBound.m_fRadius) <= (float)(pTopLeftPoint->x + 28.0) )
      {
        CEntity::GetBoundCentre(&v27, pEntity);
        if ( (float)(v27.y - CModelInfo::ms_modelInfoPtrs[pEntity->m_nModelIndex]->m_pColModel->m_sphereBound.m_fRadius) <= (float)(*p_y + 28.0) )
        {
          for ( i = 0; i != 40; ++i )
          {
            v20 = aNodes;
            v21 = 0;
            v22 = v17 + (float)((float)(__int16)i * 0.7);
            v23 = v22 * xy;
            v24 = xx * v22;
            do
            {
              if ( !*(_BYTE *)v20 )
              {
                v25 = (float)(v16 - ty) + (float)((float)(__int16)v21 * 0.7);
                if ( fabsf(v24 + (float)(yx * v25)) < (float)(x + 0.3) )
                {
                  v26 = v23 + (float)(v25 * yy);
                  if ( v26 < (float)(y + 0.3) && v26 > (float)(v7 + -0.3) )
                    *(_BYTE *)v20 = 1;
                }
              }
              ++v21;
              v20 = (CPedPathNode (*)[40])((char *)v20 + 16);
            }
            while ( v21 != 40 );
            ++aNodes;
          }
        }
      }
    }
  }
}

//----- (0031C47C) --------------------------------------------------------
void __fastcall CPedPath::AddBuildingBlockadeSectorList(
        CPtrList *list,
        CPedPathNode (*aNodes)[40],
        CVector *pTopLeftPoint)
{
  CPtrNode *m_pHead; // r6
  CPtrNode v6; // kr00_8
  int v7; // r2
  bool v8; // zf

  m_pHead = list->m_pHead;
  while ( m_pHead )
  {
    while ( 1 )
    {
      v6 = *m_pHead;
      m_pHead = m_pHead->m_pNext;
      v7 = *((unsigned __int16 *)v6.m_pVoid + 24);
      v8 = v7 == CWorld::ms_nCurrentScanCode;
      if ( v7 != CWorld::ms_nCurrentScanCode )
        v8 = *((unsigned __int8 *)v6.m_pVoid + 28) << 31 == 0;
      if ( !v8 )
        break;
      if ( !m_pHead )
        return;
    }
    *((_WORD *)v6.m_pVoid + 24) = CWorld::ms_nCurrentScanCode;
    CPedPath::AddBuildingBlockade((CEntity *)v6.m_pVoid, aNodes, pTopLeftPoint);
  }
}

//----- (0031C4C4) --------------------------------------------------------
void __fastcall PhonePickUpCB(CAnimBlendAssociation *pAnim, void *pData)
{
  GxtChar *v4; // r1
  unsigned __int16 v5; // r6
  GxtChar *v6; // r1
  GxtChar *v7; // r1
  GxtChar *v8; // r1
  GxtChar *v9; // r1
  GxtChar *v10; // r1
  int v11; // r0

  v4 = (GxtChar *)*((_DWORD *)pData + 3);
  if ( v4 )
  {
    v5 = 3000;
    CMessages::AddMessage((const unsigned __int8 *)&byte_61CADE, v4, 0xBB8u, 0, 1);
  }
  else
  {
    v5 = 0;
  }
  v6 = (GxtChar *)*((_DWORD *)pData + 4);
  if ( v6 )
  {
    CMessages::AddMessage((const unsigned __int8 *)&byte_61CADE, v6, 0xBB8u, 0, 1);
    v5 += 3000;
  }
  v7 = (GxtChar *)*((_DWORD *)pData + 5);
  if ( v7 )
  {
    CMessages::AddMessage((const unsigned __int8 *)&byte_61CADE, v7, 0xBB8u, 0, 1);
    v5 += 3000;
  }
  v8 = (GxtChar *)*((_DWORD *)pData + 6);
  if ( v8 )
  {
    CMessages::AddMessage((const unsigned __int8 *)&byte_61CADE, v8, 0xBB8u, 0, 1);
    v5 += 3000;
  }
  v9 = (GxtChar *)*((_DWORD *)pData + 7);
  if ( v9 )
  {
    CMessages::AddMessage((const unsigned __int8 *)&byte_61CADE, v9, 0xBB8u, 0, 1);
    v5 += 3000;
  }
  v10 = (GxtChar *)*((_DWORD *)pData + 8);
  if ( v10 )
  {
    CMessages::AddMessage((const unsigned __int8 *)&byte_61CADE, v10, 0xBB8u, 0, 1);
    v5 += 3000;
  }
  bDisplayingPhoneMessage = 1;
  bPickingUpPhone = 0;
  pPhoneDisplayingMessages = (CPhone *)pData;
  PhoneEnableControlsTimer = CTimer::m_snTimeInMilliseconds + v5;
  if ( *((_DWORD *)pData + 11) == 4 )
  {
    v11 = 7;
  }
  else
  {
    *((_DWORD *)pData + 9) = CTimer::m_snTimeInMilliseconds;
    v11 = 8;
  }
  *((_DWORD *)pData + 11) = v11;
  CPed::SetMoveState(pCallBackPed, PEDMOVE_STILL);
  CAnimManager::BlendAnimation(
    (RpClump_0 *)pCallBackPed->m_pRwObject,
    pCallBackPed->m_motionAnimGroup,
    ANIM_STD_IDLE,
    8.0);
  if ( pAnim->m_fBlendAmount > 0.5 && pCallBackPed )
    CAnimManager::BlendAnimation((RpClump_0 *)pCallBackPed->m_pRwObject, ANIM_STD_PED, ANIM_STD_PHONE_TALK, 8.0);
  pCallBackPed = 0;
}
// 61CADE: using guessed type char byte_61CADE;
// 7AF320: using guessed type char bDisplayingPhoneMessage;
// 7AF328: using guessed type char bPickingUpPhone;

//----- (0031C644) --------------------------------------------------------
void __fastcall PhonePutDownCB(CAnimBlendAssociation *pAnim, void *pData)
{
  uint16 v4; // r0
  CPad *Pad; // r0

  v4 = pAnim->m_bitsFlag | 4;
  pAnim->m_fBlendDelta = -1000.0;
  pAnim->m_bitsFlag = v4;
  Pad = CPad::GetPad(0);
  Pad->DisablePlayerControls &= ~0x40u;
  if ( pAnim->m_fBlendAmount > 0.5 )
    *((_DWORD *)pData + 289) |= 0x4000u;
  if ( *((_DWORD *)pData + 275) == 19 )
    sub_18D8EC((CPed *)pData, PED_IDLE);
}

//----- (0031C6AC) --------------------------------------------------------
void __fastcall CPhoneInfo::Initialise(CPhoneInfo *this)
{
  CBuildingPool *v1; // r11
  int32 m_nSize; // r1
  int v3; // r3
  int v4; // r1
  int v5; // r3
  Int32 v6; // r9
  uint8 *v7; // r6
  int v8; // r4
  CPhone *v9; // r9
  uint8 *v10; // r2
  __int64 v11; // d16

  bDisplayingPhoneMessage = 0;
  v1 = CPools::ms_pBuildingPool;
  pPhoneDisplayingMessages = 0;
  bPickingUpPhone = 0;
  pCallBackPed = 0;
  this->nNumPhones = 0;
  this->nNumScriptPhones = 0;
  m_nSize = v1->m_nSize;
  if ( m_nSize )
  {
    v3 = 15 * m_nSize;
    v4 = m_nSize - 1;
    v5 = 4 * v3 - 22;
    v6 = 0;
    do
    {
      if ( (v1->m_aFlags[v4] & 0x80u) == 0 )
      {
        v7 = &(*v1->m_aStorage)[v5];
        if ( v7 != (_BYTE *)&dword_24 + 2 && *(__int16 *)&(*v1->m_aStorage)[v5] == MI_PHONEBOOTH1 )
        {
          this->ms_aPhone[v6].nState = VACANT;
          v8 = *(_DWORD *)(v7 - 18);
          v9 = &this->ms_aPhone[this->nNumPhones];
          v10 = (uint8 *)(v8 + 48);
          if ( !v8 )
            v10 = v7 - 34;
          v11 = *(_QWORD *)v10;
          v9->vecPosition.z = *((RwReal *)v10 + 2);
          *(_QWORD *)&v9->vecPosition.x = v11;
          this->ms_aPhone[this->nNumPhones].pEntity = (CEntity *)(v7 - 38);
          v6 = this->nNumPhones + 1;
          this->nNumPhones = v6;
        }
      }
      --v4;
      v5 -= 60;
    }
    while ( v4 != -1 );
  }
}
// 24: using guessed type int dword_24;
// 7AF320: using guessed type char bDisplayingPhoneMessage;
// 7AF328: using guessed type char bPickingUpPhone;

//----- (0031C79C) --------------------------------------------------------
void __fastcall CPhoneInfo::Shutdown(CPhoneInfo *this)
{
  this->nNumPhones = 0;
  this->nNumScriptPhones = 0;
}

//----- (0031C7A4) --------------------------------------------------------
int32 __fastcall CPhoneInfo::FindNearestFreePhone(CPhoneInfo *this, CVector *vecPos)
{
  Int32 nNumPhones; // r12
  CPhone *ms_aPhone; // lr
  float v4; // s0
  int32 result; // r0
  int32 v6; // r3
  ePhoneState *p_nState; // r2
  float32x2_t v8; // d16
  unsigned __int64 v9; // d2
  float v10; // s4

  nNumPhones = this->nNumPhones;
  if ( this->nNumPhones < 1 )
    return -1;
  ms_aPhone = this->ms_aPhone;
  v4 = 60.0;
  result = -1;
  v6 = 0;
  p_nState = &gPhoneInfo.ms_aPhone[0].nState;
  do
  {
    if ( *p_nState == VACANT )
    {
      v8.n64_u64[0] = vsub_f32(*(float32x2_t *)&ms_aPhone->vecPosition.x, *(float32x2_t *)&vecPos->x).n64_u64[0];
      v9 = vmul_f32(v8, v8).n64_u64[0];
      v10 = sqrtf((float)(*(float *)&v9 + *((float *)&v9 + 1)) + 0.0);
      if ( v10 < v4 )
      {
        result = v6;
        v4 = v10;
      }
    }
    ++v6;
    ++ms_aPhone;
    p_nState += 13;
  }
  while ( v6 < nNumPhones );
  return result;
}

//----- (0031C81C) --------------------------------------------------------
void __fastcall CPhoneInfo::Update(CPhoneInfo *this)
{
  CPlayerPed *PlayerPed; // r6
  CPlayerInfo *v3; // r5
  CAnimBlendAssociation *Association; // r0
  CAnimBlendAssociation *v5; // r0
  CPad *Pad; // r0
  CVehicle *PlayerVehicle; // r0
  CMatrix *m_pMat; // r1
  float *p_tx; // r2
  float v10; // s16
  CVehicle *v11; // r0
  int v12; // r9
  CMatrix *v13; // r0
  float *p_x; // r1
  CMatrix *v15; // r2
  CSimpleTransform *p_m_transform; // r1
  float y; // s18
  bool *p_bNearBy; // r8
  Int32 v19; // r10
  int v20; // r0
  int v21; // r6
  float v22; // s0
  int v23; // r0
  float v24; // s25
  int v25; // r0
  int v26; // r1
  float *v27; // r2
  float ATanOfXY; // r0
  float v29; // s0
  CMatrix *v30; // r0
  CPad *v31; // r0
  CAnimBlendAssociation *v32; // r0
  int v33; // r0
  float v34; // s21
  int v35; // r6
  int v36; // r0
  int v37; // r2
  int v38; // r0
  int v39; // r1
  const CMatrix *v40; // r0
  RwMatrix *v41; // r1
  CSimpleTransform *v42; // r1
  float32x2_t v43; // d16
  unsigned __int64 v44; // d0
  char v45; // r0
  float v46; // s21
  int v47; // r6
  int v48; // r0
  int v49; // r2
  int v50; // r0
  int v51; // r1
  const CMatrix *v52; // r0
  RwMatrix *v53; // r1
  float v54; // s21
  float v55; // s23
  int v56; // r6
  CSimpleTransform *v57; // r1
  float32x2_t v58; // d16
  unsigned __int64 v59; // d0
  float *p_m_fCurrentHeading; // [sp+8h] [bp-80h]
  float *p_m_fDesiredHeading; // [sp+Ch] [bp-7Ch]
  CPed *v62; // [sp+24h] [bp-64h]

  PlayerPed = FindPlayerPed(-1);
  v3 = &CWorld::Players[CWorld::PlayerInFocus];
  if ( bDisplayingPhoneMessage == 1 && CTimer::m_snTimeInMilliseconds > PhoneEnableControlsTimer )
  {
    CPlayerInfo::MakePlayerSafe(&CWorld::Players[CWorld::PlayerInFocus], 0, 10000.0);
    CCamera::SetWideScreenOff(&TheCamera);
    pPhoneDisplayingMessages = 0;
    bDisplayingPhoneMessage = 0;
    Association = RpAnimBlendClumpGetAssociation((RpClump_0 *)PlayerPed->m_pRwObject, 0x93u);
    if ( Association && Association->m_fBlendAmount > 0.5 )
    {
      v5 = CAnimManager::BlendAnimation((RpClump_0 *)PlayerPed->m_pRwObject, ANIM_STD_PED, ANIM_STD_PHONE_OUT, 8.0);
      v5->m_bitsFlag &= ~4u;
      CAnimBlendAssociation::SetFinishCallback(v5, PhonePutDownCB, PlayerPed);
    }
    else
    {
      Pad = CPad::GetPad(0);
      Pad->DisablePlayerControls &= ~0x40u;
      if ( PlayerPed->m_nPedState == PED_MAKE_PHONECALL )
        CPed::SetPedState(PlayerPed, PED_IDLE);
    }
  }
  v62 = PlayerPed;
  if ( FindPlayerVehicle(-1, 0) )
  {
    PlayerVehicle = FindPlayerVehicle(-1, 0);
    m_pMat = PlayerVehicle->m_pMat;
    p_tx = &m_pMat->tx;
    if ( !m_pMat )
      p_tx = &PlayerVehicle->m_transform.m_translate.x;
    v10 = *p_tx;
    v11 = FindPlayerVehicle(-1, 0);
    v12 = 1;
  }
  else
  {
    v13 = PlayerPed->m_pMat;
    v12 = 0;
    p_x = &v13->tx;
    if ( !v13 )
      p_x = &PlayerPed->m_transform.m_translate.x;
    v11 = (CVehicle *)PlayerPed;
    v10 = *p_x;
  }
  v15 = v11->m_pMat;
  p_m_transform = (CSimpleTransform *)&v15->tx;
  if ( !v15 )
    p_m_transform = &v11->m_transform;
  if ( this->nNumScriptPhones >= 1 )
  {
    y = p_m_transform->m_translate.y;
    p_bNearBy = &this->ms_aPhone[0].bNearBy;
    p_m_fCurrentHeading = &PlayerPed->m_fCurrentHeading;
    v19 = 0;
    p_m_fDesiredHeading = &PlayerPed->m_fDesiredHeading;
    do
    {
      if ( *p_bNearBy )
      {
        v33 = *((_DWORD *)p_bNearBy - 1);
        if ( (unsigned int)(v33 - 4) >= 3 )
        {
          if ( v33 == 8 )
          {
            if ( CTimer::m_snTimeInMilliseconds - *((_DWORD *)p_bNearBy - 3) >= 0xEA61 )
              *((_DWORD *)p_bNearBy - 1) = 6;
          }
          else if ( v33 == 9 )
          {
            v46 = 1.0;
            if ( (CTimer::m_snTimeInMilliseconds / 0x758) << 31 )
              v46 = (float)((float)(rand() & 0x3FF) / 16000.0) + 1.0;
            v47 = *((_DWORD *)p_bNearBy - 2);
            v48 = *(_DWORD *)(v47 + 20);
            if ( !v48 )
            {
              CPlaceable::AllocateMatrix(*((CPlaceable **)p_bNearBy - 2));
              CSimpleTransform::UpdateMatrix((const CSimpleTransform *)(v47 + 4), *(CMatrix **)(v47 + 20));
              v48 = *(_DWORD *)(v47 + 20);
            }
            *(float *)(v48 + 40) = v46;
            v49 = *((_DWORD *)p_bNearBy - 2);
            v50 = *(_DWORD *)(v49 + 24);
            if ( v50 )
            {
              v51 = *(_DWORD *)(v50 + 4);
              v52 = *(const CMatrix **)(v49 + 20);
              v53 = (RwMatrix *)(v51 + 16);
              if ( v52 )
                CMatrix::UpdateRwMatrix(v52, v53);
              else
                CSimpleTransform::UpdateRwMatrix((const CSimpleTransform *)(v49 + 4), v53);
            }
            CEntity::UpdateRwFrame(*((CEntity **)p_bNearBy - 2));
          }
        }
        else
        {
          v34 = 1.0;
          if ( !bPickingUpPhone )
          {
            v34 = 1.0;
            if ( (CTimer::m_snTimeInMilliseconds / 0x758) << 31 )
              v34 = (float)((float)(rand() & 0x3FF) / 16000.0) + 1.0;
          }
          v35 = *((_DWORD *)p_bNearBy - 2);
          v36 = *(_DWORD *)(v35 + 20);
          if ( !v36 )
          {
            CPlaceable::AllocateMatrix(*((CPlaceable **)p_bNearBy - 2));
            CSimpleTransform::UpdateMatrix((const CSimpleTransform *)(v35 + 4), *(CMatrix **)(v35 + 20));
            v36 = *(_DWORD *)(v35 + 20);
          }
          *(float *)(v36 + 40) = v34;
          v37 = *((_DWORD *)p_bNearBy - 2);
          v38 = *(_DWORD *)(v37 + 24);
          if ( v38 )
          {
            v39 = *(_DWORD *)(v38 + 4);
            v40 = *(const CMatrix **)(v37 + 20);
            v41 = (RwMatrix *)(v39 + 16);
            if ( v40 )
              CMatrix::UpdateRwMatrix(v40, v41);
            else
              CSimpleTransform::UpdateRwMatrix((const CSimpleTransform *)(v37 + 4), v41);
          }
          CEntity::UpdateRwFrame(*((CEntity **)p_bNearBy - 2));
          if ( !(((unsigned __int8)bPickingUpPhone | v12) << 31) && CPed::IsPedInControl(v62) )
          {
            v54 = v10 - *((float *)p_bNearBy - 12);
            if ( fabsf(v54) < 1.0 )
            {
              v55 = y - *((float *)p_bNearBy - 11);
              if ( fabsf(v55) < 1.0 )
              {
                v56 = *((_DWORD *)p_bNearBy - 2);
                v23 = *(_DWORD *)(v56 + 20);
                if ( v23 )
                {
                  v24 = v54 * *(float *)(v23 + 16);
                }
                else
                {
                  CPlaceable::AllocateMatrix(*((CPlaceable **)p_bNearBy - 2));
                  CSimpleTransform::UpdateMatrix((const CSimpleTransform *)(v56 + 4), *(CMatrix **)(v56 + 20));
                  v20 = *(_DWORD *)(v56 + 20);
                  v21 = *((_DWORD *)p_bNearBy - 2);
                  v22 = *(float *)(v20 + 16);
                  v23 = *(_DWORD *)(v21 + 20);
                  v24 = v54 * v22;
                  if ( !v23 )
                  {
                    CPlaceable::AllocateMatrix(*((CPlaceable **)p_bNearBy - 2));
                    CSimpleTransform::UpdateMatrix((const CSimpleTransform *)(v21 + 4), *(CMatrix **)(v21 + 20));
                    v23 = *(_DWORD *)(v21 + 20);
                  }
                }
                if ( (float)((float)(v24 + (float)(v55 * *(float *)(v23 + 20)))
                           / sqrtf((float)(v54 * v54) + (float)(v55 * v55))) < -0.85 )
                {
                  v25 = *((_DWORD *)p_bNearBy - 2);
                  v26 = *(_DWORD *)(v25 + 20);
                  v27 = (float *)(v26 + 48);
                  if ( !v26 )
                    v27 = (float *)(v25 + 4);
                  ATanOfXY = CGeneral::GetATanOfXY(v10 - *v27, y - v27[1]);
                  v29 = ATanOfXY + 1.5708;
                  if ( (float)(ATanOfXY + 1.5708) > 6.2832 )
                    v29 = (float)(ATanOfXY + 1.5708) + -6.2832;
                  *p_m_fCurrentHeading = v29;
                  *p_m_fDesiredHeading = v29;
                  v30 = v62->m_pMat;
                  if ( v30 )
                    CMatrix::SetRotateZOnly(v30, v29);
                  else
                    v62->m_transform.m_heading = v29;
                  CPed::SetPedState(v62, PED_MAKE_PHONECALL);
                  v31 = CPad::GetPad(0);
                  v31->DisablePlayerControls |= 0x40u;
                  CCamera::SetWideScreenOn(&TheCamera);
                  CPlayerInfo::MakePlayerSafe(v3, 1, 10000.0);
                  v32 = CAnimManager::BlendAnimation(
                          (RpClump_0 *)v62->m_pRwObject,
                          ANIM_STD_PED,
                          ANIM_STD_PHONE_IN,
                          4.0);
                  CAnimBlendAssociation::SetFinishCallback(v32, PhonePickUpCB, p_bNearBy - 48);
                  bPickingUpPhone = 1;
                  pCallBackPed = v62;
                }
              }
            }
          }
        }
        v57 = (CSimpleTransform *)&TheCamera.m_pMat->tx;
        if ( !TheCamera.m_pMat )
          v57 = &TheCamera.m_transform;
        v58.n64_u64[0] = vsub_f32(*(float32x2_t *)&v57->m_translate.x, *((float32x2_t *)p_bNearBy - 6)).n64_u64[0];
        v59 = vmul_f32(v58, v58).n64_u64[0];
        if ( (float)(*(float *)&v59 + *((float *)&v59 + 1)) <= 10000.0 )
          goto LABEL_71;
        v45 = 0;
      }
      else
      {
        if ( (*(unsigned __int16 *)(*((_DWORD *)p_bNearBy - 2) + 36) + CTimer::m_FrameCounter) << 28 )
          goto LABEL_71;
        v42 = (CSimpleTransform *)&TheCamera.m_pMat->tx;
        if ( !TheCamera.m_pMat )
          v42 = &TheCamera.m_transform;
        v43.n64_u64[0] = vsub_f32(*(float32x2_t *)&v42->m_translate.x, *((float32x2_t *)p_bNearBy - 6)).n64_u64[0];
        v44 = vmul_f32(v43, v43).n64_u64[0];
        if ( (float)(*(float *)&v44 + *((float *)&v44 + 1)) >= 6400.0 )
          goto LABEL_71;
        v45 = 1;
      }
      *p_bNearBy = v45;
LABEL_71:
      ++v19;
      p_bNearBy += 52;
    }
    while ( v19 < this->nNumScriptPhones );
  }
}
// 7AF320: using guessed type char bDisplayingPhoneMessage;
// 7AF328: using guessed type char bPickingUpPhone;

//----- (0031CD9C) --------------------------------------------------------
int __fastcall CPhoneInfo::PhoneAtThisPosition(_DWORD *a1, float a2)
{
  int v2; // r3
  float *v4; // r0
  int v5; // r1

  v2 = *a1;
  if ( (int)*a1 < 1 )
    return 0;
  v4 = (float *)(a1 + 2);
  v5 = 0;
  while ( *v4 != a2 )
  {
    ++v5;
    v4 += 13;
    if ( v5 >= v2 )
      return 0;
  }
  return 1;
}

//----- (0031CDDC) --------------------------------------------------------
Int32 __fastcall CPhoneInfo::GrabPhone(CPhoneInfo *this, float CoorX, float CoorY)
{
  float32x2_t v3; // d2
  float32x2_t v4; // d3
  Int32 nNumScriptPhones; // r3
  CPhone *v8; // r2
  int v9; // r1
  float y; // s8
  bool v11; // nf
  CPhone *v12; // r5
  CPhone *v13; // r2
  __int64 v14; // d17
  __int64 v15; // d17
  __int64 v16; // d17
  Int32 v17; // r1
  __int64 v19; // [sp+0h] [bp-48h]
  __int64 v20; // [sp+8h] [bp-40h]
  __int64 v21; // [sp+10h] [bp-38h]
  __int64 v22; // [sp+18h] [bp-30h]
  __int64 v23; // [sp+20h] [bp-28h]
  __int64 v24; // [sp+28h] [bp-20h]
  bool bNearBy; // [sp+30h] [bp-18h]

  nNumScriptPhones = this->nNumScriptPhones;
  if ( nNumScriptPhones >= this->nNumPhones )
  {
    v9 = -1;
  }
  else
  {
    v3.n64_u32[0] = 1120403456;
    v8 = &this->ms_aPhone[nNumScriptPhones];
    v9 = -1;
    do
    {
      v4.n64_u32[0] = LODWORD(v8->vecPosition.x);
      y = v8->vecPosition.y;
      ++v8;
      v4.n64_f32[0] = sqrtf(
                        (float)((float)(v4.n64_f32[0] - CoorX) * (float)(v4.n64_f32[0] - CoorX))
                      + (float)((float)(y - CoorY) * (float)(y - CoorY)));
      v11 = v4.n64_f32[0] < v3.n64_f32[0];
      v3.n64_u64[0] = vmin_f32(v4, v3).n64_u64[0];
      if ( v11 )
        v9 = nNumScriptPhones;
      ++nNumScriptPhones;
    }
    while ( nNumScriptPhones < this->nNumPhones );
  }
  v12 = &this->ms_aPhone[v9];
  v12->nState = SCRIPT_DISABLED;
  v13 = &this->ms_aPhone[this->nNumScriptPhones];
  bNearBy = v13->bNearBy;
  v19 = *(_QWORD *)&v13->vecPosition.x;
  v20 = *(_QWORD *)&v13->vecPosition.z;
  v23 = *(_QWORD *)&v13->apMessages[5];
  v24 = *(_QWORD *)&v13->pEntity;
  v21 = *(_QWORD *)&v13->apMessages[1];
  v22 = *(_QWORD *)&v13->apMessages[3];
  v13->bNearBy = v12->bNearBy;
  v14 = *(_QWORD *)&v12->pEntity;
  *(_QWORD *)&v13->apMessages[5] = *(_QWORD *)&v12->apMessages[5];
  *(_QWORD *)&v13->pEntity = v14;
  v15 = *(_QWORD *)&v12->vecPosition.z;
  *(_QWORD *)&v13->vecPosition.x = *(_QWORD *)&v12->vecPosition.x;
  *(_QWORD *)&v13->vecPosition.z = v15;
  v16 = *(_QWORD *)&v12->apMessages[3];
  *(_QWORD *)&v13->apMessages[1] = *(_QWORD *)&v12->apMessages[1];
  *(_QWORD *)&v13->apMessages[3] = v16;
  v12->bNearBy = bNearBy;
  *(_QWORD *)&v12->apMessages[5] = v23;
  *(_QWORD *)&v12->pEntity = v24;
  *(_QWORD *)&v12->vecPosition.x = v19;
  *(_QWORD *)&v12->vecPosition.z = v20;
  *(_QWORD *)&v12->apMessages[1] = v21;
  *(_QWORD *)&v12->apMessages[3] = v22;
  v17 = this->nNumScriptPhones;
  this->nNumScriptPhones = v17 + 1;
  return v17;
}
// 31CE3C: variable 'v4' is possibly undefined
// 31CE3C: variable 'v3' is possibly undefined

//----- (0031CF08) --------------------------------------------------------
void __fastcall CPhoneInfo::SetPhoneMessage_Repeatedly(
        CPhoneInfo *this,
        Int32 Index,
        GxtChar *pMessage1,
        GxtChar *pMessage2,
        int a5,
        int a6,
        __int64 a7)
{
  char *v7; // r6
  ePhoneState v8; // r2

  if ( pMessage1 )
  {
    v7 = (char *)this + 52 * Index;
    *((_DWORD *)v7 + 5) = pMessage1;
    *((_DWORD *)v7 + 6) = pMessage2;
    *((_DWORD *)v7 + 7) = a5;
    v8 = SCRIPT_RINGING_MESSAGEREPEATEDLY;
    *((_DWORD *)v7 + 8) = a6;
    *(_QWORD *)(v7 + 36) = a7;
  }
  else
  {
    v8 = SCRIPT_DISABLED;
  }
  this->ms_aPhone[Index].nState = v8;
}

//----- (0031CF48) --------------------------------------------------------
void __fastcall CPhoneInfo::SetPhoneMessage_JustOnce(
        CPhoneInfo *this,
        Int32 Index,
        GxtChar *pMessage1,
        GxtChar *pMessage2,
        int a5,
        int a6,
        __int64 a7)
{
  char *v7; // r6
  ePhoneState v8; // r2

  if ( pMessage1 )
  {
    v7 = (char *)this + 52 * Index;
    *((_DWORD *)v7 + 5) = pMessage1;
    *((_DWORD *)v7 + 6) = pMessage2;
    *((_DWORD *)v7 + 7) = a5;
    v8 = SCRIPT_RINGING_MESSAGEONCE;
    *((_DWORD *)v7 + 8) = a6;
    *(_QWORD *)(v7 + 36) = a7;
  }
  else
  {
    v8 = SCRIPT_DISABLED;
  }
  this->ms_aPhone[Index].nState = v8;
}

//----- (0031CF88) --------------------------------------------------------
bool __fastcall CPhoneInfo::HasMessageBeenDisplayed(CPhoneInfo *this, Int32 Index)
{
  return !bDisplayingPhoneMessage && (unsigned int)(this->ms_aPhone[Index].nState - 6) < 3;
}
// 7AF320: using guessed type char bDisplayingPhoneMessage;

//----- (0031CFB0) --------------------------------------------------------
bool __fastcall CPhoneInfo::IsMessageBeingDisplayed(CPhoneInfo *this, Int32 Index)
{
  return pPhoneDisplayingMessages == &this->ms_aPhone[Index];
}

//----- (0031CFD0) --------------------------------------------------------
void CPickups::Init()
{
  int v0; // r3
  CPickup *v1; // r2

  v0 = 0;
  CPickups::NumMessages = 0;
  do
  {
    v1 = &CPickups::aPickUps[v0++];
    v1->ReferenceIndex = 1;
    v1->Type = 0;
    v1->pObject = 0;
  }
  while ( v0 != 620 );
  CPickups::CollectedPickUpIndex = 0;
  CPickups::DisplayHelpMessage = 10;
  *(_QWORD *)&CPickups::aPickUpsCollected[16] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[18] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[12] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[14] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[8] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[10] = 0LL;
  *(_QWORD *)CPickups::aPickUpsCollected = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[2] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[4] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[6] = 0LL;
}

//----- (0031D04C) --------------------------------------------------------
void CPickups::ReInit()
{
  int v0; // r6
  char *v1; // r5
  CEntity *v2; // r0
  int v3; // r0
  char v4; // r0
  int v5; // r3
  CPickup *v6; // r6

  v0 = 0;
  v1 = (char *)CPickups::aPickUps + 29;
  CPickups::NumMessages = 0;
  do
  {
    if ( *(v1 - 1) )
    {
      CRadar::ClearBlipForEntity(BLIPTYPE_PICKUP, v0 | (*(unsigned __int16 *)(v1 - 3) << 16));
      v2 = *(CEntity **)(v1 - 25);
      if ( v2 )
      {
        CWorld::Remove(v2);
        v3 = *(_DWORD *)(v1 - 25);
        if ( v3 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 4))(v3);
        *(_DWORD *)(v1 - 25) = 0;
      }
      v4 = *v1;
      *(v1 - 1) = 0;
      *v1 = v4 | 1;
    }
    ++v0;
    v1 += 32;
  }
  while ( v0 != 620 );
  v5 = 0;
  CPickups::NumMessages = 0;
  do
  {
    v6 = &CPickups::aPickUps[v5++];
    v6->ReferenceIndex = 1;
    v6->Type = 0;
    v6->pObject = 0;
  }
  while ( v5 != 620 );
  CPickups::CollectedPickUpIndex = 0;
  CPickups::DisplayHelpMessage = 10;
  *(_QWORD *)&CPickups::aPickUpsCollected[16] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[18] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[12] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[14] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[8] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[10] = 0LL;
  *(_QWORD *)CPickups::aPickUpsCollected = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[2] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[4] = 0LL;
  *(_QWORD *)&CPickups::aPickUpsCollected[6] = 0LL;
}

//----- (0031D134) --------------------------------------------------------
void __fastcall CPickup::Remove(CPickup *this)
{
  CObject *pObject; // r0
  CObject *v3; // r0
  char v4; // r0

  CRadar::ClearBlipForEntity(BLIPTYPE_PICKUP, (this->ReferenceIndex << 16) | (this - CPickups::aPickUps));
  pObject = this->pObject;
  if ( pObject )
  {
    CWorld::Remove(pObject);
    v3 = this->pObject;
    if ( v3 )
      (*((void (__fastcall **)(CObject *))v3->_vptr$CPlaceable + 1))(v3);
    this->pObject = 0;
  }
  v4 = *((_BYTE *)this + 29);
  this->Type = 0;
  *((_BYTE *)this + 29) = v4 | 1;
}

//----- (0031D17C) --------------------------------------------------------
void CPickups::Update()
{
  int16x4_t v0; // d16
  UInt32 v1; // r1
  UInt32 v2; // r0
  UInt32 v3; // r5
  CPickup *v4; // r4
  CSimpleTransform *p_tx; // r1
  int32x2_t v6; // d16
  float32x2_t v7; // d17
  char v8; // r1
  unsigned __int64 v9; // d0
  CEntity *v10; // r0
  CEntity *pObject; // r0
  CObject *v12; // r0
  int v13; // r4
  CPad *Pad; // r0
  int v15; // r0
  CPad *v16; // r0
  int v17; // r9
  int v18; // r8
  UInt32 v19; // r0
  __int64 v20; // kr08_8
  signed int v21; // r6
  CPickup *v22; // r4
  CPlayerPed *v23; // r5
  CVehicle *v24; // r0
  UInt16 v25; // r1
  UInt16 v26; // r0
  CPlayerPed *PlayerPed; // r5
  CVehicle *PlayerVehicle; // r0
  UInt16 v29; // r1
  UInt16 v30; // r0

  v1 = 620 * (CTimer::m_FrameCounter & 0x1F) + 620;
  v2 = (620 * (CTimer::m_FrameCounter & 0x1F)) >> 5;
  if ( v2 < v1 >> 5 )
  {
    v3 = (v1 >> 5) - v2;
    v4 = &CPickups::aPickUps[v2];
    do
    {
      if ( v4->Type )
      {
        v0.n64_u32[0] = *(_DWORD *)&v4->CoorsX;
        p_tx = (CSimpleTransform *)&TheCamera.m_pMat->tx;
        v6.n64_u64[0] = vmovl_s16(v0).n128_u64[0];
        if ( !TheCamera.m_pMat )
          p_tx = &TheCamera.m_transform;
        v7.n64_u64[0] = *(unsigned __int64 *)&p_tx->m_translate.x;
        v8 = *((_BYTE *)v4 + 29);
        v0.n64_u64[0] = vsub_f32(v7, vmul_f32(vcvt_f32_s32(v6), (float32x2_t)0x3E0000003E000000LL)).n64_u64[0];
        v9 = vmul_f32(v0, v0).n64_u64[0];
        if ( sqrtf(*(float *)&v9 + *((float *)&v9 + 1)) >= 100.0 )
        {
          pObject = v4->pObject;
          *((_BYTE *)v4 + 29) = v8 & 0xF7;
          if ( pObject )
          {
            CWorld::Remove(pObject);
            v12 = v4->pObject;
            if ( v12 )
              (*((void (__fastcall **)(CObject *))v12->_vptr$CPlaceable + 1))(v12);
            v4->pObject = 0;
          }
        }
        else
        {
          *((_BYTE *)v4 + 29) = v8 | 8;
          if ( (v8 & 1) == 0 && !v4->pObject )
          {
            CPickup::GiveUsAPickUpObject(v4, &v4->pObject, -1);
            v10 = v4->pObject;
            if ( v10 )
              CWorld::Add(v10);
          }
        }
      }
      --v3;
      ++v4;
    }
    while ( v3 );
  }
  v13 = 0;
  Pad = CPad::GetPad(0);
  if ( CPad::CollectPickupJustDown(Pad) )
  {
    v13 = 6;
  }
  else if ( CollectPickupBuffer - 1 > 0 )
  {
    v13 = CollectPickupBuffer - 1;
  }
  CollectPickupBuffer = v13;
  if ( CPickups::PlayerOnWeaponPickup )
  {
    v15 = CPickups::PlayerOnWeaponPickup - 1;
    if ( CPickups::PlayerOnWeaponPickup - 1 <= 0 )
      v15 = 0;
    CPickups::PlayerOnWeaponPickup = v15;
  }
  v16 = CPad::GetPad(0);
  if ( CPad::GetTarget(v16, 0) )
    CollectPickupBuffer = 0;
  v17 = 0;
  if ( !CPedIntelligence::FindTaskByType(CWorld::Players[0].pPed->m_pPedIntelligence, 701)
    && !CPedIntelligence::FindTaskByType(CWorld::Players[0].pPed->m_pPedIntelligence, 1600) )
  {
    v17 = 1;
  }
  if ( CWorld::Players[1].pPed )
  {
    v18 = 0;
    if ( !CPedIntelligence::FindTaskByType(CWorld::Players[0].pPed->m_pPedIntelligence, 701)
      && !CPedIntelligence::FindTaskByType(CWorld::Players[0].pPed->m_pPedIntelligence, 1600) )
    {
      v18 = 1;
    }
  }
  else
  {
    v18 = 0;
  }
  v19 = 620 * (CTimer::m_FrameCounter % 6);
  v20 = 2863311531LL * (v19 + 620);
  v21 = v19 / 6;
  if ( v19 / 6 < (v19 + 620) / 6 )
  {
    v22 = &CPickups::aPickUps[v21];
    do
    {
      if ( v22->Type && (*((_BYTE *)v22 + 29) & 8) != 0 )
      {
        if ( v17 == 1
          && (v23 = FindPlayerPed(-1),
              v24 = FindPlayerVehicle(-1, 0),
              CPickup::Update(v22, v23, v24, CWorld::PlayerInFocus)) )
        {
          v25 = CPickups::CollectedPickUpIndex;
          CPickups::aPickUpsCollected[CPickups::CollectedPickUpIndex] = v21 | (v22->ReferenceIndex << 16);
          v26 = v25 + 1;
          if ( (unsigned __int16)(v25 + 1) > 0x13u )
            v26 = 0;
          CPickups::CollectedPickUpIndex = v26;
        }
        else if ( v18 == 1 )
        {
          if ( v22->Type )
          {
            if ( (*((_BYTE *)v22 + 29) & 8) != 0 )
            {
              PlayerPed = FindPlayerPed(1);
              PlayerVehicle = FindPlayerVehicle(1, 0);
              if ( CPickup::Update(v22, PlayerPed, PlayerVehicle, 1) )
              {
                v29 = CPickups::CollectedPickUpIndex;
                CPickups::aPickUpsCollected[CPickups::CollectedPickUpIndex] = v21 | (v22->ReferenceIndex << 16);
                v30 = v29 + 1;
                if ( (unsigned __int16)(v29 + 1) > 0x13u )
                  v30 = 0;
                CPickups::CollectedPickUpIndex = v30;
              }
            }
          }
        }
      }
      ++v21;
      ++v22;
    }
    while ( v21 < (signed int)(HIDWORD(v20) >> 2) );
  }
}
// 31D1E2: variable 'v0' is possibly undefined

//----- (0031D4B8) --------------------------------------------------------
bool __fastcall CPickup::IsPickUpCloseEnoughForObjects(CPickup *this)
{
  int16x4_t v1; // d16
  CSimpleTransform *p_tx; // r2
  float32x2_t v3; // d16
  bool result; // r0
  float32x2_t v5; // d16
  unsigned __int64 v6; // d0

  v1.n64_u32[0] = *(_DWORD *)&this->CoorsX;
  p_tx = (CSimpleTransform *)&TheCamera.m_pMat->tx;
  v3.n64_u64[0] = vmul_f32(vcvt_f32_s32((int32x2_t)vmovl_s16(v1).n128_u64[0]), (float32x2_t)0x3E0000003E000000LL).n64_u64[0];
  if ( !TheCamera.m_pMat )
    p_tx = &TheCamera.m_transform;
  result = 0;
  v5.n64_u64[0] = vsub_f32(*(float32x2_t *)&p_tx->m_translate.x, v3).n64_u64[0];
  v6 = vmul_f32(v5, v5).n64_u64[0];
  if ( sqrtf(*(float *)&v6 + *((float *)&v6 + 1)) < 100.0 )
    return 1;
  return result;
}
// 31D4C6: variable 'v1' is possibly undefined

//----- (0031D510) --------------------------------------------------------
void __fastcall CPickup::GiveUsAPickUpObject(CPickup *this, CObject **ppObject, Int32 ForcedObjectIndex)
{
  CBaseModelInfo *v6; // r0
  CObject *v7; // r0
  CObject *v8; // r0
  CObject *v9; // r0
  CMatrix *m_pMat; // r1
  float v11; // s0
  float v12; // s2
  float v13; // s4
  float *p_tz; // r0
  CObject *v15; // r6
  CMatrix *v16; // r0
  float tx; // s16
  float ty; // s18
  float tz; // s20
  float *p_xx; // r0
  float v21; // s2
  float v22; // s4
  CObject *v23; // r2
  RwObject_0 *m_pRwObject; // r0
  char *parent; // r1
  const CMatrix *v26; // r0
  RwMatrix *v27; // r1
  CObject *v28; // r0
  CEntity::CFlags m_nFlags; // kr00_8
  CObject *v30; // r0
  CEntity::CFlags v31; // kr08_8
  CObject *v32; // r0
  CEntity::CFlags v33; // kr10_8
  int MI; // r0
  Int32 MonetaryValue; // r0
  int Type; // r0

  *ppObject = 0;
  if ( CCutsceneMgr::ms_cutsceneLoadStatus == 2 )
    return;
  v6 = CModelInfo::ms_modelInfoPtrs[this->MI];
  if ( (*((int (__fastcall **)(CBaseModelInfo *))v6->_vptr$CBaseModelInfo + 5))(v6) == 4 )
    CWeaponInfo::GetWeaponInfo((eWeaponType)CModelInfo::ms_modelInfoPtrs[this->MI][1].m_hashKey, 1);
  if ( ForcedObjectIndex < 0 )
  {
    v7 = CObject::Create(this->MI, 0);
LABEL_8:
    *ppObject = v7;
    if ( !v7 )
      return;
    goto LABEL_9;
  }
  CPools::MakeSureSlotInObjectPoolIsEmpty(ForcedObjectIndex);
  v7 = *ppObject;
  if ( !*ppObject )
  {
    v8 = (CObject *)CObject::operator new(0x184u, ForcedObjectIndex << 8);
    CObject::CObject(v8, this->MI, 0);
    goto LABEL_8;
  }
LABEL_9:
  v7->ObjectCreatedBy = 5;
  v9 = *ppObject;
  m_pMat = (*ppObject)->m_pMat;
  v11 = (float)this->CoorsZ * 0.125;
  v12 = (float)this->CoorsY * 0.125;
  v13 = (float)this->CoorsX * 0.125;
  if ( m_pMat )
  {
    m_pMat->tx = v13;
    v9->m_pMat->ty = v12;
    p_tz = &v9->m_pMat->tz;
  }
  else
  {
    v9->m_transform.m_translate.x = v13;
    v9->m_transform.m_translate.y = v12;
    p_tz = &v9->m_transform.m_translate.z;
  }
  *p_tz = v11;
  v15 = *ppObject;
  if ( (*ppObject)->m_nModelIndex == MI_OYSTER )
  {
    *(_DWORD *)&v15->m_nFlags |= 0x100000u;
    v15 = *ppObject;
  }
  v16 = v15->m_pMat;
  if ( v16 )
  {
    tx = v16->tx;
    ty = v16->ty;
    tz = v16->tz;
    CMatrix::SetRotate(v16, 0.0, 0.0, -1.5708);
    p_xx = &v15->m_pMat->xx;
    v21 = ty + p_xx[13];
    v22 = tz + p_xx[14];
    p_xx[12] = tx + p_xx[12];
    p_xx[13] = v21;
    p_xx[14] = v22;
  }
  else
  {
    v15->m_transform.m_heading = -1.5708;
  }
  v23 = *ppObject;
  m_pRwObject = (*ppObject)->m_pRwObject;
  if ( m_pRwObject )
  {
    parent = (char *)m_pRwObject->parent;
    v26 = v23->m_pMat;
    v27 = (RwMatrix *)(parent + 16);
    if ( v26 )
      CMatrix::UpdateRwMatrix(v26, v27);
    else
      CSimpleTransform::UpdateRwMatrix(&v23->m_transform, v27);
  }
  CEntity::UpdateRwFrame(*ppObject);
  *(_DWORD *)&(*ppObject)->m_nPhysicalFlags &= ~2u;
  *(_DWORD *)&(*ppObject)->m_nPhysicalFlags |= 0x800000u;
  v28 = *ppObject;
  m_nFlags = (*ppObject)->m_nFlags;
  *(_DWORD *)&v28->m_nFlags = *(_DWORD *)&m_nFlags & 0xFFFFFFFE;
  v28->m_nFlags.bdummy = m_nFlags.bdummy;
  *(_DWORD *)&(*ppObject)->m_nObjectFlags |= 1u;
  (*ppObject)->m_nObjectFlags = (CObject::CObjectFlags)(*(_DWORD *)&(*ppObject)->m_nObjectFlags & 0xFFFFFFFD | (2 * ((*((unsigned __int8 *)this + 29) >> 1) & 1)));
  v30 = *ppObject;
  v31 = (*ppObject)->m_nFlags;
  *(_DWORD *)&v30->m_nFlags = *(_DWORD *)&v31 | 0x200000;
  v30->m_nFlags.bdummy = v31.bdummy;
  (*ppObject)->m_nObjectFlags = (CObject::CObjectFlags)(*(_DWORD *)&(*ppObject)->m_nObjectFlags & 0xFDFFFFFF | (CPickup::PickUpShouldBeInvisible(this) << 25));
  v32 = *ppObject;
  v33 = (*ppObject)->m_nFlags;
  *(_DWORD *)&v32->m_nFlags = *(_DWORD *)&v33 | 0x80000000;
  v32->m_nFlags.bdummy = v33.bdummy;
  CEntity::RegisterReference(*ppObject, ppObject);
  MI = this->MI;
  if ( MI == MI_PICKUP_BONUS || MI == MI_PICKUP_CLOTHES )
    MonetaryValue = this->MonetaryValue;
  else
    LOBYTE(MonetaryValue) = 0;
  (*ppObject)->ObjectMessage = MonetaryValue;
  Type = this->Type;
  if ( Type == 18 )
  {
    *(_DWORD *)&(*ppObject)->m_nObjectFlags |= 4u;
    (*ppObject)->ObjectMessageAmount = this->MonetaryValue / 5;
  }
  else if ( Type == 7 )
  {
    *(_DWORD *)&(*ppObject)->m_nObjectFlags |= 8u;
    *(_DWORD *)&(*ppObject)->m_nPhysicalFlags |= 0x20000000u;
  }
}
// 31D58A: variable 'v7' is possibly undefined

//----- (0031D790) --------------------------------------------------------
void __fastcall CPickup::GetRidOfObjects(CPickup *this)
{
  CObject *pObject; // r0
  CObject *v3; // r0

  pObject = this->pObject;
  if ( pObject )
  {
    CWorld::Remove(pObject);
    v3 = this->pObject;
    if ( v3 )
      (*((void (__fastcall **)(CObject *))v3->_vptr$CPlaceable + 1))(v3);
    this->pObject = 0;
  }
}

//----- (0031D7B4) --------------------------------------------------------
bool __fastcall CPed::PedCanPickUpPickUp(CPed *this)
{
  bool v1; // r4

  v1 = 0;
  if ( CPedIntelligence::FindTaskByType(CWorld::Players[0].pPed->m_pPedIntelligence, 701) )
    return 0;
  if ( !CPedIntelligence::FindTaskByType(CWorld::Players[0].pPed->m_pPedIntelligence, 1600) )
    return 1;
  return v1;
}

//----- (0031D7FC) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
bool __fastcall CPickup::Update(CPickup *this, CPlayerPed *pPlayerPed, CVehicle *pPlayerVehicle, Int32 PlayerNum)
{
  float32x2_t v4; // d2
  int16x4_t v5; // d16
  CObject *pObject; // r0
  CObject **p_pObject; // r9
  CMatrix *m_pMat; // r1
  float v13; // s0
  float v14; // s2
  float v15; // s4
  float *p_tz; // r0
  UInt32 RegenerationTime; // r6
  uint32 v18; // r5
  float32x2_t v19; // d16
  float32x2_t v20; // d1
  CObject *v21; // r0
  float v22; // s2
  unsigned int v23; // r1
  CObject *v24; // r6
  CMatrix *v25; // r1
  float *p_tx; // r3
  UInt8 v27; // r1
  int CoorsX; // r4
  float x; // s16
  int v30; // r5
  float v31; // s18
  int CoorsY; // r6
  float y; // s20
  float v34; // s0
  bool v35; // r6
  CObject *v36; // r0
  int m_nModelIndex; // r11
  CMatrix *v38; // r1
  float *v39; // r3
  char IsSphereTouchingVehicle; // r0
  CObject *v41; // r0
  int CanPlayerStartMission; // r1
  CMatrix *v43; // r1
  CMatrix *v44; // r3
  float32x2_t *v45; // r0
  float32x2_t *v46; // r1
  float v47; // s0
  CMatrix *v48; // r2
  CMatrix *v49; // r3
  float32x2_t v50; // d16
  unsigned __int64 v51; // d0
  CObject *v52; // r2
  RwObject_0 *m_pRwObject; // r0
  char *parent; // r1
  const CMatrix *v55; // r0
  RwMatrix *v56; // r1
  CObject *v57; // r2
  RwObject_0 *v58; // r0
  char *v59; // r1
  const CMatrix *v60; // r0
  RwMatrix *v61; // r1
  float v62; // s2
  CObject *v63; // r0
  float v64; // s8
  CMatrix *v65; // r2
  float v66; // s0
  float v67; // s2
  float *v68; // r3
  float v69; // s4
  float v70; // s2
  float v71; // s0
  float *p_z; // r0
  CObject *v73; // r2
  RwObject_0 *v74; // r0
  char *v75; // r1
  const CMatrix *v76; // r0
  RwMatrix *v77; // r1
  CObject *v78; // r2
  RwObject_0 *v79; // r0
  char *v80; // r1
  const CMatrix *v81; // r0
  RwMatrix *v82; // r1
  CVehiclePool *v83; // r5
  int32 m_nSize; // r6
  int v85; // r8
  int v86; // r0
  CVehicle *v87; // r0
  CMatrix *v88; // r2
  float *p_x; // r3
  int v90; // r8
  CVehiclePool *v91; // r5
  int32 v92; // r6
  int v93; // r0
  CVehicle *v94; // r0
  CMatrix *v95; // r2
  float *v96; // r3
  CObject *v97; // r0
  CMatrix *v98; // r1
  __int64 *p_m_transform; // r2
  __int64 v100; // kr00_8 OVERLAPPED
  CObject *v101; // r0
  char v102; // r0
  CMatrix *v103; // r1
  float *v104; // r3
  CObject *v105; // r0
  char v106; // r1
  int v107; // r5
  unsigned int Type; // r0
  int v109; // r0
  CBaseModelInfo *v110; // r6
  eWeaponType m_hashKey; // r6
  unsigned int v112; // r0
  CObject *v113; // r0
  char v114; // r0
  bool v116; // zf
  CPad *v117; // r0
  eWeaponType v118; // r11
  Int32 v119; // r2
  CPlayerPed *v120; // r0
  eWeaponType v121; // r1
  int v122; // r5
  CObject *v123; // r0
  char v124; // r0
  CBaseModelInfo *v125; // r6
  Int32 MonetaryValue; // r2
  CPlayerPed *v127; // r0
  eWeaponType v128; // r1
  int m_nChosenWeapon; // r5
  CObject *v130; // r0
  char v131; // r1
  unsigned int v132; // r0
  int v133; // r1
  unsigned int v134; // r0
  const char *v135; // r8
  int v136; // r0
  int v137; // r0
  const char *v138; // r1
  CObject *v139; // r0
  char v140; // r0
  CPlayerPed *v141; // r0
  CMatrix *v142; // r1
  float m_heading; // s0
  const char *v144; // r8
  GxtChar *v145; // r1
  unsigned int m_nWeaponSlot; // r1
  char *v147; // r0
  int v148; // r2
  unsigned int v149; // r1
  bool v150; // cc
  CWeapon *v151; // r5
  CPlayerPed *PlayerPed; // r0
  int v153; // r5
  signed int v154; // r0
  char *v155; // r0
  GxtChar *v156; // r0
  CPlayerInfo *v157; // r0
  Int32 v158; // r1
  Int32 *p_Score; // r0
  Int32 v160; // r2
  Int32 Score; // t1
  CMatrix *v162; // r6
  int v163; // r5
  __int64 v164; // d16
  int v165; // r0
  UInt32 v166; // r0
  unsigned __int32 *p_st_value; // r3
  int v168; // r0
  int InputType; // r0
  const char *v170; // r1
  GxtChar *v171; // r1
  CObject *v172; // r0
  CPlayerPed *v173; // r0
  CPad *Pad; // r0
  _BOOL4 Target; // r0
  const char *v176; // r6
  GxtChar *v177; // r0
  __int64 Radiusa; // [sp+0h] [bp-90h]
  int Radius; // [sp+0h] [bp-90h]
  CVehicle *v180; // [sp+1Ch] [bp-74h]
  CVector v181; // [sp+24h] [bp-6Ch] BYREF
  CVector v182; // [sp+30h] [bp-60h] BYREF
  CVector v183; // [sp+3Ch] [bp-54h] BYREF
  CVector v184; // [sp+48h] [bp-48h] BYREF

  p_pObject = &this->pObject;
  pObject = this->pObject;
  if ( pObject )
  {
    m_pMat = pObject->m_pMat;
    v13 = (float)this->CoorsZ * 0.125;
    v14 = (float)this->CoorsY * 0.125;
    v15 = (float)this->CoorsX * 0.125;
    if ( m_pMat )
    {
      m_pMat->tx = v15;
      pObject->m_pMat->ty = v14;
      p_tz = &pObject->m_pMat->tz;
    }
    else
    {
      pObject->m_transform.m_translate.x = v15;
      pObject->m_transform.m_translate.y = v14;
      p_tz = &pObject->m_transform.m_translate.z;
    }
    *p_tz = v13;
  }
  if ( this->Type == 16 )
  {
    RegenerationTime = this->RegenerationTime;
    v18 = CTimer::m_snTimeInMilliseconds;
    this->RegenerationTime = CTimer::m_snTimeInMilliseconds;
    FindPlayerCoors(&v184, -1);
    v5.n64_u32[0] = *(_DWORD *)&this->CoorsY;
    v19.n64_u64[0] = vsub_f32(
                       *(float32x2_t *)&v184.y,
                       vmul_f32(vcvt_f32_s32((int32x2_t)vmovl_s16(v5).n128_u64[0]), (float32x2_t)0x3E0000003E000000LL)).n64_u64[0];
    v20.n64_u64[0] = vmul_f32(v19, v19).n64_u64[0];
    if ( sqrtf(
           (float)((float)((float)(v184.x + (float)((float)this->CoorsX * -0.125))
                         * (float)(v184.x + (float)((float)this->CoorsX * -0.125)))
                 + v20.n64_f32[0])
         + v20.n64_f32[1]) <= 10.0 )
    {
      v20.n64_u32[0] = LODWORD(this->CurrentValue);
    }
    else
    {
      v20.n64_f32[0] = this->CurrentValue + (float)((float)(this->MoneyPerDay * (v18 - RegenerationTime)) / 1440000.0);
      LODWORD(this->CurrentValue) = v20.n64_u32[0];
    }
    v4.n64_f32[0] = (float)this->MonetaryValue;
    v21 = this->pObject;
    LODWORD(v22) = vmin_f32(v20, v4).n64_u32[0];
    this->CurrentValue = v22;
    if ( v21 )
    {
      if ( v22 >= 10.0 )
        v23 = (unsigned int)(float)(v22 / 5.0);
      else
        LOWORD(v23) = 0;
      v21->ObjectMessageAmount = v23;
    }
  }
  if ( !(*((unsigned __int8 *)this + 29) << 31) )
  {
    v24 = *p_pObject;
    if ( !*p_pObject )
    {
      CPickup::GiveUsAPickUpObject(this, p_pObject, -1);
      v41 = this->pObject;
      if ( !v41 )
        return 0;
      CWorld::Add(v41);
      v24 = *p_pObject;
      if ( !*p_pObject )
        return 0;
    }
    if ( (unsigned __int8)(this->Type - 9) <= 5u )
    {
      switch ( this->Type )
      {
        case 9u:
          if ( !pPlayerVehicle )
            goto LABEL_164;
          v25 = v24->m_pMat;
          p_tx = &v25->tx;
          if ( !v25 )
            p_tx = &v24->m_transform.m_translate.x;
          if ( CVehicle::IsSphereTouchingVehicle(pPlayerVehicle, *p_tx, p_tx[1], p_tx[2], 2.0) )
            goto LABEL_164;
          v27 = 10;
          goto LABEL_94;
        case 0xAu:
          goto LABEL_97;
        case 0xBu:
          if ( CWaterLevel::GetWaterLevel(v24->m_pMat->tx, v24->m_pMat->ty, v24->m_pMat->tz + 5.0, &v184.x, 1, 0) == 1 )
            (*p_pObject)->m_pMat->tz = v184.x + 0.6;
          v52 = *p_pObject;
          m_pRwObject = (*p_pObject)->m_pRwObject;
          if ( m_pRwObject )
          {
            parent = (char *)m_pRwObject->parent;
            v55 = v52->m_pMat;
            v56 = (RwMatrix *)(parent + 16);
            if ( v55 )
              CMatrix::UpdateRwMatrix(v55, v56);
            else
              CSimpleTransform::UpdateRwMatrix(&v52->m_transform, v56);
          }
          CEntity::UpdateRwFrame(*p_pObject);
          v83 = CPools::ms_pVehiclePool;
          m_nSize = CPools::ms_pVehiclePool->m_nSize;
          if ( !m_nSize )
            goto LABEL_93;
          v85 = 0;
          do
          {
            v86 = 2604 - 2604 * m_nSize--;
            while ( (v83->m_aFlags[m_nSize] & 0x80u) != 0
                 || v83->m_aStorage == (CPool<CVehicle,CHeli>::StorageType *)v86 )
            {
              --m_nSize;
              v86 += 2604;
              if ( m_nSize == -1 )
                goto LABEL_92;
            }
            v87 = (CVehicle *)&(*v83->m_aStorage)[-v86];
            v88 = (*p_pObject)->m_pMat;
            p_x = &v88->tx;
            if ( !v88 )
              p_x = &(*p_pObject)->m_transform.m_translate.x;
            v85 |= CVehicle::IsSphereTouchingVehicle(v87, *p_x, p_x[1], p_x[2], 2.0);
          }
          while ( m_nSize );
LABEL_92:
          if ( v85 << 31 )
            goto LABEL_164;
LABEL_93:
          v27 = 12;
LABEL_94:
          this->Type = v27;
          v35 = 0;
          this->RegenerationTime = CTimer::m_snTimeInMilliseconds + 10000;
          goto LABEL_165;
        case 0xCu:
          if ( CWaterLevel::GetWaterLevel(v24->m_pMat->tx, v24->m_pMat->ty, v24->m_pMat->tz + 5.0, &v184.x, 1, 0) == 1 )
            (*p_pObject)->m_pMat->tz = v184.x + 0.6;
          v57 = *p_pObject;
          v58 = (*p_pObject)->m_pRwObject;
          if ( v58 )
          {
            v59 = (char *)v58->parent;
            v60 = v57->m_pMat;
            v61 = (RwMatrix *)(v59 + 16);
            if ( v60 )
              CMatrix::UpdateRwMatrix(v60, v61);
            else
              CSimpleTransform::UpdateRwMatrix(&v57->m_transform, v61);
          }
          CEntity::UpdateRwFrame(*p_pObject);
LABEL_97:
          v90 = 0;
          v91 = CPools::ms_pVehiclePool;
          v92 = CPools::ms_pVehiclePool->m_nSize;
          if ( CTimer::m_snTimeInMilliseconds > this->RegenerationTime )
            v90 = 1;
          if ( !v92 )
            goto LABEL_108;
          break;
        case 0xDu:
          v62 = CTimer::ms_fTimeStep;
          v24->m_vecMoveSpeed.z = v24->m_vecMoveSpeed.z + (float)(CTimer::ms_fTimeStep * -0.01);
          v63 = *p_pObject;
          v64 = v62 * (*p_pObject)->m_vecMoveSpeed.x;
          v65 = (*p_pObject)->m_pMat;
          v66 = v62 * (*p_pObject)->m_vecMoveSpeed.z;
          v67 = v62 * (*p_pObject)->m_vecMoveSpeed.y;
          v68 = &v65->tx;
          if ( !v65 )
            v68 = &v63->m_transform.m_translate.x;
          v69 = v64 + *v68;
          v70 = v67 + v68[1];
          v71 = v66 + v68[2];
          if ( v65 )
          {
            v65->tx = v69;
            v63->m_pMat->ty = v70;
            p_z = &v63->m_pMat->tz;
          }
          else
          {
            v63->m_transform.m_translate.x = v69;
            v63->m_transform.m_translate.y = v70;
            p_z = &v63->m_transform.m_translate.z;
          }
          *p_z = v71;
          v78 = *p_pObject;
          v79 = (*p_pObject)->m_pRwObject;
          if ( v79 )
          {
            v80 = (char *)v79->parent;
            v81 = v78->m_pMat;
            v82 = (RwMatrix *)(v80 + 16);
            if ( v81 )
              CMatrix::UpdateRwMatrix(v81, v82);
            else
              CSimpleTransform::UpdateRwMatrix(&v78->m_transform, v82);
          }
          CEntity::UpdateRwFrame(*p_pObject);
          v35 = 0;
          if ( CWaterLevel::GetWaterLevel(
                 (*p_pObject)->m_pMat->tx,
                 (*p_pObject)->m_pMat->ty,
                 (*p_pObject)->m_pMat->tz + 5.0,
                 &v184.x,
                 1,
                 0) == 1 )
          {
            v35 = 0;
            if ( v184.x >= (*p_pObject)->m_pMat->tz )
              this->Type = 14;
          }
          goto LABEL_165;
        case 0xEu:
          if ( CWaterLevel::GetWaterLevel(v24->m_pMat->tx, v24->m_pMat->ty, v24->m_pMat->tz + 5.0, &v184.x, 1, 0) == 1 )
            (*p_pObject)->m_pMat->tz = v184.x;
          v73 = *p_pObject;
          v74 = (*p_pObject)->m_pRwObject;
          if ( v74 )
          {
            v75 = (char *)v74->parent;
            v76 = v73->m_pMat;
            v77 = (RwMatrix *)(v75 + 16);
            if ( v76 )
              CMatrix::UpdateRwMatrix(v76, v77);
            else
              CSimpleTransform::UpdateRwMatrix(&v73->m_transform, v77);
          }
          CEntity::UpdateRwFrame(*p_pObject);
          if ( !pPlayerVehicle )
            goto LABEL_164;
          v103 = (*p_pObject)->m_pMat;
          v104 = &v103->tx;
          if ( !v103 )
            v104 = &(*p_pObject)->m_transform.m_translate.x;
          if ( CVehicle::IsSphereTouchingVehicle(pPlayerVehicle, *v104, v104[1], v104[2], 2.0) != 1 )
            goto LABEL_164;
          CRadar::ClearBlipForEntity(BLIPTYPE_PICKUP, (this->ReferenceIndex << 16) | (this - CPickups::aPickUps));
          v105 = this->pObject;
          if ( v105 )
          {
            CWorld::Remove(v105);
            if ( *p_pObject )
              (*((void (__fastcall **)(CObject *))(*p_pObject)->_vptr$CPlaceable + 1))(*p_pObject);
            *p_pObject = 0;
          }
          v106 = *((_BYTE *)this + 29);
          this->Type = 0;
          *((_BYTE *)this + 29) = v106 | 1;
          CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 12, 0.0, 1.0);
          v35 = 1;
          goto LABEL_165;
        default:
          goto LABEL_164;
      }
      do
      {
        v93 = 2604 - 2604 * v92--;
        while ( (v91->m_aFlags[v92] & 0x80u) != 0 || v91->m_aStorage == (CPool<CVehicle,CHeli>::StorageType *)v93 )
        {
          --v92;
          v93 += 2604;
          if ( v92 == -1 )
            goto LABEL_108;
        }
        v94 = (CVehicle *)&(*v91->m_aStorage)[-v93];
        v95 = (*p_pObject)->m_pMat;
        v96 = &v95->tx;
        if ( !v95 )
          v96 = &(*p_pObject)->m_transform.m_translate.x;
        v90 |= CVehicle::IsSphereTouchingVehicle(v94, *v96, v96[1], v96[2], 1.5);
      }
      while ( v92 );
LABEL_108:
      v35 = 0;
      if ( v90 << 31 )
      {
        v97 = this->pObject;
        v98 = v97->m_pMat;
        p_m_transform = (__int64 *)&v98->tx;
        if ( !v98 )
          p_m_transform = (__int64 *)&v97->m_transform;
        v100 = *p_m_transform;
        Radiusa = *(__int64 *)((char *)p_m_transform + 4);
        CExplosion::AddExplosion(0, 0, EXP_TYPE_MINE, *(CVector *)&v100, 0, 1u, -1.0, 0);
        CRadar::ClearBlipForEntity(BLIPTYPE_PICKUP, (this->ReferenceIndex << 16) | (this - CPickups::aPickUps));
        v101 = this->pObject;
        if ( v101 )
        {
          CWorld::Remove(v101);
          if ( *p_pObject )
            (*((void (__fastcall **)(CObject *))(*p_pObject)->_vptr$CPlaceable + 1))(*p_pObject);
          *p_pObject = 0;
        }
        v102 = *((_BYTE *)this + 29);
        v35 = 0;
        this->Type = 0;
        *((_BYTE *)this + 29) = v102 | 1;
      }
      goto LABEL_165;
    }
    v180 = pPlayerVehicle;
    m_nModelIndex = v24->m_nModelIndex;
    if ( m_nModelIndex == MI_PICKUP_BRIBE )
    {
      if ( v180 )
      {
        v38 = v24->m_pMat;
        v39 = &v38->tx;
        if ( !v38 )
          v39 = &v24->m_transform.m_translate.x;
        IsSphereTouchingVehicle = CVehicle::IsSphereTouchingVehicle(v180, *v39, v39[1], v39[2], 2.0);
LABEL_133:
        v35 = 0;
        v107 = (unsigned __int8)IsSphereTouchingVehicle & ((*(_DWORD *)&(*p_pObject)->m_nObjectFlags & 0x2000000) == 0);
        if ( CPlayerPed::GetPadFromPlayer(pPlayerPed) )
        {
          if ( ((unsigned __int8)v107 & (CPlayerPed::GetPadFromPlayer(pPlayerPed)->DisablePlayerControls == 0
                                      || (unsigned __int16)m_nModelIndex != 370)) == 0 )
            goto LABEL_165;
        }
        else if ( v107 != 1 )
        {
          goto LABEL_164;
        }
        Type = this->Type;
        if ( (Type > 0x13 || ((1 << Type) & (unsigned int)"_c11AddInteriorEP10Interior_c") == 0)
          && MI_PICKUP_BODYARMOUR != m_nModelIndex
          && MI_PICKUP_HEALTH != m_nModelIndex
          && MI_PICKUP_ADRENALINE != m_nModelIndex )
        {
          if ( m_nModelIndex == -1 )
            goto LABEL_242;
          if ( m_nModelIndex != 370 )
          {
            v110 = CModelInfo::ms_modelInfoPtrs[m_nModelIndex];
            if ( (*((int (__fastcall **)(CBaseModelInfo *))v110->_vptr$CBaseModelInfo + 5))(v110) == 4 )
            {
              m_hashKey = v110[1].m_hashKey;
              if ( (unsigned int)m_hashKey > WEAPONTYPE_PARACHUTE )
                goto LABEL_247;
              goto LABEL_243;
            }
LABEL_242:
            m_hashKey = WEAPONTYPE_UNARMED;
LABEL_243:
            if ( CDarkel::FrenzyOnGoing() == 1 )
            {
              v35 = 0;
              *((_BYTE *)this + 29) &= ~4u;
              goto LABEL_165;
            }
LABEL_247:
            if ( (unsigned int)(m_hashKey - 1) <= 0x2D )
            {
              m_nWeaponSlot = CWeaponInfo::GetWeaponInfo(m_hashKey, 1)->m_nWeaponSlot;
              v147 = (char *)pPlayerPed + 28 * m_nWeaponSlot;
              v148 = *((_DWORD *)v147 + 361);
              if ( v148 != m_hashKey )
              {
                if ( CStreaming::ms_aInfoForModel[m_nModelIndex].m_status != 1 )
                  goto LABEL_164;
                if ( v148 && (*((_DWORD *)v147 + 364) || m_nWeaponSlot <= 5 && ((1 << m_nWeaponSlot) & 0x3A) != 0) )
                {
                  v149 = m_nWeaponSlot - 3;
                  v150 = v149 > 2;
                  CPickups::PlayerOnWeaponPickup = 6;
                  if ( v149 <= 2 )
                  {
                    v149 = this->Type;
                    v150 = v149 > 0x16;
                  }
                  if ( !v150 && ((1 << v149) & 0x40001C) != 0 )
                  {
                    v151 = (CWeapon *)(v147 + 1444);
                    CPickup::ExtractAmmoFromPickup(this, pPlayerPed);
                    CWeapon::Reload(v151, 0);
                  }
                  if ( (CWeaponInfo::GetWeaponInfo(m_hashKey, 1)->m_nFlags & 2) != 0
                    || (PlayerPed = FindPlayerPed(-1), !CPedIntelligence::GetTaskJetPack(PlayerPed->m_pPedIntelligence)) )
                  {
                    Pad = CPad::GetPad(0);
                    Target = CPad::GetTarget(Pad, 0);
                    v153 = 1;
                    if ( CPickups::DisplayHelpMessage && !Target )
                    {
                      if ( (*((_BYTE *)this + 29) & 4) == 0 )
                      {
                        if ( CHID::GetInputType() )
                          v176 = "PU_HID";
                        else
                          v176 = "PU_CF1";
                        v177 = CText::Get(&TheText, (const unsigned __int8 *)v176);
                        CHud::SetHelpMessage((const unsigned __int8 *)v176, v177, 0, 0, 0, 0);
                        if ( CPickups::DisplayHelpMessage )
                          --CPickups::DisplayHelpMessage;
                        *((_BYTE *)this + 29) |= 4u;
                      }
                      v153 = 1;
                    }
                  }
                  else
                  {
                    v153 = 0;
                  }
                  v184.x = 0.0;
                  v184.y = 0.0;
                  if ( !CollectPickupBuffer )
                    v153 &= CTouchInterface::IsReleased(WIDGET_SWAP_WEAPONS, (CVector2D *)&v184, 6);
                  v35 = 0;
                  if ( v153 != 1 || CTimer::m_snTimeInMilliseconds - pPlayerPed->m_pPlayerData->m_LastTimeFiring < 0x5DC )
                    goto LABEL_165;
                }
                else if ( CTimer::m_snTimeInMilliseconds - pPlayerPed->m_pPlayerData->m_LastTimeFiring < 0x5DC
                       || (CWeaponInfo::GetWeaponInfo(m_hashKey, 1)->m_nFlags & 2) == 0
                       && (v173 = FindPlayerPed(-1), CPedIntelligence::GetTaskJetPack(v173->m_pPedIntelligence)) )
                {
                  v35 = 0;
                  CPickups::PlayerOnWeaponPickup = 6;
                  goto LABEL_165;
                }
              }
            }
          }
        }
        if ( (m_nModelIndex != MI_PICKUP_BODYARMOUR
           || pPlayerPed->m_nArmour <= (float)((float)CWorld::Players[PlayerNum].MaxArmour + -0.2))
          && (m_nModelIndex != MI_PICKUP_HEALTH
           || pPlayerPed->m_nHealth <= (float)((float)CWorld::Players[PlayerNum].MaxHealth + -0.2)) )
        {
          if ( m_nModelIndex == MI_PICKUP_BRIBE )
          {
            v35 = 0;
            if ( FindPlayerPed(0)->m_pPlayerData->m_Wanted->m_WantedLevel == WANTED_CLEAN )
            {
LABEL_165:
              if ( !(*((unsigned __int8 *)this + 29) << 31) )
              {
                v112 = this->Type;
                if ( v112 <= 8 && ((1 << v112) & 0x130) != 0 && CTimer::m_snTimeInMilliseconds > this->RegenerationTime )
                {
                  CRadar::ClearBlipForEntity(
                    BLIPTYPE_PICKUP,
                    (this->ReferenceIndex << 16) | (this - CPickups::aPickUps));
                  v113 = this->pObject;
                  if ( v113 )
                  {
                    CWorld::Remove(v113);
                    if ( *p_pObject )
                      (*((void (__fastcall **)(CObject *))(*p_pObject)->_vptr$CPlaceable + 1))(*p_pObject);
                    *p_pObject = 0;
                  }
                  v114 = *((_BYTE *)this + 29);
                  this->Type = 0;
                  *((_BYTE *)this + 29) = v114 | 1;
                }
              }
              return v35;
            }
          }
          if ( (m_nModelIndex != MI_PICKUP_KILLFRENZY
             || !CTheScripts::IsPlayerOnAMission() && !CDarkel::FrenzyOnGoing() && CLocalisation::KillFrenzy())
            && ((unsigned __int16)m_nModelIndex != 370
             || !CPedIntelligence::GetTaskJetPack(pPlayerPed->m_pPedIntelligence)) )
          {
            v109 = this->Type;
            if ( v109 == 21 )
            {
              if ( !CTheScripts::IsPlayerOnAMission() )
                goto LABEL_175;
            }
            else if ( v109 != 16 || this->CurrentValue >= 10.0 )
            {
LABEL_175:
              if ( m_nModelIndex != MI_PICKUP_PROPERTY )
              {
                v116 = m_nModelIndex == MI_PICKUP_PROPERTY_FORSALE;
                if ( m_nModelIndex != MI_PICKUP_PROPERTY_FORSALE )
                  v116 = this->Type == 21;
                if ( !v116 )
                {
                  v117 = CPad::GetPad(0);
                  CPad::StartShake(v117, 120, 0x64u, 0);
                }
              }
              if ( MI_PICKUP_BODYARMOUR == m_nModelIndex )
                goto LABEL_181;
              if ( MI_PICKUP_HEALTH == m_nModelIndex )
              {
LABEL_183:
                v118 = WEAPONTYPE_LAST_WEAPONTYPE;
                goto LABEL_184;
              }
              if ( MI_PICKUP_ADRENALINE == m_nModelIndex )
              {
LABEL_181:
                v118 = WEAPONTYPE_ARMOUR;
LABEL_184:
                v35 = 0;
                switch ( this->Type )
                {
                  case 2u:
                  case 0xFu:
                    if ( CPickups::GivePlayerGoodiesWithPickUpMI((*p_pObject)->m_nModelIndex, PlayerNum) )
                      goto LABEL_280;
                    v35 = 0;
                    if ( !CPlayerPed::DoesPlayerWantNewWeapon(pPlayerPed, v118, 0) )
                      goto LABEL_165;
                    if ( v118 == WEAPONTYPE_UNARMED )
                    {
                      if ( v180 && (*p_pObject)->m_nModelIndex == MI_PICKUP_CAMERA )
                      {
                        CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 11, 0.0, 1.0);
                        CPickups::bPickUpcamActivated = 1;
                        CPickups::pPlayerVehicle = FindPlayerVehicle(-1, 0);
                        v162 = (*p_pObject)->m_pMat;
                        v163 = (int)&v162->tx;
                        if ( !v162 )
                          v163 = (int)&(*p_pObject)->m_transform;
                        v164 = *(_QWORD *)v163;
                        CPickups::StaticCamCoors.z = *(RwReal *)(v163 + 8);
                        CPickups::StaticCamStartTime = CTimer::m_snTimeInMilliseconds;
                        *(_QWORD *)&CPickups::StaticCamCoors.x = v164;
                      }
LABEL_280:
                      v165 = this->Type;
                      if ( v165 == 15 )
                      {
                        p_st_value = &stru_57E3C.st_value;
                        if ( (*p_pObject)->m_nModelIndex == MI_PICKUP_BRIBE )
                          p_st_value = &stru_493DC.st_value;
                        v166 = (UInt32)p_st_value + CTimer::m_snTimeInMilliseconds;
                      }
                      else
                      {
                        if ( v165 != 2 )
                        {
LABEL_287:
                          if ( *p_pObject )
                          {
                            CWorld::Remove(*p_pObject);
                            if ( *p_pObject )
                              (*((void (__fastcall **)(CObject *))(*p_pObject)->_vptr$CPlaceable + 1))(*p_pObject);
                            *p_pObject = 0;
                          }
                          v124 = *((_BYTE *)this + 29);
                          goto LABEL_292;
                        }
                        v166 = CTimer::m_snTimeInMilliseconds + 30000;
                      }
                      this->RegenerationTime = v166;
                      goto LABEL_287;
                    }
                    MonetaryValue = this->MonetaryValue;
                    if ( MonetaryValue )
                      goto LABEL_212;
                    if ( (*((_BYTE *)this + 29) & 2) != 0 )
                    {
                      v127 = pPlayerPed;
                      v128 = v118;
                      MonetaryValue = 0;
                    }
                    else
                    {
                      MonetaryValue = AmmoForWeapon_OnStreet[v118];
LABEL_212:
                      v127 = pPlayerPed;
                      v128 = v118;
                    }
                    CPed::GiveDelayedWeapon(v127, v128, MonetaryValue);
                    m_nChosenWeapon = pPlayerPed->m_pPlayerData->m_nChosenWeapon;
                    if ( CPed::GetWeaponSlot(pPlayerPed, WEAPONTYPE_UNARMED) == m_nChosenWeapon )
                      pPlayerPed->m_pPlayerData->m_nChosenWeapon = CPed::GetWeaponSlot(pPlayerPed, v118);
                    CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 6, 0.0, 1.0);
                    goto LABEL_280;
                  case 3u:
                  case 4u:
                  case 5u:
                  case 0x16u:
                    if ( CPickups::GivePlayerGoodiesWithPickUpMI((*p_pObject)->m_nModelIndex, PlayerNum) )
                      goto LABEL_196;
                    if ( !CPlayerPed::DoesPlayerWantNewWeapon(pPlayerPed, v118, 0) )
                    {
                      CPickup::ExtractAmmoFromPickup(this, pPlayerPed);
                      goto LABEL_164;
                    }
                    if ( v118 == WEAPONTYPE_UNARMED )
                      goto LABEL_194;
                    v119 = this->MonetaryValue;
                    if ( v119 )
                      goto LABEL_191;
                    if ( (*((_BYTE *)this + 29) & 2) != 0 )
                    {
                      v120 = pPlayerPed;
                      v121 = v118;
                      v119 = 0;
                    }
                    else
                    {
                      v119 = AmmoForWeapon_OnStreet[v118];
LABEL_191:
                      v120 = pPlayerPed;
                      v121 = v118;
                    }
                    CPed::GiveDelayedWeapon(v120, v121, v119);
                    v122 = pPlayerPed->m_pPlayerData->m_nChosenWeapon;
                    if ( CPed::GetWeaponSlot(pPlayerPed, WEAPONTYPE_UNARMED) == v122 )
                      pPlayerPed->m_pPlayerData->m_nChosenWeapon = CPed::GetWeaponSlot(pPlayerPed, v118);
LABEL_194:
                    if ( (*p_pObject)->m_nModelIndex != MI_PICKUP_SAVEGAME )
                    {
                      CHud::SetHelpMessage(0, 0, 1, 0, 0, 0);
                      CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 6, 0.0, 1.0);
                    }
LABEL_196:
                    CRadar::ClearBlipForEntity(
                      BLIPTYPE_PICKUP,
                      (this->ReferenceIndex << 16) | (this - CPickups::aPickUps));
                    v123 = this->pObject;
                    if ( v123 )
                    {
                      CWorld::Remove(v123);
                      if ( *p_pObject )
                        (*((void (__fastcall **)(CObject *))(*p_pObject)->_vptr$CPlaceable + 1))(*p_pObject);
                      *p_pObject = 0;
                    }
                    v124 = *((_BYTE *)this + 29);
                    this->Type = 0;
                    goto LABEL_292;
                  case 8u:
                  case 0x13u:
                    CWorld::Players[0].Score += this->MonetaryValue;
                    CRadar::ClearBlipForEntity(
                      BLIPTYPE_PICKUP,
                      (this->ReferenceIndex << 16) | (this - CPickups::aPickUps));
                    v130 = this->pObject;
                    if ( v130 )
                    {
                      CWorld::Remove(v130);
                      if ( *p_pObject )
                        (*((void (__fastcall **)(CObject *))(*p_pObject)->_vptr$CPlaceable + 1))(*p_pObject);
                      *p_pObject = 0;
                    }
                    v131 = *((_BYTE *)this + 29);
                    this->Type = 0;
                    *((_BYTE *)this + 29) = v131 | 1;
                    CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 7, 0.0, 1.0);
                    CPed::Say(pPlayerPed, 0xACu, 0, 1.0, 0, 0, 0);
                    v35 = 1;
                    goto LABEL_165;
                  case 0x10u:
                    v35 = 0;
                    CWorld::Players[PlayerNum].Score = (int)(float)(this->CurrentValue
                                                                  + (float)CWorld::Players[PlayerNum].Score);
                    this->CurrentValue = 0.0;
                    CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 7, 0.0, 1.0);
                    goto LABEL_165;
                  case 0x11u:
                    v132 = *((unsigned __int8 *)this + 29);
                    if ( (v132 & 4) != 0 )
                      goto LABEL_164;
                    *((_BYTE *)this + 29) = v132 | 4;
                    v133 = (v132 >> 4) & 7;
                    v134 = v132 >> 4;
                    if ( v133 == 2 )
                    {
                      v135 = "PROP_4";
                    }
                    else if ( v133 == 1 )
                    {
                      v135 = "PROP_3";
                      if ( CHID::GetInputType() )
                        v135 = "PROP_3X";
                      v134 = *((unsigned __int8 *)this + 29) >> 4;
                    }
                    else
                    {
                      v135 = "FESZ_CA";
                    }
                    v168 = v134 & 7;
                    if ( v168 == 2 )
                    {
                      v170 = "PROP_4";
                    }
                    else if ( v168 == 1 )
                    {
                      InputType = CHID::GetInputType();
                      v170 = "PROP_3";
                      if ( InputType )
                        v170 = "PROP_3X";
                    }
                    else
                    {
                      v170 = "FESZ_CA";
                    }
                    v35 = 0;
                    v171 = CText::Get(&TheText, (const unsigned __int8 *)v170);
                    CHud::SetHelpMessage((const unsigned __int8 *)v135, v171, 0, 0, 0, 0);
                    goto LABEL_165;
                  case 0x12u:
                    v136 = (*((unsigned __int8 *)this + 29) >> 4) & 7;
                    if ( v136 == 2 )
                    {
                      v138 = "PROP_4";
                    }
                    else if ( v136 == 1 )
                    {
                      v137 = CHID::GetInputType();
                      v138 = "PROP_3";
                      if ( v137 )
                        v138 = "PROP_3X";
                    }
                    else
                    {
                      v138 = "FESZ_CA";
                    }
                    strcpy((char *)&v184, v138);
                    v154 = strlen((const char *)&v184);
                    if ( v154 >= 3 )
                    {
                      v155 = (char *)&v184 + v154;
                      if ( *(v155 - 2) == 95 )
                        *(v155 - 1) = 76;
                    }
                    v156 = CText::Get(&TheText, (const unsigned __int8 *)&v184);
                    CMessages::InsertNumberInString(v156, this->MonetaryValue, 0, 0, 0, 0, 0, gGxtString);
                    CHud::SetHelpMessage((const unsigned __int8 *)&v184, gGxtString, 0, 0, 0, 0);
                    v183.x = 0.0;
                    v183.y = 0.0;
                    if ( !CollectPickupBuffer && !CTouchInterface::IsReleased(WIDGET_PURCHASE, (CVector2D *)&v183, 6) )
                      goto LABEL_164;
                    if ( CTheScripts::IsPlayerOnAMission() )
                    {
                      v144 = "PROP_2";
                    }
                    else
                    {
                      v157 = &CWorld::Players[CWorld::PlayerInFocus];
                      v158 = this->MonetaryValue;
                      Score = v157->Score;
                      p_Score = &v157->Score;
                      v160 = Score;
                      if ( Score >= v158 )
                      {
                        *p_Score = v160 - v158;
                        CHud::SetHelpMessage(0, 0, 1, 0, 0, 0);
                        CRadar::ClearBlipForEntity(
                          BLIPTYPE_PICKUP,
                          (this->ReferenceIndex << 16) | (this - CPickups::aPickUps));
                        v172 = this->pObject;
                        if ( v172 )
                        {
                          CWorld::Remove(v172);
                          if ( *p_pObject )
                            (*((void (__fastcall **)(CObject *))(*p_pObject)->_vptr$CPlaceable + 1))(*p_pObject);
                          *p_pObject = 0;
                        }
                        v124 = *((_BYTE *)this + 29);
                        this->Type = 0;
LABEL_292:
                        *((_BYTE *)this + 29) = v124 | 1;
                        v35 = 1;
                        goto LABEL_165;
                      }
                      v144 = "PROP_1";
                    }
                    v35 = 0;
                    v145 = CText::Get(&TheText, (const unsigned __int8 *)v144);
                    Radius = 0;
                    goto LABEL_274;
                  case 0x15u:
                    if ( (CTimer::m_snTimeInMilliseconds - CPad::GetPad(1)->LastTimeTouched) >> 2 > 0x7C )
                    {
                      v35 = 0;
                      if ( (*((_BYTE *)this + 29) & 4) == 0 )
                      {
                        *((_BYTE *)this + 29) |= 4u;
                        v144 = "PU_2PLN";
                        v145 = CText::Get(&TheText, "PU_2PLN");
                        Radius = 1;
LABEL_274:
                        CHud::SetHelpMessage((const unsigned __int8 *)v144, v145, 1, 0, Radius, 0);
                      }
                    }
                    else
                    {
                      CHud::m_Wants_To_Draw_Hud = 1;
                      CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 7, 0.0, 1.0);
                      CRadar::ClearBlipForEntity(
                        BLIPTYPE_PICKUP,
                        (this->ReferenceIndex << 16) | (this - CPickups::aPickUps));
                      v139 = this->pObject;
                      if ( v139 )
                      {
                        CWorld::Remove(v139);
                        if ( *p_pObject )
                          (*((void (__fastcall **)(CObject *))(*p_pObject)->_vptr$CPlaceable + 1))(*p_pObject);
                        *p_pObject = 0;
                      }
                      v140 = *((_BYTE *)this + 29);
                      this->Type = 0;
                      *((_BYTE *)this + 29) = v140 | 1;
                      CHud::SetHelpMessage(0, 0, 1, 0, 0, 0);
                      FindPlayerCoors(&v184, -1);
                      CGameLogic::vec2PlayerStartLocation = v184;
                      v141 = FindPlayerPed(-1);
                      v142 = v141->m_pMat;
                      if ( v142 )
                        m_heading = atan2f(COERCE_FLOAT(LODWORD(v142->xy) ^ 0x80000000), v142->yy);
                      else
                        m_heading = v141->m_transform.m_heading;
                      v35 = 1;
                      CGameLogic::f2PlayerStartHeading = m_heading;
                    }
                    goto LABEL_165;
                  default:
                    goto LABEL_165;
                }
              }
              if ( m_nModelIndex != -1 )
              {
                if ( m_nModelIndex == 370 )
                  goto LABEL_183;
                v125 = CModelInfo::ms_modelInfoPtrs[m_nModelIndex];
                if ( (*((int (__fastcall **)(CBaseModelInfo *))v125->_vptr$CBaseModelInfo + 5))(v125) == 4 )
                {
                  v118 = v125[1].m_hashKey;
                  goto LABEL_184;
                }
              }
              v118 = WEAPONTYPE_UNARMED;
              goto LABEL_184;
            }
          }
        }
LABEL_164:
        v35 = 0;
        goto LABEL_165;
      }
      v48 = v24->m_pMat;
      v49 = pPlayerPed->m_pMat;
      v46 = (float32x2_t *)&v48->tx;
      if ( !v48 )
        v46 = (float32x2_t *)&v24->m_transform;
      v45 = (float32x2_t *)&v49->tx;
      if ( !v49 )
        v45 = (float32x2_t *)&pPlayerPed->m_transform;
      v47 = v45[1].n64_f32[0] - v46[1].n64_f32[0];
      goto LABEL_55;
    }
    if ( m_nModelIndex != MI_PICKUP_CAMERA )
    {
      if ( m_nModelIndex == MI_PICKUP_SAVEGAME
        || m_nModelIndex == MI_PICKUP_2P_KILLFRENZY
        || m_nModelIndex == MI_PICKUP_2P_COOP )
      {
        CanPlayerStartMission = CPlayerPed::CanPlayerStartMission(pPlayerPed);
        IsSphereTouchingVehicle = 0;
        if ( v180 || !CanPlayerStartMission )
          goto LABEL_133;
      }
      else if ( v180 )
      {
        goto LABEL_132;
      }
      if ( CPed::IsAlive(pPlayerPed) )
      {
        v43 = pPlayerPed->m_pMat;
        v44 = (*p_pObject)->m_pMat;
        v45 = (float32x2_t *)&v43->tx;
        if ( !v43 )
          v45 = (float32x2_t *)&pPlayerPed->m_transform;
        v46 = (float32x2_t *)&v44->tx;
        if ( !v44 )
          v46 = (float32x2_t *)&(*p_pObject)->m_transform;
        v47 = v45[1].n64_f32[0] - v46[1].n64_f32[0];
LABEL_55:
        if ( fabsf(v47) < 2.0 )
        {
          v50.n64_u64[0] = vsub_f32((float32x2_t)v45->n64_u64[0], (float32x2_t)v46->n64_u64[0]).n64_u64[0];
          v51 = vmul_f32(v50, v50).n64_u64[0];
          if ( (float)(*(float *)&v51 + *((float *)&v51 + 1)) < 1.8 )
          {
            IsSphereTouchingVehicle = 1;
            goto LABEL_133;
          }
        }
      }
    }
LABEL_132:
    IsSphereTouchingVehicle = 0;
    goto LABEL_133;
  }
  if ( CTimer::m_snTimeInMilliseconds <= this->RegenerationTime )
    return 0;
  FindPlayerCoors(&v184, -1);
  CoorsX = this->CoorsX;
  x = v184.x;
  FindPlayerCoors(&v183, -1);
  v30 = this->CoorsX;
  v31 = v183.x;
  FindPlayerCoors(&v182, -1);
  CoorsY = this->CoorsY;
  y = v182.y;
  FindPlayerCoors(&v181, -1);
  v34 = (float)((float)(x - (float)((float)CoorsX * 0.125)) * (float)(v31 - (float)((float)v30 * 0.125)))
      + (float)((float)(y - (float)((float)CoorsY * 0.125)) * (float)(v181.y - (float)((float)this->CoorsY * 0.125)));
  if ( v34 > 100.0 || (v35 = 0, v34 > 2.4) && this->Type == 1 )
  {
    CPickup::GiveUsAPickUpObject(this, p_pObject, -1);
    v36 = this->pObject;
    if ( v36 )
    {
      CWorld::Add(v36);
      *((_BYTE *)this + 29) &= ~1u;
    }
    return 0;
  }
  return v35;
}
// 31DF15: failed to expand linear variable kr00_8.8
// 493DC: using guessed type Elf32_Sym stru_493DC;
// 57E3C: using guessed type Elf32_Sym stru_57E3C;

//----- (0031EE14) --------------------------------------------------------
void __fastcall CPickups::AddToCollectedPickupsArray(int32 ArrayIndex)
{
  UInt16 v1; // r1
  UInt16 v2; // r0

  v1 = CPickups::CollectedPickUpIndex;
  CPickups::aPickUpsCollected[CPickups::CollectedPickUpIndex] = ArrayIndex | (CPickups::aPickUps[ArrayIndex].ReferenceIndex << 16);
  v2 = v1 + 1;
  if ( (unsigned __int16)(v1 + 1) > 0x13u )
    v2 = 0;
  CPickups::CollectedPickUpIndex = v2;
}

//----- (0031EE54) --------------------------------------------------------
Int32 __fastcall CPickups::GenerateNewOne(
        CVector Coors,
        UInt32 ModelIndex,
        int Type,
        UInt32 ArgMonetaryValue,
        UInt32 ArgMoneyPerDay,
        int bPingOutOfPlayer,
        unsigned __int8 *pString)
{
  UInt16 v7; // r9
  RwReal y; // r8
  bool v9; // zf
  float x; // r5
  int v11; // r6
  UInt8 *p_Type; // r0
  bool v13; // cc
  UInt8 *v14; // r0
  UInt8 *v15; // r0
  UInt8 *i; // r0
  CPickup *v18; // r4
  CObject **p_pObject; // r4
  RwReal v20; // t1
  RwReal z; // r5
  RwReal v22; // lr
  UInt16 v23; // r12
  CPickup *v24; // r8
  uint32 v25; // r0
  char v26; // r4
  _BYTE *v27; // r9
  UInt8 *v28; // r1
  char v29; // r10
  UInt32 *p_RegenerationTime; // r2
  uint32 v31; // r0
  int v32; // r1
  float v33; // r4
  int v34; // r0
  char v35; // r1
  float v36; // r11
  char v37; // r0
  float v38; // s0
  CPickup *v39; // r4
  int v40; // r5
  CSimpleTransform *p_tx; // r3
  char v42; // r1
  float v43; // s0
  CObject **v44; // r4
  int v45; // r2
  CPickup *v46; // r0
  unsigned int ReferenceIndex; // r1
  RwReal v48; // [sp+4h] [bp-24h]
  float v49; // [sp+8h] [bp-20h]

  v7 = ModelIndex;
  y = Coors.y;
  v9 = Type == 11;
  x = Coors.x;
  if ( Type != 11 )
    v9 = Type == 13;
  if ( v9 || bPingOutOfPlayer == 1 )
  {
    v11 = 619;
    p_Type = &CPickups::aPickUps[619].Type;
    while ( *p_Type )
    {
      p_Type -= 32;
      v13 = v11-- <= 0;
      if ( v13 )
        goto LABEL_9;
    }
    if ( v11 >= 620 )
      return -1;
  }
  else
  {
LABEL_9:
    v11 = 0;
    v14 = &CPickups::aPickUps[0].Type;
    while ( *v14 )
    {
      v14 += 32;
      v13 = v11++ < 619;
      if ( !v13 )
      {
        v11 = 0;
        v15 = &CPickups::aPickUps[0].Type;
        while ( *v15 != 8 )
        {
          v15 += 32;
          v13 = v11++ < 619;
          if ( !v13 )
          {
            v11 = 0;
            for ( i = &CPickups::aPickUps[0].Type; (*i & 0xFE) != 4; i += 32 )
            {
              v13 = v11++ < 619;
              if ( !v13 )
                return -1;
            }
            break;
          }
        }
        v18 = &CPickups::aPickUps[v11];
        v20 = *(float *)&v18->pObject;
        p_pObject = &v18->pObject;
        Coors.x = v20;
        if ( v20 != 0.0 )
        {
          v49 = x;
          z = Coors.z;
          CWorld::Remove((CEntity *)LODWORD(Coors.x));
          if ( *p_pObject )
            (*((void (__fastcall **)(CObject *))(*p_pObject)->_vptr$CPlaceable + 1))(*p_pObject);
          Coors.z = z;
          x = v49;
          *p_pObject = 0;
        }
        break;
      }
    }
  }
  v22 = Coors.z;
  v48 = y;
  v23 = v7;
  v24 = &CPickups::aPickUps[v11];
  v24->CurrentValue = 0.0;
  v24->MoneyPerDay = ArgMoneyPerDay;
  v25 = CTimer::m_snTimeInMilliseconds;
  v27 = (char *)v24 + 29;
  v26 = *((_BYTE *)v24 + 29);
  v24->Type = Type;
  v28 = &v24->Type;
  v24->MonetaryValue = ArgMonetaryValue;
  v24->RegenerationTime = v25;
  v29 = v26 & 0xF8 | (2 * bPingOutOfPlayer);
  *((_BYTE *)v24 + 29) = v29;
  p_RegenerationTime = &v24->RegenerationTime;
  switch ( Type )
  {
    case 4:
      v32 = 20000;
      goto LABEL_31;
    case 5:
      v31 = v25 + 120000;
      goto LABEL_32;
    case 8:
      v32 = 30000;
LABEL_31:
      v31 = v25 + v32;
      goto LABEL_32;
    case 9:
    case 10:
      *v28 = 9;
      *p_RegenerationTime = v25 + 1500;
      if ( (unsigned __int8)(Type - 11) <= 1u )
        goto LABEL_27;
      break;
    case 11:
    case 12:
LABEL_27:
      v31 = v25 + 1500;
      *v28 = 11;
LABEL_32:
      *p_RegenerationTime = v31;
      break;
    default:
      break;
  }
  CPickups::aPickUps[v11].MI = v23;
  if ( pString )
  {
    v33 = v22;
    if ( !strcasecmp("PROP_3", (const char *)pString) || !strcasecmp("PROP_3X", (const char *)pString) )
    {
      v35 = 16;
    }
    else
    {
      v34 = strcasecmp("PROP_4", (const char *)pString);
      v35 = 0;
      if ( !v34 )
        v35 = 32;
    }
    v36 = v48;
  }
  else
  {
    v35 = 0;
    v36 = v48;
    v33 = v22;
  }
  *v27 = v29 & 0x8A | v35;
  v37 = v29 & 0x82 | v35 & 0xB2;
  v38 = v33 * 8.0;
  v39 = &CPickups::aPickUps[v11];
  v40 = (int)(float)(x * 8.0);
  v39->CoorsY = (int)(float)(v36 * 8.0);
  v39->CoorsX = v40;
  v39->CoorsZ = (int)v38;
  p_tx = (CSimpleTransform *)&TheCamera.m_pMat->tx;
  if ( !TheCamera.m_pMat )
    p_tx = &TheCamera.m_transform;
  v42 = 0;
  v43 = sqrtf(
          (float)((float)(p_tx->m_translate.x - (float)((float)v40 * 0.125))
                * (float)(p_tx->m_translate.x - (float)((float)v40 * 0.125)))
        + (float)((float)(p_tx->m_translate.y - (float)((float)(int)(float)(v36 * 8.0) * 0.125))
                * (float)(p_tx->m_translate.y - (float)((float)(int)(float)(v36 * 8.0) * 0.125))));
  if ( v43 < 100.0 )
    v42 = 1;
  *v27 = v37 | (8 * v42);
  v39->pObject = 0;
  v44 = &v39->pObject;
  if ( v43 < 100.0 )
  {
    CPickup::GiveUsAPickUpObject(&CPickups::aPickUps[v11], v44, -1);
    if ( *v44 )
      CWorld::Add(*v44);
  }
  v45 = 1;
  v46 = &CPickups::aPickUps[v11];
  ReferenceIndex = v46->ReferenceIndex;
  if ( ReferenceIndex < 0xFFFE )
    v45 = ReferenceIndex + 1;
  v46->ReferenceIndex = v45;
  return v11 | (v45 << 16);
}

//----- (0031F168) --------------------------------------------------------
Int32 __fastcall CPickup::FindTextIndexForString(unsigned __int8 *pString)
{
  int v2; // r1
  Int32 result; // r0

  if ( !pString )
    return 0;
  if ( !strcasecmp("PROP_3", (const char *)pString) || !strcasecmp("PROP_3X", (const char *)pString) )
    return 1;
  v2 = strcasecmp("PROP_4", (const char *)pString);
  result = 0;
  if ( !v2 )
    return 2;
  return result;
}

//----- (0031F1B4) --------------------------------------------------------
int32 __fastcall CPickups::GetNewUniquePickupIndex(int32 ArrayIndex)
{
  int v1; // r3
  CPickup *v2; // r12
  unsigned int ReferenceIndex; // r2
  int32 result; // r0

  v1 = 1;
  v2 = &CPickups::aPickUps[ArrayIndex];
  ReferenceIndex = v2->ReferenceIndex;
  if ( ReferenceIndex < 0xFFFE )
    v1 = ReferenceIndex + 1;
  result = ArrayIndex | (v1 << 16);
  v2->ReferenceIndex = v1;
  return result;
}

//----- (0031F1DC) --------------------------------------------------------
Int32 __fastcall CPickups::GenerateNewOne_WeaponType(
        CVector Coors,
        eWeaponType WeaponType,
        int Type,
        UInt32 Value,
        int bPingOutOfPlayer,
        unsigned __int8 *pString)
{
  RwReal y; // r5
  RwReal x; // r6
  RwReal z; // r4
  int32 m_modelId; // r3
  CVector v11; // 0:r0.12

  y = Coors.y;
  x = Coors.x;
  z = Coors.z;
  m_modelId = CWeaponInfo::GetWeaponInfo(WeaponType, 1)->m_modelId;
  *(_QWORD *)&v11.x = __PAIR64__(LODWORD(y), LODWORD(x));
  v11.z = z;
  return CPickups::GenerateNewOne(v11, m_modelId, Type, Value, 0, bPingOutOfPlayer, pString);
}
// 31F1DC: using guessed type int Type;
// 31F1DC: using guessed type int bPingOutOfPlayer;

//----- (0031F220) --------------------------------------------------------
Int32 __fastcall CPickups::ModelForWeapon(eWeaponType WeaponType)
{
  return CWeaponInfo::GetWeaponInfo(WeaponType, 1)->m_modelId;
}

//----- (0031F230) --------------------------------------------------------
int __fastcall CPickups::TryToMerge_WeaponType(
        CVector Coors,
        eWeaponType WeaponType,
        int Type,
        UInt32 Value,
        bool bPingOutOfPlayer)
{
  float y; // r5
  float x; // s4
  int v7; // r6
  float z; // s0
  int32 m_modelId; // r3
  UInt8 *i; // r0
  int v11; // r4
  bool v12; // zf
  float v13; // s10
  float v14; // s12
  float v15; // s14

  y = Coors.y;
  x = Coors.x;
  v7 = -1;
  z = Coors.z;
  m_modelId = CWeaponInfo::GetWeaponInfo(WeaponType, 1)->m_modelId;
  for ( i = &CPickups::aPickUps[0].Type; ; i += 32 )
  {
    v11 = *i;
    v12 = v11 == Type;
    if ( v11 == Type )
      v12 = m_modelId == *((unsigned __int16 *)i - 2);
    if ( v12 )
    {
      v13 = (float)((float)*((__int16 *)i - 5) * 0.125) - y;
      v14 = (float)((float)*((__int16 *)i - 6) * 0.125) - x;
      v15 = (float)((float)*((__int16 *)i - 4) * 0.125) - z;
      if ( sqrtf((float)((float)(v14 * v14) + (float)(v13 * v13)) + (float)(v15 * v15)) < 5.5 )
        break;
    }
    if ( ++v7 >= 619 )
      return 0;
  }
  *((_DWORD *)i - 5) += Value;
  return 1;
}

//----- (0031F304) --------------------------------------------------------
eWeaponType __fastcall CPickups::WeaponForModel(Int32 MI)
{
  eWeaponType *v2; // r4

  if ( MI_PICKUP_BODYARMOUR == MI )
    return 48;
  if ( MI_PICKUP_HEALTH == MI )
    return 47;
  if ( MI_PICKUP_ADRENALINE == MI )
    return 48;
  if ( MI == -1 )
    return 0;
  if ( MI == 370 )
    return 47;
  v2 = (eWeaponType *)CModelInfo::ms_modelInfoPtrs[MI];
  if ( (*(int (__fastcall **)(eWeaponType *))(*v2 + 20))(v2) != 4 )
    return 0;
  else
    return *((_DWORD *)v2 + 15);
}

//----- (0031F374) --------------------------------------------------------
bool __fastcall CPickups::IsPickUpPickedUp(Int32 PickUpNum)
{
  Int32 *v1; // r1

  v1 = CPickups::aPickUpsCollected;
  if ( CPickups::aPickUpsCollected[0] != PickUpNum )
  {
    v1 = &CPickups::aPickUpsCollected[1];
    if ( CPickups::aPickUpsCollected[1] != PickUpNum )
    {
      v1 = &CPickups::aPickUpsCollected[2];
      if ( CPickups::aPickUpsCollected[2] != PickUpNum )
      {
        v1 = &CPickups::aPickUpsCollected[3];
        if ( CPickups::aPickUpsCollected[3] != PickUpNum )
        {
          v1 = &CPickups::aPickUpsCollected[4];
          if ( CPickups::aPickUpsCollected[4] != PickUpNum )
          {
            v1 = &CPickups::aPickUpsCollected[5];
            if ( CPickups::aPickUpsCollected[5] != PickUpNum )
            {
              v1 = &CPickups::aPickUpsCollected[6];
              if ( CPickups::aPickUpsCollected[6] != PickUpNum )
              {
                v1 = &CPickups::aPickUpsCollected[7];
                if ( CPickups::aPickUpsCollected[7] != PickUpNum )
                {
                  v1 = &CPickups::aPickUpsCollected[8];
                  if ( CPickups::aPickUpsCollected[8] != PickUpNum )
                  {
                    v1 = &CPickups::aPickUpsCollected[9];
                    if ( CPickups::aPickUpsCollected[9] != PickUpNum )
                    {
                      v1 = &CPickups::aPickUpsCollected[10];
                      if ( CPickups::aPickUpsCollected[10] != PickUpNum )
                      {
                        v1 = &CPickups::aPickUpsCollected[11];
                        if ( CPickups::aPickUpsCollected[11] != PickUpNum )
                        {
                          v1 = &CPickups::aPickUpsCollected[12];
                          if ( CPickups::aPickUpsCollected[12] != PickUpNum )
                          {
                            v1 = &CPickups::aPickUpsCollected[13];
                            if ( CPickups::aPickUpsCollected[13] != PickUpNum )
                            {
                              v1 = &CPickups::aPickUpsCollected[14];
                              if ( CPickups::aPickUpsCollected[14] != PickUpNum )
                              {
                                v1 = &CPickups::aPickUpsCollected[15];
                                if ( CPickups::aPickUpsCollected[15] != PickUpNum )
                                {
                                  v1 = &CPickups::aPickUpsCollected[16];
                                  if ( CPickups::aPickUpsCollected[16] != PickUpNum )
                                  {
                                    v1 = &CPickups::aPickUpsCollected[17];
                                    if ( CPickups::aPickUpsCollected[17] != PickUpNum )
                                    {
                                      v1 = &CPickups::aPickUpsCollected[18];
                                      if ( CPickups::aPickUpsCollected[18] != PickUpNum )
                                      {
                                        v1 = &CPickups::aPickUpsCollected[19];
                                        if ( CPickups::aPickUpsCollected[19] != PickUpNum )
                                          return 0;
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  *v1 = 0;
  return 1;
}

//----- (0031F4EC) --------------------------------------------------------
void __fastcall CPickups::RemovePickUp(Int32 PickUpNum)
{
  int v1; // r4
  CPickup *v2; // r5
  CEntity *v3; // r0
  CObject **p_pObject; // r5
  CObject *pObject; // t1
  CPickup *v6; // r0
  char v7; // r1

  if ( PickUpNum != -1 )
  {
    v1 = (unsigned __int16)PickUpNum;
    if ( CPickups::aPickUps[(unsigned __int16)PickUpNum].ReferenceIndex == HIWORD(PickUpNum) )
    {
      CRadar::ClearBlipForEntity(BLIPTYPE_PICKUP, PickUpNum);
      v2 = &CPickups::aPickUps[v1];
      pObject = v2->pObject;
      p_pObject = &v2->pObject;
      v3 = pObject;
      if ( pObject )
      {
        CWorld::Remove(v3);
        if ( *p_pObject )
          (*((void (__fastcall **)(CObject *))(*p_pObject)->_vptr$CPlaceable + 1))(*p_pObject);
        *p_pObject = 0;
      }
      v6 = &CPickups::aPickUps[v1];
      v7 = *((_BYTE *)v6 + 29);
      v6->Type = 0;
      *((_BYTE *)v6 + 29) = v7 | 1;
    }
  }
}

//----- (0031F55C) --------------------------------------------------------
int32 __fastcall CPickups::GetActualPickupIndex(int32 Index)
{
  bool v2; // zf
  int32 result; // r0

  v2 = Index == -1;
  result = -1;
  if ( !v2 && CPickups::aPickUps[(unsigned __int16)Index].ReferenceIndex == HIWORD(Index) )
    return (unsigned __int16)Index;
  return result;
}

//----- (0031F584) --------------------------------------------------------
void __fastcall CPickups::UpdateMoneyPerDay(Int32 PickUpNum, UInt16 NewVal)
{
  if ( PickUpNum != -1 && CPickups::aPickUps[(unsigned __int16)PickUpNum].ReferenceIndex == HIWORD(PickUpNum) )
    CPickups::aPickUps[(unsigned __int16)PickUpNum].MoneyPerDay = NewVal;
}

//----- (0031F5B4) --------------------------------------------------------
void __fastcall CPickups::DetonateMinesHitByGunShot(CVector *pStart, CVector *pEnd)
{
  int i; // r6

  for ( i = 0; i != 620; ++i )
  {
    if ( CPickups::aPickUps[i].Type == 12 )
      CPickup::ProcessGunShot(&CPickups::aPickUps[i], pStart, pEnd);
  }
}

//----- (0031F5F8) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
void __fastcall CPickup::ProcessGunShot(CPickup *this, CVector *pStart, CVector *pEnd)
{
  CObject *pObject; // r0
  CMatrix *m_pMat; // r1
  CSimpleTransform *p_tx; // r2
  __int64 v7; // d16
  CObject *v8; // r0
  CMatrix *v9; // r1
  __int64 *p_m_transform; // r2
  __int64 v11; // kr00_8 OVERLAPPED
  CObject *v12; // r0
  CObject *v13; // r0
  char v14; // r0
  __int64 v15; // [sp+0h] [bp-60h]
  CColSphere sphere; // [sp+18h] [bp-48h] BYREF
  CColLine line; // [sp+30h] [bp-30h] BYREF

  CColLine::CColLine(&line, pStart, pEnd);
  pObject = this->pObject;
  if ( pObject )
  {
    m_pMat = pObject->m_pMat;
    p_tx = (CSimpleTransform *)&m_pMat->tx;
    if ( !m_pMat )
      p_tx = &pObject->m_transform;
    v7 = *(_QWORD *)&p_tx->m_translate.x;
    sphere.m_vecCentre.z = p_tx->m_translate.z;
    sphere.m_fRadius = 4.0;
    *(_QWORD *)&sphere.m_vecCentre.x = v7;
    if ( CCollision::TestLineSphere(&line, &sphere) )
    {
      v8 = this->pObject;
      v9 = v8->m_pMat;
      p_m_transform = (__int64 *)&v9->tx;
      if ( !v9 )
        p_m_transform = (__int64 *)&v8->m_transform;
      v11 = *p_m_transform;
      v15 = *(__int64 *)((char *)p_m_transform + 4);
      CExplosion::AddExplosion(0, 0, EXP_TYPE_MINE, *(CVector *)&v11, 0, 1u, -1.0, 0);
      CRadar::ClearBlipForEntity(BLIPTYPE_PICKUP, (this->ReferenceIndex << 16) | (this - CPickups::aPickUps));
      v12 = this->pObject;
      if ( v12 )
      {
        CWorld::Remove(v12);
        v13 = this->pObject;
        if ( v13 )
          (*((void (__fastcall **)(CObject *))v13->_vptr$CPlaceable + 1))(v13);
        this->pObject = 0;
      }
      v14 = *((_BYTE *)this + 29);
      this->Type = 0;
      *((_BYTE *)this + 29) = v14 | 1;
    }
  }
}
// 31F64D: failed to expand linear variable kr00_8.8

//----- (0031F6B0) --------------------------------------------------------
void __fastcall ModifyStringLabelForControlSetting(unsigned __int8 *pTextLabel)
{
  signed int v2; // r0
  unsigned __int8 *v3; // r0

  v2 = strlen((const char *)pTextLabel);
  if ( v2 >= 3 )
  {
    v3 = &pTextLabel[v2];
    if ( *(v3 - 2) == 95 )
      *(v3 - 1) = 76;
  }
}

//----- (0031F6D2) --------------------------------------------------------
bool __fastcall CPickups::PlayerCanPickUpThisWeaponTypeAtThisMoment(eWeaponType WeaponType)
{
  CPlayerPed *PlayerPed; // r0
  bool result; // r0

  result = 1;
  if ( (CWeaponInfo::GetWeaponInfo(WeaponType, 1)->m_nFlags & 2) == 0 )
  {
    PlayerPed = FindPlayerPed(-1);
    if ( CPedIntelligence::GetTaskJetPack(PlayerPed->m_pPedIntelligence) )
      return 0;
  }
  return result;
}

//----- (0031F700) --------------------------------------------------------
void __fastcall CPickup::ExtractAmmoFromPickup(CPickup *this, CPlayerPed *pPlayerPed)
{
  int m_nModelIndex; // r0
  eWeaponType m_hashKey; // r6
  CWeaponInfo *WeaponInfo; // r0
  Int32 MonetaryValue; // r2
  _BYTE *v8; // r5
  CBaseModelInfo *v9; // r6

  m_nModelIndex = this->pObject->m_nModelIndex;
  if ( MI_PICKUP_BODYARMOUR == m_nModelIndex )
    goto LABEL_5;
  if ( MI_PICKUP_HEALTH != m_nModelIndex )
  {
    if ( MI_PICKUP_ADRENALINE != m_nModelIndex )
    {
      if ( m_nModelIndex != -1 )
      {
        if ( m_nModelIndex == 370 )
          goto LABEL_3;
        v9 = CModelInfo::ms_modelInfoPtrs[m_nModelIndex];
        if ( (*((int (__fastcall **)(CBaseModelInfo *))v9->_vptr$CBaseModelInfo + 5))(v9) == 4 )
        {
          m_hashKey = v9[1].m_hashKey;
          goto LABEL_6;
        }
      }
      m_hashKey = WEAPONTYPE_UNARMED;
      goto LABEL_6;
    }
LABEL_5:
    m_hashKey = WEAPONTYPE_ARMOUR;
    goto LABEL_6;
  }
LABEL_3:
  m_hashKey = WEAPONTYPE_LAST_WEAPONTYPE;
LABEL_6:
  WeaponInfo = CWeaponInfo::GetWeaponInfo(m_hashKey, 1);
  if ( this->Type != 1 && (unsigned int)(WeaponInfo->m_nWeaponSlot - 3) <= 2 )
  {
    MonetaryValue = this->MonetaryValue;
    if ( MonetaryValue )
    {
      CPed::GrantAmmo(pPlayerPed, m_hashKey, MonetaryValue);
      CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 6, 0.0, 1.0);
      v8 = (char *)this + 29;
    }
    else
    {
      v8 = (char *)this + 29;
      if ( (*((_BYTE *)this + 29) & 2) == 0 )
      {
        CPed::GrantAmmo(pPlayerPed, m_hashKey, AmmoForWeapon_OnStreet[m_hashKey]);
        CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 6, 0.0, 1.0);
      }
    }
    this->MonetaryValue = 0;
    *v8 |= 2u;
  }
}

//----- (0031F7FC) --------------------------------------------------------
bool __fastcall CPickups::GivePlayerGoodiesWithPickUpMI(UInt16 MI, Int32 Player)
{
  Int32 v2; // r2
  CPlayerPed *pPed; // r4
  tAudioEvent v4; // r1
  float *p_m_nHealth; // r4
  CPlayerInfo *v6; // r5
  Int32 v7; // r5
  CPlayerPed *PlayerPed; // r4
  CTaskSimpleJetPack *v10; // r5
  CEventScriptCommand v11; // [sp+8h] [bp-28h] BYREF

  v2 = CWorld::PlayerInFocus;
  if ( Player > 0 )
    v2 = Player;
  pPed = CWorld::Players[v2].pPed;
  if ( MI_PICKUP_ADRENALINE == MI )
  {
    *((_WORD *)pPed->m_pPlayerData + 26) |= 2u;
    pPed->m_pPlayerData->m_AdrenalineEndTime = CTimer::m_snTimeInMilliseconds + 20000;
    CPlayerPed::ResetSprintEnergy(pPed);
    v4 = 9;
LABEL_17:
    CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, v4, 0.0, 1.0);
    return 1;
  }
  if ( MI_PICKUP_BODYARMOUR == MI )
  {
    pPed->m_nArmour = (float)CWorld::Players[Player].MaxArmour;
    v4 = 10;
    goto LABEL_17;
  }
  if ( MI_PICKUP_INFO == MI )
    goto LABEL_16;
  if ( MI_PICKUP_HEALTH == MI )
  {
    p_m_nHealth = &pPed->m_nHealth;
    v6 = &CWorld::Players[Player];
    CStats::UpdateStatsAddToHealth((unsigned int)(float)((float)v6->MaxHealth - *p_m_nHealth));
    v4 = 8;
    *p_m_nHealth = (float)v6->MaxHealth;
    goto LABEL_17;
  }
  if ( MI_PICKUP_BONUS == MI )
    goto LABEL_16;
  if ( MI_PICKUP_BRIBE == MI )
  {
    v7 = 0;
    PlayerPed = FindPlayerPed(0);
    if ( FindPlayerPed(-1)->m_pPlayerData->m_Wanted->m_WantedLevel >= WANTED_LEVEL1 )
      v7 = FindPlayerPed(-1)->m_pPlayerData->m_Wanted->m_WantedLevel - 1;
    CPlayerPed::SetWantedLevel(PlayerPed, v7);
    CStats::IncrementStat(0xB6u, 1.0);
    goto LABEL_16;
  }
  if ( MI_PICKUP_KILLFRENZY == MI )
  {
LABEL_16:
    v4 = 11;
    goto LABEL_17;
  }
  if ( MI == 370 )
  {
    v10 = (CTaskSimpleJetPack *)CTask::operator new(0x70u);
    CTaskSimpleJetPack::CTaskSimpleJetPack(v10, 0, 10.0, 0, 0);
    CEventScriptCommand::CEventScriptCommand(&v11, 3, v10, 0);
    CEventGroup::Add(&pPed->m_pPedIntelligence->m_eventGroup, &v11, 0);
    CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 11, 0.0, 1.0);
    CEventScriptCommand::~CEventScriptCommand(&v11);
    return 1;
  }
  if ( MI_OYSTER == MI )
  {
    CPickups::PickedUpOyster();
    return 1;
  }
  if ( MI_HORSESHOE == MI )
  {
    CPickups::PickedUpHorseShoe();
    return 1;
  }
  return 0;
}

//----- (0031FA68) --------------------------------------------------------
unsigned __int8 *__fastcall CPickup::FindStringForTextIndex(Int32 TextIndex)
{
  int InputType; // r1
  unsigned __int8 *result; // r0

  if ( TextIndex == 2 )
    return "PROP_4";
  if ( TextIndex != 1 )
    return "FESZ_CA";
  InputType = CHID::GetInputType();
  result = "PROP_3";
  if ( InputType )
    return "PROP_3X";
  return result;
}

//----- (0031FAA8) --------------------------------------------------------
int32 __fastcall CPickups::GetUniquePickupIndex(int32 ArrayIndex)
{
  return ArrayIndex | (CPickups::aPickUps[ArrayIndex].ReferenceIndex << 16);
}

//----- (0031FAC0) --------------------------------------------------------
bool __fastcall CPickup::PickUpShouldBeInvisible(CPickup *this)
{
  int16x4_t v1; // d16
  float32x2_t v4; // d16
  float32x2_t v5; // d17
  unsigned __int64 v6; // d0
  float32x2_t v7; // d16
  unsigned __int64 v8; // d1
  bool v9; // zf
  int MI; // r0
  eWeaponType m_hashKey; // r0
  CBaseModelInfo *v12; // r4

  if ( CCutsceneMgr::ms_running
    || this->MI == MI_PICKUP_KILLFRENZY
    && (CTheScripts::IsPlayerOnAMission() || CDarkel::FrenzyOnGoing() || !CLocalisation::KillFrenzy()) )
  {
    return 1;
  }
  if ( this->Type == 21 && FindPlayerPed(1) )
    return 1;
  if ( this->MI == MI_PICKUP_2P_KILLFRENZY )
  {
    if ( CLocalisation::GermanGame() )
    {
      v1.n64_u32[0] = *(_DWORD *)&this->CoorsX;
      v4.n64_u64[0] = vmul_f32(vcvt_f32_s32((int32x2_t)vmovl_s16(v1).n128_u64[0]), (float32x2_t)0x3E0000003E000000LL).n64_u64[0];
      v5.n64_u64[0] = vadd_f32(v4, (float32x2_t)0x44CF4000C4B8E000LL).n64_u64[0];
      v6 = vmul_f32(v5, v5).n64_u64[0];
      if ( sqrtf(*(float *)&v6 + *((float *)&v6 + 1)) < 10.0 )
        return 1;
      v7.n64_u64[0] = vadd_f32(v4, (float32x2_t)0xC4970000C51CF000LL).n64_u64[0];
      v8 = vmul_f32(v7, v7).n64_u64[0];
      if ( sqrtf(*(float *)&v8 + *((float *)&v8 + 1)) < 10.0 )
        return 1;
    }
  }
  v9 = !TheCamera.m_WideScreenOn;
  if ( TheCamera.m_WideScreenOn )
    v9 = this->Type == 16;
  if ( !v9 && this->MI != 366 )
    return 1;
  if ( CGameLogic::IsCoopGameGoingOn() == 1 )
  {
    MI = this->MI;
    if ( MI_PICKUP_BODYARMOUR != MI )
    {
      if ( MI_PICKUP_HEALTH == MI )
        goto LABEL_24;
      if ( MI_PICKUP_ADRENALINE == MI )
        goto LABEL_22;
      if ( MI == 370 )
      {
LABEL_24:
        m_hashKey = WEAPONTYPE_LAST_WEAPONTYPE;
      }
      else
      {
        v12 = CModelInfo::ms_modelInfoPtrs[MI];
        if ( (*((int (__fastcall **)(CBaseModelInfo *))v12->_vptr$CBaseModelInfo + 5))(v12) == 4 )
          m_hashKey = v12[1].m_hashKey;
        else
          m_hashKey = WEAPONTYPE_UNARMED;
      }
      return !CWeapon::CanBeUsedFor2Player(m_hashKey);
    }
LABEL_22:
    m_hashKey = WEAPONTYPE_ARMOUR;
    return !CWeapon::CanBeUsedFor2Player(m_hashKey);
  }
  return 0;
}
// 31FB2C: variable 'v1' is possibly undefined

//----- (0031FC30) --------------------------------------------------------
void __fastcall CPickups::DoPickUpEffects(CEntity *pEntity)
{
  float32x2_t v1; // d1
  float32x2_t v2; // d2
  float32x2_t v3; // d3
  int v5; // r1
  CPickup *v6; // r0
  int *p_m_pRwObject; // r6
  RwObject_0 *m_pRwObject; // r0
  float v9; // s16
  float v10; // r0
  CMatrix *m_pMat; // r1
  float v12; // s0
  CSimpleTransform *Coors; // r0
  int v14; // r0
  int m_nModelIndex; // r1
  int v16; // r8
  bool v17; // zf
  CMatrix *v18; // r1
  CSimpleTransform *p_tx; // r0
  CSimpleTransform *p_m_transform; // r1
  RwReal x; // s0
  float v22; // s16
  int v23; // r0
  CPickupMessage *v24; // r0
  float v25; // r3
  int v26; // r0
  int m_hashKey; // r0
  __int16 v28; // r6
  UInt16 v29; // r1
  uint8 b; // r5
  int v31; // lr
  CPickupMessage *v32; // r2
  char *v33; // r2
  char v34; // r3
  char v35; // t1
  char v36; // r0
  int v37; // r6
  int v38; // r1
  CPickup *v39; // r0
  int v40; // r0
  int InputType; // r0
  const char *v42; // r1
  int v43; // r1
  CPickup *v44; // r0
  int v45; // r0
  int v46; // r0
  const char *v47; // r1
  CBaseModelInfo *v48; // r5
  GxtChar *v49; // r0
  CPickupMessage *v50; // r2
  char v51; // r3
  char v52; // r0
  GxtChar *v53; // r0
  char v54; // r3
  float v55; // s16
  int v56; // r1
  CColModel *m_pColModel; // r0
  float v58; // s2
  float v59; // s2
  float v60; // r6
  float v61; // s20
  CMatrix *v62; // r0
  float v63; // s18
  float v64; // s20
  CMatrix *v65; // r0
  CMatrix *v66; // r0
  float v67; // s20
  CMatrix *v68; // r0
  CMatrix *v69; // r0
  CMatrix *v70; // r0
  CMatrix *v71; // r0
  CMatrix *v72; // r0
  CMatrix *v73; // r0
  uint32 v74; // r1
  CBaseModelInfo *v75; // r5
  float pScaleY; // [sp+44h] [bp-4Ch] BYREF
  float pScaleX; // [sp+48h] [bp-48h] BYREF
  RwV3d_0 In; // [sp+4Ch] [bp-44h] BYREF
  RwV3d_0 pResult; // [sp+58h] [bp-38h] BYREF
  CPickup *v80; // [sp+64h] [bp-2Ch]
  _BYTE v81[3]; // [sp+81h] [bp-Fh] BYREF

  v5 = -1;
  v6 = CPickups::aPickUps;
  while ( !v6->Type || v6->pObject != pEntity )
  {
    ++v5;
    ++v6;
    if ( v5 >= 619 )
    {
      v6 = CPickups::aPickUps;
      break;
    }
  }
  v80 = v6;
  if ( pEntity->m_nModelIndex == MI_PICKUP_CAMERA )
  {
    p_m_pRwObject = (int *)&pEntity[5].m_pRwObject;
    m_pRwObject = pEntity[5].m_pRwObject;
    if ( TheCamera.Cams[TheCamera.ActiveCam].Mode == 46 )
    {
      *p_m_pRwObject = (unsigned int)m_pRwObject & 0xFDFFFFFF;
    }
    else
    {
      *p_m_pRwObject = (unsigned int)m_pRwObject | 0x2000000;
      if ( CClock::ms_nGameClockHours < 5u || CPostEffects::IsVisionFXActive() )
      {
        v9 = (float)((float)(unsigned __int16)rand() * 0.000015259) * 50.0;
        v10 = sinf((float)(CTimer::m_snTimeInMilliseconds & 0x1FFF) * 0.0007666);
        m_pMat = pEntity->m_pMat;
        v12 = (float)(v10 + 1.7) * 3.7;
        Coors = (CSimpleTransform *)&m_pMat->tx;
        if ( !m_pMat )
          Coors = &pEntity->m_transform;
        CCoronas::RegisterCorona(
          (u_native)v81,
          0,
          (int)v9 + 100,
          (unsigned int)(float)((float)((int)v9 + 100) * 0.7),
          (unsigned int)(float)((float)((int)v9 + 100) * 0.7),
          0xFFu,
          &Coors->m_translate,
          v12,
          100.0,
          1,
          0,
          0,
          0,
          0,
          0.0,
          0,
          1.5,
          0,
          15.0,
          0,
          0);
      }
    }
  }
  else
  {
    p_m_pRwObject = (int *)&pEntity[5].m_pRwObject;
    pEntity[5].m_pRwObject = (RwObject_0 *)((int)pEntity[5].m_pRwObject & 0xFDFFFFFF | (CPickup::PickUpShouldBeInvisible(v6) << 25));
  }
  v14 = *p_m_pRwObject;
  if ( (*p_m_pRwObject & 0x2000000) == 0 )
  {
    m_nModelIndex = pEntity->m_nModelIndex;
    if ( m_nModelIndex == MI_PICKUP_ADRENALINE )
    {
LABEL_17:
      v16 = 47;
LABEL_24:
      v17 = (v14 & 0xC) == 0;
      if ( (v14 & 0xC) == 0 )
        v17 = BYTE1(pEntity[5].m_pMat) == 0;
      if ( v17 && !HIWORD(pEntity[5].m_pMat) )
        goto LABEL_84;
      v18 = pEntity->m_pMat;
      p_tx = (CSimpleTransform *)&v18->tx;
      if ( !v18 )
        p_tx = &pEntity->m_transform;
      p_m_transform = (CSimpleTransform *)&TheCamera.m_pMat->tx;
      if ( !TheCamera.m_pMat )
        p_m_transform = &TheCamera.m_transform;
      if ( CPickups::NumMessages > 0xFu )
        goto LABEL_84;
      x = p_tx->m_translate.x;
      v22 = sqrtf(
              (float)((float)(p_m_transform->m_translate.x - p_tx->m_translate.x)
                    * (float)(p_m_transform->m_translate.x - p_tx->m_translate.x))
            + (float)((float)(p_m_transform->m_translate.y - p_tx->m_translate.y)
                    * (float)(p_m_transform->m_translate.y - p_tx->m_translate.y)));
      if ( v22 >= 14.0 )
        goto LABEL_84;
      In.y = p_tx->m_translate.y;
      In.x = x;
      In.z = p_tx->m_translate.z + 0.7;
      if ( CSprite::CalcScreenCoors(&In, &pResult, &pScaleX, &pScaleY, 1, 1) != 1 )
        goto LABEL_84;
      v23 = CPickups::NumMessages;
      CPickups::aMessages[CPickups::NumMessages].ScreenX = pResult.x;
      v24 = &CPickups::aMessages[v23];
      v24->ScreenY = pResult.y;
      v25 = pScaleY;
      v24->ScaleX = pScaleX;
      v24->ScaleY = v25;
      v26 = pEntity->m_nModelIndex;
      if ( MI_PICKUP_BODYARMOUR == v26 )
        goto LABEL_35;
      if ( MI_PICKUP_HEALTH == v26 )
        goto LABEL_39;
      if ( MI_PICKUP_ADRENALINE == v26 )
      {
LABEL_35:
        m_hashKey = 48;
        goto LABEL_40;
      }
      if ( v26 == -1 )
        goto LABEL_108;
      if ( v26 == 370 )
      {
LABEL_39:
        m_hashKey = 47;
        goto LABEL_40;
      }
      v48 = CModelInfo::ms_modelInfoPtrs[v26];
      if ( (*((int (__fastcall **)(CBaseModelInfo *))v48->_vptr$CBaseModelInfo + 5))(v48) != 4 )
LABEL_108:
        m_hashKey = 0;
      else
        m_hashKey = v48[1].m_hashKey;
LABEL_40:
      v28 = *(_WORD *)&aWeaponDisplay[v16].r;
      v29 = CPickups::NumMessages;
      b = aWeaponDisplay[v16].b;
      v31 = CPickups::NumMessages;
      v32 = &CPickups::aMessages[CPickups::NumMessages];
      v35 = *((_BYTE *)v32 + 24);
      v33 = (char *)v32 + 24;
      v34 = v35;
      *((_DWORD *)v33 - 4) = m_hashKey;
      *((_WORD *)v33 - 2) = v28;
      *(v33 - 2) = b;
      *(v33 - 1) = (unsigned int)(float)((float)((float)(v22 / -14.0) + 1.0) * 255.0);
      v36 = v35 & 0xFE;
      if ( ((int)pEntity[5].m_pRwObject & 8) != 0 )
        v36 = v34 | 1;
      *v33 = v36;
      v33[1] = BYTE1(pEntity[5].m_pMat);
      *((_DWORD *)v33 + 1) = 5 * HIWORD(pEntity[5].m_pMat);
      v37 = pEntity->m_nModelIndex;
      if ( v37 == MI_PICKUP_PROPERTY )
      {
        v38 = -1;
        v39 = CPickups::aPickUps;
        while ( !v39->Type || v39->pObject != pEntity )
        {
          ++v38;
          ++v39;
          if ( v38 >= 619 )
          {
            v39 = CPickups::aPickUps;
            break;
          }
        }
        v40 = (*((unsigned __int8 *)v39 + 29) >> 4) & 7;
        if ( v40 == 2 )
        {
          v42 = "PROP_4";
        }
        else if ( v40 == 1 )
        {
          InputType = CHID::GetInputType();
          v42 = "PROP_3";
          if ( InputType )
            v42 = "PROP_3X";
        }
        else
        {
          v42 = "FESZ_CA";
        }
        v49 = CText::Get(&TheText, (const unsigned __int8 *)v42);
        v29 = CPickups::NumMessages;
        v50 = &CPickups::aMessages[CPickups::NumMessages];
        v51 = *((_BYTE *)v50 + 24);
        v50->pGxtString = v49;
        v52 = v51 & 0xFD;
      }
      else
      {
        if ( v37 != MI_PICKUP_PROPERTY_FORSALE )
        {
          CPickups::aMessages[v31].pGxtString = 0;
          *v33 = v36 & 0xFD;
LABEL_83:
          CPickups::NumMessages = v29 + 1;
LABEL_84:
          v55 = 1.0;
          v56 = pEntity->m_nModelIndex;
          m_pColModel = CModelInfo::ms_modelInfoPtrs[v56]->m_pColModel;
          v1.n64_f32[0] = m_pColModel->m_boxBound.m_vecMax.y - m_pColModel->m_boxBound.m_vecMin.y;
          v2.n64_f32[0] = m_pColModel->m_boxBound.m_vecMax.z - m_pColModel->m_boxBound.m_vecMin.z;
          v3.n64_f32[0] = m_pColModel->m_boxBound.m_vecMax.x - m_pColModel->m_boxBound.m_vecMin.x;
          v58 = 1.2 / vmax_f32(v3, vmax_f32(v1, v2)).n64_f32[0];
          if ( v58 >= 1.0 )
            v55 = (float)((float)(v58 + -1.0) * 0.6) + 1.0;
          if ( (unsigned __int16)v56 == 362 )
            v55 = 1.2;
          v59 = (float)(CTimer::m_snTimeInMilliseconds & 0x7FF) * 0.0030566;
          v60 = cosf(v59);
          v61 = sinf(v59);
          v62 = pEntity->m_pMat;
          v63 = v60 * v55;
          if ( !v62 )
          {
            CPlaceable::AllocateMatrix(pEntity);
            CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
            v62 = pEntity->m_pMat;
          }
          v64 = v55 * v61;
          v62->xx = v63;
          v65 = pEntity->m_pMat;
          if ( !v65 )
          {
            CPlaceable::AllocateMatrix(pEntity);
            CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
            v65 = pEntity->m_pMat;
          }
          v65->yx = v64;
          v66 = pEntity->m_pMat;
          if ( !v66 )
          {
            CPlaceable::AllocateMatrix(pEntity);
            CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
            v66 = pEntity->m_pMat;
          }
          v67 = -v64;
          v66->zx = 0.0;
          v68 = pEntity->m_pMat;
          if ( !v68 )
          {
            CPlaceable::AllocateMatrix(pEntity);
            CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
            v68 = pEntity->m_pMat;
          }
          v68->xy = v67;
          v69 = pEntity->m_pMat;
          if ( !v69 )
          {
            CPlaceable::AllocateMatrix(pEntity);
            CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
            v69 = pEntity->m_pMat;
          }
          v69->yy = v63;
          v70 = pEntity->m_pMat;
          if ( !v70 )
          {
            CPlaceable::AllocateMatrix(pEntity);
            CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
            v70 = pEntity->m_pMat;
          }
          v70->zy = 0.0;
          v71 = pEntity->m_pMat;
          if ( !v71 )
          {
            CPlaceable::AllocateMatrix(pEntity);
            CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
            v71 = pEntity->m_pMat;
          }
          v71->xz = 0.0;
          v72 = pEntity->m_pMat;
          if ( !v72 )
          {
            CPlaceable::AllocateMatrix(pEntity);
            CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
            v72 = pEntity->m_pMat;
          }
          v72->yz = 0.0;
          v73 = pEntity->m_pMat;
          if ( !v73 )
          {
            CPlaceable::AllocateMatrix(pEntity);
            CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
            v73 = pEntity->m_pMat;
          }
          v73->zz = v55;
          return;
        }
        v43 = -1;
        v44 = CPickups::aPickUps;
        while ( !v44->Type || v44->pObject != pEntity )
        {
          ++v43;
          ++v44;
          if ( v43 >= 619 )
          {
            v44 = CPickups::aPickUps;
            break;
          }
        }
        v45 = (*((unsigned __int8 *)v44 + 29) >> 4) & 7;
        if ( v45 == 2 )
        {
          v47 = "PROP_4";
        }
        else if ( v45 == 1 )
        {
          v46 = CHID::GetInputType();
          v47 = "PROP_3";
          if ( v46 )
            v47 = "PROP_3X";
        }
        else
        {
          v47 = "FESZ_CA";
        }
        v53 = CText::Get(&TheText, (const unsigned __int8 *)v47);
        v29 = CPickups::NumMessages;
        v50 = &CPickups::aMessages[CPickups::NumMessages];
        v54 = *((_BYTE *)v50 + 24);
        v50->pGxtString = v53;
        v52 = v54 | 2;
      }
      *((_BYTE *)v50 + 24) = v52;
      goto LABEL_83;
    }
    if ( m_nModelIndex == MI_PICKUP_BODYARMOUR )
    {
      v16 = 48;
      goto LABEL_24;
    }
    if ( m_nModelIndex == MI_PICKUP_BRIBE || m_nModelIndex == MI_PICKUP_INFO || m_nModelIndex == MI_PICKUP_KILLFRENZY )
      goto LABEL_23;
    if ( m_nModelIndex == MI_PICKUP_HEALTH || m_nModelIndex == MI_PICKUP_BONUS )
      goto LABEL_17;
    if ( m_nModelIndex == MI_PICKUP_PROPERTY )
      goto LABEL_23;
    if ( m_nModelIndex == MI_PICKUP_PROPERTY_FORSALE )
      goto LABEL_17;
    if ( m_nModelIndex == MI_PICKUP_REVENUE )
    {
      v16 = 53;
      goto LABEL_24;
    }
    if ( m_nModelIndex == MI_PICKUP_SAVEGAME )
    {
LABEL_23:
      v16 = 0;
      goto LABEL_24;
    }
    if ( m_nModelIndex == MI_PICKUP_CLOTHES )
      goto LABEL_17;
    if ( m_nModelIndex != -1 )
    {
      if ( m_nModelIndex == 370 )
      {
        LOWORD(v74) = 47;
LABEL_117:
        v14 = *p_m_pRwObject;
        v16 = (__int16)v74;
        goto LABEL_24;
      }
      v75 = CModelInfo::ms_modelInfoPtrs[m_nModelIndex];
      if ( (*((int (__fastcall **)(CBaseModelInfo *))v75->_vptr$CBaseModelInfo + 5))(v75) == 4 )
      {
        v74 = v75[1].m_hashKey;
        goto LABEL_117;
      }
    }
    LOWORD(v74) = 0;
    goto LABEL_117;
  }
}
// 3201D6: variable 'v3' is possibly undefined
// 3201D2: variable 'v1' is possibly undefined
// 3201D2: variable 'v2' is possibly undefined

//----- (00320468) --------------------------------------------------------
CPickup *__fastcall CPickups::FindPickUpForThisObject(CObject *pObj)
{
  int v2; // r2
  CPickup *result; // r0

  v2 = -1;
  for ( result = CPickups::aPickUps; !result->Type || result->pObject != pObj; ++result )
  {
    if ( ++v2 >= 619 )
      return CPickups::aPickUps;
  }
  return result;
}

//----- (003204A4) --------------------------------------------------------
void __fastcall CPickups::DoCollectableEffects(CEntity *pEntity)
{
  CMatrix *m_pMat; // r8
  CSimpleTransform *p_m_transform; // r9
  CSimpleTransform *p_tx; // r1
  __int64 v5; // d16
  CSimpleTransform *v6; // r1
  float v7; // s0
  float32x2_t v8; // d16
  unsigned __int64 v9; // d1
  float v10; // s18
  unsigned int v11; // s0
  float v12; // r6
  float v13; // r5
  float v14; // r6
  CMatrix *v15; // r0
  CMatrix *v16; // r0
  CMatrix *v17; // r0
  CMatrix *v18; // r0
  CMatrix *v19; // r0
  CMatrix *v20; // r0
  CMatrix *v21; // r0
  CMatrix *v22; // r0
  __int64 Brightness; // [sp+10h] [bp-70h]
  __int64 FlareType; // [sp+18h] [bp-68h]
  CVector pCoors; // [sp+48h] [bp-38h] BYREF

  m_pMat = pEntity->m_pMat;
  p_m_transform = &pEntity->m_transform;
  p_tx = &pEntity->m_transform;
  if ( m_pMat )
    p_tx = (CSimpleTransform *)&m_pMat->tx;
  v5 = *(_QWORD *)&p_tx->m_translate.x;
  pCoors.z = p_tx->m_translate.z;
  *(_QWORD *)&pCoors.x = v5;
  v6 = (CSimpleTransform *)&TheCamera.m_pMat->tx;
  v7 = *(float *)&v5;
  if ( !TheCamera.m_pMat )
    v6 = &TheCamera.m_transform;
  v8.n64_u64[0] = vsub_f32(*(float32x2_t *)&v6->m_translate.y, *(float32x2_t *)&pCoors.y).n64_u64[0];
  v9 = vmul_f32(v8, v8).n64_u64[0];
  v10 = sqrtf(
          (float)((float)((float)(v6->m_translate.x - v7) * (float)(v6->m_translate.x - v7)) + *(float *)&v9)
        + *((float *)&v9 + 1));
  if ( v10 < 14.0 )
  {
    LODWORD(Brightness) = 0;
    v11 = (unsigned int)(float)((float)((float)((float)(14.0 - v10)
                                              * (float)((float)(sinf(
                                                                  (float)(((_WORD)CTimer::m_snTimeInMilliseconds
                                                                         + (_WORD)pEntity) & 0x7FF)
                                                                * 0.0030664)
                                                              * 0.5)
                                                      + 0.5))
                                      / 14.0)
                              * 255.0);
    HIDWORD(FlareType) = v11;
    HIDWORD(Brightness) = v11;
    LODWORD(FlareType) = v11;
    CShadows::StoreStaticShadow(
      (u_native)pEntity,
      2u,
      gpShadowExplosionTex,
      &pCoors,
      2.0,
      0.0,
      0.0,
      -2.0,
      Brightness,
      FlareType,
      4.0,
      1.0,
      40.0,
      0,
      0.0);
    CCoronas::RegisterCorona(
      (u_native)pEntity,
      0,
      v11,
      v11,
      v11,
      0xFFu,
      &pCoors,
      0.6,
      40.0,
      9,
      0,
      0,
      0,
      0,
      0.0,
      0,
      1.5,
      0,
      15.0,
      0,
      0);
    m_pMat = pEntity->m_pMat;
  }
  v12 = (float)(CTimer::m_snTimeInMilliseconds & 0xFFF) * 0.0015283;
  v13 = cosf(v12);
  v14 = sinf(v12);
  if ( !m_pMat )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    m_pMat = pEntity->m_pMat;
  }
  m_pMat->xx = v13;
  v15 = pEntity->m_pMat;
  if ( !v15 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v15 = pEntity->m_pMat;
  }
  v15->yx = v14;
  v16 = pEntity->m_pMat;
  if ( !v16 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v16 = pEntity->m_pMat;
  }
  v16->zx = 0.0;
  v17 = pEntity->m_pMat;
  if ( !v17 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v17 = pEntity->m_pMat;
  }
  v17->xy = -v14;
  v18 = pEntity->m_pMat;
  if ( !v18 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v18 = pEntity->m_pMat;
  }
  v18->yy = v13;
  v19 = pEntity->m_pMat;
  if ( !v19 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v19 = pEntity->m_pMat;
  }
  v19->zy = 0.0;
  v20 = pEntity->m_pMat;
  if ( !v20 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v20 = pEntity->m_pMat;
  }
  v20->xz = 0.0;
  v21 = pEntity->m_pMat;
  if ( !v21 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v21 = pEntity->m_pMat;
  }
  v21->yz = 0.0;
  v22 = pEntity->m_pMat;
  if ( !v22 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v22 = pEntity->m_pMat;
  }
  v22->zz = 1.0;
}

//----- (00320744) --------------------------------------------------------
void __fastcall CPickups::DoMoneyEffects(CEntity *pEntity)
{
  float v2; // r5
  float v3; // r6
  float v4; // r5
  CMatrix *m_pMat; // r0
  CMatrix *v6; // r0
  CMatrix *v7; // r0
  CMatrix *v8; // r0
  CMatrix *v9; // r0
  CMatrix *v10; // r0
  CMatrix *v11; // r0
  CMatrix *v12; // r0
  CMatrix *v13; // r0

  v2 = (float)(CTimer::m_snTimeInMilliseconds & 0x7FF) * 0.0030566;
  v3 = cosf(v2);
  v4 = sinf(v2);
  m_pMat = pEntity->m_pMat;
  if ( !m_pMat )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
    m_pMat = pEntity->m_pMat;
  }
  m_pMat->xx = v3;
  v6 = pEntity->m_pMat;
  if ( !v6 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
    v6 = pEntity->m_pMat;
  }
  v6->yx = v4;
  v7 = pEntity->m_pMat;
  if ( !v7 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
    v7 = pEntity->m_pMat;
  }
  v7->zx = 0.0;
  v8 = pEntity->m_pMat;
  if ( !v8 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
    v8 = pEntity->m_pMat;
  }
  v8->xy = -v4;
  v9 = pEntity->m_pMat;
  if ( !v9 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
    v9 = pEntity->m_pMat;
  }
  v9->yy = v3;
  v10 = pEntity->m_pMat;
  if ( !v10 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
    v10 = pEntity->m_pMat;
  }
  v10->zy = 0.0;
  v11 = pEntity->m_pMat;
  if ( !v11 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
    v11 = pEntity->m_pMat;
  }
  v11->xz = 0.0;
  v12 = pEntity->m_pMat;
  if ( !v12 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
    v12 = pEntity->m_pMat;
  }
  v12->yz = 0.0;
  v13 = pEntity->m_pMat;
  if ( !v13 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(&pEntity->m_transform, pEntity->m_pMat);
    v13 = pEntity->m_pMat;
  }
  v13->zz = 1.0;
}

//----- (00320878) --------------------------------------------------------
void __fastcall CPickups::DoMineEffects(CEntity *pEntity)
{
  CMatrix *m_pMat; // r8
  CSimpleTransform *p_m_transform; // r9
  CSimpleTransform *p_tx; // r1
  __int64 v5; // d16
  CSimpleTransform *v6; // r1
  float v7; // s0
  float32x2_t v8; // d16
  unsigned __int64 v9; // d1
  float v10; // s18
  unsigned int v11; // s0
  float v12; // r6
  float v13; // r5
  float v14; // r6
  CMatrix *v15; // r0
  CMatrix *v16; // r0
  CMatrix *v17; // r0
  CMatrix *v18; // r0
  CMatrix *v19; // r0
  CMatrix *v20; // r0
  CMatrix *v21; // r0
  CMatrix *v22; // r0
  __int64 Brightness; // [sp+10h] [bp-70h]
  CVector pCoors; // [sp+48h] [bp-38h] BYREF

  m_pMat = pEntity->m_pMat;
  p_m_transform = &pEntity->m_transform;
  p_tx = &pEntity->m_transform;
  if ( m_pMat )
    p_tx = (CSimpleTransform *)&m_pMat->tx;
  v5 = *(_QWORD *)&p_tx->m_translate.x;
  pCoors.z = p_tx->m_translate.z;
  *(_QWORD *)&pCoors.x = v5;
  v6 = (CSimpleTransform *)&TheCamera.m_pMat->tx;
  v7 = *(float *)&v5;
  if ( !TheCamera.m_pMat )
    v6 = &TheCamera.m_transform;
  v8.n64_u64[0] = vsub_f32(*(float32x2_t *)&v6->m_translate.y, *(float32x2_t *)&pCoors.y).n64_u64[0];
  v9 = vmul_f32(v8, v8).n64_u64[0];
  v10 = sqrtf(
          (float)((float)((float)(v6->m_translate.x - v7) * (float)(v6->m_translate.x - v7)) + *(float *)&v9)
        + *((float *)&v9 + 1));
  if ( v10 < 20.0 )
  {
    LODWORD(Brightness) = 0;
    v11 = (unsigned int)(float)((float)((float)((float)(20.0 - v10)
                                              * (float)((float)(sinf(
                                                                  (float)(((_WORD)CTimer::m_snTimeInMilliseconds
                                                                         + (_WORD)pEntity) & 0x1FF)
                                                                * 0.012266)
                                                              * 0.5)
                                                      + 0.5))
                                      / 20.0)
                              * 64.0);
    HIDWORD(Brightness) = v11;
    CShadows::StoreStaticShadow(
      (u_native)pEntity,
      2u,
      gpShadowExplosionTex,
      &pCoors,
      2.0,
      0.0,
      0.0,
      -2.0,
      Brightness,
      0LL,
      4.0,
      1.0,
      40.0,
      0,
      0.0);
    CCoronas::RegisterCorona(
      (u_native)pEntity,
      0,
      v11,
      0,
      0,
      0xFFu,
      &pCoors,
      0.6,
      60.0,
      9,
      0,
      0,
      0,
      0,
      0.0,
      0,
      1.5,
      0,
      15.0,
      0,
      0);
    m_pMat = pEntity->m_pMat;
  }
  v12 = (float)(CTimer::m_snTimeInMilliseconds & 0x3FF) * 0.0061133;
  v13 = cosf(v12);
  v14 = sinf(v12);
  if ( !m_pMat )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    m_pMat = pEntity->m_pMat;
  }
  m_pMat->xx = v13;
  v15 = pEntity->m_pMat;
  if ( !v15 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v15 = pEntity->m_pMat;
  }
  v15->yx = v14;
  v16 = pEntity->m_pMat;
  if ( !v16 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v16 = pEntity->m_pMat;
  }
  v16->zx = 0.0;
  v17 = pEntity->m_pMat;
  if ( !v17 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v17 = pEntity->m_pMat;
  }
  v17->xy = -v14;
  v18 = pEntity->m_pMat;
  if ( !v18 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v18 = pEntity->m_pMat;
  }
  v18->yy = v13;
  v19 = pEntity->m_pMat;
  if ( !v19 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v19 = pEntity->m_pMat;
  }
  v19->zy = 0.0;
  v20 = pEntity->m_pMat;
  if ( !v20 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v20 = pEntity->m_pMat;
  }
  v20->xz = 0.0;
  v21 = pEntity->m_pMat;
  if ( !v21 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v21 = pEntity->m_pMat;
  }
  v21->yz = 0.0;
  v22 = pEntity->m_pMat;
  if ( !v22 )
  {
    CPlaceable::AllocateMatrix(pEntity);
    CSimpleTransform::UpdateMatrix(p_m_transform, pEntity->m_pMat);
    v22 = pEntity->m_pMat;
  }
  v22->zz = 1.0;
}

//----- (00320B1C) --------------------------------------------------------
void CPickups::RenderPickUpText()
{
  float32x2_t v0; // d0
  float32x2_t v1; // d1
  __int64 v2; // d8
  UInt16 v3; // r0
  int v4; // r9
  GxtChar **i; // r6
  GxtChar *v6; // r4
  CRGBA v7; // r0
  CRGBA v8; // [sp+1Ch] [bp-34h] BYREF
  __int64 v9; // [sp+20h] [bp-30h]

  v3 = CPickups::NumMessages;
  if ( CPickups::NumMessages )
  {
    v9 = v2;
    v4 = 0;
    for ( i = &CPickups::aMessages[0].pGxtString; !*(i - 1); i += 9 )
    {
      v6 = *i;
      if ( *i )
      {
        if ( (*(_BYTE *)(i - 2) & 2) != 0 )
        {
          CMessages::InsertNumberInString(v6, 0, 0, 0, 0, 0, 0, gGxtString);
          v6 = gGxtString;
        }
        goto LABEL_8;
      }
LABEL_9:
      if ( (__int16)++v4 >= (int)v3 )
      {
        CPickups::NumMessages = 0;
        return;
      }
    }
    sprintf(gString, (const unsigned __int8 *)&off_320C88);
    AsciiToGxtChar(gString, gGxtString);
    v6 = gGxtString;
LABEL_8:
    CFont::SetProportional(1u);
    CFont::SetBackground(0, 0);
    v0.n64_f32[0] = *((float *)i - 4) / 30.0;
    v1.n64_f32[0] = (float)(RsGlobal.screenWidth / 640);
    v0.n64_u64[0] = vmin_f32(v0, v1).n64_u64[0];
    CFont::SetScale(v0.n64_f32[0]);
    CFont::SetOrientation(0);
    CFont::SetCentreSize((float)RsGlobal.screenWidth);
    CRGBA::CRGBA(&v8, *((_BYTE *)i - 12), *((_BYTE *)i - 11), *((_BYTE *)i - 10), *((_BYTE *)i - 9));
    CFont::SetColor(v7);
    CFont::SetFontStyle(3u);
    CFont::PrintString(*((float *)i - 8), *((float *)i - 7), v6);
    v3 = CPickups::NumMessages;
    goto LABEL_9;
  }
}
// 320B34: variable 'v2' is possibly undefined
// 320BF8: variable 'v0' is possibly undefined
// 320BF8: variable 'v1' is possibly undefined
// 320C36: variable 'v7' is possibly undefined
// 320C88: using guessed type void *off_320C88;

//----- (00320CA0) --------------------------------------------------------
void __fastcall CPickups::RemoveUnnecessaryPickups(const CVector *Centre, float Radius)
{
  int16x4_t v2; // d16
  float32x2_t *p_y; // r2
  int v5; // r10
  int v6; // r11
  CPickup *v7; // r5
  int Type; // r1
  bool v9; // zf
  float CoorsX; // s0
  unsigned __int64 v11; // d1
  CPickup *v12; // r6
  const CVector *v13; // r5
  float32x2_t *v14; // r4
  CPickup *v15; // r9
  CObject *pObject; // r0
  CObject *v17; // r0

  p_y = (float32x2_t *)&Centre->y;
  v5 = 0;
  v6 = 0;
  v7 = CPickups::aPickUps;
  do
  {
    Type = CPickups::aPickUps[v5].Type;
    v9 = Type == 8;
    if ( Type != 8 )
      v9 = Type == 4;
    if ( v9 )
    {
      CoorsX = (float)v7[v5].CoorsX;
      v2.n64_u32[0] = *(_DWORD *)&v7[v5].CoorsY;
      v2.n64_u64[0] = vsub_f32(
                        vmul_f32(vcvt_f32_s32((int32x2_t)vmovl_s16(v2).n128_u64[0]), (float32x2_t)0x3E0000003E000000LL),
                        (float32x2_t)p_y->n64_u64[0]).n64_u64[0];
      v11 = vmul_f32(v2, v2).n64_u64[0];
      if ( sqrtf(
             (float)((float)((float)((float)(CoorsX * 0.125) - Centre->x) * (float)((float)(CoorsX * 0.125) - Centre->x))
                   + *(float *)&v11)
           + *((float *)&v11 + 1)) < Radius )
      {
        v12 = v7;
        v13 = Centre;
        v14 = p_y;
        v15 = &CPickups::aPickUps[v5];
        CRadar::ClearBlipForEntity(BLIPTYPE_PICKUP, v6 | (CPickups::aPickUps[v5].ReferenceIndex << 16));
        pObject = CPickups::aPickUps[v5].pObject;
        if ( pObject )
        {
          CWorld::Remove(pObject);
          v17 = v15->pObject;
          if ( v17 )
            (*((void (__fastcall **)(CObject *))v17->_vptr$CPlaceable + 1))(v17);
          v15->pObject = 0;
        }
        p_y = v14;
        CPickups::aPickUps[v5].Type = 0;
        *((_BYTE *)&CPickups::aPickUps[v5] + 29) |= 1u;
        Centre = v13;
        v7 = v12;
      }
    }
    ++v5;
    ++v6;
  }
  while ( v5 != 620 );
}
// 320D14: variable 'v2' is possibly undefined

//----- (00320DD0) --------------------------------------------------------
void __fastcall CPed::CreateDeadPedMoney(CPed *this)
{
  unsigned int m_nPedType; // r0
  unsigned int m_MoneyCarried; // r3
  CMatrix *m_pMat; // r0
  CSimpleTransform *p_tx; // r2

  if ( CLocalisation::StealFromDeadPed() )
  {
    m_nPedType = this->m_nPedType;
    if ( m_nPedType > 0x13 || ((1 << m_nPedType) & 0xC0040) == 0 )
    {
      if ( this->CharCreatedBy ^ 2 | *((_DWORD *)&this->m_nPedFlags + 1) & 0x20000 )
      {
        if ( (*(_DWORD *)&this->m_nPedFlags & 0x100) == 0 )
        {
          m_MoneyCarried = this->m_MoneyCarried;
          if ( m_MoneyCarried >= 0xA )
          {
            m_pMat = this->m_pMat;
            p_tx = (CSimpleTransform *)&m_pMat->tx;
            if ( !m_pMat )
              p_tx = &this->m_transform;
            CPickups::CreateSomeMoney(p_tx->m_translate.x, p_tx->m_translate.y, p_tx->m_translate.z, m_MoneyCarried);
            this->m_MoneyCarried = 0;
          }
        }
      }
    }
  }
}

//----- (00320E40) --------------------------------------------------------
void __fastcall CPickups::CreateSomeMoney(float a1, float a2, float a3, Int32 Amount)
{
  int v7; // r8
  int v8; // r9
  unsigned __int8 v9; // r0
  float v10; // r6
  unsigned __int8 v11; // r0
  float GroundZFor3DCoord; // s0
  UInt32 v13; // r6
  char v14; // r0
  UInt32 v15; // [sp+4h] [bp-5Ch]
  int v16; // [sp+18h] [bp-48h]
  bool pBool; // [sp+1Fh] [bp-41h] BYREF
  CVector v18; // 0:r0.12

  v7 = Amount / 20 + 1;
  if ( v7 >= 7 )
    v7 = 7;
  v16 = Amount / v7;
  if ( Amount >= -19 )
  {
    v8 = 0;
    do
    {
      v9 = rand();
      v10 = sinf((float)v9 * 0.024544);
      v11 = rand();
      a1 = (float)(v10 * 1.5) + a1;
      a2 = (float)(cosf((float)v11 * 0.024544) * 1.5) + a2;
      GroundZFor3DCoord = CWorld::FindGroundZFor3DCoord(a1, a2, a3, &pBool, 0);
      a3 = GroundZFor3DCoord + 0.5;
      if ( pBool )
      {
        v13 = MI_MONEY;
        v14 = rand();
        v18.z = GroundZFor3DCoord + 0.5;
        v15 = (v14 & 3) + v16;
        *(_QWORD *)&v18.x = __PAIR64__(LODWORD(a2), LODWORD(a1));
        CPickups::GenerateNewOne(v18, v13, 8, v15, 0, 0, 0);
      }
      ++v8;
    }
    while ( v8 < v7 );
  }
}

//----- (00320F70) --------------------------------------------------------
void __fastcall CPed::CreateDeadPedWeaponPickups(CPed *this)
{
  int16x4_t v1; // d16
  int i; // r9
  char *v4; // r5
  int v5; // r0
  bool v6; // zf
  eWeaponType *v7; // r6
  CMatrix *m_pMat; // r0
  UInt32 *v9; // r5
  CSimpleTransform *p_tx; // r2
  float v11; // s24
  float32x2_t v12; // d13
  signed int v13; // r5
  unsigned int v14; // r11
  CWeaponInfo *WeaponInfo; // r0
  int v16; // r2
  int32 m_modelId; // r0
  Int16 *p_CoorsX; // r1
  int v19; // r3
  bool v20; // zf
  unsigned __int64 v21; // d1
  eWeaponType v22; // r0
  unsigned int v23; // r1
  UInt32 v24; // r5
  int v25; // r6
  int32 v26; // r3
  int v27; // r0
  float *pResultY; // [sp+0h] [bp-98h]
  CPedFlags *p_m_nPedFlags; // [sp+18h] [bp-80h]
  UInt32 *v30; // [sp+34h] [bp-64h]
  float pResultX; // [sp+3Ch] [bp-5Ch] BYREF
  float v32; // [sp+40h] [bp-58h] BYREF
  float pResultZ[21]; // [sp+44h] [bp-54h] BYREF
  CVector v34; // 0:r0.12

  if ( !(*(_DWORD *)&this->m_nPedFlags & 0x100 | *((_DWORD *)&this->m_nPedFlags + 2) & 0x200) )
  {
    p_m_nPedFlags = &this->m_nPedFlags;
    for ( i = 0; i != 13; ++i )
    {
      v4 = (char *)this + 28 * i;
      v5 = *((_DWORD *)v4 + 361);
      v6 = v5 == 0;
      if ( v5 )
        v6 = v5 == 40;
      if ( !v6 )
      {
        v7 = (eWeaponType *)(v4 + 1444);
        if ( *((_DWORD *)v4 + 364) || CWeapon::IsTypeMelee((const CWeapon *)(v4 + 1444)) )
        {
          m_pMat = this->m_pMat;
          v9 = (UInt32 *)(v4 + 1456);
          p_tx = (CSimpleTransform *)&m_pMat->tx;
          if ( !m_pMat )
            p_tx = &this->m_transform;
          CPickups::CreatePickupCoorsCloseToCoors(
            p_tx->m_translate.x,
            p_tx->m_translate.y,
            p_tx->m_translate.z,
            &pResultX,
            &v32,
            pResultZ);
          v12.n64_f32[0] = v32;
          v11 = pResultX;
          v12.n64_f32[1] = pResultZ[0] + 0.3;
          pResultZ[0] = pResultZ[0] + 0.3;
          v30 = v9;
          v13 = *v9;
          v14 = AmmoForWeapon_OnStreet[*v7];
          WeaponInfo = CWeaponInfo::GetWeaponInfo(*v7, 1);
          v16 = -1;
          if ( v13 >= (int)(v14 >> 1) )
            v13 = v14 >> 1;
          m_modelId = WeaponInfo->m_modelId;
          p_CoorsX = &CPickups::aPickUps[0].CoorsX;
          do
          {
            v19 = *((unsigned __int8 *)p_CoorsX + 12);
            v20 = v19 == 4;
            if ( v19 == 4 )
              v20 = m_modelId == (unsigned __int16)p_CoorsX[4];
            if ( v20 )
            {
              v1.n64_u32[0] = *(_DWORD *)(p_CoorsX + 1);
              v1.n64_u64[0] = vsub_f32(
                                vmul_f32(
                                  vcvt_f32_s32((int32x2_t)vmovl_s16(v1).n128_u64[0]),
                                  (float32x2_t)0x3E0000003E000000LL),
                                v12).n64_u64[0];
              v21 = vmul_f32(v1, v1).n64_u64[0];
              if ( sqrtf(
                     (float)((float)((float)((float)((float)*p_CoorsX * 0.125) - v11)
                                   * (float)((float)((float)*p_CoorsX * 0.125) - v11))
                           + *(float *)&v21)
                   + *((float *)&v21 + 1)) < 5.5 )
              {
                *((_DWORD *)p_CoorsX - 2) += v13;
                goto LABEL_26;
              }
            }
            ++v16;
            p_CoorsX += 16;
          }
          while ( v16 < 619 );
          v22 = *v7;
          v23 = AmmoForWeapon_OnStreet[*v7];
          v24 = *v30;
          v25 = *((_DWORD *)p_m_nPedFlags + 3);
          if ( (int)*v30 >= (int)(v23 >> 1) )
            v24 = v23 >> 1;
          v26 = CWeaponInfo::GetWeaponInfo(v22, 1)->m_modelId;
          if ( (v25 & 0x80000) != 0 )
            v27 = 22;
          else
            v27 = 4;
          pResultY = (float *)v27;
          *(_QWORD *)&v34.x = __PAIR64__(v12.n64_u32[0], LODWORD(v11));
          LODWORD(v34.z) = v12.n64_u32[1];
          CPickups::GenerateNewOne(v34, v26, (int)pResultY, v24, 0, 0, 0);
        }
      }
LABEL_26:
      ;
    }
    CPed::ClearWeapons(this);
  }
}
// 321096: variable 'v1' is possibly undefined
// 320F70: using guessed type float var_54[21];

//----- (00321158) --------------------------------------------------------
void __fastcall CPed::CreateDeadPedPickupCoors(CPed *this, float *pResultX, float *pResultY, float *pResultZ)
{
  CMatrix *m_pMat; // r1
  CSimpleTransform *p_tx; // lr

  m_pMat = this->m_pMat;
  p_tx = (CSimpleTransform *)&m_pMat->tx;
  if ( !m_pMat )
    p_tx = &this->m_transform;
  CPickups::CreatePickupCoorsCloseToCoors(
    p_tx->m_translate.x,
    p_tx->m_translate.y,
    p_tx->m_translate.z,
    pResultX,
    pResultY,
    pResultZ);
}

//----- (00321184) --------------------------------------------------------
void __fastcall CPickups::CreatePickupCoorsCloseToCoors(
        float InX,
        float InY,
        float InZ,
        float *pResultX,
        float *pResultY,
        float *pResultZ)
{
  int16x4_t v6; // d16
  float v7; // s22
  int i; // r5
  float v11; // r4
  float v12; // s27
  float32x2_t v13; // d14
  float GroundZFor3DCoord; // r0
  float v15; // s6
  float v16; // s6
  float x; // s16
  float v18; // s23
  float y; // s19
  int v20; // r1
  Int16 *p_CoorsX; // r0
  unsigned __int64 v22; // d1
  CVector v26; // [sp+34h] [bp-ACh] BYREF
  CVector v27; // [sp+40h] [bp-A0h] BYREF
  CVector v28; // [sp+4Ch] [bp-94h] BYREF
  CVector v29; // [sp+58h] [bp-88h] BYREF
  bool pBool; // [sp+67h] [bp-79h] BYREF
  CVector vecStart; // [sp+68h] [bp-78h] BYREF
  CVector vecEnd; // [sp+74h] [bp-6Ch] BYREF
  CVector v33; // 0:r0.12

  v7 = InZ + 0.3;
  for ( i = 0; ; ++i )
  {
    v11 = (float)(unsigned __int8)rand() * 0.024544;
    v12 = (float)(sinf(v11) * 1.5) + InX;
    v13.n64_f32[0] = (float)(cosf(v11) * 1.5) + InY;
    GroundZFor3DCoord = CWorld::FindGroundZFor3DCoord(v12, v13.n64_f32[0], InZ, &pBool, 0);
    if ( !pBool )
      goto LABEL_6;
    vecEnd.y = InY;
    vecEnd.z = v7;
    vecEnd.x = InX;
    v13.n64_f32[1] = GroundZFor3DCoord + 0.5;
    v15 = sqrtf(
            (float)((float)((float)(v12 - InX) * (float)(v12 - InX))
                  + (float)((float)(v13.n64_f32[0] - InY) * (float)(v13.n64_f32[0] - InY)))
          + (float)((float)(v13.n64_f32[1] - v7) * (float)(v13.n64_f32[1] - v7)));
    v16 = (float)(v15 + 0.4) / v15;
    vecStart.y = (float)((float)(v13.n64_f32[0] - InY) * v16) + InY;
    vecStart.z = v7 + (float)((float)((float)(GroundZFor3DCoord + 0.5) - v7) * v16);
    vecStart.x = (float)((float)(v12 - InX) * v16) + InX;
    FindPlayerCoors(&v29, -1);
    x = v29.x;
    FindPlayerCoors(&v28, -1);
    v18 = v28.x;
    FindPlayerCoors(&v27, -1);
    y = v27.y;
    FindPlayerCoors(&v26, -1);
    if ( i <= 16
      && sqrtf(
           (float)((float)(v12 - x) * (float)(v12 - v18))
         + (float)((float)(v13.n64_f32[0] - y) * (float)(v13.n64_f32[0] - v26.y))) <= 2.0 )
    {
      goto LABEL_6;
    }
    if ( i > 16 )
      break;
    v20 = -1;
    p_CoorsX = &CPickups::aPickUps[0].CoorsX;
    while ( 1 )
    {
      v6.n64_u32[0] = *(_DWORD *)(p_CoorsX + 1);
      v6.n64_u64[0] = vsub_f32(
                        vmul_f32(vcvt_f32_s32((int32x2_t)vmovl_s16(v6).n128_u64[0]), (float32x2_t)0x3E0000003E000000LL),
                        v13).n64_u64[0];
      v22 = vmul_f32(v6, v6).n64_u64[0];
      if ( sqrtf(
             (float)((float)((float)((float)((float)*p_CoorsX * 0.125) - v12)
                           * (float)((float)((float)*p_CoorsX * 0.125) - v12))
                   + *(float *)&v22)
           + *((float *)&v22 + 1)) < 1.3 )
        break;
      ++v20;
      p_CoorsX += 16;
      if ( v20 > 618 )
        goto LABEL_2;
    }
LABEL_6:
    if ( i > 30 )
    {
      v13.n64_f32[1] = InZ + 0.4;
      *pResultX = InX;
      *pResultY = InY;
      goto LABEL_18;
    }
LABEL_7:
    ;
  }
LABEL_2:
  if ( !CWorld::GetIsLineOfSightClear(&vecStart, &vecEnd, 1, i < 16, 0, i < 16, 0, 0, 0) )
    goto LABEL_6;
  if ( i <= 16 )
  {
    LODWORD(v33.z) = v13.n64_u32[1];
    *(_QWORD *)&v33.x = __PAIR64__(v13.n64_u32[0], LODWORD(v12));
    if ( CWorld::TestSphereAgainstWorld(v33, 1.2, 0, 0, 1, 0, 0, 0, 0) )
      goto LABEL_7;
  }
  *pResultX = v12;
  *pResultY = v13.n64_f32[0];
LABEL_18:
  *pResultZ = v13.n64_f32[1];
}
// 321390: variable 'v6' is possibly undefined

//----- (0032141C) --------------------------------------------------------
int __fastcall CPickups::TestForPickupsInBubble(CVector TestCoors, float Radius)
{
  float x; // s4
  float y; // s2
  float v4; // s10
  float v5; // s12
  float v6; // s14

  x = TestCoors.x;
  y = TestCoors.y;
  TestCoors.y = NAN;
  LODWORD(TestCoors.x) = &CPickups::aPickUps[0].CoorsX;
  while ( 1 )
  {
    v4 = (float)((float)*(__int16 *)(LODWORD(TestCoors.x) + 2) * 0.125) - y;
    v5 = (float)((float)(__int16)*(_WORD *)LODWORD(TestCoors.x) * 0.125) - x;
    v6 = (float)((float)*(__int16 *)(LODWORD(TestCoors.x) + 4) * 0.125) - TestCoors.z;
    if ( sqrtf((float)((float)(v5 * v5) + (float)(v4 * v4)) + (float)(v6 * v6)) < Radius )
      break;
    ++LODWORD(TestCoors.y);
    LODWORD(TestCoors.x) += 32;
    if ( SLODWORD(TestCoors.y) > 618 )
      return 0;
  }
  return 1;
}

//----- (003214BC) --------------------------------------------------------
void CPickups::PickedUpOyster()
{
  float StatValue; // s16
  float v1; // s16
  float v2; // r0

  CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 13, 0.0, 1.0);
  CStats::IncrementStat(0xF3u, 1.0);
  CWorld::Players[0].Score += 100;
  StatValue = CStats::GetStatValue(0xF3u);
  if ( StatValue == CStats::GetStatValue(0xF4u) )
  {
    CGarages::TriggerMessage("OY_ALL", -1, 0x1388u, -1);
    CWorld::Players[0].Score += 100000;
  }
  else
  {
    v1 = CStats::GetStatValue(0xF3u);
    v2 = CStats::GetStatValue(0xF4u);
    sub_19BFB0("OY_ONE", (int)v1, 0x1388u, (int)v2);
  }
}

//----- (00321590) --------------------------------------------------------
void CPickups::PickedUpHorseShoe()
{
  float StatValue; // r0
  float v1; // s16
  float v2; // s16
  float v3; // r0

  CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 13, 0.0, 1.0);
  CStats::IncrementStat(0xF1u, 1.0);
  StatValue = CStats::GetStatValue(0xF2u);
  CStats::IncrementStat(0xE9u, 1000.0 / StatValue);
  CWorld::Players[0].Score += 100;
  v1 = CStats::GetStatValue(0xF1u);
  if ( v1 == CStats::GetStatValue(0xF2u) )
  {
    CGarages::TriggerMessage("HO_ALL", -1, 0x1388u, -1);
    CWorld::Players[0].Score += 100000;
  }
  else
  {
    v2 = CStats::GetStatValue(0xF1u);
    v3 = CStats::GetStatValue(0xF2u);
    sub_19BFB0("HO_ONE", (int)v2, 0x1388u, (int)v3);
  }
}

//----- (00321684) --------------------------------------------------------
void __fastcall CPickups::PassTime(UInt32 MilliSeconds)
{
  int i; // r1
  CPickup *v2; // r3
  UInt32 RegenerationTime; // r4

  for ( i = 0; i != 620; ++i )
  {
    if ( (CPickups::aPickUps[i].Type | 0x10) != 16 )
    {
      v2 = &CPickups::aPickUps[i];
      RegenerationTime = CPickups::aPickUps[i].RegenerationTime;
      if ( RegenerationTime > MilliSeconds )
        v2->RegenerationTime = RegenerationTime - MilliSeconds;
      else
        v2->RegenerationTime = 0;
    }
  }
}

//----- (003216D0) --------------------------------------------------------
void CPickups::PictureTaken()
{
  int16x4_t v0; // d16
  float v1; // s16
  int v2; // r11
  int v3; // r6
  Int16 *p_CoorsX; // r5
  float32x2_t v5; // d16
  CSimpleTransform *p_tx; // r1
  unsigned __int64 v7; // d13
  float v8; // s26
  RwReal v9; // s2
  RwReal v10; // s4
  CPickup *v11; // r4
  CEntity *v12; // r0
  CObject **p_pObject; // r4
  CObject *pObject; // t1
  CPickup *v15; // r0
  char v16; // r3
  float StatValue; // s16
  float v18; // s16
  float v19; // r0
  CVector v20; // [sp+4h] [bp-64h] BYREF

  v1 = 1000000.0;
  v2 = -1;
  v3 = 0;
  p_CoorsX = &CPickups::aPickUps[0].CoorsX;
  do
  {
    if ( *((_BYTE *)p_CoorsX + 12) == 20 )
    {
      v0.n64_u32[0] = *(_DWORD *)(p_CoorsX + 1);
      v5.n64_u64[0] = vcvt_f32_s32((int32x2_t)vmovl_s16(v0).n128_u64[0]).n64_u64[0];
      p_tx = (CSimpleTransform *)&TheCamera.m_pMat->tx;
      if ( !TheCamera.m_pMat )
        p_tx = &TheCamera.m_transform;
      v0.n64_u64[0] = vsub_f32(vmul_f32(v5, (float32x2_t)0x3E0000003E000000LL), *(float32x2_t *)&p_tx->m_translate.y).n64_u64[0];
      v7 = vmul_f32(v0, v0).n64_u64[0];
      v8 = sqrtf(
             (float)((float)((float)((float)((float)*p_CoorsX * 0.125) - p_tx->m_translate.x)
                           * (float)((float)((float)*p_CoorsX * 0.125) - p_tx->m_translate.x))
                   + *(float *)&v7)
           + *((float *)&v7 + 1));
      if ( v8 < (float)((float)(90.0 / CCamera::FindCamFOV(&TheCamera)) * 20.0) )
      {
        v9 = (float)*p_CoorsX * 0.125;
        v10 = (float)p_CoorsX[2] * 0.125;
        v20.y = (float)p_CoorsX[1] * 0.125;
        v20.x = v9;
        v20.z = v10;
        if ( CCamera::IsSphereVisible(&TheCamera, &v20, 0.2) && v8 < v1 )
        {
          v1 = v8;
          v2 = v3;
        }
      }
    }
    ++v3;
    p_CoorsX += 16;
  }
  while ( v3 != 620 );
  if ( v2 > -1 )
  {
    v11 = &CPickups::aPickUps[v2];
    CRadar::ClearBlipForEntity(BLIPTYPE_PICKUP, (v11->ReferenceIndex << 16) | ((32 * v2) >> 5));
    pObject = v11->pObject;
    p_pObject = &v11->pObject;
    v12 = pObject;
    if ( pObject )
    {
      CWorld::Remove(v12);
      if ( *p_pObject )
        (*((void (__fastcall **)(CObject *))(*p_pObject)->_vptr$CPlaceable + 1))(*p_pObject);
      *p_pObject = 0;
    }
    v15 = &CPickups::aPickUps[v2];
    v16 = *((_BYTE *)v15 + 29);
    v15->Type = 0;
    *((_BYTE *)v15 + 29) = v16 | 1;
    CWorld::Players[0].Score += 100;
    CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 13, 0.0, 1.0);
    CStats::IncrementStat(0xE7u, 1.0);
    StatValue = CStats::GetStatValue(0xE7u);
    if ( StatValue == CStats::GetStatValue(0xE8u) )
    {
      CGarages::TriggerMessage("SN_ALL", -1, 0x1388u, -1);
      CWorld::Players[CWorld::PlayerInFocus].Score += 100000;
    }
    else
    {
      v18 = CStats::GetStatValue(0xE7u);
      v19 = CStats::GetStatValue(0xE8u);
      CGarages::TriggerMessage("SN_ONE", (int)v18, 0x1388u, (int)v19);
    }
  }
}
// 321734: variable 'v0' is possibly undefined

//----- (00321950) --------------------------------------------------------
void CPickups::RemovePickupObjects()
{
  CPickup *v0; // r6
  int i; // r4
  CObject *Type; // r0
  bool v3; // zf
  CObject *pObject; // r0

  for ( i = 0; i != 620; ++i )
  {
    Type = (CObject *)CPickups::aPickUps[i].Type;
    v3 = Type == 0;
    if ( CPickups::aPickUps[i].Type )
    {
      v0 = &CPickups::aPickUps[i];
      Type = CPickups::aPickUps[i].pObject;
      v3 = Type == 0;
    }
    if ( !v3 )
    {
      CWorld::Remove(Type);
      pObject = v0->pObject;
      if ( pObject )
        (*((void (__fastcall **)(CObject *))pObject->_vptr$CPlaceable + 1))(pObject);
      v0->pObject = 0;
      *((_BYTE *)&CPickups::aPickUps[i] + 29) &= ~8u;
    }
  }
}
// 32198A: variable 'v0' is possibly undefined

//----- (003219C0) --------------------------------------------------------
void __fastcall CPickups::RemovePickUpsInArea(float MinX, float MaxX, float MinY, float MaxY, float MinZ, float MaxZ)
{
  int v10; // r8
  int v11; // r10
  float v12; // s0
  float v13; // s0
  float v14; // s0
  CPickup *v15; // r9
  CObject *pObject; // r0
  CObject *v17; // r0

  v10 = 0;
  v11 = 0;
  do
  {
    if ( CPickups::aPickUps[v10].Type )
    {
      v12 = (float)CPickups::aPickUps[v10].CoorsX * 0.125;
      if ( v12 >= MinX && v12 <= MaxX )
      {
        v13 = (float)CPickups::aPickUps[v10].CoorsY * 0.125;
        if ( v13 >= MinY && v13 <= MaxY )
        {
          v14 = (float)CPickups::aPickUps[v10].CoorsZ * 0.125;
          if ( v14 >= MinZ && v14 <= MaxZ )
          {
            v15 = &CPickups::aPickUps[v10];
            CRadar::ClearBlipForEntity(BLIPTYPE_PICKUP, v11 | (CPickups::aPickUps[v10].ReferenceIndex << 16));
            pObject = CPickups::aPickUps[v10].pObject;
            if ( pObject )
            {
              CWorld::Remove(pObject);
              v17 = v15->pObject;
              if ( v17 )
                (*((void (__fastcall **)(CObject *))v17->_vptr$CPlaceable + 1))(v17);
              v15->pObject = 0;
            }
            CPickups::aPickUps[v10].Type = 0;
            *((_BYTE *)&CPickups::aPickUps[v10] + 29) |= 1u;
          }
        }
      }
    }
    ++v10;
    ++v11;
  }
  while ( v10 != 620 );
}

//----- (00321B1C) --------------------------------------------------------
void CPickups::RemoveMissionPickUps()
{
  int v0; // r6
  char *v1; // r4
  CEntity *v2; // r0
  int v3; // r0
  char v4; // r0

  v0 = 0;
  v1 = (char *)CPickups::aPickUps + 29;
  do
  {
    if ( *(v1 - 1) == 22 )
    {
      CRadar::ClearBlipForEntity(BLIPTYPE_PICKUP, v0 | (*(unsigned __int16 *)(v1 - 3) << 16));
      v2 = *(CEntity **)(v1 - 25);
      if ( v2 )
      {
        CWorld::Remove(v2);
        v3 = *(_DWORD *)(v1 - 25);
        if ( v3 )
          (*(void (__fastcall **)(int))(*(_DWORD *)v3 + 4))(v3);
        *(_DWORD *)(v1 - 25) = 0;
      }
      v4 = *v1;
      *(v1 - 1) = 0;
      *v1 = v4 | 1;
    }
    ++v0;
    v1 += 32;
  }
  while ( v0 != 620 );
}

//----- (00321B84) --------------------------------------------------------
void CVehicleRecording::InitAtStartOfGame()
{
  int v0; // r1
  UInt8 **p_pRecordingData; // r0
  UInt8 *p_NumTimesUsed; // r0
  int v3; // r1

  v0 = 475;
  p_pRecordingData = &CVehicleRecording::StreamingArray[0].pRecordingData;
  do
  {
    *p_pRecordingData = 0;
    p_pRecordingData += 4;
    --v0;
  }
  while ( v0 );
  *(_QWORD *)CVehicleRecording::bPlaybackPaused = 0LL;
  *(_QWORD *)&CVehicleRecording::bPlaybackPaused[8] = 0LL;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[12] = 0LL;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[14] = 0LL;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[8] = 0LL;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[10] = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[12] = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[14] = 0LL;
  *(_QWORD *)CVehicleRecording::pVehicleForPlayback = 0LL;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[2] = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[8] = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[10] = 0LL;
  p_NumTimesUsed = &CVehicleRecording::StreamingArray[0].NumTimesUsed;
  *(_QWORD *)CVehicleRecording::pPlaybackBuffer = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[2] = 0LL;
  *(_QWORD *)CVehicleRecording::bPlaybackGoingOn = 0LL;
  *(_QWORD *)&CVehicleRecording::bPlaybackGoingOn[8] = 0LL;
  v3 = 475;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[4] = 0LL;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[6] = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[4] = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[6] = 0LL;
  do
  {
    *p_NumTimesUsed = 0;
    --v3;
    *((_DWORD *)p_NumTimesUsed - 2) = 0;
    p_NumTimesUsed += 16;
  }
  while ( v3 );
}

//----- (00321C2C) --------------------------------------------------------
void CVehicleRecording::Init()
{
  UInt8 *p_NumTimesUsed; // r0
  int v1; // r1

  *(_QWORD *)CVehicleRecording::bPlaybackPaused = 0LL;
  *(_QWORD *)&CVehicleRecording::bPlaybackPaused[8] = 0LL;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[12] = 0LL;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[14] = 0LL;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[8] = 0LL;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[10] = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[12] = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[14] = 0LL;
  *(_QWORD *)CVehicleRecording::pVehicleForPlayback = 0LL;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[2] = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[8] = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[10] = 0LL;
  p_NumTimesUsed = &CVehicleRecording::StreamingArray[0].NumTimesUsed;
  *(_QWORD *)CVehicleRecording::pPlaybackBuffer = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[2] = 0LL;
  *(_QWORD *)CVehicleRecording::bPlaybackGoingOn = 0LL;
  *(_QWORD *)&CVehicleRecording::bPlaybackGoingOn[8] = 0LL;
  v1 = 475;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[4] = 0LL;
  *(_QWORD *)&CVehicleRecording::pVehicleForPlayback[6] = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[4] = 0LL;
  *(_QWORD *)&CVehicleRecording::pPlaybackBuffer[6] = 0LL;
  do
  {
    *p_NumTimesUsed = 0;
    --v1;
    *((_DWORD *)p_NumTimesUsed - 2) = 0;
    p_NumTimesUsed += 16;
  }
  while ( v1 );
}

//----- (00321CB8) --------------------------------------------------------
void CVehicleRecording::ShutDown()
{
  int32 v0; // r4
  int v1; // r6
  void **p_pRecordingData; // r5

  v0 = 25755;
  v1 = 475;
  p_pRecordingData = (void **)&CVehicleRecording::StreamingArray[0].pRecordingData;
  do
  {
    if ( *p_pRecordingData )
    {
      CMemoryMgr::Free(*p_pRecordingData);
      *p_pRecordingData = 0;
      CStreaming::RemoveModel(v0);
    }
    p_pRecordingData += 4;
    --v1;
    ++v0;
  }
  while ( v1 );
}

//----- (00321CFC) --------------------------------------------------------
void __fastcall CVehicleRecording::StartPlaybackRecordedCar(
        CVehicle *pCar,
        UInt32 FileNum,
        bool bArgUseCarAI,
        bool bLooped)
{
  _BOOL4 v5; // r6
  Int32 v6; // r5
  CVehicleRecordingStreaming *v7; // r2
  int v8; // r4
  CVehicleRecordingStreaming *v9; // r9
  UInt8 **p_pRecordingData; // r9
  UInt8 *pRecordingData; // t1
  CVehicleRecordingStreaming *v12; // r3
  Int32 v13; // r2
  CVehicleRecordingStreaming *v14; // r2
  UInt8 *v15; // r3
  CVehicle *v16; // r0
  CMatrix *m_pMat; // r2
  CSimpleTransform *p_tx; // r1
  int v19; // r0
  float32x2_t v20; // d16
  float x; // s2
  float v22; // s0
  UInt8 *v23; // r1
  Int32 i; // r2
  float32x2_t v25; // d17
  unsigned __int64 v26; // d3
  float v27; // s4

  v5 = bArgUseCarAI;
  if ( CVehicleRecording::NumPlayBackFiles < 1 )
  {
LABEL_5:
    v6 = 0;
  }
  else
  {
    v6 = 0;
    v7 = CVehicleRecording::StreamingArray;
    while ( v7->FileNameNumber != FileNum )
    {
      ++v6;
      ++v7;
      if ( v6 >= CVehicleRecording::NumPlayBackFiles )
        goto LABEL_5;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[0] )
  {
    if ( CVehicleRecording::bPlaybackGoingOn[1] )
    {
      if ( CVehicleRecording::bPlaybackGoingOn[2] )
      {
        if ( CVehicleRecording::bPlaybackGoingOn[3] )
        {
          if ( CVehicleRecording::bPlaybackGoingOn[4] )
          {
            if ( CVehicleRecording::bPlaybackGoingOn[5] )
            {
              if ( CVehicleRecording::bPlaybackGoingOn[6] )
              {
                if ( CVehicleRecording::bPlaybackGoingOn[7] )
                {
                  if ( CVehicleRecording::bPlaybackGoingOn[8] )
                  {
                    if ( CVehicleRecording::bPlaybackGoingOn[9] )
                    {
                      if ( CVehicleRecording::bPlaybackGoingOn[10] )
                      {
                        if ( CVehicleRecording::bPlaybackGoingOn[11] )
                        {
                          if ( CVehicleRecording::bPlaybackGoingOn[12] )
                          {
                            if ( CVehicleRecording::bPlaybackGoingOn[13] )
                            {
                              if ( CVehicleRecording::bPlaybackGoingOn[14] )
                              {
                                v8 = 16;
                                if ( !CVehicleRecording::bPlaybackGoingOn[15] )
                                  v8 = 15;
                              }
                              else
                              {
                                v8 = 14;
                              }
                            }
                            else
                            {
                              v8 = 13;
                            }
                          }
                          else
                          {
                            v8 = 12;
                          }
                        }
                        else
                        {
                          v8 = 11;
                        }
                      }
                      else
                      {
                        v8 = 10;
                      }
                    }
                    else
                    {
                      v8 = 9;
                    }
                  }
                  else
                  {
                    v8 = 8;
                  }
                }
                else
                {
                  v8 = 7;
                }
              }
              else
              {
                v8 = 6;
              }
            }
            else
            {
              v8 = 5;
            }
          }
          else
          {
            v8 = 4;
          }
        }
        else
        {
          v8 = 3;
        }
      }
      else
      {
        v8 = 2;
      }
    }
    else
    {
      v8 = 1;
    }
  }
  else
  {
    v8 = 0;
  }
  v9 = &CVehicleRecording::StreamingArray[v6];
  pRecordingData = v9->pRecordingData;
  p_pRecordingData = &v9->pRecordingData;
  if ( !pRecordingData )
  {
    if ( CVehicleRecording::NumPlayBackFiles < 1 )
    {
LABEL_44:
      v13 = 0;
    }
    else
    {
      v12 = CVehicleRecording::StreamingArray;
      v13 = 0;
      while ( v12->FileNameNumber != FileNum )
      {
        ++v13;
        ++v12;
        if ( v13 >= CVehicleRecording::NumPlayBackFiles )
          goto LABEL_44;
      }
    }
    CStreaming::RequestModel(v13 + 25755, 12);
    CStreaming::LoadAllRequestedModels(0);
  }
  CVehicleRecording::pVehicleForPlayback[v8] = pCar;
  CEntity::RegisterReference(pCar, &CVehicleRecording::pVehicleForPlayback[v8]);
  CVehicleRecording::PlaybackIndex[v8] = 0;
  CVehicleRecording::PlayBackStreamingIndex[v8] = v6;
  v14 = &CVehicleRecording::StreamingArray[v6];
  v15 = *p_pRecordingData;
  CVehicleRecording::PlaybackRunningTime[v8] = 0.0;
  CVehicleRecording::PlaybackSpeed[v8] = 1.0;
  CVehicleRecording::bPlaybackLooped[v8] = bLooped;
  CVehicleRecording::pPlaybackBuffer[v8] = v15;
  CVehicleRecording::PlaybackBufferSize[v8] = v14->RecordingDataSize;
  ++v14->NumTimesUsed;
  CVehicleRecording::bPlaybackGoingOn[v8] = 1;
  CVehicleRecording::bUseCarAI[v8] = v5;
  v16 = CVehicleRecording::pVehicleForPlayback[v8];
  CVehicleRecording::bPlaybackPaused[v8] = 0;
  if ( v5 )
  {
    v16->AutoPilot.Mission = 34;
    m_pMat = pCar->m_pMat;
    p_tx = (CSimpleTransform *)&m_pMat->tx;
    v19 = CVehicleRecording::PlaybackBufferSize[v8];
    if ( !m_pMat )
      p_tx = &pCar->m_transform;
    if ( v19 >= 1 )
    {
      v20.n64_u64[0] = *(unsigned __int64 *)&p_tx->m_translate.y;
      x = p_tx->m_translate.x;
      v22 = 1000000.0;
      v23 = CVehicleRecording::pPlaybackBuffer[v8];
      for ( i = 0; i < v19; i += 32 )
      {
        v25.n64_u64[0] = vsub_f32(v20, *(float32x2_t *)&v23[i + 24]).n64_u64[0];
        v26 = vmul_f32(v25, v25).n64_u64[0];
        v27 = sqrtf(
                (float)((float)((float)(x - *(float *)&v23[i + 20]) * (float)(x - *(float *)&v23[i + 20]))
                      + *(float *)&v26)
              + *((float *)&v26 + 1));
        if ( v27 < v22 )
        {
          CVehicleRecording::PlaybackIndex[v8] = i;
          v22 = v27;
        }
      }
    }
  }
  else
  {
    *(_DWORD *)&v16->m_nPhysicalFlags |= 4u;
    *(_DWORD *)&CVehicleRecording::pVehicleForPlayback[v8]->m_nPhysicalFlags &= ~8u;
  }
  CVehicleRecording::pVehicleForPlayback[v8]->AutoPilot.RecordingNumber = v8;
}

//----- (00322040) --------------------------------------------------------
Int32 __fastcall CVehicleRecording::FindIndexWithFileNameNumber(Int32 ArgFileNameNumber)
{
  CVehicleRecordingStreaming *v2; // r3
  Int32 result; // r0

  if ( CVehicleRecording::NumPlayBackFiles < 1 )
    return 0;
  v2 = CVehicleRecording::StreamingArray;
  result = 0;
  while ( v2->FileNameNumber != ArgFileNameNumber )
  {
    ++result;
    ++v2;
    if ( result >= CVehicleRecording::NumPlayBackFiles )
      return 0;
  }
  return result;
}

//----- (00322074) --------------------------------------------------------
void __fastcall CVehicleRecording::RequestRecordingFile(Int32 FileNameNo)
{
  CVehicleRecordingStreaming *v1; // r3
  Int32 v2; // r1

  if ( CVehicleRecording::NumPlayBackFiles < 1 )
  {
LABEL_5:
    v2 = 0;
  }
  else
  {
    v1 = CVehicleRecording::StreamingArray;
    v2 = 0;
    while ( v1->FileNameNumber != FileNameNo )
    {
      ++v2;
      ++v1;
      if ( v2 >= CVehicleRecording::NumPlayBackFiles )
        goto LABEL_5;
    }
  }
  sub_192918(v2 + 25755, 12);
}

//----- (003220B0) --------------------------------------------------------
void __fastcall CVehicleRecording::SetRecordingToPointClosestToCoors(Int32 C, CVector Coors)
{
  int v2; // r12
  float x; // s0
  float y; // s4
  float v5; // s2
  float v6; // s8

  v2 = CVehicleRecording::PlaybackBufferSize[C];
  if ( v2 >= 1 )
  {
    x = Coors.x;
    y = Coors.y;
    v5 = 1000000.0;
    Coors.y = 0.0;
    LODWORD(Coors.x) = CVehicleRecording::pPlaybackBuffer[C];
    do
    {
      v6 = sqrtf(
             (float)((float)((float)(x - *(float *)(LODWORD(Coors.x) + LODWORD(Coors.y) + 20))
                           * (float)(x - *(float *)(LODWORD(Coors.x) + LODWORD(Coors.y) + 20)))
                   + (float)((float)(y - *(float *)(LODWORD(Coors.x) + LODWORD(Coors.y) + 24))
                           * (float)(y - *(float *)(LODWORD(Coors.x) + LODWORD(Coors.y) + 24))))
           + (float)((float)(Coors.z - *(float *)(LODWORD(Coors.x) + LODWORD(Coors.y) + 28))
                   * (float)(Coors.z - *(float *)(LODWORD(Coors.x) + LODWORD(Coors.y) + 28))));
      if ( v6 < v5 )
      {
        CVehicleRecording::PlaybackIndex[C] = LODWORD(Coors.y);
        v5 = v6;
      }
      LODWORD(Coors.y) += 32;
    }
    while ( SLODWORD(Coors.y) < v2 );
  }
}

//----- (00322150) --------------------------------------------------------
void __fastcall CVehicleRecording::StopPlaybackRecordedCar(CVehicle *pCar)
{
  CVehicle **v1; // r1
  CVehicle *v2; // r2
  int v3; // lr
  bool *v4; // r12
  bool v5; // zf
  Int32 v6; // r5
  CVehicleRecordingStreaming *v7; // r0
  UInt8 NumTimesUsed; // r1
  CVehicleRecordingStreaming *v9; // r6

  if ( CVehicleRecording::bPlaybackGoingOn[0]
    && (v1 = CVehicleRecording::pVehicleForPlayback,
        v2 = CVehicleRecording::pVehicleForPlayback[0],
        CVehicleRecording::pVehicleForPlayback[0] == pCar) )
  {
    v3 = 0;
    v4 = CVehicleRecording::bPlaybackGoingOn;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[1]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[1],
             v2 = CVehicleRecording::pVehicleForPlayback[1],
             CVehicleRecording::pVehicleForPlayback[1] == pCar) )
  {
    v3 = 1;
    v4 = &CVehicleRecording::bPlaybackGoingOn[1];
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[2]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[2],
             v2 = CVehicleRecording::pVehicleForPlayback[2],
             CVehicleRecording::pVehicleForPlayback[2] == pCar) )
  {
    v3 = 2;
    v4 = &CVehicleRecording::bPlaybackGoingOn[2];
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[3]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[3],
             v2 = CVehicleRecording::pVehicleForPlayback[3],
             CVehicleRecording::pVehicleForPlayback[3] == pCar) )
  {
    v3 = 3;
    v4 = &CVehicleRecording::bPlaybackGoingOn[3];
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[4]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[4],
             v2 = CVehicleRecording::pVehicleForPlayback[4],
             CVehicleRecording::pVehicleForPlayback[4] == pCar) )
  {
    v3 = 4;
    v4 = &CVehicleRecording::bPlaybackGoingOn[4];
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[5]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[5],
             v2 = CVehicleRecording::pVehicleForPlayback[5],
             CVehicleRecording::pVehicleForPlayback[5] == pCar) )
  {
    v3 = 5;
    v4 = &CVehicleRecording::bPlaybackGoingOn[5];
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[6]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[6],
             v2 = CVehicleRecording::pVehicleForPlayback[6],
             CVehicleRecording::pVehicleForPlayback[6] == pCar) )
  {
    v3 = 6;
    v4 = &CVehicleRecording::bPlaybackGoingOn[6];
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[7]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[7],
             v2 = CVehicleRecording::pVehicleForPlayback[7],
             CVehicleRecording::pVehicleForPlayback[7] == pCar) )
  {
    v3 = 7;
    v4 = &CVehicleRecording::bPlaybackGoingOn[7];
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[8]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[8],
             v2 = CVehicleRecording::pVehicleForPlayback[8],
             CVehicleRecording::pVehicleForPlayback[8] == pCar) )
  {
    v3 = 8;
    v4 = &CVehicleRecording::bPlaybackGoingOn[8];
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[9]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[9],
             v2 = CVehicleRecording::pVehicleForPlayback[9],
             CVehicleRecording::pVehicleForPlayback[9] == pCar) )
  {
    v3 = 9;
    v4 = &CVehicleRecording::bPlaybackGoingOn[9];
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[10]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[10],
             v2 = CVehicleRecording::pVehicleForPlayback[10],
             CVehicleRecording::pVehicleForPlayback[10] == pCar) )
  {
    v3 = 10;
    v4 = &CVehicleRecording::bPlaybackGoingOn[10];
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[11]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[11],
             v2 = CVehicleRecording::pVehicleForPlayback[11],
             CVehicleRecording::pVehicleForPlayback[11] == pCar) )
  {
    v3 = 11;
    v4 = &CVehicleRecording::bPlaybackGoingOn[11];
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[12]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[12],
             v2 = CVehicleRecording::pVehicleForPlayback[12],
             CVehicleRecording::pVehicleForPlayback[12] == pCar) )
  {
    v3 = 12;
    v4 = &CVehicleRecording::bPlaybackGoingOn[12];
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[13]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[13],
             v2 = CVehicleRecording::pVehicleForPlayback[13],
             CVehicleRecording::pVehicleForPlayback[13] == pCar) )
  {
    v3 = 13;
    v4 = &CVehicleRecording::bPlaybackGoingOn[13];
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[14]
         && (v1 = &CVehicleRecording::pVehicleForPlayback[14],
             v2 = CVehicleRecording::pVehicleForPlayback[14],
             CVehicleRecording::pVehicleForPlayback[14] == pCar) )
  {
    v3 = 14;
    v4 = &CVehicleRecording::bPlaybackGoingOn[14];
  }
  else
  {
    if ( !CVehicleRecording::bPlaybackGoingOn[15] )
      return;
    v1 = &CVehicleRecording::pVehicleForPlayback[15];
    v2 = CVehicleRecording::pVehicleForPlayback[15];
    if ( CVehicleRecording::pVehicleForPlayback[15] != pCar )
      return;
    v3 = 15;
    v4 = &CVehicleRecording::bPlaybackGoingOn[15];
  }
  v5 = pCar == 0;
  if ( pCar )
  {
    pCar->AutoPilot.RecordingNumber = -1;
    pCar = (CVehicle *)(*(_DWORD *)&v2->m_nPhysicalFlags & 0xFFFFFFFB);
  }
  if ( !v5 )
    v2->m_nPhysicalFlags = (CPhysical::CPhysicalFlags)pCar;
  *v1 = 0;
  CVehicleRecording::PlaybackBufferSize[v3] = 0;
  v6 = CVehicleRecording::PlayBackStreamingIndex[v3];
  v7 = &CVehicleRecording::StreamingArray[v6];
  *v4 = 0;
  NumTimesUsed = v7->NumTimesUsed;
  CVehicleRecording::pPlaybackBuffer[v3] = 0;
  v7->NumTimesUsed = --NumTimesUsed;
  if ( !NumTimesUsed )
  {
    v9 = &CVehicleRecording::StreamingArray[v6];
    CMemoryMgr::Free(v9->pRecordingData);
    v9->pRecordingData = 0;
    sub_18CC68(v6 + 25755);
  }
}

//----- (00322548) --------------------------------------------------------
void __fastcall CVehicleRecording::StopPlaybackWithIndex(Int32 C)
{
  CVehicle *v1; // r1
  Int32 v2; // r5
  CVehicleRecordingStreaming *v3; // r0
  UInt8 v4; // r1
  CVehicleRecordingStreaming *v5; // r4

  v1 = CVehicleRecording::pVehicleForPlayback[C];
  if ( v1 )
  {
    v1->AutoPilot.RecordingNumber = -1;
    *(_DWORD *)&CVehicleRecording::pVehicleForPlayback[C]->m_nPhysicalFlags &= ~4u;
  }
  CVehicleRecording::PlaybackBufferSize[C] = 0;
  v2 = CVehicleRecording::PlayBackStreamingIndex[C];
  CVehicleRecording::pVehicleForPlayback[C] = 0;
  CVehicleRecording::pPlaybackBuffer[C] = 0;
  CVehicleRecording::bPlaybackGoingOn[C] = 0;
  v3 = &CVehicleRecording::StreamingArray[v2];
  v4 = v3->NumTimesUsed - 1;
  v3->NumTimesUsed = v4;
  if ( !v4 )
  {
    v5 = &CVehicleRecording::StreamingArray[v2];
    CMemoryMgr::Free(v5->pRecordingData);
    v5->pRecordingData = 0;
    sub_18CC68(v2 + 25755);
  }
}

//----- (00322614) --------------------------------------------------------
bool __fastcall CVehicleRecording::IsPlaybackGoingOnForCar(CVehicle *pCar)
{
  return CVehicleRecording::bPlaybackGoingOn[0] && CVehicleRecording::pVehicleForPlayback[0] == pCar
      || CVehicleRecording::bPlaybackGoingOn[1] && CVehicleRecording::pVehicleForPlayback[1] == pCar
      || CVehicleRecording::bPlaybackGoingOn[2] && CVehicleRecording::pVehicleForPlayback[2] == pCar
      || CVehicleRecording::bPlaybackGoingOn[3] && CVehicleRecording::pVehicleForPlayback[3] == pCar
      || CVehicleRecording::bPlaybackGoingOn[4] && CVehicleRecording::pVehicleForPlayback[4] == pCar
      || CVehicleRecording::bPlaybackGoingOn[5] && CVehicleRecording::pVehicleForPlayback[5] == pCar
      || CVehicleRecording::bPlaybackGoingOn[6] && CVehicleRecording::pVehicleForPlayback[6] == pCar
      || CVehicleRecording::bPlaybackGoingOn[7] && CVehicleRecording::pVehicleForPlayback[7] == pCar
      || CVehicleRecording::bPlaybackGoingOn[8] && CVehicleRecording::pVehicleForPlayback[8] == pCar
      || CVehicleRecording::bPlaybackGoingOn[9] && CVehicleRecording::pVehicleForPlayback[9] == pCar
      || CVehicleRecording::bPlaybackGoingOn[10] && CVehicleRecording::pVehicleForPlayback[10] == pCar
      || CVehicleRecording::bPlaybackGoingOn[11] && CVehicleRecording::pVehicleForPlayback[11] == pCar
      || CVehicleRecording::bPlaybackGoingOn[12] && CVehicleRecording::pVehicleForPlayback[12] == pCar
      || CVehicleRecording::bPlaybackGoingOn[13] && CVehicleRecording::pVehicleForPlayback[13] == pCar
      || CVehicleRecording::bPlaybackGoingOn[14] && CVehicleRecording::pVehicleForPlayback[14] == pCar
      || CVehicleRecording::bPlaybackGoingOn[15] && CVehicleRecording::pVehicleForPlayback[15] == pCar;
}

//----- (0032280C) --------------------------------------------------------
bool __fastcall CVehicleRecording::IsPlaybackPausedForCar(CVehicle *pCar)
{
  return 0;
}

//----- (00322810) --------------------------------------------------------
void __fastcall CVehicleRecording::SetPlaybackSpeed(CVehicle *pCar, float Speed)
{
  int v2; // r0

  if ( CVehicleRecording::bPlaybackGoingOn[0] && CVehicleRecording::pVehicleForPlayback[0] == pCar )
  {
    v2 = 0;
LABEL_49:
    CVehicleRecording::PlaybackSpeed[v2] = Speed;
    return;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[1] && CVehicleRecording::pVehicleForPlayback[1] == pCar )
  {
    v2 = 1;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[2] && CVehicleRecording::pVehicleForPlayback[2] == pCar )
  {
    v2 = 2;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[3] && CVehicleRecording::pVehicleForPlayback[3] == pCar )
  {
    v2 = 3;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[4] && CVehicleRecording::pVehicleForPlayback[4] == pCar )
  {
    v2 = 4;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[5] && CVehicleRecording::pVehicleForPlayback[5] == pCar )
  {
    v2 = 5;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[6] && CVehicleRecording::pVehicleForPlayback[6] == pCar )
  {
    v2 = 6;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[7] && CVehicleRecording::pVehicleForPlayback[7] == pCar )
  {
    v2 = 7;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[8] && CVehicleRecording::pVehicleForPlayback[8] == pCar )
  {
    v2 = 8;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[9] && CVehicleRecording::pVehicleForPlayback[9] == pCar )
  {
    v2 = 9;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[10] && CVehicleRecording::pVehicleForPlayback[10] == pCar )
  {
    v2 = 10;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[11] && CVehicleRecording::pVehicleForPlayback[11] == pCar )
  {
    v2 = 11;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[12] && CVehicleRecording::pVehicleForPlayback[12] == pCar )
  {
    v2 = 12;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[13] && CVehicleRecording::pVehicleForPlayback[13] == pCar )
  {
    v2 = 13;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[14] && CVehicleRecording::pVehicleForPlayback[14] == pCar )
  {
    v2 = 14;
    goto LABEL_49;
  }
  if ( CVehicleRecording::bPlaybackGoingOn[15] && CVehicleRecording::pVehicleForPlayback[15] == pCar )
  {
    v2 = 15;
    goto LABEL_49;
  }
}

//----- (00322A48) --------------------------------------------------------
void __fastcall CVehicleRecording::PausePlaybackRecordedCar(CVehicle *pCar)
{
  int v1; // r0
  bool v2; // zf

  if ( CVehicleRecording::bPlaybackGoingOn[0] && CVehicleRecording::pVehicleForPlayback[0] == pCar )
  {
    v1 = 0;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[1] && CVehicleRecording::pVehicleForPlayback[1] == pCar )
  {
    v1 = 1;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[2] && CVehicleRecording::pVehicleForPlayback[2] == pCar )
  {
    v1 = 2;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[3] && CVehicleRecording::pVehicleForPlayback[3] == pCar )
  {
    v1 = 3;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[4] && CVehicleRecording::pVehicleForPlayback[4] == pCar )
  {
    v1 = 4;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[5] && CVehicleRecording::pVehicleForPlayback[5] == pCar )
  {
    v1 = 5;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[6] && CVehicleRecording::pVehicleForPlayback[6] == pCar )
  {
    v1 = 6;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[7] && CVehicleRecording::pVehicleForPlayback[7] == pCar )
  {
    v1 = 7;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[8] && CVehicleRecording::pVehicleForPlayback[8] == pCar )
  {
    v1 = 8;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[9] && CVehicleRecording::pVehicleForPlayback[9] == pCar )
  {
    v1 = 9;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[10] && CVehicleRecording::pVehicleForPlayback[10] == pCar )
  {
    v1 = 10;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[11] && CVehicleRecording::pVehicleForPlayback[11] == pCar )
  {
    v1 = 11;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[12] && CVehicleRecording::pVehicleForPlayback[12] == pCar )
  {
    v1 = 12;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[13] && CVehicleRecording::pVehicleForPlayback[13] == pCar )
  {
    v1 = 13;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[14] && CVehicleRecording::pVehicleForPlayback[14] == pCar )
  {
    v1 = 14;
  }
  else
  {
    v2 = CVehicleRecording::pVehicleForPlayback[15] == pCar;
    v1 = 16;
    if ( v2 )
      v1 = 15;
    if ( !CVehicleRecording::bPlaybackGoingOn[15] )
      v1 = 16;
  }
  CVehicleRecording::bPlaybackPaused[v1] = 1;
}

//----- (00322C80) --------------------------------------------------------
void __fastcall CVehicleRecording::UnpausePlaybackRecordedCar(CVehicle *pCar)
{
  int v1; // r0
  bool v2; // zf

  if ( CVehicleRecording::bPlaybackGoingOn[0] && CVehicleRecording::pVehicleForPlayback[0] == pCar )
  {
    v1 = 0;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[1] && CVehicleRecording::pVehicleForPlayback[1] == pCar )
  {
    v1 = 1;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[2] && CVehicleRecording::pVehicleForPlayback[2] == pCar )
  {
    v1 = 2;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[3] && CVehicleRecording::pVehicleForPlayback[3] == pCar )
  {
    v1 = 3;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[4] && CVehicleRecording::pVehicleForPlayback[4] == pCar )
  {
    v1 = 4;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[5] && CVehicleRecording::pVehicleForPlayback[5] == pCar )
  {
    v1 = 5;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[6] && CVehicleRecording::pVehicleForPlayback[6] == pCar )
  {
    v1 = 6;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[7] && CVehicleRecording::pVehicleForPlayback[7] == pCar )
  {
    v1 = 7;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[8] && CVehicleRecording::pVehicleForPlayback[8] == pCar )
  {
    v1 = 8;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[9] && CVehicleRecording::pVehicleForPlayback[9] == pCar )
  {
    v1 = 9;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[10] && CVehicleRecording::pVehicleForPlayback[10] == pCar )
  {
    v1 = 10;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[11] && CVehicleRecording::pVehicleForPlayback[11] == pCar )
  {
    v1 = 11;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[12] && CVehicleRecording::pVehicleForPlayback[12] == pCar )
  {
    v1 = 12;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[13] && CVehicleRecording::pVehicleForPlayback[13] == pCar )
  {
    v1 = 13;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[14] && CVehicleRecording::pVehicleForPlayback[14] == pCar )
  {
    v1 = 14;
  }
  else
  {
    v2 = CVehicleRecording::pVehicleForPlayback[15] == pCar;
    v1 = 16;
    if ( v2 )
      v1 = 15;
    if ( !CVehicleRecording::bPlaybackGoingOn[15] )
      v1 = 16;
  }
  CVehicleRecording::bPlaybackPaused[v1] = 0;
}

//----- (00322EB8) --------------------------------------------------------
void __fastcall CVehicleRecording::ChangeCarPlaybackToUseAI(CVehicle *pVeh)
{
  int v2; // r0
  CMatrix *m_pMat; // r3
  int v4; // r1
  CSimpleTransform *p_tx; // r2
  float32x2_t v6; // d16
  float x; // s2
  float v8; // s0
  UInt8 *v9; // r2
  Int32 i; // r3
  float32x2_t v11; // d17
  unsigned __int64 v12; // d3
  float v13; // s4
  int (**v14)(void); // r0

  if ( CVehicleRecording::bPlaybackGoingOn[0] && CVehicleRecording::pVehicleForPlayback[0] == pVeh )
  {
    v2 = 0;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[1] && CVehicleRecording::pVehicleForPlayback[1] == pVeh )
  {
    v2 = 1;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[2] && CVehicleRecording::pVehicleForPlayback[2] == pVeh )
  {
    v2 = 2;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[3] && CVehicleRecording::pVehicleForPlayback[3] == pVeh )
  {
    v2 = 3;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[4] && CVehicleRecording::pVehicleForPlayback[4] == pVeh )
  {
    v2 = 4;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[5] && CVehicleRecording::pVehicleForPlayback[5] == pVeh )
  {
    v2 = 5;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[6] && CVehicleRecording::pVehicleForPlayback[6] == pVeh )
  {
    v2 = 6;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[7] && CVehicleRecording::pVehicleForPlayback[7] == pVeh )
  {
    v2 = 7;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[8] && CVehicleRecording::pVehicleForPlayback[8] == pVeh )
  {
    v2 = 8;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[9] && CVehicleRecording::pVehicleForPlayback[9] == pVeh )
  {
    v2 = 9;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[10] && CVehicleRecording::pVehicleForPlayback[10] == pVeh )
  {
    v2 = 10;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[11] && CVehicleRecording::pVehicleForPlayback[11] == pVeh )
  {
    v2 = 11;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[12] && CVehicleRecording::pVehicleForPlayback[12] == pVeh )
  {
    v2 = 12;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[13] && CVehicleRecording::pVehicleForPlayback[13] == pVeh )
  {
    v2 = 13;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[14] && CVehicleRecording::pVehicleForPlayback[14] == pVeh )
  {
    v2 = 14;
  }
  else
  {
    v2 = 16;
    if ( CVehicleRecording::pVehicleForPlayback[15] == pVeh )
      v2 = 15;
    if ( !CVehicleRecording::bPlaybackGoingOn[15] )
      v2 = 16;
  }
  CVehicleRecording::bUseCarAI[v2] = 1;
  m_pMat = pVeh->m_pMat;
  pVeh->AutoPilot.Mission = 34;
  v4 = CVehicleRecording::PlaybackBufferSize[v2];
  p_tx = (CSimpleTransform *)&m_pMat->tx;
  if ( !m_pMat )
    p_tx = &pVeh->m_transform;
  if ( v4 >= 1 )
  {
    v6.n64_u64[0] = *(unsigned __int64 *)&p_tx->m_translate.y;
    x = p_tx->m_translate.x;
    v8 = 1000000.0;
    v9 = CVehicleRecording::pPlaybackBuffer[v2];
    for ( i = 0; i < v4; i += 32 )
    {
      v11.n64_u64[0] = vsub_f32(v6, *(float32x2_t *)&v9[i + 24]).n64_u64[0];
      v12 = vmul_f32(v11, v11).n64_u64[0];
      v13 = sqrtf(
              (float)((float)((float)(x - *(float *)&v9[i + 20]) * (float)(x - *(float *)&v9[i + 20])) + *(float *)&v12)
            + *((float *)&v12 + 1));
      if ( v13 < v8 )
      {
        CVehicleRecording::PlaybackIndex[v2] = i;
        v8 = v13;
      }
    }
  }
  v14 = pVeh->_vptr$CPlaceable;
  *(_DWORD *)&pVeh->m_nPhysicalFlags &= ~4u;
  ((void (__fastcall *)(CVehicle *, _DWORD))v14[24])(pVeh, 0);
  pVeh->m_info = (CEntity::CEntityInfo)(*(_BYTE *)&pVeh->m_info & 7 | 0x18);
}

//----- (003231AC) --------------------------------------------------------
void __fastcall CVehicleRecording::SkipToEndAndStopPlaybackRecordedCar(CVehicle *pCar)
{
  CVehicle **v2; // r10
  CVehicle *v3; // r0
  int v4; // r11
  bool *v5; // r8
  Int32 v6; // r5
  CVehicleRecordingStreaming *v7; // r0
  UInt8 v8; // r1
  CVehicleRecordingStreaming *v9; // r6

  if ( CVehicleRecording::bPlaybackGoingOn[0] )
  {
    v2 = CVehicleRecording::pVehicleForPlayback;
    v3 = CVehicleRecording::pVehicleForPlayback[0];
    if ( CVehicleRecording::pVehicleForPlayback[0] == pCar )
    {
      v4 = 0;
      v5 = CVehicleRecording::bPlaybackGoingOn;
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[1] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[1];
    v3 = CVehicleRecording::pVehicleForPlayback[1];
    if ( CVehicleRecording::pVehicleForPlayback[1] == pCar )
    {
      v4 = 1;
      v5 = &CVehicleRecording::bPlaybackGoingOn[1];
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[2] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[2];
    v3 = CVehicleRecording::pVehicleForPlayback[2];
    if ( CVehicleRecording::pVehicleForPlayback[2] == pCar )
    {
      v4 = 2;
      v5 = &CVehicleRecording::bPlaybackGoingOn[2];
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[3] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[3];
    v3 = CVehicleRecording::pVehicleForPlayback[3];
    if ( CVehicleRecording::pVehicleForPlayback[3] == pCar )
    {
      v4 = 3;
      v5 = &CVehicleRecording::bPlaybackGoingOn[3];
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[4] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[4];
    v3 = CVehicleRecording::pVehicleForPlayback[4];
    if ( CVehicleRecording::pVehicleForPlayback[4] == pCar )
    {
      v4 = 4;
      v5 = &CVehicleRecording::bPlaybackGoingOn[4];
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[5] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[5];
    v3 = CVehicleRecording::pVehicleForPlayback[5];
    if ( CVehicleRecording::pVehicleForPlayback[5] == pCar )
    {
      v4 = 5;
      v5 = &CVehicleRecording::bPlaybackGoingOn[5];
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[6] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[6];
    v3 = CVehicleRecording::pVehicleForPlayback[6];
    if ( CVehicleRecording::pVehicleForPlayback[6] == pCar )
    {
      v4 = 6;
      v5 = &CVehicleRecording::bPlaybackGoingOn[6];
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[7] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[7];
    v3 = CVehicleRecording::pVehicleForPlayback[7];
    if ( CVehicleRecording::pVehicleForPlayback[7] == pCar )
    {
      v4 = 7;
      v5 = &CVehicleRecording::bPlaybackGoingOn[7];
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[8] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[8];
    v3 = CVehicleRecording::pVehicleForPlayback[8];
    if ( CVehicleRecording::pVehicleForPlayback[8] == pCar )
    {
      v4 = 8;
      v5 = &CVehicleRecording::bPlaybackGoingOn[8];
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[9] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[9];
    v3 = CVehicleRecording::pVehicleForPlayback[9];
    if ( CVehicleRecording::pVehicleForPlayback[9] == pCar )
    {
      v4 = 9;
      v5 = &CVehicleRecording::bPlaybackGoingOn[9];
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[10] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[10];
    v3 = CVehicleRecording::pVehicleForPlayback[10];
    if ( CVehicleRecording::pVehicleForPlayback[10] == pCar )
    {
      v4 = 10;
      v5 = &CVehicleRecording::bPlaybackGoingOn[10];
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[11] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[11];
    v3 = CVehicleRecording::pVehicleForPlayback[11];
    if ( CVehicleRecording::pVehicleForPlayback[11] == pCar )
    {
      v4 = 11;
      v5 = &CVehicleRecording::bPlaybackGoingOn[11];
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[12] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[12];
    v3 = CVehicleRecording::pVehicleForPlayback[12];
    if ( CVehicleRecording::pVehicleForPlayback[12] == pCar )
    {
      v4 = 12;
      v5 = &CVehicleRecording::bPlaybackGoingOn[12];
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[13] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[13];
    v3 = CVehicleRecording::pVehicleForPlayback[13];
    if ( CVehicleRecording::pVehicleForPlayback[13] == pCar )
    {
      v4 = 13;
      v5 = &CVehicleRecording::bPlaybackGoingOn[13];
      goto LABEL_49;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[14] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[14];
    v3 = CVehicleRecording::pVehicleForPlayback[14];
    if ( CVehicleRecording::pVehicleForPlayback[14] == pCar )
    {
      v4 = 14;
      v5 = &CVehicleRecording::bPlaybackGoingOn[14];
LABEL_49:
      *(_DWORD *)&v3->m_nPhysicalFlags &= ~4u;
      CVehicleRecording::RestoreInfoForCar(
        pCar,
        (CVehicleStateEachFrame *)&CVehicleRecording::pPlaybackBuffer[v4][CVehicleRecording::PlaybackBufferSize[v4] - 32],
        0);
      (*((void (__fastcall **)(CVehicle *, _DWORD))(*v2)->_vptr$CPlaceable + 24))(*v2, 0);
      *v2 = 0;
      CVehicleRecording::pPlaybackBuffer[v4] = 0;
      CVehicleRecording::PlaybackBufferSize[v4] = 0;
      *v5 = 0;
      pCar->AutoPilot.RecordingNumber = -1;
      v6 = CVehicleRecording::PlayBackStreamingIndex[v4];
      v7 = &CVehicleRecording::StreamingArray[v6];
      v8 = v7->NumTimesUsed - 1;
      v7->NumTimesUsed = v8;
      if ( !v8 )
      {
        v9 = &CVehicleRecording::StreamingArray[v6];
        CMemoryMgr::Free(v9->pRecordingData);
        v9->pRecordingData = 0;
        sub_18CC68(v6 + 25755);
      }
      return;
    }
  }
  if ( CVehicleRecording::bPlaybackGoingOn[15] )
  {
    v2 = &CVehicleRecording::pVehicleForPlayback[15];
    v3 = CVehicleRecording::pVehicleForPlayback[15];
    if ( CVehicleRecording::pVehicleForPlayback[15] == pCar )
    {
      v4 = 15;
      v5 = &CVehicleRecording::bPlaybackGoingOn[15];
      goto LABEL_49;
    }
  }
}

//----- (003235F0) --------------------------------------------------------
void __fastcall CVehicleRecording::RestoreInfoForCar(CVehicle *pCar, CVehicleStateEachFrame *pCarState, bool bAnimEnd)
{
  _BOOL4 v5; // r8
  CMatrix *m_pMat; // r5
  RwReal y; // r1
  RwReal z; // r2
  float SpeedZ; // s0
  int m_nVehicleFlags; // r0
  int v11; // r2
  unsigned int v12; // r3
  CVector v13; // [sp+4h] [bp-1Ch] BYREF

  v5 = bAnimEnd;
  m_pMat = pCar->m_pMat;
  m_pMat->xx = (float)pCarState->Matrix_xx / 127.0;
  m_pMat->yx = (float)pCarState->Matrix_yx / 127.0;
  m_pMat->zx = (float)pCarState->Matrix_zx / 127.0;
  m_pMat->xy = (float)pCarState->Matrix_xy / 127.0;
  m_pMat->yy = (float)pCarState->Matrix_yy / 127.0;
  m_pMat->zy = (float)pCarState->Matrix_zy / 127.0;
  CrossProduct(&v13, (const CVector *)m_pMat, (const CVector *)&m_pMat->xy);
  y = v13.y;
  z = v13.z;
  m_pMat->xz = v13.x;
  m_pMat->yz = y;
  m_pMat->zz = z;
  m_pMat->tx = pCarState->CoorsX;
  m_pMat->ty = pCarState->CoorsY;
  m_pMat->tz = pCarState->CoorsZ;
  pCar->m_vecMoveSpeed.x = (float)pCarState->SpeedX / 16384.0;
  pCar->m_vecMoveSpeed.y = (float)pCarState->SpeedY / 16384.0;
  SpeedZ = (float)pCarState->SpeedZ;
  pCar->m_vecTurnSpeed.x = 0.0;
  pCar->m_vecTurnSpeed.y = 0.0;
  pCar->m_vecTurnSpeed.z = 0.0;
  pCar->m_vecMoveSpeed.z = SpeedZ / 16384.0;
  pCar->m_fSteerAngle = (float)pCarState->SteerAngle / 20.0;
  pCar->m_fGasPedal = (float)pCarState->Gas / 100.0;
  m_nVehicleFlags = (int)pCar->m_nVehicleFlags;
  v11 = *((_DWORD *)&pCar->m_nVehicleFlags + 1);
  v12 = m_nVehicleFlags & 0xFFFFFFDF;
  pCar->m_fBrakePedal = (float)pCarState->Brake / 100.0;
  if ( pCarState->HandBrake )
    v12 = m_nVehicleFlags | 0x20;
  *(_DWORD *)&pCar->m_nVehicleFlags = v12;
  *((_DWORD *)&pCar->m_nVehicleFlags + 1) = v11;
  if ( v5 )
  {
    pCar->m_fGasPedal = 0.0;
    pCar->m_fBrakePedal = 0.0;
    pCar->m_vecMoveSpeed.x = 0.0;
    pCar->m_vecMoveSpeed.y = 0.0;
    pCar->m_vecMoveSpeed.z = 0.0;
    *(_DWORD *)&pCar->m_nVehicleFlags = v12 & 0xFFFFFFDF;
    *((_DWORD *)&pCar->m_nVehicleFlags + 1) = v11;
  }
  if ( pCar->m_baseVehicleType == 9 )
    LOBYTE(pCar[1].m_vecTurnFriction.z) &= 0xE7u;
}

//----- (003237A4) --------------------------------------------------------
void CVehicleRecording::SaveOrRetrieveDataForThisFrame()
{
  int i; // r10
  float v1; // s0
  Int32 v2; // r2
  UInt8 *v3; // r1
  CVehicleStateEachFrame *v4; // r6
  CVehicleStateEachFrame *v5; // r5
  UInt8 *v6; // r3
  Int32 v7; // r2
  unsigned int TimeInRecording; // t1
  CTrain *v9; // r0
  CVehicle *v10; // r2
  RwObject_0 *m_pRwObject; // r0
  char *parent; // r1
  const CMatrix *m_pMat; // r0
  RwMatrix *v14; // r1
  CVehicle *v15; // r3
  CMatrix *v16; // r0
  CVector *p_tx; // r2
  CVehicle *v18; // r0
  Int32 v19; // r5
  CVehicleRecordingStreaming *v20; // r0
  UInt8 v21; // r1
  CVehicleRecordingStreaming *v22; // r6
  float *v23; // [sp+48h] [bp-58h]

  for ( i = 0; i != 16; ++i )
  {
    if ( !CVehicleRecording::bPlaybackGoingOn[i] )
      continue;
    v18 = CVehicleRecording::pVehicleForPlayback[i];
    if ( !v18 )
      goto LABEL_32;
    if ( (*((_BYTE *)&v18->m_nPhysicalFlags + 3) & 0x20) != 0 )
    {
      v18->AutoPilot.RecordingNumber = -1;
      *(_DWORD *)&CVehicleRecording::pVehicleForPlayback[i]->m_nPhysicalFlags &= ~4u;
LABEL_32:
      CVehicleRecording::pVehicleForPlayback[i] = 0;
      CVehicleRecording::pPlaybackBuffer[i] = 0;
      CVehicleRecording::bPlaybackGoingOn[i] = 0;
      CVehicleRecording::PlaybackBufferSize[i] = 0;
      v19 = CVehicleRecording::PlayBackStreamingIndex[i];
      v20 = &CVehicleRecording::StreamingArray[v19];
      v21 = v20->NumTimesUsed - 1;
      v20->NumTimesUsed = v21;
      if ( !v21 )
      {
        v22 = &CVehicleRecording::StreamingArray[v19];
        CMemoryMgr::Free(v22->pRecordingData);
        v22->pRecordingData = 0;
        CStreaming::RemoveModel(v19 + 25755);
      }
      continue;
    }
    if ( !CVehicleRecording::bUseCarAI[i] )
    {
      v23 = &CVehicleRecording::PlaybackRunningTime[i];
      if ( CVehicleRecording::bPlaybackPaused[i] )
      {
        v1 = *v23;
      }
      else
      {
        v1 = *v23
           + (float)((float)(CVehicleRecording::PlaybackSpeed[i]
                           * (float)(CTimer::m_snTimeInMilliseconds - CTimer::m_snPPPPreviousTimeInMilliseconds))
                   * 0.25);
        *v23 = v1;
      }
      v2 = CVehicleRecording::PlaybackIndex[i];
      v3 = CVehicleRecording::pPlaybackBuffer[i];
      v4 = (CVehicleStateEachFrame *)&v3[v2];
      v5 = (CVehicleStateEachFrame *)&v3[v2 + 32];
      if ( v1 > (float)v5->TimeInRecording )
      {
        v6 = &v3[CVehicleRecording::PlaybackBufferSize[i]];
        while ( 1 )
        {
          v4 = (CVehicleStateEachFrame *)&v3[v2];
          v5 = (CVehicleStateEachFrame *)&v3[v2 + 32];
          if ( v5 >= (CVehicleStateEachFrame *)v6 )
            break;
          v2 += 32;
          CVehicleRecording::PlaybackIndex[i] = v2;
          if ( v1 <= (float)v4[2].TimeInRecording )
          {
            v4 = (CVehicleStateEachFrame *)&v3[v2];
            v5 = (CVehicleStateEachFrame *)&v3[v2 + 32];
            break;
          }
        }
      }
      if ( v1 < (float)v4->TimeInRecording )
      {
        v7 = v2 - 32;
        do
        {
          if ( v4 <= (CVehicleStateEachFrame *)v3 )
            break;
          CVehicleRecording::PlaybackIndex[i] = v7;
          v7 -= 32;
          --v5;
          TimeInRecording = v4[-1].TimeInRecording;
          --v4;
        }
        while ( v1 < (float)TimeInRecording );
      }
      if ( v5 >= (CVehicleStateEachFrame *)&v3[CVehicleRecording::PlaybackBufferSize[i]] )
      {
        if ( CVehicleRecording::bPlaybackLooped[i] )
        {
          *v23 = 0.0;
          CVehicleRecording::PlaybackIndex[i] = 0;
        }
        else
        {
          CVehicleRecording::StopPlaybackRecordedCar(v18);
        }
      }
      else
      {
        CVehicleRecording::RestoreInfoForCar(v18, v4, 0);
        CVehicleRecording::InterpolateInfoForCar(
          CVehicleRecording::pVehicleForPlayback[i],
          v5,
          (float)(*v23 - (float)v4->TimeInRecording) / (float)(v5->TimeInRecording - v4->TimeInRecording));
        v9 = (CTrain *)CVehicleRecording::pVehicleForPlayback[i];
        if ( v9->m_vehicleType == 6 )
        {
          CTrain::FindPositionOnTrackFromCoors(v9);
          v9 = (CTrain *)CVehicleRecording::pVehicleForPlayback[i];
        }
        (*((void (__fastcall **)(CTrain *, _DWORD))v9->_vptr$CPlaceable + 24))(v9, 0);
        CPhysical::RemoveAndAdd(CVehicleRecording::pVehicleForPlayback[i]);
        v10 = CVehicleRecording::pVehicleForPlayback[i];
        m_pRwObject = v10->m_pRwObject;
        if ( m_pRwObject )
        {
          parent = (char *)m_pRwObject->parent;
          m_pMat = v10->m_pMat;
          v14 = (RwMatrix *)(parent + 16);
          if ( m_pMat )
            CMatrix::UpdateRwMatrix(m_pMat, v14);
          else
            CSimpleTransform::UpdateRwMatrix(&v10->m_transform, v14);
        }
        CEntity::UpdateRwFrame(CVehicleRecording::pVehicleForPlayback[i]);
        v15 = CVehicleRecording::pVehicleForPlayback[i];
        v16 = v15->m_pMat;
        p_tx = (CVector *)&v16->tx;
        if ( !v16 )
          p_tx = &v15->m_transform.m_translate;
        MarkSurroundingEntitiesForCollisionWithTrain(*p_tx, 5.0, CVehicleRecording::pVehicleForPlayback[i], 1);
      }
    }
  }
}

//----- (00323B7C) --------------------------------------------------------
void __fastcall CVehicleRecording::InterpolateInfoForCar(
        CVehicle *pCar,
        CVehicleStateEachFrame *pCarState,
        float Interp)
{
  float CoorsZ; // s7
  float v7; // s3
  float v8; // s5
  float z; // s8
  float v10; // s4
  CMatrix v11; // [sp+0h] [bp-100h] BYREF
  CMatrix v12; // [sp+48h] [bp-B8h] BYREF
  CMatrix v1; // [sp+90h] [bp-70h] BYREF

  v1.m_pRwMat = 0;
  v1.m_owner = 0;
  CMatrix::CMatrix(&v12, pCar->m_pMat);
  v1.xx = (float)pCarState->Matrix_xx / 127.0;
  v1.yx = (float)pCarState->Matrix_yx / 127.0;
  v1.zx = (float)pCarState->Matrix_zx / 127.0;
  v1.xy = (float)pCarState->Matrix_xy / 127.0;
  v1.yy = (float)pCarState->Matrix_yy / 127.0;
  v1.zy = (float)pCarState->Matrix_zy / 127.0;
  CrossProduct((CVector *)&v11, (const CVector *)&v1, (const CVector *)&v1.xy);
  CoorsZ = pCarState->CoorsZ;
  v7 = pCarState->CoorsX * Interp;
  v8 = pCarState->CoorsY * Interp;
  v1.xz = v11.xx * Interp;
  v12.xx = (float)(1.0 - Interp) * v12.xx;
  v1.yz = v11.yx * Interp;
  v1.zz = v11.zx * Interp;
  v1.xx = v1.xx * Interp;
  v1.yx = v1.yx * Interp;
  v1.zx = v1.zx * Interp;
  v1.xy = v1.xy * Interp;
  v1.yy = v1.yy * Interp;
  v1.zy = v1.zy * Interp;
  v12.yx = (float)(1.0 - Interp) * v12.yx;
  v1.tx = v7;
  v1.ty = v8;
  v1.tz = CoorsZ * Interp;
  v12.zx = (float)(1.0 - Interp) * v12.zx;
  v12.xy = (float)(1.0 - Interp) * v12.xy;
  v12.yy = (float)(1.0 - Interp) * v12.yy;
  v12.zy = (float)(1.0 - Interp) * v12.zy;
  v12.xz = (float)(1.0 - Interp) * v12.xz;
  v12.yz = (float)(1.0 - Interp) * v12.yz;
  v12.zz = (float)(1.0 - Interp) * v12.zz;
  v12.tx = (float)(1.0 - Interp) * v12.tx;
  v12.ty = (float)(1.0 - Interp) * v12.ty;
  v12.tz = (float)(1.0 - Interp) * v12.tz;
  operator+(&v11, &v1, &v12);
  CMatrix::operator=(pCar->m_pMat, &v11);
  CMatrix::~CMatrix(&v11);
  z = pCar->m_vecMoveSpeed.z;
  v10 = (float)(1.0 - Interp) * pCar->m_vecMoveSpeed.y;
  pCar->m_vecMoveSpeed.x = (float)((float)(1.0 - Interp) * pCar->m_vecMoveSpeed.x)
                         + (float)((float)((float)pCarState->SpeedX / 16384.0) * Interp);
  pCar->m_vecMoveSpeed.y = v10 + (float)((float)((float)pCarState->SpeedY / 16384.0) * Interp);
  pCar->m_vecMoveSpeed.z = (float)((float)(1.0 - Interp) * z)
                         + (float)((float)((float)pCarState->SpeedZ / 16384.0) * Interp);
  CMatrix::~CMatrix(&v12);
  CMatrix::~CMatrix(&v1);
}

//----- (00323E04) --------------------------------------------------------
void __fastcall CVehicleRecording::RestoreInfoForMatrix(CMatrix *mat, CVehicleStateEachFrame *pCarState)
{
  float y; // r1
  float z; // r2
  CVector v6; // [sp+4h] [bp-14h] BYREF

  mat->xx = (float)pCarState->Matrix_xx / 127.0;
  mat->yx = (float)pCarState->Matrix_yx / 127.0;
  mat->zx = (float)pCarState->Matrix_zx / 127.0;
  mat->xy = (float)pCarState->Matrix_xy / 127.0;
  mat->yy = (float)pCarState->Matrix_yy / 127.0;
  mat->zy = (float)pCarState->Matrix_zy / 127.0;
  CrossProduct(&v6, (const CVector *)mat, (const CVector *)&mat->xy);
  y = v6.y;
  z = v6.z;
  mat->xz = v6.x;
  mat->yz = y;
  mat->zz = z;
  mat->tx = pCarState->CoorsX;
  mat->ty = pCarState->CoorsY;
  mat->tz = pCarState->CoorsZ;
}

//----- (00323EB4) --------------------------------------------------------
void __fastcall CVehicleRecording::SkipForwardInRecording(CVehicle *pCar, float Dist)
{
  int v2; // r4
  unsigned int v4; // r5
  UInt8 *v5; // r0
  unsigned int *v6; // r1
  unsigned int v7; // r3
  float32x2_t v8; // d17
  float32x2_t v9; // d16
  unsigned __int64 v10; // d1
  float32x2_t v11; // d17
  float32x2_t v12; // d16
  unsigned __int64 v13; // d1

  if ( CVehicleRecording::bPlaybackGoingOn[0] && CVehicleRecording::pVehicleForPlayback[0] == pCar )
  {
    v2 = 0;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[1] && CVehicleRecording::pVehicleForPlayback[1] == pCar )
  {
    v2 = 1;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[2] && CVehicleRecording::pVehicleForPlayback[2] == pCar )
  {
    v2 = 2;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[3] && CVehicleRecording::pVehicleForPlayback[3] == pCar )
  {
    v2 = 3;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[4] && CVehicleRecording::pVehicleForPlayback[4] == pCar )
  {
    v2 = 4;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[5] && CVehicleRecording::pVehicleForPlayback[5] == pCar )
  {
    v2 = 5;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[6] && CVehicleRecording::pVehicleForPlayback[6] == pCar )
  {
    v2 = 6;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[7] && CVehicleRecording::pVehicleForPlayback[7] == pCar )
  {
    v2 = 7;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[8] && CVehicleRecording::pVehicleForPlayback[8] == pCar )
  {
    v2 = 8;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[9] && CVehicleRecording::pVehicleForPlayback[9] == pCar )
  {
    v2 = 9;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[10] && CVehicleRecording::pVehicleForPlayback[10] == pCar )
  {
    v2 = 10;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[11] && CVehicleRecording::pVehicleForPlayback[11] == pCar )
  {
    v2 = 11;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[12] && CVehicleRecording::pVehicleForPlayback[12] == pCar )
  {
    v2 = 12;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[13] && CVehicleRecording::pVehicleForPlayback[13] == pCar )
  {
    v2 = 13;
  }
  else if ( CVehicleRecording::bPlaybackGoingOn[14] && CVehicleRecording::pVehicleForPlayback[14] == pCar )
  {
    v2 = 14;
  }
  else
  {
    v2 = 16;
    if ( CVehicleRecording::pVehicleForPlayback[15] == pCar )
      v2 = 15;
    if ( !CVehicleRecording::bPlaybackGoingOn[15] )
      v2 = 16;
  }
  v4 = CVehicleRecording::PlaybackIndex[v2];
  v5 = CVehicleRecording::pPlaybackBuffer[v2];
  v6 = (unsigned int *)&v5[v4];
  while ( 1 )
  {
    while ( Dist > 0.0 )
    {
      if ( v4 >= CVehicleRecording::PlaybackBufferSize[v2] - 32 )
        goto LABEL_58;
      v6 = (unsigned int *)&v5[v4 + 32];
      CVehicleRecording::PlaybackIndex[v2] = v4 + 32;
      v8.n64_u64[0] = *(unsigned __int64 *)&v5[v4 + 20];
      v4 += 32;
      v7 = v4;
      v9.n64_u64[0] = vsub_f32(v8, *(float32x2_t *)&v5[v4 + 20]).n64_u64[0];
      v10 = vmul_f32(v9, v9).n64_u64[0];
      Dist = Dist - sqrtf(*(float *)&v10 + *((float *)&v10 + 1));
      if ( Dist <= 0.0 )
        goto LABEL_59;
    }
    if ( v4 < 0x21 )
      break;
    v6 = (unsigned int *)&v5[v4 - 32];
    CVehicleRecording::PlaybackIndex[v2] = v4 - 32;
    v11.n64_u64[0] = *(unsigned __int64 *)&v5[v4 + 20];
    v4 -= 32;
    v7 = v4;
    v12.n64_u64[0] = vsub_f32(v11, *(float32x2_t *)&v5[v4 + 20]).n64_u64[0];
    v13 = vmul_f32(v12, v12).n64_u64[0];
    Dist = Dist + sqrtf(*(float *)&v13 + *((float *)&v13 + 1));
    if ( Dist >= 0.0 )
      goto LABEL_59;
  }
LABEL_58:
  v7 = v4;
LABEL_59:
  CVehicleRecording::PlaybackRunningTime[v2] = (float)*v6;
  if ( CVehicleRecording::bUseCarAI[v2] )
  {
    CVehicleRecording::RestoreInfoForCar(
      CVehicleRecording::pVehicleForPlayback[v2],
      (CVehicleStateEachFrame *)&v5[v7],
      0);
    (*((void (__fastcall **)(CVehicle *, _DWORD))CVehicleRecording::pVehicleForPlayback[v2]->_vptr$CPlaceable + 24))(
      CVehicleRecording::pVehicleForPlayback[v2],
      0);
  }
}

//----- (003241FC) --------------------------------------------------------
void __fastcall CVehicleRecording::RenderLineSegment(Int32 *PointsStored)
{
  int v2; // r0
  RwImVertexIndex *v3; // r1

  if ( *PointsStored >= 2 )
  {
    v2 = 0;
    do
    {
      v3 = &TempBufferRenderIndexList[2 * v2];
      *v3 = v2++;
      v3[1] = v2;
    }
    while ( v2 < *PointsStored - 1 );
    if ( RwIm3DTransform(TempVertexBuffer.m_3d, *PointsStored, 0, 0) )
    {
      RwIm3DRenderIndexedPrimitive(rwPRIMTYPELINELIST, TempBufferRenderIndexList, 2 * *PointsStored - 2);
      RwIm3DEnd();
    }
  }
  *PointsStored = 0;
}

//----- (00324264) --------------------------------------------------------
Int32 __fastcall CVehicleRecording::RegisterRecordingFile(const unsigned __int8 *pFilename)
{
  Int32 result; // r0
  Int32 v3; // [sp+4h] [bp-Ch] BYREF

  v3 = 850;
  if ( !sscanf((const char *)pFilename, "carrec%d", &v3) )
    sscanf((const char *)pFilename, "CARREC%d", &v3);
  result = CVehicleRecording::NumPlayBackFiles;
  CVehicleRecording::StreamingArray[CVehicleRecording::NumPlayBackFiles].FileNameNumber = v3;
  CVehicleRecording::StreamingArray[result].pRecordingData = 0;
  CVehicleRecording::NumPlayBackFiles = result + 1;
  return result;
}

//----- (003242CC) --------------------------------------------------------
bool __fastcall CVehicleRecording::HasRecordingFileBeenLoaded(Int32 FileNameNo)
{
  CVehicleRecordingStreaming *v1; // r3
  Int32 v2; // r1

  if ( CVehicleRecording::NumPlayBackFiles < 1 )
  {
LABEL_5:
    v2 = 0;
  }
  else
  {
    v1 = CVehicleRecording::StreamingArray;
    v2 = 0;
    while ( v1->FileNameNumber != FileNameNo )
    {
      ++v2;
      ++v1;
      if ( v2 >= CVehicleRecording::NumPlayBackFiles )
        goto LABEL_5;
    }
  }
  return CVehicleRecording::StreamingArray[v2].pRecordingData != 0;
}

//----- (00324314) --------------------------------------------------------
void __fastcall CVehicleRecording::RemoveRecordingFile(Int32 FileNameNo)
{
  int32 v2; // r5
  int v3; // r4
  UInt8 *p_NumTimesUsed; // r6
  void *v5; // r0

  v2 = 25755;
  v3 = 475;
  p_NumTimesUsed = &CVehicleRecording::StreamingArray[0].NumTimesUsed;
  do
  {
    if ( *((_DWORD *)p_NumTimesUsed - 3) == FileNameNo )
    {
      v5 = (void *)*((_DWORD *)p_NumTimesUsed - 2);
      if ( v5 )
      {
        if ( !*p_NumTimesUsed )
        {
          CMemoryMgr::Free(v5);
          *((_DWORD *)p_NumTimesUsed - 2) = 0;
          CStreaming::RemoveModel(v2);
        }
      }
    }
    p_NumTimesUsed += 16;
    --v3;
    ++v2;
  }
  while ( v3 );
}

//----- (00324368) --------------------------------------------------------
void __fastcall CVehicleRecording::Load(RwStream_0 *pStream, Int32 Index, Int32 FileSize)
{
  CVehicleRecordingStreaming *v4; // r5
  UInt8 *v5; // r0
  UInt8 **p_pRecordingData; // r5
  int v7; // r2
  int *v8; // r0
  unsigned int *v9; // r1
  int i; // r3
  unsigned int v11; // r3
  unsigned int v12; // r2

  v4 = &CVehicleRecording::StreamingArray[Index];
  v5 = (UInt8 *)CMemoryMgr::Malloc(FileSize);
  v4->pRecordingData = v5;
  p_pRecordingData = &v4->pRecordingData;
  p_pRecordingData[1] = (UInt8 *)RwStreamRead(pStream, v5, (RwUInt32)&CWorld::m_aTempColPts[2].m_vecNormal.y + 3);
  RwStreamClose(pStream, 0);
  v7 = (int)p_pRecordingData[1];
  v8 = (int *)(p_pRecordingData + 1);
  if ( v7 <= 0 )
  {
    v9 = (unsigned int *)*p_pRecordingData;
  }
  else
  {
    v9 = (unsigned int *)*p_pRecordingData;
    for ( i = 0; i < v7; i += 32 )
    {
      if ( i && !v9[i / 4u] )
      {
        *v8 = i;
        v7 = i;
      }
    }
  }
  if ( (unsigned int)(v7 - 32) >= 0x21 )
  {
    v11 = *v9;
    v12 = 32;
    do
    {
      v11 = (unsigned int)(float)((float)(v11 + v9[v12 / 4 + 8]) * 0.5);
      v9[v12 / 4] = v11;
      v12 += 32;
    }
    while ( v12 < *v8 - 32 );
  }
}

//----- (003243FC) --------------------------------------------------------
void __fastcall CVehicleRecording::SmoothRecording(Int32 Index)
{
  CVehicleRecordingStreaming *v1; // lr
  Int32 *p_RecordingDataSize; // lr
  Int32 RecordingDataSize; // t1
  unsigned int *v4; // r12
  int v5; // r2
  unsigned int v6; // r3
  unsigned int v7; // s2
  unsigned int v8; // r1

  v1 = &CVehicleRecording::StreamingArray[Index];
  RecordingDataSize = v1->RecordingDataSize;
  p_RecordingDataSize = &v1->RecordingDataSize;
  if ( (unsigned int)(RecordingDataSize - 32) >= 0x21 )
  {
    v4 = (unsigned int *)*(p_RecordingDataSize - 1);
    v5 = 0;
    v6 = *v4;
    do
    {
      v7 = (unsigned int)(float)((float)(v4[v5 + 16] + v6) * 0.5);
      v4[v5 + 8] = v7;
      v8 = v5 * 4 + 64;
      v6 = v7;
      v5 += 8;
    }
    while ( v8 < *p_RecordingDataSize - 32 );
  }
}

//----- (00324460) --------------------------------------------------------
void CVehicleRecording::RemoveAllRecordingsThatArentUsed()
{
  int32 v0; // r4
  int v1; // r6
  UInt8 *p_NumTimesUsed; // r5
  void *v3; // r0

  v0 = 25755;
  v1 = 475;
  p_NumTimesUsed = &CVehicleRecording::StreamingArray[0].NumTimesUsed;
  do
  {
    v3 = (void *)*((_DWORD *)p_NumTimesUsed - 2);
    if ( v3 )
    {
      if ( !*p_NumTimesUsed )
      {
        CMemoryMgr::Free(v3);
        *((_DWORD *)p_NumTimesUsed - 2) = 0;
        CStreaming::RemoveModel(v0);
      }
    }
    p_NumTimesUsed += 16;
    --v1;
    ++v0;
  }
  while ( v1 );
}

//----- (003244AC) --------------------------------------------------------
void __fastcall CRemote::GivePlayerRemoteControlledCar(
        float CoorX,
        float CoorY,
        float CoorZ,
        float Orientation,
        int nModelIndex)
{
  char *v11; // r4
  float GroundZFor3DCoord; // r5
  float DistanceFromCentreOfMassToBaseOfModel; // r6
  int v14; // r0
  float *v15; // r0
  char v16; // r1
  int v17; // r2
  int v18; // r1
  unsigned int v19; // r0
  CVehicle *PlayerVehicle; // r0
  CPlayerInfo *v21; // r1
  bool pBool; // [sp+7h] [bp-31h] BYREF

  if ( CModelInfo::IsHeliModel(nModelIndex) )
  {
    v11 = (char *)CVehicle::operator new(0xA2Cu);
    CHeli::CHeli((CHeli *)v11, nModelIndex, 2u);
  }
  else if ( CModelInfo::IsPlaneModel(nModelIndex) )
  {
    v11 = (char *)CVehicle::operator new(0xA18u);
    CPlane::CPlane((CPlane *)v11, nModelIndex, 2u);
  }
  else
  {
    v11 = (char *)CVehicle::operator new(0x99Cu);
    CAutomobile::CAutomobile((CAutomobile *)v11, nModelIndex, 2u, 1u);
  }
  GroundZFor3DCoord = CWorld::FindGroundZFor3DCoord(CoorX, CoorY, CoorZ + 2.0, &pBool, 0);
  DistanceFromCentreOfMassToBaseOfModel = CEntity::GetDistanceFromCentreOfMassToBaseOfModel((CEntity *)v11);
  CMatrix::SetRotateZOnly(*((CMatrix **)v11 + 5), Orientation);
  v14 = *((_DWORD *)v11 + 5);
  if ( v14 )
  {
    *(float *)(v14 + 48) = CoorX;
    *(float *)(*((_DWORD *)v11 + 5) + 52) = CoorY;
    v15 = (float *)(*((_DWORD *)v11 + 5) + 56);
  }
  else
  {
    v15 = (float *)(v11 + 12);
    *((float *)v11 + 1) = CoorX;
    *((float *)v11 + 2) = CoorY;
  }
  *v15 = GroundZFor3DCoord + DistanceFromCentreOfMassToBaseOfModel;
  v16 = v11[58];
  *((_DWORD *)v11 + 267) |= 8u;
  v11[58] = v16 & 7 | 0x40;
  CCarCtrl::JoinCarWithRoadSystem((CVehicle *)v11);
  v17 = *((_DWORD *)v11 + 268);
  v18 = *((_DWORD *)v11 + 267);
  v11[959] = 0;
  *((_DWORD *)v11 + 243) = 1091567616;
  v11[980] = 9;
  *(_DWORD *)(v11 + 955) = 0;
  v19 = v18 & 0xFFFFFFEF;
  if ( (v17 & 0x200) == 0 )
    v19 = v18 | 0x10;
  *((_DWORD *)v11 + 267) = v19;
  CWorld::Add((CEntity *)v11);
  if ( FindPlayerVehicle(-1, 0) )
  {
    PlayerVehicle = FindPlayerVehicle(-1, 0);
    PlayerVehicle->m_info = (CEntity::CEntityInfo)(*(_BYTE *)&PlayerVehicle->m_info & 7 | 0x48);
  }
  v21 = &CWorld::Players[CWorld::PlayerInFocus];
  v21->pRemoteVehicle = (CVehicle *)v11;
  CEntity::RegisterReference((CEntity *)v11, &v21->pRemoteVehicle);
  CCamera::TakeControl(&TheCamera, (CEntity *)v11, 18, 1, 1);
  CCamera::SetZoomValueCamStringScript(&TheCamera, 1);
}

//----- (00324650) --------------------------------------------------------
void __fastcall CRemote::TakeRemoteControlledCarFromPlayer(bool bCreateExplosion)
{
  __int16 v2; // r1
  CVehicle *pRemoteVehicle; // r0
  int v4; // r2
  CPlayerInfo *v5; // r1
  uint32 v6; // r0

  v2 = CWorld::PlayerInFocus;
  pRemoteVehicle = CWorld::Players[CWorld::PlayerInFocus].pRemoteVehicle;
  if ( pRemoteVehicle->VehicleCreatedBy == 2 )
  {
    CVehicle::SetVehicleCreatedBy(pRemoteVehicle, 1, 0);
    v4 = -1075391197
       * (((char *)CWorld::Players[CWorld::PlayerInFocus].pRemoteVehicle - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2);
    CMissionCleanup::RemoveEntityFromList(
      &CTheScripts::MissionCleanUp,
      CPools::ms_pVehiclePool->m_aFlags[v4] | (v4 << 8),
      1u);
    v2 = CWorld::PlayerInFocus;
    pRemoteVehicle = CWorld::Players[CWorld::PlayerInFocus].pRemoteVehicle;
  }
  v5 = &CWorld::Players[v2];
  *(_DWORD *)&pRemoteVehicle->m_nVehicleFlags &= ~8u;
  v6 = CTimer::m_snTimeInMilliseconds;
  v5->bAfterRemoteVehicleExplosion = 1;
  v5->TimeOfRemoteVehicleExplosion = v6;
  v5->bCreateRemoteVehicleExplosion = bCreateExplosion;
  v5->bFadeAfterRemoteVehicleExplosion = 1;
}
// 678534: using guessed type int *CPools::ms_pVehiclePool;

//----- (00324728) --------------------------------------------------------
void __fastcall CRemote::TakeRemoteControlOfCar(CVehicle *pVehicle)
{
  CPlayerInfo *v2; // r1
  CVehicle **p_pRemoteVehicle; // r1
  CVehicle *v4; // r2
  CVehicle *pRemoteVehicle; // t1
  int v6; // r5
  int m_nVehicleFlags; // r2
  int v8; // r3
  unsigned int v9; // r1
  CVehicle *PlayerVehicle; // r0
  __int16 v11; // r2
  CPlayerInfo *v12; // r1
  CEntity *v13; // r0
  CEntity **v14; // r1
  CVehicle *v15; // t1
  CPlayerInfo *v16; // r1

  v2 = &CWorld::Players[CWorld::PlayerInFocus];
  pRemoteVehicle = v2->pRemoteVehicle;
  p_pRemoteVehicle = &v2->pRemoteVehicle;
  v4 = pRemoteVehicle;
  if ( pRemoteVehicle )
  {
    v6 = 0;
    v4->m_info = (CEntity::CEntityInfo)(*(_BYTE *)&v4->m_info & 7 | 0x18);
    if ( *p_pRemoteVehicle != pVehicle )
      v6 = 1;
  }
  else
  {
    v6 = 0;
  }
  pVehicle->AutoPilot.TempAction = 0;
  pVehicle->AutoPilot.ActualSpeed = 9.0;
  pVehicle->AutoPilot.CruiseSpeed = 9;
  *(_DWORD *)&pVehicle->AutoPilot.OldLane = 0;
  m_nVehicleFlags = (int)pVehicle->m_nVehicleFlags;
  v8 = *((_DWORD *)&pVehicle->m_nVehicleFlags + 1);
  pVehicle->m_info = (CEntity::CEntityInfo)(*(_BYTE *)&pVehicle->m_info & 7 | 0x40);
  v9 = m_nVehicleFlags & 0xFFFFFFE7 | 8;
  if ( (v8 & 0x200) == 0 )
    v9 = m_nVehicleFlags | 0x18;
  *(_DWORD *)&pVehicle->m_nVehicleFlags = v9;
  if ( FindPlayerVehicle(-1, 0) )
  {
    PlayerVehicle = FindPlayerVehicle(-1, 0);
    PlayerVehicle->m_info = (CEntity::CEntityInfo)(*(_BYTE *)&PlayerVehicle->m_info & 7 | 0x48);
  }
  v11 = CWorld::PlayerInFocus;
  v12 = &CWorld::Players[CWorld::PlayerInFocus];
  v15 = v12->pRemoteVehicle;
  v14 = &v12->pRemoteVehicle;
  v13 = v15;
  if ( v15 )
  {
    CEntity::CleanUpOldReference(v13, v14);
    v11 = CWorld::PlayerInFocus;
  }
  v16 = &CWorld::Players[v11];
  v16->pRemoteVehicle = pVehicle;
  CEntity::RegisterReference(pVehicle, &v16->pRemoteVehicle);
  if ( v6 == 1 )
    CCamera::TakeControl(&TheCamera, pVehicle, 18, 2, 1);
  else
    CCamera::TakeControl(&TheCamera, pVehicle, 18, 1, 1);
  sub_19F2F8(&TheCamera, 1);
}

//----- (00324874) --------------------------------------------------------
void CRestart::Initialise()
{
  *(_QWORD *)&CRestart::PoliceRestartPoints[0].x = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartPoints[0].z = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartPoints[1].y = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartPoints[2].x = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartPoints[0].x = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartPoints[0].z = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartPoints[1].y = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartPoints[2].x = 0LL;
  CRestart::HospitalRestartHeadings[8] = 0.0;
  CRestart::HospitalRestartHeadings[9] = 0.0;
  *(_QWORD *)CRestart::HospitalRestartHeadings = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartHeadings[2] = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartHeadings[4] = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartHeadings[6] = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartPoints[8].x = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartPoints[8].z = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartPoints[6].z = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartPoints[7].y = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartPoints[5].y = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartPoints[6].x = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartPoints[4].x = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartPoints[4].z = 0LL;
  CRestart::HospitalRestartPoints[9].y = 0.0;
  CRestart::HospitalRestartPoints[9].z = 0.0;
  *(_QWORD *)&CRestart::HospitalRestartPoints[2].z = 0LL;
  *(_QWORD *)&CRestart::HospitalRestartPoints[3].y = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartPoints[8].x = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartPoints[8].z = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartPoints[6].z = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartPoints[7].y = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartPoints[5].y = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartPoints[6].x = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartPoints[4].x = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartPoints[4].z = 0LL;
  CRestart::PoliceRestartPoints[9].y = 0.0;
  CRestart::PoliceRestartPoints[9].z = 0.0;
  *(_QWORD *)&CRestart::PoliceRestartPoints[2].z = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartPoints[3].y = 0LL;
  CRestart::PoliceRestartHeadings[8] = 0.0;
  CRestart::PoliceRestartHeadings[9] = 0.0;
  *(_QWORD *)CRestart::PoliceRestartHeadings = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartHeadings[2] = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartHeadings[4] = 0LL;
  *(_QWORD *)&CRestart::PoliceRestartHeadings[6] = 0LL;
  CRestart::NumberOfHospitalRestarts = 0;
  CRestart::NumberOfPoliceRestarts = 0;
  CRestart::bOverrideRestart = 0;
  CRestart::OverridePosition.x = 0.0;
  CRestart::OverridePosition.y = 0.0;
  CRestart::OverridePosition.z = 0.0;
  CRestart::OverrideHeading = 0.0;
  CRestart::bFadeInAfterNextDeath = 1;
  CRestart::bFadeInAfterNextArrest = 1;
  CRestart::ExtraHospitalRestartRadius = 0.0;
  CRestart::ExtraPoliceStationRestartRadius = 0.0;
  CRestart::bOverrideRespawnBasePointForMission = 0;
}

//----- (003249B8) --------------------------------------------------------
void __fastcall CRestart::AddHospitalRestartPoint(const CVector *NewPoint, const float NewHeading, Int32 WhenToUse)
{
  __int64 v3; // d16
  RwReal z; // r9
  int v5; // r5
  CVector *v6; // r0

  v3 = *(_QWORD *)&NewPoint->x;
  z = NewPoint->z;
  v5 = CRestart::NumberOfHospitalRestarts;
  v6 = &CRestart::HospitalRestartPoints[CRestart::NumberOfHospitalRestarts];
  CRestart::HospitalRestartWhenToUse[CRestart::NumberOfHospitalRestarts] = WhenToUse;
  v6->z = z;
  *(_QWORD *)&v6->x = v3;
  CRestart::HospitalRestartHeadings[v5] = NewHeading;
  CRestart::NumberOfHospitalRestarts = v5 + 1;
}

//----- (00324A20) --------------------------------------------------------
void __fastcall CRestart::AddPoliceRestartPoint(const CVector *NewPoint, const float NewHeading, Int32 WhenToUse)
{
  __int64 v3; // d16
  RwReal z; // r9
  int v5; // r5
  CVector *v6; // r0

  v3 = *(_QWORD *)&NewPoint->x;
  z = NewPoint->z;
  v5 = CRestart::NumberOfPoliceRestarts;
  v6 = &CRestart::PoliceRestartPoints[CRestart::NumberOfPoliceRestarts];
  CRestart::PoliceRestartWhenToUse[CRestart::NumberOfPoliceRestarts] = WhenToUse;
  v6->z = z;
  *(_QWORD *)&v6->x = v3;
  CRestart::PoliceRestartHeadings[v5] = NewHeading;
  CRestart::NumberOfPoliceRestarts = v5 + 1;
}

//----- (00324A88) --------------------------------------------------------
void __fastcall CRestart::FindClosestHospitalRestartPoint(CVector TestPoint, CVector *ClosestPoint, float *pHeading)
{
  float *v4; // r6
  __int64 v5; // d16
  float32x2_t v6; // d16
  unsigned __int64 v7; // d1
  __int64 v8; // d16
  float v9; // r0
  eLevelName LevelFromPosition; // r5
  __int16 v11; // r8
  float v12; // s16
  int v13; // r9
  unsigned __int16 v14; // r10
  float v15; // s20
  CVector *v16; // r0
  float v17; // s22
  float v18; // s20
  CVector *v19; // r1
  __int64 v20; // d16
  CVector pPoint; // [sp+8h] [bp-50h] BYREF

  pPoint = TestPoint;
  v4 = pHeading;
  if ( CRestart::bOverrideRestart )
  {
    v5 = *(_QWORD *)&CRestart::OverridePosition.x;
    ClosestPoint->z = CRestart::OverridePosition.z;
    *(_QWORD *)&ClosestPoint->x = v5;
    *pHeading = CRestart::OverrideHeading;
    CRestart::bOverrideRestart = 0;
    return;
  }
  if ( CRestart::bOverrideRespawnBasePointForMission )
  {
    pPoint = CRestart::OverrideRespawnBasePointForMission;
    CRestart::bOverrideRespawnBasePointForMission = 0;
  }
  if ( CRestart::ExtraHospitalRestartRadius > 0.0 )
  {
    v6.n64_u64[0] = vsub_f32(*(float32x2_t *)&pPoint.x, *(float32x2_t *)&CRestart::ExtraHospitalRestartCoors.x).n64_u64[0];
    v7 = vmul_f32(v6, v6).n64_u64[0];
    if ( sqrtf(*(float *)&v7 + *((float *)&v7 + 1)) < CRestart::ExtraHospitalRestartRadius )
    {
      v8 = *(_QWORD *)&CRestart::ExtraHospitalRestartCoors.x;
      ClosestPoint->z = CRestart::ExtraHospitalRestartCoors.z;
      *(_QWORD *)&ClosestPoint->x = v8;
      v9 = CRestart::ExtraHospitalRestartHeading;
LABEL_21:
      *v4 = v9;
      return;
    }
  }
  LevelFromPosition = CTheZones::GetLevelFromPosition(&pPoint);
  if ( CRestart::NumberOfHospitalRestarts )
  {
    v11 = -1;
    v12 = 10000000.0;
    v13 = 0;
    v14 = 0;
    do
    {
      v15 = (float)CRestart::HospitalRestartWhenToUse[v13];
      if ( CStats::GetStatValue(0xB5u) >= v15 )
      {
        v16 = &CRestart::HospitalRestartPoints[v13];
        v17 = sqrtf(
                (float)((float)((float)(pPoint.x - v16->x) * (float)(pPoint.x - v16->x))
                      + (float)((float)(pPoint.y - v16->y) * (float)(pPoint.y - v16->y)))
              + (float)((float)(pPoint.z - v16->z) * (float)(pPoint.z - v16->z)));
        if ( LevelFromPosition )
        {
          v18 = v17 * 6.0;
          if ( LevelFromPosition == CTheZones::GetLevelFromPosition(v16) )
            v18 = v17;
        }
        else
        {
          v18 = v17;
        }
        if ( v18 < v12 )
        {
          v11 = v14;
          v12 = v18;
        }
      }
      v13 = ++v14;
    }
    while ( v14 < (unsigned int)CRestart::NumberOfHospitalRestarts );
    v4 = pHeading;
    if ( v11 >= 0 )
    {
      v19 = &CRestart::HospitalRestartPoints[v11];
      v20 = *(_QWORD *)&v19->x;
      ClosestPoint->z = v19->z;
      *(_QWORD *)&ClosestPoint->x = v20;
      v9 = CRestart::HospitalRestartHeadings[v11];
      goto LABEL_21;
    }
  }
}

//----- (00324CB4) --------------------------------------------------------
void __fastcall CRestart::FindClosestPoliceRestartPoint(CVector TestPoint, CVector *ClosestPoint, float *pHeading)
{
  float *v4; // r6
  __int64 v5; // d16
  float32x2_t v6; // d16
  unsigned __int64 v7; // d1
  __int64 v8; // d16
  float v9; // r0
  eLevelName LevelFromPosition; // r5
  __int16 v11; // r8
  float v12; // s16
  int v13; // r9
  unsigned __int16 v14; // r10
  float v15; // s20
  CVector *v16; // r0
  float v17; // s22
  float v18; // s20
  CVector *v19; // r1
  __int64 v20; // d16
  CVector pPoint; // [sp+8h] [bp-50h] BYREF

  pPoint = TestPoint;
  v4 = pHeading;
  if ( CRestart::bOverrideRestart )
  {
    v5 = *(_QWORD *)&CRestart::OverridePosition.x;
    ClosestPoint->z = CRestart::OverridePosition.z;
    *(_QWORD *)&ClosestPoint->x = v5;
    *pHeading = CRestart::OverrideHeading;
    CRestart::bOverrideRestart = 0;
    return;
  }
  if ( CRestart::bOverrideRespawnBasePointForMission )
  {
    pPoint = CRestart::OverrideRespawnBasePointForMission;
    CRestart::bOverrideRespawnBasePointForMission = 0;
  }
  if ( CRestart::ExtraPoliceStationRestartRadius > 0.0 )
  {
    v6.n64_u64[0] = vsub_f32(*(float32x2_t *)&pPoint.x, *(float32x2_t *)&CRestart::ExtraPoliceStationRestartCoors.x).n64_u64[0];
    v7 = vmul_f32(v6, v6).n64_u64[0];
    if ( sqrtf(*(float *)&v7 + *((float *)&v7 + 1)) < CRestart::ExtraPoliceStationRestartRadius )
    {
      v8 = *(_QWORD *)&CRestart::ExtraPoliceStationRestartCoors.x;
      ClosestPoint->z = CRestart::ExtraPoliceStationRestartCoors.z;
      *(_QWORD *)&ClosestPoint->x = v8;
      v9 = CRestart::ExtraPoliceStationRestartHeading;
LABEL_21:
      *v4 = v9;
      return;
    }
  }
  LevelFromPosition = CTheZones::GetLevelFromPosition(&pPoint);
  if ( CRestart::NumberOfPoliceRestarts )
  {
    v11 = -1;
    v12 = 100000.0;
    v13 = 0;
    v14 = 0;
    do
    {
      v15 = (float)CRestart::PoliceRestartWhenToUse[v13];
      if ( CStats::GetStatValue(0xB5u) >= v15 )
      {
        v16 = &CRestart::PoliceRestartPoints[v13];
        v17 = sqrtf(
                (float)((float)((float)(pPoint.x - v16->x) * (float)(pPoint.x - v16->x))
                      + (float)((float)(pPoint.y - v16->y) * (float)(pPoint.y - v16->y)))
              + (float)((float)(pPoint.z - v16->z) * (float)(pPoint.z - v16->z)));
        if ( LevelFromPosition )
        {
          v18 = v17 * 6.0;
          if ( LevelFromPosition == CTheZones::GetLevelFromPosition(v16) )
            v18 = v17;
        }
        else
        {
          v18 = v17;
        }
        if ( v18 < v12 )
        {
          v11 = v14;
          v12 = v18;
        }
      }
      v13 = ++v14;
    }
    while ( v14 < (unsigned int)CRestart::NumberOfPoliceRestarts );
    v4 = pHeading;
    if ( v11 >= 0 )
    {
      v19 = &CRestart::PoliceRestartPoints[v11];
      v20 = *(_QWORD *)&v19->x;
      ClosestPoint->z = v19->z;
      *(_QWORD *)&ClosestPoint->x = v20;
      v9 = CRestart::PoliceRestartHeadings[v11];
      goto LABEL_21;
    }
  }
}

//----- (00324EE0) --------------------------------------------------------
void __fastcall CRestart::OverrideNextRestart(const CVector *OverridePoint, const float OverrideHdng)
{
  __int64 v2; // d16

  v2 = *(_QWORD *)&OverridePoint->x;
  CRestart::OverridePosition.z = OverridePoint->z;
  *(_QWORD *)&CRestart::OverridePosition.x = v2;
  CRestart::OverrideHeading = OverrideHdng;
  CRestart::bOverrideRestart = 1;
}

//----- (00324F18) --------------------------------------------------------
void CRestart::CancelOverrideRestart()
{
  CRestart::bOverrideRestart = 0;
}

//----- (00324F28) --------------------------------------------------------
void __fastcall CRestart::SetRespawnPointForDurationOfMission(CVector Coors)
{
  CRestart::bOverrideRespawnBasePointForMission = 1;
  CRestart::OverrideRespawnBasePointForMission = Coors;
}

//----- (00324F54) --------------------------------------------------------
void CRestart::ClearRespawnPointForDurationOfMission()
{
  CRestart::bOverrideRespawnBasePointForMission = 0;
}

//----- (00324F70) --------------------------------------------------------
void CRoadBlocks::Init()
{
  void *v0; // r4

  CRoadBlocks::bGenerateDynamicRoadBlocks = 0;
  memset(CRoadBlocks::InOrOut, 1, sizeof(CRoadBlocks::InOrOut));
  v0 = (void *)CFileMgr::OpenFile("data\\paths\\roadblox.dat", "rb");
  OS_FileRead(v0, &CRoadBlocks::NumRoadBlocks, 4);
  OS_FileRead(v0, CRoadBlocks::RoadBlockNodes, 1300);
  CFileMgr::CloseFile((u_native)v0);
  CRoadBlocks::aScriptRoadBlocks[1].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[0].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[2].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[3].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[4].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[5].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[6].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[7].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[8].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[9].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[10].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[11].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[12].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[13].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[14].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[15].bActive = 0;
}

//----- (00325034) --------------------------------------------------------
void CRoadBlocks::ClearScriptRoadBlocks()
{
  CRoadBlocks::aScriptRoadBlocks[1].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[0].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[2].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[3].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[4].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[5].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[6].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[7].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[8].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[9].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[10].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[11].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[12].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[13].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[14].bActive = 0;
  CRoadBlocks::aScriptRoadBlocks[15].bActive = 0;
}

//----- (00325080) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
void CRoadBlocks::GenerateRoadBlocks()
{
  Int32 v0; // r1
  UInt32 v1; // r6
  UInt32 v2; // r0
  Int32 v3; // r9
  Int32 v4; // r5
  Int32 v5; // r0
  Int32 v6; // r11
  float v7; // s23
  CNodeAddress v8; // r0
  CPathNode *v9; // r1
  CPathNode *v10; // r10
  Int16 *v11; // r10
  int v12; // t1
  float v13; // s0
  __int16 *v14; // r8
  float v15; // s0
  float v16; // s4
  RwReal v17; // s2
  int v18; // s2
  float v19; // s4
  float v20; // s8
  RwReal v21; // s2
  float v22; // s10
  float v23; // s6
  float v24; // s8
  float v25; // s0
  float v26; // s2
  float v27; // s4
  float v28; // s8
  float v29; // s10
  float v30; // s0
  float v31; // s6
  RwReal v32; // s1
  float v33; // s0
  float v34; // r3
  float v35; // s2
  CNodeAddress v36; // r10
  CPathNode *v37; // r8
  unsigned int v38; // r4
  CPathNode *v39; // r6
  Int16 *p_CoorsX; // r6
  int CoorsX; // t1
  float v42; // s23
  float v43; // s0
  char v44; // r11
  __int16 *v45; // r10
  float v46; // s25
  float v47; // s23
  float v48; // s0
  float v49; // s2
  float v50; // s4
  float v51; // s0
  float v52; // s2
  float v53; // s10
  Int32 v54; // r0
  UInt32 v55; // r4
  CScriptRoadBlock *v56; // r5
  float x; // s16
  CScriptRoadBlock *v58; // r6
  float32x2_t v59; // d9
  float32x2_t v60; // d10
  float v61; // s22
  _BYTE *p_bSafeToCreate; // r8
  float32x2_t v63; // d16
  unsigned __int64 v64; // d1
  char v65; // r0
  float bCheckBuildings; // [sp+0h] [bp-1D0h]
  float bCheckVehicles; // [sp+4h] [bp-1CCh]
  __int16 *v68; // [sp+24h] [bp-1ACh]
  __int16 *v69; // [sp+28h] [bp-1A8h]
  __int16 *v70; // [sp+58h] [bp-178h]
  CVector v71; // [sp+6Ch] [bp-164h] BYREF
  CEntity *refEntityPtr; // [sp+78h] [bp-158h] BYREF
  CColPoint colPoint; // [sp+7Ch] [bp-154h] BYREF
  CVector vecEnd; // [sp+A8h] [bp-128h] BYREF
  CVector vecStart; // [sp+B4h] [bp-11Ch] BYREF
  CVector VecAlongRoadBlock; // [sp+C0h] [bp-110h] BYREF
  CVector v77; // [sp+CCh] [bp-104h] BYREF
  CMatrix v78; // [sp+D8h] [bp-F8h] BYREF
  CMatrix v79; // [sp+120h] [bp-B0h] BYREF
  float Width; // [sp+168h] [bp-68h] BYREF
  float v81[25]; // [sp+16Ch] [bp-64h] BYREF
  CVector v82; // 0:r0.12
  CVector v83; // 0:r0.12
  CVector v84; // 0:r0.12
  CVector v85; // 0:r0.12
  CVector v86; // 0:r3.4,4:^0.8
  CVector v87; // 0:r3.4,4:^0.8

  v79.m_pRwMat = 0;
  v79.m_owner = 0;
  v78.m_pRwMat = 0;
  v78.m_owner = 0;
  if ( FindPlayerWanted(-1)->m_nChanceOnRoadBlock && FindPlayerVehicle(-1, 0) )
  {
    if ( !CRoadBlocks::bGenerateDynamicRoadBlocks )
      memset(CRoadBlocks::InOrOut, 1, sizeof(CRoadBlocks::InOrOut));
    v0 = CRoadBlocks::NumRoadBlocks;
    v1 = 325 * (CTimer::m_FrameCounter & 0xF) + 325;
    v2 = 325 * (CTimer::m_FrameCounter & 0xF);
    CRoadBlocks::bGenerateDynamicRoadBlocks = 1;
    v3 = v1 >> 4;
    if ( CRoadBlocks::NumRoadBlocks >= (int)(v1 >> 4) )
      v0 = v1 >> 4;
    v4 = v2 >> 4;
    if ( (int)(v2 >> 4) < v0 )
    {
      do
      {
        v36 = CRoadBlocks::RoadBlockNodes[v4];
        v37 = ThePaths.pNodes[v36.Region];
        if ( v37 )
        {
          FindPlayerCoors(&v71, -1);
          v38 = HIWORD(*(unsigned int *)&v36);
          v39 = &v37[HIWORD(*(unsigned int *)&v36)];
          CoorsX = v39->CoorsX;
          p_CoorsX = &v39->CoorsX;
          v42 = v71.x + (float)((float)CoorsX * -0.125);
          if ( v42 <= -90.0
            || v42 >= 90.0
            || (FindPlayerCoors(&v71, -1),
                v70 = p_CoorsX + 1,
                v43 = v71.y + (float)((float)p_CoorsX[1] * -0.125),
                v43 <= -90.0)
            || v43 >= 90.0
            || sqrtf((float)(v42 * v42) + (float)(v43 * v43)) >= 90.0 )
          {
            CRoadBlocks::InOrOut[v4] = 0;
          }
          else if ( !CRoadBlocks::InOrOut[v4] )
          {
            CRoadBlocks::InOrOut[v4] = 1;
            v44 = rand();
            if ( (v44 & 0x7Fu) < FindPlayerWanted(-1)->m_nChanceOnRoadBlock
              && CRoadBlocks::GetRoadBlockNodeInfo(v36, v81, &v77) == 1 )
            {
              v45 = p_CoorsX + 2;
              if ( v37[v38].Width )
              {
                v46 = (float)v37[v38].Width * 0.0625;
                v47 = v46 + (float)(v81[0] * 0.5);
                v48 = (float)*p_CoorsX * 0.125;
                v49 = (float)*v45 * 0.125;
                v50 = (float)*v70 * 0.125;
                v87.x = v48 + (float)(v46 * v77.x);
                v84.x = v48 + (float)(v77.x * v47);
                v84.y = v50 + (float)(v77.y * v47);
                v84.z = v49 + (float)(v47 * v77.z);
                v87.y = v50 + (float)(v46 * v77.y);
                v87.z = v49 + (float)(v46 * v77.z);
                CRoadBlocks::CreateRoadBlockBetween2Points(v84, v87, 0);
                v51 = (float)*p_CoorsX * 0.125;
                v52 = (float)*v70 * 0.125;
                v53 = (float)*v45 * 0.125;
                v83.x = v51 - (float)(v46 * v77.x);
                v34 = v51 - (float)(v77.x * v47);
                v83.y = v52 - (float)(v46 * v77.y);
                v35 = v52 - (float)(v77.y * v47);
                v83.z = v53 - (float)(v46 * v77.z);
                v33 = v53 - (float)(v77.z * v47);
              }
              else
              {
                v69 = p_CoorsX + 2;
                v5 = CRoadBlocks::NumRoadBlocks;
                if ( CRoadBlocks::NumRoadBlocks < 1 )
                {
                  v6 = 0;
LABEL_27:
                  if ( v6 != v5 )
                    goto LABEL_42;
                }
                else
                {
                  v6 = 0;
                  v7 = v81[0];
                  while ( 1 )
                  {
                    if ( v4 != v6 && !CRoadBlocks::InOrOut[v6] )
                    {
                      v8 = CRoadBlocks::RoadBlockNodes[v6];
                      v9 = ThePaths.pNodes[v8.Region];
                      if ( v9 )
                      {
                        v10 = &v9[HIWORD(*(unsigned int *)&v8)];
                        v12 = v10->CoorsX;
                        v11 = &v10->CoorsX;
                        v13 = (float)((float)*p_CoorsX * 0.125) - (float)((float)v12 * 0.125);
                        if ( v13 > -30.0 && v13 < 30.0 )
                        {
                          v14 = v11 + 1;
                          v15 = (float)((float)*v70 * 0.125) - (float)((float)v11[1] * 0.125);
                          if ( v15 > -30.0
                            && v15 < 30.0
                            && CRoadBlocks::GetRoadBlockNodeInfo(v8, &Width, &VecAlongRoadBlock) == 1
                            && fabsf(
                                 (float)((float)(v77.x * VecAlongRoadBlock.x) + (float)(v77.y * VecAlongRoadBlock.y))
                               + (float)(v77.z * VecAlongRoadBlock.z)) > 0.7 )
                          {
                            v16 = (float)*v69 * 0.125;
                            v17 = (float)((float)*p_CoorsX * 0.125) + 0.0;
                            vecStart.y = (float)((float)*v70 * 0.125) + 0.0;
                            vecStart.x = v17;
                            vecStart.z = v16 + 1.0;
                            v18 = *v11;
                            v68 = v11 + 2;
                            v19 = (float)v11[2];
                            vecEnd.y = (float)((float)*v14 * 0.125) + 0.0;
                            vecEnd.x = (float)((float)v18 * 0.125) + 0.0;
                            vecEnd.z = (float)(v19 * 0.125) + 1.0;
                            if ( !CWorld::ProcessLineOfSight(
                                    &vecStart,
                                    &vecEnd,
                                    &colPoint,
                                    &refEntityPtr,
                                    1,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0,
                                    0) )
                              break;
                          }
                        }
                      }
                    }
                    ++v6;
                    v5 = CRoadBlocks::NumRoadBlocks;
                    if ( v6 >= CRoadBlocks::NumRoadBlocks )
                      goto LABEL_27;
                  }
                  v20 = (float)*v69 * 0.125;
                  v21 = (float)((float)*v11 * 0.125) - (float)((float)*p_CoorsX * 0.125);
                  v22 = (float)*v68 * 0.125;
                  v77.y = (float)((float)*v14 * 0.125) - (float)((float)*v70 * 0.125);
                  v77.x = v21;
                  v77.z = v22 - v20;
                  CVector::Normalise(&v77);
                  v23 = v77.x * (float)(v7 * 0.5);
                  v24 = (float)(v7 * 0.5) * v77.y;
                  v25 = (float)(v7 * 0.5) * v77.z;
                  v82.x = (float)((float)*v11 * 0.125) + v23;
                  v82.y = (float)((float)*v14 * 0.125) + v24;
                  v82.z = (float)((float)*v68 * 0.125) + v25;
                  v86.x = (float)((float)*p_CoorsX * 0.125) - v23;
                  v86.y = (float)((float)*v70 * 0.125) - v24;
                  v86.z = (float)((float)*v69 * 0.125) - v25;
                  CRoadBlocks::CreateRoadBlockBetween2Points(v82, v86, 0);
                  CRoadBlocks::InOrOut[v6] = 1;
                  if ( v6 != CRoadBlocks::NumRoadBlocks )
                    goto LABEL_42;
                }
                v26 = (float)*p_CoorsX * 0.125;
                v27 = (float)*v70 * 0.125;
                v28 = v77.x * (float)(v81[0] * 0.5);
                v29 = (float)(v81[0] * 0.5) * v77.y;
                v30 = (float)(v81[0] * 0.5) * v77.z;
                v31 = (float)*v69 * 0.125;
                v32 = v31 + v30;
                v33 = v31 - v30;
                v83.x = v26 + v28;
                v83.y = v27 + v29;
                v34 = v26 - v28;
                v35 = v27 - v29;
                v83.z = v32;
              }
              bCheckBuildings = v35;
              bCheckVehicles = v33;
              CRoadBlocks::CreateRoadBlockBetween2Points(v83, *(CVector *)&v34, 0);
            }
          }
        }
LABEL_42:
        ++v4;
        v54 = CRoadBlocks::NumRoadBlocks;
        if ( CRoadBlocks::NumRoadBlocks >= v3 )
          v54 = v3;
      }
      while ( v4 < v54 );
    }
  }
  else
  {
    CRoadBlocks::bGenerateDynamicRoadBlocks = 0;
  }
  v55 = CTimer::m_FrameCounter & 0xF;
  v56 = &CRoadBlocks::aScriptRoadBlocks[CTimer::m_FrameCounter & 0xF];
  if ( v56->bActive )
  {
    x = v56->Coors1.x;
    v58 = &CRoadBlocks::aScriptRoadBlocks[CTimer::m_FrameCounter & 0xF];
    v59.n64_u64[0] = *(unsigned __int64 *)&v58->Coors2.y;
    v60.n64_u64[0] = *(unsigned __int64 *)&v58->Coors1.y;
    v61 = v58->Coors2.x;
    FindPlayerCoors(&v71, -1);
    p_bSafeToCreate = &v58->bSafeToCreate;
    v63.n64_u64[0] = vsub_f32(vmul_f32(vadd_f32(v60, v59), (float32x2_t)0x3F0000003F000000LL), *(float32x2_t *)&v71.y).n64_u64[0];
    v64 = vmul_f32(v63, v63).n64_u64[0];
    if ( sqrtf(
           (float)((float)((float)((float)((float)(x + v61) * 0.5) - v71.x)
                         * (float)((float)((float)(x + v61) * 0.5) - v71.x))
                 + *(float *)&v64)
         + *((float *)&v64 + 1)) >= 90.0 )
    {
      v65 = 1;
      goto LABEL_50;
    }
    if ( *p_bSafeToCreate )
    {
      v85.z = v58->Coors1.z;
      v85.x = v56->Coors1.x;
      v85.y = v58->Coors1.y;
      CRoadBlocks::CreateRoadBlockBetween2Points(v85, v58->Coors2, CRoadBlocks::aScriptRoadBlocks[v55].bGangRoadBlock);
      v65 = 0;
LABEL_50:
      *p_bSafeToCreate = v65;
    }
  }
  CMatrix::~CMatrix(&v78);
  CMatrix::~CMatrix(&v79);
}
// 325080: fragmented variable at r3.4 may be wrong
// 325080: using guessed type float var_64[25];

//----- (00325984) --------------------------------------------------------
int __fastcall CRoadBlocks::GetRoadBlockNodeInfo(CNodeAddress Node, float *Width, CVector *VecAlongRoadBlock)
{
  int v3; // r6
  unsigned int v4; // r0
  int v5; // r4
  int v6; // r0
  int v7; // r4
  unsigned int v8; // r3
  unsigned int v9; // r4
  int result; // r0
  int v11; // r8
  int v12; // r11
  CCarPathLink *v13; // lr
  CCarPathLink *v14; // r10
  CCarPathLink *v15; // r12
  unsigned int v16; // r4
  int v17; // r6
  unsigned int v18; // r9
  CCarPathLink *v19; // r4
  unsigned int v20; // r5
  int v21; // r3
  unsigned int v22; // r5
  CCarPathLink *v23; // r3
  float CoorsX; // s2
  float v25; // s4
  float CoorsY; // s6
  float v27; // s8

  v3 = 7 * Node.Index;
  v4 = (unsigned int)&stru_3FFFC & (4 * *(_DWORD *)&Node);
  v5 = *(int *)((char *)ThePaths.pNodes + v4);
  v6 = *(int *)((char *)ThePaths.pAdjacentLinks + v4);
  v7 = *(__int16 *)(v5 + 4 * v3 + 16);
  v8 = *(unsigned __int16 *)(v6 + 2 * v7);
  if ( !ThePaths.pNodes[v8 >> 10] )
    return 0;
  v9 = *(unsigned __int16 *)(v6 + 2 * v7 + 2);
  result = 0;
  if ( ThePaths.pNodes[v9 >> 10] )
  {
    v11 = v9 & 0x3FF;
    v12 = v8 & 0x3FF;
    v13 = ThePaths.pLinks[v9 >> 10];
    v14 = ThePaths.pLinks[v8 >> 10];
    v15 = &v13[v9 & 0x3FF];
    v16 = *(unsigned __int16 *)((char *)v15 + 11);
    v17 = v16 & 7;
    v18 = ((v16 >> 3) & 7) + v17;
    v19 = &v14[v8 & 0x3FF];
    v20 = *(unsigned __int16 *)((char *)v19 + 11);
    v21 = v20 & 7;
    v22 = ((v20 >> 3) & 7) + v21;
    if ( v22 > v18 )
      v17 = v21;
    v23 = v15;
    if ( v22 > v18 )
      v23 = v19;
    *Width = (float)((float)(((*(unsigned __int16 *)((char *)v23 + 11) >> 3) & 7u) + v17) * 5.0) + 5.0;
    CoorsX = (float)v14[v12].CoorsX;
    v25 = (float)v13[v11].CoorsX;
    CoorsY = (float)v19->CoorsY;
    v27 = (float)v15->CoorsY;
    VecAlongRoadBlock->z = 0.0;
    VecAlongRoadBlock->x = (float)(v27 * 0.125) - (float)(CoorsY * 0.125);
    VecAlongRoadBlock->y = -(float)((float)(v25 * 0.125) - (float)(CoorsX * 0.125));
    CVector::Normalise(VecAlongRoadBlock);
    return 1;
  }
  return result;
}
// 3FFFC: using guessed type Elf32_Sym stru_3FFFC;

//----- (00325AD8) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
void __fastcall CRoadBlocks::CreateRoadBlockBetween2Points(CVector Point1, CVector Point2, Bool bGangRoadBlock)
{
  float x; // s18
  float z; // s16
  float v5; // s19
  float y; // s20
  float v7; // s26
  float v8; // s24
  float v9; // s28
  Bool v10; // r11
  int32 DefaultCopCarModel; // r2
  CWanted *PlayerWanted; // r0
  CWanted *v13; // r0
  CWanted *v14; // r0
  CColModel *m_pColModel; // r0
  __int64 v16; // d16
  float v17; // s24
  float v18; // s19
  float v19; // s21
  int v20; // r1
  Bool v21; // r2
  int v22; // r5
  int v23; // r0
  int v24; // r4
  float v25; // s26
  int v26; // r0
  unsigned int v27; // r0
  int v28; // r0
  int v29; // r0
  int v30; // r0
  int *v31; // r6
  int *v32; // r2
  char v33; // r3
  int32 v34; // r1
  float v35; // s0
  char *v36; // r3
  float v37; // s25
  float v38; // s28
  float v39; // s23
  _BOOL4 v40; // r9
  unsigned __int8 v41; // r0
  float v42; // s0
  float v43; // s0
  float v44; // s2
  float v45; // s4
  unsigned __int8 v46; // r0
  float v47; // s28
  CVector *p_z; // r0
  float v49; // s30
  float v50; // s17
  float v51; // s26
  float tx; // s24
  float ty; // s29
  float tz; // s27
  CObject *v55; // r4
  float v56; // r1
  CMatrix *m_pMat; // r3
  float v58; // r0
  float *p_tz; // r1
  char *v60; // r9
  int v61; // r0
  float v62; // r0
  int v63; // r0
  int v64; // r1
  const CMatrix *v65; // r0
  RwMatrix *v66; // r1
  CFire *m_pFire; // r0
  int v68; // r1
  unsigned int v69; // r0
  int v70; // r10
  uint32 v71; // r0
  int32 CarNodeIndexFromDoor; // r2
  int32 v73; // r2
  int v74; // r4
  char *v75; // r0
  float v76; // s0
  float32x2_t v77; // d17
  char v78; // r0
  unsigned __int64 v79; // d1
  CColModel *v80; // r6
  __int64 v81; // d16
  __int64 v82; // d16
  RwReal v83; // r6
  float v84; // s24
  float v85; // s26
  int v86; // r0
  int v87; // r9
  int v88; // r11
  unsigned __int8 v89; // r0
  int v90; // s0
  float v91; // s0
  float GroundZFor3DCoord; // r0
  float v93; // s24
  float v94; // s21
  float v95; // s23
  float v96; // s25
  float v97; // s27
  float v98; // s29
  CObject *v99; // r6
  float v100; // r1
  CMatrix *v101; // r3
  float v102; // r0
  float *v103; // r1
  float v104; // [sp+18h] [bp-128h]
  float v105; // [sp+20h] [bp-120h]
  char v106; // [sp+28h] [bp-118h]
  int nModelIndex; // [sp+3Ch] [bp-104h]
  float v108; // [sp+40h] [bp-100h]
  char *v109; // [sp+44h] [bp-FCh]
  int32 v110; // [sp+48h] [bp-F8h]
  int32 v111; // [sp+48h] [bp-F8h]
  CVector v112; // [sp+4Ch] [bp-F4h] BYREF
  CVector v; // [sp+58h] [bp-E8h] BYREF
  CVector v114; // [sp+68h] [bp-D8h] BYREF
  char v115; // [sp+7Ah] [bp-C6h]
  char v116; // [sp+7Bh] [bp-C5h] BYREF
  char v117; // [sp+7Ch] [bp-C4h]
  char v118; // [sp+7Dh] [bp-C3h]
  char v119; // [sp+7Eh] [bp-C2h]
  bool pBool; // [sp+7Fh] [bp-C1h] BYREF
  CMatrix v121; // [sp+80h] [bp-C0h] BYREF
  CVector v122; // [sp+C8h] [bp-78h] BYREF
  CVector v123; // [sp+D4h] [bp-6Ch] BYREF
  CVector v124; // 0:r0.12
  CVector v125; // 0:r0.12
  CVector v126; // 0:r0.12
  CVector v127; // 0:r3.4,4:^0.8
  CVector v128; // 0:r3.4,4:^0.8

  x = Point1.x;
  z = Point1.z;
  v5 = Point2.x;
  y = Point1.y;
  v7 = Point2.x - Point1.x;
  v121.m_owner = 0;
  v8 = Point2.y - Point1.y;
  v121.m_pRwMat = 0;
  v9 = Point2.z - Point1.z;
  v123.y = Point2.y - Point1.y;
  v123.x = Point2.x - Point1.x;
  v123.z = Point2.z - Point1.z;
  CVector::Normalise(&v123);
  v122.x = v123.y;
  v122.z = 0.0;
  v122.y = -v123.x;
  CVector::Normalise(&v122);
  FindPlayerCoors(&v114, -1);
  v10 = bGangRoadBlock;
  if ( (float)((float)((float)((float)(v114.x - (float)((float)(x + v5) * 0.5)) * v122.x)
                     + (float)((float)(v114.y - (float)((float)(y + Point2.y) * 0.5)) * v122.y))
             + (float)((float)(v114.z - (float)((float)(z + Point2.z) * 0.5)) * v122.z)) < 0.0 )
  {
    v122.y = -v122.y;
    v122.x = -v122.x;
    v122.z = -v122.z;
  }
  if ( bGangRoadBlock )
  {
    DefaultCopCarModel = CPopulation::PickRiotRoadBlockCar();
    if ( DefaultCopCarModel == -1 )
      goto LABEL_130;
LABEL_16:
    v104 = (float)(x + v5) * 0.5;
    m_pColModel = CModelInfo::ms_modelInfoPtrs[DefaultCopCarModel]->m_pColModel;
    v16 = *(_QWORD *)&m_pColModel->m_boxBound.m_vecMin.x;
    v114.z = m_pColModel->m_boxBound.m_vecMin.z;
    *(_QWORD *)&v114.x = v16;
    v = m_pColModel->m_boxBound.m_vecMax;
    v17 = sqrtf((float)(v9 * v9) + (float)((float)(v7 * v7) + (float)(v8 * v8)));
    v18 = (float)(v.y - *((float *)&v16 + 1)) + 0.2;
    v19 = (float)(v.x - *(float *)&v16) + 2.0;
    if ( bGangRoadBlock )
      v18 = v18 + 0.5;
    v20 = 0;
    nModelIndex = DefaultCopCarModel;
    if ( DefaultCopCarModel == 433 )
      v20 = 1;
    v21 = bGangRoadBlock;
    if ( bGangRoadBlock )
      v21 = 1;
    v105 = v17;
    v22 = v21 | v20;
    if ( v21 | v20 )
    {
      v115 = 0;
    }
    else
    {
      v23 = rand() & 1;
      v115 = v23;
      if ( v23 )
      {
        if ( v17 >= v19 )
        {
          v24 = 1;
          v25 = v17 - v19;
          goto LABEL_30;
        }
        goto LABEL_118;
      }
    }
    if ( v17 >= v18 )
    {
      v24 = 0;
      v25 = v17 - v18;
      if ( v22 == 1 )
      {
        v116 = 0;
        goto LABEL_33;
      }
LABEL_30:
      v26 = rand() & 1;
      v116 = v26;
      if ( v26 )
      {
        if ( v25 < v19 )
        {
LABEL_34:
          v27 = 1;
LABEL_58:
          v31 = dword_326754;
          v32 = dword_32675C;
          v33 = 2;
          v34 = v27 - 1;
          v35 = (float)(int)(v27 + 1);
          if ( bGangRoadBlock )
          {
            v31 = &dword_326754[1];
            v32 = &dword_32675C[1];
          }
          if ( v27 > 3 )
            v33 = 1;
          v106 = v33;
          v36 = &v116;
          v37 = *(float *)v32;
          v38 = v25 / v35;
          v39 = (float)(v18 * 0.5) + (float)(v25 / v35);
          v108 = *(float *)v31;
          while ( 1 )
          {
            v109 = v36;
            v110 = v34;
            if ( v24 << 24 )
            {
              v40 = 0;
              *(CVector *)&v121.xy = v122;
              v121.zx = 0.0;
              v121.xx = v122.y;
              v121.xz = 0.0;
              v121.yz = 0.0;
              v121.zz = 1.0;
              LODWORD(v121.yx) = LODWORD(v122.x) ^ 0x80000000;
              v41 = rand();
              CMatrix::RotateZ(&v121, v37 * (float)(v41 - 128));
              v42 = v19;
            }
            else
            {
              if ( v10 )
                v40 = (rand() & 0xC0u) < 0x40;
              else
                v40 = 0;
              *(CVector *)&v121.xy = v123;
              v43 = v123.x;
              if ( v40 )
              {
                v121.xx = 0.0;
                v121.yx = 0.0;
                LODWORD(v44) = LODWORD(v123.y) ^ 0x80000000;
                v121.zx = 1.0;
                v45 = 0.0;
              }
              else
              {
                v121.xx = v123.y;
                v45 = 1.0;
                v121.zx = 0.0;
                v121.yx = -v123.x;
                v43 = 0.0;
                v44 = 0.0;
              }
              v121.yz = v43;
              v121.xz = v44;
              v121.zz = v45;
              if ( (rand() & 1) != 0 )
              {
                if ( v40 )
                  CMatrix::RotateY(&v121, 3.1416);
                else
                  CMatrix::RotateZ(&v121, 3.1416);
              }
              v46 = rand();
              CMatrix::RotateZ(&v121, v108 * (float)(v46 - 128));
              v42 = v18;
            }
            v47 = v38 + (float)(v42 * 0.5);
            CMatrix::SetTranslateOnly(
              &v121,
              (float)(v123.x * v47) + x,
              (float)(v123.y * v47) + y,
              (float)(v47 * v123.z) + z);
            p_z = &v114;
            if ( !v40 )
              p_z = (CVector *)&v114.z;
            v121.tz = v121.tz + (float)(0.3 - p_z->x);
            Multiply3x3(&v112, &v114, &v121);
            v49 = v112.x;
            v50 = v112.y;
            v51 = v112.z;
            tx = v121.tx;
            ty = v121.ty;
            tz = v121.tz;
            Multiply3x3(&v112, &v, &v121);
            v124.y = v50 + ty;
            v124.x = v49 + tx;
            v124.z = v51 + tz;
            v127.x = v112.x + v121.tx;
            v127.y = v112.y + v121.ty;
            v127.z = v112.z + v121.tz;
            if ( CRoadBlocks::ClearSpaceForRoadBlockObject(v124, v127) != 1 )
              goto LABEL_117;
            if ( v10 && (v40 || (rand() & 0xC0u) <= 0x3F) )
            {
              v55 = (CObject *)CObject::operator new(0x184u);
              CObject::CObject(v55, MI_ROADBLOCKFUCKEDCAR1, 1);
              CMatrix::operator=(v55->m_pMat, &v121);
              v56 = v121.ty;
              m_pMat = v55->m_pMat;
              v58 = v121.tz;
              if ( m_pMat )
              {
                m_pMat->tx = v121.tx;
                v55->m_pMat->ty = v56;
                p_tz = &v55->m_pMat->tz;
              }
              else
              {
                v55->m_transform.m_translate.x = v121.tx;
                v55->m_transform.m_translate.y = v56;
                p_tz = &v55->m_transform.m_translate.z;
              }
              *p_tz = v58;
              (*((void (__fastcall **)(CObject *, _DWORD))v55->_vptr$CPlaceable + 5))(v55, 0);
              ++CObject::nNoTempObjects;
              v55->ObjectCreatedBy = 3;
              v55->m_nEndOfLifeTime = (uint32)&aZ16osServicesh[CTimer::m_snTimeInMilliseconds + 12];
              CWorld::Add(v55);
              CFireManager::StartFire(&gFireManager, v55, 0, 2.8, 1u, 60000, 2);
              m_pFire = v55->m_pFire;
LABEL_115:
              if ( m_pFire )
                m_pFire->m_RemovalDist = 92;
              goto LABEL_117;
            }
            v60 = (char *)CVehicle::operator new(0x99Cu);
            CAutomobile::CAutomobile((CAutomobile *)v60, nModelIndex, 1u, 1u);
            v61 = *(_DWORD *)v60;
            v60[58] = v60[58] & 7 | 0x20;
            v62 = (*(float (__fastcall **)(char *))(v61 + 216))(v60);
            v121.tz = v121.tz + (float)(v62 + -0.6);
            CMatrix::operator=(*((CMatrix **)v60 + 5), &v121);
            CAutomobile::PlaceOnRoadProperly((CAutomobile *)v60);
            (*(void (__fastcall **)(char *, _DWORD))(*(_DWORD *)v60 + 20))(v60, 0);
            v63 = *((_DWORD *)v60 + 6);
            if ( v63 )
            {
              v64 = *(_DWORD *)(v63 + 4);
              v65 = (const CMatrix *)*((_DWORD *)v60 + 5);
              v66 = (RwMatrix *)(v64 + 16);
              if ( v65 )
                CMatrix::UpdateRwMatrix(v65, v66);
              else
                CSimpleTransform::UpdateRwMatrix((const CSimpleTransform *)(v60 + 4), v66);
            }
            *((_DWORD *)v60 + 322) = 1;
            CCarCtrl::JoinCarWithRoadSystem((CVehicle *)v60);
            v68 = *((_DWORD *)v60 + 268);
            v69 = *((_DWORD *)v60 + 267) & 0xFFFFFFE7;
            *((_WORD *)v60 + 479) = 0;
            *(_WORD *)(v60 + 955) = 0;
            *((_DWORD *)v60 + 243) = 0;
            v60[980] = 0;
            *((_DWORD *)v60 + 267) = v69;
            *((_DWORD *)v60 + 268) = v68 | 0x40;
            if ( bGangRoadBlock )
            {
              if ( (int)(float)((float)((float)(unsigned __int16)rand() * 0.000015259) * 4.0) )
              {
                v70 = 1;
                (*(void (__fastcall **)(char *, int, int, int, int))(*(_DWORD *)v60 + 172))(v60, 1, 1, 1, 1);
                *((_DWORD *)v60 + 314) += "ist_FillGlobeColPointsER8CPtrListRK8CColLineRP7CEntitybP15CStoredCollPoly";
                goto LABEL_100;
              }
              CAutomobile::SetTotalDamage((CAutomobile *)v60, 1);
            }
            else if ( CVehicle::UsesSiren((const CVehicle *)v60) && (rand() & 1) != 0 )
            {
              *((_DWORD *)v60 + 268) |= 0x8000u;
            }
            v70 = 0;
LABEL_100:
            if ( *(float *)(*((_DWORD *)v60 + 5) + 40) <= 0.94 )
            {
              (*(void (__fastcall **)(char *))(*(_DWORD *)v60 + 4))(v60);
              v10 = bGangRoadBlock;
              goto LABEL_117;
            }
            CVisibilityPlugins::SetClumpAlpha(*((RpClump_0 **)v60 + 6), 0);
            CWorld::Add((CEntity *)v60);
            *((_DWORD *)v60 + 267) |= 0x100000u;
            v71 = CTimer::m_snTimeInMilliseconds;
            v60[1208] = v106;
            *((_DWORD *)v60 + 312) = v71 + 7000;
            if ( v24 << 24 )
            {
              v60[1207] = 2;
              CarNodeIndexFromDoor = CDamageManager::GetCarNodeIndexFromDoor(FRONT_LEFT_DOOR_0);
              if ( *(_DWORD *)&v60[4 * CarNodeIndexFromDoor + 1628] )
                (*(void (__fastcall **)(char *, _DWORD, int32, int, int, int))(*(_DWORD *)v60 + 112))(
                  v60,
                  0,
                  CarNodeIndexFromDoor,
                  2,
                  1065353216,
                  1);
              v10 = bGangRoadBlock;
              if ( (unsigned __int8)v60[1208] >= 2u )
              {
                v73 = CDamageManager::GetCarNodeIndexFromDoor(FRONT_RIGHT_DOOR_0);
                if ( *(_DWORD *)&v60[4 * v73 + 1628] )
                  (*(void (__fastcall **)(char *, _DWORD, int32, int, int, int))(*(_DWORD *)v60 + 112))(
                    v60,
                    0,
                    v73,
                    3,
                    1065353216,
                    1);
              }
            }
            else
            {
              v74 = *((_DWORD *)v60 + 5);
              FindPlayerCoors(&v112, -1);
              v75 = (char *)(v74 + 48);
              if ( !v74 )
                v75 = v60 + 4;
              v76 = *(float *)v75 - v112.x;
              v77.n64_u64[0] = *(unsigned __int64 *)(v75 + 4);
              v78 = 0;
              v10 = bGangRoadBlock;
              v79 = vmul_f32(vsub_f32(v77, *(float32x2_t *)&v112.y), *(float32x2_t *)(v74 + 4)).n64_u64[0];
              if ( (float)((float)((float)(v76 * *(float *)v74) + *(float *)&v79) + *((float *)&v79 + 1)) >= 0.0 )
                v78 = 1;
              v60[1207] = v78;
            }
            if ( v70 == 1 )
            {
              CFireManager::StartFire(&gFireManager, (CEntity *)v60, 0, 2.8, 1u, 60000, 2);
              m_pFire = (CFire *)*((_DWORD *)v60 + 293);
              goto LABEL_115;
            }
LABEL_117:
            if ( !v110 )
              goto LABEL_118;
            v38 = v39 + v47;
            v34 = v110 - 1;
            v36 = v109 + 1;
            v24 = (unsigned __int8)*v109;
          }
        }
        v25 = v25 - v19;
        goto LABEL_37;
      }
LABEL_33:
      if ( v25 < v18 )
        goto LABEL_34;
      v25 = v25 - v18;
      if ( v22 == 1 )
      {
        v117 = 0;
        goto LABEL_40;
      }
LABEL_37:
      v28 = rand() & 1;
      v117 = v28;
      if ( v28 )
      {
        if ( v25 < v19 )
        {
LABEL_41:
          v27 = 2;
          goto LABEL_58;
        }
        v25 = v25 - v19;
        goto LABEL_44;
      }
LABEL_40:
      if ( v25 < v18 )
        goto LABEL_41;
      v25 = v25 - v18;
      if ( v22 == 1 )
      {
        v118 = 0;
        goto LABEL_47;
      }
LABEL_44:
      v29 = rand() & 1;
      v118 = v29;
      if ( v29 )
      {
        if ( v25 < v19 )
        {
LABEL_48:
          v27 = 3;
          goto LABEL_58;
        }
        v25 = v25 - v19;
        goto LABEL_51;
      }
LABEL_47:
      if ( v25 < v18 )
        goto LABEL_48;
      v25 = v25 - v18;
      if ( v22 == 1 )
      {
        v119 = 0;
        goto LABEL_54;
      }
LABEL_51:
      v30 = rand() & 1;
      v119 = v30;
      if ( v30 )
      {
        if ( v25 < v19 )
        {
LABEL_55:
          v27 = 4;
          goto LABEL_58;
        }
        v25 = v25 - v19;
LABEL_57:
        v27 = 5;
        goto LABEL_58;
      }
LABEL_54:
      if ( v25 < v18 )
        goto LABEL_55;
      v25 = v25 - v18;
      goto LABEL_57;
    }
LABEL_118:
    if ( !v10 )
    {
      v125.y = (float)(y + Point2.y) * 0.5;
      v125.z = (float)(z + Point2.z) * 0.5;
      v125.x = v104;
      v111 = MI_ROADWORKBARRIER1;
      v80 = CModelInfo::ms_modelInfoPtrs[MI_ROADWORKBARRIER1]->m_pColModel;
      v81 = *(_QWORD *)&v80->m_boxBound.m_vecMin.x;
      v114.z = v80->m_boxBound.m_vecMin.z;
      *(_QWORD *)&v114.x = v81;
      v82 = *(_QWORD *)&v80->m_boxBound.m_vecMax.x;
      v83 = v80->m_boxBound.m_vecMax.z;
      *(_QWORD *)&v.x = v82;
      v84 = v114.x;
      v.z = v83;
      CObject::DeleteAllTempObjectsInArea(v125, v105 * 0.5);
      v85 = (float)(*(float *)&v82 - v84) + 0.5;
      v86 = (int)(float)(v105 / v85);
      v87 = v86;
      if ( v86 >= 8 )
        v87 = 8;
      if ( v86 >= 1 )
      {
        v88 = 0;
        do
        {
          CMatrix::SetUnity(&v121);
          CMatrix::SetTranslate(&v121, 0.0, 0.0, 0.0);
          v121.zy = 0.0;
          v121.xz = 0.0;
          v121.yz = 0.0;
          v121.zz = 1.0;
          v121.xy = v123.y;
          v121.yx = v123.y;
          v121.zx = v123.z;
          v121.xx = v123.x;
          v121.yy = -v123.x;
          v89 = rand();
          CMatrix::RotateZ(&v121, (float)(v89 - 128) * 0.003);
          v90 = v88++;
          v91 = (float)((float)((float)(v105 - (float)(v85 * (float)v87)) / (float)(v87 + 1)) * (float)v88)
              + (float)(v85 * (float)((float)v90 + 0.5));
          CMatrix::SetTranslateOnly(
            &v121,
            (float)((float)(v91 * v123.x) + x) + (float)(v122.x * 5.0),
            (float)((float)(v91 * v123.y) + y) + (float)(v122.y * 5.0),
            (float)((float)(v91 * v123.z) + z) + (float)(v122.z * 5.0));
          v121.tx = v121.tx + (float)((float)(rand() & 0xF) * 0.05);
          v121.ty = v121.ty + (float)((float)(rand() & 0xF) * 0.05);
          GroundZFor3DCoord = CWorld::FindGroundZFor3DCoord(v121.tx, v121.ty, v121.tz + 2.0, &pBool, 0);
          v121.tz = GroundZFor3DCoord;
          if ( pBool )
          {
            v121.tz = GroundZFor3DCoord - v114.z;
            Multiply3x3(&v112, &v114, &v121);
            v93 = v112.x;
            v94 = v112.y;
            v95 = v112.z;
            v96 = v121.tx;
            v97 = v121.ty;
            v98 = v121.tz;
            Multiply3x3(&v112, &v, &v121);
            v126.y = v94 + v97;
            v126.x = v93 + v96;
            v126.z = v95 + v98;
            v128.x = v112.x + v121.tx;
            v128.y = v112.y + v121.ty;
            v128.z = v112.z + v121.tz;
            if ( CRoadBlocks::ClearSpaceForRoadBlockObject(v126, v128) == 1 )
            {
              v99 = (CObject *)CObject::operator new(0x184u);
              CObject::CObject(v99, v111, 1);
              CMatrix::operator=(v99->m_pMat, &v121);
              v100 = v121.ty;
              v101 = v99->m_pMat;
              v102 = v121.tz;
              if ( v101 )
              {
                v101->tx = v121.tx;
                v99->m_pMat->ty = v100;
                v103 = &v99->m_pMat->tz;
              }
              else
              {
                v99->m_transform.m_translate.x = v121.tx;
                v99->m_transform.m_translate.y = v100;
                v103 = &v99->m_transform.m_translate.z;
              }
              *v103 = v102;
              ++CObject::nNoTempObjects;
              v99->ObjectCreatedBy = 3;
              v99->m_nEndOfLifeTime = (uint32)&aZ16osServicesh[CTimer::m_snTimeInMilliseconds + 12];
              CWorld::Add(v99);
            }
          }
        }
        while ( v88 < v87 );
      }
    }
    goto LABEL_130;
  }
  PlayerWanted = FindPlayerWanted(-1);
  if ( CWanted::AreArmyRequired(PlayerWanted) )
  {
    DefaultCopCarModel = 433;
  }
  else
  {
    v13 = FindPlayerWanted(-1);
    if ( CWanted::AreFbiRequired(v13) )
    {
      DefaultCopCarModel = 490;
    }
    else
    {
      v14 = FindPlayerWanted(-1);
      if ( CWanted::AreSwatRequired(v14) )
        DefaultCopCarModel = 427;
      else
        DefaultCopCarModel = CStreaming::GetDefaultCopCarModel(0);
    }
  }
  if ( CStreaming::ms_aInfoForModel[DefaultCopCarModel].m_status != 1 )
    DefaultCopCarModel = CStreaming::GetDefaultCopCarModel(0);
  if ( DefaultCopCarModel != 523 )
    goto LABEL_16;
LABEL_130:
  CMatrix::~CMatrix(&v121);
}
// 325AD8: fragmented variable at 0:r3.4,4:^148.8 may be wrong
// 325AD8: variables would overlap: 0:r3.4,4:^148.8 and ^148.4
// 325AD8: variables would overlap: 0:r3.4,4:^148.8 and ^14C.4
// 326754: using guessed type int dword_326754[2];
// 32675C: using guessed type int dword_32675C[2];
// 677DD0: using guessed type CStreamingInfo (*CStreaming::ms_aInfoForModel)[26316];

//----- (003267A0) --------------------------------------------------------
bool __fastcall CRoadBlocks::GenerateRoadBlockPedsForCar(CVehicle *pVehicle, int nOrientationToCar, ePedType pedType)
{
  int m_nModelIndex; // r0
  CZoneInfo *v6; // r0
  uint32 v7; // r1
  eCopType v8; // r0
  int v9; // r1
  float m_fRadius; // s16
  int32 DefaultCopCarModel; // r0
  bool v12; // r4
  int v13; // r10
  int v14; // r1
  CColModel *m_pColModel; // r0
  float v16; // s16
  int v17; // r1
  CGangInfo *v18; // r0
  CVehicle *v19; // r9
  float *v20; // r11
  float *v21; // r2
  const CMatrix *m_pMat; // r1
  float v23; // s0
  float v24; // s2
  float v25; // s4
  bool v26; // zf
  char *v27; // r8
  RwReal y; // r1
  int v29; // r3
  RwReal z; // r0
  RwReal *v31; // r1
  CMatrix *v32; // r0
  float tx; // s30
  float ty; // s17
  float tz; // s19
  float *v36; // r0
  float v37; // s2
  float v38; // s4
  ePedType v39; // r6
  int v40; // r5
  char *v41; // r4
  unsigned __int16 v42; // r0
  int v43; // r5
  CTaskSimpleStandStill *v44; // r4
  int v45; // r0
  uint32 v46; // r1
  unsigned int v47; // r1
  RpClump_0 *v48; // r0
  unsigned __int16 v49; // r0
  eWeaponType v50; // r9
  int v51; // r0
  eWeaponType *v52; // r1
  CWeaponInfo *WeaponInfo; // r0
  CTaskComplexKillPedOnFoot *v54; // r4
  CPlayerPed *PlayerPed; // r0
  uint32 v57; // r1
  eWeaponType *p_SecondWeapon; // [sp+14h] [bp-19Ch]
  eWeaponType *p_ThirdWeapon; // [sp+1Ch] [bp-194h]
  uint32 PedModelIndex; // [sp+20h] [bp-190h]
  eWeaponType *p_FirstWeapon; // [sp+24h] [bp-18Ch]
  eCopType CopType; // [sp+28h] [bp-188h]
  int v63; // [sp+30h] [bp-180h]
  int v64; // [sp+34h] [bp-17Ch]
  float *v66; // [sp+3Ch] [bp-174h]
  CEventScriptCommand v67; // [sp+40h] [bp-170h] BYREF
  CVector v; // [sp+5Ch] [bp-154h] BYREF
  CVector pCoors; // [sp+68h] [bp-148h] BYREF
  _QWORD v70[8]; // [sp+78h] [bp-138h] BYREF
  int v71; // [sp+B8h] [bp-F8h]
  int v72; // [sp+BCh] [bp-F4h]
  _QWORD v73[8]; // [sp+C0h] [bp-F0h] BYREF
  int v74; // [sp+100h] [bp-B0h]
  int v75; // [sp+104h] [bp-ACh]
  CMatrix v76; // [sp+108h] [bp-A8h] BYREF

  v76.m_pRwMat = 0;
  v76.m_owner = 0;
  v73[0] = 0x3FF33333BFC00000LL;
  v73[1] = 0xBFC0000000000000LL;
  v73[2] = 3223742054LL;
  v73[3] = 0x3FF333333FC00000LL;
  v73[4] = 0x3FC0000000000000LL;
  v73[5] = 3223742054LL;
  v73[6] = 3217031168LL;
  v73[7] = 0x3FC0000000000000LL;
  v74 = 0;
  v75 = 0;
  v70[0] = 0x404CCCCD00000000LL;
  v70[1] = 0x3FC0000000000000LL;
  v70[2] = 3219547750LL;
  v70[3] = 0x404CCCCD00000000LL;
  v70[4] = 0xBFC0000000000000LL;
  v70[5] = 3219547750LL;
  v70[6] = 3217031168LL;
  v70[7] = 0x3FC0000000000000LL;
  v71 = 0;
  v72 = 0;
  if ( FindPlayerVehicle(-1, 0) )
    FindPlayerVehicle(-1, 0);
  if ( pedType != PEDTYPE_COP )
  {
    if ( (unsigned int)(pedType - 7) > 9 )
    {
      PedModelIndex = 0;
      goto LABEL_20;
    }
    v6 = CPopCycle::m_pCurrZoneInfo;
    if ( CPopCycle::m_pCurrZoneInfo->aGangStrengths[0] )
    {
      v64 = 0;
      v7 = CGangs::ChooseGangPedModel(0);
      v8 = v7 + 1;
      PedModelIndex = v7;
      if ( v7 != -1 )
        goto LABEL_46;
      v9 = -1;
      v6 = CPopCycle::m_pCurrZoneInfo;
    }
    else
    {
      v9 = 0;
    }
    if ( v6->aGangStrengths[1] )
    {
      PedModelIndex = CGangs::ChooseGangPedModel(1);
      if ( PedModelIndex != -1 )
        goto LABEL_45;
      v9 = -1;
      v6 = CPopCycle::m_pCurrZoneInfo;
    }
    if ( v6->aGangStrengths[2] )
    {
      PedModelIndex = CGangs::ChooseGangPedModel(2);
      if ( PedModelIndex != -1 )
        goto LABEL_45;
      v9 = -1;
      v6 = CPopCycle::m_pCurrZoneInfo;
    }
    if ( v6->aGangStrengths[3] )
    {
      PedModelIndex = CGangs::ChooseGangPedModel(3);
      if ( PedModelIndex != -1 )
        goto LABEL_45;
      v9 = -1;
      v6 = CPopCycle::m_pCurrZoneInfo;
    }
    if ( v6->aGangStrengths[4] )
    {
      PedModelIndex = CGangs::ChooseGangPedModel(4);
      if ( PedModelIndex != -1 )
        goto LABEL_45;
      v9 = -1;
      v6 = CPopCycle::m_pCurrZoneInfo;
    }
    if ( v6->aGangStrengths[5] )
    {
      PedModelIndex = CGangs::ChooseGangPedModel(5);
      if ( PedModelIndex != -1 )
        goto LABEL_45;
      v9 = -1;
      v6 = CPopCycle::m_pCurrZoneInfo;
    }
    if ( v6->aGangStrengths[6] )
    {
      PedModelIndex = CGangs::ChooseGangPedModel(6);
      if ( PedModelIndex != -1 )
        goto LABEL_45;
      v9 = -1;
      v6 = CPopCycle::m_pCurrZoneInfo;
    }
    if ( !v6->aGangStrengths[7] )
      goto LABEL_43;
    PedModelIndex = CGangs::ChooseGangPedModel(7);
    if ( PedModelIndex == -1 )
    {
      v9 = -1;
      v6 = CPopCycle::m_pCurrZoneInfo;
LABEL_43:
      if ( v6->aGangStrengths[8] )
      {
        PedModelIndex = CGangs::ChooseGangPedModel(8);
        if ( PedModelIndex != -1 )
          goto LABEL_45;
        v9 = -1;
        v6 = CPopCycle::m_pCurrZoneInfo;
      }
      if ( v6->aGangStrengths[9] )
      {
        v57 = CGangs::ChooseGangPedModel(9);
        v8 = COPTYPE_NORMAL;
        PedModelIndex = v57;
        v64 = 0;
        if ( v57 != -1 )
          goto LABEL_46;
      }
      else
      {
        PedModelIndex = 0;
        if ( v9 != -1 )
          goto LABEL_20;
      }
      v12 = 0;
      goto LABEL_84;
    }
LABEL_45:
    v8 = COPTYPE_NORMAL;
    v64 = 0;
    goto LABEL_46;
  }
  m_nModelIndex = pVehicle->m_nModelIndex;
  if ( m_nModelIndex < 490 )
  {
    if ( m_nModelIndex == 427 )
    {
      v64 = 1;
      CopType = COPTYPE_SWAT;
      PedModelIndex = 285;
      goto LABEL_47;
    }
    if ( m_nModelIndex == 433 )
    {
      v64 = 1;
      CopType = COPTYPE_ARMY;
      PedModelIndex = 287;
      goto LABEL_47;
    }
    goto LABEL_19;
  }
  if ( m_nModelIndex != 599 )
  {
    if ( m_nModelIndex == 490 )
    {
      v64 = 1;
      CopType = COPTYPE_FBI;
      PedModelIndex = 286;
      goto LABEL_47;
    }
LABEL_19:
    PedModelIndex = 0;
LABEL_20:
    CopType = COPTYPE_NORMAL;
    v64 = 0;
    goto LABEL_47;
  }
  v64 = 1;
  PedModelIndex = 0;
  v8 = COPTYPE_NORMAL;
LABEL_46:
  CopType = v8;
LABEL_47:
  m_fRadius = CEntity::GetColModel(pVehicle)->m_sphereBound.m_fRadius;
  DefaultCopCarModel = CStreaming::GetDefaultCopCarModel(0);
  v12 = 1;
  if ( pVehicle->NumPedsForRoadBlock )
  {
    v13 = 0;
    v14 = 0;
    m_pColModel = CModelInfo::ms_modelInfoPtrs[DefaultCopCarModel]->m_pColModel;
    if ( nOrientationToCar != 2 )
      v14 = 1;
    v16 = m_fRadius / m_pColModel->m_sphereBound.m_fRadius;
    v63 = v14 | v64 ^ 1;
    v17 = 3 * nOrientationToCar;
    v18 = &CGangs::Gang[pedType];
    v19 = pVehicle;
    v20 = (float *)&v70[v17] + 1;
    p_FirstWeapon = &v18[-7].FirstWeapon;
    p_SecondWeapon = &v18[-7].SecondWeapon;
    v21 = (float *)&v73[v17 + 1];
    p_ThirdWeapon = &v18[-7].ThirdWeapon;
    while ( 1 )
    {
      v66 = v21;
      m_pMat = v19->m_pMat;
      if ( v64 == 1 )
      {
        v23 = *(v20 - 1);
        v24 = *v20;
        v25 = v20[1];
      }
      else
      {
        v23 = *(v21 - 2);
        v24 = *(v21 - 1);
        v25 = *v21;
      }
      v.y = v16 * v24;
      v.x = v16 * v23;
      v.z = v16 * v25;
      operator*((CVector *)&v67, m_pMat, &v);
      pCoors = (CVector)v67.CEvent;
      if ( pedType == PEDTYPE_COP )
      {
        v26 = CopType == COPTYPE_NORMAL;
        if ( CopType )
          v26 = CStreaming::ms_aInfoForModel[PedModelIndex].m_status == 1;
        if ( v26 )
        {
          v27 = (char *)CPed::operator new(0x7CCu);
          CCopPed::CCopPed((CCopPed *)v27, CopType);
          if ( CopType )
            goto LABEL_63;
        }
        else
        {
          v27 = (char *)CPed::operator new(0x7CCu);
          CCopPed::CCopPed((CCopPed *)v27, COPTYPE_NORMAL);
        }
      }
      else
      {
        v27 = (char *)CPed::operator new(0x7A4u);
        CCivilianPed::CCivilianPed((CCivilianPed *)v27, pedType, PedModelIndex);
      }
      CPed::SetCurrentWeapon((CPed *)v27, WEAPONTYPE_PISTOL);
LABEL_63:
      CPedPlacement::FindZCoorForPed(&pCoors);
      y = pCoors.y;
      v29 = *((_DWORD *)v27 + 5);
      z = pCoors.z;
      if ( v29 )
      {
        *(RwReal *)(v29 + 48) = pCoors.x;
        *(RwReal *)(*((_DWORD *)v27 + 5) + 52) = y;
        v31 = (RwReal *)(*((_DWORD *)v27 + 5) + 56);
      }
      else
      {
        *((_DWORD *)v27 + 1) = LODWORD(pCoors.x);
        *((RwReal *)v27 + 2) = y;
        v31 = (RwReal *)(v27 + 12);
      }
      *v31 = z;
      v32 = (CMatrix *)*((_DWORD *)v27 + 5);
      if ( v32 )
      {
        tx = v32->tx;
        ty = v32->ty;
        tz = v32->tz;
        CMatrix::SetRotate(v32, 0.0, 0.0, -1.5708);
        v36 = (float *)*((_DWORD *)v27 + 5);
        v37 = ty + v36[13];
        v38 = tz + v36[14];
        v36[12] = tx + v36[12];
        v36[13] = v37;
        v36[14] = v38;
      }
      else
      {
        *((_DWORD *)v27 + 4) = -1077342245;
      }
      v39 = pedType;
      if ( pedType == PEDTYPE_COP )
      {
        v40 = *((_DWORD *)v27 + 272);
        v27[1956] = 1;
        v41 = (char *)CTask::operator new(0x50u);
        v42 = rand();
        CTaskComplexWander::CTaskComplexWander(
          (CTaskComplexWander *)v41,
          1,
          (int)(float)((float)((float)v42 * 0.000015259) * 8.0),
          1,
          0.5);
        *((_QWORD *)v41 + 7) = 0LL;
        *((_QWORD *)v41 + 8) = 0LL;
        *(_DWORD *)(v41 + 50) = 0;
        *(_DWORD *)(v41 + 46) = 0;
        *(_DWORD *)v41 = &off_66C5D8;
        *((_DWORD *)v41 + 10) = 0;
        *((_DWORD *)v41 + 11) = 0;
        *(_DWORD *)(v41 + 74) = 0;
        *(_DWORD *)(v41 + 70) = 0;
        CTaskManager::SetTask((CTaskManager *)(v40 + 4), (CTask *)v41, 3, 0);
      }
      v43 = *((_DWORD *)v27 + 272);
      v44 = (CTaskSimpleStandStill *)CTask::operator new(0x20u);
      CTaskSimpleStandStill::CTaskSimpleStandStill(v44, 0, 1, 0, 8.0);
      CTaskManager::SetTask((CTaskManager *)(v43 + 4), v44, 4, 0);
      v45 = *((_DWORD *)v27 + 289);
      v46 = CTimer::m_snTimeInMilliseconds;
      *((_DWORD *)v27 + 356) = v19;
      *((_DWORD *)v27 + 340) = v46 + 10000;
      v47 = v45 & 0xFCDFFFFF | 0x1200000;
      if ( v63 )
        v47 = v45 | 0x3200000;
      *((_DWORD *)v27 + 289) = v47;
      CEntity::RegisterReference(v19, (CEntity **)v27 + 356);
      v48 = (RpClump_0 *)*((_DWORD *)v27 + 6);
      *((_DWORD *)v27 + 290) |= 0x40u;
      CVisibilityPlugins::SetClumpAlpha(v48, 0);
      pedType = v39;
      if ( v39 == PEDTYPE_COP )
        goto LABEL_82;
      v49 = rand();
      v50 = *p_ThirdWeapon;
      v51 = (int)(float)((float)((float)v49 * 0.000015259) * 100.0);
      if ( *p_ThirdWeapon )
      {
        v52 = p_FirstWeapon;
        if ( v51 >= 33 )
        {
          v52 = p_SecondWeapon;
          if ( v51 >= 66 )
            goto LABEL_81;
        }
      }
      else
      {
        v50 = *p_SecondWeapon;
        v52 = p_FirstWeapon;
        if ( *p_SecondWeapon )
        {
          v52 = p_FirstWeapon;
          if ( v51 > 49 )
          {
LABEL_81:
            CPed::GiveDelayedWeapon((CPed *)v27, v50, 0x61A9u);
            WeaponInfo = CWeaponInfo::GetWeaponInfo(v50, 1);
            CPed::SetCurrentWeapon((CPed *)v27, WeaponInfo->m_nWeaponSlot);
            goto LABEL_82;
          }
        }
      }
      v50 = *v52;
      if ( *v52 )
        goto LABEL_81;
LABEL_82:
      CWorld::Add((CEntity *)v27);
      v54 = (CTaskComplexKillPedOnFoot *)CTask::operator new(0x38u);
      PlayerPed = FindPlayerPed(-1);
      CTaskComplexKillPedOnFoot::CTaskComplexKillPedOnFoot(v54, PlayerPed, -1, 0, 0, 0, 1);
      CEventScriptCommand::CEventScriptCommand(&v67, 3, v54, 0);
      CEventGroup::Add((CEventGroup *)(*((_DWORD *)v27 + 272) + 104), &v67, 0);
      CEventScriptCommand::~CEventScriptCommand(&v67);
      v19 = pVehicle;
      v20 += 3;
      ++v13;
      v21 = v66 + 3;
      if ( v13 >= pVehicle->NumPedsForRoadBlock )
      {
        v12 = 1;
        break;
      }
    }
  }
LABEL_84:
  CMatrix::~CMatrix(&v76);
  return v12;
}
// 66C5D8: using guessed type void *off_66C5D8;
// 677DD0: using guessed type CStreamingInfo (*CStreaming::ms_aInfoForModel)[26316];
// 3267A0: using guessed type _QWORD var_F0[8];
// 3267A0: using guessed type _QWORD var_138[8];

//----- (00326EE0) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
int __fastcall CRoadBlocks::ClearSpaceForRoadBlockObject(CVector BoxMinTrans, CVector BoxMaxTrans)
{
  int v2; // r4
  int v3; // r6
  CEntity *v4; // r4
  CEntity::CEntityInfo m_info; // r0
  CEntity *ppResults[2]; // [sp+1Ch] [bp-34h] BYREF
  Int16 pNum; // [sp+26h] [bp-2Ah] BYREF
  CVector CoorsMax; // [sp+28h] [bp-28h] BYREF
  CVector CoorsMin; // [sp+34h] [bp-1Ch] BYREF

  CoorsMin = BoxMinTrans;
  v2 = 0;
  CoorsMax = BoxMaxTrans;
  CWorld::FindObjectsIntersectingCube(&CoorsMin, &CoorsMax, &pNum, 2, ppResults, 0, 1, 1, 1, 0);
  if ( pNum <= 2 )
  {
    if ( pNum >= 1 )
    {
      LOWORD(v3) = 0;
      while ( 1 )
      {
        v4 = ppResults[(__int16)v3];
        m_info = v4->m_info;
        if ( (*(_BYTE *)&m_info & 7) == 2 )
        {
          if ( CVehicle::CanBeDeleted((const CVehicle *)ppResults[(__int16)v3]) )
          {
            if ( (v4[17].m_iplIndex & 0x10) != 0 )
              goto LABEL_16;
            goto LABEL_15;
          }
          m_info = v4->m_info;
        }
        if ( (*(_BYTE *)&m_info & 7) != 3 )
          goto LABEL_12;
        if ( !CPed::CanBeDeleted((CPed *)v4) )
          break;
LABEL_15:
        CWorld::Remove(v4);
        (*((void (__fastcall **)(CEntity *))v4->_vptr$CPlaceable + 1))(v4);
LABEL_16:
        v3 = (__int16)(v3 + 1);
        if ( v3 >= pNum )
          return 1;
      }
      m_info = v4->m_info;
LABEL_12:
      if ( (*(_BYTE *)&m_info & 7) != 4 || LOBYTE(v4[5].m_pMat) == 1 || !CObject::CanBeDeleted((CObject *)v4) )
        return 0;
      goto LABEL_15;
    }
    return 1;
  }
  return v2;
}
// 326EE0: fragmented variable at 0:r3.4,4:^58.8 may be wrong
// 326EE0: variables would overlap: 0:r3.4,4:^58.8 and ^58.8

//----- (00326FA8) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
void __fastcall CRoadBlocks::RegisterScriptRoadBlock(CVector ArgCoors1, CVector ArgCoors2, bool bGangRoadBlock)
{
  bool8 *p_bActive; // r12
  int v4; // lr

  p_bActive = &CRoadBlocks::aScriptRoadBlocks[0].bActive;
  if ( CRoadBlocks::aScriptRoadBlocks[0].bActive )
  {
    p_bActive = &CRoadBlocks::aScriptRoadBlocks[1].bActive;
    if ( CRoadBlocks::aScriptRoadBlocks[1].bActive )
    {
      p_bActive = &CRoadBlocks::aScriptRoadBlocks[2].bActive;
      if ( CRoadBlocks::aScriptRoadBlocks[2].bActive )
      {
        p_bActive = &CRoadBlocks::aScriptRoadBlocks[3].bActive;
        if ( CRoadBlocks::aScriptRoadBlocks[3].bActive )
        {
          p_bActive = &CRoadBlocks::aScriptRoadBlocks[4].bActive;
          if ( CRoadBlocks::aScriptRoadBlocks[4].bActive )
          {
            p_bActive = &CRoadBlocks::aScriptRoadBlocks[5].bActive;
            if ( CRoadBlocks::aScriptRoadBlocks[5].bActive )
            {
              p_bActive = &CRoadBlocks::aScriptRoadBlocks[6].bActive;
              if ( CRoadBlocks::aScriptRoadBlocks[6].bActive )
              {
                p_bActive = &CRoadBlocks::aScriptRoadBlocks[7].bActive;
                if ( CRoadBlocks::aScriptRoadBlocks[7].bActive )
                {
                  p_bActive = &CRoadBlocks::aScriptRoadBlocks[8].bActive;
                  if ( CRoadBlocks::aScriptRoadBlocks[8].bActive )
                  {
                    if ( CRoadBlocks::aScriptRoadBlocks[9].bActive )
                    {
                      if ( CRoadBlocks::aScriptRoadBlocks[10].bActive )
                      {
                        if ( CRoadBlocks::aScriptRoadBlocks[11].bActive )
                        {
                          if ( CRoadBlocks::aScriptRoadBlocks[12].bActive )
                          {
                            if ( CRoadBlocks::aScriptRoadBlocks[13].bActive )
                            {
                              if ( CRoadBlocks::aScriptRoadBlocks[14].bActive )
                              {
                                if ( CRoadBlocks::aScriptRoadBlocks[15].bActive )
                                  return;
                                p_bActive = &CRoadBlocks::aScriptRoadBlocks[15].bActive;
                                v4 = 15;
                              }
                              else
                              {
                                p_bActive = &CRoadBlocks::aScriptRoadBlocks[14].bActive;
                                v4 = 14;
                              }
                            }
                            else
                            {
                              p_bActive = &CRoadBlocks::aScriptRoadBlocks[13].bActive;
                              v4 = 13;
                            }
                          }
                          else
                          {
                            p_bActive = &CRoadBlocks::aScriptRoadBlocks[12].bActive;
                            v4 = 12;
                          }
                        }
                        else
                        {
                          p_bActive = &CRoadBlocks::aScriptRoadBlocks[11].bActive;
                          v4 = 11;
                        }
                      }
                      else
                      {
                        p_bActive = &CRoadBlocks::aScriptRoadBlocks[10].bActive;
                        v4 = 10;
                      }
                    }
                    else
                    {
                      p_bActive = &CRoadBlocks::aScriptRoadBlocks[9].bActive;
                      v4 = 9;
                    }
                  }
                  else
                  {
                    v4 = 8;
                  }
                }
                else
                {
                  v4 = 7;
                }
              }
              else
              {
                v4 = 6;
              }
            }
            else
            {
              v4 = 5;
            }
          }
          else
          {
            v4 = 4;
          }
        }
        else
        {
          v4 = 3;
        }
      }
      else
      {
        v4 = 2;
      }
    }
    else
    {
      v4 = 1;
    }
  }
  else
  {
    v4 = 0;
  }
  *p_bActive = 1;
  CRoadBlocks::aScriptRoadBlocks[v4].Coors1.x = ArgCoors1.x;
  LODWORD(ArgCoors1.x) = &CRoadBlocks::aScriptRoadBlocks[v4];
  *(_BYTE *)(LODWORD(ArgCoors1.x) + 25) = 1;
  *(RwReal *)(LODWORD(ArgCoors1.x) + 4) = ArgCoors1.y;
  *(RwReal *)(LODWORD(ArgCoors1.x) + 8) = ArgCoors1.z;
  *(CVector *)(LODWORD(ArgCoors1.x) + 12) = ArgCoors2;
  *(_BYTE *)(LODWORD(ArgCoors1.x) + 26) = bGangRoadBlock;
}
// 326FA8: fragmented variable at 0:r3.4,4:^20.8 may be wrong
// 326FA8: variables would overlap: 0:r3.4,4:^20.8 and ^20.8

//----- (003271B0) --------------------------------------------------------
void *__fastcall CPointRoute::operator new(size_t nSize)
{
  int v1; // lr
  CPointRoutePool *v2; // r1
  void *result; // r0
  void *m_nSize; // r12
  uint8 *m_aFlags; // r2
  int v6; // r3

  v1 = 0;
  v2 = CPools::ms_pPointRoutePool;
  result = (void *)CPools::ms_pPointRoutePool->m_nFreeIndex;
  m_nSize = (void *)CPools::ms_pPointRoutePool->m_nSize;
  do
  {
    result = (char *)result + 1;
    v2->m_nFreeIndex = (int32)result;
    if ( result == m_nSize )
    {
      result = 0;
      v2->m_nFreeIndex = 0;
      if ( v1 << 31 )
        return result;
      v1 = 1;
    }
    m_aFlags = v2->m_aFlags;
    v6 = *((char *)result + (_DWORD)m_aFlags);
  }
  while ( v6 > -1 );
  *((_BYTE *)result + (_DWORD)m_aFlags) = v6 & 0x7F;
  v2->m_aFlags[v2->m_nFreeIndex] = (v2->m_aFlags[v2->m_nFreeIndex] + 1) & 0x7F | v2->m_aFlags[v2->m_nFreeIndex] & 0x80;
  return v2->m_aStorage[v2->m_nFreeIndex];
}

//----- (00327214) --------------------------------------------------------
void __fastcall CPointRoute::operator delete(void *pVoid)
{
  CPointRoutePool *v1; // r1
  int v2; // r0

  v1 = CPools::ms_pPointRoutePool;
  v2 = -1030792151 * ((signed int)((int)pVoid - (unsigned int)CPools::ms_pPointRoutePool->m_aStorage) >> 2);
  CPools::ms_pPointRoutePool->m_aFlags[v2] |= 0x80u;
  if ( v2 < v1->m_nFreeIndex )
    v1->m_nFreeIndex = v2;
}

//----- (00327244) --------------------------------------------------------
void *__fastcall CPatrolRoute::operator new(size_t nSize)
{
  int v1; // lr
  CPatrolRoutePool *v2; // r1
  void *result; // r0
  void *m_nSize; // r12
  uint8 *m_aFlags; // r2
  int v6; // r3

  v1 = 0;
  v2 = CPools::ms_pPatrolRoutePool;
  result = (void *)CPools::ms_pPatrolRoutePool->m_nFreeIndex;
  m_nSize = (void *)CPools::ms_pPatrolRoutePool->m_nSize;
  do
  {
    result = (char *)result + 1;
    v2->m_nFreeIndex = (int32)result;
    if ( result == m_nSize )
    {
      result = 0;
      v2->m_nFreeIndex = 0;
      if ( v1 << 31 )
        return result;
      v1 = 1;
    }
    m_aFlags = v2->m_aFlags;
    v6 = *((char *)result + (_DWORD)m_aFlags);
  }
  while ( v6 > -1 );
  *((_BYTE *)result + (_DWORD)m_aFlags) = v6 & 0x7F;
  v2->m_aFlags[v2->m_nFreeIndex] = (v2->m_aFlags[v2->m_nFreeIndex] + 1) & 0x7F | v2->m_aFlags[v2->m_nFreeIndex] & 0x80;
  return v2->m_aStorage[v2->m_nFreeIndex];
}

//----- (003272A8) --------------------------------------------------------
void __fastcall CPatrolRoute::operator delete(void *pVoid)
{
  CPatrolRoutePool *v1; // r1
  int v2; // r0

  v1 = CPools::ms_pPatrolRoutePool;
  v2 = -654471207 * ((signed int)((int)pVoid - (unsigned int)CPools::ms_pPatrolRoutePool->m_aStorage) >> 2);
  CPools::ms_pPatrolRoutePool->m_aFlags[v2] |= 0x80u;
  if ( v2 < v1->m_nFreeIndex )
    v1->m_nFreeIndex = v2;
}

//----- (003272D8) --------------------------------------------------------
void *__fastcall CNodeRoute::operator new(size_t nSize)
{
  int v1; // lr
  CNodeRoutePool *v2; // r1
  void *result; // r0
  void *m_nSize; // r12
  uint8 *m_aFlags; // r2
  int v6; // r3

  v1 = 0;
  v2 = CPools::ms_pNodeRoutePool;
  result = (void *)CPools::ms_pNodeRoutePool->m_nFreeIndex;
  m_nSize = (void *)CPools::ms_pNodeRoutePool->m_nSize;
  do
  {
    result = (char *)result + 1;
    v2->m_nFreeIndex = (int32)result;
    if ( result == m_nSize )
    {
      result = 0;
      v2->m_nFreeIndex = 0;
      if ( v1 << 31 )
        return result;
      v1 = 1;
    }
    m_aFlags = v2->m_aFlags;
    v6 = *((char *)result + (_DWORD)m_aFlags);
  }
  while ( v6 > -1 );
  *((_BYTE *)result + (_DWORD)m_aFlags) = v6 & 0x7F;
  v2->m_aFlags[v2->m_nFreeIndex] = (v2->m_aFlags[v2->m_nFreeIndex] + 1) & 0x7F | v2->m_aFlags[v2->m_nFreeIndex] & 0x80;
  return v2->m_aStorage[v2->m_nFreeIndex];
}

//----- (0032733C) --------------------------------------------------------
void __fastcall CNodeRoute::operator delete(void *pVoid)
{
  CNodeRoutePool *v1; // r1
  int v2; // r0

  v1 = CPools::ms_pNodeRoutePool;
  v2 = 954437177 * ((signed int)((int)pVoid - (unsigned int)CPools::ms_pNodeRoutePool->m_aStorage) >> 2);
  CPools::ms_pNodeRoutePool->m_aFlags[v2] |= 0x80u;
  if ( v2 < v1->m_nFreeIndex )
    v1->m_nFreeIndex = v2;
}

//----- (0032736C) --------------------------------------------------------
void __fastcall CMissionCleanup::CMissionCleanup(CMissionCleanup *this)
{
  int v1; // r2
  cleanup_entity_struct *v2; // r3

  v1 = 0;
  this->Count = 0;
  do
  {
    this->cleanup_entities[v1].Type = 0;
    v2 = &this->cleanup_entities[v1++];
    v2->Id = 0;
  }
  while ( v1 != 75 );
}

//----- (00327386) --------------------------------------------------------
void __fastcall CMissionCleanup::Init(CMissionCleanup *this)
{
  int v1; // r2
  cleanup_entity_struct *v2; // r3

  v1 = 0;
  this->Count = 0;
  do
  {
    this->cleanup_entities[v1].Type = 0;
    v2 = &this->cleanup_entities[v1++];
    v2->Id = 0;
  }
  while ( v1 != 75 );
}

//----- (003273A0) --------------------------------------------------------
cleanup_entity_struct *__fastcall CMissionCleanup::FindFree(CMissionCleanup *this)
{
  int v1; // r1

  v1 = 0;
  while ( this->cleanup_entities[0].Type )
  {
    ++v1;
    this = (CMissionCleanup *)((char *)this + 8);
    if ( (unsigned __int16)v1 >= 0x4Bu )
      return 0;
  }
  return this->cleanup_entities;
}

//----- (003273B8) --------------------------------------------------------
void __fastcall CMissionCleanup::CheckIfCollisionHasLoadedForMissionObjects(CMissionCleanup *this)
{
  Int32 *p_Id; // r6
  int v2; // r5
  int v3; // r0
  unsigned int v4; // r1
  uint8 *v5; // r9
  const CVector *v6; // r2
  const CVector **v7; // r4
  const CVector *v8; // r8
  const CVector *v9; // r0
  int v10; // r1
  int v11; // r0
  unsigned int v12; // r1
  unsigned int v13; // r2
  char *m_aStorage; // r0
  int v15; // r1
  unsigned int v16; // r1
  char *v17; // r9
  const CVector *v18; // r2
  const CVector **v19; // r4
  const CVector *v20; // r8
  const CVector *v21; // r0
  int v22; // r1

  p_Id = &this->cleanup_entities[0].Id;
  v2 = 0;
  do
  {
    v3 = *((unsigned __int8 *)p_Id - 4);
    switch ( v3 )
    {
      case 3:
        v12 = *p_Id;
        if ( *p_Id < 0 )
          break;
        v13 = v12 >> 8;
        if ( CPools::ms_pObjectPool->m_aFlags[v12 >> 8] != (unsigned __int8)v12 )
          break;
        m_aStorage = (char *)CPools::ms_pObjectPool->m_aStorage;
        v15 = 420;
        goto LABEL_28;
      case 2:
        v16 = *p_Id;
        if ( *p_Id < 0 )
          break;
        v13 = v16 >> 8;
        if ( CPools::ms_pPedPool->m_aFlags[v16 >> 8] != (unsigned __int8)v16 )
          break;
        m_aStorage = (char *)CPools::ms_pPedPool->m_aStorage;
        v15 = 1996;
LABEL_28:
        v17 = &m_aStorage[v13 * v15];
        if ( v17 && (v17[30] & 4) != 0 )
        {
          v19 = (const CVector **)(v17 + 20);
          v18 = (const CVector *)*((_DWORD *)v17 + 5);
          v20 = (const CVector *)(v17 + 4);
          v21 = (const CVector *)(v17 + 4);
          if ( v18 )
            v21 = v18 + 4;
          if ( CColStore::HasCollisionLoaded(v21, (unsigned __int8)v17[51]) )
          {
            if ( *v19 )
              v20 = *v19 + 4;
            if ( CIplStore::HaveIplsLoaded(v20, (unsigned __int8)v17[51]) )
            {
              v22 = *((_DWORD *)v17 + 7);
              *((_DWORD *)v17 + 7) = v22 & 0xFFFBFFFF;
              if ( (v22 & 4) == 0 )
                CPhysical::AddToMovingList((CPhysical *)v17);
            }
          }
        }
        break;
      case 1:
        v4 = *p_Id;
        if ( *p_Id >= 0 && CPools::ms_pVehiclePool->m_aFlags[v4 >> 8] == (unsigned __int8)v4 )
        {
          v5 = CPools::ms_pVehiclePool->m_aStorage[v4 >> 8];
          if ( v5 )
          {
            if ( (v5[30] & 4) != 0 )
            {
              v7 = (const CVector **)(v5 + 20);
              v6 = (const CVector *)*((_DWORD *)v5 + 5);
              v8 = (const CVector *)(v5 + 4);
              v9 = (const CVector *)(v5 + 4);
              if ( v6 )
                v9 = v6 + 4;
              if ( CColStore::HasCollisionLoaded(v9, v5[51]) )
              {
                if ( *v7 )
                  v8 = *v7 + 4;
                if ( CIplStore::HaveIplsLoaded(v8, v5[51]) )
                {
                  v10 = *((_DWORD *)v5 + 7);
                  *((_DWORD *)v5 + 7) = v10 & 0xFFFBFFFF;
                  if ( (v10 & 4) == 0 )
                    CPhysical::AddToMovingList((CPhysical *)v5);
                  v11 = *((_DWORD *)v5 + 360);
                  switch ( v11 )
                  {
                    case 11:
                      goto LABEL_21;
                    case 9:
                      CBike::PlaceOnRoadProperly((CBike *)v5);
                      goto LABEL_38;
                    case 0:
LABEL_21:
                      CAutomobile::PlaceOnRoadProperly((CAutomobile *)v5);
                      break;
                  }
                }
              }
            }
          }
        }
        break;
    }
LABEL_38:
    ++v2;
    p_Id += 2;
  }
  while ( (unsigned __int16)v2 < 0x4Bu );
}

//----- (00327558) --------------------------------------------------------
void __fastcall CMissionCleanup::AddEntityToList(CMissionCleanup *this, Int32 Id, UInt8 Type)
{
  Int32 *p_Id; // r12
  int v4; // lr

  p_Id = &this->cleanup_entities[0].Id;
  v4 = 0;
  while ( *((_BYTE *)p_Id - 4) )
  {
    ++v4;
    p_Id += 2;
    if ( (unsigned __int16)v4 >= 0x4Bu )
      return;
  }
  if ( p_Id != (Int32 *)&byte_4 )
  {
    *((_BYTE *)p_Id - 4) = Type;
    *p_Id = Id;
    ++this->Count;
  }
}
// 4: using guessed type char byte_4;

//----- (0032759C) --------------------------------------------------------
void __fastcall CMissionCleanup::RemoveEntityFromList(CMissionCleanup *this, Int32 Id, UInt8 Type)
{
  Int32 *p_Id; // r6
  int v6; // r4
  unsigned int v7; // r9
  int v8; // r11
  CPedPool **v9; // r12
  CVehiclePool **v10; // r3
  int v11; // r0
  bool v12; // zf
  int v13; // r2
  CPool<CObject,CCutsceneObject>::StorageType *m_aStorage; // r0
  int v15; // r1
  uint8 *v16; // r0
  bool v17; // zf
  int v18; // [sp+0h] [bp-28h]
  CVehiclePool **v19; // [sp+4h] [bp-24h]
  CPedPool **v20; // [sp+8h] [bp-20h]

  p_Id = &this->cleanup_entities[0].Id;
  v6 = Type;
  v7 = (unsigned int)Id >> 8;
  v8 = 0;
  v9 = &CPools::ms_pPedPool;
  v10 = &CPools::ms_pVehiclePool;
  do
  {
    v11 = *((unsigned __int8 *)p_Id - 4);
    v12 = v11 == v6;
    if ( v11 == v6 )
      v12 = *p_Id == Id;
    if ( v12 )
    {
      if ( v6 == 3 )
      {
        if ( Id >= 0 )
        {
          v13 = (unsigned __int8)Id;
          if ( CPools::ms_pObjectPool->m_aFlags[v7] == (unsigned __int8)Id )
          {
            m_aStorage = CPools::ms_pObjectPool->m_aStorage;
            v15 = 420;
            goto LABEL_18;
          }
        }
      }
      else if ( v6 == 2 )
      {
        if ( Id >= 0 )
        {
          v13 = (unsigned __int8)Id;
          if ( (*v9)->m_aFlags[v7] == (unsigned __int8)Id )
          {
            m_aStorage = (CPool<CObject,CCutsceneObject>::StorageType *)(*v9)->m_aStorage;
            v15 = 1996;
            goto LABEL_18;
          }
        }
      }
      else if ( v6 == 1 && Id >= 0 )
      {
        v13 = (unsigned __int8)Id;
        if ( (*v10)->m_aFlags[v7] == (unsigned __int8)Id )
        {
          m_aStorage = (CPool<CObject,CCutsceneObject>::StorageType *)(*v10)->m_aStorage;
          v15 = 2604;
LABEL_18:
          v16 = &(*m_aStorage)[v7 * v15];
          v17 = v16 == 0;
          if ( v16 )
          {
            v15 = (int)(v16 + 28);
            v13 = *((_DWORD *)v16 + 7);
            v17 = (v13 & 0x40000) == 0;
          }
          if ( !v17 )
          {
            v19 = v10;
            v18 = *(_DWORD *)(v15 + 4);
            v20 = v9;
            *(_DWORD *)v15 = v13 & 0xFFFBFFFF;
            *(_DWORD *)(v15 + 4) = v18;
            if ( (v13 & 4) == 0 )
            {
              CPhysical::AddToMovingList((CPhysical *)v16);
              v9 = v20;
              v10 = v19;
            }
          }
        }
      }
      *((_BYTE *)p_Id - 4) = 0;
      *p_Id = 0;
      --this->Count;
    }
    ++v8;
    p_Id += 2;
  }
  while ( (unsigned __int16)v8 < 0x4Bu );
}

//----- (003276B4) --------------------------------------------------------
void __fastcall CMissionCleanup::Process(CMissionCleanup *this)
{
  CPad *Pad; // r0
  __int64 v3; // r0
  CPedGroup *v4; // r6
  CPlayerPed *pPed; // r0
  CPlayerPed *v6; // r0
  CPad *v7; // r0
  CTask *TaskByType; // r0
  CTaskComplexUseMobilePhone *v9; // r5
  int v10; // r3
  _DWORD *v11; // r6
  CPlayerPed *v12; // r1
  int v13; // r8
  CMissionCleanup *v14; // r4
  int Id; // r1
  CVehicle *v16; // r0
  int v17; // r1
  CPed *v18; // r0
  int v19; // r1
  CObject *v20; // r0
  int32 ActualScriptThingIndex; // r0
  FxSystem_c *pFXSystem; // r0
  int32 v23; // r0
  int32 v24; // r0
  int32 v25; // r0
  int32 v26; // r6
  CTaskComplexSequence *v27; // r0
  int m_iRefCount; // r1
  bool *p_m_bCanBeEmptied; // r0
  int32 v30; // r0
  int i; // r6
  int32 TxdSlot; // r0
  int32 j; // r4
  int32 k; // r5
  uint32 PedFlag; // r0
  uint32 v36; // r0
  uint32 v37; // r0
  uint32 v38; // r0
  uint32 v39; // r0

  if ( CTheScripts::bScriptHasFadedOut )
  {
    CTheScripts::bScriptHasFadedOut = 0;
    if ( (unsigned __int8)(CWorld::Players[0].PlayerState - 1) >= 2u )
    {
      CCamera::Fade(&TheCamera, 0.5, 1);
      Pad = CPad::GetPad(0);
      Pad->DisablePlayerControls &= ~0x20u;
    }
  }
  CTrain::DisableRandomTrains(0);
  CTrain::ReleaseMissionTrains();
  CPlane::SwitchAmbientPlanes(1);
  CCarCtrl::CarDensityMultiplier = 1.0;
  CPopulation::PedDensityMultiplier = 1.0;
  if ( CGangWars::bTrainingMission )
  {
    CGangWars::bTrainingMission = 0;
    CTheZones::FillZonesWithGangColours(!CGangWars::bGangWarsActive);
  }
  CGangWars::bCanTriggerGangWarWhenOnAMission = 0;
  CPopulation::m_AllRandomPedsThisType = -1;
  CGangWars::ClearSpecificZonesToTriggerGangWar();
  CPopulation::m_bOnlyCreateRandomGangMembers = 0;
  CPopulation::m_bDontCreateRandomGangMembers = 0;
  CPopulation::m_bDontCreateRandomCops = 0;
  CGarages::NoResprays = 0;
  CGarages::AllRespraysCloseOrOpen(1);
  CCullZones::bMilitaryZonesDisabled = 0;
  FindPlayerWanted(-1)->m_fMultiplier = 1.0;
  CPickups::RemoveMissionPickUps();
  CRoadBlocks::ClearScriptRoadBlocks();
  CStreaming::DisableCopBikes(0);
  CObject::bArea51SamSiteDisabled = 0;
  g_LoadMonitor.m_bEnableAmbientCrime = 1;
  CObject::bAircraftCarrierSamSiteDisabled = 1;
  CPathFind::ReleaseRequestedNodes(&ThePaths);
  CPathFind::UnMarkAllRoadNodesAsDontWander(&ThePaths);
  CPathFind::TidyUpNodeSwitchesAfterMission(&ThePaths);
  CVehicleRecording::RemoveAllRecordingsThatArentUsed();
  CCamera::SetWideScreenOff(&TheCamera);
  LODWORD(v3) = (char *)&loc_310030 + 2;
  HIDWORD(v3) = &loc_300002;
  *(_QWORD *)&TheCamera.m_ModeForTwoPlayersSeparateCars = v3;
  TheCamera.m_bDisableFirstPersonInCar = 0;
  TheCamera.m_bForceCinemaCam = 0;
  CCamera::InitialiseScriptableComponents(&TheCamera);
  CCamera::ResetDuckingSystem(&TheCamera, 0);
  gCurDistForCam = 1.0;
  CGameLogic::bScriptCoopGameGoingOn = 0;
  gAllowScriptedFixedCameraCollision = 0;
  CTheScripts::bDrawCrossHair = SCRIPT_CROSSHAIR_OFF;
  CSpecialFX::bVideoCam = 0;
  CSpecialFX::bLiftCam = 0;
  CPostEffects::ScriptResetForEffects();
  CEntryExitManager::ms_bDisabled = 0;
  if ( CGame::currArea == AREA_MAIN_MAP )
    CTimeCycle::StopExtraColour(0);
  CAudioEngine::ClearMissionAudio(&AudioEngine, 0);
  CAudioEngine::ClearMissionAudio(&AudioEngine, 1u);
  CAudioEngine::ClearMissionAudio(&AudioEngine, 2u);
  CAudioEngine::ClearMissionAudio(&AudioEngine, 3u);
  CAudioEngine::Service(&AudioEngine);
  CWeather::ReleaseWeather();
  gFireManager.m_nMaxGenerationsAllowed = 99999;
  CStreaming::SetMissionDoesntRequireSpecialChar(0);
  CStreaming::SetMissionDoesntRequireSpecialChar(1);
  CStreaming::SetMissionDoesntRequireSpecialChar(2);
  CStreaming::SetMissionDoesntRequireSpecialChar(3);
  CStreaming::SetMissionDoesntRequireSpecialChar(4);
  CStreaming::SetMissionDoesntRequireSpecialChar(5);
  CStreaming::SetMissionDoesntRequireSpecialChar(6);
  CStreaming::SetMissionDoesntRequireSpecialChar(7);
  CStreaming::SetMissionDoesntRequireSpecialChar(8);
  CStreaming::SetMissionDoesntRequireSpecialChar(9);
  CTheScripts::ClearAllSuppressedCarModels();
  CTheScripts::ForceRandomCarModel = -1;
  CStreaming::ms_disableStreaming = 0;
  CTheScripts::RadarZoomValue = 0;
  CHud::m_ItemToFlash = -1;
  CTheScripts::RadarShowBlipOnAllLevels = 0;
  CTheScripts::HideAllFrontEndMapBlips = 0;
  CHud::bScriptDontDisplayRadar = 0;
  CHud::bScriptDontDisplayVehicleName = 0;
  CHud::bScriptDontDisplayAreaName = 0;
  CHud::bScriptForceDisplayWithCounters = 0;
  FrontEndMenuManager.bPauseWhenInWidescreen = 0;
  C3dMarkers::ForceRender(0);
  CTheScripts::bDrawOddJobTitleBeforeFade = 1;
  CTheScripts::bDrawSubtitlesBeforeFade = 1;
  CTheScripts::fCameraHeadingWhenPlayerIsAttached = 0.0;
  CTheScripts::bDisplayHud = 1;
  CTheScripts::fCameraHeadingStepWhenPlayerIsAttached = 0.0;
  CTheScripts::bEnableCraneRaise = 1;
  CTheScripts::bEnableCraneLower = 1;
  CTheScripts::bEnableCraneRelease = 1;
  CUserDisplay::OnscnTimer.FreezeTimers = 0;
  CTheScripts::bUseMessageFormatting = 0;
  CTheScripts::MessageCentre = 0;
  CTheScripts::MessageWidth = 0;
  v4 = &CPedGroups::ms_groups[CWorld::Players[0].pPed->m_pPlayerData->m_PlayerGroup];
  CPedGroupIntelligence::SetDefaultTaskAllocatorType(&v4->m_intelligence, 1);
  CPedGroupIntelligence::SetGroupDecisionMakerType(&v4->m_intelligence, -1);
  v4->m_membership.m_fMaxSeparation = 120.0;
  pPed = CWorld::Players[0].pPed;
  *((_WORD *)CWorld::Players[0].pPed->m_pPlayerData + 26) &= ~0x100u;
  CPlayerPed::ForceGroupToAlwaysFollow(pPed, 0);
  CPlayerPed::ForceGroupToNeverFollow(CWorld::Players[0].pPed, 0);
  CPlayerPed::MakePlayerGroupReappear(CWorld::Players[0].pPed);
  v6 = CWorld::Players[0].pPed;
  CWorld::Players[0].pPed->m_pPlayerData->m_nScriptLimitToGangSize = 99;
  v6->FireDamageMultiplier = 1.0;
  *(_WORD *)&CWorld::Players[0].PlayerPedData.m_bFadeDrunkenness = 1;
  CPed::EnablePedSpeech(v6);
  CPed::EnablePedSpeechForScriptSpeech(CWorld::Players[0].pPed);
  v7 = CPad::GetPad(0);
  CPad::SetDrunkInputDelay(v7, 0);
  CPad::GetPad(0)->bApplyBrakes = 0;
  CPad::GetPad(0)->bDisablePlayerEnterCar = 0;
  CPad::GetPad(0)->bDisablePlayerDuck = 0;
  CPad::GetPad(0)->bDisablePlayerFireWeapon = 0;
  CPad::GetPad(0)->bDisablePlayerFireWeaponWithL1 = 0;
  CPad::GetPad(0)->bDisablePlayerCycleWeapon = 0;
  CPad::GetPad(0)->bDisablePlayerJump = 0;
  CPad::GetPad(0)->bDisablePlayerDisplayVitalStats = 0;
  CWorld::Players[0].bCanDoDriveBy = 1;
  TaskByType = CTaskManager::FindTaskByType(&CWorld::Players[0].pPed->m_pPedIntelligence->m_taskManager, 3, 1600);
  v9 = (CTaskComplexUseMobilePhone *)TaskByType;
  if ( TaskByType && (*((int (__fastcall **)(CTask *))TaskByType->_vptr$CTask + 5))(TaskByType) == 1600 )
    CTaskComplexUseMobilePhone::Stop(v9, CWorld::Players[0].pPed);
  CVehicle::bDisableRemoteDetonationOnContact = 0;
  CVehicle::bDisableRemoteDetonation = 0;
  CGameLogic::ClearSkip(1);
  if ( (unsigned __int8)(CGameLogic::GameState - 1) >= 2u
    && FindPlayerPed(-1)->m_nPedState != PED_DEAD
    && FindPlayerPed(-1)->m_nPedState != PED_DIE )
  {
    CRestart::ClearRespawnPointForDurationOfMission();
  }
  CTheScripts::RiotIntensity = 0;
  CFireManager::ClearAllScriptFireFlags(&gFireManager);
  CTheScripts::StoreVehicleWasRandom = 1;
  CTheScripts::StoreVehicleIndex = -1;
  CTheScripts::UpsideDownCars.Cars[4] = (upsidedown_car_data)0xFFFFFFFFLL;
  CTheScripts::UpsideDownCars.Cars[5] = (upsidedown_car_data)0xFFFFFFFFLL;
  CTheScripts::UpsideDownCars.Cars[0] = (upsidedown_car_data)0xFFFFFFFFLL;
  CTheScripts::UpsideDownCars.Cars[1] = (upsidedown_car_data)0xFFFFFFFFLL;
  CTheScripts::UpsideDownCars.Cars[2] = (upsidedown_car_data)0xFFFFFFFFLL;
  CTheScripts::UpsideDownCars.Cars[3] = (upsidedown_car_data)0xFFFFFFFFLL;
  v10 = 0;
  do
  {
    CTheScripts::StuckCars.Cars[v10].CarID = -1;
    v11 = (_DWORD *)((char *)&CTheScripts::StuckCars + v10 * 36);
    ++v10;
    v11[1] = -979615744;
    v11[2] = -979615744;
    v11[3] = -979615744;
    v11[4] = -1;
    *(_DWORD *)((char *)v11 + 30) = 0;
    *(_DWORD *)((char *)v11 + 26) = 0;
    v11[5] = 0;
    v11[6] = 0;
  }
  while ( v10 != 16 );
  CEventGunShot::ms_fGunShotSenseRangeForRiot2 = -1.0;
  CStats::bShowUpdateStats = 1;
  CVehicle::ms_forceVehicleLightsOff = 0;
  if ( !CTheScripts::bMiniGameInProgress )
  {
    if ( !CWorld::Players[CWorld::PlayerInFocus].pRemoteVehicle )
      CCamera::Restore(&TheCamera);
    v12 = CWorld::Players[0].pPed;
    *((_BYTE *)CWorld::Players[0].pPed->m_pPlayerData->m_Wanted + 30) &= ~1u;
    *((_BYTE *)v12->m_pPlayerData->m_Wanted + 30) &= ~4u;
    CPlayerInfo::MakePlayerSafe(CWorld::Players, 0, 10000.0);
    CHud::SetHelpMessage(0, 0, 1, 0, 0, 0);
  }
  v13 = 0;
  v14 = this;
  while ( 2 )
  {
    switch ( v14->cleanup_entities[0].Type )
    {
      case 0u:
        goto LABEL_61;
      case 1u:
        Id = v14->cleanup_entities[0].Id;
        if ( Id >= 0 && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)Id >> 8] == (unsigned __int8)Id )
        {
          v16 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)Id >> 8];
          if ( v16 )
            CTheScripts::CleanUpThisVehicle(v16);
        }
        goto LABEL_60;
      case 2u:
        v17 = v14->cleanup_entities[0].Id;
        if ( v17 >= 0 && CPools::ms_pPedPool->m_aFlags[(unsigned int)v17 >> 8] == (unsigned __int8)v17 )
        {
          v18 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)v17 >> 8];
          if ( v18 )
            CTheScripts::CleanUpThisPed(v18);
        }
        goto LABEL_60;
      case 3u:
        v19 = v14->cleanup_entities[0].Id;
        if ( v19 >= 0 && CPools::ms_pObjectPool->m_aFlags[(unsigned int)v19 >> 8] == (unsigned __int8)v19 )
        {
          v20 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)v19 >> 8];
          if ( v20 )
            CTheScripts::CleanUpThisObject(v20);
        }
        goto LABEL_60;
      case 4u:
        ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(v14->cleanup_entities[0].Id, 1u);
        if ( ActualScriptThingIndex >= 0 )
        {
          pFXSystem = CTheScripts::ScriptEffectSystemArray[ActualScriptThingIndex].pFXSystem;
          if ( pFXSystem )
          {
            FxSystem_c::Kill(pFXSystem);
            CTheScripts::RemoveScriptEffectSystem(v14->cleanup_entities[0].Id);
          }
        }
        goto LABEL_60;
      case 5u:
        v23 = CTheScripts::GetActualScriptThingIndex(v14->cleanup_entities[0].Id, 8u);
        if ( v23 >= 0 )
          CPedGroups::RemoveGroup(v23);
        goto LABEL_60;
      case 7u:
        v24 = CTheScripts::GetActualScriptThingIndex(v14->cleanup_entities[0].Id, 6u);
        if ( v24 >= 0 )
          CScripted2dEffects::ms_activated[v24] = 0;
        goto LABEL_60;
      case 8u:
        v25 = CTheScripts::GetActualScriptThingIndex(v14->cleanup_entities[0].Id, 4u);
        v26 = v25;
        if ( v25 >= 0 )
        {
          v27 = &CTaskSequences::ms_taskSequence[v25];
          m_iRefCount = v27->m_iRefCount;
          p_m_bCanBeEmptied = &v27->m_bCanBeEmptied;
          if ( m_iRefCount )
          {
            *p_m_bCanBeEmptied = 1;
          }
          else
          {
            *p_m_bCanBeEmptied = 0;
            CTaskComplexSequence::Flush(&CTaskSequences::ms_taskSequence[v26]);
          }
          CTaskSequences::ms_bIsOpened[v26] = 0;
          CTheScripts::ScriptSequenceTaskArray[v26].bUsed = 0;
        }
        goto LABEL_60;
      case 9u:
        v30 = CTheScripts::GetActualScriptThingIndex(v14->cleanup_entities[0].Id, 7u);
        if ( v30 >= 0 )
          CDecisionMakerTypesFileLoader::UnloadDecisionMaker(v30);
        goto LABEL_60;
      case 0xBu:
        if ( CTheScripts::GetActualScriptThingIndex(v14->cleanup_entities[0].Id, 2u) >= 0 )
          CTheScripts::RemoveScriptSearchLight(v14->cleanup_entities[0].Id);
        goto LABEL_60;
      case 0xCu:
        if ( CTheScripts::GetActualScriptThingIndex(v14->cleanup_entities[0].Id, 3u) >= 0 )
          CTheScripts::RemoveScriptCheckpoint(v14->cleanup_entities[0].Id);
        goto LABEL_60;
      case 0xDu:
        for ( i = 0; i != 128; ++i )
          CSprite2d::Delete(&CTheScripts::ScriptSprites[i]);
        TxdSlot = CTxdStore::FindTxdSlot("script");
        if ( TxdSlot != -1 && *(_DWORD *)&CTxdStore::ms_pTxdPool->m_aStorage[TxdSlot][0] )
          CTxdStore::RemoveTxd(TxdSlot);
        goto LABEL_60;
      default:
LABEL_60:
        CMissionCleanup::RemoveEntityFromList(this, v14->cleanup_entities[0].Id, v14->cleanup_entities[0].Type);
LABEL_61:
        ++v13;
        v14 = (CMissionCleanup *)((char *)v14 + 8);
        if ( (unsigned __int16)v13 < 0x4Bu )
          continue;
        for ( j = 0; j != 24; ++j )
        {
          for ( k = 24; k != 32; ++k )
          {
            PedFlag = CPedType::GetPedFlag(k);
            CPedType::ClearPedTypeAsAcquaintance(0, j, PedFlag);
            v36 = CPedType::GetPedFlag(k);
            CPedType::ClearPedTypeAsAcquaintance(1, j, v36);
            v37 = CPedType::GetPedFlag(k);
            CPedType::ClearPedTypeAsAcquaintance(2, j, v37);
            v38 = CPedType::GetPedFlag(k);
            CPedType::ClearPedTypeAsAcquaintance(3, j, v38);
            v39 = CPedType::GetPedFlag(k);
            CPedType::ClearPedTypeAsAcquaintance(4, j, v39);
          }
        }
        CPedType::ClearPedTypeAcquaintances(0, 24);
        CPedType::ClearPedTypeAcquaintances(1, 24);
        CPedType::ClearPedTypeAcquaintances(2, 24);
        CPedType::ClearPedTypeAcquaintances(3, 24);
        CPedType::ClearPedTypeAcquaintances(4, 24);
        CPedType::ClearPedTypeAcquaintances(0, 25);
        CPedType::ClearPedTypeAcquaintances(1, 25);
        CPedType::ClearPedTypeAcquaintances(2, 25);
        CPedType::ClearPedTypeAcquaintances(3, 25);
        CPedType::ClearPedTypeAcquaintances(4, 25);
        CPedType::ClearPedTypeAcquaintances(0, 26);
        CPedType::ClearPedTypeAcquaintances(1, 26);
        CPedType::ClearPedTypeAcquaintances(2, 26);
        CPedType::ClearPedTypeAcquaintances(3, 26);
        CPedType::ClearPedTypeAcquaintances(4, 26);
        CPedType::ClearPedTypeAcquaintances(0, 27);
        CPedType::ClearPedTypeAcquaintances(1, 27);
        CPedType::ClearPedTypeAcquaintances(2, 27);
        CPedType::ClearPedTypeAcquaintances(3, 27);
        CPedType::ClearPedTypeAcquaintances(4, 27);
        CPedType::ClearPedTypeAcquaintances(0, 28);
        CPedType::ClearPedTypeAcquaintances(1, 28);
        CPedType::ClearPedTypeAcquaintances(2, 28);
        CPedType::ClearPedTypeAcquaintances(3, 28);
        CPedType::ClearPedTypeAcquaintances(4, 28);
        CPedType::ClearPedTypeAcquaintances(0, 29);
        CPedType::ClearPedTypeAcquaintances(1, 29);
        CPedType::ClearPedTypeAcquaintances(2, 29);
        CPedType::ClearPedTypeAcquaintances(3, 29);
        CPedType::ClearPedTypeAcquaintances(4, 29);
        CPedType::ClearPedTypeAcquaintances(0, 30);
        CPedType::ClearPedTypeAcquaintances(1, 30);
        CPedType::ClearPedTypeAcquaintances(2, 30);
        CPedType::ClearPedTypeAcquaintances(3, 30);
        CPedType::ClearPedTypeAcquaintances(4, 30);
        CPedType::ClearPedTypeAcquaintances(0, 31);
        CPedType::ClearPedTypeAcquaintances(1, 31);
        CPedType::ClearPedTypeAcquaintances(2, 31);
        CPedType::ClearPedTypeAcquaintances(3, 31);
        j_CPedType::ClearPedTypeAcquaintances(4, 31);
        return;
    }
  }
}
// 40: using guessed type int dword_40;
// 44: using guessed type int dword_44;
// FC: using guessed type int elf_hash_bucket[16411];
// 6760D4: using guessed type char (*CScripted2dEffects::ms_activated)[64];
// 678360: using guessed type char *CObject::bArea51SamSiteDisabled[2];
// 6787E0: using guessed type char *CTheScripts::bDrawSubtitlesBeforeFade;
// 67982C: using guessed type script_effect_struct (*CTheScripts::ScriptEffectSystemArray)[32];
// 679CA8: using guessed type char *CTheScripts::bDrawOddJobTitleBeforeFade;
// 679D88: using guessed type char *CObject::bAircraftCarrierSamSiteDisabled[5];
// 679D90: using guessed type char *CVehicle::ms_forceVehicleLightsOff[3];

//----- (00328220) --------------------------------------------------------
void __fastcall CMissionCleanup::DoFadeScrewUpCheck(CMissionCleanup *this)
{
  CPad *Pad; // r0

  if ( CTheScripts::bScriptHasFadedOut )
  {
    CTheScripts::bScriptHasFadedOut = 0;
    if ( (unsigned __int8)(CWorld::Players[0].PlayerState - 1) >= 2u )
    {
      CCamera::Fade(&TheCamera, 0.5, 1);
      Pad = CPad::GetPad(0);
      Pad->DisablePlayerControls &= ~0x20u;
    }
  }
}

//----- (00328284) --------------------------------------------------------
void __fastcall CUpsideDownCarCheck::Init(CUpsideDownCarCheck *this)
{
  upsidedown_car_data *v1; // r0

  this->Cars[4] = (upsidedown_car_data)0xFFFFFFFFLL;
  this->Cars[5] = (upsidedown_car_data)0xFFFFFFFFLL;
  this->Cars[0] = (upsidedown_car_data)0xFFFFFFFFLL;
  this->Cars[1] = (upsidedown_car_data)0xFFFFFFFFLL;
  v1 = &this->Cars[2];
  *v1 = (upsidedown_car_data)0xFFFFFFFFLL;
  v1[1] = (upsidedown_car_data)0xFFFFFFFFLL;
}

//----- (0032829A) --------------------------------------------------------
void __fastcall CStuckCarCheck::Init(CStuckCarCheck *this)
{
  int v1; // r2
  _DWORD *v2; // r3

  v1 = 0;
  do
  {
    this->Cars[v1].CarID = -1;
    v2 = (_DWORD *)((char *)this + v1 * 36);
    ++v1;
    v2[1] = -979615744;
    v2[2] = -979615744;
    v2[3] = -979615744;
    v2[4] = -1;
    *(_DWORD *)((char *)v2 + 30) = 0;
    *(_DWORD *)((char *)v2 + 26) = 0;
    v2[5] = 0;
    v2[6] = 0;
  }
  while ( v1 != 16 );
}

//----- (003282D4) --------------------------------------------------------
void CTheScripts::RemoveScriptTextureDictionary()
{
  int i; // r4
  int32 TxdSlot; // r0

  for ( i = 0; i != 128; ++i )
    CSprite2d::Delete(&CTheScripts::ScriptSprites[i]);
  TxdSlot = CTxdStore::FindTxdSlot("script");
  if ( TxdSlot != -1 )
  {
    if ( *(_DWORD *)&CTxdStore::ms_pTxdPool->m_aStorage[TxdSlot][0] )
      sub_1A09BC(TxdSlot);
  }
}

//----- (00328328) --------------------------------------------------------
Bool8 __fastcall CUpsideDownCarCheck::IsCarUpsideDown(CUpsideDownCarCheck *this, Int32 CarToCheckID)
{
  uint8 *v2; // r0
  int v3; // r3
  int v4; // r3
  bool v5; // r3
  float v6; // s2

  v2 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)CarToCheckID >> 8];
  v3 = *((_DWORD *)v2 + 360);
  if ( v3 == 9 )
  {
    v4 = 2072;
  }
  else
  {
    if ( v3 )
    {
      v5 = 1;
      goto LABEL_7;
    }
    v4 = 2420;
  }
  v5 = v2[v4] < 4u;
LABEL_7:
  v6 = *(float *)(*(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)CarToCheckID >> 8][20] + 40);
  return (v6 < 0.0 || v6 < 0.3 && v5) && (*(int (__fastcall **)(uint8 *, _DWORD))(*(_DWORD *)v2 + 232))(v2, 0) != 0;
}

//----- (003283BC) --------------------------------------------------------
Bool8 __fastcall CUpsideDownCarCheck::IsCarUpsideDown(CUpsideDownCarCheck *this, const CVehicle *pVehicleToCheck)
{
  int32 m_baseVehicleType; // r0
  unsigned __int8 *p_SoundPtr; // r0
  bool v4; // r0
  float zz; // s2

  m_baseVehicleType = pVehicleToCheck->m_baseVehicleType;
  if ( m_baseVehicleType == 9 )
  {
    p_SoundPtr = (unsigned __int8 *)&pVehicleToCheck[1].m_VehicleAudioEntity.m_EngineSounds[8].SoundPtr;
  }
  else
  {
    if ( m_baseVehicleType )
    {
      v4 = 1;
      goto LABEL_7;
    }
    p_SoundPtr = (unsigned __int8 *)&pVehicleToCheck[1].AutoPilot.TempActionFinish;
  }
  v4 = *p_SoundPtr < 4u;
LABEL_7:
  zz = pVehicleToCheck->m_pMat->zz;
  return (zz < 0.0 || v4 && zz < 0.3)
      && (*((int (__fastcall **)(const CVehicle *, _DWORD))pVehicleToCheck->_vptr$CPlaceable + 58))(pVehicleToCheck, 0) != 0;
}

//----- (00328430) --------------------------------------------------------
void __fastcall CUpsideDownCarCheck::UpdateTimers(CUpsideDownCarCheck *this)
{
  int v2; // r5
  unsigned int v3; // r8
  int v4; // r1
  bool v5; // r1
  float v6; // s0
  Int32 CarID; // r0
  uint8 *v8; // r0
  int v9; // r1

  v2 = 0;
  v3 = (unsigned int)(float)((float)(CTimer::ms_fTimeStep / 50.0) * 1000.0);
  do
  {
    CarID = this->Cars[v2].CarID;
    if ( CarID == -1
      || CarID < 0
      || CPools::ms_pVehiclePool->m_aFlags[(unsigned int)CarID >> 8] != (unsigned __int8)CarID
      || (v8 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)CarID >> 8]) == 0 )
    {
      this->Cars[v2].CarID = -1;
      goto LABEL_17;
    }
    v9 = *((_DWORD *)v8 + 360);
    if ( v9 == 9 )
    {
      v4 = 2072;
LABEL_3:
      v5 = v8[v4] < 4u;
      goto LABEL_5;
    }
    if ( !v9 )
    {
      v4 = 2420;
      goto LABEL_3;
    }
    v5 = 1;
LABEL_5:
    v6 = *(float *)(*((_DWORD *)v8 + 5) + 40);
    if ( (v6 < 0.0 || v5 && v6 < 0.3) && (*(int (__fastcall **)(uint8 *, _DWORD))(*(_DWORD *)v8 + 232))(v8, 0) == 1 )
    {
      this->Cars[v2].UpsideDownTimer += v3;
      goto LABEL_18;
    }
LABEL_17:
    this->Cars[v2].UpsideDownTimer = 0;
LABEL_18:
    ++v2;
  }
  while ( v2 != 6 );
}

//----- (00328538) --------------------------------------------------------
Bool8 __fastcall CUpsideDownCarCheck::AreAnyCarsUpsideDown(CUpsideDownCarCheck *this)
{
  return this->Cars[0].CarID >= 0 && this->Cars[0].UpsideDownTimer > 0x7D0
      || this->Cars[1].CarID > -1 && this->Cars[1].UpsideDownTimer > 0x7D0
      || this->Cars[2].CarID >= 0 && this->Cars[2].UpsideDownTimer > 0x7D0
      || this->Cars[3].CarID >= 0 && this->Cars[3].UpsideDownTimer > 0x7D0
      || this->Cars[4].CarID >= 0 && this->Cars[4].UpsideDownTimer > 0x7D0
      || this->Cars[5].CarID >= 0 && this->Cars[5].UpsideDownTimer > 0x7D0;
}

//----- (00328596) --------------------------------------------------------
void __fastcall CUpsideDownCarCheck::AddCarToCheck(CUpsideDownCarCheck *this, Int32 NewCarID)
{
  CUpsideDownCarCheck *v2; // r3
  int v3; // r2

  if ( this->Cars[0].CarID < 0 )
  {
    v3 = 0;
    v2 = this;
  }
  else
  {
    v2 = (CUpsideDownCarCheck *)&this->Cars[1];
    if ( this->Cars[1].CarID <= -1 )
    {
      v3 = 1;
    }
    else
    {
      v2 = (CUpsideDownCarCheck *)&this->Cars[2];
      if ( this->Cars[2].CarID < 0 )
      {
        v3 = 2;
      }
      else
      {
        v2 = (CUpsideDownCarCheck *)&this->Cars[3];
        if ( this->Cars[3].CarID < 0 )
        {
          v3 = 3;
        }
        else
        {
          v2 = (CUpsideDownCarCheck *)&this->Cars[4];
          if ( this->Cars[4].CarID < 0 )
          {
            v3 = 4;
          }
          else
          {
            v2 = (CUpsideDownCarCheck *)&this->Cars[5];
            if ( this->Cars[5].CarID > -1 )
              return;
            v3 = 5;
          }
        }
      }
    }
  }
  v2->Cars[0].CarID = NewCarID;
  this->Cars[v3].UpsideDownTimer = 0;
}

//----- (003285FC) --------------------------------------------------------
void __fastcall CUpsideDownCarCheck::RemoveCarFromCheck(CUpsideDownCarCheck *this, Int32 RemoveCarID)
{
  if ( this->Cars[0].CarID == RemoveCarID )
  {
    this->Cars[0].CarID = -1;
    this->Cars[0].UpsideDownTimer = 0;
  }
  if ( this->Cars[1].CarID == RemoveCarID )
  {
    this->Cars[1].CarID = -1;
    this->Cars[1].UpsideDownTimer = 0;
  }
  if ( this->Cars[2].CarID == RemoveCarID )
  {
    this->Cars[2].CarID = -1;
    this->Cars[2].UpsideDownTimer = 0;
  }
  if ( this->Cars[3].CarID == RemoveCarID )
  {
    this->Cars[3].CarID = -1;
    this->Cars[3].UpsideDownTimer = 0;
  }
  if ( this->Cars[4].CarID == RemoveCarID )
  {
    this->Cars[4].CarID = -1;
    this->Cars[4].UpsideDownTimer = 0;
  }
  if ( this->Cars[5].CarID == RemoveCarID )
  {
    this->Cars[5].CarID = -1;
    this->Cars[5].UpsideDownTimer = 0;
  }
}

//----- (0032865E) --------------------------------------------------------
Bool8 __fastcall CUpsideDownCarCheck::HasCarBeenUpsideDownForAWhile(CUpsideDownCarCheck *this, Int32 CheckCarID)
{
  Bool8 result; // r0
  int v4; // r3

  result = 0;
  v4 = 0;
  if ( this->Cars[0].CarID != CheckCarID )
  {
    if ( this->Cars[1].CarID == CheckCarID )
    {
      v4 = 1;
    }
    else if ( this->Cars[2].CarID == CheckCarID )
    {
      v4 = 2;
    }
    else if ( this->Cars[3].CarID == CheckCarID )
    {
      v4 = 3;
    }
    else if ( this->Cars[4].CarID == CheckCarID )
    {
      v4 = 4;
    }
    else
    {
      if ( this->Cars[5].CarID != CheckCarID )
        return 0;
      v4 = 5;
    }
  }
  if ( this->Cars[v4].UpsideDownTimer > 0x7D0 )
    return 1;
  return result;
}

//----- (003286B0) --------------------------------------------------------
void __fastcall CStuckCarCheck::ResetArrayElement(CStuckCarCheck *this, UInt16 Index)
{
  unsigned int v2; // r1
  _DWORD *v3; // r0

  v2 = 9 * Index;
  this->Cars[v2 / 9].CarID = -1;
  v3 = (_DWORD *)((char *)this + 4 * v2);
  v3[1] = -979615744;
  v3[2] = -979615744;
  v3[3] = -979615744;
  *(_DWORD *)((char *)v3 + 30) = 0;
  *(_DWORD *)((char *)v3 + 26) = 0;
  v3[6] = 0;
  v3[4] = -1;
  v3[5] = 0;
}

//----- (003286E0) --------------------------------------------------------
bool __fastcall CStuckCarCheck::AttemptToWarpVehicle(
        CStuckCarCheck *this,
        CVehicle *pVehicle,
        CVector *NewCoords,
        float NewHeading)
{
  bool v7; // r4
  float y; // s6
  float z; // s8
  RwReal v10; // s12
  RwReal v11; // s4
  CMatrix *m_pMat; // r0
  CVector CoorsMax; // [sp+14h] [bp-3Ch] BYREF
  CVector CoorsMin; // [sp+20h] [bp-30h] BYREF
  Int16 pNum[17]; // [sp+2Eh] [bp-22h] BYREF

  v7 = 0;
  if ( !CCamera::IsSphereVisible(&TheCamera, NewCoords, 4.0) )
  {
    y = NewCoords->y;
    z = NewCoords->z;
    v10 = NewCoords->x + -4.0;
    v11 = NewCoords->x + 4.0;
    CoorsMin.y = y + -4.0;
    CoorsMin.x = v10;
    CoorsMax.y = y + 4.0;
    CoorsMax.x = v11;
    CoorsMin.z = z + -4.0;
    CoorsMax.z = z + 4.0;
    CWorld::FindMissionEntitiesIntersectingCube(&CoorsMin, &CoorsMax, pNum, 2, 0, 1, 1, 1);
    if ( !pNum[0] )
    {
      CCarCtrl::SetCoordsOfScriptCar(pVehicle, NewCoords->x, NewCoords->y, NewCoords->z, 1, 1);
      m_pMat = pVehicle->m_pMat;
      if ( m_pMat )
        CMatrix::SetRotateZOnly(m_pMat, (float)(NewHeading * 3.1416) / 180.0);
      else
        pVehicle->m_transform.m_heading = (float)(NewHeading * 3.1416) / 180.0;
      return 1;
    }
  }
  return v7;
}
// 3286E0: using guessed type Int16 pNum[17];

//----- (003287C0) --------------------------------------------------------
void __fastcall CStuckCarCheck::Process(CStuckCarCheck *this)
{
  int v2; // r6
  CMatrix *m_pMat; // r0
  CSimpleTransform *p_tx; // r1
  __int64 v5; // d16
  int bStuck; // r10
  int32 m_baseVehicleType; // r0
  int v8; // r0
  bool v9; // r0
  float zz; // s0
  Int8 *p_NumberOfNodesToCheck; // r9
  int NumberOfNodesToCheck; // t1
  bool v13; // zf
  int v14; // r0
  int v15; // r11
  int v16; // r3
  CPathFind *v17; // r1
  CNodeAddress *NthNodeClosestToCoors; // r10
  _BOOL4 v19; // r0
  Int32 CarID; // r0
  stuck_car_data *v21; // r9
  CVehicle *v22; // r8
  CMatrix *v23; // r1
  CSimpleTransform *p_m_transform; // r2
  char v25; // r1
  float32x2_t v26; // d16
  unsigned __int64 v27; // d1
  __int64 v28; // d16
  CPathFind *pNMinus1th; // [sp+20h] [bp-70h]
  CMatrix **p_m_pMat; // [sp+30h] [bp-60h]
  CStuckCarCheck *v31; // [sp+34h] [bp-5Ch]
  unsigned int v32; // [sp+38h] [bp-58h]
  bool pSuccess; // [sp+47h] [bp-49h] BYREF
  CVector v34; // [sp+48h] [bp-48h] BYREF
  float NewHeading; // [sp+54h] [bp-3Ch] BYREF
  CVector NewCoords; // [sp+58h] [bp-38h] BYREF
  CVector v37; // 0:r2.8,8:^0.4

  v2 = 0;
  v32 = CTimer::m_snTimeInMilliseconds;
  pNMinus1th = &ThePaths;
  do
  {
    CarID = this->Cars[v2].CarID;
    if ( CarID < 0 )
      goto LABEL_52;
    v21 = &this->Cars[v2];
    if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)CarID >> 8] != (unsigned __int8)CarID
      || (v22 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)CarID >> 8]) == 0 )
    {
      v21->CarID = -1;
      v21->LastPos.x = -5000.0;
      v21->LastPos.y = -5000.0;
      *(_DWORD *)&v21->bWarpIfStuckFlag = 0;
      *(Int32 *)((char *)&v21->CheckTime + 2) = 0;
      v21->StuckRadius = 0.0;
      v21->CheckTime = 0;
      v21->LastPos.z = -5000.0;
      v21->LastChecked = -1;
      goto LABEL_52;
    }
    if ( !v22->pDriver )
    {
      m_pMat = v22->m_pMat;
      p_tx = (CSimpleTransform *)&m_pMat->tx;
      if ( !m_pMat )
        p_tx = &v22->m_transform;
      v5 = *(_QWORD *)&p_tx->m_translate.x;
      v21->LastPos.z = p_tx->m_translate.z;
      v21->LastChecked = v32;
      *(_QWORD *)&v21->LastPos.x = v5;
      goto LABEL_52;
    }
    if ( v32 > v21->LastChecked + v21->CheckTime )
    {
      v23 = v22->m_pMat;
      p_m_transform = (CSimpleTransform *)&v23->tx;
      if ( !v23 )
        p_m_transform = &v22->m_transform;
      v25 = 0;
      v26.n64_u64[0] = vsub_f32(*(float32x2_t *)&p_m_transform->m_translate.y, *(float32x2_t *)&v21->LastPos.y).n64_u64[0];
      v27 = vmul_f32(v26, v26).n64_u64[0];
      if ( sqrtf(
             (float)((float)((float)(p_m_transform->m_translate.x - v21->LastPos.x)
                           * (float)(p_m_transform->m_translate.x - v21->LastPos.x))
                   + *(float *)&v27)
           + *((float *)&v27 + 1)) < v21->StuckRadius )
        v25 = 1;
      v21->bStuck = v25;
      v28 = *(_QWORD *)&p_m_transform->m_translate.x;
      v21->LastPos.z = p_m_transform->m_translate.z;
      *(_QWORD *)&v21->LastPos.x = v28;
      v21->LastChecked = v32;
    }
    if ( !v21->bWarpCar )
      goto LABEL_52;
    if ( v21->bWarpIfStuckFlag )
    {
      bStuck = v21->bStuck;
      if ( v21->bStuck )
        bStuck = 1;
    }
    else
    {
      bStuck = 0;
    }
    if ( v21->bWarpIfUpsideDownFlag )
    {
      m_baseVehicleType = v22->m_baseVehicleType;
      if ( m_baseVehicleType == 9 )
      {
        v8 = 2072;
      }
      else
      {
        if ( m_baseVehicleType )
        {
          v9 = 1;
LABEL_13:
          zz = v22->m_pMat->zz;
          if ( (zz < 0.0 || v9 && zz < 0.3)
            && (*((int (__fastcall **)(CVehicle *, _DWORD))v22->_vptr$CPlaceable + 58))(v22, 0) )
          {
            bStuck = 1;
          }
          goto LABEL_17;
        }
        v8 = 2420;
      }
      v9 = *((unsigned __int8 *)&v22->_vptr$CPlaceable + v8) < 4u;
      goto LABEL_13;
    }
LABEL_17:
    if ( v21->bWarpIfInWaterFlag )
    {
      if ( !bStuck && (*(_DWORD *)&v22->m_nPhysicalFlags & 0x100) == 0 )
        goto LABEL_52;
    }
    else if ( !bStuck )
    {
      goto LABEL_52;
    }
    CEntity::GetBoundCentre(&v34, v22);
    if ( !CCamera::IsSphereVisible(
            &TheCamera,
            &v34,
            CModelInfo::ms_modelInfoPtrs[v22->m_nModelIndex]->m_pColModel->m_sphereBound.m_fRadius) )
    {
      NumberOfNodesToCheck = v21->NumberOfNodesToCheck;
      p_NumberOfNodesToCheck = &v21->NumberOfNodesToCheck;
      v13 = NumberOfNodesToCheck == 0;
      if ( NumberOfNodesToCheck < 0 )
      {
        CPathFind::FindNodeCoorsForScript(
          &v34,
          pNMinus1th,
          v22->AutoPilot.OldNode,
          v22->AutoPilot.NewNode,
          &NewHeading,
          &pSuccess);
        NewCoords = v34;
        if ( pSuccess )
          CStuckCarCheck::AttemptToWarpVehicle((CStuckCarCheck *)pSuccess, v22, &NewCoords, NewHeading);
      }
      else if ( !v13 )
      {
        p_m_pMat = &v22->m_pMat;
        v14 = 0;
        v15 = 0;
        v31 = this;
        do
        {
          v16 = (int)&(*p_m_pMat)->tx;
          if ( !*p_m_pMat )
            v16 = (int)&v22->m_transform;
          v17 = *(CPathFind **)v16;
          *(_QWORD *)&v37.x = *(_QWORD *)(v16 + 4);
          v37.z = 0.0;
          NthNodeClosestToCoors = CPathFind::FindNthNodeClosestToCoors(
                                    (CNodeAddress *)&ThePaths,
                                    v17,
                                    v37,
                                    1000000.0,
                                    0.0,
                                    1,
                                    v14,
                                    0,
                                    0,
                                    0,
                                    (CNodeAddress *)pNMinus1th);
          CPathFind::FindNodeCoorsForScript(&v34, &ThePaths, (CNodeAddress)NthNodeClosestToCoors, &pSuccess);
          NewCoords = v34;
          if ( pSuccess )
          {
            NewHeading = CPathFind::FindNodeOrientationForCarPlacement(&ThePaths, (CNodeAddress)NthNodeClosestToCoors);
            v19 = CStuckCarCheck::AttemptToWarpVehicle(
                    (CStuckCarCheck *)LODWORD(NewHeading),
                    v22,
                    &NewCoords,
                    NewHeading);
            v15 += !v19;
          }
          else
          {
            ++v15;
            v19 = 0;
          }
          this = v31;
          if ( v19 )
            break;
          v14 = (unsigned __int8)v15;
        }
        while ( (unsigned __int8)v15 < *p_NumberOfNodesToCheck );
      }
    }
LABEL_52:
    ++v2;
  }
  while ( v2 != 16 );
}
// 32893C: variable 'pNMinus1th' is possibly undefined

//----- (00328B04) --------------------------------------------------------
void __fastcall CStuckCarCheck::AddCarToCheck(
        CStuckCarCheck *this,
        Int32 NewCarID,
        float StuckRad,
        UInt32 CheckEvery,
        char a5,
        char a6,
        char a7,
        char a8,
        char a9)
{
  unsigned int v9; // lr
  CStuckCarCheck *v10; // r5
  int v11; // r8
  uint8 *v13; // r2
  int v14; // r1
  uint8 *v15; // r5
  __int64 v16; // d16
  stuck_car_data *v17; // r0
  uint32 v18; // r1

  if ( NewCarID >= 0 )
  {
    v9 = (unsigned int)NewCarID >> 8;
    if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)NewCarID >> 8] == (unsigned __int8)NewCarID )
    {
      if ( CPools::ms_pVehiclePool->m_aStorage[v9] )
      {
        if ( this->Cars[0].CarID < 0 )
        {
          v11 = 0;
          v10 = this;
        }
        else
        {
          v10 = (CStuckCarCheck *)&this->Cars[1];
          if ( this->Cars[1].CarID <= -1 )
          {
            v11 = 1;
          }
          else
          {
            v10 = (CStuckCarCheck *)&this->Cars[2];
            if ( this->Cars[2].CarID < 0 )
            {
              v11 = 2;
            }
            else
            {
              v10 = (CStuckCarCheck *)&this->Cars[3];
              if ( this->Cars[3].CarID < 0 )
              {
                v11 = 3;
              }
              else
              {
                v10 = (CStuckCarCheck *)&this->Cars[4];
                if ( this->Cars[4].CarID < 0 )
                {
                  v11 = 4;
                }
                else
                {
                  v10 = (CStuckCarCheck *)&this->Cars[5];
                  if ( this->Cars[5].CarID < 0 )
                  {
                    v11 = 5;
                  }
                  else
                  {
                    v10 = (CStuckCarCheck *)&this->Cars[6];
                    if ( this->Cars[6].CarID < 0 )
                    {
                      v11 = 6;
                    }
                    else
                    {
                      v10 = (CStuckCarCheck *)&this->Cars[7];
                      if ( this->Cars[7].CarID < 0 )
                      {
                        v11 = 7;
                      }
                      else if ( this->Cars[8].CarID < 0 )
                      {
                        v10 = (CStuckCarCheck *)&this->Cars[8];
                        v11 = 8;
                      }
                      else if ( this->Cars[9].CarID < 0 )
                      {
                        v10 = (CStuckCarCheck *)&this->Cars[9];
                        v11 = 9;
                      }
                      else if ( this->Cars[10].CarID < 0 )
                      {
                        v10 = (CStuckCarCheck *)&this->Cars[10];
                        v11 = 10;
                      }
                      else if ( this->Cars[11].CarID < 0 )
                      {
                        v10 = (CStuckCarCheck *)&this->Cars[11];
                        v11 = 11;
                      }
                      else if ( this->Cars[12].CarID < 0 )
                      {
                        v10 = (CStuckCarCheck *)&this->Cars[12];
                        v11 = 12;
                      }
                      else if ( this->Cars[13].CarID < 0 )
                      {
                        v10 = (CStuckCarCheck *)&this->Cars[13];
                        v11 = 13;
                      }
                      else if ( this->Cars[14].CarID < 0 )
                      {
                        v10 = (CStuckCarCheck *)&this->Cars[14];
                        v11 = 14;
                      }
                      else
                      {
                        if ( this->Cars[15].CarID > -1 )
                          return;
                        v10 = (CStuckCarCheck *)&this->Cars[15];
                        v11 = 15;
                      }
                    }
                  }
                }
              }
            }
          }
        }
        v13 = CPools::ms_pVehiclePool->m_aStorage[v9];
        v10->Cars[0].CarID = NewCarID;
        v14 = *((_DWORD *)v13 + 5);
        v15 = (uint8 *)(v14 + 48);
        if ( !v14 )
          v15 = v13 + 4;
        v16 = *(_QWORD *)v15;
        v17 = &this->Cars[v11];
        v17->LastPos.z = *((RwReal *)v15 + 2);
        *(_QWORD *)&v17->LastPos.x = v16;
        v18 = CTimer::m_snTimeInMilliseconds;
        v17->StuckRadius = StuckRad;
        v17->LastChecked = v18;
        v17->CheckTime = CheckEvery;
        v17->bStuck = 0;
        v17->bWarpCar = a5;
        v17->bWarpIfStuckFlag = a6;
        v17->bWarpIfUpsideDownFlag = a7;
        v17->bWarpIfInWaterFlag = a8;
        v17->NumberOfNodesToCheck = a9;
      }
    }
  }
}

//----- (00328CC0) --------------------------------------------------------
void __fastcall CStuckCarCheck::RemoveCarFromCheck(CStuckCarCheck *this, Int32 RemoveCarID)
{
  int i; // r3
  _DWORD *v3; // r4

  for ( i = 0; i != 16; ++i )
  {
    if ( this->Cars[i].CarID == RemoveCarID )
    {
      v3 = (_DWORD *)((char *)this + i * 36);
      this->Cars[i].CarID = -1;
      v3[1] = -979615744;
      v3[2] = -979615744;
      v3[3] = -979615744;
      v3[4] = -1;
      *(_DWORD *)((char *)v3 + 30) = 0;
      *(_DWORD *)((char *)v3 + 26) = 0;
      v3[5] = 0;
      v3[6] = 0;
    }
  }
}

//----- (00328D02) --------------------------------------------------------
Bool8 __fastcall CStuckCarCheck::HasCarBeenStuckForAWhile(CStuckCarCheck *this, Int32 CheckCarID)
{
  int v2; // r1

  if ( this->Cars[0].CarID == CheckCarID )
  {
    v2 = 0;
  }
  else if ( this->Cars[1].CarID == CheckCarID )
  {
    v2 = 1;
  }
  else if ( this->Cars[2].CarID == CheckCarID )
  {
    v2 = 2;
  }
  else if ( this->Cars[3].CarID == CheckCarID )
  {
    v2 = 3;
  }
  else if ( this->Cars[4].CarID == CheckCarID )
  {
    v2 = 4;
  }
  else if ( this->Cars[5].CarID == CheckCarID )
  {
    v2 = 5;
  }
  else if ( this->Cars[6].CarID == CheckCarID )
  {
    v2 = 6;
  }
  else if ( this->Cars[7].CarID == CheckCarID )
  {
    v2 = 7;
  }
  else if ( this->Cars[8].CarID == CheckCarID )
  {
    v2 = 8;
  }
  else if ( this->Cars[9].CarID == CheckCarID )
  {
    v2 = 9;
  }
  else if ( this->Cars[10].CarID == CheckCarID )
  {
    v2 = 10;
  }
  else if ( this->Cars[11].CarID == CheckCarID )
  {
    v2 = 11;
  }
  else if ( this->Cars[12].CarID == CheckCarID )
  {
    v2 = 12;
  }
  else if ( this->Cars[13].CarID == CheckCarID )
  {
    v2 = 13;
  }
  else if ( this->Cars[14].CarID == CheckCarID )
  {
    v2 = 14;
  }
  else
  {
    if ( this->Cars[15].CarID != CheckCarID )
      return 0;
    v2 = 15;
  }
  return this->Cars[v2].bStuck != 0;
}

//----- (00328DCE) --------------------------------------------------------
void __fastcall CStuckCarCheck::ClearStuckFlagForCar(CStuckCarCheck *this, Int32 CheckCarID)
{
  if ( this->Cars[0].CarID == CheckCarID )
    this->Cars[0].bStuck = 0;
  if ( this->Cars[1].CarID == CheckCarID )
    this->Cars[1].bStuck = 0;
  if ( this->Cars[2].CarID == CheckCarID )
    this->Cars[2].bStuck = 0;
  if ( this->Cars[3].CarID == CheckCarID )
    this->Cars[3].bStuck = 0;
  if ( this->Cars[4].CarID == CheckCarID )
    this->Cars[4].bStuck = 0;
  if ( this->Cars[5].CarID == CheckCarID )
    this->Cars[5].bStuck = 0;
  if ( this->Cars[6].CarID == CheckCarID )
    this->Cars[6].bStuck = 0;
  if ( this->Cars[7].CarID == CheckCarID )
    this->Cars[7].bStuck = 0;
  if ( this->Cars[8].CarID == CheckCarID )
    this->Cars[8].bStuck = 0;
  if ( this->Cars[9].CarID == CheckCarID )
    this->Cars[9].bStuck = 0;
  if ( this->Cars[10].CarID == CheckCarID )
    this->Cars[10].bStuck = 0;
  if ( this->Cars[11].CarID == CheckCarID )
    this->Cars[11].bStuck = 0;
  if ( this->Cars[12].CarID == CheckCarID )
    this->Cars[12].bStuck = 0;
  if ( this->Cars[13].CarID == CheckCarID )
    this->Cars[13].bStuck = 0;
  if ( this->Cars[14].CarID == CheckCarID )
    this->Cars[14].bStuck = 0;
  if ( this->Cars[15].CarID == CheckCarID )
    this->Cars[15].bStuck = 0;
}

//----- (00328EA6) --------------------------------------------------------
Bool8 __fastcall CStuckCarCheck::IsCarInStuckCarArray(CStuckCarCheck *this, Int32 CheckCarID)
{
  Int32 CarID; // r2
  bool v3; // zf
  Int32 v4; // r2
  bool v5; // zf
  Int32 v6; // r2
  bool v7; // zf
  Int32 v8; // r2
  bool v9; // zf
  Int32 v10; // r2
  bool v11; // zf
  Int32 v12; // r2
  bool v13; // zf
  Int32 v14; // r2
  bool v15; // zf

  if ( this->Cars[0].CarID == CheckCarID )
    return 1;
  CarID = this->Cars[1].CarID;
  v3 = CarID == CheckCarID;
  if ( CarID != CheckCarID )
    v3 = this->Cars[2].CarID == CheckCarID;
  if ( v3 )
    return 1;
  v4 = this->Cars[3].CarID;
  v5 = v4 == CheckCarID;
  if ( v4 != CheckCarID )
    v5 = this->Cars[4].CarID == CheckCarID;
  if ( v5 )
    return 1;
  v6 = this->Cars[5].CarID;
  v7 = v6 == CheckCarID;
  if ( v6 != CheckCarID )
    v7 = this->Cars[6].CarID == CheckCarID;
  if ( v7 )
    return 1;
  v8 = this->Cars[7].CarID;
  v9 = v8 == CheckCarID;
  if ( v8 != CheckCarID )
    v9 = this->Cars[8].CarID == CheckCarID;
  if ( v9 )
    return 1;
  v10 = this->Cars[9].CarID;
  v11 = v10 == CheckCarID;
  if ( v10 != CheckCarID )
    v11 = this->Cars[10].CarID == CheckCarID;
  if ( v11 )
    return 1;
  v12 = this->Cars[11].CarID;
  v13 = v12 == CheckCarID;
  if ( v12 != CheckCarID )
    v13 = this->Cars[12].CarID == CheckCarID;
  if ( v13 )
    return 1;
  v14 = this->Cars[13].CarID;
  v15 = v14 == CheckCarID;
  if ( v14 != CheckCarID )
    v15 = this->Cars[14].CarID == CheckCarID;
  return v15 || this->Cars[15].CarID == CheckCarID;
}

//----- (00328F28) --------------------------------------------------------
Int32 *__fastcall CRunningScript::GetPointerToLocalVariable(CRunningScript *this, UInt32 VarIndex)
{
  int ThisMustBeTheOnlyMissionRunning; // r3
  char *v3; // r0
  Int32 *v4; // r2

  ThisMustBeTheOnlyMissionRunning = this->ThisMustBeTheOnlyMissionRunning;
  v3 = (char *)this + 4 * VarIndex;
  v4 = &CTheScripts::LocalVariablesForCurrentMission[VarIndex];
  if ( !ThisMustBeTheOnlyMissionRunning )
    return (Int32 *)(v3 + 60);
  return v4;
}

//----- (00328F4C) --------------------------------------------------------
Int32 *__fastcall CRunningScript::GetPointerToLocalArrayElement(
        CRunningScript *this,
        UInt32 BaseAddress,
        UInt16 ElementNumber,
        UInt8 SizeOfEachElement)
{
  UInt32 v4; // r2
  int ThisMustBeTheOnlyMissionRunning; // r3
  Int32 *v6; // r1
  char *v7; // r0

  v4 = BaseAddress + SizeOfEachElement * ElementNumber;
  ThisMustBeTheOnlyMissionRunning = this->ThisMustBeTheOnlyMissionRunning;
  v6 = &CTheScripts::LocalVariablesForCurrentMission[v4];
  v7 = (char *)this + 4 * v4;
  if ( !ThisMustBeTheOnlyMissionRunning )
    return (Int32 *)(v7 + 60);
  return v6;
}

//----- (00328F78) --------------------------------------------------------
void __fastcall CRunningScript::ReadArrayInformation(
        CRunningScript *this,
        Int32 bUpdatePC,
        UInt16 *pReturnArrayBaseAddress,
        Int32 *pReturnArrayIndex)
{
  UInt8 *PCPointer; // r12
  int v5; // lr
  Int32 *v6; // r2
  char *v7; // lr

  PCPointer = this->PCPointer;
  *pReturnArrayBaseAddress = *(_WORD *)PCPointer;
  v5 = *((unsigned __int16 *)PCPointer + 1);
  if ( *((__int16 *)PCPointer + 2) <= -1 )
  {
    v6 = (Int32 *)&CTheScripts::ScriptSpace[v5];
  }
  else
  {
    v6 = &CTheScripts::LocalVariablesForCurrentMission[v5];
    v7 = (char *)this + 4 * v5;
    if ( !this->ThisMustBeTheOnlyMissionRunning )
      v6 = (Int32 *)(v7 + 60);
  }
  *pReturnArrayIndex = *v6;
  if ( bUpdatePC )
    this->PCPointer = PCPointer + 6;
}

//----- (00328FD4) --------------------------------------------------------
void __fastcall CRunningScript::ReadTextLabelFromScript(
        CRunningScript *this,
        Char *pStringToFill,
        UInt8 MaxStringLength)
{
  UInt8 *PCPointer; // r6
  int v4; // t1
  int v5; // r12
  int v6; // r3
  int v7; // r5
  int v8; // lr
  UInt8 *v9; // r6
  Int32 *v10; // r4
  int v11; // r3
  int v12; // r5
  int v13; // lr
  UInt8 *v14; // r6
  Int32 *v15; // r4
  Char v16; // r2
  UInt8 *v17; // r2
  Char v18; // t1
  UInt8 *v19; // r2
  Char v20; // t1
  UInt8 *v21; // r2
  Char v22; // t1
  UInt8 *v23; // r2
  Char v24; // t1
  UInt8 *v25; // r2
  Char v26; // t1
  UInt8 *v27; // r2
  Char v28; // t1
  UInt8 *v29; // r2
  Char v30; // r3
  int v31; // r3
  char *v32; // r0
  UInt8 *v33; // r1
  int v34; // r3
  int ThisMustBeTheOnlyMissionRunning; // r5
  char *v36; // r0
  Int32 *v37; // r2
  int v38; // lr
  Char v39; // r3
  int v40; // r3
  int v41; // r4
  UInt8 *v42; // r5
  Char v43; // r6
  Char v44; // r3
  char v45; // r3
  Char *v46; // r1
  int v47; // r2
  UInt8 *v48; // r6
  UInt8 v49; // r5
  char v50; // r1
  int v51; // r5
  int v52; // r5
  int v53; // r4
  char *v54; // r0
  Int32 *v55; // r3
  Int32 v56; // r4
  int v57; // r4
  int v58; // r3
  int v59; // r6
  char *v60; // r0
  int v61; // r6
  int v62; // r5
  char *v63; // r0
  Int32 *v64; // r3
  Char v65; // r2
  UInt8 *v66; // r2
  Char v67; // t1
  UInt8 *v68; // r2
  Char v69; // t1
  UInt8 *v70; // r2
  Char v71; // t1
  UInt8 *v72; // r2
  Char v73; // t1
  UInt8 *v74; // r2
  Char v75; // t1
  UInt8 *v76; // r2
  Char v77; // t1
  UInt8 *v78; // r2
  Char v79; // t1
  UInt8 *v80; // r2
  Char v81; // t1
  UInt8 *v82; // r2
  Char v83; // t1
  UInt8 *v84; // r2
  Char v85; // t1
  UInt8 *v86; // r2
  Char v87; // t1
  UInt8 *v88; // r2
  Char v89; // t1
  UInt8 *v90; // r2
  Char v91; // t1
  UInt8 *v92; // r2
  Char v93; // t1
  UInt8 *v94; // r2
  Char v95; // r3

  PCPointer = this->PCPointer;
  v4 = (char)*PCPointer;
  this->PCPointer = PCPointer + 1;
  v5 = (unsigned __int8)v4;
  switch ( v4 )
  {
    case 9:
      v16 = PCPointer[1];
      this->PCPointer = PCPointer + 2;
      *pStringToFill = v16;
      v17 = this->PCPointer;
      v18 = *v17;
      this->PCPointer = v17 + 1;
      pStringToFill[1] = v18;
      v19 = this->PCPointer;
      v20 = *v19;
      this->PCPointer = v19 + 1;
      pStringToFill[2] = v20;
      v21 = this->PCPointer;
      v22 = *v21;
      this->PCPointer = v21 + 1;
      pStringToFill[3] = v22;
      v23 = this->PCPointer;
      v24 = *v23;
      this->PCPointer = v23 + 1;
      pStringToFill[4] = v24;
      v25 = this->PCPointer;
      v26 = *v25;
      this->PCPointer = v25 + 1;
      pStringToFill[5] = v26;
      v27 = this->PCPointer;
      v28 = *v27;
      this->PCPointer = v27 + 1;
      pStringToFill[6] = v28;
      v29 = this->PCPointer;
      v30 = *v29;
      this->PCPointer = v29 + 1;
      pStringToFill[7] = v30;
      return;
    case 10:
      v31 = *(unsigned __int16 *)(PCPointer + 1);
      this->PCPointer = PCPointer + 3;
      v32 = (char *)pStringToFill;
      v33 = &CTheScripts::ScriptSpace[v31];
      *(_DWORD *)&MaxStringLength = 8;
      goto LABEL_12;
    case 11:
      v34 = *(unsigned __int16 *)(PCPointer + 1);
      ThisMustBeTheOnlyMissionRunning = this->ThisMustBeTheOnlyMissionRunning;
      this->PCPointer = PCPointer + 3;
      v36 = (char *)this + 4 * v34;
      v37 = &CTheScripts::LocalVariablesForCurrentMission[v34];
      if ( !ThisMustBeTheOnlyMissionRunning )
        v37 = (Int32 *)(v36 + 60);
      goto LABEL_15;
    case 12:
    case 18:
      v6 = *(__int16 *)(PCPointer + 5);
      v7 = *(unsigned __int16 *)(PCPointer + 3);
      v8 = *(unsigned __int16 *)(PCPointer + 1);
      v9 = PCPointer + 7;
      if ( v6 <= -1 )
      {
        v10 = (Int32 *)&CTheScripts::ScriptSpace[v7];
      }
      else
      {
        v10 = &CTheScripts::LocalVariablesForCurrentMission[v7];
        if ( !this->ThisMustBeTheOnlyMissionRunning )
          v10 = &this->Locals[v7];
      }
      v56 = *v10;
      this->PCPointer = v9;
      if ( v5 == 12 )
      {
        sub_19F6E8((char *)pStringToFill, (const char *)&CTheScripts::ScriptSpace[8 * v56 + v8], 8u);
        return;
      }
      v32 = (char *)pStringToFill;
      v33 = &CTheScripts::ScriptSpace[16 * v56 + v8];
      if ( MaxStringLength > 0xFu )
        *(_DWORD *)&MaxStringLength = 16;
      goto LABEL_12;
    case 13:
    case 19:
      v11 = *(__int16 *)(PCPointer + 5);
      v12 = *(unsigned __int16 *)(PCPointer + 3);
      v13 = *(unsigned __int16 *)(PCPointer + 1);
      v14 = PCPointer + 7;
      if ( v11 <= -1 )
      {
        v15 = (Int32 *)&CTheScripts::ScriptSpace[v12];
      }
      else
      {
        v15 = &CTheScripts::LocalVariablesForCurrentMission[v12];
        if ( !this->ThisMustBeTheOnlyMissionRunning )
          v15 = &this->Locals[v12];
      }
      v57 = *(unsigned __int16 *)v15;
      this->PCPointer = v14;
      if ( v5 == 13 )
      {
        v58 = v13 + 2 * v57;
        v59 = this->ThisMustBeTheOnlyMissionRunning;
        v60 = (char *)this + 4 * v58;
        v37 = &CTheScripts::LocalVariablesForCurrentMission[v58];
        if ( !v59 )
          v37 = (Int32 *)(v60 + 60);
LABEL_15:
        sub_19F6E8((char *)pStringToFill, (const char *)v37, 8u);
      }
      else
      {
        v61 = v13 + 4 * v57;
        v62 = this->ThisMustBeTheOnlyMissionRunning;
        v63 = (char *)this + 4 * v61;
        v64 = &CTheScripts::LocalVariablesForCurrentMission[v61];
        if ( !v62 )
          v64 = (Int32 *)(v63 + 60);
        v32 = (char *)pStringToFill;
        v33 = (UInt8 *)v64;
        if ( MaxStringLength > 0xFu )
          *(_DWORD *)&MaxStringLength = 16;
LABEL_12:
        sub_19F6E8(v32, (const char *)v33, MaxStringLength);
      }
      return;
    case 14:
      v38 = (char)PCPointer[1];
      this->PCPointer = PCPointer + 2;
      if ( v38 >= 1 )
      {
        v39 = PCPointer[2];
        this->PCPointer = PCPointer + 3;
        *pStringToFill = v39;
        if ( (unsigned __int8)v38 != 1 )
        {
          v40 = 1;
          v41 = 1;
          do
          {
            v42 = this->PCPointer;
            ++v41;
            v43 = *v42;
            this->PCPointer = v42 + 1;
            pStringToFill[v40] = v43;
            v40 = (unsigned __int8)v41;
          }
          while ( (unsigned __int8)v41 < v38 );
        }
      }
      if ( (unsigned int)(unsigned __int8)v38 < MaxStringLength )
        memset(&pStringToFill[(unsigned __int8)v38], 0, (unsigned __int8)(MaxStringLength - 1 - v38) + 1);
      return;
    case 15:
      if ( MaxStringLength >= 0x10u )
      {
        v65 = PCPointer[1];
        this->PCPointer = PCPointer + 2;
        *pStringToFill = v65;
        v66 = this->PCPointer;
        v67 = *v66;
        this->PCPointer = v66 + 1;
        pStringToFill[1] = v67;
        v68 = this->PCPointer;
        v69 = *v68;
        this->PCPointer = v68 + 1;
        pStringToFill[2] = v69;
        v70 = this->PCPointer;
        v71 = *v70;
        this->PCPointer = v70 + 1;
        pStringToFill[3] = v71;
        v72 = this->PCPointer;
        v73 = *v72;
        this->PCPointer = v72 + 1;
        pStringToFill[4] = v73;
        v74 = this->PCPointer;
        v75 = *v74;
        this->PCPointer = v74 + 1;
        pStringToFill[5] = v75;
        v76 = this->PCPointer;
        v77 = *v76;
        this->PCPointer = v76 + 1;
        pStringToFill[6] = v77;
        v78 = this->PCPointer;
        v79 = *v78;
        this->PCPointer = v78 + 1;
        pStringToFill[7] = v79;
        v80 = this->PCPointer;
        v81 = *v80;
        this->PCPointer = v80 + 1;
        pStringToFill[8] = v81;
        v82 = this->PCPointer;
        v83 = *v82;
        this->PCPointer = v82 + 1;
        pStringToFill[9] = v83;
        v84 = this->PCPointer;
        v85 = *v84;
        this->PCPointer = v84 + 1;
        pStringToFill[10] = v85;
        v86 = this->PCPointer;
        v87 = *v86;
        this->PCPointer = v86 + 1;
        pStringToFill[11] = v87;
        v88 = this->PCPointer;
        v89 = *v88;
        this->PCPointer = v88 + 1;
        pStringToFill[12] = v89;
        v90 = this->PCPointer;
        v91 = *v90;
        this->PCPointer = v90 + 1;
        pStringToFill[13] = v91;
        v92 = this->PCPointer;
        v93 = *v92;
        this->PCPointer = v92 + 1;
        pStringToFill[14] = v93;
        v94 = this->PCPointer;
        v95 = *v94;
        this->PCPointer = v94 + 1;
        pStringToFill[15] = v95;
        return;
      }
      if ( !MaxStringLength )
      {
        v50 = 0;
LABEL_55:
        this->PCPointer += (unsigned __int8)(15 - v50) + 1;
        return;
      }
      v44 = PCPointer[1];
      this->PCPointer = PCPointer + 2;
      *pStringToFill = v44;
      v45 = MaxStringLength - 1;
      if ( MaxStringLength != 1 )
      {
        v46 = pStringToFill + 1;
        v47 = MaxStringLength - 1;
        do
        {
          v48 = this->PCPointer;
          --v47;
          v49 = *v48;
          this->PCPointer = v48 + 1;
          *v46++ = v49;
        }
        while ( v47 );
      }
      v50 = v45 + 1;
      if ( (unsigned __int8)(v45 + 1) <= 0xFu )
        goto LABEL_55;
      return;
    case 16:
      v51 = *(unsigned __int16 *)(PCPointer + 1);
      this->PCPointer = PCPointer + 3;
      v32 = (char *)pStringToFill;
      v33 = &CTheScripts::ScriptSpace[v51];
      if ( MaxStringLength > 0xFu )
        *(_DWORD *)&MaxStringLength = 16;
      goto LABEL_12;
    case 17:
      v52 = *(unsigned __int16 *)(PCPointer + 1);
      v53 = this->ThisMustBeTheOnlyMissionRunning;
      this->PCPointer = PCPointer + 3;
      v54 = (char *)this + 4 * v52;
      v55 = &CTheScripts::LocalVariablesForCurrentMission[v52];
      if ( !v53 )
        v55 = (Int32 *)(v54 + 60);
      v32 = (char *)pStringToFill;
      v33 = (UInt8 *)v55;
      if ( MaxStringLength > 0xFu )
        *(_DWORD *)&MaxStringLength = 16;
      goto LABEL_12;
    default:
      return;
  }
}

//----- (003293F0) --------------------------------------------------------
bool __fastcall CRunningScript::CanAllowMissionReplay(CRunningScript *this)
{
  int v1; // r1
  bool result; // r0

  v1 = strcmp((const char *)this->ScriptName, "desert5");
  result = 0;
  if ( v1 )
  {
    if ( !AllowMissionReplay )
      result = 1;
    return result && missionReplaySetting != 0;
  }
  return result;
}

//----- (00329434) --------------------------------------------------------
void __fastcall CRunningScript::CollectParameters(CRunningScript *this, Int16 Number)
{
  Int32 *v2; // r2
  UInt8 *PCPointer; // r4
  int v4; // r5
  Int32 v5; // r8
  int v6; // r3
  int v7; // r3
  int ThisMustBeTheOnlyMissionRunning; // r5
  Int32 *v9; // r4
  int v10; // r5
  int v11; // r6
  int v12; // r3
  UInt8 *v13; // r4
  UInt8 *v14; // r5
  char *v15; // r6
  int v16; // r5
  int v17; // r3
  int v18; // r8
  UInt8 *v19; // r4
  UInt8 *v20; // r6
  char *v21; // r3
  int v22; // r5
  int v23; // r3
  char *v24; // r3

  if ( Number )
  {
    v2 = ScriptParams;
    do
    {
      PCPointer = this->PCPointer;
      *(_DWORD *)&Number = Number - 1;
      v4 = (char)*PCPointer;
      this->PCPointer = PCPointer + 1;
      switch ( v4 )
      {
        case 1:
        case 6:
          v5 = *(_DWORD *)(PCPointer + 1);
          this->PCPointer = PCPointer + 5;
          goto LABEL_24;
        case 2:
          v6 = *(unsigned __int16 *)(PCPointer + 1);
          this->PCPointer = PCPointer + 3;
          v5 = *(_DWORD *)&CTheScripts::ScriptSpace[v6];
          goto LABEL_24;
        case 3:
          v7 = *(unsigned __int16 *)(PCPointer + 1);
          ThisMustBeTheOnlyMissionRunning = this->ThisMustBeTheOnlyMissionRunning;
          this->PCPointer = PCPointer + 3;
          v9 = &CTheScripts::LocalVariablesForCurrentMission[v7];
          goto LABEL_21;
        case 4:
          v5 = (char)PCPointer[1];
          this->PCPointer = PCPointer + 2;
          goto LABEL_24;
        case 5:
          v5 = *(__int16 *)(PCPointer + 1);
          this->PCPointer = PCPointer + 3;
          goto LABEL_24;
        case 7:
          v10 = *(__int16 *)(PCPointer + 5);
          v11 = *(unsigned __int16 *)(PCPointer + 3);
          v12 = *(unsigned __int16 *)(PCPointer + 1);
          v13 = PCPointer + 7;
          if ( v10 <= -1 )
          {
            v14 = &CTheScripts::ScriptSpace[v11];
          }
          else
          {
            v14 = (UInt8 *)&CTheScripts::LocalVariablesForCurrentMission[v11];
            v15 = (char *)this + 4 * v11;
            if ( !this->ThisMustBeTheOnlyMissionRunning )
              v14 = (UInt8 *)(v15 + 60);
          }
          v22 = *(_DWORD *)v14;
          this->PCPointer = v13;
          v5 = *(_DWORD *)&CTheScripts::ScriptSpace[4 * v22 + v12];
          goto LABEL_24;
        case 8:
          v16 = *(__int16 *)(PCPointer + 5);
          v17 = *(unsigned __int16 *)(PCPointer + 3);
          v18 = *(unsigned __int16 *)(PCPointer + 1);
          v19 = PCPointer + 7;
          if ( v16 <= -1 )
          {
            ThisMustBeTheOnlyMissionRunning = this->ThisMustBeTheOnlyMissionRunning;
            v20 = &CTheScripts::ScriptSpace[v17];
          }
          else
          {
            ThisMustBeTheOnlyMissionRunning = this->ThisMustBeTheOnlyMissionRunning;
            v20 = (UInt8 *)&CTheScripts::LocalVariablesForCurrentMission[v17];
            v21 = (char *)this + 4 * v17;
            if ( !this->ThisMustBeTheOnlyMissionRunning )
              v20 = (UInt8 *)(v21 + 60);
          }
          v23 = *(unsigned __int16 *)v20;
          this->PCPointer = v19;
          v7 = v23 + v18;
          v9 = &CTheScripts::LocalVariablesForCurrentMission[v7];
LABEL_21:
          v24 = (char *)this + 4 * v7;
          if ( !ThisMustBeTheOnlyMissionRunning )
            v9 = (Int32 *)(v24 + 60);
          v5 = *v9;
LABEL_24:
          *v2 = v5;
          break;
        default:
          break;
      }
      ++v2;
    }
    while ( Number << 16 );
  }
}

//----- (003295AC) --------------------------------------------------------
Int32 __fastcall CRunningScript::CollectNextParameterWithoutIncreasingPC(CRunningScript *this)
{
  UInt8 *PCPointer; // r4
  int v2; // t1
  Int32 v3; // r1
  int v4; // r2
  int v5; // r2
  int ThisMustBeTheOnlyMissionRunning; // r12
  Int32 *v7; // r1
  char *v8; // r2
  int v9; // lr
  int v10; // r1
  Int32 *v11; // r3
  int v12; // r3
  UInt8 *v13; // r1
  char *v14; // r3
  int v15; // r3
  Int32 *v16; // r2
  char *v17; // r3

  PCPointer = this->PCPointer;
  v2 = (char)*PCPointer;
  this->PCPointer = PCPointer + 1;
  v3 = -1;
  switch ( v2 )
  {
    case 1:
    case 6:
      v3 = *(_DWORD *)(PCPointer + 1);
      this->PCPointer = PCPointer + 5;
      break;
    case 2:
      v4 = *(unsigned __int16 *)(PCPointer + 1);
      this->PCPointer = PCPointer + 3;
      v3 = *(_DWORD *)&CTheScripts::ScriptSpace[v4];
      break;
    case 3:
      v5 = *(unsigned __int16 *)(PCPointer + 1);
      ThisMustBeTheOnlyMissionRunning = this->ThisMustBeTheOnlyMissionRunning;
      this->PCPointer = PCPointer + 3;
      v7 = &CTheScripts::LocalVariablesForCurrentMission[v5];
      v8 = (char *)this + 4 * v5;
      if ( !ThisMustBeTheOnlyMissionRunning )
        v7 = (Int32 *)(v8 + 60);
      v3 = *v7;
      break;
    case 4:
      v3 = (char)PCPointer[1];
      this->PCPointer = PCPointer + 2;
      break;
    case 5:
      v3 = *(__int16 *)(PCPointer + 1);
      this->PCPointer = PCPointer + 3;
      break;
    case 7:
      v12 = *(unsigned __int16 *)(PCPointer + 3);
      if ( *(__int16 *)(PCPointer + 5) <= -1 )
      {
        v13 = &CTheScripts::ScriptSpace[v12];
      }
      else
      {
        v13 = (UInt8 *)&CTheScripts::LocalVariablesForCurrentMission[v12];
        v14 = (char *)this + 4 * v12;
        if ( !this->ThisMustBeTheOnlyMissionRunning )
          v13 = (UInt8 *)(v14 + 60);
      }
      v3 = *(_DWORD *)&CTheScripts::ScriptSpace[4 * *(_DWORD *)v13 + *(unsigned __int16 *)(PCPointer + 1)];
      break;
    case 8:
      v9 = *(unsigned __int16 *)(PCPointer + 3);
      if ( *(__int16 *)(PCPointer + 5) <= -1 )
      {
        v10 = this->ThisMustBeTheOnlyMissionRunning;
        v11 = (Int32 *)&CTheScripts::ScriptSpace[v9];
      }
      else
      {
        v10 = this->ThisMustBeTheOnlyMissionRunning;
        v11 = &CTheScripts::LocalVariablesForCurrentMission[v9];
        if ( !this->ThisMustBeTheOnlyMissionRunning )
          v11 = &this->Locals[v9];
      }
      v15 = *(unsigned __int16 *)v11 + *(unsigned __int16 *)(PCPointer + 1);
      v16 = &CTheScripts::LocalVariablesForCurrentMission[v15];
      v17 = (char *)this + 4 * v15;
      if ( !v10 )
        v16 = (Int32 *)(v17 + 60);
      v3 = *v16;
      break;
    default:
      break;
  }
  this->PCPointer = PCPointer;
  return v3;
}

//----- (003296EC) --------------------------------------------------------
void __fastcall CRunningScript::StoreParameters(CRunningScript *this, Int16 Number)
{
  int v2; // r1
  Int32 *v3; // r2
  UInt8 *PCPointer; // r3
  int v5; // r5
  int v6; // r4
  int v7; // r5
  int ThisMustBeTheOnlyMissionRunning; // r4
  Int32 *v9; // r6
  char *v10; // r5
  int v11; // r5
  int v12; // r6
  int v13; // r4
  UInt8 *v14; // r3
  UInt8 *v15; // r5
  char *v16; // r6
  UInt8 *v17; // r8
  int v18; // r11
  int v19; // r4
  int v20; // r9
  Int32 *v21; // r3
  int v22; // r5
  int v23; // r3
  int v24; // r3
  Int32 *v25; // r5
  char *v26; // r3

  if ( Number >= 1 )
  {
    v2 = (unsigned __int16)Number;
    v3 = ScriptParams;
    do
    {
      PCPointer = this->PCPointer;
      v5 = (char)*PCPointer;
      this->PCPointer = PCPointer + 1;
      switch ( v5 )
      {
        case 2:
          v6 = *(unsigned __int16 *)(PCPointer + 1);
          this->PCPointer = PCPointer + 3;
          *(_DWORD *)&CTheScripts::ScriptSpace[v6] = *v3;
          break;
        case 3:
          v7 = *(unsigned __int16 *)(PCPointer + 1);
          ThisMustBeTheOnlyMissionRunning = this->ThisMustBeTheOnlyMissionRunning;
          this->PCPointer = PCPointer + 3;
          v9 = &CTheScripts::LocalVariablesForCurrentMission[v7];
          v10 = (char *)this + 4 * v7;
          if ( !ThisMustBeTheOnlyMissionRunning )
            v9 = (Int32 *)(v10 + 60);
          *v9 = *v3;
          break;
        case 7:
          v11 = *(__int16 *)(PCPointer + 5);
          v12 = *(unsigned __int16 *)(PCPointer + 3);
          v13 = *(unsigned __int16 *)(PCPointer + 1);
          v14 = PCPointer + 7;
          if ( v11 <= -1 )
          {
            v15 = &CTheScripts::ScriptSpace[v12];
          }
          else
          {
            v15 = (UInt8 *)&CTheScripts::LocalVariablesForCurrentMission[v12];
            v16 = (char *)this + 4 * v12;
            if ( !this->ThisMustBeTheOnlyMissionRunning )
              v15 = (UInt8 *)(v16 + 60);
          }
          v22 = *(_DWORD *)v15;
          this->PCPointer = v14;
          *(_DWORD *)&CTheScripts::ScriptSpace[4 * v22 + v13] = *v3;
          break;
        case 8:
          v17 = PCPointer + 7;
          v18 = *(unsigned __int16 *)(PCPointer + 3);
          v19 = *(unsigned __int16 *)(PCPointer + 1);
          if ( *(__int16 *)(PCPointer + 5) <= -1 )
          {
            v20 = this->ThisMustBeTheOnlyMissionRunning;
            v21 = (Int32 *)&CTheScripts::ScriptSpace[v18];
          }
          else
          {
            v20 = this->ThisMustBeTheOnlyMissionRunning;
            v21 = &CTheScripts::LocalVariablesForCurrentMission[v18];
            if ( !this->ThisMustBeTheOnlyMissionRunning )
              v21 = &this->Locals[v18];
          }
          v23 = *(unsigned __int16 *)v21;
          this->PCPointer = v17;
          v24 = v23 + v19;
          v25 = &CTheScripts::LocalVariablesForCurrentMission[v24];
          v26 = (char *)this + 4 * v24;
          if ( !v20 )
            v25 = (Int32 *)(v26 + 60);
          *v25 = *v3;
          break;
        default:
          break;
      }
      *(_DWORD *)&Number = Number - 1;
      ++v3;
    }
    while ( Number );
  }
}

//----- (00329864) --------------------------------------------------------
void __fastcall CRunningScript::ReadParametersForNewlyStartedScript(CRunningScript *this, CRunningScript *pNewScript)
{
  UInt8 *PCPointer; // r6
  char v3; // r3
  UInt8 *v4; // r6
  int v5; // t1
  Int32 *Locals; // r1
  Int32 v7; // r3
  int v8; // r2
  int v9; // t1
  int ThisMustBeTheOnlyMissionRunning; // r3
  Int32 *v11; // r6
  char *v12; // r2
  int v13; // r2
  int v14; // r4
  int v15; // r3
  UInt8 *v16; // r6
  UInt8 *v17; // r2
  char *v18; // r4
  int v19; // r2
  int v20; // r9
  int v21; // r3
  UInt8 *v22; // r6
  int v23; // lr
  Int32 *v24; // r8
  int v25; // r2
  int v26; // r2
  int v27; // r2
  Int32 *v28; // r3
  char *v29; // r2
  int v30; // t1

  PCPointer = this->PCPointer;
  v5 = *PCPointer;
  v4 = PCPointer + 1;
  v3 = v5;
  this->PCPointer = v4;
  if ( v5 )
  {
    Locals = pNewScript->Locals;
    do
    {
      switch ( v3 )
      {
        case 1:
        case 6:
          v7 = *(_DWORD *)v4;
          this->PCPointer = v4 + 4;
          goto LABEL_25;
        case 2:
          v8 = *(unsigned __int16 *)v4;
          this->PCPointer = v4 + 2;
          v7 = *(_DWORD *)&CTheScripts::ScriptSpace[v8];
          goto LABEL_25;
        case 3:
          v9 = *(unsigned __int16 *)v4;
          ThisMustBeTheOnlyMissionRunning = this->ThisMustBeTheOnlyMissionRunning;
          this->PCPointer = v4 + 2;
          v11 = &CTheScripts::LocalVariablesForCurrentMission[v9];
          v12 = (char *)this + 4 * v9;
          if ( !ThisMustBeTheOnlyMissionRunning )
            v11 = (Int32 *)(v12 + 60);
          v7 = *v11;
          goto LABEL_25;
        case 4:
          v7 = (char)*v4;
          this->PCPointer = v4 + 1;
          goto LABEL_25;
        case 5:
          v7 = *(__int16 *)v4;
          this->PCPointer = v4 + 2;
          goto LABEL_25;
        case 7:
          v13 = *((__int16 *)v4 + 2);
          v14 = *((unsigned __int16 *)v4 + 1);
          v15 = *(unsigned __int16 *)v4;
          v16 = v4 + 6;
          if ( v13 <= -1 )
          {
            v17 = &CTheScripts::ScriptSpace[v14];
          }
          else
          {
            v17 = (UInt8 *)&CTheScripts::LocalVariablesForCurrentMission[v14];
            v18 = (char *)this + 4 * v14;
            if ( !this->ThisMustBeTheOnlyMissionRunning )
              v17 = (UInt8 *)(v18 + 60);
          }
          v25 = *(_DWORD *)v17;
          this->PCPointer = v16;
          v7 = *(_DWORD *)&CTheScripts::ScriptSpace[4 * v25 + v15];
          goto LABEL_25;
        case 8:
          v19 = *((__int16 *)v4 + 2);
          v20 = *((unsigned __int16 *)v4 + 1);
          v21 = *(unsigned __int16 *)v4;
          v22 = v4 + 6;
          if ( v19 <= -1 )
          {
            v23 = this->ThisMustBeTheOnlyMissionRunning;
            v24 = (Int32 *)&CTheScripts::ScriptSpace[v20];
          }
          else
          {
            v23 = this->ThisMustBeTheOnlyMissionRunning;
            v24 = &CTheScripts::LocalVariablesForCurrentMission[v20];
            if ( !this->ThisMustBeTheOnlyMissionRunning )
              v24 = &this->Locals[v20];
          }
          v26 = *(unsigned __int16 *)v24;
          this->PCPointer = v22;
          v27 = v26 + v21;
          v28 = &CTheScripts::LocalVariablesForCurrentMission[v27];
          v29 = (char *)this + 4 * v27;
          if ( !v23 )
            v28 = (Int32 *)(v29 + 60);
          v7 = *v28;
LABEL_25:
          *Locals = v7;
          v4 = this->PCPointer;
          break;
        default:
          break;
      }
      v30 = *v4++;
      v3 = v30;
      ++Locals;
      this->PCPointer = v4;
    }
    while ( v30 );
  }
}

//----- (003299E0) --------------------------------------------------------
void CTheScripts::PrintListSizes()
{
  CRunningScript **v0; // r0
  CRunningScript **v1; // r0

  v0 = &CTheScripts::pActiveScripts;
  do
    v0 = (CRunningScript **)*v0;
  while ( v0 );
  v1 = &CTheScripts::pIdleScripts;
  do
    v1 = (CRunningScript **)*v1;
  while ( v1 );
}

//----- (00329A04) --------------------------------------------------------
UInt16 __fastcall CRunningScript::GetIndexOfGlobalVariable(CRunningScript *this)
{
  UInt8 *PCPointer; // r2
  int v2; // r1
  UInt16 v3; // r1
  int v5; // r3
  __int16 v6; // r12
  UInt8 *v7; // r1
  char *v8; // r3

  PCPointer = this->PCPointer;
  v2 = (char)*PCPointer;
  this->PCPointer = PCPointer + 1;
  if ( v2 == 7 )
  {
    v5 = *(unsigned __int16 *)(PCPointer + 3);
    v6 = *(_WORD *)(PCPointer + 1);
    if ( *(__int16 *)(PCPointer + 5) <= -1 )
    {
      v7 = &CTheScripts::ScriptSpace[v5];
    }
    else
    {
      v7 = (UInt8 *)&CTheScripts::LocalVariablesForCurrentMission[v5];
      v8 = (char *)this + 4 * v5;
      if ( !this->ThisMustBeTheOnlyMissionRunning )
        v7 = (UInt8 *)(v8 + 60);
    }
    v2 = *(_DWORD *)v7;
    this->PCPointer = PCPointer + 7;
    LOWORD(v2) = v6 + 4 * v2;
  }
  else if ( v2 == 2 )
  {
    v3 = *(_WORD *)(PCPointer + 1);
    this->PCPointer = PCPointer + 3;
    return v3;
  }
  return v2;
}

//----- (00329A7C) --------------------------------------------------------
Int32 *__fastcall CRunningScript::GetPointerToScriptVariable(CRunningScript *this, UInt8 VariableScope)
{
  UInt8 *PCPointer; // r3
  int v3; // r4
  Int32 *v4; // r1
  int v5; // r2
  Int32 *result; // r0
  int v7; // r2
  int v8; // r1
  int v9; // r12
  UInt8 *v10; // r3
  UInt8 *v11; // r2
  char *v12; // r1
  int v13; // r2
  int ThisMustBeTheOnlyMissionRunning; // r5
  char *v15; // r0
  Int32 *v16; // r1
  int v17; // r2
  int v18; // r1
  int v19; // r12
  UInt8 *v20; // r3
  UInt8 *v21; // r2
  char *v22; // r1
  int v23; // r1
  int v24; // r3
  int v25; // r5
  char *v26; // r0
  Int32 *v27; // r1
  int v28; // r1
  int v29; // r3
  int v30; // r2
  char *v31; // r0

  PCPointer = this->PCPointer;
  v3 = (char)*PCPointer;
  this->PCPointer = PCPointer + 1;
  v4 = 0;
  switch ( v3 )
  {
    case 2:
    case 10:
    case 16:
      v5 = *(unsigned __int16 *)(PCPointer + 1);
      this->PCPointer = PCPointer + 3;
      result = (Int32 *)&CTheScripts::ScriptSpace[v5];
      break;
    case 3:
    case 11:
    case 17:
      v13 = *(unsigned __int16 *)(PCPointer + 1);
      ThisMustBeTheOnlyMissionRunning = this->ThisMustBeTheOnlyMissionRunning;
      this->PCPointer = PCPointer + 3;
      v15 = (char *)this + 4 * v13;
      v16 = &CTheScripts::LocalVariablesForCurrentMission[v13];
      if ( !ThisMustBeTheOnlyMissionRunning )
        v16 = (Int32 *)(v15 + 60);
      result = v16;
      break;
    case 7:
    case 12:
    case 18:
      v17 = *(__int16 *)(PCPointer + 5);
      v18 = *(unsigned __int16 *)(PCPointer + 3);
      v19 = *(unsigned __int16 *)(PCPointer + 1);
      v20 = PCPointer + 7;
      if ( v17 <= -1 )
      {
        v21 = &CTheScripts::ScriptSpace[v18];
      }
      else
      {
        v21 = (UInt8 *)&CTheScripts::LocalVariablesForCurrentMission[v18];
        v22 = (char *)this + 4 * v18;
        if ( !this->ThisMustBeTheOnlyMissionRunning )
          v21 = (UInt8 *)(v22 + 60);
      }
      v28 = *(_DWORD *)v21;
      this->PCPointer = v20;
      if ( (unsigned __int8)v3 == 18 )
      {
        result = (Int32 *)&CTheScripts::ScriptSpace[16 * v28 + v19];
      }
      else if ( (unsigned __int8)v3 == 12 )
      {
        result = (Int32 *)&CTheScripts::ScriptSpace[8 * v28 + v19];
      }
      else
      {
        result = (Int32 *)&CTheScripts::ScriptSpace[4 * v28 + v19];
      }
      break;
    case 8:
    case 13:
    case 19:
      v7 = *(__int16 *)(PCPointer + 5);
      v8 = *(unsigned __int16 *)(PCPointer + 3);
      v9 = *(unsigned __int16 *)(PCPointer + 1);
      v10 = PCPointer + 7;
      if ( v7 <= -1 )
      {
        v11 = &CTheScripts::ScriptSpace[v8];
      }
      else
      {
        v11 = (UInt8 *)&CTheScripts::LocalVariablesForCurrentMission[v8];
        v12 = (char *)this + 4 * v8;
        if ( !this->ThisMustBeTheOnlyMissionRunning )
          v11 = (UInt8 *)(v12 + 60);
      }
      v23 = *(_DWORD *)v11;
      this->PCPointer = v10;
      if ( (unsigned __int8)v3 != 19 )
      {
        if ( (unsigned __int8)v3 == 13 )
          v29 = v9 + 2 * (unsigned __int16)v23;
        else
          v29 = (unsigned __int16)v23 + v9;
        v30 = this->ThisMustBeTheOnlyMissionRunning;
        v31 = (char *)this + 4 * v29;
        v4 = &CTheScripts::LocalVariablesForCurrentMission[v29];
        if ( !v30 )
          v4 = (Int32 *)(v31 + 60);
        goto LABEL_29;
      }
      v24 = this->ThisMustBeTheOnlyMissionRunning;
      v25 = ((unsigned int)&stru_3FFFC & (4 * v23)) + v9;
      v26 = (char *)this + 4 * v25;
      v27 = &CTheScripts::LocalVariablesForCurrentMission[v25];
      if ( !v24 )
        v27 = (Int32 *)(v26 + 60);
      result = v27;
      break;
    default:
LABEL_29:
      result = v4;
      break;
  }
  return result;
}
// 3FFFC: using guessed type Elf32_Sym stru_3FFFC;

//----- (00329C34) --------------------------------------------------------
void __fastcall CRunningScript::Init(CRunningScript *this)
{
  _QWORD *v2; // r0

  this->pNext = 0;
  this->pPrevious = 0;
  this->ActivateTime = 0;
  strcpy((char *)this->ScriptName, "noname");
  *(_DWORD *)&this->bActive = 0;
  this->bIsThisAMiniGameScript = 0;
  this->ScriptBrainType = -1;
  v2 = (_QWORD *)((char *)&this->PCStack[4] + 2);
  *v2 = 0LL;
  v2[1] = 0LL;
  *(_QWORD *)&this->PCStack[2] = 0LL;
  *(_QWORD *)&this->PCStack[4] = 0LL;
  *(_QWORD *)&this->BaseAddressOfThisScript = 0LL;
  *(_QWORD *)this->PCStack = 0LL;
  memset(this->Locals, 0, sizeof(this->Locals));
  this->DoneDeatharrest = 0;
  *(_DWORD *)&this->AndOrState = 0x1000000;
  this->EndOfScriptedCutscenePC = 0;
  this->ThisMustBeTheOnlyMissionRunning = 0;
}

//----- (00329CA0) --------------------------------------------------------
void __fastcall CTheScripts::DrawScriptSpritesAndRectangles(Bool8 bBeforeFade)
{
  int v1; // r4
  int i; // r8
  float ScriptRectMinX; // r0
  float ScriptRectMinY; // r1
  float ScriptRectMaxY; // r3
  CRGBA v6; // r0
  float v7; // r1
  float v8; // r2
  float v9; // r6
  int ScriptSpriteIndex; // r0
  float v11; // r2
  float ScriptRectMaxX; // r6
  float v13; // r5
  float v14; // s0
  float v15; // s2
  float ScriptRectRotation; // r6
  float v17; // s20
  float v18; // s18
  float v19; // s24
  float v20; // s22
  float v21; // r5
  float v22; // r0
  float v23; // s4
  CRGBA v24; // [sp+3Ch] [bp-5Ch] BYREF
  CRect Rectangle; // [sp+40h] [bp-58h] BYREF

  v1 = bBeforeFade;
  for ( i = 0; i != 128; ++i )
  {
    if ( CTheScripts::IntroRectangles[i].ScriptRectBeforeFade == v1 )
    {
      switch ( CTheScripts::IntroRectangles[i].eWindowType )
      {
        case WINDOW_HEADER_AND_TEXT:
          CMenuManager::DrawWindowedText(
            &FrontEndMenuManager,
            CTheScripts::IntroRectangles[i].ScriptRectMinX,
            CTheScripts::IntroRectangles[i].ScriptRectMinY,
            CTheScripts::IntroRectangles[i].ScriptRectMaxX,
            CTheScripts::IntroRectangles[i].pTitle,
            CTheScripts::IntroRectangles[i].pMessage,
            CTheScripts::IntroRectangles[i].nAlignment);
          break;
        case WINDOW_HEADER_NO_TEXT:
          ScriptRectMinX = CTheScripts::IntroRectangles[i].ScriptRectMinX;
          ScriptRectMinY = CTheScripts::IntroRectangles[i].ScriptRectMinY;
          ScriptRectMaxY = CTheScripts::IntroRectangles[i].ScriptRectMaxY;
          Rectangle.right = CTheScripts::IntroRectangles[i].ScriptRectMaxX;
          Rectangle.bottom = ScriptRectMinY;
          Rectangle.left = ScriptRectMinX;
          Rectangle.top = ScriptRectMaxY;
          CRGBA::CRGBA(&v24, 0, 0, 0, 0xBEu);
          CMenuManager::DrawWindow(
            &FrontEndMenuManager,
            &Rectangle,
            CTheScripts::IntroRectangles[i].pTitle,
            0,
            v6,
            CTheScripts::IntroRectangles[i].nSwirl,
            1);
          break;
        case WINDOW_SOLID_COLOUR:
          v7 = CTheScripts::IntroRectangles[i].ScriptRectMinX;
          v8 = CTheScripts::IntroRectangles[i].ScriptRectMinY;
          v9 = CTheScripts::IntroRectangles[i].ScriptRectMaxY;
          Rectangle.right = CTheScripts::IntroRectangles[i].ScriptRectMaxX;
          Rectangle.bottom = v8;
          Rectangle.left = v7;
          Rectangle.top = v9;
          CSprite2d::DrawRect(&Rectangle, &CTheScripts::IntroRectangles[i].ScriptRectColour);
          break;
        case WINDOW_SPRITE_NO_ROTATION:
          ScriptSpriteIndex = CTheScripts::IntroRectangles[i].ScriptSpriteIndex;
          v11 = CTheScripts::IntroRectangles[i].ScriptRectMinX;
          ScriptRectMaxX = CTheScripts::IntroRectangles[i].ScriptRectMaxX;
          Rectangle.bottom = CTheScripts::IntroRectangles[i].ScriptRectMinY;
          v13 = CTheScripts::IntroRectangles[i].ScriptRectMaxY;
          Rectangle.left = v11;
          Rectangle.top = v13;
          Rectangle.right = ScriptRectMaxX;
          CSprite2d::Draw(
            &CTheScripts::ScriptSprites[ScriptSpriteIndex],
            &Rectangle,
            &CTheScripts::IntroRectangles[i].ScriptRectColour);
          break;
        case WINDOW_SPRITE_WITH_ROTATION:
          v14 = CTheScripts::IntroRectangles[i].ScriptRectMinX;
          v15 = CTheScripts::IntroRectangles[i].ScriptRectMinY;
          ScriptRectRotation = CTheScripts::IntroRectangles[i].ScriptRectRotation;
          v17 = (float)(v14 + CTheScripts::IntroRectangles[i].ScriptRectMaxX) * 0.5;
          v18 = (float)(v15 + CTheScripts::IntroRectangles[i].ScriptRectMaxY) * 0.5;
          v19 = v17 - v14;
          v20 = v18 - v15;
          v21 = cosf(ScriptRectRotation);
          v22 = sinf(ScriptRectRotation);
          v23 = (float)(v18 - v15) * v22;
          CSprite2d::Draw(
            &CTheScripts::ScriptSprites[CTheScripts::IntroRectangles[i].ScriptSpriteIndex],
            v17 + (float)(v23 - (float)(v19 * v21)),
            v18 + (float)((float)-(float)(v19 * v22) - (float)(v21 * v20)),
            v17 + (float)((float)(v19 * v21) + v23),
            v18 + (float)((float)(v19 * v22) - (float)(v21 * v20)),
            v17 + (float)((float)-(float)(v19 * v21) - v23),
            v18 + (float)((float)(v21 * v20) - (float)(v19 * v22)),
            v17 + (float)((float)(v19 * v21) - v23),
            v18 + (float)((float)(v19 * v22) + (float)(v21 * v20)),
            &CTheScripts::IntroRectangles[i].ScriptRectColour);
          break;
        default:
          continue;
      }
    }
  }
}
// 329D92: variable 'v6' is possibly undefined

//----- (00329F00) --------------------------------------------------------
void CTheScripts::Init()
{
  int v0; // r5
  CRunningScript *v1; // r9
  CRunningScript *v2; // r8
  _QWORD *v3; // r0
  UInt8 **v4; // r0
  UInt8 **p_BaseAddressOfThisScript; // r0
  int v6; // r2
  cleanup_entity_struct *v7; // r3
  int v8; // r6
  _DWORD *v9; // r5
  int i; // r2
  entity_waiting_for_script_brain *v11; // r3
  u_native v12; // r0
  u_native v13; // r4
  int32 Bytes; // r8
  u_native v15; // r4
  UsedObjects *v16; // r0
  int v17; // r1
  int v18; // r9
  CRGBA *v19; // r0
  intro_text_line *v20; // r11
  RwInt32 screenWidth; // s0
  float v22; // s0
  CRGBA *v23; // r0
  CRGBA *v24; // r0
  CRGBA *v25; // r0
  int v26; // r6
  intro_script_rectangle *v27; // r4
  float *p_ScriptRectMinX; // r1
  int v29; // r4
  int32 TxdSlot; // r0
  int j; // r3
  building_swap_struct *v32; // r6
  int k; // r3
  script_effect_struct *v34; // r6
  int v35; // r3
  script_unique_thing_struct *v36; // r6
  CDecisionMakerTypes *v37; // r0
  CDecisionMakerTypes *v38; // r0
  CRGBA v39; // [sp+Ch] [bp-34h] BYREF

  memset(CTheScripts::ScriptSpace, 0, (size_t)&stru_52C2C.st_info);
  memset(CTheScripts::LocalVariablesForCurrentMission, 0, sizeof(CTheScripts::LocalVariablesForCurrentMission));
  v0 = 0;
  v1 = 0;
  CTheScripts::pActiveScripts = 0;
  CTheScripts::pIdleScripts = 0;
  do
  {
    v2 = &CTheScripts::ScriptsArray[v0];
    v2->ActivateTime = 0;
    strcpy((char *)CTheScripts::ScriptsArray[v0].ScriptName, "noname");
    v3 = (_QWORD *)((char *)&CTheScripts::ScriptsArray[v0].PCStack[4] + 2);
    *(_DWORD *)&v2->bActive = 0;
    v2->bIsThisAMiniGameScript = 0;
    v2->ScriptBrainType = -1;
    *v3 = 0LL;
    v3[1] = 0LL;
    v4 = &CTheScripts::ScriptsArray[v0].PCStack[2];
    *(_QWORD *)v4 = 0LL;
    *((_QWORD *)v4 + 1) = 0LL;
    p_BaseAddressOfThisScript = &CTheScripts::ScriptsArray[v0].BaseAddressOfThisScript;
    *(_QWORD *)p_BaseAddressOfThisScript = 0LL;
    *((_QWORD *)p_BaseAddressOfThisScript + 1) = 0LL;
    memset(CTheScripts::ScriptsArray[v0].Locals, 0, sizeof(CTheScripts::ScriptsArray[v0].Locals));
    CTheScripts::ScriptsArray[v0++].pNext = v1;
    v2->DoneDeatharrest = 0;
    *(_DWORD *)&v2->AndOrState = 0x1000000;
    v2->EndOfScriptedCutscenePC = 0;
    v2->ThisMustBeTheOnlyMissionRunning = 0;
    v2->pPrevious = 0;
    if ( v1 )
      v1->pPrevious = v2;
    v1 = v2;
  }
  while ( v0 != 96 );
  CTheScripts::pIdleScripts = &CTheScripts::ScriptsArray[95];
  v6 = 0;
  CTheScripts::MissionCleanUp.Count = 0;
  do
  {
    CTheScripts::MissionCleanUp.cleanup_entities[v6].Type = 0;
    v7 = &CTheScripts::MissionCleanUp.cleanup_entities[v6++];
    v7->Id = 0;
  }
  while ( v6 != 75 );
  v8 = 0;
  CTheScripts::UpsideDownCars.Cars[0] = (upsidedown_car_data)0xFFFFFFFFLL;
  CTheScripts::UpsideDownCars.Cars[1] = (upsidedown_car_data)0xFFFFFFFFLL;
  CTheScripts::UpsideDownCars.Cars[2] = (upsidedown_car_data)0xFFFFFFFFLL;
  CTheScripts::UpsideDownCars.Cars[3] = (upsidedown_car_data)0xFFFFFFFFLL;
  CTheScripts::UpsideDownCars.Cars[4] = (upsidedown_car_data)0xFFFFFFFFLL;
  CTheScripts::UpsideDownCars.Cars[5] = (upsidedown_car_data)0xFFFFFFFFLL;
  do
  {
    CTheScripts::StuckCars.Cars[v8].CarID = -1;
    v9 = (_DWORD *)((char *)&CTheScripts::StuckCars + v8 * 36);
    ++v8;
    v9[1] = -979615744;
    v9[2] = -979615744;
    v9[3] = -979615744;
    v9[4] = -1;
    *(_DWORD *)((char *)v9 + 30) = 0;
    *(_DWORD *)((char *)v9 + 26) = 0;
    v9[5] = 0;
    v9[6] = 0;
  }
  while ( v8 != 16 );
  CScriptsForBrains::Init(&CTheScripts::ScriptsForBrains);
  CScriptResourceManager::Initialise(&CTheScripts::ScriptResourceManager);
  for ( i = 0; i != 150; ++i )
  {
    CTheScripts::EntitiesWaitingForScriptBrain[i].pEntity = 0;
    v11 = &CTheScripts::EntitiesWaitingForScriptBrain[i];
    v11->ScriptBrainIndex = -1;
  }
  if ( !CGame::bMissionPackGame )
    goto LABEL_17;
  while ( CMenuManager::CheckMissionPackValidMenu(&FrontEndMenuManager) )
  {
    CFileMgr::SetDirMyDocuments();
    sprintf(gString, "MPACK//MPACK%d//SCR.SCM", CGame::bMissionPackGame);
    v12 = CFileMgr::OpenFile(gString, "rb");
    v13 = v12;
    if ( v12 )
    {
      Bytes = CFileMgr::ReadBytes(v12, CTheScripts::ScriptSpace, (int32)&stru_41EAC.st_value);
      CFileMgr::CloseFile(v13);
      if ( Bytes >= 1 )
      {
        CText::Load(&TheText, 0);
        break;
      }
    }
  }
  CFileMgr::SetDir((const unsigned __int8 *)&byte_61CADE);
  if ( !CGame::bMissionPackGame )
  {
LABEL_17:
    CFileMgr::SetDir("data\\script");
    v15 = CFileMgr::OpenFile("mainV1.scm", "rb");
    CFileMgr::ReadBytes(v15, CTheScripts::ScriptSpace, (int32)&stru_41EAC.st_value);
    CFileMgr::CloseFile(v15);
  }
  CFileMgr::SetDir((const unsigned __int8 *)&byte_61CADE);
  v16 = CTheScripts::UsedObjectArray;
  CTheScripts::StoreVehicleWasRandom = 1;
  CTheScripts::StoreVehicleIndex = -1;
  CTheScripts::LastMissionPassedTime = -1;
  v17 = 395;
  CTheScripts::OnAMissionFlag = 0;
  CTheScripts::LastRandomPedId = -1;
  do
  {
    --v17;
    *(_QWORD *)&v16->Name[12] = 0LL;
    *(_QWORD *)&v16->Name[20] = 0LL;
    *(_QWORD *)v16->Name = 0LL;
    *(_QWORD *)&v16->Name[8] = 0LL;
    ++v16;
  }
  while ( v17 );
  CTheScripts::NumberOfUsedObjects = 0;
  CTheScripts::ReadObjectNamesFromScript();
  CTheScripts::UpdateObjectIndices();
  CTheScripts::bAlreadyRunningAMissionScript = 0;
  CTheScripts::bUsingAMultiScriptFile = 1;
  memset(CTheScripts::MultiScriptArray, 0, sizeof(CTheScripts::MultiScriptArray));
  CTheScripts::LargestMissionScriptSize = 0;
  CTheScripts::MainScriptSize = 0;
  CTheScripts::NumberOfMissionScripts = 0;
  CTheScripts::NumberOfExclusiveMissionScripts = 0;
  CTheScripts::LargestNumberOfMissionScriptLocalVariables = 0;
  CTheScripts::ReadMultiScriptFileOffsetsFromScript();
  if ( !CGame::bMissionPackGame )
    CStreamedScripts::ReadStreamedScriptData(&CTheScripts::StreamedScripts);
  CTheScripts::ScriptPickupCycleIndex = 0;
  CTheScripts::bDisplayNonMiniGameHelpMessages = 1;
  CTheScripts::ForceRandomCarModel = -1;
  CTheScripts::FailCurrentMission = 0;
  CTheScripts::bAddNextMessageToPreviousBriefs = 1;
  CTheScripts::bMiniGameInProgress = 0;
  CTheScripts::bDrawOddJobTitleBeforeFade = 1;
  CTheScripts::bDrawSubtitlesBeforeFade = 1;
  CTheScripts::bScriptHasFadedOut = 0;
  CTheScripts::bPlayerHasMetDebbieHarry = 0;
  CTheScripts::RiotIntensity = 0;
  CTheScripts::bPlayerIsOffTheMap = 0;
  CTheScripts::RadarZoomValue = 0;
  CTheScripts::RadarShowBlipOnAllLevels = 0;
  CTheScripts::HideAllFrontEndMapBlips = 0;
  CTheScripts::bDisplayHud = 1;
  CTheScripts::fCameraHeadingWhenPlayerIsAttached = 0.0;
  CTheScripts::fCameraHeadingStepWhenPlayerIsAttached = 0.0;
  CTheScripts::bEnableCraneRaise = 1;
  CTheScripts::bEnableCraneLower = 1;
  CTheScripts::bEnableCraneRelease = 1;
  CTheScripts::bDrawCrossHair = SCRIPT_CROSSHAIR_OFF;
  gAllowScriptedFixedCameraCollision = 0;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[0].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[0].Centre.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[1].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[1].Centre.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[2].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[2].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[0].bUsed = 0;
  CTheScripts::ScriptSphereArray[0].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[0].Radius = 0.0;
  CTheScripts::ScriptSphereArray[1].bUsed = 0;
  CTheScripts::ScriptSphereArray[1].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[1].Radius = 0.0;
  CTheScripts::ScriptSphereArray[2].Radius = 0.0;
  CTheScripts::ScriptSphereArray[2].bUsed = 0;
  CTheScripts::ScriptSphereArray[2].ReferenceIndex = 1;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[3].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[3].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[3].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[3].bUsed = 0;
  CTheScripts::ScriptSphereArray[3].Radius = 0.0;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[4].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[4].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[4].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[4].bUsed = 0;
  CTheScripts::ScriptSphereArray[4].Radius = 0.0;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[5].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[5].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[5].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[5].bUsed = 0;
  CTheScripts::ScriptSphereArray[5].Radius = 0.0;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[6].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[6].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[6].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[6].bUsed = 0;
  CTheScripts::ScriptSphereArray[6].Radius = 0.0;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[7].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[7].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[7].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[7].bUsed = 0;
  CTheScripts::ScriptSphereArray[7].Radius = 0.0;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[8].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[8].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[8].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[8].bUsed = 0;
  CTheScripts::ScriptSphereArray[8].Radius = 0.0;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[9].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[9].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[9].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[9].bUsed = 0;
  CTheScripts::ScriptSphereArray[9].Radius = 0.0;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[10].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[10].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[10].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[10].bUsed = 0;
  CTheScripts::ScriptSphereArray[10].Radius = 0.0;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[11].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[11].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[11].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[11].bUsed = 0;
  CTheScripts::ScriptSphereArray[11].Radius = 0.0;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[12].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[12].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[12].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[12].bUsed = 0;
  CTheScripts::ScriptSphereArray[12].Radius = 0.0;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[13].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[13].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[13].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[13].bUsed = 0;
  CTheScripts::ScriptSphereArray[13].Radius = 0.0;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[14].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[14].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[14].ReferenceIndex = 1;
  CTheScripts::ScriptSphereArray[14].bUsed = 0;
  CTheScripts::ScriptSphereArray[14].Radius = 0.0;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[15].UniqueId = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSphereArray[15].Centre.y = 0LL;
  CTheScripts::ScriptSphereArray[15].ReferenceIndex = 1;
  v18 = 0;
  CTheScripts::ScriptSphereArray[15].bUsed = 0;
  CTheScripts::ScriptSphereArray[15].Radius = 0.0;
  v19 = &v39;
  do
  {
    v20 = &CTheScripts::IntroTextLines[v18];
    CTheScripts::IntroTextLines[v18].ScriptTextXScale = 0.48;
    CTheScripts::IntroTextLines[v18].ScriptTextYScale = 1.12;
    CRGBA::CRGBA(v19, 0xE1u, 0xE1u, 0xE1u, 0xFFu);
    *(_WORD *)&v20->ScriptTextColor._anon_0._anon_0.red = *(_WORD *)&v39._anon_0._anon_0.red;
    screenWidth = RsGlobal.screenWidth;
    *(_WORD *)&v20->ScriptTextColor._anon_0.col[2] = *(_WORD *)&v39._anon_0.col[2];
    *(_DWORD *)&v20->ScriptTextJustify = 0;
    v20->ScriptTextRightJustify = 0;
    v22 = (float)screenWidth;
    v20->ScriptTextWrapX = v22;
    v20->ScriptTextCentreSize = v22;
    CRGBA::CRGBA(v23, 0x80u, 0x80u, 0x80u, 0x80u);
    v20->ScriptTextBackgrndColor = v39;
    v20->ScriptTextProportional = 1;
    CRGBA::CRGBA(v24, 0, 0, 0, 0xFFu);
    ++v18;
    v20->ScriptTextDropShadowColour = v39;
    *(_QWORD *)&v20->ScriptTextAtX = 0LL;
    *(_QWORD *)v20->ScriptTextLabel = 0LL;
    v20->ScriptTextBeforeFade = 0;
    *(_WORD *)&v20->ScriptTextDropShadow = 2;
    v20->ScriptTextFontStyle = 1;
    v20->NumberToInsert1 = -1;
    v20->NumberToInsert2 = -1;
  }
  while ( v18 != 96 );
  CTheScripts::UseTextCommands = 0;
  v25 = &v39;
  CTheScripts::bUseMessageFormatting = 0;
  v26 = 0;
  CTheScripts::NumberOfIntroTextLinesThisFrame = 0;
  CTheScripts::MessageCentre = 0;
  CTheScripts::MessageWidth = 0;
  do
  {
    v27 = &CTheScripts::IntroRectangles[v26];
    CTheScripts::IntroRectangles[v26].eWindowType = WINDOW_NONE;
    p_ScriptRectMinX = &CTheScripts::IntroRectangles[v26].ScriptRectMinX;
    v27->ScriptRectBeforeFade = 0;
    v27->ScriptSpriteIndex = -1;
    v27->ScriptRectRotation = 0.0;
    *(_QWORD *)p_ScriptRectMinX = 0LL;
    *((_QWORD *)p_ScriptRectMinX + 1) = 0LL;
    CRGBA::CRGBA(v25, 0xFFu, 0xFFu, 0xFFu, 0xFFu);
    ++v26;
    v27->ScriptRectColour = v39;
    v27->nSwirl = 3;
    v27->pTitle[0] = 0;
  }
  while ( v26 != 128 );
  v29 = 0;
  CTheScripts::NumberOfIntroRectanglesThisFrame = 0;
  do
    CSprite2d::Delete(&CTheScripts::ScriptSprites[v29++]);
  while ( v29 != 128 );
  TxdSlot = CTxdStore::FindTxdSlot("script");
  if ( TxdSlot != -1 && *(_DWORD *)&CTxdStore::ms_pTxdPool->m_aStorage[TxdSlot][0] )
    CTxdStore::RemoveTxd(TxdSlot);
  for ( j = 0; j != 25; ++j )
  {
    CTheScripts::BuildingSwapArray[j].pBuilding = 0;
    v32 = &CTheScripts::BuildingSwapArray[j];
    v32->NewModelIndex = -1;
    v32->OldModelIndex = -1;
  }
  *(_QWORD *)&CTheScripts::InvisibilitySettingArray[16].pEntity = 0LL;
  *(_QWORD *)&CTheScripts::InvisibilitySettingArray[18].pEntity = 0LL;
  *(_QWORD *)&CTheScripts::InvisibilitySettingArray[12].pEntity = 0LL;
  *(_QWORD *)&CTheScripts::InvisibilitySettingArray[14].pEntity = 0LL;
  *(_QWORD *)&CTheScripts::InvisibilitySettingArray[8].pEntity = 0LL;
  *(_QWORD *)&CTheScripts::InvisibilitySettingArray[10].pEntity = 0LL;
  *(_QWORD *)&CTheScripts::InvisibilitySettingArray[0].pEntity = 0LL;
  *(_QWORD *)&CTheScripts::InvisibilitySettingArray[2].pEntity = 0LL;
  *(_QWORD *)&CTheScripts::InvisibilitySettingArray[4].pEntity = 0LL;
  *(_QWORD *)&CTheScripts::InvisibilitySettingArray[6].pEntity = 0LL;
  CTheScripts::ClearAllSuppressedCarModels();
  CTheScripts::ClearAllVehicleModelsBlockedByScript();
  CTheScripts::InitialiseAllConnectLodObjects();
  CTheScripts::InitialiseSpecialAnimGroupsAttachedToCharModels();
  for ( k = 0; k != 32; ++k )
  {
    CTheScripts::ScriptEffectSystemArray[k].bUsed = 0;
    v34 = &CTheScripts::ScriptEffectSystemArray[k];
    v34->ReferenceIndex = 1;
    v34->pFXSystem = 0;
  }
  CTheScripts::ScriptSearchLightArray[0].ReferenceIndex = 1;
  *(_DWORD *)&CTheScripts::ScriptSearchLightArray[0].bUsed = 0x10000;
  CTheScripts::ScriptSearchLightArray[1].bUsed = 0;
  CTheScripts::ScriptSearchLightArray[1].ReferenceIndex = 1;
  CTheScripts::ScriptSearchLightArray[1].SearchLightState = 0;
  *(_WORD *)&CTheScripts::ScriptSearchLightArray[1].bClipIfColliding = 256;
  CTheScripts::ScriptSearchLightArray[2].ReferenceIndex = 1;
  CTheScripts::ScriptSearchLightArray[2].SearchLightState = 0;
  *(_WORD *)&CTheScripts::ScriptSearchLightArray[2].bClipIfColliding = 256;
  CTheScripts::ScriptSearchLightArray[2].bUsed = 0;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[0].pSearchLightTargetEntity = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[0].pSearchLightHousing = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[0].SearchLightPoint2.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[0].MoveSpeed = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[0].SearchLightPoint1.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[0].SearchLightPoint1.z = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[0].SearchLightPointAt.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[0].Radius = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[0].SearchLightSource.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[0].SearchLightSource.z = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[1].pSearchLightTargetEntity = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[1].pSearchLightHousing = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[1].SearchLightPoint2.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[1].MoveSpeed = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[1].SearchLightPoint1.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[1].SearchLightPoint1.z = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[1].SearchLightPointAt.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[1].Radius = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[1].SearchLightSource.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[1].SearchLightSource.z = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[2].pSearchLightTargetEntity = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[2].pSearchLightHousing = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[2].SearchLightPoint2.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[2].MoveSpeed = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[2].SearchLightPoint1.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[2].SearchLightPoint1.z = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[2].SearchLightPointAt.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[2].Radius = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[2].SearchLightSource.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[2].SearchLightSource.z = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[3].pSearchLightTargetEntity = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[3].pSearchLightHousing = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[3].SearchLightPoint2.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[3].MoveSpeed = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[3].SearchLightPoint1.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[3].SearchLightPoint1.z = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[3].SearchLightPointAt.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[3].Radius = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[3].SearchLightSource.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[3].SearchLightSource.z = 0LL;
  CTheScripts::ScriptSearchLightArray[3].ReferenceIndex = 1;
  CTheScripts::ScriptSearchLightArray[3].SearchLightState = 0;
  *(_WORD *)&CTheScripts::ScriptSearchLightArray[3].bClipIfColliding = 256;
  CTheScripts::ScriptSearchLightArray[3].bUsed = 0;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[4].pSearchLightTargetEntity = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[4].pSearchLightHousing = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[4].SearchLightPoint2.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[4].MoveSpeed = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[4].SearchLightPoint1.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[4].SearchLightPoint1.z = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[4].SearchLightPointAt.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[4].Radius = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[4].SearchLightSource.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[4].SearchLightSource.z = 0LL;
  CTheScripts::ScriptSearchLightArray[4].ReferenceIndex = 1;
  CTheScripts::ScriptSearchLightArray[4].SearchLightState = 0;
  *(_WORD *)&CTheScripts::ScriptSearchLightArray[4].bClipIfColliding = 256;
  CTheScripts::ScriptSearchLightArray[4].bUsed = 0;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[5].pSearchLightTargetEntity = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[5].pSearchLightHousing = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[5].SearchLightPoint2.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[5].MoveSpeed = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[5].SearchLightPoint1.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[5].SearchLightPoint1.z = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[5].SearchLightPointAt.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[5].Radius = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[5].SearchLightSource.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[5].SearchLightSource.z = 0LL;
  CTheScripts::ScriptSearchLightArray[5].ReferenceIndex = 1;
  CTheScripts::ScriptSearchLightArray[5].SearchLightState = 0;
  *(_WORD *)&CTheScripts::ScriptSearchLightArray[5].bClipIfColliding = 256;
  CTheScripts::ScriptSearchLightArray[5].bUsed = 0;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[6].pSearchLightTargetEntity = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[6].pSearchLightHousing = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[6].SearchLightPoint2.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[6].MoveSpeed = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[6].SearchLightPoint1.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[6].SearchLightPoint1.z = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[6].SearchLightPointAt.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[6].Radius = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[6].SearchLightSource.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[6].SearchLightSource.z = 0LL;
  CTheScripts::ScriptSearchLightArray[6].ReferenceIndex = 1;
  CTheScripts::ScriptSearchLightArray[6].SearchLightState = 0;
  *(_WORD *)&CTheScripts::ScriptSearchLightArray[6].bClipIfColliding = 256;
  CTheScripts::ScriptSearchLightArray[6].bUsed = 0;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[7].pSearchLightTargetEntity = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[7].pSearchLightHousing = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[7].SearchLightPoint2.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[7].MoveSpeed = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[7].SearchLightPoint1.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[7].SearchLightPoint1.z = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[7].SearchLightPointAt.y = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[7].Radius = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[7].SearchLightSource.x = 0LL;
  *(_QWORD *)&CTheScripts::ScriptSearchLightArray[7].SearchLightSource.z = 0LL;
  CTheScripts::ScriptSearchLightArray[7].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[0].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[0].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[0].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[1].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[1].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[1].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[2].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[2].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[2].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[3].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[3].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[3].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[4].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[4].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[4].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[5].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[5].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[5].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[6].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[6].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[6].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[7].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[7].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[7].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[8].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[8].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[8].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[9].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[9].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[9].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[10].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[10].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[10].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[11].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[11].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[11].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[12].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[12].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[12].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[13].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[13].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[13].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[14].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[14].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[14].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[15].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[15].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[15].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[16].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[16].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[16].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[17].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[17].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[17].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[18].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[18].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[18].bUsed = 0;
  CTheScripts::ScriptCheckpointArray[19].pCheckpoint = 0;
  CTheScripts::ScriptCheckpointArray[19].ReferenceIndex = 1;
  CTheScripts::ScriptCheckpointArray[19].bUsed = 0;
  v35 = 0;
  CTheScripts::ScriptSearchLightArray[7].SearchLightState = 0;
  *(_WORD *)&CTheScripts::ScriptSearchLightArray[7].bClipIfColliding = 256;
  CTheScripts::ScriptSearchLightArray[7].bUsed = 0;
  CTheScripts::NumberOfScriptSearchLights = 0;
  CTheScripts::NumberOfScriptCheckpoints = 0;
  do
  {
    CTheScripts::ScriptSequenceTaskArray[v35].bUsed = 0;
    v36 = &CTheScripts::ScriptSequenceTaskArray[v35++];
    v36->ReferenceIndex = 1;
  }
  while ( v35 != 64 );
  CScripted2dEffects::Init();
  CTaskSequences::Init();
  CPedGroups::Init();
  CInformFriendsEventQueue::Init();
  CInformGroupEventQueue::Init();
  if ( !CDecisionMakerTypes::m_pPedDecisionTypes )
  {
    v37 = (CDecisionMakerTypes *)operator new(0xF1C0u);
    CDecisionMakerTypes::CDecisionMakerTypes(v37);
    CDecisionMakerTypes::m_pPedDecisionTypes = v38;
  }
}
// 32A4FA: variable 'v19' is possibly undefined
// 32A540: variable 'v23' is possibly undefined
// 32A572: variable 'v24' is possibly undefined
// 32A640: variable 'v25' is possibly undefined
// 32AA20: variable 'v38' is possibly undefined
// 41EAC: using guessed type Elf32_Sym stru_41EAC;
// 52C2C: using guessed type Elf32_Sym stru_52C2C;
// 61CADE: using guessed type char byte_61CADE;
// 675FA8: using guessed type int *CTheScripts::ForceRandomCarModel[2];
// 676360: using guessed type char *CTheScripts::RadarShowBlipOnAllLevels[2];
// 6782D8: using guessed type char *CTheScripts::bDisplayNonMiniGameHelpMessages[3];
// 67874C: using guessed type script_checkpoint_struct (*CTheScripts::ScriptCheckpointArray)[20];
// 6787E0: using guessed type char *CTheScripts::bDrawSubtitlesBeforeFade;
// 6788A0: using guessed type char *CTheScripts::HideAllFrontEndMapBlips[3];
// 6796D8: using guessed type script_sphere_struct (*CTheScripts::ScriptSphereArray)[16];
// 67982C: using guessed type script_effect_struct (*CTheScripts::ScriptEffectSystemArray)[32];
// 679CA8: using guessed type char *CTheScripts::bDrawOddJobTitleBeforeFade;

//----- (0032ABC0) --------------------------------------------------------
void CTheScripts::WipeLocalVariableMemoryForMissionScript()
{
  memset(CTheScripts::LocalVariablesForCurrentMission, 0, sizeof(CTheScripts::LocalVariablesForCurrentMission));
}

//----- (0032ABD8) --------------------------------------------------------
void __fastcall CRunningScript::AddScriptToList(CRunningScript *this, CRunningScript **ppList)
{
  this->pNext = *ppList;
  this->pPrevious = 0;
  if ( *ppList )
    (*ppList)->pPrevious = this;
  *ppList = this;
}

//----- (0032ABEC) --------------------------------------------------------
bool __fastcall CTheScripts::CheckScriptVersion(u_native nFileID, unsigned __int8 *strFileName)
{
  return 1;
}

//----- (0032ABF0) --------------------------------------------------------
void __fastcall CRunningScript::ShutdownThisScript(CRunningScript *this)
{
  int bIsThisAStreamedScript; // r0
  Int32 StreamedScriptWithThisStartAddress; // r0
  unsigned int ScriptBrainType; // r0
  Int32 *Locals; // r0
  int v6; // r0
  uint8 *v7; // r5
  CTaskSimple *v8; // r4
  Int32 *v9; // r0
  int v10; // r0
  uint8 *v11; // r0

  bIsThisAStreamedScript = this->bIsThisAStreamedScript;
  this->bActive = 0;
  if ( bIsThisAStreamedScript )
  {
    StreamedScriptWithThisStartAddress = CStreamedScripts::GetStreamedScriptWithThisStartAddress(
                                           &CTheScripts::StreamedScripts,
                                           this->BaseAddressOfThisScript);
    --CTheScripts::StreamedScripts.ScriptStructures[StreamedScriptWithThisStartAddress].NumberOfUsers;
  }
  ScriptBrainType = this->ScriptBrainType;
  if ( ScriptBrainType <= 5 )
  {
    if ( ((1 << ScriptBrainType) & 0x2D) != 0 )
    {
      Locals = CTheScripts::LocalVariablesForCurrentMission;
      if ( !this->ThisMustBeTheOnlyMissionRunning )
        Locals = this->Locals;
      v6 = *Locals;
      if ( v6 >= 0 && CPools::ms_pPedPool->m_aFlags[(unsigned int)v6 >> 8] == (unsigned __int8)v6 )
      {
        v7 = CPools::ms_pPedPool->m_aStorage[(unsigned int)v6 >> 8];
        if ( v7 )
        {
          *((_DWORD *)v7 + 291) &= ~0x800000u;
          if ( this->ScriptBrainType == 5 )
          {
            v8 = (CTaskSimple *)CTask::operator new(8u);
            CTaskSimple::CTaskSimple(v8);
            v8->_vptr$CTask = (int (**)(void))&off_665664;
            sub_189DD0((CPed *)v7, v8);
          }
        }
      }
    }
    else
    {
      v9 = CTheScripts::LocalVariablesForCurrentMission;
      if ( !this->ThisMustBeTheOnlyMissionRunning )
        v9 = this->Locals;
      v10 = *v9;
      if ( v10 >= 0 && CPools::ms_pObjectPool->m_aFlags[(unsigned int)v10 >> 8] == (unsigned __int8)v10 )
      {
        v11 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)v10 >> 8];
        if ( v11 )
          *((_DWORD *)v11 + 81) = *((_DWORD *)v11 + 81) & 0xFFCFFFFF | 0x100000;
      }
    }
  }
}
// 665664: using guessed type void *;

//----- (0032AD04) --------------------------------------------------------
void __fastcall CRunningScript::RemoveScriptFromList(CRunningScript *this, CRunningScript **ppList)
{
  if ( this->pPrevious )
    ppList = &this->pPrevious->pNext;
  *ppList = this->pNext;
  if ( this->pNext )
    this->pNext->pPrevious = this->pPrevious;
}

//----- (0032AD1C) --------------------------------------------------------
CRunningScript *__fastcall CTheScripts::StartNewScript(UInt8 *pStartPC)
{
  CRunningScript *v2; // r4
  CRunningScript *pPrevious; // r2

  v2 = CTheScripts::pIdleScripts;
  pPrevious = CTheScripts::pIdleScripts->pPrevious;
  if ( !pPrevious )
    pPrevious = (CRunningScript *)&CTheScripts::pIdleScripts;
  pPrevious->pNext = CTheScripts::pIdleScripts->pNext;
  if ( v2->pNext )
    v2->pNext->pPrevious = v2->pPrevious;
  v2->pNext = 0;
  v2->ActivateTime = 0;
  strcpy((char *)v2->ScriptName, "noname");
  *(_DWORD *)&v2->bActive = 0;
  v2->bIsThisAMiniGameScript = 0;
  v2->ScriptBrainType = -1;
  *(_QWORD *)((char *)&v2->PCStack[4] + 2) = 0LL;
  *(_QWORD *)((char *)&v2->PCStack[6] + 2) = 0LL;
  *(_QWORD *)&v2->PCStack[2] = 0LL;
  *(_QWORD *)&v2->PCStack[4] = 0LL;
  *(_QWORD *)&v2->BaseAddressOfThisScript = 0LL;
  *(_QWORD *)v2->PCStack = 0LL;
  memset(v2->Locals, 0, sizeof(v2->Locals));
  v2->DoneDeatharrest = 0;
  *(_DWORD *)&v2->AndOrState = 0x1000000;
  v2->EndOfScriptedCutscenePC = 0;
  v2->ThisMustBeTheOnlyMissionRunning = 0;
  v2->PCPointer = pStartPC;
  v2->pNext = CTheScripts::pActiveScripts;
  v2->pPrevious = 0;
  if ( CTheScripts::pActiveScripts )
    CTheScripts::pActiveScripts->pPrevious = v2;
  CTheScripts::pActiveScripts = v2;
  v2->bActive = 1;
  return v2;
}

//----- (0032ADE0) --------------------------------------------------------
CRunningScript *__fastcall CTheScripts::StartNewScript(UInt8 *pStartPC, UInt16 ScriptIndex)
{
  CRunningScript *v3; // r4
  bool v4; // zf
  CRunningScript **p_pNext; // r2

  v3 = (CRunningScript *)&CTheScripts::pIdleScripts;
  do
  {
    v3 = v3->pNext;
    v4 = v3 == 0;
    if ( v3 )
      v4 = v3 == &CTheScripts::ScriptsArray[ScriptIndex];
  }
  while ( !v4 );
  if ( v3 )
  {
    p_pNext = &v3->pPrevious->pNext;
    if ( !p_pNext )
      p_pNext = &CTheScripts::pIdleScripts;
    *p_pNext = v3->pNext;
    if ( v3->pNext )
      v3->pNext->pPrevious = v3->pPrevious;
    v3->pNext = 0;
    v3->ActivateTime = 0;
    strcpy((char *)v3->ScriptName, "noname");
    *(_DWORD *)&v3->bActive = 0;
    v3->bIsThisAMiniGameScript = 0;
    v3->ScriptBrainType = -1;
    *(_QWORD *)((char *)&v3->PCStack[4] + 2) = 0LL;
    *(_QWORD *)((char *)&v3->PCStack[6] + 2) = 0LL;
    *(_QWORD *)&v3->PCStack[2] = 0LL;
    *(_QWORD *)&v3->PCStack[4] = 0LL;
    *(_QWORD *)&v3->BaseAddressOfThisScript = 0LL;
    *(_QWORD *)v3->PCStack = 0LL;
    memset(v3->Locals, 0, sizeof(v3->Locals));
    v3->DoneDeatharrest = 0;
    *(_DWORD *)&v3->AndOrState = 0x1000000;
    v3->EndOfScriptedCutscenePC = 0;
    v3->ThisMustBeTheOnlyMissionRunning = 0;
    v3->PCPointer = pStartPC;
    v3->pNext = CTheScripts::pActiveScripts;
    v3->pPrevious = 0;
    if ( CTheScripts::pActiveScripts )
      CTheScripts::pActiveScripts->pPrevious = v3;
    CTheScripts::pActiveScripts = v3;
    v3->bActive = 1;
  }
  return v3;
}

//----- (0032AEC4) --------------------------------------------------------
UInt16 __fastcall CTheScripts::GetScriptIndexFromPointer(CRunningScript *pScript)
{
  return (unsigned int)((char *)pScript - (char *)CTheScripts::ScriptsArray) >> 8;
}

//----- (0032AED8) --------------------------------------------------------
void CTheScripts::Process()
{
  float v0; // s16
  unsigned int v1; // s16
  int v2; // r6
  intro_text_line *v3; // r11
  int v4; // r2
  intro_script_rectangle *v5; // r3
  CRunningScript *v6; // r4
  CRunningScript *pNext; // r5
  __int64 v8; // r0
  int IsThisAMissionScript; // r2
  CPedPool *v10; // r4
  int32 m_nSize; // r0
  int v12; // r6
  int v13; // r5
  uint8 *v14; // r1
  CPlayerPed *PlayerPed; // r0
  CPlayerPed *v16; // r4
  CPlayerInfo *PlayerInfoForThisPlayerPed; // r0
  CRGBA v18; // [sp+4h] [bp-44h] BYREF
  CRGBA v19; // [sp+8h] [bp-40h] BYREF
  CRGBA v20; // [sp+Ch] [bp-3Ch] BYREF

  v0 = CTimer::ms_fTimeStepNonClipped;
  CTheScripts::ScriptsUpdated = 0;
  CTheScripts::CommandsExecuted = 0;
  CUpsideDownCarCheck::UpdateTimers(&CTheScripts::UpsideDownCars);
  CStuckCarCheck::Process(&CTheScripts::StuckCars);
  CMissionCleanup::CheckIfCollisionHasLoadedForMissionObjects(&CTheScripts::MissionCleanUp);
  CTheScripts::DrawScriptSpheres();
  CTheScripts::ProcessAllSearchLights();
  CTheScripts::ProcessWaitingForScriptBrainArray();
  v1 = (unsigned int)(float)((float)(v0 / 50.0) * 1000.0);
  if ( CTheScripts::FailCurrentMission )
    --CTheScripts::FailCurrentMission;
  if ( CTheScripts::UseTextCommands )
  {
    v2 = 0;
    do
    {
      v3 = &CTheScripts::IntroTextLines[v2];
      CTheScripts::IntroTextLines[v2].ScriptTextXScale = 0.48;
      CTheScripts::IntroTextLines[v2].ScriptTextYScale = 1.12;
      CRGBA::CRGBA(&v20, 0xE1u, 0xE1u, 0xE1u, 0xFFu);
      v3->ScriptTextColor = v20;
      v3->ScriptTextRightJustify = 0;
      *(_DWORD *)&v3->ScriptTextJustify = 0;
      v3->ScriptTextWrapX = 182.0;
      v3->ScriptTextCentreSize = 640.0;
      CRGBA::CRGBA(&v19, 0x80u, 0x80u, 0x80u, 0x80u);
      v3->ScriptTextBackgrndColor = v19;
      v3->ScriptTextProportional = 1;
      CRGBA::CRGBA(&v18, 0, 0, 0, 0xFFu);
      ++v2;
      v3->ScriptTextDropShadowColour = v18;
      *(_QWORD *)&v3->ScriptTextAtX = 0LL;
      *(_QWORD *)v3->ScriptTextLabel = 0LL;
      v3->ScriptTextBeforeFade = 0;
      *(_WORD *)&v3->ScriptTextDropShadow = 2;
      v3->ScriptTextFontStyle = 1;
      v3->NumberToInsert1 = -1;
      v3->NumberToInsert2 = -1;
    }
    while ( v2 != 96 );
    v4 = 0;
    CTheScripts::NumberOfIntroTextLinesThisFrame = 0;
    do
    {
      CTheScripts::IntroRectangles[v4].eWindowType = WINDOW_NONE;
      v5 = &CTheScripts::IntroRectangles[v4++];
      v5->ScriptRectBeforeFade = 0;
    }
    while ( v4 != 128 );
    CTheScripts::NumberOfIntroRectanglesThisFrame = 0;
    if ( CTheScripts::UseTextCommands == 1 )
      CTheScripts::UseTextCommands = 0;
  }
  switch ( AllowMissionReplay )
  {
    case 2:
      AllowMissionReplay = 3;
      CTheScripts::Process(void)::TimeToWaitTill = CTimer::m_snTimeInMilliseconds + 4000;
      goto LABEL_16;
    case 3:
      if ( CTheScripts::Process(void)::TimeToWaitTill < CTimer::m_snTimeInMilliseconds )
        AllowMissionReplay = 4;
      goto LABEL_16;
    case 4:
      AllowMissionReplay = 5;
      Menu_ShowMissionRetry();
      goto LABEL_16;
    case 6:
      CTheScripts::Process(void)::RestoredHealth = 0;
      AllowMissionReplay = 7;
      CTheScripts::Process(void)::TimeToWaitTill = CTimer::m_snTimeInMilliseconds + 500;
      goto LABEL_16;
    case 7:
      if ( !CTheScripts::Process(void)::RestoredHealth )
      {
        CTheScripts::Process(void)::RestoredHealth = 1;
        PlayerPed = FindPlayerPed(-1);
        v16 = PlayerPed;
        if ( PlayerPed )
        {
          PlayerInfoForThisPlayerPed = CPlayerPed::GetPlayerInfoForThisPlayerPed(PlayerPed);
          if ( PlayerInfoForThisPlayerPed )
            v16->m_nHealth = (float)PlayerInfoForThisPlayerPed->MaxHealth;
        }
      }
      AllowMissionReplay = 0;
      return;
    default:
LABEL_16:
      v6 = CTheScripts::pActiveScripts;
      CTheScripts::LocalVariablesForCurrentMission[40] += v1;
      CTheScripts::LocalVariablesForCurrentMission[41] += v1;
      CLoadingScreen::NewChunkLoaded();
      if ( !v6 )
        goto LABEL_23;
      break;
  }
  do
  {
    ++CTheScripts::ScriptsUpdated;
    pNext = v6->pNext;
    v8 = *(_QWORD *)&v6->Locals[40];
    IsThisAMissionScript = v6->IsThisAMissionScript;
    HIDWORD(v8) += v1;
    LODWORD(v8) = v8 + v1;
    *(_QWORD *)&v6->Locals[40] = v8;
    if ( IsThisAMissionScript && skipMissionStartCount >= 1 )
    {
      --skipMissionStartCount;
      if ( !pNext )
        break;
    }
    else
    {
      CRunningScript::Process(v6);
      if ( !pNext )
        break;
    }
    v6 = pNext;
  }
  while ( pNext->bActive );
LABEL_23:
  DoingCheckpointLoad = 0;
  CLoadingScreen::NewChunkLoaded();
  v10 = CPools::ms_pPedPool;
  m_nSize = CPools::ms_pPedPool->m_nSize;
  if ( m_nSize )
  {
    v12 = m_nSize - 1;
    v13 = 1996 * m_nSize - 908;
    do
    {
      if ( (v10->m_aFlags[v12] & 0x80u) == 0 )
      {
        v14 = &(*v10->m_aStorage)[v13];
        if ( v14 != (uint8 *)&elf_hash_bucket[209] && v14[8] == 2 )
          CPedIntelligence::RecordEventForScript(*(CPedIntelligence **)&(*v10->m_aStorage)[v13], 0, 0);
      }
      --v12;
      v13 -= 1996;
    }
    while ( v12 != -1 );
  }
}
// FC: using guessed type int elf_hash_bucket[16411];
// 81A98C: using guessed type char CTheScripts::Process(void)::RestoredHealth;

//----- (0032B308) --------------------------------------------------------
Bool8 __fastcall CRunningScript::Process(CRunningScript *this)
{
  Int32 EndOfScriptedCutscenePC; // r0
  UInt8 *v3; // r0
  unsigned int StackDepth; // r0
  UInt8 *v5; // r0
  Int8 (__fastcall *v6)(CRunningScript *, Int32); // r2
  UInt8 *PCPointer; // r0
  __int16 v8; // t1
  unsigned int v9; // r1
  CRunningScript *v10; // r0
  char *v11; // r2
  int v12; // r3

  if ( this->EndOfScriptedCutscenePC && CCutsceneMgr::IsCutsceneSkipButtonBeingPressed() )
  {
    CHud::m_BigMessage[1][0] = 0;
    EndOfScriptedCutscenePC = this->EndOfScriptedCutscenePC;
    if ( EndOfScriptedCutscenePC <= -1 )
      v3 = &this->BaseAddressOfThisScript[-EndOfScriptedCutscenePC];
    else
      v3 = &CTheScripts::ScriptSpace[EndOfScriptedCutscenePC];
    this->EndOfScriptedCutscenePC = 0;
    this->PCPointer = v3;
    this->ActivateTime = 0;
  }
  if ( this->IsThisAMissionScript )
    CRunningScript::DoDeatharrestCheck(this);
  if ( this->ThisMustBeTheOnlyMissionRunning && CTheScripts::FailCurrentMission == 1 )
  {
    StackDepth = this->StackDepth;
    if ( StackDepth < 2 )
    {
      if ( StackDepth != 1 )
        goto LABEL_15;
    }
    else
    {
      this->StackDepth = 1;
    }
    v5 = this->PCStack[0];
    this->StackDepth = 0;
    this->PCPointer = v5;
  }
LABEL_15:
  CTheScripts::ReinitialiseSwitchStatementData();
  if ( CTimer::m_snTimeInMilliseconds >= this->ActivateTime )
  {
    do
    {
      v6 = CRunningScript::ProcessCommands2600To2699;
      ++CTheScripts::CommandsExecuted;
      PCPointer = this->PCPointer;
      v8 = *(_WORD *)PCPointer;
      this->PCPointer = PCPointer + 2;
      v9 = v8 & 0x7FFF;
      this->NotForLatestExpression = (v8 & 0x8000) != 0;
      v10 = this;
      if ( v9 <= 0xA8B )
      {
        v11 = (char *)CRunningScript::ProcessOneCommand(void)::processCommandFuncs
            + (((unsigned int)((1374389535 * (unsigned __int64)v9) >> 32) >> 2) & 0x3FFFFFF8);
        v12 = *((_DWORD *)v11 + 1);
        v6 = *(Int8 (__fastcall **)(CRunningScript *, Int32))v11;
        v10 = (CRunningScript *)((char *)this + (v12 >> 1));
      }
    }
    while ( !v6(v10, v9) );
  }
  return 0;
}

//----- (0032B428) --------------------------------------------------------
void CTheScripts::StartTestScript()
{
  CRunningScript *v0; // r4
  CRunningScript *pPrevious; // r2

  v0 = CTheScripts::pIdleScripts;
  pPrevious = CTheScripts::pIdleScripts->pPrevious;
  if ( !pPrevious )
    pPrevious = (CRunningScript *)&CTheScripts::pIdleScripts;
  pPrevious->pNext = CTheScripts::pIdleScripts->pNext;
  if ( v0->pNext )
    v0->pNext->pPrevious = v0->pPrevious;
  v0->pNext = 0;
  v0->ActivateTime = 0;
  strcpy((char *)v0->ScriptName, "noname");
  *(_DWORD *)&v0->bActive = 0;
  v0->bIsThisAMiniGameScript = 0;
  v0->ScriptBrainType = -1;
  *(_QWORD *)((char *)&v0->PCStack[4] + 2) = 0LL;
  *(_QWORD *)((char *)&v0->PCStack[6] + 2) = 0LL;
  *(_QWORD *)&v0->PCStack[2] = 0LL;
  *(_QWORD *)&v0->PCStack[4] = 0LL;
  *(_QWORD *)&v0->BaseAddressOfThisScript = 0LL;
  *(_QWORD *)v0->PCStack = 0LL;
  memset(v0->Locals, 0, sizeof(v0->Locals));
  v0->DoneDeatharrest = 0;
  *(_DWORD *)&v0->AndOrState = 0x1000000;
  v0->EndOfScriptedCutscenePC = 0;
  v0->ThisMustBeTheOnlyMissionRunning = 0;
  v0->PCPointer = CTheScripts::ScriptSpace;
  v0->pNext = CTheScripts::pActiveScripts;
  v0->pPrevious = 0;
  if ( CTheScripts::pActiveScripts )
    CTheScripts::pActiveScripts->pPrevious = v0;
  CTheScripts::pActiveScripts = v0;
  v0->bActive = 1;
}

//----- (0032B4E8) --------------------------------------------------------
bool CTheScripts::IsPlayerOnAMission()
{
  return CTheScripts::OnAMissionFlag && *(_DWORD *)&CTheScripts::ScriptSpace[CTheScripts::OnAMissionFlag] == 1;
}

//----- (0032B510) --------------------------------------------------------
Bool8 __fastcall CRunningScript::IsPedDead(CRunningScript *this, CPed *pPed)
{
  ePedState m_nPedState; // r1

  m_nPedState = pPed->m_nPedState;
  return (m_nPedState & 0xFFFFFFFE) == 54 || m_nPedState == PED_DIE_BY_STEALTH;
}

//----- (0032B52C) --------------------------------------------------------
void __fastcall CRunningScript::GivePedScriptedTask(
        CRunningScript *this,
        int32 iPedID,
        CTask *pTask,
        int32 CurrCommand)
{
  int v7; // r3
  unsigned int v8; // r1
  uint8 *v9; // r6
  CPedGroup *PedsGroup; // r9
  unsigned int ScriptBrainType; // r0
  uint8 *v12; // r1
  Int32 *Locals; // r1
  unsigned int v14; // r2
  int v15; // r4
  unsigned int v16; // r2
  bool v17; // zf
  int VacantSlot; // r0
  const CEventScriptCommand *v19; // r4
  int v20; // r0
  const CTask *TaskScriptCommand; // r9
  int v22; // r0
  CEventScriptCommand v23[2]; // [sp+0h] [bp-30h] BYREF

  if ( iPedID == -1 )
  {
    sub_18ACE8(&CTaskSequences::ms_taskSequence[CTaskSequences::ms_iActiveSequence], pTask);
    return;
  }
  if ( iPedID >= 0
    && (v7 = (unsigned __int8)iPedID, v8 = (unsigned int)iPedID >> 8, CPools::ms_pPedPool->m_aFlags[v8] == v7) )
  {
    v9 = CPools::ms_pPedPool->m_aStorage[v8];
  }
  else
  {
    v9 = 0;
  }
  PedsGroup = CPedGroups::GetPedsGroup((const CPed *)v9);
  ScriptBrainType = (unsigned __int8)this->ScriptBrainType;
  v12 = 0;
  if ( ScriptBrainType <= 5 && ((1 << ScriptBrainType) & 0x2D) != 0 )
  {
    Locals = CTheScripts::LocalVariablesForCurrentMission;
    if ( !this->ThisMustBeTheOnlyMissionRunning )
      Locals = this->Locals;
    v14 = *Locals;
    if ( *Locals >= 0 && (v15 = (unsigned __int8)v14, v16 = v14 >> 8, CPools::ms_pPedPool->m_aFlags[v16] == v15) )
      v12 = CPools::ms_pPedPool->m_aStorage[v16];
    else
      v12 = 0;
  }
  v17 = v12 == v9;
  if ( v12 != v9 )
    v17 = (*((_DWORD *)v9 + 291) & 0x800000) == 0;
  if ( v17 )
  {
    if ( v12 && ScriptBrainType == 5 )
    {
      if ( CScriptedBrainTaskStore::SetTask((CPed *)v9, pTask) )
      {
        VacantSlot = CPedScriptedTaskRecord::GetVacantSlot();
        sub_193830(&CPedScriptedTaskRecord::ms_scriptedTasks[VacantSlot], (CPed *)v9, CurrCommand, pTask);
      }
    }
    else
    {
      if ( PedsGroup && !CPed::IsPlayer((const CPed *)v9) )
      {
        CPedGroupIntelligence::SetScriptCommandTask(&PedsGroup->m_intelligence, (CPed *)v9, pTask);
        TaskScriptCommand = CPedGroupIntelligence::GetTaskScriptCommand(&PedsGroup->m_intelligence, (CPed *)v9);
        v22 = CPedScriptedTaskRecord::GetVacantSlot();
        CPedScriptedTaskRecordData::SetAsGroupTask(
          &CPedScriptedTaskRecord::ms_scriptedTasks[v22],
          (CPed *)v9,
          CurrCommand,
          TaskScriptCommand);
        goto LABEL_19;
      }
      CEventScriptCommand::CEventScriptCommand(v23, 3, pTask, 0);
      v19 = (const CEventScriptCommand *)CEventGroup::Add((CEventGroup *)(*((_DWORD *)v9 + 272) + 104), v23, 0);
      if ( v19 )
      {
        v20 = CPedScriptedTaskRecord::GetVacantSlot();
        CPedScriptedTaskRecordData::Set(&CPedScriptedTaskRecord::ms_scriptedTasks[v20], (CPed *)v9, CurrCommand, v19);
      }
      CEventScriptCommand::~CEventScriptCommand(v23);
    }
  }
  else if ( pTask )
  {
LABEL_19:
    (*((void (__fastcall **)(CTask *))pTask->_vptr$CTask + 1))(pTask);
  }
}

//----- (0032B6E8) --------------------------------------------------------
void __fastcall CRunningScript::UpdatePC(CRunningScript *this, Int32 NewPCValue)
{
  if ( NewPCValue <= -1 )
    this->PCPointer = &this->BaseAddressOfThisScript[-NewPCValue];
  else
    this->PCPointer = &CTheScripts::ScriptSpace[NewPCValue];
}

//----- (0032B708) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessOneCommand(CRunningScript *this)
{
  UInt8 *PCPointer; // r2
  __int16 v2; // t1
  unsigned int v3; // r1
  int *v5; // r3

  ++CTheScripts::CommandsExecuted;
  PCPointer = this->PCPointer;
  v2 = *(_WORD *)PCPointer;
  this->PCPointer = PCPointer + 2;
  v3 = v2 & 0x7FFF;
  this->NotForLatestExpression = (v2 & 0x8000) != 0;
  if ( v3 > 0xA8B )
    return CRunningScript::ProcessCommands2600To2699(this, v3);
  v5 = (int *)((char *)CRunningScript::ProcessOneCommand(void)::processCommandFuncs
             + (((unsigned int)((1374389535 * (unsigned __int64)v3) >> 32) >> 2) & 0x3FFFFFF8));
  return ((int (__fastcall *)(char *))*v5)((char *)this + (v5[1] >> 1));
}

//----- (0032B774) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands0To99(CRunningScript *this, Int32 CurrCommand)
{
  Int8 v3; // r6
  Int32 *v4; // r5
  Int32 v5; // r0
  Int32 v6; // r1
  Int32 *v7; // r5
  float v8; // s0
  float v9; // s2
  Int32 *v10; // r5
  Int32 v11; // r0
  Int32 v12; // r1
  Int32 *v13; // r5
  float v14; // s0
  float v15; // s2
  Int32 *v16; // r5
  Int32 v17; // r0
  Int32 v18; // r1
  Int32 *v19; // r5
  Int32 *v20; // r0
  Int32 *v21; // r5
  Int32 v22; // r0
  Int32 v23; // r1
  Int32 *v24; // r5
  bool v25; // fzf
  Int32 *v26; // r5
  Int32 v27; // r0
  Int32 v28; // r1
  Int32 *v29; // r5
  Int32 v30; // r0
  Int32 *PointerToScriptVariable; // r5
  Int32 *v32; // r5
  Int32 *v33; // r5
  Int32 *v34; // r5
  Int32 *v35; // r5
  Int32 *v36; // r5
  Int32 *v37; // r5
  bool v38; // zf
  bool v39; // nf
  bool v40; // vf
  Int32 *v41; // r5
  bool v42; // fzf
  bool v43; // fnf
  bool v44; // r1
  Int32 *v45; // r5
  bool v46; // nf
  bool v47; // vf
  Int32 *v48; // r5
  bool v49; // fnf
  Int32 *v50; // r5
  bool v51; // zf
  Int32 *v52; // r5
  CRunningScript *pPrevious; // r2
  bool v55; // zf
  CRunningScript *v56; // r5
  CRunningScript *v57; // r6
  Int32 v58; // r1
  UInt8 *v59; // r8
  int StackDepth; // r1
  UInt8 *PCPointer; // r2
  UInt16 v62; // r0
  UInt8 *v63; // r0
  int32 v64; // r5
  CPlayerInfo *v65; // r6
  float GroundZForCoord; // s20
  RwReal v67; // s16
  RwReal v68; // s18
  float DistanceFromCentreOfMassToBaseOfModel; // s0
  CEntity *pPed; // r0
  float v71; // s0
  CMatrix *m_pMat; // r1
  float *p_tz; // r0
  CEntity *v74; // r1
  CPedIntelligence *m_pPedIntelligence; // r5
  CTaskSimplePlayerOnFoot *v76; // r4
  CVector Coors; // [sp+4h] [bp-34h] BYREF

  v3 = 0;
  switch ( CurrCommand )
  {
    case 0:
      return v3;
    case 1:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] == 1234 )
        return 0;
      v3 = 1;
      this->ActivateTime = ScriptParams[0] + CTimer::m_snTimeInMilliseconds;
      return v3;
    case 2:
      CRunningScript::CollectParameters(this, 1);
      v30 = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        goto LABEL_92;
      goto LABEL_91;
    case 3:
      CRunningScript::CollectParameters(this, 1);
      CamShakeNoPos(&TheCamera, (float)ScriptParams[0] * 0.001);
      return 0;
    case 4:
    case 5:
    case 6:
    case 7:
      v3 = 0;
      PointerToScriptVariable = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      *PointerToScriptVariable = ScriptParams[0];
      return v3;
    case 8:
    case 10:
      v3 = 0;
      v16 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      v18 = *v16;
      v17 = ScriptParams[0];
      goto LABEL_19;
    case 9:
    case 11:
      v3 = 0;
      v19 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      v20 = ScriptParams;
      goto LABEL_21;
    case 12:
    case 14:
      v3 = 0;
      v26 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      v28 = *v26;
      v27 = ScriptParams[0];
      goto LABEL_23;
    case 13:
    case 15:
      v3 = 0;
      v32 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      *(float *)v32 = *(float *)v32 - *(float *)ScriptParams;
      return v3;
    case 16:
    case 18:
      v3 = 0;
      v33 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      *v33 *= ScriptParams[0];
      return v3;
    case 17:
    case 19:
      v3 = 0;
      v34 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      *(float *)v34 = *(float *)ScriptParams * *(float *)v34;
      return v3;
    case 20:
    case 22:
      v3 = 0;
      v35 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      *v35 /= ScriptParams[0];
      return v3;
    case 21:
    case 23:
      v3 = 0;
      v36 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      *(float *)v36 = *(float *)v36 / *(float *)ScriptParams;
      return v3;
    case 24:
    case 25:
      v3 = 0;
      v37 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      v6 = *v37;
      v5 = ScriptParams[0];
      goto LABEL_31;
    case 26:
    case 27:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      v5 = *CRunningScript::GetPointerToScriptVariable(this, 0);
      v6 = ScriptParams[0];
      goto LABEL_31;
    case 28:
    case 29:
    case 30:
    case 31:
      v3 = 0;
      v4 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v5 = *CRunningScript::GetPointerToScriptVariable(this, 0);
      v6 = *v4;
LABEL_31:
      v40 = __OFSUB__(v6, v5);
      v38 = v6 == v5;
      v39 = v6 - v5 < 0;
      goto LABEL_36;
    case 32:
    case 33:
      v3 = 0;
      v41 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      v42 = *(float *)v41 == *(float *)ScriptParams;
      v43 = *(float *)v41 < *(float *)ScriptParams;
      goto LABEL_35;
    case 34:
    case 35:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      v8 = *(float *)CRunningScript::GetPointerToScriptVariable(this, 0);
      v9 = *(float *)ScriptParams;
      goto LABEL_34;
    case 36:
    case 37:
    case 38:
    case 39:
      v3 = 0;
      v7 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v8 = *(float *)CRunningScript::GetPointerToScriptVariable(this, 0);
      v9 = *(float *)v7;
LABEL_34:
      v42 = v9 == v8;
      v43 = v9 < v8;
LABEL_35:
      v40 = 0;
      v38 = v42;
      v39 = v43;
LABEL_36:
      v44 = !(v39 ^ v40 | v38);
      goto LABEL_51;
    case 40:
    case 41:
      v3 = 0;
      v45 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      v12 = *v45;
      v11 = ScriptParams[0];
      goto LABEL_39;
    case 42:
    case 43:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      v11 = *CRunningScript::GetPointerToScriptVariable(this, 0);
      v12 = ScriptParams[0];
      goto LABEL_39;
    case 44:
    case 45:
    case 46:
    case 47:
      v3 = 0;
      v10 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v11 = *CRunningScript::GetPointerToScriptVariable(this, 0);
      v12 = *v10;
LABEL_39:
      v47 = __OFSUB__(v12, v11);
      v46 = v12 - v11 < 0;
      goto LABEL_44;
    case 48:
    case 49:
      v3 = 0;
      v48 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      v49 = *(float *)v48 < *(float *)ScriptParams;
      goto LABEL_43;
    case 50:
    case 51:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      v14 = *(float *)CRunningScript::GetPointerToScriptVariable(this, 0);
      v15 = *(float *)ScriptParams;
      goto LABEL_42;
    case 52:
    case 53:
    case 54:
    case 55:
      v3 = 0;
      v13 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v14 = *(float *)CRunningScript::GetPointerToScriptVariable(this, 0);
      v15 = *(float *)v13;
LABEL_42:
      v49 = v15 < v14;
LABEL_43:
      v47 = 0;
      v46 = v49;
LABEL_44:
      v44 = v46 == v47;
      goto LABEL_51;
    case 56:
    case 57:
      v3 = 0;
      v50 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      v23 = *v50;
      v22 = ScriptParams[0];
      goto LABEL_46;
    case 58:
    case 59:
    case 60:
      v3 = 0;
      v21 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v22 = *CRunningScript::GetPointerToScriptVariable(this, 0);
      v23 = *v21;
LABEL_46:
      v51 = v23 == v22;
      goto LABEL_50;
    case 66:
    case 67:
      v3 = 0;
      v52 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      v25 = *(float *)v52 == *(float *)ScriptParams;
      goto LABEL_49;
    case 68:
    case 69:
    case 70:
      v3 = 0;
      v24 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v25 = *(float *)v24 == *(float *)CRunningScript::GetPointerToScriptVariable(this, 0);
LABEL_49:
      v51 = v25;
LABEL_50:
      v44 = v51;
LABEL_51:
      CRunningScript::UpdateCompareFlag(this, v44);
      return v3;
    case 77:
      CRunningScript::CollectParameters(this, 1);
      if ( this->CmpFlag )
        return 0;
      v30 = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
LABEL_92:
        v63 = &this->BaseAddressOfThisScript[-v30];
      else
LABEL_91:
        v63 = &CTheScripts::ScriptSpace[v30];
LABEL_93:
      this->PCPointer = v63;
      return 0;
    case 78:
      if ( this->ThisMustBeTheOnlyMissionRunning )
        CTheScripts::bAlreadyRunningAMissionScript = 0;
      pPrevious = this->pPrevious;
      if ( !pPrevious )
        pPrevious = (CRunningScript *)&CTheScripts::pActiveScripts;
      pPrevious->pNext = this->pNext;
      if ( this->pNext )
        this->pNext->pPrevious = this->pPrevious;
      this->pNext = CTheScripts::pIdleScripts;
      this->pPrevious = 0;
      if ( CTheScripts::pIdleScripts )
        CTheScripts::pIdleScripts->pPrevious = this;
      CTheScripts::pIdleScripts = this;
      CRunningScript::ShutdownThisScript(this);
      if ( !this->ThisMustBeTheOnlyMissionRunning || !strcmp((const char *)this->ScriptName, "catalin") )
        return 1;
      if ( CWorld::Players[CWorld::PlayerInFocus].pPed->m_nPedState != PED_DEAD )
      {
        v55 = CWorld::Players[CWorld::PlayerInFocus].PlayerState == 0;
        if ( !CWorld::Players[CWorld::PlayerInFocus].PlayerState )
          v55 = this->DoneDeatharrest == 0;
        if ( v55 && !AllowMissionReplay && missionReplaySetting )
          SaveGameForPause(eTeminateSave, 0);
      }
      if ( DoMissionCleanup )
      {
        DoMissionCleanup = 0;
        CMissionCleanup::Process(&CTheScripts::MissionCleanUp);
      }
      v3 = 1;
      IsOddJob = 0;
      return v3;
    case 79:
      CRunningScript::CollectParameters(this, 1);
      v56 = CTheScripts::pIdleScripts;
      v57 = CTheScripts::pIdleScripts->pPrevious;
      v58 = ScriptParams[0];
      if ( !v57 )
        v57 = (CRunningScript *)&CTheScripts::pIdleScripts;
      v57->pNext = CTheScripts::pIdleScripts->pNext;
      v59 = &CTheScripts::ScriptSpace[v58];
      if ( v56->pNext )
        v56->pNext->pPrevious = v56->pPrevious;
      v56->pNext = 0;
      v56->ActivateTime = 0;
      strcpy((char *)v56->ScriptName, "noname");
      *(_DWORD *)&v56->bActive = 0;
      v56->bIsThisAMiniGameScript = 0;
      v56->ScriptBrainType = -1;
      *(_QWORD *)((char *)&v56->PCStack[4] + 2) = 0LL;
      *(_QWORD *)((char *)&v56->PCStack[6] + 2) = 0LL;
      *(_QWORD *)&v56->PCStack[2] = 0LL;
      *(_QWORD *)&v56->PCStack[4] = 0LL;
      *(_QWORD *)&v56->BaseAddressOfThisScript = 0LL;
      *(_QWORD *)v56->PCStack = 0LL;
      memset(v56->Locals, 0, sizeof(v56->Locals));
      v56->DoneDeatharrest = 0;
      *(_DWORD *)&v56->AndOrState = 0x1000000;
      v56->EndOfScriptedCutscenePC = 0;
      v56->ThisMustBeTheOnlyMissionRunning = 0;
      v56->PCPointer = v59;
      v56->pNext = CTheScripts::pActiveScripts;
      v56->pPrevious = 0;
      if ( CTheScripts::pActiveScripts )
        CTheScripts::pActiveScripts->pPrevious = v56;
      CTheScripts::pActiveScripts = v56;
      v56->bActive = 1;
      CRunningScript::ReadParametersForNewlyStartedScript(this, v56);
      return 0;
    case 80:
      CRunningScript::CollectParameters(this, 1);
      StackDepth = this->StackDepth;
      PCPointer = this->PCPointer;
      this->StackDepth = StackDepth + 1;
      this->PCStack[StackDepth] = PCPointer;
      v30 = ScriptParams[0];
      if ( ScriptParams[0] > -1 )
        goto LABEL_91;
      goto LABEL_92;
    case 81:
      v62 = this->StackDepth - 1;
      this->StackDepth = v62;
      v63 = this->PCStack[v62];
      goto LABEL_93;
    case 82:
      CRunningScript::CollectParameters(this, 6);
      return 0;
    case 83:
      CRunningScript::CollectParameters(this, 4);
      v64 = ScriptParams[0];
      if ( CStreaming::ms_aInfoForModel[0].m_status != 1 )
      {
        CStreaming::RequestSpecialModel(0, "player", 26);
        CStreaming::LoadAllRequestedModels(1);
      }
      CPlayerPed::SetupPlayerPed(v64);
      CPed::SetCharCreatedBy(CWorld::Players[v64].pPed, 2u);
      CPlayerPed::DeactivatePlayerPed(v64);
      v65 = &CWorld::Players[v64];
      GroundZForCoord = *(float *)&ScriptParams[3];
      v67 = *(float *)&ScriptParams[1];
      v68 = *(float *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      DistanceFromCentreOfMassToBaseOfModel = CEntity::GetDistanceFromCentreOfMassToBaseOfModel(v65->pPed);
      pPed = v65->pPed;
      v71 = GroundZForCoord + DistanceFromCentreOfMassToBaseOfModel;
      m_pMat = v65->pPed->m_pMat;
      if ( m_pMat )
      {
        m_pMat->tx = v67;
        pPed->m_pMat->ty = v68;
        p_tz = &pPed->m_pMat->tz;
      }
      else
      {
        pPed->m_transform.m_translate.x = v67;
        pPed->m_transform.m_translate.y = v68;
        p_tz = &pPed->m_transform.m_translate.z;
      }
      *p_tz = v71;
      v74 = v65->pPed;
      Coors.y = v68;
      Coors.x = v67;
      Coors.z = v71;
      CTheScripts::ClearSpaceForMissionEntity(&Coors, v74);
      CPlayerPed::ReactivatePlayerPed(v64);
      ScriptParams[0] = v64;
      CRunningScript::StoreParameters(this, 1);
      m_pPedIntelligence = v65->pPed->m_pPedIntelligence;
      v76 = (CTaskSimplePlayerOnFoot *)CTask::operator new(0x34u);
      CTaskSimplePlayerOnFoot::CTaskSimplePlayerOnFoot(v76);
      v3 = 0;
      CTaskManager::SetTask(&m_pPedIntelligence->m_taskManager, v76, 4, 0);
      return v3;
    case 88:
    case 90:
    case 92:
    case 94:
      v3 = 0;
      v16 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v17 = *CRunningScript::GetPointerToScriptVariable(this, 0);
      v18 = *v16;
LABEL_19:
      *v16 = v17 + v18;
      return v3;
    case 89:
    case 91:
    case 93:
    case 95:
      v3 = 0;
      v19 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v20 = CRunningScript::GetPointerToScriptVariable(this, 0);
LABEL_21:
      *(float *)v19 = *(float *)v20 + *(float *)v19;
      return v3;
    case 96:
    case 98:
      v3 = 0;
      v26 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v27 = *CRunningScript::GetPointerToScriptVariable(this, 0);
      v28 = *v26;
LABEL_23:
      *v26 = v28 - v27;
      return v3;
    case 97:
    case 99:
      v3 = 0;
      v29 = CRunningScript::GetPointerToScriptVariable(this, 0);
      *(float *)v29 = *(float *)v29 - *(float *)CRunningScript::GetPointerToScriptVariable(this, 0);
      return v3;
    default:
      return -1;
  }
}
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 677DD0: using guessed type CStreamingInfo (*CStreaming::ms_aInfoForModel)[26316];

//----- (0032C3E8) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands100To199(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  Int8 v5; // r6
  Int32 *v6; // r5
  Int32 *v7; // r5
  Int32 *v8; // r5
  Int32 *v9; // r5
  Int32 *v10; // r5
  Int32 *v11; // r5
  Int32 *v12; // r5
  Int32 *PointerToScriptVariable; // r5
  Int32 *v14; // r5
  float v15; // s0
  Int32 *v16; // r0
  int v17; // r1
  float *v18; // r0
  Int32 v19; // r0
  uint8 *v20; // r0
  const CPlaceable *v21; // r0
  GxtChar *v22; // r5
  int v23; // r0
  bool v24; // zf
  int v25; // r0
  Int32 GameClockMinutesUntil; // r0
  Int32 *v27; // r5
  Int32 *v28; // r0
  Int32 *v29; // r5
  float v30; // s0
  Int32 *v31; // r4
  Int32 *v32; // r4
  CPed *v33; // r0
  uint8 *v34; // r0
  bool v35; // zf
  int v36; // r1
  int v37; // r1
  uint8 *v38; // r2
  CPed *v39; // r1
  uint8 *v40; // r0
  uint8 *v41; // r6
  int IsWithinArea; // r0
  Bool8 v43; // r1
  uint8 *v44; // r0
  uint8 *v45; // r6
  int v46; // r0
  Bool8 v47; // r1
  CVehicle *CarForScript; // r0
  CRunningScript *v49; // r0
  Int16 v50; // r1
  unsigned int v51; // r2
  CEntity *v52; // r5
  int v53; // r10
  int v54; // r5
  Int32 *v55; // r4
  unsigned int v56; // r9
  int v57; // r0
  bool v58; // zf
  int v59; // r2
  unsigned int *v60; // r1
  uint8 *v61; // r0
  bool v62; // zf
  unsigned int v63; // r3
  uint8 *v64; // r4
  uint8 *v65; // r0
  CVehicle *v66; // r0
  uint8 *v67; // r0
  uint8 *v68; // r0
  int v69; // r3
  int v70; // r2
  unsigned int v71; // r1
  const CPlaceable *v72; // r0
  GxtChar *v73; // r5
  GxtChar *v74; // r5
  int v75; // r0
  bool v76; // zf
  int v77; // r0
  __int64 v78; // r0
  float v79; // s0
  RwReal v80; // s16
  RwReal v81; // s18
  bool IsSphereVisible; // r0
  int v83; // r0
  Bool8 v84; // r1
  int v85; // r10
  int v86; // r5
  Int32 *v87; // r4
  unsigned int v88; // r9
  int v89; // r0
  bool v90; // zf
  int v91; // r2
  unsigned int *v92; // r1
  uint8 *v93; // r0
  bool v94; // zf
  unsigned int v95; // r3
  float v96; // s20
  RwReal v97; // s16
  RwReal v98; // s18
  int v99; // r0
  unsigned __int8 v100; // r1
  char v101; // r0
  unsigned int v102; // r3
  int v103; // r1
  int v104; // r2
  int v105; // r1
  uint8 *v106; // r3
  RwReal v107; // r1
  int v108; // r1
  unsigned int v109; // r2
  int v110; // r0
  Bool8 v111; // r1
  int v112; // r0
  __int64 v113; // d16
  unsigned int v115; // r3
  uint8 v116; // r6
  unsigned int v117; // r3
  CCopPed *v118; // r5
  int v119; // r6
  CEmergencyPed *v120; // r0
  CPedIntelligence *m_pPedIntelligence; // r8
  CTaskSimpleStandStill *v122; // r6
  float GroundZForCoord; // s0
  RwReal v124; // s18
  RwReal v125; // s16
  float v126; // s0
  CMatrix *m_pMat; // r0
  float *p_tz; // r0
  CMatrix *v129; // r0
  float tx; // s16
  float ty; // s18
  float tz; // s20
  float *p_xx; // r0
  float v134; // s2
  float v135; // s4
  Int32 v136; // r1
  Int32 *p_Id; // r0
  int v138; // r2
  CVector posn; // [sp+10h] [bp-58h] BYREF
  Char pStringToFill[8]; // [sp+22h] [bp-46h] BYREF

  v5 = 0;
  switch ( CurrCommand )
  {
    case 100:
    case 102:
      v5 = 0;
      PointerToScriptVariable = CRunningScript::GetPointerToScriptVariable(this, 0);
      *PointerToScriptVariable -= *CRunningScript::GetPointerToScriptVariable(this, 0);
      return v5;
    case 101:
    case 103:
      v5 = 0;
      v14 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v15 = *(float *)CRunningScript::GetPointerToScriptVariable(this, 0);
      goto LABEL_47;
    case 104:
    case 106:
    case 108:
    case 110:
      v5 = 0;
      v7 = CRunningScript::GetPointerToScriptVariable(this, 0);
      *v7 *= *CRunningScript::GetPointerToScriptVariable(this, 0);
      return v5;
    case 105:
    case 107:
    case 109:
    case 111:
      v5 = 0;
      v8 = CRunningScript::GetPointerToScriptVariable(this, 0);
      *(float *)v8 = *(float *)CRunningScript::GetPointerToScriptVariable(this, 0) * *(float *)v8;
      return v5;
    case 112:
    case 116:
    case 118:
      v5 = 0;
      v12 = CRunningScript::GetPointerToScriptVariable(this, 0);
      *v12 /= *CRunningScript::GetPointerToScriptVariable(this, 0);
      return v5;
    case 113:
    case 115:
    case 117:
    case 119:
      v5 = 0;
      v9 = CRunningScript::GetPointerToScriptVariable(this, 0);
      *(float *)v9 = *(float *)v9 / *(float *)CRunningScript::GetPointerToScriptVariable(this, 0);
      return v5;
    case 114:
      v5 = 0;
      v27 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v28 = CRunningScript::GetPointerToScriptVariable(this, 0);
      if ( !*v28 )
        return v5;
      *v27 /= *v28;
      return 0;
    case 120:
    case 121:
      v5 = 0;
      v29 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      v30 = *(float *)ScriptParams * CTimer::ms_fTimeStep;
      goto LABEL_44;
    case 122:
    case 123:
    case 124:
    case 125:
      v5 = 0;
      v29 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v30 = *(float *)CRunningScript::GetPointerToScriptVariable(this, 0) * CTimer::ms_fTimeStep;
LABEL_44:
      *(float *)v29 = *(float *)v29 + v30;
      return v5;
    case 126:
    case 127:
      v5 = 0;
      v14 = CRunningScript::GetPointerToScriptVariable(this, 0);
      CRunningScript::CollectParameters(this, 1);
      v15 = *(float *)ScriptParams * CTimer::ms_fTimeStep;
      goto LABEL_47;
    case 128:
    case 129:
    case 130:
    case 131:
      v5 = 0;
      v14 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v15 = *(float *)CRunningScript::GetPointerToScriptVariable(this, 0) * CTimer::ms_fTimeStep;
LABEL_47:
      *(float *)v14 = *(float *)v14 - v15;
      return v5;
    case 132:
    case 133:
    case 134:
    case 135:
    case 136:
    case 137:
    case 138:
    case 139:
      v5 = 0;
      v6 = CRunningScript::GetPointerToScriptVariable(this, 0);
      *v6 = *CRunningScript::GetPointerToScriptVariable(this, 0);
      return v5;
    case 140:
    case 142:
    case 144:
    case 146:
      v5 = 0;
      v10 = CRunningScript::GetPointerToScriptVariable(this, 0);
      *v10 = (int)*(float *)CRunningScript::GetPointerToScriptVariable(this, 0);
      return v5;
    case 141:
    case 143:
    case 145:
    case 147:
      v5 = 0;
      v11 = CRunningScript::GetPointerToScriptVariable(this, 0);
      *(float *)v11 = (float)*CRunningScript::GetPointerToScriptVariable(this, 0);
      return v5;
    case 148:
    case 149:
      v5 = 0;
      v16 = CRunningScript::GetPointerToScriptVariable(this, 0);
      v17 = *v16;
      if ( *v16 < 0 )
        v17 = -v17;
      *v16 = v17;
      return v5;
    case 150:
    case 151:
      v5 = 0;
      v18 = (float *)CRunningScript::GetPointerToScriptVariable(this, 0);
      *v18 = fabsf(*v18);
      return v5;
    case 152:
      v5 = 0;
      v31 = CRunningScript::GetPointerToScriptVariable(this, 0);
      rand();
      rand();
      rand();
      *(float *)v31 = (float)rand() * 0.000015259;
      return v5;
    case 153:
      v5 = 0;
      v32 = CRunningScript::GetPointerToScriptVariable(this, 0);
      *v32 = rand();
      return v5;
    case 154:
      CRunningScript::CollectParameters(this, 5);
      switch ( ScriptParams[1] )
      {
        case 0x118:
        case 0x119:
        case 0x11A:
        case 0x11C:
          if ( ScriptParams[0] != 6 )
            goto LABEL_237;
          v19 = 0;
          goto LABEL_234;
        case 0x11B:
          if ( ScriptParams[0] != 6 )
            goto LABEL_237;
          v19 = 7;
          goto LABEL_234;
        case 0x11D:
          if ( ScriptParams[0] != 6 )
            goto LABEL_237;
          v19 = 2;
          goto LABEL_234;
        case 0x11E:
          if ( ScriptParams[0] != 6 )
            goto LABEL_237;
          v19 = 4;
          goto LABEL_234;
        case 0x11F:
          if ( ScriptParams[0] != 6 )
            goto LABEL_237;
          v19 = 5;
LABEL_234:
          ScriptParams[1] = v19;
          goto LABEL_235;
        default:
          if ( ScriptParams[0] == 6 )
          {
LABEL_235:
            v118 = (CCopPed *)CPed::operator new(0x7CCu);
            CCopPed::CCopPed(v118, (eCopType)ScriptParams[1]);
          }
          else
          {
LABEL_237:
            v119 = ScriptParams[0] | 1;
            v120 = (CEmergencyPed *)CPed::operator new(0x7A4u);
            v118 = (CCopPed *)v120;
            if ( v119 == 19 )
              CEmergencyPed::CEmergencyPed(v120, ScriptParams[0], ScriptParams[1]);
            else
              CCivilianPed::CCivilianPed((CCivilianPed *)v120, (ePedType)ScriptParams[0], ScriptParams[1]);
          }
          m_pPedIntelligence = v118->m_pPedIntelligence;
          v122 = (CTaskSimpleStandStill *)CTask::operator new(0x20u);
          CTaskSimpleStandStill::CTaskSimpleStandStill(
            v122,
            (const int)"List_FillGlobeColPointsER8CPtrListRK8CColLineRP7CEntitybP15CStoredCollPoly",
            1,
            0,
            8.0);
          CTaskManager::SetTask(&m_pPedIntelligence->m_taskManager, v122, 4, 0);
          CPed::SetCharCreatedBy(v118, 2u);
          *(_DWORD *)&v118->m_nPedFlags &= ~0x80000000;
          GroundZForCoord = *(float *)&ScriptParams[4];
          v124 = *(float *)&ScriptParams[2];
          v125 = *(float *)&ScriptParams[3];
          if ( *(float *)&ScriptParams[4] <= -100.0 )
            GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[2], *(float *)&ScriptParams[3]);
          posn.y = v125;
          posn.x = v124;
          v126 = GroundZForCoord + 1.0;
          posn.z = v126;
          m_pMat = v118->m_pMat;
          if ( m_pMat )
          {
            m_pMat->tx = v124;
            v118->m_pMat->ty = v125;
            p_tz = &v118->m_pMat->tz;
          }
          else
          {
            p_tz = &v118->m_transform.m_translate.z;
            v118->m_transform.m_translate.x = v124;
            v118->m_transform.m_translate.y = v125;
          }
          *p_tz = v126;
          v129 = v118->m_pMat;
          if ( v129 )
          {
            tx = v129->tx;
            ty = v129->ty;
            tz = v129->tz;
            CMatrix::SetRotate(v129, 0.0, 0.0, 0.0);
            p_xx = &v118->m_pMat->xx;
            v134 = ty + p_xx[13];
            v135 = tz + p_xx[14];
            p_xx[12] = tx + p_xx[12];
            p_xx[13] = v134;
            p_xx[14] = v135;
          }
          else
          {
            v118->m_transform.m_heading = 0.0;
          }
          CTheScripts::ClearSpaceForMissionEntity(&posn, v118);
          if ( this->IsThisAMissionScript )
            *(_DWORD *)&v118->m_nFlags |= 0x40000u;
          CWorld::Add(v118);
          ++CPopulation::ms_nTotalMissionPeds;
          ScriptParams[0] = CPools::ms_pPedPool->m_aFlags[-1093107909
                                                        * (((char *)v118 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)v118 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2));
          CRunningScript::StoreParameters(this, 1);
          if ( !this->IsThisAMissionScript )
            return 0;
          v5 = 0;
          v136 = ScriptParams[0];
          p_Id = &CTheScripts::MissionCleanUp.cleanup_entities[0].Id;
          v138 = 0;
          break;
      }
      break;
    case 155:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v33 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v33 = 0;
      }
      CTheScripts::RemoveThisPed(v33);
      if ( !this->IsThisAMissionScript )
        return 0;
      v85 = 0;
      v86 = ScriptParams[0];
      v87 = &CTheScripts::MissionCleanUp.cleanup_entities[0].Id;
      v88 = (unsigned int)ScriptParams[0] >> 8;
      do
      {
        v89 = *((unsigned __int8 *)v87 - 4);
        v90 = v89 == 2;
        if ( v89 == 2 )
          v90 = *v87 == v86;
        if ( v90 )
        {
          if ( v86 >= 0 )
          {
            v91 = (unsigned __int8)v86;
            if ( CPools::ms_pPedPool->m_aFlags[v88] == (unsigned __int8)v86 )
            {
              v92 = (unsigned int *)(elf_hash_bucket + 1744);
              v93 = CPools::ms_pPedPool->m_aStorage[v88];
              v94 = v93 == 0;
              if ( v93 )
              {
                v92 = (unsigned int *)(v93 + 28);
                v91 = *((_DWORD *)v93 + 7);
                v94 = (v91 & 0x40000) == 0;
              }
              if ( !v94 )
              {
                v95 = v92[1];
                *v92 = v91 & 0xFFFBFFFF;
                v92[1] = v95;
                if ( (v91 & 4) == 0 )
                  CPhysical::AddToMovingList((CPhysical *)v93);
              }
            }
          }
          *((_BYTE *)v87 - 4) = 0;
          *v87 = 0;
          --CTheScripts::MissionCleanUp.Count;
        }
        ++v85;
        v87 += 2;
        v5 = 0;
      }
      while ( (unsigned __int16)v85 < 0x4Bu );
      return v5;
    case 160:
      CRunningScript::CollectParameters(this, 1);
      v34 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v36 = v34[1157] << 31;
      v35 = v36 == 0;
      if ( v36 )
      {
        v36 = *((_DWORD *)v34 + 356);
        v35 = v36 == 0;
      }
      if ( v35 )
      {
        v37 = *((_DWORD *)v34 + 5);
        v38 = (uint8 *)(v37 + 48);
        if ( !v37 )
          v38 = v34 + 4;
      }
      else
      {
        v112 = *(_DWORD *)(v36 + 20);
        v38 = (uint8 *)(v112 + 48);
        if ( !v112 )
          v38 = (uint8 *)(v36 + 4);
      }
      v113 = *(_QWORD *)v38;
      posn.z = *((RwReal *)v38 + 2);
      *(_QWORD *)&posn.x = v113;
      *(_QWORD *)ScriptParams = v113;
      ScriptParams[2] = LODWORD(posn.z);
      goto LABEL_201;
    case 161:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v39 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v39 = 0;
      }
      CRunningScript::SetCharCoordinates(
        (CRunningScript *)((char *)&dword_0 + 1),
        v39,
        *(float *)&ScriptParams[1],
        *(float *)&ScriptParams[2],
        *(float *)&ScriptParams[3],
        (int)&dword_0 + 1,
        (int)&dword_0 + 1);
      return 0;
    case 163:
      CRunningScript::CollectParameters(this, 6);
      v40 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( v40[1157] << 31 )
        v41 = (uint8 *)*((_DWORD *)v40 + 356);
      else
        v41 = 0;
      if ( v41 )
        v40 = v41;
      IsWithinArea = CPlaceable::IsWithinArea(
                       (const CPlaceable *)v40,
                       *(float *)&ScriptParams[1],
                       *(float *)&ScriptParams[2],
                       *(float *)&ScriptParams[3],
                       *(float *)&ScriptParams[4]);
      v43 = IsWithinArea;
      if ( IsWithinArea )
        v43 = 1;
      CRunningScript::UpdateCompareFlag(this, v43);
      if ( ScriptParams[5] )
        goto LABEL_153;
      return 0;
    case 164:
      CRunningScript::CollectParameters(this, 8);
      v44 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( v44[1157] << 31 )
        v45 = (uint8 *)*((_DWORD *)v44 + 356);
      else
        v45 = 0;
      if ( v45 )
        v44 = v45;
      v46 = CPlaceable::IsWithinArea(
              (const CPlaceable *)v44,
              *(float *)&ScriptParams[1],
              *(float *)&ScriptParams[2],
              *(float *)&ScriptParams[3],
              *(float *)&ScriptParams[4],
              *(float *)&ScriptParams[5],
              *(float *)&ScriptParams[6]);
      v47 = v46;
      if ( v46 )
        v47 = 1;
      CRunningScript::UpdateCompareFlag(this, v47);
      if ( ScriptParams[7] )
        goto LABEL_197;
      return 0;
    case 165:
      CRunningScript::CollectParameters(this, 4);
      if ( SaveGameStateType == eStartmissionSave && CStreaming::ms_aInfoForModel[ScriptParams[0]].m_status != 1 )
      {
        CStreaming::RequestModel(ScriptParams[0], 8);
        CStreaming::LoadAllRequestedModels(0);
      }
      CarForScript = CCarCtrl::CreateCarForScript(
                       ScriptParams[0],
                       *(CVector *)&ScriptParams[1],
                       this->IsThisAMissionScript);
      GameClockMinutesUntil = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                                              * (((char *)CarForScript
                                                                - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2)] | (-422239488 * (((char *)CarForScript - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2));
      goto LABEL_86;
    case 166:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0 )
      {
        v51 = (unsigned int)ScriptParams[0] >> 8;
        if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        {
          v52 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[v51];
          if ( v52 )
          {
            CWorld::Remove((CEntity *)CPools::ms_pVehiclePool->m_aStorage[v51]);
            CWorld::RemoveReferencesToDeletedObject(v52);
            (*((void (__fastcall **)(CEntity *))v52->_vptr$CPlaceable + 1))(v52);
          }
        }
      }
      if ( !this->IsThisAMissionScript )
        return 0;
      v53 = 0;
      v54 = ScriptParams[0];
      v55 = &CTheScripts::MissionCleanUp.cleanup_entities[0].Id;
      v56 = (unsigned int)ScriptParams[0] >> 8;
      do
      {
        v57 = *((unsigned __int8 *)v55 - 4);
        v58 = v57 == 1;
        if ( v57 == 1 )
          v58 = *v55 == v54;
        if ( v58 )
        {
          if ( v54 >= 0 )
          {
            v59 = (unsigned __int8)v54;
            if ( CPools::ms_pVehiclePool->m_aFlags[v56] == (unsigned __int8)v54 )
            {
              v60 = (unsigned int *)(elf_hash_bucket + 2352);
              v61 = CPools::ms_pVehiclePool->m_aStorage[v56];
              v62 = v61 == 0;
              if ( v61 )
              {
                v60 = (unsigned int *)(v61 + 28);
                v59 = *((_DWORD *)v61 + 7);
                v62 = (v59 & 0x40000) == 0;
              }
              if ( !v62 )
              {
                v63 = v60[1];
                *v60 = v59 & 0xFFFBFFFF;
                v60[1] = v63;
                if ( (v59 & 4) == 0 )
                  CPhysical::AddToMovingList((CPhysical *)v61);
              }
            }
          }
          *((_BYTE *)v55 - 4) = 0;
          *v55 = 0;
          --CTheScripts::MissionCleanUp.Count;
        }
        ++v53;
        v55 += 2;
        v5 = 0;
      }
      while ( (unsigned __int16)v53 < 0x4Bu );
      return v5;
    case 167:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v64 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v64 = 0;
      }
      v96 = *(float *)&ScriptParams[3];
      v97 = *(float *)&ScriptParams[1];
      v98 = *(float *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        v96 = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      posn.y = v98;
      posn.x = v97;
      posn.z = v96 + CEntity::GetDistanceFromCentreOfMassToBaseOfModel((CEntity *)v64);
      v99 = CCarCtrl::JoinCarWithRoadSystemGotoCoors((CVehicle *)v64, &posn, 0, 0);
      v100 = v64[958] - 57;
      if ( v99 )
      {
        if ( v100 < 2u )
          goto LABEL_216;
        v101 = 9;
      }
      else
      {
        if ( v100 < 2u )
          goto LABEL_216;
        v101 = 8;
      }
      v64[958] = v101;
LABEL_216:
      v115 = v64[980];
      v103 = *((_DWORD *)v64 + 267);
      v104 = *((_DWORD *)v64 + 268);
      v116 = v64[58];
      if ( v115 <= 1 )
        LOBYTE(v115) = 1;
      v64[980] = v115;
      v64[58] = v116 & 7 | 0x18;
LABEL_219:
      v117 = v103 & 0xFFFFFFEF;
      v5 = 0;
      if ( (v104 & 0x200) == 0 )
        v117 = v103 | 0x10;
      *((_DWORD *)v64 + 267) = v117;
      *((_DWORD *)v64 + 236) = CTimer::m_snTimeInMilliseconds;
      return v5;
    case 168:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v64 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v64 = 0;
      }
      CCarCtrl::JoinCarWithRoadSystem((CVehicle *)v64);
      if ( (unsigned __int8)(v64[958] - 57) >= 2u )
        v64[958] = 1;
      v102 = v64[980];
      v103 = *((_DWORD *)v64 + 267);
      v104 = *((_DWORD *)v64 + 268);
      if ( v102 <= 1 )
        LOBYTE(v102) = 1;
      v64[980] = v102;
      goto LABEL_219;
    case 169:
      CRunningScript::CollectParameters(this, 1);
      v5 = 0;
      v20 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( (unsigned __int8)(v20[958] - 57) >= 2u )
        v20[958] = 0;
      return v5;
    case 170:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v65 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v65 = 0;
      }
      v105 = *((_DWORD *)v65 + 5);
      v106 = (uint8 *)(v105 + 48);
      if ( !v105 )
        v106 = v65 + 4;
      v107 = *((float *)v106 + 2);
      *(_QWORD *)ScriptParams = *(_QWORD *)v106;
      *(RwReal *)&ScriptParams[2] = v107;
      posn.z = v107;
LABEL_201:
      v49 = this;
      v50 = 3;
      goto LABEL_202;
    case 171:
      CRunningScript::CollectParameters(this, 4);
      v5 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v66 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v66 = 0;
      }
      CCarCtrl::SetCoordsOfScriptCar(
        v66,
        *(float *)&ScriptParams[1],
        *(float *)&ScriptParams[2],
        *(float *)&ScriptParams[3],
        0,
        1);
      return v5;
    case 173:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v67 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v67 = 0;
      }
      v5 = 0;
      v108 = *((_DWORD *)v67 + 226);
      v109 = (unsigned int)*(float *)&ScriptParams[1];
      v67[980] = (unsigned int)*(float *)&ScriptParams[1];
      v2.n64_f32[0] = (float)v109;
      v3.n64_f32[0] = *(float *)(v108 + 136) * 60.0;
      v67[980] = (unsigned int)vmin_f32(v3, v2).n64_f32[0];
      return v5;
    case 174:
      CRunningScript::CollectParameters(this, 2);
      v5 = 0;
      CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][957] = ScriptParams[1];
      return v5;
    case 175:
      CRunningScript::CollectParameters(this, 2);
      v68 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( (unsigned __int8)(v68[958] - 57) >= 2u )
        v68[958] = ScriptParams[1];
      v5 = 0;
      v69 = *((_DWORD *)v68 + 268);
      v70 = *((_DWORD *)v68 + 267);
      *((_DWORD *)v68 + 236) = CTimer::m_snTimeInMilliseconds;
      v71 = v70 & 0xFFFFFFEF;
      if ( (v69 & 0x200) == 0 )
        v71 = v70 | 0x10;
      *((_DWORD *)v68 + 267) = v71;
      return v5;
    case 176:
      CRunningScript::CollectParameters(this, 6);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v21 = (const CPlaceable *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v21 = 0;
      }
      v83 = CPlaceable::IsWithinArea(
              v21,
              *(float *)&ScriptParams[1],
              *(float *)&ScriptParams[2],
              *(float *)&ScriptParams[3],
              *(float *)&ScriptParams[4]);
      v84 = v83;
      if ( v83 )
        v84 = 1;
      CRunningScript::UpdateCompareFlag(this, v84);
      if ( ScriptParams[5] )
LABEL_153:
        CTheScripts::HighlightImportantArea(
          (u_native)&this->PCPointer[(unsigned int)this],
          *(float *)&ScriptParams[1],
          *(float *)&ScriptParams[2],
          *(float *)&ScriptParams[3],
          *(float *)&ScriptParams[4],
          -100.0);
      return 0;
    case 177:
      CRunningScript::CollectParameters(this, 8);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v72 = (const CPlaceable *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v72 = 0;
      }
      v110 = CPlaceable::IsWithinArea(
               v72,
               *(float *)&ScriptParams[1],
               *(float *)&ScriptParams[2],
               *(float *)&ScriptParams[3],
               *(float *)&ScriptParams[4],
               *(float *)&ScriptParams[5],
               *(float *)&ScriptParams[6]);
      v111 = v110;
      if ( v110 )
        v111 = 1;
      CRunningScript::UpdateCompareFlag(this, v111);
      if ( ScriptParams[7] )
LABEL_197:
        CTheScripts::HighlightImportantArea(
          (u_native)&this->PCPointer[(unsigned int)this],
          *(float *)&ScriptParams[1],
          *(float *)&ScriptParams[2],
          *(float *)&ScriptParams[4],
          *(float *)&ScriptParams[5],
          (float)(*(float *)&ScriptParams[3] + *(float *)&ScriptParams[6]) * 0.5);
      return 0;
    case 186:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v73 = CText::Get(&TheText, pStringToFill);
      if ( !strcmp((const char *)pStringToFill, "M_FAIL")
        && strcmp((const char *)this->ScriptName, "desert5")
        && !AllowMissionReplay
        && missionReplaySetting )
      {
        AllowMissionReplay = 2;
      }
      if ( !strcmp((const char *)this->ScriptName, "mtbiker") && !strcmp((const char *)pStringToFill, "RACES_8") )
        AllowMissionReplay = 2;
      CRunningScript::CollectParameters(this, 2);
      CMessages::AddBigMessage(v73, ScriptParams[0], LOWORD(ScriptParams[1]) - 1);
      return 0;
    case 187:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v22 = CText::Get(&TheText, pStringToFill);
      CRunningScript::CollectParameters(this, 2);
      if ( !strcmp((const char *)pStringToFill, "DES9_42")
        && strcmp((const char *)this->ScriptName, "desert5")
        && !AllowMissionReplay
        && missionReplaySetting )
      {
        AllowMissionReplay = 2;
      }
      if ( !strcmp((const char *)pStringToFill, "WUZ1_DA") || !strcmp((const char *)pStringToFill, "GAR2_10") )
        CPad::GetPad(0)->bRegainControl = 1;
      if ( !v22 || *v22 != 126 )
        goto LABEL_33;
      v23 = v22[1];
      v24 = v23 == 122;
      if ( v23 == 122 )
        v24 = v22[2] == 126;
      if ( !v24 || MobileSettings::settings[24].value )
      {
LABEL_33:
        v25 = CTheScripts::bAddNextMessageToPreviousBriefs;
        if ( CTheScripts::bAddNextMessageToPreviousBriefs )
          v25 = 1;
        CMessages::AddMessage(pStringToFill, v22, ScriptParams[0], ScriptParams[1], v25);
      }
      goto LABEL_144;
    case 188:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v74 = CText::Get(&TheText, pStringToFill);
      CRunningScript::CollectParameters(this, 2);
      if ( !v74 || *v74 != 126 )
        goto LABEL_141;
      v75 = v74[1];
      v76 = v75 == 122;
      if ( v75 == 122 )
        v76 = v74[2] == 126;
      if ( !v76 || MobileSettings::settings[24].value )
      {
LABEL_141:
        v77 = CTheScripts::bAddNextMessageToPreviousBriefs;
        if ( CTheScripts::bAddNextMessageToPreviousBriefs )
          v77 = 1;
        CMessages::AddMessageJumpQ(pStringToFill, v74, ScriptParams[0], ScriptParams[1], v77);
      }
LABEL_144:
      v5 = 0;
      CTheScripts::bAddNextMessageToPreviousBriefs = 1;
      return v5;
    case 190:
      v5 = 0;
      CMessages::ClearMessages(0);
      return v5;
    case 191:
      HIDWORD(v78) = CClock::ms_nGameClockMinutes;
      LODWORD(v78) = CClock::ms_nGameClockHours;
      *(_QWORD *)ScriptParams = v78;
      v49 = this;
      v50 = 2;
      goto LABEL_202;
    case 192:
      CRunningScript::CollectParameters(this, 2);
      v5 = 0;
      CClock::SetGameClock(ScriptParams[0], ScriptParams[1], 0);
      return v5;
    case 193:
      CRunningScript::CollectParameters(this, 2);
      GameClockMinutesUntil = CClock::GetGameClockMinutesUntil(ScriptParams[0], ScriptParams[1]);
LABEL_86:
      ScriptParams[0] = GameClockMinutesUntil;
      v49 = this;
      v50 = 1;
LABEL_202:
      CRunningScript::StoreParameters(v49, v50);
      return 0;
    case 194:
      CRunningScript::CollectParameters(this, 4);
      v79 = *(float *)&ScriptParams[2];
      v80 = *(float *)ScriptParams;
      v81 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v79 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      posn.y = v81;
      posn.x = v80;
      posn.z = v79;
      IsSphereVisible = CCamera::IsSphereVisible(&TheCamera, &posn, *(float *)&ScriptParams[3]);
      CRunningScript::UpdateCompareFlag(this, IsSphereVisible);
      return 0;
    case 195:
    case 196:
      return v5;
    default:
      return -1;
  }
  while ( *((_BYTE *)p_Id - 4) )
  {
    ++v138;
    p_Id += 2;
    if ( (unsigned __int16)v138 >= 0x4Bu )
      return v5;
  }
  *((_BYTE *)p_Id - 4) = 2;
  v5 = 0;
  *p_Id = v136;
  ++CTheScripts::MissionCleanUp.Count;
  return v5;
}
// 32D3C8: variable 'v3' is possibly undefined
// 32D3C8: variable 'v2' is possibly undefined
// 0: using guessed type int dword_0;
// FC: using guessed type int elf_hash_bucket[16411];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 677DD0: using guessed type CStreamingInfo (*CStreaming::ms_aInfoForModel)[26316];

//----- (0032D938) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands200To299(CRunningScript *this, Int32 CurrCommand)
{
  Int8 v3; // r5
  unsigned __int16 v4; // r0
  CRunningScript *v5; // r4
  CRunningScript *pPrevious; // r6
  Int32 v7; // r1
  UInt8 *v8; // r5
  uint8 *v9; // r0
  CVehicle *v10; // r11
  __int64 v11; // kr08_8
  int v12; // r6
  unsigned int v13; // r9
  int v14; // r8
  int v15; // r8
  int v16; // r10
  Int32 *p_Id; // r5
  unsigned int v18; // r3
  CVehiclePool **v19; // r12
  int v20; // r0
  bool v21; // zf
  int v22; // r2
  unsigned int *v23; // r1
  int v24; // r0
  bool v25; // zf
  unsigned int v26; // r12
  uint8 *v27; // r0
  uint8 *v28; // r0
  bool v29; // zf
  uint8 *v30; // r0
  bool v31; // zf
  int PlayerState; // r1
  Int32 Index; // r0
  CBaseModelInfo *v34; // r6
  CObject *v35; // r5
  char v36; // r0
  float GroundZForCoord; // s20
  int (**v38)(void); // s16
  CTask *v39; // s18
  float DistanceFromCentreOfMassToBaseOfModel; // s0
  CMatrix *m_pMat; // r0
  float v42; // s20
  float *p_tz; // r0
  unsigned int v44; // r2
  CEntity *v45; // r5
  int v46; // r10
  int v47; // r6
  Int32 *v48; // r4
  unsigned int v49; // r9
  CObjectPool **v50; // r3
  int v51; // r0
  bool v52; // zf
  int v53; // r2
  unsigned int *v54; // r1
  int v55; // r0
  bool v56; // zf
  unsigned int v57; // r12
  CObjectPool **v58; // r5
  Int32 Score; // r1
  bool v60; // zf
  bool v61; // nf
  bool v62; // vf
  eWantedLevel m_WantedLevel; // r0
  bool v64; // r1
  Bool8 v65; // r0
  Bool8 DoneDeatharrest; // r1
  CPed *v67; // r0
  int v68; // r5
  uint8 *v69; // r0
  int v70; // r0
  char v71; // r2
  char v72; // r1
  unsigned int v73; // r0
  unsigned int v74; // r0
  uint8 *v75; // r2
  CRunningScript *v76; // r0
  CPad *Pad; // r0
  CVehicle *v78; // r8
  uint8 *v79; // r1
  Int32 v80; // r0
  uint8 *v81; // r2
  CMatrix *v82; // r0
  float tx; // s22
  float ty; // s24
  float tz; // s26
  float *p_xx; // r0
  float v87; // s2
  float v88; // s4
  RwObject_0 *m_pRwObject; // r0
  char *parent; // r1
  const CMatrix *v91; // r0
  RwMatrix *v92; // r1
  Int32 v93; // r1
  Int32 *v94; // r0
  int v95; // r2
  char v96; // r3
  CCopPed *v97; // r6
  int v98; // r5
  CEmergencyPed *v99; // r0
  int v100; // r2
  int v101; // r5
  Int32 *v102; // r0
  int v103; // r5
  CVehiclePool **v105; // [sp+4h] [bp-74h]
  unsigned int v106; // [sp+8h] [bp-70h]
  CTaskSimpleCarSetPedInAsDriver Coors[3]; // [sp+Ch] [bp-6Ch] BYREF

  v3 = 0;
  switch ( CurrCommand )
  {
    case 214:
      CRunningScript::CollectParameters(this, 1);
      v4 = ScriptParams[0];
      this->AndOrState = ScriptParams[0];
      if ( v4 )
      {
        if ( v4 > 8u )
        {
          v3 = 0;
          if ( (unsigned __int16)(v4 - 21) <= 7u )
          {
            this->AndOrState = v4 + 1;
            this->CmpFlag = 0;
          }
        }
        else
        {
          this->AndOrState = v4 + 1;
          v3 = 0;
          this->CmpFlag = 1;
        }
      }
      else
      {
        v3 = 0;
        this->CmpFlag = 0;
      }
      return v3;
    case 215:
      CRunningScript::CollectParameters(this, 1);
      v5 = CTheScripts::pIdleScripts;
      pPrevious = CTheScripts::pIdleScripts->pPrevious;
      v7 = ScriptParams[0];
      if ( !pPrevious )
        pPrevious = (CRunningScript *)&CTheScripts::pIdleScripts;
      pPrevious->pNext = CTheScripts::pIdleScripts->pNext;
      v8 = &CTheScripts::ScriptSpace[v7];
      if ( v5->pNext )
        v5->pNext->pPrevious = v5->pPrevious;
      v5->pNext = 0;
      v5->ActivateTime = 0;
      strcpy((char *)v5->ScriptName, "noname");
      *(_DWORD *)&v5->bActive = 0;
      v5->bIsThisAMiniGameScript = 0;
      v5->ScriptBrainType = -1;
      *(_QWORD *)((char *)&v5->PCStack[4] + 2) = 0LL;
      *(_QWORD *)((char *)&v5->PCStack[6] + 2) = 0LL;
      *(_QWORD *)&v5->PCStack[2] = 0LL;
      *(_QWORD *)&v5->PCStack[4] = 0LL;
      *(_QWORD *)&v5->BaseAddressOfThisScript = 0LL;
      *(_QWORD *)v5->PCStack = 0LL;
      memset(v5->Locals, 0, sizeof(v5->Locals));
      v5->DoneDeatharrest = 0;
      *(_DWORD *)&v5->AndOrState = 0x1000000;
      v5->EndOfScriptedCutscenePC = 0;
      v5->ThisMustBeTheOnlyMissionRunning = 0;
      v5->PCPointer = v8;
      v3 = 0;
      v5->pNext = CTheScripts::pActiveScripts;
      v5->pPrevious = 0;
      if ( CTheScripts::pActiveScripts )
        CTheScripts::pActiveScripts->pPrevious = v5;
      CTheScripts::pActiveScripts = v5;
      v5->bActive = 1;
      return v3;
    case 216:
      if ( this->IsThisAMissionScript )
        CMissionCleanup::Process(&CTheScripts::MissionCleanUp);
      return 0;
    case 217:
      CRunningScript::CollectParameters(this, 1);
      v9 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( v9[1157] << 31 )
        v10 = (CVehicle *)*((_DWORD *)v9 + 356);
      else
        v10 = 0;
      v11 = *(_QWORD *)&CPools::ms_pVehiclePool->m_aStorage;
      v12 = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                            * (((char *)v10 - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2)] | (-422239488 * (((char *)v10 - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2));
      if ( v12 == CTheScripts::StoreVehicleIndex )
        goto LABEL_196;
      if ( !this->IsThisAMissionScript )
      {
        v12 = CTheScripts::StoreVehicleIndex;
        goto LABEL_196;
      }
      if ( CTheScripts::StoreVehicleIndex >= 0 )
      {
        v13 = (unsigned int)CTheScripts::StoreVehicleIndex >> 8;
        if ( *(unsigned __int8 *)(HIDWORD(v11) + ((unsigned int)CTheScripts::StoreVehicleIndex >> 8)) == (unsigned __int8)CTheScripts::StoreVehicleIndex )
        {
          v14 = v11 + 2604 * v13;
          if ( v14 )
          {
            CCarCtrl::RemoveFromInterestingVehicleList((CVehicle *)(v11 + 2604 * v13));
            if ( *(_BYTE *)(v14 + 1192) == 2 )
            {
              if ( CTheScripts::StoreVehicleWasRandom )
              {
                CVehicle::SetVehicleCreatedBy((CVehicle *)(v11 + 2604 * v13), 1, 0);
                v15 = 0;
                *(_DWORD *)(v11 + 2604 * v13 + 1068) &= ~8u;
                v16 = CTheScripts::StoreVehicleIndex;
                p_Id = &CTheScripts::MissionCleanUp.cleanup_entities[0].Id;
                v18 = (unsigned int)CTheScripts::StoreVehicleIndex >> 8;
                v19 = &CPools::ms_pVehiclePool;
                do
                {
                  v20 = *((unsigned __int8 *)p_Id - 4);
                  v21 = v20 == 1;
                  if ( v20 == 1 )
                    v21 = *p_Id == v16;
                  if ( v21 )
                  {
                    if ( v16 >= 0 )
                    {
                      v22 = (unsigned __int8)v16;
                      v23 = (unsigned int *)(*v19)->m_aFlags[v18];
                      if ( v23 == (unsigned int *)(unsigned __int8)v16 )
                      {
                        v24 = (int)(*v19)->m_aStorage[v18];
                        v25 = v24 == 0;
                        if ( v24 )
                        {
                          v23 = (unsigned int *)(v24 + 28);
                          v22 = *(_DWORD *)(v24 + 28);
                          v25 = (v22 & 0x40000) == 0;
                        }
                        if ( !v25 )
                        {
                          v105 = v19;
                          v26 = v23[1];
                          v106 = v18;
                          *v23 = v22 & 0xFFFBFFFF;
                          v23[1] = v26;
                          v19 = v105;
                          if ( (v22 & 4) == 0 )
                          {
                            CPhysical::AddToMovingList((CPhysical *)v24);
                            v19 = v105;
                            v18 = v106;
                          }
                        }
                      }
                    }
                    *((_BYTE *)p_Id - 4) = 0;
                    *p_Id = 0;
                    --CTheScripts::MissionCleanUp.Count;
                  }
                  ++v15;
                  p_Id += 2;
                }
                while ( (unsigned __int16)v15 < 0x4Bu );
              }
            }
          }
        }
      }
      CTheScripts::StoreVehicleIndex = v12;
      switch ( *((_BYTE *)&elf_hash_bucket[235] + (_DWORD)v10) )
      {
        case 1:
          v101 = 0;
          CVehicle::SetVehicleCreatedBy(v10, 2, 0);
          v12 = CTheScripts::StoreVehicleIndex;
          CTheScripts::StoreVehicleWasRandom = 1;
          v102 = &CTheScripts::MissionCleanUp.cleanup_entities[0].Id;
          do
          {
            if ( !*((_BYTE *)v102 - 4) )
              goto LABEL_195;
            ++v101;
            v102 += 2;
          }
          while ( (unsigned __int16)v101 < 0x4Bu );
          goto LABEL_196;
        case 2:
        case 4:
          CTheScripts::StoreVehicleWasRandom = 0;
          goto LABEL_196;
        case 3:
          v103 = 0;
          CVehicle::SetVehicleCreatedBy(v10, 2, 0);
          v12 = CTheScripts::StoreVehicleIndex;
          CTheScripts::StoreVehicleWasRandom = 1;
          v102 = &CTheScripts::MissionCleanUp.cleanup_entities[0].Id;
          break;
        default:
          goto LABEL_196;
      }
      while ( *((_BYTE *)v102 - 4) )
      {
        ++v103;
        v102 += 2;
        if ( (unsigned __int16)v103 >= 0x4Bu )
          goto LABEL_196;
      }
LABEL_195:
      *((_BYTE *)v102 - 4) = 1;
      *v102 = v12;
      ++CTheScripts::MissionCleanUp.Count;
LABEL_196:
      ScriptParams[0] = v12;
LABEL_197:
      CRunningScript::StoreParameters(this, 1);
      return 0;
    case 219:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v27 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v27 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v79 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v79 = 0;
      }
      v3 = 0;
      v81 = 0;
      if ( v27[1157] << 31 )
        v81 = (uint8 *)*((_DWORD *)v27 + 356);
      v64 = v81 != 0 && v81 == v79;
      goto LABEL_142;
    case 221:
      CRunningScript::CollectParameters(this, 2);
      v28 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v29 = v28[1157] << 31 == 0;
      if ( v28[1157] << 31 )
      {
        v28 = (uint8 *)*((_DWORD *)v28 + 356);
        v29 = v28 == 0;
      }
      if ( !v29 && ScriptParams[1] == *((__int16 *)v28 + 19) )
        goto LABEL_57;
      goto LABEL_122;
    case 223:
      CRunningScript::CollectParameters(this, 1);
      v30 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v31 = v30[1157] << 31 == 0;
      if ( v30[1157] << 31 )
        v31 = *((_DWORD *)v30 + 356) == 0;
      if ( !v31 )
        goto LABEL_57;
      goto LABEL_122;
    case 225:
      CRunningScript::CollectParameters(this, 2);
      if ( !CRunningScript::GetPadState(this, ScriptParams[0], ScriptParams[1]) || CPad::GetPad(0)->JustOutOfFrontEnd )
        goto LABEL_122;
LABEL_57:
      LOBYTE(PlayerState) = 1;
      goto LABEL_123;
    case 226:
      CRunningScript::CollectParameters(this, 2);
      ScriptParams[0] = CRunningScript::GetPadState(this, ScriptParams[0], ScriptParams[1]);
      goto LABEL_197;
    case 236:
    case 237:
    case 238:
    case 239:
    case 240:
    case 241:
    case 254:
    case 255:
    case 256:
    case 257:
    case 258:
    case 259:
      CRunningScript::LocateCharCommand(this, CurrCommand);
      return 0;
    case 242:
    case 243:
    case 244:
    case 260:
    case 261:
    case 262:
      CRunningScript::LocateCharCharCommand(this, CurrCommand);
      return 0;
    case 263:
      CRunningScript::CollectParameters(this, 4);
      Index = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        Index = CTheScripts::UsedObjectArray[-ScriptParams[0]].Index;
      v34 = CModelInfo::ms_modelInfoPtrs[Index];
      v34->m_alpha = -1;
      v35 = CObject::Create(Index, 0);
      v36 = 6;
      if ( !this->bIsThisAStreamedScript && (unsigned __int8)this->ScriptBrainType == 255 )
        v36 = 2;
      v35->ObjectCreatedBy = v36;
      GroundZForCoord = *(float *)&ScriptParams[3];
      v38 = (int (**)(void))ScriptParams[1];
      v39 = (CTask *)ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      DistanceFromCentreOfMassToBaseOfModel = CEntity::GetDistanceFromCentreOfMassToBaseOfModel(v35);
      m_pMat = v35->m_pMat;
      v42 = GroundZForCoord + DistanceFromCentreOfMassToBaseOfModel;
      if ( m_pMat )
      {
        LODWORD(m_pMat->tx) = v38;
        LODWORD(v35->m_pMat->ty) = v39;
        p_tz = &v35->m_pMat->tz;
      }
      else
      {
        p_tz = &v35->m_transform.m_translate.z;
        LODWORD(v35->m_transform.m_translate.x) = v38;
        LODWORD(v35->m_transform.m_translate.y) = v39;
      }
      *p_tz = v42;
      v82 = v35->m_pMat;
      if ( v82 )
      {
        tx = v82->tx;
        ty = v82->ty;
        tz = v82->tz;
        CMatrix::SetRotate(v82, 0.0, 0.0, 0.0);
        p_xx = &v35->m_pMat->xx;
        v87 = ty + p_xx[13];
        v88 = tz + p_xx[14];
        p_xx[12] = tx + p_xx[12];
        p_xx[13] = v87;
        p_xx[14] = v88;
      }
      else
      {
        v35->m_transform.m_heading = 0.0;
      }
      m_pRwObject = v35->m_pRwObject;
      if ( m_pRwObject )
      {
        parent = (char *)m_pRwObject->parent;
        v91 = v35->m_pMat;
        v92 = (RwMatrix *)(parent + 16);
        if ( v91 )
          CMatrix::UpdateRwMatrix(v91, v92);
        else
          CSimpleTransform::UpdateRwMatrix(&v35->m_transform, v92);
      }
      CEntity::UpdateRwFrame(v35);
      if ( (*((int (__fastcall **)(CBaseModelInfo *))v34->_vptr$CBaseModelInfo + 4))(v34) )
        CEntity::SetupBigBuilding(v35);
      Coors[0].m_pParent = v39;
      Coors[0]._vptr$CTask = v38;
      *(float *)&Coors[0].m_bIsFinished = v42;
      CTheScripts::ClearSpaceForMissionEntity((const CVector *)Coors, v35);
      CWorld::Add(v35);
      ScriptParams[0] = CPools::ms_pObjectPool->m_aFlags[-654471207
                                                       * (((char *)v35 - (char *)CPools::ms_pObjectPool->m_aStorage) >> 2)] | (-40904448 * (((char *)v35 - (char *)CPools::ms_pObjectPool->m_aStorage) >> 2));
      CRunningScript::StoreParameters(this, 1);
      if ( !this->IsThisAMissionScript )
        return 0;
      v3 = 0;
      v93 = ScriptParams[0];
      v94 = &CTheScripts::MissionCleanUp.cleanup_entities[0].Id;
      v95 = 0;
      while ( *((_BYTE *)v94 - 4) )
      {
        ++v95;
        v94 += 2;
        if ( (unsigned __int16)v95 >= 0x4Bu )
          return v3;
      }
      v96 = 3;
      goto LABEL_185;
    case 264:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0 )
      {
        v44 = (unsigned int)ScriptParams[0] >> 8;
        if ( CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        {
          v45 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[v44];
          if ( v45 )
          {
            CWorld::Remove((CEntity *)CPools::ms_pObjectPool->m_aStorage[v44]);
            CWorld::RemoveReferencesToDeletedObject(v45);
            (*((void (__fastcall **)(CEntity *))v45->_vptr$CPlaceable + 1))(v45);
          }
        }
      }
      if ( !this->IsThisAMissionScript )
        return 0;
      v46 = 0;
      v47 = ScriptParams[0];
      v48 = &CTheScripts::MissionCleanUp.cleanup_entities[0].Id;
      v49 = (unsigned int)ScriptParams[0] >> 8;
      v50 = &CPools::ms_pObjectPool;
      do
      {
        v51 = *((unsigned __int8 *)v48 - 4);
        v52 = v51 == 3;
        if ( v51 == 3 )
          v52 = *v48 == v47;
        if ( v52 )
        {
          if ( v47 >= 0 )
          {
            v53 = (unsigned __int8)v47;
            v54 = (unsigned int *)(*v50)->m_aFlags[v49];
            if ( v54 == (unsigned int *)(unsigned __int8)v47 )
            {
              v55 = (int)(*v50)->m_aStorage[v49];
              v56 = v55 == 0;
              if ( v55 )
              {
                v54 = (unsigned int *)(v55 + 28);
                v53 = *(_DWORD *)(v55 + 28);
                v56 = (v53 & 0x40000) == 0;
              }
              if ( !v56 )
              {
                v57 = v54[1];
                *v54 = v53 & 0xFFFBFFFF;
                v54[1] = v57;
                if ( (v53 & 4) == 0 )
                {
                  v58 = v50;
                  CPhysical::AddToMovingList((CPhysical *)v55);
                  v50 = v58;
                }
              }
            }
          }
          *((_BYTE *)v48 - 4) = 0;
          *v48 = 0;
          --CTheScripts::MissionCleanUp.Count;
        }
        ++v46;
        v48 += 2;
        v3 = 0;
      }
      while ( (unsigned __int16)v46 < 0x4Bu );
      return v3;
    case 265:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      CWorld::Players[ScriptParams[0]].Score += ScriptParams[1];
      return v3;
    case 266:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      Score = CWorld::Players[ScriptParams[0]].Score;
      v62 = __OFSUB__(Score, ScriptParams[1]);
      v60 = Score == ScriptParams[1];
      v61 = Score - ScriptParams[1] < 0;
      goto LABEL_94;
    case 267:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CWorld::Players[ScriptParams[0]].Score;
      goto LABEL_197;
    case 268:
      return v3;
    case 269:
      CRunningScript::CollectParameters(this, 2);
      CPlayerPed::SetWantedLevel(CWorld::Players[ScriptParams[0]].pPed, ScriptParams[1]);
      return 0;
    case 270:
      CRunningScript::CollectParameters(this, 2);
      CPlayerPed::SetWantedLevelNoDrop(CWorld::Players[ScriptParams[0]].pPed, ScriptParams[1]);
      return 0;
    case 271:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      m_WantedLevel = FindPlayerWanted(ScriptParams[0])->m_WantedLevel;
      v62 = __OFSUB__(m_WantedLevel, ScriptParams[1]);
      v60 = m_WantedLevel == ScriptParams[1];
      v61 = m_WantedLevel - ScriptParams[1] < 0;
LABEL_94:
      v64 = !(v61 ^ v62 | v60);
LABEL_142:
      CRunningScript::UpdateCompareFlag(this, v64);
      return v3;
    case 272:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      CPlayerPed::SetWantedLevel(CWorld::Players[ScriptParams[0]].pPed, 0);
      return v3;
    case 273:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      v65 = ScriptParams[0];
      if ( ScriptParams[0] != 1 )
        v65 = 0;
      this->DeatharrestCheckEnabled = v65;
      return v3;
    case 274:
      DoneDeatharrest = this->DoneDeatharrest;
      LOBYTE(PlayerState) = DoneDeatharrest != 0;
      goto LABEL_123;
    case 276:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v67 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v67 = 0;
      }
      CPed::GrantAmmo(v67, (eWeaponType)ScriptParams[1], ScriptParams[2]);
      return 0;
    case 279:
      CRunningScript::CollectParameters(this, 1);
      PlayerState = CWorld::Players[ScriptParams[0]].PlayerState;
      if ( PlayerState != 1 )
        LOBYTE(PlayerState) = 0;
      goto LABEL_123;
    case 280:
      LOBYTE(v68) = 1;
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0 )
        goto LABEL_119;
      if ( CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        goto LABEL_118;
      v69 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !v69 )
        goto LABEL_118;
      v70 = *((_DWORD *)v69 + 275);
      v71 = 0;
      v72 = 0;
      v21 = v70 == 56;
      v73 = v70 & 0xFFFFFFFE;
      if ( v21 )
        v71 = 1;
      if ( v73 == 54 )
        v72 = 1;
      LOBYTE(v68) = v71 | v72;
      goto LABEL_119;
    case 281:
      LOBYTE(v68) = 1;
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0 )
        goto LABEL_119;
      v74 = (unsigned int)ScriptParams[0] >> 8;
      if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0])
        && (v75 = CPools::ms_pVehiclePool->m_aStorage[v74]) != 0
        && (v75[58] & 0xF8) != 40 )
      {
        v68 = (*(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[v74][1068] >> 30) & 1;
      }
      else
      {
LABEL_118:
        LOBYTE(v68) = 1;
      }
LABEL_119:
      v76 = this;
      LOBYTE(PlayerState) = v68;
      goto LABEL_124;
    case 290:
      CRunningScript::CollectParameters(this, 1);
      if ( CWorld::Players[ScriptParams[0]].pPed->m_nPedState == PED_DRIVING )
      {
        Pad = CPad::GetPad(ScriptParams[0]);
        LOBYTE(PlayerState) = CPad::GetHorn(Pad, 1);
      }
      else
      {
LABEL_122:
        LOBYTE(PlayerState) = 0;
      }
LABEL_123:
      v76 = this;
LABEL_124:
      CRunningScript::UpdateCompareFlag(v76, PlayerState);
      return 0;
    case 297:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v78 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v78 = 0;
      }
      switch ( ScriptParams[2] )
      {
        case 0x118:
        case 0x119:
        case 0x11A:
        case 0x11C:
          if ( ScriptParams[1] != 6 )
            goto LABEL_176;
          v80 = 0;
          goto LABEL_174;
        case 0x11B:
          if ( ScriptParams[1] != 6 )
            goto LABEL_176;
          v80 = 7;
          goto LABEL_174;
        case 0x11D:
          if ( ScriptParams[1] != 6 )
            goto LABEL_176;
          v80 = 2;
          goto LABEL_174;
        case 0x11E:
          if ( ScriptParams[1] != 6 )
            goto LABEL_176;
          v80 = 4;
          goto LABEL_174;
        case 0x11F:
          if ( ScriptParams[1] != 6 )
            goto LABEL_176;
          v80 = 5;
LABEL_174:
          ScriptParams[2] = v80;
          goto LABEL_175;
        default:
          if ( ScriptParams[1] == 6 )
          {
LABEL_175:
            v97 = (CCopPed *)CPed::operator new(0x7CCu);
            CCopPed::CCopPed(v97, (eCopType)ScriptParams[2]);
          }
          else
          {
LABEL_176:
            v98 = ScriptParams[1] | 1;
            v99 = (CEmergencyPed *)CPed::operator new(0x7A4u);
            v97 = (CCopPed *)v99;
            if ( v98 == 19 )
              CEmergencyPed::CEmergencyPed(v99, ScriptParams[1], ScriptParams[2]);
            else
              CCivilianPed::CCivilianPed((CCivilianPed *)v99, (ePedType)ScriptParams[1], ScriptParams[2]);
          }
          CPed::SetCharCreatedBy(v97, 2u);
          *(_DWORD *)&v97->m_nPedFlags &= ~0x80000000;
          v3 = 0;
          CTaskSimpleCarSetPedInAsDriver::CTaskSimpleCarSetPedInAsDriver(Coors, v78, 0);
          Coors[0].m_bWarpingInToCar = 1;
          CTaskSimpleCarSetPedInAsDriver::ProcessPed(Coors, v97);
          CTaskSimpleCarSetPedInAsDriver::~CTaskSimpleCarSetPedInAsDriver(Coors);
          CWorld::Add(v97);
          ++CPopulation::ms_nTotalMissionPeds;
          ScriptParams[0] = CPools::ms_pPedPool->m_aFlags[-1093107909
                                                        * (((char *)v97 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)v97 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2));
          CRunningScript::StoreParameters(this, 1);
          if ( !this->IsThisAMissionScript )
            return v3;
          v3 = 0;
          v93 = ScriptParams[0];
          v94 = &CTheScripts::MissionCleanUp.cleanup_entities[0].Id;
          v100 = 0;
          break;
      }
      break;
    default:
      return -1;
  }
  while ( *((_BYTE *)v94 - 4) )
  {
    ++v100;
    v94 += 2;
    if ( (unsigned __int16)v100 >= 0x4Bu )
      return v3;
  }
  v96 = 2;
LABEL_185:
  v3 = 0;
  *((_BYTE *)v94 - 4) = v96;
  *v94 = v93;
  ++CTheScripts::MissionCleanUp.Count;
  return v3;
}
// FC: using guessed type int elf_hash_bucket[16411];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0032E7F8) --------------------------------------------------------
void __fastcall CRunningScript::GetCorrectPedModelIndexForEmergencyServiceType(
        CRunningScript *this,
        Int32 PedType,
        Int32 *pPedModelIndex)
{
  Int32 v3; // r0

  switch ( *pPedModelIndex )
  {
    case 280:
    case 281:
    case 282:
    case 284:
      if ( PedType == 6 )
      {
        v3 = 0;
        goto LABEL_12;
      }
      break;
    case 283:
      if ( PedType == 6 )
      {
        v3 = 7;
        goto LABEL_12;
      }
      break;
    case 285:
      if ( PedType == 6 )
      {
        v3 = 2;
        goto LABEL_12;
      }
      break;
    case 286:
      if ( PedType == 6 )
      {
        v3 = 4;
        goto LABEL_12;
      }
      break;
    case 287:
      if ( PedType == 6 )
      {
        v3 = 5;
LABEL_12:
        *pPedModelIndex = v3;
      }
      break;
    default:
      return;
  }
}

//----- (0032E83C) --------------------------------------------------------
void __fastcall CRunningScript::SetCharCoordinates(
        CRunningScript *this,
        CPed *pPed,
        float NewX,
        float NewY,
        float NewZ,
        int bWarpGang,
        int bOffset)
{
  float GroundZForCoord; // s20
  CVehicle *m_pMyVehicle; // r6
  RwReal v14; // s20
  CPedGroup *PedsGroup; // r0
  CPedGroup *v16; // r6
  _BOOL4 IsLeader; // r0
  bool v18; // zf
  CVector Coors; // [sp+4h] [bp-34h] BYREF

  GroundZForCoord = NewZ;
  if ( *((unsigned __int8 *)&pPed->m_nPedFlags + 1) << 31 )
    m_pMyVehicle = pPed->m_pMyVehicle;
  else
    m_pMyVehicle = 0;
  if ( NewZ <= -100.0 )
    GroundZForCoord = CWorld::FindGroundZForCoord(NewX, NewY);
  if ( m_pMyVehicle )
  {
    v14 = GroundZForCoord + CEntity::GetDistanceFromCentreOfMassToBaseOfModel(m_pMyVehicle);
    (*((void (__fastcall **)(CVehicle *, _DWORD, _DWORD, _DWORD, _DWORD))m_pMyVehicle->_vptr$CPlaceable + 15))(
      m_pMyVehicle,
      LODWORD(NewX),
      LODWORD(NewY),
      LODWORD(v14),
      0);
    Coors.y = NewY;
    Coors.x = NewX;
    Coors.z = v14;
    CTheScripts::ClearSpaceForMissionEntity(&Coors, m_pMyVehicle);
  }
  else
  {
    if ( bOffset == 1 )
      GroundZForCoord = GroundZForCoord + CEntity::GetDistanceFromCentreOfMassToBaseOfModel(pPed);
    Coors.y = NewY;
    Coors.x = NewX;
    Coors.z = GroundZForCoord;
    CTheScripts::ClearSpaceForMissionEntity(&Coors, pPed);
    PedsGroup = CPedGroups::GetPedsGroup(pPed);
    v16 = PedsGroup;
    if ( !PedsGroup )
      goto LABEL_16;
    IsLeader = CPedGroupMembership::IsLeader(&PedsGroup->m_membership, pPed);
    v18 = IsLeader;
    if ( IsLeader )
      v18 = bWarpGang == 1;
    if ( v18 )
    {
      Coors.y = NewY;
      Coors.x = NewX;
      Coors.z = GroundZForCoord;
      CPedGroup::Teleport(v16, &Coors);
    }
    else
    {
LABEL_16:
      (*((void (__fastcall **)(CPed *, _DWORD, _DWORD, float, _DWORD))pPed->_vptr$CPlaceable + 15))(
        pPed,
        LODWORD(NewX),
        LODWORD(NewY),
        COERCE_FLOAT(LODWORD(GroundZForCoord)),
        0);
    }
  }
}
// FC: using guessed type int elf_hash_bucket[16411];

//----- (0032E94C) --------------------------------------------------------
bool __fastcall CTheScripts::CheckStreamedScriptVersion(RwStream_0 *pStream, unsigned __int8 *strFileName)
{
  return 1;
}

//----- (0032E950) --------------------------------------------------------
char *CTheScripts::CurrentMissionName()
{
  CRunningScript *v0; // r6
  Char *ScriptName; // r5

  v0 = CTheScripts::pActiveScripts;
  if ( !CTheScripts::pActiveScripts )
    return &byte_61CADE;
  while ( 1 )
  {
    if ( v0->IsThisAMissionScript )
    {
      ScriptName = v0->ScriptName;
      if ( strcmp((const char *)v0->ScriptName, "noname") )
        break;
    }
    v0 = v0->pNext;
    if ( !v0 )
      return &byte_61CADE;
  }
  return (char *)ScriptName;
}
// 61CADE: using guessed type char byte_61CADE;

//----- (0032E9A8) --------------------------------------------------------
void __fastcall CDecisionMakerTypes::CDecisionMakerTypes(CDecisionMakerTypes *this)
{
  this->m_iNoOfDecisionMakers = 0;
  CDecisionMaker::CDecisionMaker(this->m_decisionMakers);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[1]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[2]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[3]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[4]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[5]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[6]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[7]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[8]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[9]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[10]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[11]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[12]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[13]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[14]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[15]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[16]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[17]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[18]);
  CDecisionMaker::CDecisionMaker(&this->m_decisionMakers[19]);
  CDecisionMaker::CDecisionMaker(&this->m_defaultRandomPedDecisionMaker);
  CDecisionMaker::CDecisionMaker(&this->m_defaultMissionPedDecisionMaker);
  CDecisionMaker::CDecisionMaker(&this->m_defaultPlayerPedDecisionMaker);
  CDecisionMaker::CDecisionMaker(&this->m_defaultRandomPedGroupDecisionMaker);
  CDecisionMaker::CDecisionMaker(&this->m_defaultMissionPedGroupDecisionMaker);
  *(_DWORD *)&CDecisionMakerTypes::ScriptReferenceIndex[16] = 65537;
  *(_DWORD *)&CDecisionMakerTypes::ScriptReferenceIndex[18] = 65537;
  *(_QWORD *)CDecisionMakerTypes::ScriptReferenceIndex = 0x1000100010001LL;
  *(_QWORD *)&CDecisionMakerTypes::ScriptReferenceIndex[4] = 0x1000100010001LL;
  *(_QWORD *)CDecisionMakerTypes::m_bIsActive = 0LL;
  *(_QWORD *)&CDecisionMakerTypes::m_bIsActive[8] = 0LL;
  *(_QWORD *)CDecisionMakerTypes::m_types = 0LL;
  *(_QWORD *)&CDecisionMakerTypes::m_types[8] = 0LL;
  *(_QWORD *)&CDecisionMakerTypes::ScriptReferenceIndex[8] = 0x1000100010001LL;
  *(_QWORD *)&CDecisionMakerTypes::ScriptReferenceIndex[12] = 0x1000100010001LL;
  *(_DWORD *)&CDecisionMakerTypes::m_bIsActive[16] = 0;
  *(_DWORD *)&CDecisionMakerTypes::m_types[16] = 0;
}

//----- (0032EAEC) --------------------------------------------------------
void __fastcall CDecisionMaker::CDecisionMaker(CDecisionMaker *this)
{
  int v2; // r6
  CDecisionMaker *v3; // r5

  CDecision::CDecision(this->m_decisions);
  CDecision::CDecision(&this->m_decisions[1]);
  CDecision::CDecision(&this->m_decisions[2]);
  CDecision::CDecision(&this->m_decisions[3]);
  CDecision::CDecision(&this->m_decisions[4]);
  CDecision::CDecision(&this->m_decisions[5]);
  CDecision::CDecision(&this->m_decisions[6]);
  CDecision::CDecision(&this->m_decisions[7]);
  CDecision::CDecision(&this->m_decisions[8]);
  CDecision::CDecision(&this->m_decisions[9]);
  CDecision::CDecision(&this->m_decisions[10]);
  CDecision::CDecision(&this->m_decisions[11]);
  CDecision::CDecision(&this->m_decisions[12]);
  CDecision::CDecision(&this->m_decisions[13]);
  CDecision::CDecision(&this->m_decisions[14]);
  CDecision::CDecision(&this->m_decisions[15]);
  CDecision::CDecision(&this->m_decisions[16]);
  CDecision::CDecision(&this->m_decisions[17]);
  CDecision::CDecision(&this->m_decisions[18]);
  CDecision::CDecision(&this->m_decisions[19]);
  CDecision::CDecision(&this->m_decisions[20]);
  CDecision::CDecision(&this->m_decisions[21]);
  CDecision::CDecision(&this->m_decisions[22]);
  CDecision::CDecision(&this->m_decisions[23]);
  CDecision::CDecision(&this->m_decisions[24]);
  CDecision::CDecision(&this->m_decisions[25]);
  CDecision::CDecision(&this->m_decisions[26]);
  CDecision::CDecision(&this->m_decisions[27]);
  CDecision::CDecision(&this->m_decisions[28]);
  CDecision::CDecision(&this->m_decisions[29]);
  CDecision::CDecision(&this->m_decisions[30]);
  CDecision::CDecision(&this->m_decisions[31]);
  CDecision::CDecision(&this->m_decisions[32]);
  CDecision::CDecision(&this->m_decisions[33]);
  CDecision::CDecision(&this->m_decisions[34]);
  CDecision::CDecision(&this->m_decisions[35]);
  CDecision::CDecision(&this->m_decisions[36]);
  CDecision::CDecision(&this->m_decisions[37]);
  CDecision::CDecision(&this->m_decisions[38]);
  CDecision::CDecision(&this->m_decisions[39]);
  CDecision::CDecision(&this->m_decisions[40]);
  v2 = 41;
  v3 = this;
  do
  {
    CDecision::SetDefault(v3->m_decisions);
    v3 = (CDecisionMaker *)((char *)v3 + 60);
    --v2;
  }
  while ( v2 );
}

//----- (0032EC52) --------------------------------------------------------
void __fastcall CTaskSimpleFinishBrain::~CTaskSimpleFinishBrain(CTaskSimpleFinishBrain *this)
{
  void *v1; // r0

  CTask::~CTask(this);
  sub_197118(v1);
}
// 32EC5E: variable 'v1' is possibly undefined

//----- (0032EC64) --------------------------------------------------------
CTask *__fastcall CTaskSimpleFinishBrain::Clone(const CTaskSimpleFinishBrain *this)
{
  CTaskSimple *v1; // r0
  CTask *result; // r0

  v1 = (CTaskSimple *)CTask::operator new(8u);
  CTaskSimple::CTaskSimple(v1);
  result->_vptr$CTask = (int (**)(void))&off_665664;
  return result;
}
// 32EC7A: variable 'result' is possibly undefined
// 665664: using guessed type void *off_665664;

//----- (0032EC84) --------------------------------------------------------
int __fastcall CTaskSimpleFinishBrain::GetTaskType(const CTaskSimpleFinishBrain *this)
{
  return 1801;
}

//----- (0032EC8A) --------------------------------------------------------
bool __fastcall CTaskSimpleNone::MakeAbortable(
        CTaskSimpleNone *this,
        CPed *pPed,
        const int iPriority,
        const CEvent *pEvent)
{
  return 1;
}

//----- (0032EC90) --------------------------------------------------------
void __fastcall CTaskSimpleFinishBrain::Serialize(CTaskSimpleFinishBrain *this)
{
  int v2; // r5
  _DWORD *v3; // r6
  int v4; // r0

  v2 = (*((int (__fastcall **)(CTaskSimpleFinishBrain *))this->_vptr$CTask + 5))(this);
  if ( UseDataFence )
    AddDataFence();
  v3 = malloc(4u);
  *v3 = v2;
  CGenericGameStorage::_SaveDataToWorkBuffer(v3, 4);
  free(v3);
  if ( (*((int (__fastcall **)(CTaskSimpleFinishBrain *))this->_vptr$CTask + 5))(this) != 1801 )
  {
    v4 = (*((int (__fastcall **)(CTaskSimpleFinishBrain *))this->_vptr$CTask + 5))(this);
    sub_1941C4(1801, v4);
  }
}

//----- (0032ED00) --------------------------------------------------------
bool __fastcall CTaskSimpleNone::ProcessPed(CTaskSimpleNone *this, CPed *pPed)
{
  return 1;
}

//----- (0032ED04) --------------------------------------------------------
void __fastcall CorrectAspect(float *x, float *y, float *width, float *height)
{
  float v8; // s16
  float v9; // s16
  float screenWidth; // s0
  float v11; // s20
  int v12; // r4

  OS_ScreenGetWidth();
  OS_ScreenGetHeight();
  v8 = (float)(unsigned int)OS_ScreenGetWidth();
  v9 = 1.3333 / (float)(v8 / (float)(unsigned int)OS_ScreenGetHeight());
  *width = *width * (float)((float)((float)RsGlobal.screenWidth / 640.0) * v9);
  *height = *height * (float)((float)RsGlobal.screenHeight / 448.0);
  screenWidth = (float)RsGlobal.screenWidth;
  v11 = *x;
  v12 = OS_ScreenGetWidth();
  *x = (float)((float)(v9 * v11) * (float)(screenWidth / 640.0))
     + (float)((float)(v12 - 4 * (int)OS_ScreenGetHeight() / 3u) * 0.5);
  *y = *y * (float)((float)RsGlobal.screenHeight / 448.0);
}

//----- (0032EE04) --------------------------------------------------------
void __fastcall CRunningScript::ScriptTaskPickUpObject(CRunningScript *this, Int32 CurrCommand)
{
  __int64 v4; // kr00_8
  uint8 *v5; // r0
  uint8 nOrientateFlags; // r8
  _BOOL4 v7; // r9
  Int32 v8; // r10
  CTaskSimpleHoldEntity *v9; // r0
  CTaskSimpleHoldEntity *v10; // r11
  int32 v11; // r0
  Int32 v12; // r5
  CPed *v13; // r4
  int v14; // r2
  int VacantSlot; // r0
  CTaskSimpleAffectSecondaryBehaviour *v16; // r4
  uint8 v17; // [sp+10h] [bp-60h]
  CEntity *pEntity; // [sp+14h] [bp-5Ch]
  Int32 v19; // [sp+18h] [bp-58h]
  CVector pVecOffset; // [sp+1Ch] [bp-54h] BYREF
  Char pAnimGroupName[16]; // [sp+28h] [bp-48h] BYREF
  Char pStringToFill[24]; // [sp+38h] [bp-38h] BYREF

  CRunningScript::CollectParameters(this, 7);
  v4 = *(_QWORD *)ScriptParams;
  v19 = CurrCommand;
  if ( ScriptParams[1] >= 0
    && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
  {
    v5 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
  }
  else
  {
    v5 = 0;
  }
  pEntity = (CEntity *)v5;
  v17 = ScriptParams[5];
  nOrientateFlags = ScriptParams[6];
  pVecOffset = *(CVector *)&ScriptParams[2];
  CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 0x18u);
  CRunningScript::ReadTextLabelFromScript(this, pAnimGroupName, 0x10u);
  v7 = !strcmp((const char *)pStringToFill, "NULL") || strcmp((const char *)pAnimGroupName, "NULL") == 0;
  CRunningScript::CollectParameters(this, 1);
  v8 = ScriptParams[0];
  v9 = (CTaskSimpleHoldEntity *)CTask::operator new(0x3Cu);
  v10 = v9;
  if ( v7 )
  {
    CTaskSimpleHoldEntity::CTaskSimpleHoldEntity(
      v9,
      pEntity,
      &pVecOffset,
      v17,
      nOrientateFlags,
      ANIM_STD_NUM,
      ANIM_STD_PED,
      0);
  }
  else
  {
    v11 = 16;
    if ( !v8 )
      v11 = 24;
    CTaskSimpleHoldEntity::CTaskSimpleHoldEntity(
      v10,
      pEntity,
      &pVecOffset,
      v17,
      nOrientateFlags,
      pStringToFill,
      pAnimGroupName,
      v11);
  }
  v12 = CurrCommand;
  if ( (_DWORD)v4 == -1 )
  {
    if ( CurrCommand == 1802 )
    {
      v16 = (CTaskSimpleAffectSecondaryBehaviour *)CTask::operator new(0x14u);
      CTaskSimpleAffectSecondaryBehaviour::CTaskSimpleAffectSecondaryBehaviour(v16, 1, 4, v10);
      CTaskComplexSequence::AddTask(&CTaskSequences::ms_taskSequence[CTaskSequences::ms_iActiveSequence], v16);
    }
  }
  else
  {
    if ( (int)v4 >= 0 && CPools::ms_pPedPool->m_aFlags[(unsigned int)v4 >> 8] == (unsigned __int8)v4 )
      v13 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)v4 >> 8];
    else
      v13 = 0;
    if ( v19 == 1802 )
      v14 = 4;
    else
      v14 = 0;
    CTaskManager::SetTaskSecondary(&v13->m_pPedIntelligence->m_taskManager, v10, v14);
    VacantSlot = CPedScriptedTaskRecord::GetVacantSlot();
    CPedScriptedTaskRecordData::Set(&CPedScriptedTaskRecord::ms_scriptedTasks[VacantSlot], v13, v12, v10);
  }
}
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0032EFF0) --------------------------------------------------------
void CTheScripts::ClearAllSuppressedCarModels()
{
  memset(CTheScripts::SuppressedVehicleModels, 255, sizeof(CTheScripts::SuppressedVehicleModels));
}

//----- (0032F008) --------------------------------------------------------
void __fastcall CTheScripts::AddToSuppressedCarModelArray(Int32 NewCarModel)
{
  int v1; // r1
  Int32 *v2; // lr
  int v3; // r1
  int v4; // r3
  int v5; // r2

  v1 = 0;
  while ( CTheScripts::SuppressedVehicleModels[v1] != NewCarModel )
  {
    if ( (unsigned int)++v1 >= 0x28 )
    {
      v2 = CTheScripts::SuppressedVehicleModels;
      v3 = 0;
      do
      {
        v4 = 0;
        v5 = *v2 + 1;
        if ( *v2 != -1 )
          v4 = 1;
        v3 += v4;
        v2 = &CTheScripts::SuppressedVehicleModels[(unsigned __int8)v3];
      }
      while ( (unsigned __int8)v3 <= 0x27u && v5 );
      *v2 = NewCarModel;
      return;
    }
  }
}

//----- (0032F064) --------------------------------------------------------
Bool8 __fastcall CTheScripts::HasCarModelBeenSuppressed(Int32 CarModel)
{
  unsigned __int8 i; // r1

  for ( i = 0; i <= 0x27u; ++i )
  {
    if ( CTheScripts::SuppressedVehicleModels[i] == CarModel )
      return 1;
  }
  return 0;
}

//----- (0032F08C) --------------------------------------------------------
void __fastcall CTheScripts::RemoveFromSuppressedCarModelArray(Int32 CarModelToRemove)
{
  int32x4_t v1; // q8
  int i; // r0
  unsigned __int64 v3; // d18

  v1 = vdupq_n_s32(CarModelToRemove);
  for ( i = 0; i != 40; i += 4 )
  {
    v3 = vmovn_s32(vceqq_s32(*(int32x4_t *)&CTheScripts::SuppressedVehicleModels[i], v1)).n64_u64[0];
    if ( (unsigned __int16)v3 << 31 )
      CTheScripts::SuppressedVehicleModels[i] = -1;
    if ( WORD1(v3) << 31 )
      CTheScripts::SuppressedVehicleModels[i + 1] = -1;
    if ( WORD2(v3) << 31 )
      CTheScripts::SuppressedVehicleModels[i + 2] = -1;
    if ( HIWORD(v3) << 31 )
      CTheScripts::SuppressedVehicleModels[i + 3] = -1;
  }
}

//----- (0032F120) --------------------------------------------------------
void CTheScripts::ClearAllVehicleModelsBlockedByScript()
{
  memset(CTheScripts::VehicleModelsBlockedByScript, 255, sizeof(CTheScripts::VehicleModelsBlockedByScript));
}

//----- (0032F138) --------------------------------------------------------
void __fastcall CTheScripts::AddToVehicleModelsBlockedByScript(Int32 NewVehicleModel)
{
  bool v1; // zf
  bool v2; // zf
  bool v3; // zf
  bool v4; // zf
  bool v5; // zf
  bool v6; // zf
  bool v7; // zf
  bool v8; // zf
  bool v9; // zf
  bool v10; // zf
  int v11; // r1
  Int32 *v12; // lr
  int v13; // r3

  v1 = CTheScripts::VehicleModelsBlockedByScript[0] == NewVehicleModel;
  if ( CTheScripts::VehicleModelsBlockedByScript[0] != NewVehicleModel )
    v1 = CTheScripts::VehicleModelsBlockedByScript[1] == NewVehicleModel;
  if ( !v1 )
  {
    v2 = CTheScripts::VehicleModelsBlockedByScript[2] == NewVehicleModel;
    if ( CTheScripts::VehicleModelsBlockedByScript[2] != NewVehicleModel )
      v2 = CTheScripts::VehicleModelsBlockedByScript[3] == NewVehicleModel;
    if ( !v2 )
    {
      v3 = CTheScripts::VehicleModelsBlockedByScript[4] == NewVehicleModel;
      if ( CTheScripts::VehicleModelsBlockedByScript[4] != NewVehicleModel )
        v3 = CTheScripts::VehicleModelsBlockedByScript[5] == NewVehicleModel;
      if ( !v3 )
      {
        v4 = CTheScripts::VehicleModelsBlockedByScript[6] == NewVehicleModel;
        if ( CTheScripts::VehicleModelsBlockedByScript[6] != NewVehicleModel )
          v4 = CTheScripts::VehicleModelsBlockedByScript[7] == NewVehicleModel;
        if ( !v4 )
        {
          v5 = CTheScripts::VehicleModelsBlockedByScript[8] == NewVehicleModel;
          if ( CTheScripts::VehicleModelsBlockedByScript[8] != NewVehicleModel )
            v5 = CTheScripts::VehicleModelsBlockedByScript[9] == NewVehicleModel;
          if ( !v5 )
          {
            v6 = CTheScripts::VehicleModelsBlockedByScript[10] == NewVehicleModel;
            if ( CTheScripts::VehicleModelsBlockedByScript[10] != NewVehicleModel )
              v6 = CTheScripts::VehicleModelsBlockedByScript[11] == NewVehicleModel;
            if ( !v6 )
            {
              v7 = CTheScripts::VehicleModelsBlockedByScript[12] == NewVehicleModel;
              if ( CTheScripts::VehicleModelsBlockedByScript[12] != NewVehicleModel )
                v7 = CTheScripts::VehicleModelsBlockedByScript[13] == NewVehicleModel;
              if ( !v7 )
              {
                v8 = CTheScripts::VehicleModelsBlockedByScript[14] == NewVehicleModel;
                if ( CTheScripts::VehicleModelsBlockedByScript[14] != NewVehicleModel )
                  v8 = CTheScripts::VehicleModelsBlockedByScript[15] == NewVehicleModel;
                if ( !v8 )
                {
                  v9 = CTheScripts::VehicleModelsBlockedByScript[16] == NewVehicleModel;
                  if ( CTheScripts::VehicleModelsBlockedByScript[16] != NewVehicleModel )
                    v9 = CTheScripts::VehicleModelsBlockedByScript[17] == NewVehicleModel;
                  if ( !v9 )
                  {
                    v10 = CTheScripts::VehicleModelsBlockedByScript[18] == NewVehicleModel;
                    if ( CTheScripts::VehicleModelsBlockedByScript[18] != NewVehicleModel )
                      v10 = CTheScripts::VehicleModelsBlockedByScript[19] == NewVehicleModel;
                    if ( !v10 )
                    {
                      v11 = CTheScripts::VehicleModelsBlockedByScript[0] != -1;
                      v12 = &CTheScripts::VehicleModelsBlockedByScript[v11];
                      if ( CTheScripts::VehicleModelsBlockedByScript[0] != -1 )
                      {
                        do
                        {
                          v13 = *v12 + 1;
                          v11 += *v12 != -1;
                          v12 = &CTheScripts::VehicleModelsBlockedByScript[(unsigned __int8)v11];
                        }
                        while ( (unsigned __int8)v11 <= 0x13u && v13 );
                      }
                      *v12 = NewVehicleModel;
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

//----- (0032F20C) --------------------------------------------------------
Bool8 __fastcall CTheScripts::HasVehicleModelBeenBlockedByScript(Int32 VehicleModel)
{
  return CTheScripts::VehicleModelsBlockedByScript[0] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[1] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[2] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[3] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[4] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[5] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[6] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[7] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[8] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[9] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[10] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[11] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[12] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[13] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[14] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[15] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[16] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[17] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[18] == VehicleModel
      || CTheScripts::VehicleModelsBlockedByScript[19] == VehicleModel;
}

//----- (0032F354) --------------------------------------------------------
void __fastcall CTheScripts::RemoveFromVehicleModelsBlockedByScript(Int32 VehicleModelToRemove)
{
  if ( CTheScripts::VehicleModelsBlockedByScript[0] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[0] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[1] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[1] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[2] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[2] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[3] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[3] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[4] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[4] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[5] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[5] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[6] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[6] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[7] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[7] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[8] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[8] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[9] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[9] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[10] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[10] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[11] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[11] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[12] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[12] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[13] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[13] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[14] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[14] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[15] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[15] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[16] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[16] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[17] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[17] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[18] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[18] = -1;
  if ( CTheScripts::VehicleModelsBlockedByScript[19] == VehicleModelToRemove )
    CTheScripts::VehicleModelsBlockedByScript[19] = -1;
}

//----- (0032F5D8) --------------------------------------------------------
void __fastcall CScriptsForBrains::CScriptsForBrains(CScriptsForBrains *this)
{
  int v1; // r3
  char *v2; // r4

  v1 = 0;
  do
  {
    this->ScriptBrainArray[v1].StreamedScriptIndex = -1;
    v2 = (char *)this + v1 * 20;
    ++v1;
    v2[4] = 1;
    *((_WORD *)v2 + 1) = -1;
    *((_DWORD *)v2 + 2) = 1084227584;
    *((_DWORD *)v2 + 3) = 0;
    *((_DWORD *)v2 + 4) = 0;
  }
  while ( v1 != 70 );
}

//----- (0032F60A) --------------------------------------------------------
void __fastcall CScriptsForBrains::Init(CScriptsForBrains *this)
{
  int v1; // r3
  char *v2; // r4

  v1 = 0;
  do
  {
    this->ScriptBrainArray[v1].StreamedScriptIndex = -1;
    v2 = (char *)this + v1 * 20;
    ++v1;
    v2[4] = 1;
    *((_WORD *)v2 + 1) = -1;
    *((_DWORD *)v2 + 2) = 1084227584;
    *((_DWORD *)v2 + 3) = 0;
    *((_DWORD *)v2 + 4) = 0;
  }
  while ( v1 != 70 );
}

//----- (0032F63C) --------------------------------------------------------
void __fastcall CScriptsForBrains::SwitchAllObjectBrainsWithThisID(
        CScriptsForBrains *this,
        Int8 object_grouping_id,
        bool bBrainOn)
{
  int i; // r3
  char *v4; // lr

  if ( object_grouping_id >= 0 )
  {
    for ( i = 0; i != 1400; i += 20 )
    {
      v4 = (char *)this + i;
      if ( v4[3] == object_grouping_id )
        v4[4] = bBrainOn;
    }
  }
}

//----- (0032F666) --------------------------------------------------------
void __fastcall CScriptsForBrains::AddNewScriptBrain(
        CScriptsForBrains *this,
        Int16 StreamedScriptIndex,
        Int16 PedModelOrPedGeneratorIndex,
        UInt16 Percentage,
        Int8 BrainType,
        Int8 object_grouping_id,
        float ObjectActivationRange)
{
  int v7; // r4
  float v8; // s0
  unsigned __int8 v9; // r6
  int v10; // r5
  script_brain_struct *v11; // r0

  v7 = 0;
  v8 = ObjectActivationRange;
  v9 = 0;
  do
  {
    v10 = (unsigned __int16)this->ScriptBrainArray[v7].StreamedScriptIndex;
    v9 += v10 != 0xFFFF;
    v7 = v9;
  }
  while ( v9 <= 0x45u && v10 != 0xFFFF );
  if ( v10 == 0xFFFF )
  {
    if ( ObjectActivationRange <= 0.0 )
      v8 = 5.0;
    this->ScriptBrainArray[v9].StreamedScriptIndex = StreamedScriptIndex;
    v11 = &this->ScriptBrainArray[v9];
    v11->_anon_0.RandomPedData.PedModelOrPedGeneratorIndex = PedModelOrPedGeneratorIndex;
    v11->_anon_0.RandomPedData.PercentageChance = Percentage;
    v11->ObjectGroupingID = object_grouping_id;
    v11->TypeOfBrain = BrainType;
    v11->bBrainActive = 1;
    v11->ObjectBrainActivationRange = v8;
  }
}

//----- (0032F6E0) --------------------------------------------------------
void __fastcall CScriptsForBrains::AddNewStreamedScriptBrainForCodeUse(
        CScriptsForBrains *this,
        Int16 StreamedScriptIndex,
        Char *pScriptName,
        Int8 BrainType)
{
  int v5; // r3
  unsigned __int8 v6; // r5
  int v7; // r6
  script_brain_struct *v8; // r4

  v5 = 0;
  v6 = 0;
  do
  {
    v7 = (unsigned __int16)this->ScriptBrainArray[v5].StreamedScriptIndex;
    v6 += v7 != 0xFFFF;
    v5 = v6;
  }
  while ( v6 <= 0x45u && v7 != 0xFFFF );
  if ( v7 == 0xFFFF )
  {
    v8 = &this->ScriptBrainArray[v6];
    v8->StreamedScriptIndex = StreamedScriptIndex;
    strcpy((char *)&v8->_anon_0, (const char *)pScriptName);
    v8->TypeOfBrain = BrainType;
    *(_WORD *)&v8->ObjectGroupingID = 511;
    v8->ObjectBrainActivationRange = 5.0;
  }
}

//----- (0032F74C) --------------------------------------------------------
void __fastcall CScriptsForBrains::CheckIfNewEntityNeedsScript(
        CScriptsForBrains *this,
        CEntity *pNewEntity,
        Int8 BrainType,
        CPedGenerator *pPedGen)
{
  script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *p_anon_0; // r5
  unsigned int v8; // r6

  if ( BrainType )
  {
    if ( (BYTE2(pNewEntity[5].m_pRwObject) & 0x30) != 0 )
      return;
  }
  else if ( (HIWORD(pNewEntity[19].m_pRwObject) & 0x180) != 0 )
  {
    return;
  }
  p_anon_0 = &this->ScriptBrainArray[0]._anon_0;
  v8 = 0;
  while ( p_anon_0[-2].ScriptName[6] != BrainType
       || pNewEntity->m_nModelIndex != p_anon_0->RandomPedData.PedModelOrPedGeneratorIndex
       || (int)(float)((float)((float)(unsigned __int16)rand() * 0.000015259) * 100.0) >= p_anon_0->RandomPedData.PercentageChance )
  {
    ++v8;
    p_anon_0 = (script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *)((char *)p_anon_0 + 20);
    if ( v8 >= 0x46 )
      return;
  }
  CScriptsForBrains::StartOrRequestNewStreamedScriptBrain(this, v8, pNewEntity, BrainType, 1);
}

//----- (0032F7EC) --------------------------------------------------------
void __fastcall CScriptsForBrains::StartOrRequestNewStreamedScriptBrain(
        CScriptsForBrains *this,
        int ScriptBrainIndex,
        CEntity *pEntity,
        unsigned int BrainType,
        int a5)
{
  RwObject_0 *m_pRwObject; // r0
  __int16 v10; // r2
  int v11; // r0
  CEntity *v12; // r3
  bool v13; // cc
  entity_waiting_for_script_brain *v14; // r9
  int32 v15; // r0
  bool v16; // zf
  __int16 v17; // r2
  RwObject_0 *v18; // r0
  int v19; // r0
  CEntity *v20; // r3
  entity_waiting_for_script_brain *v21; // r4

  if ( a5 )
  {
    if ( this->ScriptBrainArray[ScriptBrainIndex].bBrainActive )
    {
      switch ( BrainType )
      {
        case 0u:
        case 3u:
          if ( (HIWORD(pEntity[19].m_pRwObject) & 0x180) == 0 )
            goto LABEL_7;
          break;
        case 1u:
        case 4u:
          if ( (BYTE2(pEntity[5].m_pRwObject) & 0x30) == 0 )
            goto LABEL_7;
          break;
        default:
          goto LABEL_7;
      }
    }
  }
  else
  {
LABEL_7:
    if ( BrainType == 1 )
    {
      if ( a5 )
      {
        m_pRwObject = pEntity[5].m_pRwObject;
        LOWORD(pEntity[6].m_transform.m_translate.x) = ScriptBrainIndex;
        v10 = -1;
        pEntity[5].m_pRwObject = (RwObject_0 *)((unsigned int)m_pRwObject & 0xFFCFFFFF | 0x100000);
        v11 = 0;
        do
        {
          v12 = CTheScripts::EntitiesWaitingForScriptBrain[v11].pEntity;
          if ( v12 )
          {
            if ( v12 == pEntity )
              goto LABEL_18;
          }
          else
          {
            v10 = v11;
          }
          v13 = v11++ < 149;
        }
        while ( v13 );
        if ( v10 > -1 )
        {
          v14 = &CTheScripts::EntitiesWaitingForScriptBrain[v10];
          v14->pEntity = pEntity;
          CEntity::RegisterReference(pEntity, &v14->pEntity);
          v14->ScriptBrainIndex = ScriptBrainIndex;
        }
      }
      else
      {
        pEntity[5].m_pRwObject = (RwObject_0 *)((int)pEntity[5].m_pRwObject & 0xFFCFFFFF | 0x200000);
      }
    }
LABEL_18:
    v15 = this->ScriptBrainArray[ScriptBrainIndex].StreamedScriptIndex + 26230;
    if ( CStreaming::ms_aInfoForModel[v15].m_status == 1 )
    {
      CScriptsForBrains::StartNewStreamedScriptBrain(this, ScriptBrainIndex, pEntity, 0);
    }
    else
    {
      CStreaming::RequestModel(v15, 4);
      if ( BrainType <= 4 )
      {
        v16 = ((1 << BrainType) & 0x19) == 0;
        if ( ((1 << BrainType) & 0x19) != 0 )
          v16 = a5 == 0;
        if ( !v16 )
        {
          v17 = -1;
          v18 = pEntity[19].m_pRwObject;
          *(_WORD *)&pEntity[32].m_nFlags = ScriptBrainIndex;
          pEntity[19].m_pRwObject = (RwObject_0 *)((unsigned int)v18 | 0x1000000);
          v19 = 0;
          do
          {
            v20 = CTheScripts::EntitiesWaitingForScriptBrain[v19].pEntity;
            if ( v20 )
            {
              if ( v20 == pEntity )
                return;
            }
            else
            {
              v17 = v19;
            }
            v13 = v19++ < 149;
          }
          while ( v13 );
          if ( v17 > -1 )
          {
            v21 = &CTheScripts::EntitiesWaitingForScriptBrain[v17];
            v21->pEntity = pEntity;
            CEntity::RegisterReference(pEntity, &v21->pEntity);
            v21->ScriptBrainIndex = ScriptBrainIndex;
          }
        }
      }
    }
  }
}
// 677DD0: using guessed type CStreamingInfo (*CStreaming::ms_aInfoForModel)[26316];

//----- (0032F970) --------------------------------------------------------
void __fastcall CTheScripts::AddToWaitingForScriptBrainArray(CEntity *pEntity, Int16 ScriptBrainToLoad)
{
  int v3; // r2
  __int16 v4; // r5
  CEntity *v5; // r1

  v3 = 0;
  v4 = -1;
  do
  {
    v5 = CTheScripts::EntitiesWaitingForScriptBrain[v3].pEntity;
    if ( v5 )
    {
      if ( v5 == pEntity )
        return;
    }
    else
    {
      v4 = v3;
    }
  }
  while ( v3++ < 149 );
  if ( v4 > -1 )
  {
    CTheScripts::EntitiesWaitingForScriptBrain[v4].pEntity = pEntity;
    CEntity::RegisterReference(pEntity, &CTheScripts::EntitiesWaitingForScriptBrain[v4].pEntity);
    CTheScripts::EntitiesWaitingForScriptBrain[v4].ScriptBrainIndex = ScriptBrainToLoad;
  }
}

//----- (0032F9C4) --------------------------------------------------------
void __fastcall CScriptsForBrains::StartNewStreamedScriptBrain(
        CScriptsForBrains *this,
        UInt8 ScriptBrainIndex,
        CEntity *pEntity,
        Bool8 bPedCreatedAtAttractor)
{
  Int32 v5; // r8
  script_brain_struct *v6; // r6
  CRunningScript *started; // r0
  Int8 *p_TypeOfBrain; // r6
  Int8 TypeOfBrain; // t1
  unsigned int v10; // r1
  int v11; // r1
  int v12; // r9
  float *p_m_heading; // r2
  float m_heading; // r12
  CMatrix *m_pMat; // r3
  RwObject_0 *m_pRwObject; // r1
  int m_nFlags; // r5
  entity_waiting_for_script_brain *v18; // r10
  int v19; // [sp+0h] [bp-20h]

  v5 = bPedCreatedAtAttractor;
  v6 = &this->ScriptBrainArray[ScriptBrainIndex];
  started = CStreamedScripts::StartNewStreamedScript(&CTheScripts::StreamedScripts, v6->StreamedScriptIndex);
  TypeOfBrain = v6->TypeOfBrain;
  p_TypeOfBrain = &v6->TypeOfBrain;
  started->ScriptBrainType = TypeOfBrain;
  v10 = *p_TypeOfBrain;
  if ( v10 <= 5 )
  {
    v11 = 1 << v10;
    if ( (v11 & 0x29) != 0 )
    {
      v12 = 0;
      started->Locals[0] = CPools::ms_pPedPool->m_aFlags[-1093107909
                                                       * (((char *)pEntity - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)pEntity - (char *)CPools::ms_pPedPool->m_aStorage) >> 2));
      p_m_heading = &pEntity[19].m_transform.m_heading;
      m_heading = pEntity[19].m_transform.m_heading;
      m_pMat = pEntity[19].m_pMat;
      m_pRwObject = (RwObject_0 *)((int)pEntity[19].m_pRwObject | 0x800000);
      m_nFlags = (int)pEntity[19].m_nFlags;
      pEntity[19].m_pRwObject = m_pRwObject;
      if ( *p_TypeOfBrain == 5 )
      {
        started->Locals[1] = v5;
        m_pMat = pEntity[19].m_pMat;
        m_heading = *p_m_heading;
        m_nFlags = (int)pEntity[19].m_nFlags;
        m_pRwObject = pEntity[19].m_pRwObject;
      }
      *p_m_heading = m_heading;
      pEntity[19].m_pMat = m_pMat;
      pEntity[19].m_pRwObject = (RwObject_0 *)((unsigned int)m_pRwObject & 0xFEFFFFFF);
      *(_DWORD *)&pEntity[19].m_nFlags = m_nFlags;
      v19 = (int)pEntity[32].m_nFlags;
      do
      {
        if ( CTheScripts::EntitiesWaitingForScriptBrain[v12].pEntity == pEntity )
        {
          v18 = &CTheScripts::EntitiesWaitingForScriptBrain[v12];
          if ( IsMissionLoad || (unsigned __int16)v18->ScriptBrainIndex == v19 )
          {
            CEntity::CleanUpOldReference(pEntity, &CTheScripts::EntitiesWaitingForScriptBrain[v12].pEntity);
            CTheScripts::EntitiesWaitingForScriptBrain[v12].pEntity = 0;
            v18->ScriptBrainIndex = -1;
          }
        }
        ++v12;
      }
      while ( v12 != 150 );
      *(_WORD *)&pEntity[32].m_nFlags = -1;
    }
    else if ( (v11 & 0x12) != 0 )
    {
      started->Locals[0] = CPools::ms_pObjectPool->m_aFlags[-654471207
                                                          * (((char *)pEntity
                                                            - (char *)CPools::ms_pObjectPool->m_aStorage) >> 2)] | (-40904448 * (((char *)pEntity - (char *)CPools::ms_pObjectPool->m_aStorage) >> 2));
      pEntity[5].m_pRwObject = (RwObject_0 *)((int)pEntity[5].m_pRwObject | 0x300000);
    }
  }
}

//----- (0032FB20) --------------------------------------------------------
void __fastcall CTheScripts::RemoveFromWaitingForScriptBrainArray(CEntity *pEntity, Int16 ScriptBrainToLoad)
{
  int v3; // r10
  int i; // r9

  v3 = (unsigned __int16)ScriptBrainToLoad;
  for ( i = 0; i != 150; ++i )
  {
    if ( CTheScripts::EntitiesWaitingForScriptBrain[i].pEntity == pEntity
      && (IsMissionLoad || (unsigned __int16)CTheScripts::EntitiesWaitingForScriptBrain[i].ScriptBrainIndex == v3) )
    {
      if ( pEntity )
        CEntity::CleanUpOldReference(pEntity, &CTheScripts::EntitiesWaitingForScriptBrain[i].pEntity);
      CTheScripts::EntitiesWaitingForScriptBrain[i].pEntity = 0;
      CTheScripts::EntitiesWaitingForScriptBrain[i].ScriptBrainIndex = -1;
    }
  }
}

//----- (0032FBAC) --------------------------------------------------------
Int16 __fastcall CScriptsForBrains::GetIndexOfScriptBrainWithThisName(
        CScriptsForBrains *this,
        const Char *pScriptName,
        const Int8 BrainType)
{
  script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *p_anon_0; // r5
  unsigned int v5; // r6
  int v6; // r4

  p_anon_0 = &this->ScriptBrainArray[0]._anon_0;
  v5 = 0;
  v6 = (unsigned __int8)BrainType;
  while ( p_anon_0[-2].ScriptName[6] != v6 || strcasecmp((const char *)p_anon_0, (const char *)pScriptName) )
  {
    ++v5;
    p_anon_0 = (script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *)((char *)p_anon_0 + 20);
    if ( v5 >= 0x46 )
    {
      LOWORD(v5) = -1;
      return v5;
    }
  }
  return v5;
}

//----- (0032FBE4) --------------------------------------------------------
void __fastcall CScriptsForBrains::StartOrRequestNewStreamedScriptBrainWithThisName(
        CScriptsForBrains *this,
        const Char *pScriptName,
        CEntity *pEntity,
        Int8 BrainType)
{
  script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *p_anon_0; // r6
  unsigned int v9; // r5

  p_anon_0 = &this->ScriptBrainArray[0]._anon_0;
  v9 = 0;
  while ( p_anon_0[-2].ScriptName[6] != BrainType || strcasecmp((const char *)p_anon_0, (const char *)pScriptName) )
  {
    ++v9;
    p_anon_0 = (script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *)((char *)p_anon_0 + 20);
    if ( v9 >= 0x46 )
      return;
  }
  CScriptsForBrains::StartOrRequestNewStreamedScriptBrain(this, v9, pEntity, BrainType, 1);
}

//----- (0032FC34) --------------------------------------------------------
void __fastcall CScriptsForBrains::RequestAttractorScriptBrainWithThisName(
        CScriptsForBrains *this,
        const Char *pScriptName)
{
  script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *p_anon_0; // r4
  unsigned int v4; // r6
  int v5; // r1

  p_anon_0 = &this->ScriptBrainArray[0]._anon_0;
  v4 = 0;
  while ( p_anon_0[-2].ScriptName[6] != 5 || strcasecmp((const char *)p_anon_0, (const char *)pScriptName) )
  {
    ++v4;
    p_anon_0 = (script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *)((char *)p_anon_0 + 20);
    if ( v4 >= 0x46 )
      return;
  }
  v5 = *(__int16 *)&p_anon_0[-2].ScriptName[4];
  if ( CStreaming::ms_aInfoForModel[v5 + 26230].m_status != 1 )
    CStreaming::RequestModel(v5 + 26230, 16);
  ++CTheScripts::StreamedScripts.ScriptStructures[*(__int16 *)&p_anon_0[-2].ScriptName[4]].NumberOfUsers;
}

//----- (0032FCB0) --------------------------------------------------------
void __fastcall CScriptsForBrains::MarkAttractorScriptBrainWithThisNameAsNoLongerNeeded(
        CScriptsForBrains *this,
        const Char *pScriptName)
{
  script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *p_anon_0; // r4
  unsigned int v4; // r6
  streamed_script_struct *v5; // r0
  UInt8 *p_NumberOfUsers; // r0
  char v7; // r1
  int NumberOfUsers; // t1

  p_anon_0 = &this->ScriptBrainArray[0]._anon_0;
  v4 = 0;
  while ( p_anon_0[-2].ScriptName[6] != 5 || strcasecmp((const char *)p_anon_0, (const char *)pScriptName) )
  {
    ++v4;
    p_anon_0 = (script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *)((char *)p_anon_0 + 20);
    if ( v4 >= 0x46 )
      return;
  }
  v5 = &CTheScripts::StreamedScripts.ScriptStructures[*(__int16 *)&p_anon_0[-2].ScriptName[4]];
  NumberOfUsers = v5->NumberOfUsers;
  p_NumberOfUsers = &v5->NumberOfUsers;
  v7 = NumberOfUsers;
  if ( NumberOfUsers )
    *p_NumberOfUsers = v7 - 1;
}

//----- (0032FD04) --------------------------------------------------------
Bool8 __fastcall CScriptsForBrains::HasAttractorScriptBrainWithThisNameLoaded(
        CScriptsForBrains *this,
        const Char *pScriptName)
{
  script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *p_anon_0; // r4
  unsigned int v4; // r6

  p_anon_0 = &this->ScriptBrainArray[0]._anon_0;
  v4 = 0;
  while ( p_anon_0[-2].ScriptName[6] != 5 || strcasecmp((const char *)p_anon_0, (const char *)pScriptName) )
  {
    ++v4;
    p_anon_0 = (script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *)((char *)p_anon_0 + 20);
    if ( v4 >= 0x46 )
      return 0;
  }
  return *((_BYTE *)&CStreaming::ms_aInfoForModel[*(__int16 *)&p_anon_0[-2].ScriptName[4]].m_nextIndex
         + (_DWORD)"stroyP11RwMatrixTag") == 1;
}

//----- (0032FD64) --------------------------------------------------------
void __fastcall CScriptsForBrains::StartAttractorScriptBrainWithThisName(
        CScriptsForBrains *this,
        const Char *pScriptName,
        CEntity *pEntity,
        Bool8 bPedCreatedAtAttractor)
{
  script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *p_anon_0; // r6
  unsigned int v9; // r5

  if ( (HIWORD(pEntity[19].m_pRwObject) & 0x180) == 0 )
  {
    p_anon_0 = &this->ScriptBrainArray[0]._anon_0;
    v9 = 0;
    while ( p_anon_0[-2].ScriptName[6] != 5 || strcasecmp((const char *)p_anon_0, (const char *)pScriptName) )
    {
      ++v9;
      p_anon_0 = (script_brain_struct::$26B1CB5550DE660E5F22DED8D13BB165 *)((char *)p_anon_0 + 20);
      if ( v9 >= 0x46 )
        return;
    }
    CScriptsForBrains::StartNewStreamedScriptBrain(this, v9, pEntity, bPedCreatedAtAttractor);
  }
}

//----- (0032FDB6) --------------------------------------------------------
Bool8 __fastcall CScriptsForBrains::IsObjectWithinBrainActivationRange(
        CScriptsForBrains *this,
        CObject *pObject,
        const CVector *vecCentrePoint)
{
  float *p_StreamedScriptIndex; // r12
  CMatrix *m_pMat; // r3
  CSimpleTransform *p_tx; // r0
  float32x2_t v6; // d16
  unsigned __int64 v7; // d1

  p_StreamedScriptIndex = (float *)&this->ScriptBrainArray[pObject->StreamedScriptBrainToLoad].StreamedScriptIndex;
  if ( *((_BYTE *)p_StreamedScriptIndex + 2) != 1 )
    return 0;
  m_pMat = pObject->m_pMat;
  p_tx = (CSimpleTransform *)&m_pMat->tx;
  if ( !m_pMat )
    p_tx = &pObject->m_transform;
  v6.n64_u64[0] = vsub_f32(*(float32x2_t *)&vecCentrePoint->y, *(float32x2_t *)&p_tx->m_translate.y).n64_u64[0];
  v7 = vmul_f32(v6, v6).n64_u64[0];
  return sqrtf(
           (float)((float)((float)(vecCentrePoint->x - p_tx->m_translate.x)
                         * (float)(vecCentrePoint->x - p_tx->m_translate.x))
                 + *(float *)&v7)
         + *((float *)&v7 + 1)) < p_StreamedScriptIndex[2];
}

//----- (0032FE18) --------------------------------------------------------
void CTheScripts::ProcessWaitingForScriptBrainArray()
{
  const CVector *PlayerCentreOfWorld; // r0
  float32x2_t v1; // d8
  int v2; // r6
  float x; // s18
  CEntity *pEntity; // r2
  unsigned __int8 TypeOfBrain; // r0
  int v6; // r3
  int m_nFlags; // r1
  int32 v8; // r0
  RwObject_0 *m_pRwObject; // r0
  int v10; // r1
  int x_low; // r12
  CMatrix *m_pMat; // r1
  CSimpleTransform *p_tx; // r4
  float32x2_t v14; // d16
  unsigned __int64 v15; // d1

  if ( CWorld::Players[CWorld::PlayerInFocus].pPed )
  {
    PlayerCentreOfWorld = FindPlayerCentreOfWorld(CWorld::PlayerInFocus);
    v1.n64_u64[0] = *(unsigned __int64 *)&PlayerCentreOfWorld->y;
    v2 = 0;
    x = PlayerCentreOfWorld->x;
    do
    {
      pEntity = CTheScripts::EntitiesWaitingForScriptBrain[v2].pEntity;
      if ( pEntity )
      {
        TypeOfBrain = CTheScripts::ScriptsForBrains.ScriptBrainArray[CTheScripts::EntitiesWaitingForScriptBrain[v2].ScriptBrainIndex].TypeOfBrain;
        v6 = TypeOfBrain;
        switch ( TypeOfBrain )
        {
          case 0u:
          case 3u:
            m_nFlags = (int)pEntity[32].m_nFlags;
            if ( TypeOfBrain == 1 )
              pEntity[5].m_pRwObject = (RwObject_0 *)((int)pEntity[5].m_pRwObject & 0xFFCFFFFF | 0x200000);
            v8 = CTheScripts::ScriptsForBrains.ScriptBrainArray[m_nFlags].StreamedScriptIndex + 26230;
            if ( CStreaming::ms_aInfoForModel[v8].m_status != 1 )
              goto LABEL_24;
            goto LABEL_23;
          case 1u:
          case 4u:
            m_pRwObject = pEntity[5].m_pRwObject;
            v10 = ((unsigned int)m_pRwObject >> 20) & 3;
            if ( v10 == 2 )
            {
              m_nFlags = LOBYTE(pEntity[6].m_transform.m_translate.x);
              if ( v6 == 1 )
                pEntity[5].m_pRwObject = (RwObject_0 *)((unsigned int)m_pRwObject & 0xFFCFFFFF | 0x200000);
              v8 = CTheScripts::ScriptsForBrains.ScriptBrainArray[m_nFlags].StreamedScriptIndex + 26230;
              if ( CStreaming::ms_aInfoForModel[v8].m_status == 1 )
              {
LABEL_23:
                CScriptsForBrains::StartNewStreamedScriptBrain(&CTheScripts::ScriptsForBrains, m_nFlags, pEntity, 0);
                break;
              }
              goto LABEL_24;
            }
            if ( v10 == 1 )
            {
              x_low = SLOWORD(pEntity[6].m_transform.m_translate.x);
              if ( CTheScripts::ScriptsForBrains.ScriptBrainArray[x_low].TypeOfBrain == 1 )
              {
                m_pMat = pEntity->m_pMat;
                p_tx = (CSimpleTransform *)&m_pMat->tx;
                if ( !m_pMat )
                  p_tx = &pEntity->m_transform;
                v14.n64_u64[0] = vsub_f32(v1, *(float32x2_t *)&p_tx->m_translate.y).n64_u64[0];
                v15 = vmul_f32(v14, v14).n64_u64[0];
                if ( sqrtf(
                       (float)((float)((float)(x - p_tx->m_translate.x) * (float)(x - p_tx->m_translate.x))
                             + *(float *)&v15)
                     + *((float *)&v15 + 1)) < CTheScripts::ScriptsForBrains.ScriptBrainArray[x_low].ObjectBrainActivationRange )
                {
                  if ( v6 == 1 )
                    pEntity[5].m_pRwObject = (RwObject_0 *)((unsigned int)m_pRwObject & 0xFFCFFFFF | 0x200000);
                  v8 = CTheScripts::ScriptsForBrains.ScriptBrainArray[(unsigned __int8)x_low].StreamedScriptIndex
                     + 26230;
                  if ( CStreaming::ms_aInfoForModel[v8].m_status == 1 )
                  {
                    CScriptsForBrains::StartNewStreamedScriptBrain(&CTheScripts::ScriptsForBrains, x_low, pEntity, 0);
                    break;
                  }
LABEL_24:
                  CStreaming::RequestModel(v8, 4);
                  break;
                }
              }
            }
            break;
          default:
            break;
        }
      }
      ++v2;
    }
    while ( v2 != 150 );
  }
}
// 677DD0: using guessed type CStreamingInfo (*CStreaming::ms_aInfoForModel)[26316];

//----- (00330084) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
Int8 __fastcall CRunningScript::ProcessCommands1800To1899(CRunningScript *this, Int32 CurrCommand)
{
  Int8 v3; // r4
  unsigned int ActualScriptThingIndex; // r4
  CDecisionMakerTypes *v5; // r0
  int v6; // r5
  unsigned int v7; // r4
  __int64 v8; // r8
  CDecisionMakerTypes *v9; // r0
  CPed *v10; // r6
  uint8 *v11; // r0
  int v12; // r1
  Int32 v13; // r0
  uint8 *v14; // r1
  float v15; // s0
  uint8 *v16; // r0
  __int64 v17; // kr00_8
  uint8 *v18; // r6
  __int64 v19; // kr08_8
  float v20; // s16
  uint8 *v21; // r9
  uint8 *v22; // r1
  __int16 v23; // r2
  __int16 v24; // r3
  CVehicle *v25; // r0
  float GroundZForCoord; // s0
  RwReal v27; // s16
  RwReal v28; // s18
  int32 Index; // r0
  int v30; // r5
  CEntity *NearestObjectOfType; // r0
  CPed *v32; // r0
  CPed *v33; // r5
  uint8 *v34; // r5
  uint8 *v35; // r6
  __int64 v36; // kr10_8
  CTaskComplexUseMobilePhone *v37; // r6
  CRunningScript *v38; // r0
  int32 v39; // r1
  CTask *v40; // r2
  int32 v41; // r3
  __int64 v42; // kr18_8
  CVehicle *v43; // r6
  __int64 v44; // kr20_8
  CVehicle *v45; // r9
  char v46; // r6
  CAutomobile *v47; // r1
  uint8 *v48; // r5
  int v49; // r1
  Int32 *v50; // r2
  unsigned __int8 v51; // r1
  Int32 v52; // r2
  int v53; // r5
  const float *v54; // r0
  int i; // r0
  unsigned __int64 v56; // d18
  int KeyDown; // r0
  CRunningScript *v58; // r0
  bool IsConversationAtNode; // r1
  uint8 *v60; // r5
  __int16 v61; // r2
  CAutomobile *v62; // r1
  CVehiclePool *v63; // r0
  int32 v64; // r1
  int v65; // r6
  float v66; // s16
  float32x2_t v67; // d9
  float v68; // s20
  int v69; // r4
  CPool<CVehicle,CHeli>::StorageType *v70; // r9
  uint8 *v71; // r8
  const CVehicle *v72; // r5
  int v73; // r8
  CVector *v74; // r0
  CVector *v75; // r1
  float32x2_t v76; // d16
  unsigned __int64 v77; // d1
  uint32 v78; // r1
  CPedPool *v79; // r0
  int32 v80; // r1
  int v81; // r5
  float v82; // s16
  float32x2_t v83; // d9
  float v84; // s20
  int k; // r4
  CPool<CPed,CCopPed>::StorageType *v86; // r0
  uint8 *v87; // r9
  int v88; // r8
  bool v89; // nf
  CVector *v90; // r0
  CVector *v91; // r1
  float32x2_t v92; // d16
  unsigned __int64 v93; // d1
  Int32 v94; // r4
  CPed *v95; // r0
  bool v96; // r1
  CAutomobile *v97; // r4
  CPlane *v98; // r5
  __int64 v99; // r4
  uint32 PedFlag; // r0
  __int64 v101; // r4
  uint32 v102; // r0
  CDecisionMakerTypes *v103; // r0
  CDecisionMakerTypes *v104; // r0
  float v105; // s18
  float v106; // s16
  float v107; // s20
  float v108; // s22
  float Width; // s24
  float v110; // s24
  float screenHeight; // s26
  float screenWidth; // s28
  int v113; // r4
  float v114; // s2
  UInt8 v115; // r3
  float v116; // s0
  float v117; // s10
  int v118; // r0
  intro_script_rectangle *v119; // r0
  UInt8 v120; // r1
  UInt8 v121; // r2
  float v122; // s8
  float v123; // s2
  float v124; // s4
  int v125; // r2
  intro_script_rectangle *v126; // r2
  __int64 v127; // kr30_8
  unsigned int v128; // r6
  CTaskComplexUseEffect *v129; // r5
  __int64 v130; // kr38_8
  Int32 v131; // r4
  CEntity *v132; // r6
  Int32 v133; // r3
  int v134; // r1
  uint8 *v135; // r1
  int v136; // r2
  unsigned int v137; // r3
  float v138; // s16
  int v139; // r4
  Int32 v140; // r6
  int v141; // r8
  int v142; // r9
  float v143; // s18
  CEntity *v144; // r11
  __int64 v145; // kr40_8
  Int32 v146; // r8
  int m_iRouteSize; // r0
  uint8 *v148; // r4
  int32 ActualBlipArrayIndex; // r0
  CTaskComplexDie *v150; // r5
  uint8 *m_aFlags; // r1
  CVehicle *v152; // r0
  int ZoneByLabelAndReturnIndex; // r0
  CZoneInfo *v154; // r0
  int v155; // r0
  Int32 v156; // r4
  CEntity *v157; // r6
  Int32 v158; // r5
  CTaskSimpleHoldEntity *TaskHold; // r0
  uint8 *v160; // r4
  CBaseModelInfo *v161; // r0
  int v162; // r0
  CVector *v163; // r0
  int v164; // r3
  CVector *v165; // r1
  int v166; // r2
  RwReal *v167; // r1
  RwReal v168; // r3
  RwReal v169; // r6
  uint8 *v170; // r4
  CTaskSimpleCarSetPedInAsDriver *v171; // r5
  int v172; // r5
  int v173; // r4
  uint8 *v174; // r1
  __int64 v175; // d16
  float v176; // s16
  float v177; // s0
  uint8 *v178; // r11
  CPedPool *v179; // r0
  int32 m_nSize; // r1
  int v181; // r6
  int j; // r8
  CPool<CPed,CCopPed>::StorageType *m_aStorage; // r9
  uint8 *v184; // r4
  CEntity *m_pHoldEntity; // r5
  uint8 *v186; // r0
  uint8 *v187; // r4
  uint8 *v188; // r11
  CTaskSimpleHoldEntity *v189; // r0
  uint8 *v190; // r1
  CTaskSimpleGunControl *v191; // r5
  CTaskComplexFleeAnyMeans *v192; // r5
  float v193; // s16
  CAnimBlock *AnimationBlock; // r0
  CAnimBlendHierarchy *Animation; // r0
  int32 v196; // r6
  CAnimBlendHierarchy *v197; // r8
  RpClump_0 *v198; // r0
  int v199; // r5
  CEntity *v200; // r4
  CTaskSimpleHoldEntity *v201; // r0
  CPed *v202; // r4
  char *v203; // r1
  char *v204; // r6
  CTaskSimpleCarSetPedInAsPassenger *v205; // r6
  float *v206; // r0
  float v207; // s2
  float v208; // s4
  int v209; // r2
  unsigned int *v210; // r4
  int v211; // r0
  unsigned int v212; // r1
  int v213; // r0
  int v214; // r2
  int v215; // r1
  int v216; // r0
  _DWORD *v217; // r5
  int v218; // r0
  bool v219; // zf
  CTaskSimpleGangDriveBy *v220; // r5
  Int32 v221; // r8
  CEntity *v222; // r0
  int v223; // r0
  int v224; // r1
  unsigned int v225; // r2
  Int32 v226; // r8
  char v227; // r0
  CEntity *v228; // r0
  CTask *TaskByType; // r0
  CTaskComplexUseMobilePhone *v230; // r5
  int bCheckBuildings; // [sp+0h] [bp-E8h]
  int32 v233; // [sp+8h] [bp-E0h]
  int v234; // [sp+28h] [bp-C0h]
  CPed *v235; // [sp+28h] [bp-C0h]
  int8 v236; // [sp+2Ch] [bp-BCh]
  int v237; // [sp+2Ch] [bp-BCh]
  Int32 v238; // [sp+2Ch] [bp-BCh]
  CVector Coors; // [sp+30h] [bp-B8h] BYREF
  Int32 v240; // [sp+3Ch] [bp-ACh]
  char v241[16]; // [sp+48h] [bp-A0h] BYREF
  Char v242[16]; // [sp+58h] [bp-90h] BYREF
  Int32 pStringToFill; // [sp+68h] [bp-80h] BYREF
  Int32 v244; // [sp+6Ch] [bp-7Ch]
  Char v245[8]; // [sp+82h] [bp-66h] BYREF
  float32x2x2_t v246; // 0:d16.8,8:d17.8

  v3 = 0;
  switch ( CurrCommand )
  {
    case 1800:
      CRunningScript::CollectParameters(this, 2);
      ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 7u);
      if ( ActualScriptThingIndex > 0x13 )
        return 0;
      v5 = CDecisionMakerTypes::m_pPedDecisionTypes;
      v6 = ScriptParams[1];
      if ( CDecisionMakerTypes::m_pPedDecisionTypes )
        goto LABEL_172;
      goto LABEL_171;
    case 1801:
      CRunningScript::CollectParameters(this, 9);
      v7 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 7u);
      v8 = *(_QWORD *)&ScriptParams[1];
      LODWORD(Coors.z) = ScriptParams[3];
      v240 = ScriptParams[4];
      LODWORD(Coors.x) = ScriptParams[6];
      LODWORD(Coors.y) = ScriptParams[5];
      pStringToFill = ScriptParams[8];
      v244 = ScriptParams[7];
      if ( v7 > 0x13 )
        return 0;
      v9 = CDecisionMakerTypes::m_pPedDecisionTypes;
      if ( !CDecisionMakerTypes::m_pPedDecisionTypes )
        goto LABEL_175;
      goto LABEL_176;
    case 1802:
      CRunningScript::ScriptTaskPickUpObject(this, 1802);
      return 0;
    case 1803:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v10 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v10 = 0;
      }
      v3 = 0;
      v158 = ScriptParams[1];
      if ( CPedIntelligence::GetTaskHold(v10->m_pPedIntelligence, 0) )
      {
        v3 = 0;
        TaskHold = CPedIntelligence::GetTaskHold(v10->m_pPedIntelligence, 0);
        CTaskSimpleHoldEntity::DropEntity(TaskHold, v10, v158 != 0);
      }
      return v3;
    case 1804:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      v11 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v12 = *(_DWORD *)v11;
      *((_DWORD *)v11 + 267) |= 0x200000u;
      (*(void (__fastcall **)(uint8 *, _DWORD, int))(v12 + 168))(v11, 0, 1);
      return v3;
    case 1805:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      CClothes::RebuildPlayer(CWorld::Players[ScriptParams[0]].pPed, 0);
      return v3;
    case 1806:
      CRunningScript::CollectParameters(this, 3);
      v13 = ScriptParams[2];
      v14 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( (unsigned __int8)(v14[958] - 57) >= 2u )
        v14[958] = 35;
      goto LABEL_55;
    case 1807:
      CRunningScript::CollectParameters(this, 4);
      v3 = 0;
      v15 = (float)(*(float *)&ScriptParams[1] * 3.1416) / 180.0;
      v16 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v17 = *(_QWORD *)&ScriptParams[2];
      if ( (unsigned __int8)(v16[958] - 57) >= 2u )
        v16[958] = 36;
      *((_DWORD *)v16 + 625) = v17;
      *((_DWORD *)v16 + 623) = HIDWORD(v17);
      *((float *)v16 + 627) = v15;
      *((float *)v16 + 626) = v15;
      return v3;
    case 1808:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v18 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v18 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v160 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v160 = 0;
      }
      if ( ScriptParams[2] >= 0 )
      {
        if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[2] >> 8] == LOBYTE(ScriptParams[2]) )
          v160 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[2] >> 8];
        else
          v160 = 0;
      }
      v221 = ScriptParams[3];
      if ( (unsigned __int8)(v18[958] - 57) >= 2u )
        v18[958] = 37;
      v222 = (CEntity *)*((_DWORD *)v18 + 264);
      if ( v222 )
        CEntity::CleanUpOldReference(v222, (CEntity **)v18 + 264);
      *((_DWORD *)v18 + 264) = v160;
      CEntity::RegisterReference((CEntity *)v160, (CEntity **)v18 + 264);
      v223 = *((_DWORD *)v18 + 267);
      v3 = 0;
      v224 = *((_DWORD *)v18 + 268);
      v225 = v223 & 0xFFFFFFEF;
      *((_DWORD *)v18 + 625) = v221;
      if ( (v224 & 0x200) == 0 )
        v225 = v223 | 0x10;
      *((_DWORD *)v18 + 267) = v225;
      return v3;
    case 1809:
    case 1810:
    case 1816:
    case 1819:
    case 1820:
    case 1821:
    case 1824:
    case 1825:
    case 1826:
    case 1829:
    case 1832:
    case 1848:
    case 1849:
    case 1850:
    case 1853:
    case 1856:
    case 1860:
    case 1864:
    case 1880:
    case 1881:
    case 1892:
    case 1893:
    case 1894:
      return v3;
    case 1811:
      CRunningScript::CollectParameters(this, 10);
      v19 = *(_QWORD *)&ScriptParams[7];
      v20 = *(float *)&ScriptParams[6];
      Coors = *(CVector *)&ScriptParams[3];
      v236 = ScriptParams[9];
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v21 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v21 = 0;
      }
      v156 = ScriptParams[0];
      v157 = (CEntity *)v21;
      if ( ScriptParams[2] < 0 )
        goto LABEL_350;
      if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[2] >> 8] == LOBYTE(ScriptParams[2]) )
      {
        v157 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[2] >> 8];
        if ( ScriptParams[0] == -1 )
        {
LABEL_355:
          v220 = (CTaskSimpleGangDriveBy *)CTask::operator new(0x44u);
          CTaskSimpleGangDriveBy::CTaskSimpleGangDriveBy(v220, v157, &Coors, v20, v236, v19, HIDWORD(v19) != 0);
          v39 = v156;
          v220->m_bFromScriptCommand = 1;
          v38 = this;
          v40 = v220;
          v41 = 1811;
          goto LABEL_356;
        }
      }
      else
      {
        v157 = 0;
LABEL_350:
        if ( ScriptParams[0] == -1 )
          goto LABEL_355;
      }
      v216 = *(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1088];
      v217 = *(_DWORD **)(v216 + 16);
      if ( !v217 )
        goto LABEL_355;
      v218 = (*(int (__fastcall **)(_DWORD))(*v217 + 20))(*(_DWORD *)(v216 + 16));
      v219 = v218 == 1022;
      if ( v218 == 1022 )
        v219 = v217[13] == (_DWORD)v21;
      if ( !v219 )
        goto LABEL_355;
      return 0;
    case 1812:
      CRunningScript::CollectParameters(this, 2);
      v22 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v23 = *(_WORD *)(v22 + 991);
      v24 = v23 & 0xFFEF;
      if ( ScriptParams[1] )
        v24 = v23 | 0x10;
      goto LABEL_118;
    case 1813:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v25 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v25 = 0;
      }
      CRemote::TakeRemoteControlOfCar(v25);
      return 0;
    case 1814:
      CRunningScript::CollectParameters(this, 7);
      GroundZForCoord = *(float *)&ScriptParams[2];
      v27 = *(float *)ScriptParams;
      v28 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      Index = ScriptParams[4];
      if ( ScriptParams[4] <= -1 )
        Index = CTheScripts::UsedObjectArray[-ScriptParams[4]].Index;
      LOBYTE(v30) = 0;
      Coors.y = v28;
      Coors.x = v27;
      Coors.z = GroundZForCoord;
      NearestObjectOfType = CWorld::FindNearestObjectOfType(Index, &Coors, *(float *)&ScriptParams[3], 0, 0, 0, 0, 1, 1);
      if ( NearestObjectOfType )
      {
        if ( (*(_BYTE *)&NearestObjectOfType->m_info & 7) == 4 )
          v30 = (ScriptParams[5] != 0) & (BYTE1(NearestObjectOfType[5].m_pRwObject) >> 2) | (ScriptParams[6] != 0
                                                                                          && (*(_DWORD *)&NearestObjectOfType->m_nFlags & 0x280) != 0x80);
        else
          LOBYTE(v30) = 0;
      }
      goto LABEL_112;
    case 1815:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v32 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v32 = 0;
      }
      CConversations::StartSettingUpConversation(v32);
      return 0;
    case 1817:
      v3 = 0;
      CConversations::DoneSettingUpConversation(0);
      return v3;
    case 1818:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v33 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v33 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&Coors, 8u);
      IsConversationAtNode = CConversations::IsConversationAtNode((unsigned __int8 *)&Coors, v33);
      goto LABEL_343;
    case 1822:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = (int)*(float *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][344];
      goto LABEL_384;
    case 1823:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      *(float *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][344] = (float)ScriptParams[1];
      return v3;
    case 1827:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v34 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v34 = 0;
      }
      if ( (v34[58] & 7) == 4
        && (v161 = CModelInfo::ms_modelInfoPtrs[*((__int16 *)v34 + 19)],
            (v162 = (*((int (__fastcall **)(CBaseModelInfo *))v161->_vptr$CBaseModelInfo + 2))(v161)) != 0)
        && (*(_WORD *)(v162 + 40) & 0x7000 | 0x800) == 10240 )
      {
        v163 = (CVector *)*((_DWORD *)v34 + 5);
        v3 = 0;
        v164 = 0;
        v165 = v163 + 4;
        if ( !v163 )
          v165 = (CVector *)(v34 + 4);
        bCheckBuildings = 0;
        v166 = 0;
        CGlass::WindowRespondsToCollision((CEntity *)v34, 100000.0, *(CVector *)(&v164 - 1), *v165, 0);
        *((_DWORD *)v34 + 81) |= 0x400u;
      }
      else
      {
        v167 = (RwReal *)*((_DWORD *)v34 + 89);
        v168 = v167[15];
        v169 = v167[16];
        Coors.x = v167[14];
        Coors.y = v168;
        Coors.z = v169;
        BreakManager_c::Add(&g_breakMan, (CObject *)v34, &Coors, v167[17], ScriptParams[1] != 0);
        v210 = (unsigned int *)(v34 + 28);
        v209 = *((_DWORD *)v34 + 7);
        v211 = *((_DWORD *)v34 + 8);
        v212 = v209 & 0xFFFFFF7E;
        *((_DWORD *)v34 + 7) = v209 & 0xFFFFFF7E;
        if ( (v209 & 0x40004) == 0 )
        {
          CPhysical::RemoveFromMovingList((CPhysical *)v34);
          v211 = *((_DWORD *)v34 + 8);
          v212 = *v210;
        }
        *v210 = v212 | 4;
        *((_DWORD *)v34 + 8) = v211;
        v213 = *(_DWORD *)v34;
        v214 = *((_DWORD *)v34 + 81);
        v3 = 0;
        v215 = *((_DWORD *)v34 + 17) | 0x800000;
        *((_QWORD *)v34 + 9) = 0LL;
        *((_QWORD *)v34 + 10) = 0LL;
        *((_DWORD *)v34 + 22) = 0;
        *((_DWORD *)v34 + 23) = 0;
        *((_DWORD *)v34 + 17) = v215;
        *((_DWORD *)v34 + 81) = v214 | 0x400;
        (*(void (__fastcall **)(uint8 *))(v213 + 36))(v34);
      }
      return v3;
    case 1828:
      CRunningScript::CollectParameters(this, 3);
      v13 = ScriptParams[2];
      v14 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( (unsigned __int8)(v14[958] - 57) >= 2u )
        v14[958] = 23;
      v14[980] = 100;
LABEL_55:
      *((_DWORD *)v14 + 625) = v13;
      return 0;
    case 1830:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v35 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v35 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v170 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v170 = 0;
      }
      if ( ScriptParams[2] >= 0 )
      {
        if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[2] >> 8] == LOBYTE(ScriptParams[2]) )
          v170 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[2] >> 8];
        else
          v170 = 0;
      }
      v226 = ScriptParams[3];
      if ( (unsigned __int8)(v35[958] - 57) < 2u )
        goto LABEL_372;
      v227 = 39;
      goto LABEL_371;
    case 1831:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v35 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v35 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v170 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v170 = 0;
      }
      if ( ScriptParams[2] >= 0 )
      {
        if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[2] >> 8] == LOBYTE(ScriptParams[2]) )
          v170 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[2] >> 8];
        else
          v170 = 0;
      }
      v226 = ScriptParams[3];
      if ( (unsigned __int8)(v35[958] - 57) < 2u )
        goto LABEL_372;
      v227 = 40;
LABEL_371:
      v35[958] = v227;
LABEL_372:
      v228 = (CEntity *)*((_DWORD *)v35 + 264);
      if ( v228 )
        CEntity::CleanUpOldReference(v228, (CEntity **)v35 + 264);
      *((_DWORD *)v35 + 264) = v170;
      CEntity::RegisterReference((CEntity *)v170, (CEntity **)v35 + 264);
      v3 = 0;
      v35[980] = 100;
      *((_DWORD *)v35 + 625) = v226;
      return v3;
    case 1833:
      CRunningScript::CollectParameters(this, 2);
      v36 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] < 1 )
      {
        if ( ScriptParams[0] >= 0
          && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        {
          v202 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        }
        else
        {
          v202 = 0;
        }
        TaskByType = CTaskManager::FindTaskByType(&v202->m_pPedIntelligence->m_taskManager, 3, 1600);
        v230 = (CTaskComplexUseMobilePhone *)TaskByType;
        if ( TaskByType && (*((int (__fastcall **)(CTask *))TaskByType->_vptr$CTask + 5))(TaskByType) == 1600 )
          CTaskComplexUseMobilePhone::Stop(v230, v202);
      }
      else
      {
        v37 = (CTaskComplexUseMobilePhone *)CTask::operator new(0x20u);
        CTaskComplexUseMobilePhone::CTaskComplexUseMobilePhone(v37, -1);
        v38 = this;
        v39 = v36;
        v40 = v37;
        v41 = 1833;
LABEL_356:
        CRunningScript::GivePedScriptedTask(v38, v39, v40, v41);
      }
      return 0;
    case 1834:
      CRunningScript::CollectParameters(this, 2);
      v42 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v43 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v43 = 0;
      }
      v171 = (CTaskSimpleCarSetPedInAsDriver *)CTask::operator new(0x1Cu);
      v3 = 0;
      CTaskSimpleCarSetPedInAsDriver::CTaskSimpleCarSetPedInAsDriver(v171, v43, 0);
      v171->m_bWarpingInToCar = 1;
      CRunningScript::GivePedScriptedTask(this, v42, v171, 1834);
      return v3;
    case 1835:
      CRunningScript::CollectParameters(this, 3);
      v44 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v45 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v45 = 0;
      }
      if ( ScriptParams[2] < 0 )
        v172 = 0;
      else
        v172 = CCarEnterExit::ComputeTargetDoorToEnterAsPassenger(v45, ScriptParams[2]);
      v205 = (CTaskSimpleCarSetPedInAsPassenger *)CTask::operator new(0x20u);
      v3 = 0;
      CTaskSimpleCarSetPedInAsPassenger::CTaskSimpleCarSetPedInAsPassenger(v205, v45, v172, 0);
      v205->m_bWarpingInToCar = 1;
      CRunningScript::GivePedScriptedTask(this, v44, v205, 1835);
      return v3;
    case 1836:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        v3 = 0;
        CStreaming::DisableCopBikes(0);
        return v3;
      }
      CStreaming::DisableCopBikes(1);
      return 0;
    case 1837:
    case 1838:
      CRunningScript::FlameInAngledAreaCheckCommand(this, CurrCommand);
      return 0;
    case 1839:
      CRunningScript::CollectParameters(this, 7);
      v46 = ScriptParams[5];
      if ( ScriptParams[5] )
        v46 = 1;
      CStuckCarCheck::AddCarToCheck(
        &CTheScripts::StuckCars,
        ScriptParams[0],
        *(float *)&ScriptParams[1],
        ScriptParams[2],
        1,
        ScriptParams[3] != 0,
        ScriptParams[4] != 0,
        v46,
        ScriptParams[6]);
      return 0;
    case 1840:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v47 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v47 = 0;
      }
      CDamageManager::ApplyDamage(&v47->Damage, v47, (tComponent)(ScriptParams[1] + 11), 150.0, 1.0);
      return 0;
    case 1841:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v48 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v48 = 0;
      }
      v173 = *((_DWORD *)v48 + 5);
      v174 = (uint8 *)(v173 + 48);
      if ( !v173 )
        v174 = v48 + 4;
      v175 = *(_QWORD *)v174;
      v176 = *(float *)&ScriptParams[1];
      Coors.z = *((RwReal *)v174 + 2);
      *(_QWORD *)&Coors.x = v175;
      if ( v173 )
        v177 = atan2f(COERCE_FLOAT(*(_DWORD *)(v173 + 16) ^ 0x80000000), *(float *)(v173 + 20));
      else
        v177 = *((float *)v48 + 4);
      CMatrix::SetRotateZ((CMatrix *)v173, v177);
      CMatrix::RotateY(*((CMatrix **)v48 + 5), (float)(v176 * 3.1416) / 180.0);
      v206 = (float *)*((_DWORD *)v48 + 5);
      v3 = 0;
      v207 = Coors.y + v206[13];
      v208 = Coors.z + v206[14];
      v206[12] = Coors.x + v206[12];
      v206[13] = v207;
      v206[14] = v208;
      return v3;
    case 1842:
      CRunningScript::CollectParameters(this, 1);
      v49 = 0;
      while ( CTheScripts::SuppressedVehicleModels[v49] != ScriptParams[0] )
      {
        if ( (unsigned int)++v49 >= 0x28 )
        {
          v50 = CTheScripts::SuppressedVehicleModels;
          v51 = 0;
          do
          {
            v52 = *v50;
            v53 = v52 + 1;
            if ( v52 != -1 )
              ++v51;
            v50 = &CTheScripts::SuppressedVehicleModels[v51];
          }
          while ( v53 && v51 < 0x28u );
          *v50 = ScriptParams[0];
          return 0;
        }
      }
      return 0;
    case 1843:
      CRunningScript::CollectParameters(this, 1);
      v54 = (const float *)ScriptParams;
      v246 = vld1q_dup_f32(v54);
      for ( i = 0; i != 40; i += 4 )
      {
        v56 = vmovn_s32(vceqq_s32(*(int32x4_t *)&CTheScripts::SuppressedVehicleModels[i], (int32x4_t)v246)).n64_u64[0];
        if ( (unsigned __int16)v56 << 31 )
          CTheScripts::SuppressedVehicleModels[i] = -1;
        if ( WORD1(v56) << 31 )
          CTheScripts::SuppressedVehicleModels[i + 1] = -1;
        if ( WORD2(v56) << 31 )
          CTheScripts::SuppressedVehicleModels[i + 2] = -1;
        if ( HIWORD(v56) << 31 )
          CTheScripts::SuppressedVehicleModels[i + 3] = -1;
        v3 = 0;
      }
      return v3;
    case 1844:
      memset(CTheScripts::SuppressedVehicleModels, 255, sizeof(CTheScripts::SuppressedVehicleModels));
      return 0;
    case 1845:
      CRunningScript::CollectParameters(this, 1);
      LOBYTE(v30) = 0;
      if ( ScriptParams[0] == 83 && CCheat::m_nLastScriptBypasstime )
        LOBYTE(v30) = CTimer::m_snTimeInMilliseconds - CCheat::m_nLastScriptBypasstime < 0x1388;
      KeyDown = CPCKeyboard::GetKeyDown(&PS2Keyboard, ScriptParams[0], 1u, "Used in script");
      goto LABEL_110;
    case 1846:
      CRunningScript::CollectParameters(this, 1);
      LOBYTE(v30) = 0;
      if ( ScriptParams[0] == 83 && CCheat::m_nLastScriptBypasstime )
        LOBYTE(v30) = CTimer::m_snTimeInMilliseconds - CCheat::m_nLastScriptBypasstime < 0x1388;
      KeyDown = CPCKeyboard::GetKeyJustDown(&PS2Keyboard, ScriptParams[0], 1u, "Used in script");
LABEL_110:
      if ( KeyDown )
        LOBYTE(v30) = 1;
      goto LABEL_112;
    case 1847:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v60 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v60 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v178 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( !v60 )
        {
LABEL_268:
          LOBYTE(v30) = 0;
          v179 = CPools::ms_pPedPool;
          m_nSize = CPools::ms_pPedPool->m_nSize;
          if ( !m_nSize )
            goto LABEL_112;
          v181 = m_nSize - 1;
          for ( j = 1996 * m_nSize - 908; ; j -= 1996 )
          {
            if ( (v179->m_aFlags[v181] & 0x80u) != 0
              || (m_aStorage = v179->m_aStorage, v184 = &(*v179->m_aStorage)[j], v184 == (uint8 *)&elf_hash_bucket[209]) )
            {
              v30 = 0;
              if ( !v181 )
                goto LABEL_112;
            }
            else
            {
              m_pHoldEntity = 0;
              if ( CPedIntelligence::GetTaskHold(*(const CPedIntelligence **)&(*m_aStorage)[j], 0) )
              {
                m_pHoldEntity = 0;
                v186 = v184 - 1096;
                v187 = v178;
                v188 = v186 + 8;
                v189 = CPedIntelligence::GetTaskHold(*(const CPedIntelligence **)&(*m_aStorage)[j], 0);
                v190 = v188;
                v178 = v187;
                if ( (*((int (__fastcall **)(CTaskSimpleHoldEntity *, uint8 *))v189->_vptr$CTask + 10))(v189, v190) == 1 )
                  m_pHoldEntity = CPedIntelligence::GetTaskHold(*(const CPedIntelligence **)&(*m_aStorage)[j], 0)->m_pHoldEntity;
              }
              if ( v178 )
                v30 = m_pHoldEntity == (CEntity *)v178;
              else
                v30 = m_pHoldEntity != 0;
              if ( !v181 )
                goto LABEL_112;
            }
            if ( v30 )
              goto LABEL_112;
            --v181;
            v179 = CPools::ms_pPedPool;
          }
        }
      }
      else
      {
        v178 = 0;
        if ( !v60 )
          goto LABEL_268;
      }
      v200 = 0;
      if ( CPedIntelligence::GetTaskHold(*((const CPedIntelligence **)v60 + 272), 0) )
      {
        v200 = 0;
        v201 = CPedIntelligence::GetTaskHold(*((const CPedIntelligence **)v60 + 272), 0);
        if ( (*((int (__fastcall **)(CTaskSimpleHoldEntity *, uint8 *))v201->_vptr$CTask + 10))(v201, v60) == 1 )
          v200 = CPedIntelligence::GetTaskHold(*((const CPedIntelligence **)v60 + 272), 0)->m_pHoldEntity;
      }
      if ( v178 )
        LOBYTE(v30) = v200 == (CEntity *)v178;
      else
        LOBYTE(v30) = v200 != 0;
LABEL_112:
      v58 = this;
      IsConversationAtNode = v30;
LABEL_344:
      CRunningScript::UpdateCompareFlag(v58, IsConversationAtNode);
      return 0;
    case 1851:
      CRunningScript::CollectParameters(this, 2);
      v22 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v61 = *(_WORD *)(v22 + 991);
      v24 = v61 | 0x40;
      if ( ScriptParams[1] )
        v24 = v61 & 0xFFBF;
LABEL_118:
      *(_WORD *)(v22 + 991) = v24;
      return 0;
    case 1852:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v62 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v62 = 0;
      }
      CDamageManager::ApplyDamage(&v62->Damage, v62, (tComponent)(ScriptParams[1] + 5), 150.0, 1.0);
      return 0;
    case 1854:
      CRunningScript::CollectParameters(this, 5);
      v63 = CPools::ms_pVehiclePool;
      v64 = CPools::ms_pVehiclePool->m_nSize;
      if ( v64 )
      {
        v65 = v64 - 1;
        v66 = *(float *)&ScriptParams[3];
        v67.n64_u64[0] = *(unsigned __int64 *)&ScriptParams[1];
        v68 = *(float *)ScriptParams;
        v69 = v64;
        v234 = -1;
        while ( 1 )
        {
          if ( (v63->m_aFlags[v65] & 0x80u) == 0 )
          {
            v70 = v63->m_aStorage;
            v71 = v63->m_aStorage[v69];
            v72 = (const CVehicle *)(v71 - 2604);
            if ( v71 != (uint8 *)&elf_hash_bucket[588]
              && (CVehicle::GetVehicleAppearance((const CVehicle *)(v71 - 2604)) == APR_CAR
               || CVehicle::GetVehicleAppearance((const CVehicle *)(v71 - 2604)) == APR_BIKE)
              && !(*(v71 - 1536) << 31) )
            {
              v73 = (int)&(*v70)[v69 * 2604 - 1096];
              if ( ScriptParams[4] == *(__int16 *)(v73 - 1470) || ScriptParams[4] <= -1 )
              {
                if ( CVehicle::CanBeDeleted(v72) )
                {
                  v74 = *(CVector **)(v73 - 1488);
                  v75 = v74 + 4;
                  if ( !v74 )
                    v75 = (CVector *)(v73 - 1504);
                  Coors = *v75;
                  v76.n64_u64[0] = vsub_f32(*(float32x2_t *)&Coors.y, v67).n64_u64[0];
                  v77 = vmul_f32(v76, v76).n64_u64[0];
                  if ( sqrtf(
                         (float)((float)((float)(Coors.x - v68) * (float)(Coors.x - v68)) + *(float *)&v77)
                       + *((float *)&v77 + 1)) < v66 )
                    v234 = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                                           * (((char *)v72 - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2)] | (-422239488 * (((char *)v72 - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2));
                }
              }
            }
          }
          if ( !v65 )
            break;
          --v65;
          v63 = CPools::ms_pVehiclePool;
          --v69;
        }
        v78 = v234;
      }
      else
      {
        v78 = -1;
      }
      goto LABEL_334;
    case 1855:
      CRunningScript::CollectParameters(this, 7);
      v79 = CPools::ms_pPedPool;
      v80 = CPools::ms_pPedPool->m_nSize;
      if ( v80 )
      {
        v81 = v80 - 1;
        v82 = *(float *)&ScriptParams[3];
        v83.n64_u64[0] = *(unsigned __int64 *)&ScriptParams[1];
        v84 = *(float *)ScriptParams;
        v237 = -1;
        for ( k = 1996 * v80 - 900; ; k -= 1996 )
        {
          if ( (v79->m_aFlags[v81] & 0x80u) == 0 )
          {
            v86 = v79->m_aStorage;
            v87 = &(*v86)[k];
            if ( &(*v86)[k] != (uint8 *)&elf_hash_bucket[211] && (*v86)[k] == 1 )
            {
              v88 = (int)&(*v86)[k - 1096];
              v89 = (*(_BYTE *)(v88 + 29) & 8) != 0;
              if ( (*(_BYTE *)(v88 + 29) & 8) == 0 )
                v89 = (v87[64] & 8) != 0;
              if ( !v89 )
              {
                v235 = (CPed *)(v87 - 1096);
                if ( !CRunningScript::IsPedDead(this, (CPed *)(v87 - 1096))
                  && CRunningScript::ThisIsAValidRandomPed(
                       this,
                       *((_DWORD *)v87 + 85),
                       ScriptParams[4],
                       ScriptParams[5],
                       ScriptParams[6])
                  && !CPedGroups::GetPedsGroup(v235) )
                {
                  v90 = (CVector *)*((_DWORD *)v87 - 269);
                  v91 = v90 + 4;
                  if ( !v90 )
                    v91 = (CVector *)(v88 + 4);
                  Coors = *v91;
                  v92.n64_u64[0] = vsub_f32(*(float32x2_t *)&Coors.y, v83).n64_u64[0];
                  v93 = vmul_f32(v92, v92).n64_u64[0];
                  if ( sqrtf(
                         (float)((float)((float)(Coors.x - v84) * (float)(Coors.x - v84)) + *(float *)&v93)
                       + *((float *)&v93 + 1)) < v82 )
                    v237 = CPools::ms_pPedPool->m_aFlags[-1093107909
                                                       * (((char *)v235 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)v235 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2));
                }
              }
            }
          }
          if ( !v81 )
            break;
          --v81;
          v79 = CPools::ms_pPedPool;
        }
        v94 = v237;
        if ( v237 >= 0 )
        {
          v95 = CPools::ms_pPedPool->m_aFlags[(unsigned int)v237 >> 8] == (unsigned __int8)v237 ? (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)v237 >> 8] : 0;
          CPed::SetCharCreatedBy(v95, 2u);
          ++CPopulation::ms_nTotalMissionPeds;
          if ( this->IsThisAMissionScript )
            CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, v237, 2u);
        }
      }
      else
      {
        v94 = -1;
      }
      ScriptParams[0] = v94;
      goto LABEL_384;
    case 1857:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      v96 = *(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1100] == 63;
      goto LABEL_203;
    case 1858:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][2476] = ScriptParams[1];
      return v3;
    case 1859:
      CRunningScript::CollectParameters(this, 6);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v97 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v97 = 0;
      }
      CAutomobile::TellHeliToGoToCoors(
        v97,
        *(float *)&ScriptParams[1],
        *(float *)&ScriptParams[2],
        *(float *)&ScriptParams[3],
        *(float *)&ScriptParams[4],
        *(float *)&ScriptParams[5]);
      if ( (unsigned __int8)(v97->AutoPilot.Mission - 57) >= 2u )
        v97->AutoPilot.Mission = 47;
      return 0;
    case 1861:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v98 = (CPlane *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v98 = 0;
      }
      CPlane::IsAlreadyFlying(v98);
      v3 = 0;
      if ( v98->m_nModelIndex == 520 )
        v98->m_nSuspensionHydraulics = 0;
      return v3;
    case 1862:
      CRunningScript::CollectParameters(this, 3);
      v99 = *(_QWORD *)ScriptParams;
      PedFlag = CPedType::GetPedFlag(ScriptParams[2]);
      CPedType::SetPedTypeAsAcquaintance(v99, SHIDWORD(v99), PedFlag);
      return 0;
    case 1863:
      CRunningScript::CollectParameters(this, 3);
      v101 = *(_QWORD *)ScriptParams;
      v102 = CPedType::GetPedFlag(ScriptParams[2]);
      CPedType::ClearPedTypeAsAcquaintance(v101, SHIDWORD(v101), v102);
      return 0;
    case 1865:
      CRunningScript::CollectParameters(this, 2);
      ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 7u);
      if ( ActualScriptThingIndex <= 0x13 )
      {
        v5 = CDecisionMakerTypes::m_pPedDecisionTypes;
        v6 = ScriptParams[1];
        if ( !CDecisionMakerTypes::m_pPedDecisionTypes )
        {
LABEL_171:
          v103 = (CDecisionMakerTypes *)operator new(0xF1C0u);
          CDecisionMakerTypes::CDecisionMakerTypes(v103);
          CDecisionMakerTypes::m_pPedDecisionTypes = v5;
        }
LABEL_172:
        CDecisionMakerTypes::FlushDecisionMakerEventResponse(v5, ActualScriptThingIndex, v6);
      }
      return 0;
    case 1866:
      CRunningScript::CollectParameters(this, 9);
      v7 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 7u);
      v8 = *(_QWORD *)&ScriptParams[1];
      LODWORD(Coors.z) = ScriptParams[3];
      v240 = ScriptParams[4];
      LODWORD(Coors.x) = ScriptParams[6];
      LODWORD(Coors.y) = ScriptParams[5];
      pStringToFill = ScriptParams[8];
      v244 = ScriptParams[7];
      if ( v7 <= 0x13 )
      {
        v9 = CDecisionMakerTypes::m_pPedDecisionTypes;
        if ( !CDecisionMakerTypes::m_pPedDecisionTypes )
        {
LABEL_175:
          v104 = (CDecisionMakerTypes *)operator new(0xF1C0u);
          CDecisionMakerTypes::CDecisionMakerTypes(v104);
          CDecisionMakerTypes::m_pPedDecisionTypes = v9;
        }
LABEL_176:
        CDecisionMakerTypes::AddEventResponse(v9, v7, v8, SHIDWORD(v8), &Coors.x, &pStringToFill);
      }
      return 0;
    case 1867:
      CRunningScript::CollectParameters(this, 10);
      v105 = *(float *)&ScriptParams[1];
      v106 = *(float *)&ScriptParams[2];
      v107 = *(float *)&ScriptParams[3];
      v108 = *(float *)&ScriptParams[4];
      OS_ScreenGetWidth();
      OS_ScreenGetHeight();
      Width = (float)(unsigned int)OS_ScreenGetWidth();
      v110 = Width / (float)(unsigned int)OS_ScreenGetHeight();
      screenHeight = (float)RsGlobal.screenHeight;
      screenWidth = (float)RsGlobal.screenWidth;
      v113 = OS_ScreenGetWidth();
      v114 = (float)(v113 - 4 * (int)OS_ScreenGetHeight() / 3u);
      v115 = ScriptParams[8];
      v116 = v106 * (float)((float)RsGlobal.screenHeight / 448.0);
      v117 = (float)(*(float *)&ScriptParams[5] * 3.1416) / 180.0;
      v118 = CTheScripts::NumberOfIntroRectanglesThisFrame;
      CTheScripts::IntroRectangles[CTheScripts::NumberOfIntroRectanglesThisFrame].eWindowType = WINDOW_SPRITE_WITH_ROTATION;
      v119 = &CTheScripts::IntroRectangles[v118];
      v119->ScriptSpriteIndex = LOWORD(ScriptParams[0]) - 1;
      v120 = ScriptParams[6];
      v121 = ScriptParams[7];
      v122 = (float)(v108 * 0.5) * (float)(screenHeight / 448.0);
      v123 = (float)((float)(screenWidth / 640.0) * (float)(v105 * (float)(1.3333 / v110))) + (float)(v114 * 0.5);
      v124 = (float)(v107 * 0.5) * (float)((float)(screenWidth / 640.0) * (float)(1.3333 / v110));
      v119->ScriptRectMinX = v123 - v124;
      v119->ScriptRectMinY = v116 - v122;
      v119->ScriptRectMaxX = v124 + v123;
      v119->ScriptRectMaxY = v122 + v116;
      v119->ScriptRectRotation = v117;
      CRGBA::CRGBA((CRGBA *)&Coors, v120, v121, v115, ScriptParams[9]);
      v125 = CTheScripts::NumberOfIntroRectanglesThisFrame++;
      v126 = &CTheScripts::IntroRectangles[v125];
      v3 = 0;
      v126->ScriptRectColour = (CRGBA)LODWORD(Coors.x);
      v126->pTitle[0] = 0;
      return v3;
    case 1868:
      CRunningScript::CollectParameters(this, 2);
      v127 = *(_QWORD *)ScriptParams;
      v128 = CTheScripts::GetActualScriptThingIndex(ScriptParams[1], 6u);
      if ( v128 > 0x3F )
        return 0;
      v129 = (CTaskComplexUseEffect *)CTask::operator new(0x24u);
      v3 = 0;
      CTaskComplexUseEffect::CTaskComplexUseEffect(v129, &CScripted2dEffects::ms_effects[v128], 0);
      CRunningScript::GivePedScriptedTask(this, v127, v129, 1868);
      return v3;
    case 1869:
      CRunningScript::CollectParameters(this, 3);
      v130 = *(_QWORD *)ScriptParams;
      v131 = ScriptParams[2];
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v132 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v132 = 0;
      }
      v191 = (CTaskSimpleGunControl *)CTask::operator new(0x3Cu);
      v233 = v131;
      v3 = 0;
      CTaskSimpleGunControl::CTaskSimpleGunControl(v191, v132, 0, 0, 3, 1, v233);
      CRunningScript::GivePedScriptedTask(this, v130, v191, 1869);
      return v3;
    case 1870:
      CRunningScript::CollectParameters(this, 3);
      v3 = 0;
      v133 = ScriptParams[1];
      v134 = *(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1088];
      *(_DWORD *)(v134 + 196) = ScriptParams[2];
      *(_DWORD *)(v134 + 200) = v133;
      return v3;
    case 1871:
      CRunningScript::CollectParameters(this, 2);
      IsConversationAtNode = CPedIntelligence::IsRespondingToEvent(
                               *(const CPedIntelligence **)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1088],
                               ScriptParams[1]);
      goto LABEL_343;
    case 1872:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v135 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v136 = *((_DWORD *)v135 + 7);
      v137 = v136 & 0xFFFFFF7F;
      if ( ScriptParams[1] )
        v137 = v136 | 0x80;
      *((_DWORD *)v135 + 7) = v137;
      return v3;
    case 1873:
      CRunningScript::CollectParameters(this, 8);
      v138 = *(float *)&ScriptParams[7];
      v139 = ScriptParams[3];
      v140 = ScriptParams[4];
      v141 = ScriptParams[5];
      v142 = ScriptParams[6];
      v143 = *(float *)&ScriptParams[2];
      v238 = ScriptParams[0];
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v144 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v144 = 0;
      }
      v192 = (CTaskComplexFleeAnyMeans *)CTask::operator new(0x54u);
      CTaskComplexFleeAnyMeans::CTaskComplexFleeAnyMeans(
        v192,
        v144,
        v140 != 0,
        v143,
        v139,
        v141,
        v142,
        v138,
        (const int)&elf_hash_bucket[187],
        1.0);
      v38 = this;
      v39 = v238;
      v40 = v192;
      v41 = 1873;
      goto LABEL_356;
    case 1874:
      CRunningScript::CollectParameters(this, 1);
      return 0;
    case 1876:
      v3 = 0;
      CTaskComplexFollowPatrolRoute::ms_patrolRoute.m_iRouteSize = 0;
      return v3;
    case 1877:
      CRunningScript::CollectParameters(this, 3);
      v145 = *(_QWORD *)ScriptParams;
      v146 = ScriptParams[2];
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 0x18u);
      CRunningScript::ReadTextLabelFromScript(this, v242, 0x10u);
      if ( !strcmp((const char *)&pStringToFill, "NONE") )
      {
        v241[0] = 0;
        LOBYTE(Coors.x) = 0;
        m_iRouteSize = CTaskComplexFollowPatrolRoute::ms_patrolRoute.m_iRouteSize;
        if ( CTaskComplexFollowPatrolRoute::ms_patrolRoute.m_iRouteSize > 7 )
          return 0;
      }
      else
      {
        strcpy((char *)&Coors, (const char *)&pStringToFill);
        strcpy(v241, (const char *)v242);
        m_iRouteSize = CTaskComplexFollowPatrolRoute::ms_patrolRoute.m_iRouteSize;
        if ( CTaskComplexFollowPatrolRoute::ms_patrolRoute.m_iRouteSize > 7 )
          return 0;
      }
      v203 = (char *)&CTaskComplexFollowPatrolRoute::ms_patrolRoute + 12 * m_iRouteSize;
      *(_QWORD *)(v203 + 324) = v145;
      v204 = (char *)&CTaskComplexFollowPatrolRoute::ms_patrolRoute + 40 * m_iRouteSize;
      *((_DWORD *)v203 + 83) = v146;
      strcpy(v204 + 4, (const char *)&Coors);
      strcpy(v204 + 28, v241);
      ++CTaskComplexFollowPatrolRoute::ms_patrolRoute.m_iRouteSize;
      return 0;
    case 1882:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v148 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v148 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 0x18u);
      CRunningScript::ReadTextLabelFromScript(this, v242, 0x10u);
      CRunningScript::CollectParameters(this, 3);
      v193 = *(float *)ScriptParams;
      AnimationBlock = CAnimManager::GetAnimationBlock(v242);
      Animation = CAnimManager::GetAnimation((const unsigned __int8 *)&pStringToFill, AnimationBlock);
      v196 = ScriptParams[1];
      v197 = Animation;
      v198 = (RpClump_0 *)*((_DWORD *)v148 + 6);
      if ( ScriptParams[1] )
        v196 = 2;
      if ( !ScriptParams[2] )
        v196 |= 8u;
      if ( v198 )
      {
        if ( !RpAnimBlendClumpIsInitialized(v198) )
          RpAnimBlendClumpInit(*((RpClump_0 **)v148 + 6));
        CAnimManager::BlendAnimation(*((RpClump_0 **)v148 + 6), v197, v196, v193);
        IsConversationAtNode = 1;
      }
      else
      {
        IsConversationAtNode = 0;
      }
LABEL_343:
      v58 = this;
      goto LABEL_344;
    case 1883:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      CTheScripts::RadarZoomValue = ScriptParams[0];
      return v3;
    case 1884:
      CRunningScript::CollectParameters(this, 1);
      ActualBlipArrayIndex = CRadar::GetActualBlipArrayIndex(ScriptParams[0]);
      v96 = 0;
      v3 = 0;
      if ( ActualBlipArrayIndex != -1 )
        v96 = 1;
LABEL_203:
      CRunningScript::UpdateCompareFlag(this, v96);
      return v3;
    case 1885:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&Coors, 0x10u);
      CShopping::LoadPrices((const unsigned __int8 *)&Coors);
      return 0;
    case 1886:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&Coors, 0x10u);
      CShopping::LoadShop((const unsigned __int8 *)&Coors);
      return 0;
    case 1887:
      ScriptParams[0] = CShopping::ms_numItemsInShop;
      goto LABEL_384;
    case 1888:
      CRunningScript::CollectParameters(this, 1);
      v78 = CShopping::ms_shopContents[ScriptParams[0]];
LABEL_334:
      ScriptParams[0] = v78;
      goto LABEL_384;
    case 1889:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CShopping::GetPrice(ScriptParams[0]);
      goto LABEL_384;
    case 1890:
      CRunningScript::CollectParameters(this, 1);
      v150 = (CTaskComplexDie *)CTask::operator new(0x28u);
      v3 = 0;
      CTaskComplexDie::CTaskComplexDie(v150, WEAPONTYPE_UNARMED, ANIM_STD_PED, ANIM_STD_KO_FRONT, 4.0, 0.0, 0, 0, 0, 0);
      CRunningScript::GivePedScriptedTask(this, ScriptParams[0], v150, 1890);
      return v3;
    case 1891:
      CRunningScript::CollectParameters(this, 1);
      m_aFlags = CPools::ms_pVehiclePool->m_aFlags;
      if ( ScriptParams[0] >= 0 && m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        v152 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      else
        v152 = 0;
      if ( !this->IsThisAMissionScript || (v152->VehicleCreatedBy | 2) != 3 )
        return 0;
      v3 = 0;
      v199 = m_aFlags[-1075391197 * (((char *)v152 - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2)] | (-422239488 * (((char *)v152 - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2));
      CVehicle::SetVehicleCreatedBy(v152, 2, 0);
      CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, v199, 1u);
      return v3;
    case 1895:
      CRunningScript::ReadTextLabelFromScript(this, v245, 8u);
      CRunningScript::CollectParameters(this, 1);
      ZoneByLabelAndReturnIndex = CTheZones::FindZoneByLabelAndReturnIndex(v245, ZONE_INFORMATION);
      if ( ZoneByLabelAndReturnIndex < 0 )
        return 0;
      v3 = 0;
      v154 = &CTheZones::ZoneInfoArray[CTheZones::NavigationZoneArray[ZoneByLabelAndReturnIndex].ZoneInfoIndex];
      *(_WORD *)((char *)v154 + 15) = *(_WORD *)((char *)v154 + 15) & 0xFFE0 | ScriptParams[0] & 0x1F;
      return v3;
    case 1898:
      CRunningScript::ReadTextLabelFromScript(this, v245, 8u);
      CRunningScript::CollectParameters(this, 1);
      v155 = CTheZones::FindZoneByLabelAndReturnIndex(v245, ZONE_INFORMATION);
      if ( v155 < 0 )
        return 0;
      v3 = 0;
      CTheZones::ZoneInfoArray[CTheZones::NavigationZoneArray[v155].ZoneInfoIndex].DealerStrength = ScriptParams[0];
      return v3;
    case 1899:
      CRunningScript::ReadTextLabelFromScript(this, v245, 8u);
      ScriptParams[0] = CTheZones::ZoneInfoArray[CTheZones::NavigationZoneArray[CTheZones::FindZoneByLabelAndReturnIndex(
                                                                                  v245,
                                                                                  ZONE_INFORMATION)].ZoneInfoIndex].DealerStrength;
LABEL_384:
      CRunningScript::StoreParameters(this, 1);
      return 0;
    default:
      return -1;
  }
}
// 330084: fragmented variable at r3.4 may be wrong
// FC: using guessed type int elf_hash_bucket[16411];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 6786D8: using guessed type C2dEffect (*CScripted2dEffects::ms_effects)[64];

//----- (003323C0) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands1900To1999(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  float32x2_t v6; // d4
  float32x2_t v7; // d5
  Int8 v9; // r6
  int ZoneByLabelAndReturnIndex; // r0
  GxtChar *pMessage; // r1
  uint8 *v12; // r1
  int v13; // r2
  unsigned int v14; // r3
  CBaseModelInfo *v15; // r4
  __int64 v16; // kr00_8
  int v17; // r6
  Int32 v18; // r10
  CEntity *v19; // r9
  int32 IplSlot; // r0
  int32 v21; // r0
  int32 v22; // r0
  __int64 v23; // kr10_8
  CAcquaintance *v24; // r5
  __int64 v25; // kr18_8
  CAcquaintance *v26; // r5
  CAcquaintance *v27; // r0
  CAutomobile *v28; // r0
  float RopeHeight; // r0
  uint8 *v30; // r6
  int32 m_modelId; // r0
  CVehicle *v32; // r0
  CVehicle *v33; // r0
  CTrain *v34; // r0
  CVehicle *v35; // r0
  const unsigned __int8 *NameTag; // r5
  __int64 v37; // kr20_8
  CTaskComplexJump *v38; // r6
  int32 v39; // r1
  void **v40; // r0
  CTask *v41; // r2
  int32 v42; // r3
  CObject *v43; // r0
  CObject *v44; // r0
  CObject *v45; // r0
  CObject *v46; // r0
  CPlayerPed *PlayerPed; // r0
  __int64 v48; // kr28_8
  unsigned int ActualScriptThingIndex; // r6
  __int64 v50; // kr30_8
  CTaskComplexUseSequence *v51; // r5
  CRunningScript *v52; // r0
  float v53; // s16
  float v54; // s18
  __int64 v55; // kr38_8
  CEntity *v56; // r6
  const CPed *v57; // r5
  __int64 v58; // kr40_8
  int32 v59; // r9
  CPed *v60; // r10
  CEntity *NearestTag; // r0
  CMatrix *m_pMat; // r1
  Int32 *p_tx; // r3
  Int32 v64; // r1
  Int32 v65; // r2
  Int32 v66; // r0
  int32 v67; // r8
  CTaskSimpleJetPack *v68; // r5
  CEntity *v69; // r0
  uint8 *v70; // r0
  uint8 *v71; // r0
  char *PointerToScriptVariable; // r0
  Int32 v73; // r5
  tBeatInfo *BeatInfo; // r0
  int bBeatInfoPresent; // r1
  tBeatInfoBeat *v76; // r2
  Int32 Type; // r2
  unsigned int v78; // r0
  CPlayerPedData *m_pPlayerData; // r1
  __int16 v80; // r2
  __int16 v81; // r3
  __int64 v82; // kr50_8
  int32 v83; // r5
  CTrain *v84; // r0
  CTrain *v85; // r0
  bool HasRecordingFileBeenLoaded; // r1
  int v87; // r0
  const RwMatrix *v88; // r1
  uint8 *v89; // r4
  int v90; // r0
  Int16 v91; // r1
  CRunningScript *v92; // r0
  CTrain *v93; // r0
  CEntity *v94; // r5
  uint8 *v95; // r1
  int v96; // r2
  unsigned int v97; // r3
  Bool8 v98; // r4
  __int64 v99; // kr58_8
  float v100; // s16
  float v101; // s18
  CTaskComplexSequence *v102; // r10
  CTaskComplexGoToPointAndStandStill *v103; // r5
  float v104; // s16
  CTaskSimpleSlideToCoord *v105; // r5
  uint8 *v106; // r2
  uint8 *v107; // r1
  uint8 *v108; // r0
  bool v109; // zf
  void *v110; // r5
  char v111; // r2
  uint32 PedFlag; // r0
  uint32 v113; // r0
  float v114; // s0
  uint8 *v115; // r4
  CTrain *Carriage; // r0
  CPhysical *PickedUpEntityWithWinch; // r0
  int v118; // r1
  uint8 *v119; // r1
  int v120; // r0
  CPhysical *ObjectCarriedWithRope; // r0
  int v122; // r1
  CTaskComplexSeekEntityAiming *v123; // r5
  CTask *v124; // r0
  Int32 v125; // r6
  int v126; // r0
  int v127; // r5
  Int32 v128; // r0
  CTaskComplexKillPedOnFoot *v129; // r5
  char v130; // r5
  CTaskComplexGoPickUpEntity *v131; // r6
  tBeatInfoBeat *v132; // r2
  Int32 BeatNumber; // r1
  CRunningScript *v134; // r0
  int v135; // r0
  int *v136; // r1
  int v137; // r6
  int v138; // r10
  int v139; // r8
  int v140; // r0
  _DWORD *v141; // r0
  Int32 v142; // r8
  float v143; // s16
  CEntity *v144; // r0
  int Time; // r2
  int v146; // r3
  int v147; // r5
  int v148; // r6
  Int32 v149; // r0
  uint8 *m_aFlags; // r1
  int v151; // r0
  uint8 *v152; // r1
  int v153; // r0
  Int32 v154; // r0
  RwMatrix pmat; // [sp+10h] [bp-E8h] BYREF
  CQuaternion v157; // [sp+50h] [bp-A8h] BYREF
  Int32 pSearchLightIndex; // [sp+6Ch] [bp-8Ch] BYREF
  CMatrix v159; // [sp+70h] [bp-88h] BYREF
  Char pStringToFill[10]; // [sp+BAh] [bp-3Eh] BYREF

  memset(&v157, 0, sizeof(v157));
  v9 = 0;
  switch ( CurrCommand )
  {
    case 1900:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      CRunningScript::CollectParameters(this, 2);
      ZoneByLabelAndReturnIndex = CTheZones::FindZoneByLabelAndReturnIndex(pStringToFill, ZONE_INFORMATION);
      if ( ZoneByLabelAndReturnIndex < 0 )
        return 0;
      v9 = 0;
      CTheZones::ZoneInfoArray[CTheZones::NavigationZoneArray[ZoneByLabelAndReturnIndex].ZoneInfoIndex].aGangStrengths[ScriptParams[0]] = ScriptParams[1];
      return v9;
    case 1901:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CTheZones::ZoneInfoArray[CTheZones::NavigationZoneArray[CTheZones::FindZoneByLabelAndReturnIndex(
                                                                                  pStringToFill,
                                                                                  ZONE_INFORMATION)].ZoneInfoIndex].aGangStrengths[ScriptParams[0]];
      goto LABEL_266;
    case 1902:
    case 1907:
    case 1908:
    case 1909:
    case 1913:
    case 1919:
    case 1925:
    case 1927:
    case 1933:
    case 1934:
    case 1937:
    case 1941:
    case 1946:
    case 1947:
    case 1948:
    case 1954:
    case 1962:
    case 1965:
    case 1966:
    case 1970:
    case 1973:
    case 1974:
    case 1975:
    case 1976:
    case 1978:
    case 1986:
    case 1992:
    case 1994:
    case 1998:
    case 1999:
      return v9;
    case 1903:
      pMessage = CMessages::BriefMessages[0].pMessage;
      goto LABEL_169;
    case 1904:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      v12 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v13 = *((_DWORD *)v12 + 290);
      v14 = v13 & 0xDFFFFFFF;
      if ( ScriptParams[1] )
        v14 = v13 | 0x20000000;
      *((_DWORD *)v12 + 290) = v14;
      return v9;
    case 1905:
      CRunningScript::CollectParameters(this, 2);
      v15 = CModelInfo::ms_modelInfoPtrs[ScriptParams[0]];
      if ( !v15
        || (*((int (__fastcall **)(CBaseModelInfo *))v15->_vptr$CBaseModelInfo + 5))(CModelInfo::ms_modelInfoPtrs[ScriptParams[0]]) != 6
        || !v15[1].m_hashKey )
      {
        return 0;
      }
      v9 = 0;
      v15[1].m_modelName[9] = ScriptParams[1];
      return v9;
    case 1906:
      CRunningScript::CollectParameters(this, 4);
      v16 = *(_QWORD *)ScriptParams;
      v18 = ScriptParams[3];
      v17 = ScriptParams[2];
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v19 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v19 = 0;
      }
      v110 = CTask::operator new(0x4Cu);
      CTaskComplex::CTaskComplex((CTaskComplex *)v110);
      if ( v17 < 0 )
        v17 = 50000;
      *((_DWORD *)v110 + 4) = v17;
      *((_DWORD *)v110 + 5) = 1000;
      *((_DWORD *)v110 + 6) = v18;
      *((_DWORD *)v110 + 7) = 0x40000000;
      *((_DWORD *)v110 + 8) = 0;
      *((_DWORD *)v110 + 9) = 0x40000000;
      *((_WORD *)v110 + 24) = 0;
      *((_WORD *)v110 + 30) = 0;
      *((_DWORD *)v110 + 10) = 0;
      *((_DWORD *)v110 + 11) = 0;
      *((_DWORD *)v110 + 13) = 0;
      *((_DWORD *)v110 + 14) = 0;
      *((_DWORD *)v110 + 17) = 6;
      v111 = *((_BYTE *)v110 + 72);
      *(_DWORD *)v110 = &off_6656D4;
      *((_DWORD *)v110 + 16) = &off_665710;
      *((_BYTE *)v110 + 72) = v111 & 0xF0 | 3;
      *((_DWORD *)v110 + 3) = v19;
      if ( v19 )
        CEntity::RegisterReference(v19, (CEntity **)v110 + 3);
      v52 = this;
      v39 = v16;
      v41 = (CTask *)v110;
      v42 = 1906;
      goto LABEL_262;
    case 1910:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&v159, 0x12u);
      IplSlot = CIplStore::FindIplSlot((const unsigned __int8 *)&v159);
      CIplStore::RequestIplAndIgnore(IplSlot);
      return 0;
    case 1911:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&v159, 0x12u);
      v21 = CIplStore::FindIplSlot((const unsigned __int8 *)&v159);
      CIplStore::RemoveIplAndIgnore(v21);
      return 0;
    case 1912:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&v159, 0x12u);
      v22 = CIplStore::FindIplSlot((const unsigned __int8 *)&v159);
      CIplStore::RemoveIplWhenFarAway(v22);
      return 0;
    case 1914:
      CRunningScript::CollectParameters(this, 3);
      v23 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v24 = (CAcquaintance *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v24 = 0;
      }
      PedFlag = CPedType::GetPedFlag(ScriptParams[2]);
      CAcquaintance::SetAsAcquaintance(v24 + 63, SHIDWORD(v23), PedFlag);
      return 0;
    case 1915:
      CRunningScript::CollectParameters(this, 3);
      v25 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v26 = (CAcquaintance *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v26 = 0;
      }
      v113 = CPedType::GetPedFlag(ScriptParams[2]);
      CAcquaintance::ClearAsAcquaintance(v26 + 63, SHIDWORD(v25), v113);
      return 0;
    case 1916:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v27 = (CAcquaintance *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v27 = 0;
      }
      CAcquaintance::ClearAcquaintances(v27 + 63, ScriptParams[1]);
      return 0;
    case 1917:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v28 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v28 = 0;
      }
      v114 = (float)(CAutomobile::GetCarPitch(v28) * 180.0) / 3.1416;
      if ( v114 < 0.0 )
        v114 = v114 + 360.0;
      if ( v114 > 360.0 )
        v114 = v114 + -360.0;
      *(float *)ScriptParams = v114;
      goto LABEL_266;
    case 1918:
      RopeHeight = *(float *)&CGame::currArea;
      goto LABEL_265;
    case 1920:
      CRunningScript::CollectParameters(this, 5);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v30 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v30 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v115 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v115 = 0;
      }
      if ( ScriptParams[2] >= 0 )
      {
        if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[2] >> 8] == LOBYTE(ScriptParams[2]) )
          v115 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[2] >> 8];
        else
          v115 = 0;
      }
      v142 = ScriptParams[4];
      v143 = *(float *)&ScriptParams[3];
      if ( (unsigned __int8)(v30[958] - 57) >= 2u )
        v30[958] = 51;
      v144 = (CEntity *)*((_DWORD *)v30 + 264);
      if ( v144 )
        CEntity::CleanUpOldReference(v144, (CEntity **)v30 + 264);
      *((_DWORD *)v30 + 264) = v115;
      CEntity::RegisterReference((CEntity *)v115, (CEntity **)v30 + 264);
      v30[988] = (unsigned int)v143;
      v30[980] = 100;
      *((_DWORD *)v30 + 625) = v142;
      return 0;
    case 1921:
      CRunningScript::CollectParameters(this, 1);
      m_modelId = CWeaponInfo::GetWeaponInfo((eWeaponType)ScriptParams[0], 1)->m_modelId;
      goto LABEL_105;
    case 1922:
      CRunningScript::CollectParameters(this, 1);
      m_modelId = CWeaponInfo::GetWeaponInfo((eWeaponType)ScriptParams[0], 1)->m_nWeaponSlot;
      goto LABEL_105;
    case 1923:
      CRunningScript::CollectParameters(this, 2);
      m_modelId = CShopping::GetExtraInfo(ScriptParams[0], ScriptParams[1]);
      goto LABEL_105;
    case 1924:
      CRunningScript::CollectParameters(this, 4);
      CPedClothesDesc::SetTextureAndModel(
        CWorld::Players[ScriptParams[0]].PlayerPedData.m_pClothes,
        ScriptParams[1],
        ScriptParams[2],
        ScriptParams[3]);
      return 0;
    case 1926:
      CRunningScript::CollectParameters(this, 6);
      v2.n64_u32[0] = ScriptParams[0];
      v5.n64_u32[0] = ScriptParams[3];
      v3.n64_u32[0] = ScriptParams[1];
      v6.n64_u32[0] = ScriptParams[4];
      v4.n64_u32[0] = ScriptParams[2];
      v7.n64_u32[0] = ScriptParams[5];
      m_modelId = CFireManager::GetNumFiresInArea(
                    &gFireManager,
                    vmin_f32(v2, v5).n64_f32[0],
                    vmin_f32(v3, v6).n64_f32[0],
                    vmin_f32(v4, v7).n64_f32[0],
                    vmax_f32(v2, v5).n64_f32[0],
                    vmax_f32(v3, v6).n64_f32[0],
                    vmax_f32(v4, v7).n64_f32[0]);
      goto LABEL_105;
    case 1928:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v32 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v32 = 0;
      }
      CVehicle::InitWinch(v32, ScriptParams[1]);
      return 0;
    case 1929:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v33 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v33 = 0;
      }
      CVehicle::ReleasePickedUpEntityWithWinch(v33);
      return 0;
    case 1930:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v34 = (CTrain *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v34 = 0;
      }
      Carriage = CTrain::FindCarriage(v34, ScriptParams[1]);
      if ( Carriage )
        LODWORD(RopeHeight) = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                                              * (((char *)Carriage
                                                                - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2)] | (-422239488 * (((char *)Carriage - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2));
      else
        RopeHeight = NAN;
      goto LABEL_265;
    case 1931:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v35 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v35 = 0;
      }
      ScriptParams[0] = -1;
      ScriptParams[1] = -1;
      ScriptParams[2] = -1;
      PickedUpEntityWithWinch = CVehicle::QueryPickedUpEntityWithWinch(v35);
      if ( !PickedUpEntityWithWinch )
        goto LABEL_307;
      v118 = *(_BYTE *)&PickedUpEntityWithWinch->m_info & 7;
      if ( v118 == 4 )
      {
        m_aFlags = CPools::ms_pObjectPool->m_aFlags;
        v151 = -654471207 * (((char *)PickedUpEntityWithWinch - (char *)CPools::ms_pObjectPool->m_aStorage) >> 2);
        goto LABEL_301;
      }
      if ( v118 == 3 )
      {
        v152 = CPools::ms_pPedPool->m_aFlags;
        v153 = -1093107909 * (((char *)PickedUpEntityWithWinch - (char *)CPools::ms_pPedPool->m_aStorage) >> 2);
        goto LABEL_303;
      }
      if ( v118 != 2 )
        goto LABEL_307;
      v119 = CPools::ms_pVehiclePool->m_aFlags;
      v120 = -1075391197 * (((char *)PickedUpEntityWithWinch - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2);
      goto LABEL_228;
    case 1932:
      CRunningScript::CollectParameters(this, 1);
      NameTag = CShopping::GetNameTag(ScriptParams[0]);
      goto LABEL_107;
    case 1935:
      CRunningScript::CollectParameters(this, 2);
      v37 = *(_QWORD *)ScriptParams;
      v38 = (CTaskComplexJump *)CTask::operator new(0x14u);
      CTaskComplexJump::CTaskComplexJump(v38, 1);
      v39 = v37;
      v40 = &`vtable for'CTaskComplexClimb;
      v38->m_bUsePlayerLaunchForce = HIDWORD(v37) != 0;
      v41 = v38;
      v42 = 1935;
      goto LABEL_260;
    case 1936:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      CShopping::Buy(ScriptParams[0], 0);
      return v9;
    case 1938:
      CRunningScript::CollectParameters(this, 1);
      CPedIntelligence::FlushImmediately(
        *(CPedIntelligence **)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1088],
        1);
      return 0;
    case 1939:
      CShopping::StoreClothesState();
      return 0;
    case 1940:
      CShopping::RestoreClothesState();
      return 0;
    case 1942:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v43 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v43 = 0;
      }
      RopeHeight = CObject::GetRopeHeight(v43);
LABEL_265:
      *(float *)ScriptParams = RopeHeight;
      goto LABEL_266;
    case 1943:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v44 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v44 = 0;
      }
      CObject::SetRopeHeight(v44, *(float *)&ScriptParams[1]);
      return 0;
    case 1944:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v45 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v45 = 0;
      }
      ScriptParams[0] = -1;
      ScriptParams[1] = -1;
      ScriptParams[2] = -1;
      ObjectCarriedWithRope = CObject::GetObjectCarriedWithRope(v45);
      if ( !ObjectCarriedWithRope )
        goto LABEL_307;
      v122 = *(_BYTE *)&ObjectCarriedWithRope->m_info & 7;
      switch ( v122 )
      {
        case 4:
          m_aFlags = CPools::ms_pObjectPool->m_aFlags;
          v151 = -654471207 * (((char *)ObjectCarriedWithRope - (char *)CPools::ms_pObjectPool->m_aStorage) >> 2);
LABEL_301:
          ScriptParams[2] = m_aFlags[v151] | (v151 << 8);
          break;
        case 3:
          v152 = CPools::ms_pPedPool->m_aFlags;
          v153 = -1093107909 * (((char *)ObjectCarriedWithRope - (char *)CPools::ms_pPedPool->m_aStorage) >> 2);
LABEL_303:
          ScriptParams[1] = v152[v153] | (v153 << 8);
          break;
        case 2:
          v119 = CPools::ms_pVehiclePool->m_aFlags;
          v120 = -1075391197 * (((char *)ObjectCarriedWithRope - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2);
LABEL_228:
          ScriptParams[0] = v119[v120] | (v120 << 8);
          break;
      }
      goto LABEL_307;
    case 1945:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v46 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v46 = 0;
      }
      CObject::ReleaseObjectCarriedWithRope(v46);
      return 0;
    case 1949:
      if ( CTheScripts::IsPlayerOnAMission() )
      {
        PlayerPed = FindPlayerPed(-1);
        CPlayerPed::SetWantedLevel(PlayerPed, 0);
      }
      v9 = 0;
      CWaterLevel::m_bWaterFogScript = 0;
      CRopes::PlayerControlsCrane = 1;
      return v9;
    case 1950:
      v9 = 0;
      CWaterLevel::m_bWaterFogScript = 0;
      CRopes::PlayerControlsCrane = 2;
      return v9;
    case 1951:
      v9 = 0;
      CWaterLevel::m_bWaterFogScript = 1;
      CRopes::PlayerControlsCrane = 0;
      return v9;
    case 1952:
      CRunningScript::CollectParameters(this, 4);
      v48 = *(_QWORD *)ScriptParams;
      ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptParams[1], 4u);
      if ( ActualScriptThingIndex > 0x3F )
        return 0;
      v50 = *(_QWORD *)&ScriptParams[2];
      v51 = (CTaskComplexUseSequence *)CTask::operator new(0x1Cu);
      CTaskComplexUseSequence::CTaskComplexUseSequence(v51, ActualScriptThingIndex);
      *(_QWORD *)&v51->m_iProgress1 = v50;
      v52 = this;
      v39 = v48;
      v41 = v51;
      v42 = 1952;
      goto LABEL_262;
    case 1953:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      CPedIntelligence::ms_iDesiredMoveState = ScriptParams[0];
      return v9;
    case 1955:
      CRunningScript::CollectParameters(this, 4);
      v53 = *(float *)&ScriptParams[2];
      v54 = *(float *)&ScriptParams[3];
      v55 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v56 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v56 = 0;
      }
      v123 = (CTaskComplexSeekEntityAiming *)CTask::operator new(0x18u);
      CTaskComplexSeekEntityAiming::CTaskComplexSeekEntityAiming(v123, v56, v53, v54);
      v52 = this;
      v39 = v55;
      v41 = v123;
      v42 = 1955;
      goto LABEL_262;
    case 1956:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v57 = (const CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v57 = 0;
      }
      if ( CPedScriptedTaskRecord::GetStatus(v57, 1560) )
      {
        v124 = v57->m_pPedIntelligence->m_taskManager.m_tasks[3];
        v125 = (Int32)v124[2]._vptr$CTask;
        v126 = (*((int (__fastcall **)(CTask *))v124->_vptr$CTask + 3))(v124);
        v127 = v126;
        if ( v126 )
        {
          if ( (*(int (__fastcall **)(int))(*(_DWORD *)v126 + 20))(v126) == 275 )
            v128 = *(_DWORD *)(v127 + 16);
          else
            v128 = -1;
LABEL_269:
          ScriptParams[0] = v125;
          ScriptParams[1] = v128;
          v92 = this;
          v91 = 2;
          goto LABEL_308;
        }
      }
      else
      {
        v125 = -1;
      }
      v128 = -1;
      goto LABEL_269;
    case 1957:
      CRunningScript::CollectParameters(this, 3);
      v9 = 0;
      v58 = *(_QWORD *)ScriptParams;
      v59 = ScriptParams[2];
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v60 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v60 = 0;
      }
      v129 = (CTaskComplexKillPedOnFoot *)CTask::operator new(0x38u);
      CTaskComplexKillPedOnFoot::CTaskComplexKillPedOnFoot(v129, v60, v59, 0, 0, 0, 1);
      CRunningScript::GivePedScriptedTask(this, v58, v129, 1957);
      return v9;
    case 1958:
      CRunningScript::CollectParameters(this, 3);
      *(_QWORD *)&v159.xx = *(_QWORD *)ScriptParams;
      LODWORD(v159.zx) = ScriptParams[2];
      NearestTag = CTagManager::GetNearestTag((const CVector *)&v159);
      if ( NearestTag )
      {
        m_pMat = NearestTag->m_pMat;
        p_tx = (Int32 *)&m_pMat->tx;
        if ( !m_pMat )
          p_tx = (Int32 *)&NearestTag->m_transform;
        v65 = p_tx[1];
        v64 = *p_tx;
        v66 = p_tx[2];
      }
      else
      {
        v66 = -981860352;
        v64 = -981860352;
        v65 = -981860352;
      }
      ScriptParams[0] = v64;
      ScriptParams[1] = v65;
      ScriptParams[2] = v66;
      goto LABEL_307;
    case 1959:
      CRunningScript::CollectParameters(this, 1);
      v67 = ScriptParams[0];
      v9 = 0;
      v68 = (CTaskSimpleJetPack *)CTask::operator new(0x70u);
      CTaskSimpleJetPack::CTaskSimpleJetPack(v68, 0, 10.0, 0, 0);
      CRunningScript::GivePedScriptedTask(this, v67, v68, 1959);
      return v9;
    case 1960:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      CObject::bArea51SamSiteDisabled = ScriptParams[0] == 0;
      return v9;
    case 1961:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v69 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v69 = 0;
      }
      ScriptParams[0] = -1;
      if ( CTheScripts::IsEntityWithinAnySearchLight(v69, &pSearchLightIndex) )
      {
        v130 = 1;
        ScriptParams[0] = pSearchLightIndex;
      }
      else
      {
        v130 = 0;
      }
      CRunningScript::StoreParameters(this, 1);
      v134 = this;
      HasRecordingFileBeenLoaded = v130;
      goto LABEL_297;
    case 1963:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] == -1
        || ScriptParams[0] < 0
        || CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
      {
        v70 = 0;
      }
      else
      {
        v70 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      if ( ScriptParams[1] == -1
        || ScriptParams[1] < 0
        || CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] != LOBYTE(ScriptParams[1]) )
      {
        v106 = 0;
        if ( !v70 )
          goto LABEL_168;
LABEL_176:
        v108 = (uint8 *)*((_DWORD *)v70 + 308);
        if ( v106 )
          HasRecordingFileBeenLoaded = v108 == v106;
        else
          HasRecordingFileBeenLoaded = v108 != 0;
        goto LABEL_296;
      }
      v106 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      if ( v70 )
        goto LABEL_176;
LABEL_168:
      pMessage = (GxtChar *)*((_DWORD *)v106 + 309);
LABEL_169:
      HasRecordingFileBeenLoaded = pMessage != 0;
LABEL_296:
      v134 = this;
LABEL_297:
      CRunningScript::UpdateCompareFlag(v134, HasRecordingFileBeenLoaded);
      return 0;
    case 1964:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] == -1
        || ScriptParams[0] < 0
        || CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
      {
        v71 = 0;
      }
      else
      {
        v71 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      if ( ScriptParams[1] == -1
        || ScriptParams[1] < 0
        || CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] != LOBYTE(ScriptParams[1]) )
      {
        v107 = 0;
      }
      else
      {
        v107 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      v109 = v71 == 0;
      if ( !v71 )
      {
        v71 = (uint8 *)*((_DWORD *)v107 + 309);
        v109 = v71 == 0;
      }
      if ( !v109 )
        (*(void (__fastcall **)(uint8 *))(*(_DWORD *)v71 + 252))(v71);
      return 0;
    case 1967:
      CRunningScript::CollectParameters(this, 1);
      m_modelId = CTheScripts::GetUniqueScriptThingIndex(
                    CWorld::Players[ScriptParams[0]].pPed->m_pPlayerData->m_PlayerGroup,
                    8u);
LABEL_105:
      ScriptParams[0] = m_modelId;
LABEL_266:
      v92 = this;
      v91 = 1;
      goto LABEL_308;
    case 1968:
      NameTag = (const unsigned __int8 *)&v159;
      strncpy((char *)&v159, (const char *)CShopping::ms_shopLoaded, 8u);
      MakeUpperCase((unsigned __int8 *)&v159);
LABEL_107:
      PointerToScriptVariable = (char *)CRunningScript::GetPointerToScriptVariable(this, 2u);
      strncpy(PointerToScriptVariable, (const char *)NameTag, 8u);
      return 0;
    case 1969:
      CRunningScript::CollectParameters(this, 1);
      v73 = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
      {
        BeatInfo = CAudioEngine::GetBeatInfo(&AudioEngine);
        if ( BeatInfo->bBeatInfoPresent )
        {
          v132 = &BeatInfo->BeatWindow[v73];
          ScriptParams[0] = v132[10].Time;
          Type = v132[10].Type;
          goto LABEL_257;
        }
      }
      else
      {
        BeatInfo = CAudioEngine::GetBeatInfo(&AudioEngine);
        bBeatInfoPresent = BeatInfo->bBeatInfoPresent;
        if ( v73 )
        {
          if ( bBeatInfoPresent )
          {
            v76 = &BeatInfo->BeatWindow[v73];
            ScriptParams[0] = v76[9].Time;
            Type = v76[9].Type;
LABEL_257:
            ScriptParams[1] = Type;
            BeatNumber = BeatInfo->BeatNumber;
            goto LABEL_306;
          }
        }
        else if ( bBeatInfoPresent )
        {
          Time = BeatInfo->BeatWindow[10].Time;
          BeatNumber = BeatInfo->BeatNumber;
          if ( Time )
          {
            if ( BeatNumber )
            {
              v146 = BeatInfo->BeatWindow[9].Time;
              v147 = BeatInfo->BeatWindow[10].Time;
              v148 = v146;
              if ( v146 < 0 )
                v148 = -v146;
              if ( Time < 0 )
                v147 = -Time;
              if ( v147 > v148 )
              {
                --BeatNumber;
                v149 = BeatInfo->BeatWindow[9].Type;
                ScriptParams[0] = v146;
                ScriptParams[1] = v149;
                goto LABEL_306;
              }
            }
            else
            {
              BeatNumber = 0;
            }
          }
          v154 = BeatInfo->BeatWindow[10].Type;
          ScriptParams[0] = Time;
          ScriptParams[1] = v154;
LABEL_306:
          ScriptParams[2] = BeatNumber;
LABEL_307:
          v92 = this;
          v91 = 3;
LABEL_308:
          CRunningScript::StoreParameters(v92, v91);
          return 0;
        }
      }
      BeatNumber = -1;
      ScriptParams[0] = -1;
      ScriptParams[1] = -1;
      goto LABEL_306;
    case 1971:
      CRunningScript::CollectParameters(this, 2);
      v78 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 8u);
      if ( v78 <= 7 )
        CPedGroupIntelligence::SetDefaultTaskAllocatorType(&CPedGroups::ms_groups[v78].m_intelligence, ScriptParams[1]);
      return 0;
    case 1972:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      m_pPlayerData = CWorld::Players[ScriptParams[0]].pPed->m_pPlayerData;
      v80 = *((_WORD *)m_pPlayerData + 26);
      v81 = v80 | 0x100;
      if ( ScriptParams[1] )
        v81 = v80 & 0xFEFF;
      *((_WORD *)m_pPlayerData + 26) = v81;
      return v9;
    case 1979:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][989] = ScriptParams[1];
      return v9;
    case 1980:
      CRunningScript::CollectParameters(this, 2);
      v82 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] == -1 )
      {
        v83 = -1;
        if ( ScriptParams[0] != -1 )
          goto LABEL_121;
      }
      else
      {
        v83 = CTheScripts::GetActualScriptThingIndex(ScriptParams[1], 7u);
        if ( (_DWORD)v82 != -1 )
        {
LABEL_121:
          CPedIntelligence::SetPedDecisionMakerType(
            *(CPedIntelligence **)&CPools::ms_pPedPool->m_aStorage[(unsigned int)v82 >> 8][1088],
            v83);
          return 0;
        }
      }
      v38 = (CTaskComplexJump *)CTask::operator new(0xCu);
      CTaskSimple::CTaskSimple((CTaskSimple *)v38);
      v39 = -1;
      v38->m_pSubTask = (CTask *)v83;
      v41 = v38;
      v40 = &`vtable for'CTaskSimpleSetCharDecisionMaker;
      v42 = 1980;
LABEL_260:
      v38->_vptr$CTask = (int (**)(void))((char *)*v40 + 8);
LABEL_261:
      v52 = this;
LABEL_262:
      CRunningScript::GivePedScriptedTask(v52, v39, v41, v42);
      return 0;
    case 1981:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v84 = (CTrain *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        if ( v84 )
          CTrain::RemoveOneMissionTrain(v84);
      }
      return 0;
    case 1982:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v85 = (CTrain *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        if ( v85 )
          CTrain::ReleaseOneMissionTrain(v85);
      }
      return 0;
    case 1983:
      CRunningScript::CollectParameters(this, 2);
      CRadar::SetBlipAlwaysDisplayInZoom(ScriptParams[0], ScriptParams[1]);
      return 0;
    case 1984:
      CRunningScript::CollectParameters(this, 1);
      CVehicleRecording::RequestRecordingFile(ScriptParams[0]);
      return 0;
    case 1985:
      CRunningScript::CollectParameters(this, 1);
      HasRecordingFileBeenLoaded = CVehicleRecording::HasRecordingFileBeenLoaded(ScriptParams[0]);
      goto LABEL_296;
    case 1987:
      CRunningScript::CollectParameters(this, 1);
      v87 = *(_DWORD *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][24];
      if ( v87 )
        v88 = (const RwMatrix *)(*(_DWORD *)(v87 + 4) + 16);
      else
        v88 = 0;
      goto LABEL_144;
    case 1988:
      CRunningScript::CollectParameters(this, 5);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v89 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v89 = 0;
      }
      goto LABEL_273;
    case 1989:
      CRunningScript::CollectParameters(this, 1);
      v90 = *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][24];
      if ( v90 )
        v88 = (const RwMatrix *)(*(_DWORD *)(v90 + 4) + 16);
      else
        v88 = 0;
LABEL_144:
      CQuaternion::Set(&v157, v88);
      v91 = 4;
      *(CQuaternion *)ScriptParams = v157;
      v92 = this;
      goto LABEL_308;
    case 1990:
      CRunningScript::CollectParameters(this, 5);
      if ( ScriptParams[0] < 0 )
      {
        v89 = 0;
      }
      else if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v89 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v89 = 0;
      }
LABEL_273:
      v157 = *(CQuaternion *)&ScriptParams[1];
      CQuaternion::Get(&v157, &pmat);
      v135 = *((_DWORD *)v89 + 5);
      v136 = (int *)(v135 + 48);
      if ( !v135 )
        v136 = (int *)(v89 + 4);
      v137 = *v136;
      v138 = v136[1];
      v139 = v136[2];
      CMatrix::CMatrix(&v159, &pmat, 0);
      CPlaceable::SetMatrix((CPlaceable *)v89, &v159);
      CMatrix::~CMatrix(&v159);
      v140 = *((_DWORD *)v89 + 5);
      if ( v140 )
      {
        *(_DWORD *)(v140 + 48) = v137;
        *(_DWORD *)(*((_DWORD *)v89 + 5) + 52) = v138;
        v141 = (_DWORD *)(*((_DWORD *)v89 + 5) + 56);
      }
      else
      {
        v141 = v89 + 12;
        *((_DWORD *)v89 + 1) = v137;
        *((_DWORD *)v89 + 2) = v138;
      }
      *v141 = v139;
      return 0;
    case 1991:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v93 = (CTrain *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v93 = 0;
      }
      CTrain::SetNewTrainPosition(v93, *(CVector *)&ScriptParams[1]);
      return 0;
    case 1993:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v94 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v94 = 0;
      }
      v131 = (CTaskComplexGoPickUpEntity *)CTask::operator new(0x34u);
      CTaskComplexGoPickUpEntity::CTaskComplexGoPickUpEntity(v131, v94, ANIM_CARRY_BOX);
      v41 = v131;
      v42 = 1993;
      v39 = ScriptParams[0];
      goto LABEL_261;
    case 1995:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      v95 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v96 = *((_DWORD *)v95 + 291);
      v97 = v96 | 0x20;
      if ( ScriptParams[1] )
        v97 = v96 & 0xFFFFFFDF;
      *((_DWORD *)v95 + 291) = v97;
      return v9;
    case 1996:
      CRunningScript::CollectParameters(this, 2);
      v98 = 0;
      v9 = 0;
      if ( !ScriptParams[1] )
        v98 = 1;
      CPad::GetPad(ScriptParams[0])->bDisablePlayerEnterCar = v98;
      return v9;
    case 1997:
      CRunningScript::CollectParameters(this, 6);
      v99 = *(_QWORD *)ScriptParams;
      v100 = *(float *)&ScriptParams[4];
      v101 = *(float *)&ScriptParams[5];
      LODWORD(v159.xx) = ScriptParams[1];
      *(_QWORD *)&v159.yx = *(_QWORD *)&ScriptParams[2];
      v102 = (CTaskComplexSequence *)CTask::operator new(0x40u);
      CTaskComplexSequence::CTaskComplexSequence(v102);
      v103 = (CTaskComplexGoToPointAndStandStill *)CTask::operator new(0x28u);
      v9 = 0;
      CTaskComplexGoToPointAndStandStill::CTaskComplexGoToPointAndStandStill(
        v103,
        4,
        (const CVector *)&v159,
        0.5,
        2.0,
        0,
        0);
      CTaskComplexSequence::AddTask(v102, v103);
      v104 = (float)(v100 * 3.1416) / 180.0;
      if ( v101 < 0.0 )
        v101 = 0.1;
      v105 = (CTaskSimpleSlideToCoord *)CTask::operator new(0x80u);
      CTaskSimpleSlideToCoord::CTaskSimpleSlideToCoord(v105, (const CVector *)&v159, v104, v101);
      CTaskComplexSequence::AddTask(v102, v105);
      CRunningScript::GivePedScriptedTask(this, v99, v102, 1997);
      return v9;
    default:
      return -1;
  }
}
// 3328A0: variable 'v2' is possibly undefined
// 3328A0: variable 'v5' is possibly undefined
// 3328B0: variable 'v3' is possibly undefined
// 3328B0: variable 'v6' is possibly undefined
// 3328BA: variable 'v4' is possibly undefined
// 3328BA: variable 'v7' is possibly undefined
// 23B4: using guessed type int (__fastcall *)(_DWORD);
// 333358: using guessed type int **off_333358;
// 6656D4: using guessed type void *off_6656D4;
// 665710: using guessed type void *off_665710;
// 67678C: using guessed type void *`vtable for'CTaskSimpleSetCharDecisionMaker;
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 678058: using guessed type void *`vtable for'CTaskComplexClimb;
// 678360: using guessed type char *CObject::bArea51SamSiteDisabled[2];
// 3323C0: using guessed type CQuaternion var_A8;

//----- (00333DD4) --------------------------------------------------------
void __fastcall CTaskComplexClimb::~CTaskComplexClimb(CTaskComplexClimb *this)
{
  void *v1; // r0

  CTaskComplexJump::~CTaskComplexJump(this);
  sub_197118(v1);
}
// 333DE0: variable 'v1' is possibly undefined

//----- (00333DE4) --------------------------------------------------------
CTask *__fastcall CTaskComplexClimb::Clone(const CTaskComplexClimb *this)
{
  CTaskComplexJump *v1; // r0
  CTask *result; // r0

  v1 = (CTaskComplexJump *)CTask::operator new(0x14u);
  CTaskComplexJump::CTaskComplexJump(v1, 1);
  result->_vptr$CTask = (int (**)(void))&off_665698;
  return result;
}
// 333DFC: variable 'result' is possibly undefined
// 665698: using guessed type void *;
// 678058: using guessed type void *`vtable for'CTaskComplexClimb;

//----- (00333E04) --------------------------------------------------------
CTask *__fastcall CTaskComplex::GetSubTask(const CTaskComplex *this)
{
  return this->m_pSubTask;
}

//----- (00333E08) --------------------------------------------------------
bool __fastcall CTaskComplex::IsSimpleTask(const CTaskComplex *this)
{
  return 0;
}

//----- (00333E0C) --------------------------------------------------------
int __fastcall CTaskComplexClimb::GetTaskType(const CTaskComplexClimb *this)
{
  return 267;
}

//----- (00333E14) --------------------------------------------------------
void __fastcall CTaskComplexClimb::Serialize(CTaskComplexClimb *this)
{
  int v2; // r5
  _DWORD *v3; // r6
  int v4; // r0

  v2 = (*((int (__fastcall **)(CTaskComplexClimb *))this->_vptr$CTask + 5))(this);
  if ( UseDataFence )
    AddDataFence();
  v3 = malloc(4u);
  *v3 = v2;
  CGenericGameStorage::_SaveDataToWorkBuffer(v3, 4);
  free(v3);
  if ( (*((int (__fastcall **)(CTaskComplexClimb *))this->_vptr$CTask + 5))(this) != 267 )
  {
    v4 = (*((int (__fastcall **)(CTaskComplexClimb *))this->_vptr$CTask + 5))(this);
    sub_1941C4(267, v4);
  }
}

//----- (00333E84) --------------------------------------------------------
void __fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard>::~CTaskComplexSeekEntity(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *this)
{
  CEntity *m_pEntity; // r0
  CEntity **p_m_pEntity; // r1

  p_m_pEntity = &this->m_pEntity;
  m_pEntity = this->m_pEntity;
  this->_vptr$CTask = (int (**)(void))&off_6656D4;
  if ( m_pEntity )
    CEntity::CleanUpOldReference(m_pEntity, p_m_pEntity);
  sub_18EDB4(this);
}
// 6656D4: using guessed type void *off_6656D4;

//----- (00333EB0) --------------------------------------------------------
void __fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard>::~CTaskComplexSeekEntity(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *this)
{
  CEntity *m_pEntity; // r0
  CEntity **p_m_pEntity; // r1
  void *v4; // r0

  p_m_pEntity = &this->m_pEntity;
  m_pEntity = this->m_pEntity;
  this->_vptr$CTask = (int (**)(void))&off_6656D4;
  if ( m_pEntity )
    CEntity::CleanUpOldReference(m_pEntity, p_m_pEntity);
  CTaskComplex::~CTaskComplex(this);
  sub_197118(v4);
}
// 333ED8: variable 'v4' is possibly undefined
// 6656D4: using guessed type void *off_6656D4;

//----- (00333EE0) --------------------------------------------------------
CTask *__fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard>::Clone(
        const CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *this)
{
  void *v2; // r5
  __int64 v3; // d8
  __int64 v4; // d9
  CEntity *m_pEntity; // r6
  float m_fFollowNodeThresholdHeightChange; // r8
  char v7; // r9
  char v8; // r3
  char v9; // r0

  v2 = CTask::operator new(0x4Cu);
  v3 = *(_QWORD *)&this->m_iMaxSeekTime;
  v4 = *(_QWORD *)&this->m_fTargetRadius;
  m_pEntity = this->m_pEntity;
  m_fFollowNodeThresholdHeightChange = this->m_fFollowNodeThresholdHeightChange;
  v7 = *((_BYTE *)this + 72);
  CTaskComplex::CTaskComplex((CTaskComplex *)v2);
  *((_QWORD *)v2 + 2) = v3;
  *((_QWORD *)v2 + 3) = v4;
  *((_DWORD *)v2 + 8) = 0;
  *((float *)v2 + 9) = m_fFollowNodeThresholdHeightChange;
  *((_WORD *)v2 + 24) = 0;
  *((_WORD *)v2 + 30) = 0;
  *((_DWORD *)v2 + 10) = 0;
  *((_DWORD *)v2 + 11) = 0;
  *((_DWORD *)v2 + 13) = 0;
  *((_DWORD *)v2 + 14) = 0;
  v8 = *((_BYTE *)v2 + 72);
  *(_DWORD *)v2 = &off_6656D4;
  *((_DWORD *)v2 + 16) = &off_665710;
  *((_DWORD *)v2 + 17) = 6;
  v9 = v7 & 1 | v8 & 0xF0 | 2;
  *((_BYTE *)v2 + 72) = v9;
  *((_DWORD *)v2 + 3) = m_pEntity;
  if ( m_pEntity )
  {
    CEntity::RegisterReference(m_pEntity, (CEntity **)v2 + 3);
    v9 = *((_BYTE *)v2 + 72);
  }
  *((_DWORD *)v2 + 17) = this->m_iMoveState;
  *((_BYTE *)v2 + 72) = v9 & 0xF7 | *((_BYTE *)this + 72) & 8;
  *((_DWORD *)v2 + 8) = LODWORD(this->m_fGoToPointDistance);
  *((_DWORD *)v2 + 17) = this->m_iMoveState;
  return (CTask *)v2;
}
// 6656D4: using guessed type void *off_6656D4;
// 665710: using guessed type void *off_665710;

//----- (00333FA8) --------------------------------------------------------
int __fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard>::GetTaskType(
        const CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *this)
{
  return 907;
}

//----- (00333FB0) --------------------------------------------------------
bool __fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard>::MakeAbortable(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *this,
        CPed *pPed,
        const int iPriority,
        const CEvent *pEvent)
{
  int v5; // lr
  int v6; // r0
  int v7; // r1

  if ( !iPriority )
  {
    this->m_iMaxSeekTime = -1;
    v5 = CTimer::m_snTimeInMilliseconds;
    this->m_seekTimer.m_bIsActive = 1;
    this->m_seekTimer.m_iStartTime = v5;
    this->m_seekTimer.m_iDuration = -1;
  }
  v6 = (*((int (__fastcall **)(CTask *, CPed *))this->m_pSubTask->CTaskComplex::_vptr$CTask + 7))(
         this->m_pSubTask,
         pPed);
  if ( v6 == 1 )
  {
    v7 = CTimer::m_snTimeInMilliseconds;
    this->m_scanTimer.m_bIsActive = 1;
    this->m_scanTimer.m_iStartTime = v7;
    this->m_scanTimer.m_iDuration = 0;
  }
  return v6;
}

//----- (00334000) --------------------------------------------------------
void __fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard>::Serialize(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *this)
{
  _DWORD *v2; // r5
  int v3; // r5
  _DWORD *v4; // r6
  CEntity *m_pEntity; // r0
  int v6; // r6
  _DWORD *v7; // r5
  CEntity *v8; // r0
  int v9; // r1
  int v10; // r4
  int v11; // r0
  _DWORD *v12; // r4
  _DWORD *v13; // r5

  if ( UseDataFence )
    AddDataFence();
  v2 = malloc(4u);
  *v2 = 1;
  CGenericGameStorage::_SaveDataToWorkBuffer(v2, 4);
  free(v2);
  v3 = (*((int (__fastcall **)(CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *))this->_vptr$CTask + 5))(this);
  if ( UseDataFence )
    AddDataFence();
  v4 = malloc(4u);
  *v4 = v3;
  CGenericGameStorage::_SaveDataToWorkBuffer(v4, 4);
  free(v4);
  if ( (*((int (__fastcall **)(CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *))this->_vptr$CTask + 5))(this) == 907 )
  {
    m_pEntity = this->m_pEntity;
    if ( m_pEntity )
    {
      v6 = *(_BYTE *)&m_pEntity->m_info & 7;
      if ( UseDataFence )
        AddDataFence();
      v7 = malloc(4u);
      *v7 = v6;
      CGenericGameStorage::_SaveDataToWorkBuffer(v7, 4);
      free(v7);
      v8 = this->m_pEntity;
      v9 = *(_BYTE *)&v8->m_info & 7;
      switch ( v9 )
      {
        case 2:
          v10 = GettPoolVehicleRef((CVehicle *)v8);
          break;
        case 4:
          v10 = GettPoolObjRef((CObject *)v8);
          break;
        case 3:
          v10 = GettPoolPedRef((CPed *)v8);
          break;
        default:
          return;
      }
      if ( UseDataFence )
        AddDataFence();
      v13 = malloc(4u);
      *v13 = v10;
      CGenericGameStorage::_SaveDataToWorkBuffer(v13, 4);
      j_free(v13);
    }
    else
    {
      if ( UseDataFence )
        AddDataFence();
      v12 = malloc(4u);
      *v12 = 0;
      CGenericGameStorage::_SaveDataToWorkBuffer(v12, 4);
      j_free(v12);
    }
  }
  else
  {
    v11 = (*((int (__fastcall **)(CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *))this->_vptr$CTask + 5))(this);
    sub_1941C4(907, v11);
  }
}

//----- (0033416C) --------------------------------------------------------
CTask *__fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard>::CreateNextSubTask(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *this,
        CPed *pPed)
{
  int v4; // r0
  CTaskSimpleStandStill *v5; // r6
  CTaskSimpleCarDrive *v6; // r0
  int v7; // r0
  bool v9; // zf
  CEntity *m_pEntity; // r0
  CMatrix *m_pMat; // r1
  CMatrix *v12; // r2
  CSimpleTransform *p_tx; // r3
  float32x2_t *p_m_transform; // r1
  float32x2_t v15; // d16
  unsigned __int64 v16; // d0
  float v17; // s0
  float m_fGoToPointDistance; // s2
  int v19; // r1
  CTaskSimpleStandStill *v20; // r0
  char v21; // r0
  CTaskSimpleStandStill v22; // [sp+8h] [bp-30h] BYREF

  if ( !this->m_pEntity )
    return 0;
  v4 = (*((int (__fastcall **)(CTask *))this->m_pSubTask->CTaskComplex::_vptr$CTask + 5))(this->m_pSubTask);
  v5 = 0;
  if ( v4 <= 718 )
  {
    if ( v4 != 203 )
    {
      if ( v4 == 219 )
      {
        v5 = 0;
        CTaskSimpleStandStill::CTaskSimpleStandStill(&v22, -1, 0, 0, 8.0);
        CTaskSimpleStandStill::ProcessPed(v20, pPed);
        CTaskSimpleStandStill::~CTaskSimpleStandStill(&v22);
      }
      else if ( v4 == 704 )
      {
        v5 = 0;
        if ( !(*((unsigned __int8 *)&pPed->m_nPedFlags + 1) << 31) )
        {
          v6 = (CTaskSimpleCarDrive *)CTask::operator new(0x70u);
          CTaskSimpleCarDrive::CTaskSimpleCarDrive(v6, pPed->m_pMyVehicle, 0, 0);
          *(_DWORD *)(v7 + 96) = 2000;
          *(_WORD *)(v7 + 108) = 0;
          *(_DWORD *)(v7 + 100) = 0;
          *(_DWORD *)(v7 + 104) = 0;
          v5 = (CTaskSimpleStandStill *)v7;
          *(_DWORD *)v7 = &off_66571C;
        }
      }
      return v5;
    }
    if ( pPed->m_pAttachToEntity )
    {
      v5 = (CTaskSimpleStandStill *)CTask::operator new(0x20u);
      CTaskSimpleStandStill::CTaskSimpleStandStill(v5, 2000, 0, 0, 8.0);
      return v5;
    }
    return (CTask *)(*((int (__fastcall **)(CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *, CPed *))this->_vptr$CTask
                     + 11))(
                      this,
                      pPed);
  }
  if ( v4 == 719 )
    return (CTask *)(*((int (__fastcall **)(CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *, CPed *))this->_vptr$CTask
                     + 11))(
                      this,
                      pPed);
  v9 = v4 == 903;
  if ( v4 != 903 )
    v9 = v4 == 906;
  if ( !v9 )
    return v5;
  m_pEntity = this->m_pEntity;
  m_pMat = pPed->m_pMat;
  v12 = m_pEntity->m_pMat;
  p_tx = (CSimpleTransform *)&m_pMat->tx;
  if ( !m_pMat )
    p_tx = &pPed->m_transform;
  p_m_transform = (float32x2_t *)&v12->tx;
  if ( !v12 )
    p_m_transform = (float32x2_t *)&m_pEntity->m_transform;
  v15.n64_u64[0] = vsub_f32(*(float32x2_t *)&p_tx->m_translate.x, (float32x2_t)p_m_transform->n64_u64[0]).n64_u64[0];
  v16 = vmul_f32(v15, v15).n64_u64[0];
  v17 = (float)(*(float *)&v16 + *((float *)&v16 + 1)) + 0.0;
  if ( v17 <= (float)(this->m_fTargetRadius * this->m_fTargetRadius) )
  {
    v21 = *((_BYTE *)this + 72);
    *((_BYTE *)this + 72) = v21 | 4;
    v19 = 920;
    if ( (v21 & 2) == 0 )
      v19 = 1302;
  }
  else
  {
    m_fGoToPointDistance = this->m_fGoToPointDistance;
    if ( m_fGoToPointDistance == 0.0 )
    {
      v19 = 906;
    }
    else if ( v17 <= (float)(m_fGoToPointDistance * m_fGoToPointDistance) )
    {
      v19 = 903;
    }
    else
    {
      v19 = 906;
    }
  }
  return sub_19229C(this, v19, pPed);
}
// 3341C2: variable 'v7' is possibly undefined
// 3342BE: variable 'v20' is possibly undefined
// 66571C: using guessed type void *off_66571C;

//----- (00334304) --------------------------------------------------------
CTask *__fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard>::CreateFirstSubTask(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *this,
        CPed *pPed)
{
  __int64 v4; // kr00_8
  int v5; // r1
  CEntity *m_pEntity; // r0
  bool v7; // zf
  CMatrix *m_pMat; // r1
  CMatrix *v9; // r2
  float32x2_t *p_tx; // r3
  CSimpleTransform *p_m_transform; // r0
  float32x2_t v12; // d16
  unsigned __int64 v13; // d0
  float v14; // s0
  int v15; // r1
  CTaskSimpleTired *v16; // r0
  float m_fGoToPointDistance; // s2
  CTaskComplexLeaveCar *v18; // r0
  CTask *result; // r0

  v4 = *(_QWORD *)&this->m_iMaxSeekTime;
  v5 = CTimer::m_snTimeInMilliseconds;
  this->m_scanTimer.m_bIsActive = 1;
  this->m_scanTimer.m_iStartTime = v5;
  this->m_scanTimer.m_iDuration = HIDWORD(v4);
  if ( (_DWORD)v4 != -1 )
  {
    this->m_seekTimer.m_bIsActive = 1;
    this->m_seekTimer.m_iStartTime = v5;
    this->m_seekTimer.m_iDuration = v4;
  }
  m_pEntity = this->m_pEntity;
  if ( m_pEntity )
  {
    v7 = *((unsigned __int8 *)&pPed->m_nPedFlags + 1) << 31 == 0;
    if ( *((unsigned __int8 *)&pPed->m_nPedFlags + 1) << 31 )
      v7 = pPed->m_pMyVehicle == 0;
    if ( v7 )
    {
      m_pMat = m_pEntity->m_pMat;
      v9 = pPed->m_pMat;
      p_tx = (float32x2_t *)&m_pMat->tx;
      if ( !m_pMat )
        p_tx = (float32x2_t *)&m_pEntity->m_transform;
      p_m_transform = (CSimpleTransform *)&v9->tx;
      if ( !v9 )
        p_m_transform = &pPed->m_transform;
      v12.n64_u64[0] = vsub_f32(*(float32x2_t *)&p_m_transform->m_translate.x, (float32x2_t)p_tx->n64_u64[0]).n64_u64[0];
      v13 = vmul_f32(v12, v12).n64_u64[0];
      v14 = (float)(*(float *)&v13 + *((float *)&v13 + 1)) + 0.0;
      if ( v14 >= (float)(this->m_fTargetRadius * this->m_fTargetRadius) )
      {
        m_fGoToPointDistance = this->m_fGoToPointDistance;
        if ( m_fGoToPointDistance == 0.0 )
        {
          v15 = 906;
        }
        else
        {
          v15 = 903;
          if ( v14 > (float)(m_fGoToPointDistance * m_fGoToPointDistance) )
            v15 = 906;
        }
      }
      else
      {
        *((_BYTE *)this + 72) |= 4u;
        CPed::SetMoveState(pPed, PEDMOVE_STILL);
        v15 = 244;
      }
      return sub_19229C(this, v15, pPed);
    }
    else
    {
      v18 = (CTaskComplexLeaveCar *)CTask::operator new(0x34u);
      CTaskComplexLeaveCar::CTaskComplexLeaveCar(v18, pPed->m_pMyVehicle, 0, 0, 1, 0);
    }
  }
  else
  {
    v16 = (CTaskSimpleTired *)CTask::operator new(0x1Cu);
    CTaskSimpleTired::CTaskSimpleTired(v16, 1000);
  }
  return result;
}

//----- (00334414) --------------------------------------------------------
CTask *__fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard>::ControlSubTask(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *this,
        CPed *pPed)
{
  CEntity *m_pEntity; // r4
  CTaskSimpleTired *m_pSubTask; // r6
  RwReal y; // r8
  CPhysical *m_pGroundPhysical; // r0
  bool v8; // zf
  CPhysical *v9; // r0
  bool v10; // zf
  CEntity *m_pAttachToEntity; // r0
  CEntity *v12; // r0
  unsigned int v13; // r1
  int m_iStartTime; // r2
  unsigned int v15; // r1
  int v16; // r2
  CMatrix *v17; // r0
  float *v18; // r4
  int v19; // r1
  CSimpleTransform *v20; // r2
  float *v21; // r0
  float v22; // s2
  float z; // s4
  float x; // s16
  RwReal v25; // s18
  RwReal v26; // s20
  float *v27; // r1
  float v28; // s4
  float v29; // s6
  int v30; // r0
  float v31; // s18
  float v32; // s20
  float v33; // s16
  int v34; // r0
  float RadianAngleBetweenPoints; // r0
  float v36; // r0
  int m_iPeriod; // r2
  CMatrix *m_pMat; // r1
  CSimpleTransform *p_tx; // r2
  __int64 v40; // d16
  CMatrix *v41; // r0
  CSimpleTransform *p_m_transform; // r1
  float v43; // s20
  float m_fGoToPointDistance; // s0
  CEntity *v45; // r0
  int m_iMoveState; // r1
  CMatrix *v47; // r2
  CSimpleTransform *v48; // r3
  __int64 v49; // d16
  CTask *v50; // r0
  char m_pParent; // r1
  float v52; // s0
  CEntity *v53; // r0
  int v54; // r1
  CMatrix *v55; // r2
  CSimpleTransform *v56; // r3
  __int64 v57; // d16
  float m_fSlowDownDistance; // s0
  float m_fTargetRadius; // r2
  CTask v60; // d16
  CEntity *v61; // r0
  CPlayerPed *PlayerPed; // r0
  CVector v64; // [sp+14h] [bp-B4h] BYREF
  CMatrix output; // [sp+20h] [bp-A8h] BYREF
  CVector pCoors; // [sp+68h] [bp-60h] BYREF
  CVector v67; // [sp+78h] [bp-50h] BYREF
  CVector v; // [sp+88h] [bp-40h] BYREF

  m_pEntity = this->m_pEntity;
  m_pSubTask = (CTaskSimpleTired *)this->m_pSubTask;
  if ( !m_pEntity
    || (*(_BYTE *)&m_pEntity->m_info & 7) != 3
    || !CPedGroups::AreInSameGroup(pPed, (const CPed *)m_pEntity) )
  {
    goto LABEL_19;
  }
  if ( BYTE1(m_pEntity[1].m_transform.m_translate.y) << 31 )
    goto LABEL_15;
  y = m_pEntity[23].m_transform.m_translate.y;
  if ( y != 0.0 && (*(_BYTE *)(LODWORD(y) + 58) & 7) == 2 )
  {
    m_pGroundPhysical = pPed->m_pGroundPhysical;
    v8 = m_pGroundPhysical == (CPhysical *)LODWORD(y);
    if ( m_pGroundPhysical != (CPhysical *)LODWORD(y) )
      v8 = pPed->m_pEntityStandingOn == (CEntity *)LODWORD(y);
    if ( v8 )
      goto LABEL_73;
  }
  y = *(float *)&m_pEntity[23].RandomSeed;
  if ( y == 0.0 || (*(_BYTE *)(LODWORD(y) + 58) & 7) != 2 )
    goto LABEL_15;
  v9 = pPed->m_pGroundPhysical;
  v10 = v9 == (CPhysical *)LODWORD(y);
  if ( v9 != (CPhysical *)LODWORD(y) )
    v10 = pPed->m_pEntityStandingOn == (CEntity *)LODWORD(y);
  if ( v10 )
  {
LABEL_73:
    if ( *(_DWORD *)(LODWORD(y) + 1440) != 5 )
      y = 0.0;
  }
  else
  {
LABEL_15:
    y = 0.0;
  }
  m_pAttachToEntity = pPed->m_pAttachToEntity;
  if ( y == 0.0 && m_pAttachToEntity )
  {
    CPed::DettachPedFromEntity(pPed);
LABEL_19:
    if ( (*((int (__fastcall **)(CTask *))this->m_pSubTask->CTaskComplex::_vptr$CTask + 5))(this->m_pSubTask) != 906
      && (*((int (__fastcall **)(CTask *))this->m_pSubTask->CTaskComplex::_vptr$CTask + 5))(this->m_pSubTask) != 903 )
    {
      goto LABEL_81;
    }
    v12 = this->m_pEntity;
    if ( !v12 )
    {
      if ( (*((int (__fastcall **)(CTask *, CPed *, int, _DWORD))this->m_pSubTask->CTaskComplex::_vptr$CTask + 7))(
             this->m_pSubTask,
             pPed,
             1,
             0) )
      {
        m_pSubTask = 0;
      }
      goto LABEL_81;
    }
    if ( this->m_seekTimer.m_bIsActive )
    {
      if ( this->m_seekTimer.m_bIsStopped )
      {
        v13 = CTimer::m_snTimeInMilliseconds;
        this->m_seekTimer.m_bIsStopped = 0;
        this->m_seekTimer.m_iStartTime = v13;
        m_iStartTime = v13;
      }
      else
      {
        m_iStartTime = this->m_seekTimer.m_iStartTime;
        v13 = CTimer::m_snTimeInMilliseconds;
      }
      if ( m_iStartTime + this->m_seekTimer.m_iDuration <= v13 )
      {
        if ( (*((int (__fastcall **)(CTask *, CPed *, int, _DWORD))this->m_pSubTask->CTaskComplex::_vptr$CTask + 7))(
               this->m_pSubTask,
               pPed,
               1,
               0) == 1 )
        {
          if ( *((unsigned __int8 *)this + 72) << 31 )
          {
            m_pSubTask = (CTaskSimpleTired *)CTask::operator new(0x1Cu);
            CTaskSimpleTired::CTaskSimpleTired(m_pSubTask, 1000);
          }
          else
          {
            m_pSubTask = 0;
          }
        }
        goto LABEL_81;
      }
    }
    if ( !this->m_scanTimer.m_bIsActive
      || (!this->m_scanTimer.m_bIsStopped ? (v16 = this->m_scanTimer.m_iStartTime, v15 = CTimer::m_snTimeInMilliseconds) : (v15 = CTimer::m_snTimeInMilliseconds, this->m_scanTimer.m_bIsStopped = 0, this->m_scanTimer.m_iStartTime = v15, v16 = v15),
          v16 + this->m_scanTimer.m_iDuration > v15) )
    {
LABEL_81:
      v61 = this->m_pEntity;
      if ( v61 )
      {
        if ( (*(_BYTE *)&v61->m_info & 7) == 3 && CPed::IsPlayer((const CPed *)v61) )
        {
          PlayerPed = FindPlayerPed(-1);
          if ( CPedGroupMembership::IsMember(
                 &CPedGroups::ms_groups[PlayerPed->m_pPlayerData->m_PlayerGroup].m_membership,
                 pPed)
            && (unsigned int)(pPed->m_eMoveState - 5) <= 2
            && !((CTimer::m_FrameCounter + pPed->RandomSeed) << 18) )
          {
            CPed::Say(pPed, 0x5Bu, 0, 1.0, 0, 0, 0);
          }
        }
      }
      return m_pSubTask;
    }
    m_iPeriod = this->m_iPeriod;
    this->m_scanTimer.m_bIsActive = 1;
    this->m_scanTimer.m_iStartTime = v15;
    this->m_scanTimer.m_iDuration = m_iPeriod;
    m_pMat = v12->m_pMat;
    p_tx = (CSimpleTransform *)&m_pMat->tx;
    if ( !m_pMat )
      p_tx = &v12->m_transform;
    v40 = *(_QWORD *)&p_tx->m_translate.x;
    v.z = p_tx->m_translate.z;
    *(_QWORD *)&v.x = v40;
    v41 = pPed->m_pMat;
    p_m_transform = (CSimpleTransform *)&v41->tx;
    if ( !v41 )
      p_m_transform = &pPed->m_transform;
    v43 = (float)((float)((float)(p_m_transform->m_translate.x - *(float *)&v40)
                        * (float)(p_m_transform->m_translate.x - *(float *)&v40))
                + (float)((float)(p_m_transform->m_translate.y - *((float *)&v40 + 1))
                        * (float)(p_m_transform->m_translate.y - *((float *)&v40 + 1))))
        + 0.0;
    if ( (*((int (__fastcall **)(CTask *))this->m_pSubTask->CTaskComplex::_vptr$CTask + 5))(this->m_pSubTask) == 906 )
    {
      m_fGoToPointDistance = this->m_fGoToPointDistance;
      if ( m_fGoToPointDistance == 0.0
        || v43 >= (float)((float)(m_fGoToPointDistance + -1.0) * (float)(m_fGoToPointDistance + -1.0)) )
      {
        CTaskComplexFollowNodeRoute::SetTarget(
          (CTaskComplexFollowNodeRoute *)this->m_pSubTask,
          pPed,
          &v,
          this->m_fTargetRadius,
          this->m_fSlowDownDistance,
          this->m_fFollowNodeThresholdHeightChange,
          0);
      }
      else if ( (*((int (__fastcall **)(CTask *, CPed *, int, _DWORD))this->m_pSubTask->CTaskComplex::_vptr$CTask + 7))(
                  this->m_pSubTask,
                  pPed,
                  1,
                  0) == 1 )
      {
        m_pSubTask = (CTaskSimpleTired *)CTask::operator new(0x28u);
        v45 = this->m_pEntity;
        m_iMoveState = this->m_iMoveState;
        v47 = v45->m_pMat;
        v48 = (CSimpleTransform *)&v47->tx;
        if ( !v47 )
          v48 = &v45->m_transform;
        v49 = *(_QWORD *)&v48->m_translate.x;
        output.zx = v48->m_translate.z;
        *(_QWORD *)&output.xx = v49;
        CTaskComplexGoToPointAndStandStill::CTaskComplexGoToPointAndStandStill(
          (CTaskComplexGoToPointAndStandStill *)m_pSubTask,
          m_iMoveState,
          (const CVector *)&output,
          this->m_fTargetRadius,
          this->m_fSlowDownDistance,
          0,
          0);
        LOBYTE(m_pSubTask[1].m_iDuration) = *((_BYTE *)this + 72) & 8 | m_pSubTask[1].m_iDuration & 0xF7;
        return m_pSubTask;
      }
      goto LABEL_80;
    }
    v50 = this->m_pSubTask;
    m_pParent = (char)v50[4].m_pParent;
    if ( (m_pParent & 0x10) == 0 )
    {
      v52 = this->m_fGoToPointDistance;
      if ( v52 == 0.0 || v43 <= (float)((float)(v52 + 1.0) * (float)(v52 + 1.0)) )
      {
        m_fSlowDownDistance = this->m_fSlowDownDistance;
        m_fTargetRadius = this->m_fTargetRadius;
        if ( *(float *)&v50[2]._vptr$CTask != *(float *)&v40
          || *(float *)&v50[3]._vptr$CTask != v.z
          || *(float *)&v50[4]._vptr$CTask != m_fSlowDownDistance )
        {
          v60 = *(CTask *)&v.x;
          v50[3]._vptr$CTask = (int (**)(void))LODWORD(v.z);
          *(float *)&v50[3].m_pParent = m_fTargetRadius;
          *(float *)&v50[4]._vptr$CTask = m_fSlowDownDistance;
          LOBYTE(v50[4].m_pParent) = m_pParent | 4;
          v50[2] = v60;
        }
      }
      else if ( (*((int (__fastcall **)(CTask *, CPed *, int, _DWORD))v50->_vptr$CTask + 7))(v50, pPed, 1, 0) == 1 )
      {
        m_pSubTask = (CTaskSimpleTired *)CTask::operator new(0x60u);
        v53 = this->m_pEntity;
        v54 = this->m_iMoveState;
        v55 = v53->m_pMat;
        v56 = (CSimpleTransform *)&v55->tx;
        if ( !v55 )
          v56 = &v53->m_transform;
        v57 = *(_QWORD *)&v56->m_translate.x;
        output.zx = v56->m_translate.z;
        *(_QWORD *)&output.xx = v57;
        CTaskComplexFollowNodeRoute::CTaskComplexFollowNodeRoute(
          (CTaskComplexFollowNodeRoute *)m_pSubTask,
          v54,
          (const CVector *)&output,
          this->m_fTargetRadius,
          this->m_fSlowDownDistance,
          this->m_fFollowNodeThresholdHeightChange,
          0,
          -1,
          1);
        return m_pSubTask;
      }
    }
LABEL_80:
    m_pSubTask = (CTaskSimpleTired *)this->m_pSubTask;
    goto LABEL_81;
  }
  if ( y == 0.0
    || m_pAttachToEntity
    || (*((int (__fastcall **)(CTask *))this->m_pSubTask->CTaskComplex::_vptr$CTask + 5))(this->m_pSubTask) == 203
    || (*((int (__fastcall **)(CTask *, CPed *, int, _DWORD))this->m_pSubTask->CTaskComplex::_vptr$CTask + 7))(
         this->m_pSubTask,
         pPed,
         1,
         0) != 1 )
  {
    goto LABEL_19;
  }
  v17 = pPed->m_pMat;
  v18 = (float *)(LODWORD(y) + 4);
  v19 = *(int *)((char *)&dword_14 + LODWORD(y));
  v20 = (CSimpleTransform *)&v17->tx;
  if ( !v17 )
    v20 = &pPed->m_transform;
  v21 = (float *)(LODWORD(y) + 4);
  v22 = v20->m_translate.y;
  z = v20->m_translate.z;
  if ( v19 )
    v21 = (float *)(v19 + 48);
  v.x = *v21 - v20->m_translate.x;
  x = v.x;
  v.y = v21[1] - v22;
  v25 = v.y;
  v26 = v21[2] - z;
  v.z = v26;
  v67.z = v26;
  *(_QWORD *)&v67.x = *(_QWORD *)&v.x;
  CVector::Normalise(&v67);
  v27 = (float *)(LODWORD(y) + 4);
  v28 = v25 - (float)(v67.y * 0.25);
  v29 = v26 - (float)(v67.z * 0.25);
  v.y = v28;
  v.z = v29;
  v30 = *(int *)((char *)&dword_14 + LODWORD(y));
  if ( v30 )
    v27 = (float *)(v30 + 48);
  v31 = *v27 - (float)(x - (float)(v67.x * 0.25));
  v.x = v31;
  v32 = v27[1] - v28;
  v.y = v32;
  v33 = v27[2] - v29;
  v.z = v33;
  pCoors.z = v33;
  *(_QWORD *)&pCoors.x = *(_QWORD *)&v.x;
  if ( CPedPlacement::FindZCoorForPed(&pCoors) )
  {
    v = pCoors;
    v33 = pCoors.z;
    v32 = pCoors.y;
    v31 = pCoors.x;
  }
  v34 = *(int *)((char *)&dword_14 + LODWORD(y));
  if ( v34 )
    v18 = (float *)(v34 + 48);
  v.x = v31 - *v18;
  v.y = v32 - v18[1];
  v.z = v33 - v18[2];
  output.m_pRwMat = 0;
  output.m_owner = 0;
  Invert(*(const CMatrix **)((char *)&dword_14 + LODWORD(y)), &output);
  CVector::FromMultiply3X3(&v64, &output, &v);
  RadianAngleBetweenPoints = CGeneral::GetRadianAngleBetweenPoints(v67.x, v67.y, 0.0, 0.0);
  v36 = CGeneral::LimitRadianAngle(RadianAngleBetweenPoints);
  CPed::AttachPedToEntity(
    pPed,
    (CEntity *)LODWORD(y),
    v64,
    (unsigned int)v36,
    0.2,
    pPed->m_WeaponSlots[pPed->m_nCurrentWeapon].m_eWeaponType);
  m_pSubTask = (CTaskSimpleTired *)CTask::operator new(0x20u);
  CTaskSimpleStandStill::CTaskSimpleStandStill((CTaskSimpleStandStill *)m_pSubTask, 2000, 0, 0, 8.0);
  CMatrix::~CMatrix(&output);
  return m_pSubTask;
}
// 14: using guessed type int dword_14;

//----- (00334A30) --------------------------------------------------------
void __fastcall CEntitySeekPosCalculatorStandard::ComputeEntitySeekPos(
        const CEntitySeekPosCalculatorStandard *this,
        const CPed *ped,
        const CEntity *entity,
        CVector *vSeekPos)
{
  CMatrix *m_pMat; // r0
  CSimpleTransform *p_tx; // r1
  __int64 v6; // d16

  m_pMat = entity->m_pMat;
  p_tx = (CSimpleTransform *)&m_pMat->tx;
  if ( !m_pMat )
    p_tx = &entity->m_transform;
  v6 = *(_QWORD *)&p_tx->m_translate.x;
  vSeekPos->z = p_tx->m_translate.z;
  *(_QWORD *)&vSeekPos->x = v6;
}

//----- (00334A4C) --------------------------------------------------------
CTask *__fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard>::CreateSubTask(
        const CTaskComplexSeekEntity<CEntitySeekPosCalculatorStandard> *this,
        const int iSubTaskType,
        CPed *pPed)
{
  CTaskComplexFollowNodeRoute *v5; // r4
  CEntity *v6; // r0
  int v7; // r1
  CMatrix *v8; // r2
  CSimpleTransform *p_m_transform; // r3
  __int64 v10; // d16
  CTaskComplexTurnToFaceEntityOrCoord *v11; // r6
  CTaskSimpleStandStill *v12; // r5
  CEntity *m_pEntity; // r0
  int m_iMoveState; // r1
  CMatrix *m_pMat; // r2
  CSimpleTransform *p_tx; // r3
  __int64 v17; // d16
  CVector vTarget; // [sp+18h] [bp-20h] BYREF

  v5 = 0;
  if ( iSubTaskType > 718 )
  {
    if ( iSubTaskType > 905 )
    {
      if ( iSubTaskType == 906 )
      {
        v5 = (CTaskComplexFollowNodeRoute *)CTask::operator new(0x60u);
        m_pEntity = this->m_pEntity;
        m_iMoveState = this->m_iMoveState;
        m_pMat = m_pEntity->m_pMat;
        p_tx = (CSimpleTransform *)&m_pMat->tx;
        if ( !m_pMat )
          p_tx = &m_pEntity->m_transform;
        v17 = *(_QWORD *)&p_tx->m_translate.x;
        vTarget.z = p_tx->m_translate.z;
        *(_QWORD *)&vTarget.x = v17;
        CTaskComplexFollowNodeRoute::CTaskComplexFollowNodeRoute(
          v5,
          m_iMoveState,
          &vTarget,
          this->m_fTargetRadius,
          this->m_fSlowDownDistance,
          this->m_fFollowNodeThresholdHeightChange,
          0,
          -1,
          1);
      }
      else if ( iSubTaskType == 920 )
      {
        v5 = (CTaskComplexFollowNodeRoute *)CTask::operator new(0x28u);
        CTaskComplexTurnToFaceEntityOrCoord::CTaskComplexTurnToFaceEntityOrCoord(
          (CTaskComplexTurnToFaceEntityOrCoord *)v5,
          this->m_pEntity,
          0.5,
          0.2);
      }
    }
    else if ( iSubTaskType == 719 )
    {
      v5 = (CTaskComplexFollowNodeRoute *)CTask::operator new(0x70u);
      CTaskSimpleCarDrive::CTaskSimpleCarDrive((CTaskSimpleCarDrive *)v5, pPed->m_pMyVehicle, 0, 0);
      v5[1]._vptr$CTask = (int (**)(void))(elf_hash_bucket + 1748);
      LOWORD(v5[1].m_vTarget.x) = 0;
      v5[1].m_pParent = 0;
      v5[1].m_pSubTask = 0;
      v5->_vptr$CTask = (int (**)(void))&off_66571C;
    }
    else if ( iSubTaskType == 903 )
    {
      v5 = (CTaskComplexFollowNodeRoute *)CTask::operator new(0x28u);
      v6 = this->m_pEntity;
      v7 = this->m_iMoveState;
      v8 = v6->m_pMat;
      p_m_transform = (CSimpleTransform *)&v8->tx;
      if ( !v8 )
        p_m_transform = &v6->m_transform;
      v10 = *(_QWORD *)&p_m_transform->m_translate.x;
      vTarget.z = p_m_transform->m_translate.z;
      *(_QWORD *)&vTarget.x = v10;
      CTaskComplexGoToPointAndStandStill::CTaskComplexGoToPointAndStandStill(
        (CTaskComplexGoToPointAndStandStill *)v5,
        v7,
        &vTarget,
        this->m_fTargetRadius,
        this->m_fSlowDownDistance,
        0,
        0);
      LOBYTE(v5->m_fFollowNodeThresholdHeightChange) = *((_BYTE *)this + 72) & 8 | LOBYTE(v5->m_fFollowNodeThresholdHeightChange) & 0xF7;
    }
  }
  else if ( iSubTaskType > 243 )
  {
    if ( iSubTaskType == 244 )
    {
      v5 = (CTaskComplexFollowNodeRoute *)CTask::operator new(0x40u);
      CTaskComplexSequence::CTaskComplexSequence((CTaskComplexSequence *)v5);
      if ( (*((_BYTE *)this + 72) & 2) != 0 )
      {
        v11 = (CTaskComplexTurnToFaceEntityOrCoord *)CTask::operator new(0x28u);
        CTaskComplexTurnToFaceEntityOrCoord::CTaskComplexTurnToFaceEntityOrCoord(v11, this->m_pEntity, 0.5, 0.2);
        CTaskComplexSequence::AddTask((CTaskComplexSequence *)v5, v11);
      }
      v12 = (CTaskSimpleStandStill *)CTask::operator new(0x20u);
      CTaskSimpleStandStill::CTaskSimpleStandStill(v12, 100, 0, 0, 8.0);
      CTaskComplexSequence::AddTask((CTaskComplexSequence *)v5, v12);
    }
    else if ( iSubTaskType == 704 )
    {
      v5 = (CTaskComplexFollowNodeRoute *)CTask::operator new(0x34u);
      CTaskComplexLeaveCar::CTaskComplexLeaveCar((CTaskComplexLeaveCar *)v5, pPed->m_pMyVehicle, 0, 0, 1, 0);
    }
  }
  else if ( iSubTaskType == 203 )
  {
    v5 = (CTaskComplexFollowNodeRoute *)CTask::operator new(0x20u);
    CTaskSimpleStandStill::CTaskSimpleStandStill((CTaskSimpleStandStill *)v5, 2000, 0, 0, 8.0);
  }
  else if ( iSubTaskType == 219 )
  {
    v5 = (CTaskComplexFollowNodeRoute *)CTask::operator new(0x1Cu);
    CTaskSimpleTired::CTaskSimpleTired((CTaskSimpleTired *)v5, 1000);
  }
  return v5;
}
// FC: using guessed type int elf_hash_bucket[16411];
// 66571C: using guessed type void *off_66571C;

//----- (00334C68) --------------------------------------------------------
void __fastcall CTaskSimpleCarDriveTimed::~CTaskSimpleCarDriveTimed(CTaskSimpleCarDriveTimed *this)
{
  void *v1; // r0

  CTaskSimpleCarSetTempAction::~CTaskSimpleCarSetTempAction(this);
  sub_197118(v1);
}
// 334C74: variable 'v1' is possibly undefined

//----- (00334C78) --------------------------------------------------------
CTask *__fastcall CTaskSimpleCarDriveTimed::Clone(const CTaskSimpleCarDriveTimed *this)
{
  CTaskSimpleCarDrive *v2; // r0
  CVehicle *m_pTargetVehicle; // r1
  int (**m_iTime)(void); // r4
  CTask *result; // r0

  v2 = (CTaskSimpleCarDrive *)CTask::operator new(0x70u);
  m_pTargetVehicle = this->m_pTargetVehicle;
  m_iTime = (int (**)(void))this->m_iTime;
  CTaskSimpleCarDrive::CTaskSimpleCarDrive(v2, m_pTargetVehicle, 0, 0);
  result[12]._vptr$CTask = m_iTime;
  LOWORD(result[13].m_pParent) = 0;
  result[12].m_pParent = 0;
  result[13]._vptr$CTask = 0;
  result->_vptr$CTask = (int (**)(void))&off_66571C;
  return result;
}
// 334C94: variable 'result' is possibly undefined
// 66571C: using guessed type void *off_66571C;

//----- (00334CAC) --------------------------------------------------------
int __fastcall CTaskSimpleCarDriveTimed::GetTaskType(const CTaskSimpleCarDriveTimed *this)
{
  return 719;
}

//----- (00334CB4) --------------------------------------------------------
void __fastcall CTaskSimpleCarDriveTimed::Serialize(CTaskSimpleCarDriveTimed *this)
{
  int v2; // r5
  _DWORD *v3; // r6
  CVehicle *m_pTargetVehicle; // r0
  int v5; // r5
  _DWORD *v6; // r6
  void *v7; // r0
  int v8; // r0
  _DWORD *v9; // r5
  _DWORD *v10; // r5

  v2 = (*((int (__fastcall **)(CTaskSimpleCarDriveTimed *))this->_vptr$CTask + 5))(this);
  if ( UseDataFence )
    AddDataFence();
  v3 = malloc(4u);
  *v3 = v2;
  CGenericGameStorage::_SaveDataToWorkBuffer(v3, 4);
  free(v3);
  if ( (*((int (__fastcall **)(CTaskSimpleCarDriveTimed *))this->_vptr$CTask + 5))(this) == 719 )
  {
    m_pTargetVehicle = this->m_pTargetVehicle;
    if ( m_pTargetVehicle )
    {
      v5 = GettPoolVehicleRef(m_pTargetVehicle);
      if ( UseDataFence )
        AddDataFence();
      v6 = malloc(4u);
      *v6 = v5;
      CGenericGameStorage::_SaveDataToWorkBuffer(v6, 4);
      v7 = v6;
    }
    else
    {
      if ( UseDataFence )
        AddDataFence();
      v9 = malloc(4u);
      *v9 = -1;
      CGenericGameStorage::_SaveDataToWorkBuffer(v9, 4);
      v7 = v9;
    }
    free(v7);
    if ( UseDataFence )
      AddDataFence();
    v10 = malloc(4u);
    *v10 = this->m_iTime;
    CGenericGameStorage::_SaveDataToWorkBuffer(v10, 4);
    j_free(v10);
  }
  else
  {
    v8 = (*((int (__fastcall **)(CTaskSimpleCarDriveTimed *))this->_vptr$CTask + 5))(this);
    sub_1941C4(719, v8);
  }
}

//----- (00334DB4) --------------------------------------------------------
bool __fastcall CTaskSimpleCarDriveTimed::ProcessPed(CTaskSimpleCarDriveTimed *this, CPed *pPed)
{
  __int64 v2; // r2
  unsigned int v3; // r2
  int m_iStartTime; // r12

  if ( !this->m_timer.m_bIsActive )
  {
    HIDWORD(v2) = this->m_iTime;
    LODWORD(v2) = CTimer::m_snTimeInMilliseconds;
    *(_QWORD *)&this->m_timer.m_iStartTime = v2;
    this->m_timer.m_bIsActive = 1;
  }
  if ( this->m_timer.m_bIsStopped )
  {
    v3 = CTimer::m_snTimeInMilliseconds;
    this->m_timer.m_bIsStopped = 0;
    this->m_timer.m_iStartTime = v3;
    m_iStartTime = v3;
  }
  else
  {
    m_iStartTime = this->m_timer.m_iStartTime;
    v3 = CTimer::m_snTimeInMilliseconds;
  }
  return this->m_timer.m_iDuration + m_iStartTime <= v3 || sub_194F78(this, pPed);
}

//----- (00334E10) --------------------------------------------------------
void __fastcall CRunningScript::PlayAnimScriptCommand(CRunningScript *this, Int32 CurrCommand)
{
  _BOOL4 v4; // r6
  Int32 v5; // r5
  char bOffsetPed; // r11
  int v7; // r8
  float v8; // s16
  Int32 v9; // r0
  int32 v10; // r6
  int v11; // r10
  CTaskSimpleRunNamedAnim *v12; // r5
  CTaskSimpleAffectSecondaryBehaviour *v13; // r0
  CTaskSimpleRunNamedAnim *v14; // r0
  _BOOL4 v15; // [sp+1Ch] [bp-5Ch]
  int32 v16; // [sp+20h] [bp-58h]
  Char pAnimGroupName[16]; // [sp+24h] [bp-54h] BYREF
  Char pStringToFill[24]; // [sp+34h] [bp-44h] BYREF

  v4 = 1;
  CRunningScript::CollectParameters(this, 1);
  v5 = ScriptParams[0];
  CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 0x18u);
  CRunningScript::ReadTextLabelFromScript(this, pAnimGroupName, 0x10u);
  bOffsetPed = 0;
  v16 = v5;
  if ( CurrCommand <= 2185 )
  {
    if ( CurrCommand != 1541 )
    {
      if ( CurrCommand == 2066 )
      {
        CRunningScript::CollectParameters(this, 6);
        v4 = 0;
        bOffsetPed = 0;
      }
      goto LABEL_11;
    }
LABEL_7:
    CRunningScript::CollectParameters(this, 6);
    bOffsetPed = 0;
    v4 = 1;
    goto LABEL_11;
  }
  if ( CurrCommand != 2186 )
  {
    if ( CurrCommand != 2586 )
      goto LABEL_11;
    goto LABEL_7;
  }
  CRunningScript::CollectParameters(this, 8);
  bOffsetPed = ScriptParams[7];
  if ( ScriptParams[7] )
    bOffsetPed = 1;
  v4 = ScriptParams[6] != 0;
LABEL_11:
  v15 = v4;
  v7 = ScriptParams[5];
  v8 = *(float *)ScriptParams;
  if ( ScriptParams[1] )
  {
    v9 = ScriptParams[4];
LABEL_16:
    v10 = 18;
    goto LABEL_17;
  }
  v10 = 16;
  v9 = ScriptParams[4];
  if ( ScriptParams[5] >= 1 && !ScriptParams[4] )
  {
    v9 = 0;
    goto LABEL_16;
  }
LABEL_17:
  v11 = CTaskSequences::ms_iActiveSequence;
  if ( ScriptParams[2] )
    v10 |= 0x40u;
  if ( ScriptParams[3] )
    v10 |= 0x80u;
  if ( !v9 )
    v10 |= 8u;
  if ( CurrCommand == 2586 )
    v10 |= 0x400u;
  v12 = (CTaskSimpleRunNamedAnim *)CTask::operator new(0x64u);
  if ( v7 < 1 )
    CTaskSimpleRunNamedAnim::CTaskSimpleRunNamedAnim(
      v12,
      pStringToFill,
      pAnimGroupName,
      v10,
      v8,
      -1,
      !v15,
      v11 > -1,
      bOffsetPed,
      0);
  else
    CTaskSimpleRunNamedAnim::CTaskSimpleRunNamedAnim(
      v12,
      pStringToFill,
      pAnimGroupName,
      v10,
      v8,
      v7,
      !v15,
      v11 > -1,
      bOffsetPed,
      0);
  if ( CurrCommand == 2586 )
  {
    v13 = (CTaskSimpleAffectSecondaryBehaviour *)CTask::operator new(0x14u);
    CTaskSimpleAffectSecondaryBehaviour::CTaskSimpleAffectSecondaryBehaviour(v13, 1, 4, v12);
    v12 = v14;
  }
  CRunningScript::GivePedScriptedTask(this, v16, v12, CurrCommand);
}
// 334FB0: variable 'v14' is possibly undefined
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (00335004) --------------------------------------------------------
void CTheScripts::ReinitialiseSwitchStatementData()
{
  CTheScripts::ValueToCheckInSwitchStatement = 0;
  CTheScripts::NumberOfEntriesStillToReadForSwitch = 0;
  CTheScripts::SwitchDefaultExists = 0;
  CTheScripts::SwitchDefaultAddress = 0;
  CTheScripts::NumberOfEntriesInSwitchTable = 0;
}

//----- (00335050) --------------------------------------------------------
void __fastcall CTheScripts::AddToSwitchJumpTable(Int32 NewValue, Int32 NewAddress)
{
  int v2; // r2

  v2 = CTheScripts::NumberOfEntriesInSwitchTable;
  CTheScripts::SwitchJumpTable[CTheScripts::NumberOfEntriesInSwitchTable].Value = NewValue;
  CTheScripts::SwitchJumpTable[v2].Address = NewAddress;
  CTheScripts::NumberOfEntriesInSwitchTable = v2 + 1;
}

//----- (0033507C) --------------------------------------------------------
void __fastcall CTheScripts::UseSwitchJumpTable(Int32 *pJumpAddress)
{
  int v1; // lr
  unsigned __int8 v2; // r1
  unsigned int v3; // r4
  unsigned __int8 v4; // r2
  unsigned int v5; // r3
  Int32 Value; // r4
  jump_table_entry *v7; // r1
  Int32 *p_Address; // r1
  Int32 v9; // t1

  v1 = 0;
  *pJumpAddress = 0;
  v2 = CTheScripts::NumberOfEntriesInSwitchTable - 1;
  v3 = (unsigned __int8)(CTheScripts::NumberOfEntriesInSwitchTable - 1);
  if ( v3 >= 2 )
  {
    v4 = 0;
    while ( 1 )
    {
      v5 = v3 >> 1;
      Value = CTheScripts::SwitchJumpTable[v3 >> 1].Value;
      if ( CTheScripts::ValueToCheckInSwitchStatement == Value )
        break;
      if ( CTheScripts::ValueToCheckInSwitchStatement <= Value )
        v2 = v5;
      else
        v4 = v5;
      v5 = v2;
      v1 = v4;
      v3 = v2 + v4;
      if ( v2 - v4 <= 1 )
        goto LABEL_10;
    }
LABEL_14:
    p_Address = &CTheScripts::SwitchJumpTable[v5].Address;
    goto LABEL_15;
  }
  v5 = (unsigned __int8)(CTheScripts::NumberOfEntriesInSwitchTable - 1);
LABEL_10:
  if ( CTheScripts::ValueToCheckInSwitchStatement == CTheScripts::SwitchJumpTable[v5].Value )
    goto LABEL_14;
  v7 = &CTheScripts::SwitchJumpTable[v1];
  v9 = v7->Value;
  p_Address = &v7->Address;
  if ( CTheScripts::ValueToCheckInSwitchStatement != v9 )
    p_Address = &CTheScripts::SwitchDefaultAddress;
LABEL_15:
  *pJumpAddress = *p_Address;
  CTheScripts::NumberOfEntriesStillToReadForSwitch = 0;
  CTheScripts::ValueToCheckInSwitchStatement = 0;
  CTheScripts::SwitchDefaultExists = 0;
  CTheScripts::SwitchDefaultAddress = 0;
  CTheScripts::NumberOfEntriesInSwitchTable = 0;
}

//----- (00335184) --------------------------------------------------------
void __fastcall CScriptResourceManager::Initialise(CScriptResourceManager *this)
{
  int i; // r3
  char *v2; // r2

  for ( i = 0; i != 75; ++i )
  {
    this->ScriptResources[i].ResourceIndex = -1;
    v2 = (char *)this + i * 12;
    *((_WORD *)v2 + 4) = 0;
    *((_DWORD *)v2 + 1) = 0;
  }
}

//----- (003351A0) --------------------------------------------------------
void __fastcall CScriptResourceManager::AddToResourceManager(
        CScriptResourceManager *this,
        Int32 Index,
        UInt32 Type,
        CRunningScript *pScriptUsingThisResource)
{
  CRunningScript **p_pUsedBy; // r12
  int v5; // r4
  int v6; // lr
  int v7; // r6
  int v8; // r5
  bool v9; // zf
  script_resource_struct *v10; // r0

  p_pUsedBy = &this->ScriptResources[0].pUsedBy;
  v5 = -1;
  v6 = -1;
  while ( 1 )
  {
    v7 = (int)*(p_pUsedBy - 1);
    v8 = *((unsigned __int16 *)p_pUsedBy + 2);
    v9 = v7 == Index;
    if ( v7 == Index )
      v9 = v8 == Type;
    if ( v9 && *p_pUsedBy == pScriptUsingThisResource )
      break;
    ++v5;
    p_pUsedBy += 3;
    if ( !v8 )
      v6 = v5;
    if ( v5 >= 74 )
    {
      if ( v6 != -1 )
      {
        this->ScriptResources[v6].ResourceIndex = Index;
        v10 = &this->ScriptResources[v6];
        v10->ResourceType = Type;
        v10->pUsedBy = pScriptUsingThisResource;
      }
      return;
    }
  }
}

//----- (003351FA) --------------------------------------------------------
Bool8 __fastcall CScriptResourceManager::RemoveFromResourceManager(
        CScriptResourceManager *this,
        Int32 Index,
        UInt32 Type,
        CRunningScript *pScriptFreeingThisResource)
{
  CRunningScript **p_pUsedBy; // r4
  int v5; // lr
  int v6; // r12
  int i; // r5
  int v8; // r6
  bool v9; // zf
  int v10; // r6
  script_resource_struct *v11; // r0

  p_pUsedBy = &this->ScriptResources[0].pUsedBy;
  v5 = -1;
  v6 = 0;
  for ( i = 0; i != 75; ++i )
  {
    v8 = (int)*(p_pUsedBy - 1);
    v9 = v8 == Index;
    if ( v8 == Index )
      v9 = *((unsigned __int16 *)p_pUsedBy + 2) == Type;
    if ( v9 )
    {
      v10 = 0;
      if ( *p_pUsedBy == pScriptFreeingThisResource )
        v5 = i;
      else
        v10 = 1;
      v6 += v10;
    }
    p_pUsedBy += 3;
  }
  if ( v5 != -1 )
  {
    this->ScriptResources[v5].ResourceIndex = -1;
    v11 = &this->ScriptResources[v5];
    v11->ResourceType = 0;
    v11->pUsedBy = 0;
  }
  return v6 == 0;
}

//----- (00335262) --------------------------------------------------------
Bool8 __fastcall CScriptResourceManager::HasResourceBeenRequested(
        CScriptResourceManager *this,
        Int32 Index,
        UInt32 Type)
{
  UInt16 *p_ResourceType; // r0
  unsigned int i; // r12
  int v5; // r3
  bool v6; // zf

  p_ResourceType = &this->ScriptResources[0].ResourceType;
  for ( i = 0; i < 0x4B; ++i )
  {
    v5 = *((_DWORD *)p_ResourceType - 2);
    v6 = v5 == Index;
    if ( v5 == Index )
      v6 = *p_ResourceType == Type;
    if ( v6 )
      return 1;
    p_ResourceType += 6;
  }
  return 0;
}

//----- (0033528C) --------------------------------------------------------
void __fastcall CStreamedScripts::Initialise(CStreamedScripts *this)
{
  int v1; // r3
  char *v2; // r2

  v1 = 0;
  do
  {
    this->ScriptStructures[v1].pStreamedScriptMemory = 0;
    v2 = (char *)this + v1 * 32;
    ++v1;
    v2[4] = 0;
    *((_WORD *)v2 + 3) = -1;
    v2[8] = 0;
    *((_DWORD *)v2 + 7) = 0;
  }
  while ( v1 != 82 );
  this->NumberOfStreamedScripts = 0;
  this->SizeOfLargestStreamedScript = 0;
}

//----- (003352B6) --------------------------------------------------------
void __fastcall CStreamedScripts::ReInitialise(CStreamedScripts *this)
{
  UInt8 *p_NumberOfUsers; // r0
  int i; // r2

  p_NumberOfUsers = &this->ScriptStructures[0].NumberOfUsers;
  for ( i = 0; i != 2624; i += 32 )
    p_NumberOfUsers[i] = 0;
}

//----- (003352C8) --------------------------------------------------------
int32 __fastcall CStreamedScripts::RegisterScript(CStreamedScripts *this, const unsigned __int8 *pName)
{
  UInt16 v3; // r0

  strcpy((char *)this->ScriptStructures[this->NumberOfStreamedScripts].Filename, (const char *)pName);
  v3 = this->NumberOfStreamedScripts + 1;
  this->NumberOfStreamedScripts = v3;
  return v3 - 1;
}

//----- (003352F0) --------------------------------------------------------
int32 __fastcall CStreamedScripts::FindStreamedScriptQuiet(CStreamedScripts *this, const unsigned __int8 *pName)
{
  int32 NumberOfStreamedScripts; // r5
  Char *Filename; // r6
  int32 v5; // r4

  NumberOfStreamedScripts = this->NumberOfStreamedScripts;
  if ( !this->NumberOfStreamedScripts )
    return -1;
  Filename = this->ScriptStructures[0].Filename;
  v5 = 0;
  while ( strcasecmp((const char *)Filename, (const char *)pName) )
  {
    ++v5;
    Filename += 32;
    if ( v5 >= NumberOfStreamedScripts )
      return -1;
  }
  return v5;
}

//----- (00335324) --------------------------------------------------------
int32 __fastcall CStreamedScripts::FindStreamedScript(CStreamedScripts *this, const unsigned __int8 *pName)
{
  int32 NumberOfStreamedScripts; // r5
  Char *Filename; // r6
  int32 v5; // r4

  NumberOfStreamedScripts = this->NumberOfStreamedScripts;
  if ( !this->NumberOfStreamedScripts )
    return -1;
  Filename = this->ScriptStructures[0].Filename;
  v5 = 0;
  while ( strcasecmp((const char *)Filename, (const char *)pName) )
  {
    ++v5;
    Filename += 32;
    if ( v5 >= NumberOfStreamedScripts )
      return -1;
  }
  return v5;
}

//----- (00335358) --------------------------------------------------------
void __fastcall CStreamedScripts::ReadStreamedScriptData(CStreamedScripts *this)
{
  unsigned int NumberOfStreamedScripts; // r4
  UInt8 *v2; // r3
  UInt8 *v3; // r5
  int v4; // r11
  __int64 v5; // d17
  int v6; // r8
  Char *Filename; // r6
  Int32 v8; // r1
  streamed_script_struct *v9; // r0
  __int64 v11[2]; // [sp+4h] [bp-34h] BYREF
  UInt8 v12; // [sp+14h] [bp-24h]
  UInt8 v13; // [sp+15h] [bp-23h]
  UInt8 v14; // [sp+16h] [bp-22h]
  UInt8 v15; // [sp+17h] [bp-21h]

  NumberOfStreamedScripts = this->NumberOfStreamedScripts;
  v2 = &CTheScripts::ScriptSpace[*(_DWORD *)&CTheScripts::ScriptSpace[*(_DWORD *)&CTheScripts::ScriptSpace[*(_DWORD *)&CTheScripts::ScriptSpace[3] + 3]
                                                                    + 3]];
  this->SizeOfLargestStreamedScript = *((_DWORD *)v2 + 2);
  if ( NumberOfStreamedScripts )
  {
    v3 = v2 + 16;
    v4 = 0;
    do
    {
      v5 = *((_QWORD *)v3 + 1);
      v6 = 0;
      Filename = this->ScriptStructures[0].Filename;
      v11[0] = *(_QWORD *)v3;
      v11[1] = v5;
      v12 = v3[16];
      v13 = v3[17];
      v14 = v3[18];
      v15 = v3[19];
      while ( strcasecmp((const char *)Filename, (const char *)v11) )
      {
        ++v6;
        Filename += 32;
        if ( v6 >= (int)NumberOfStreamedScripts )
        {
          v6 = -1;
          break;
        }
      }
      v8 = *((_DWORD *)v3 + 6);
      v3 += 28;
      v9 = &this->ScriptStructures[v6];
      v9->IndexUsedByScriptFile = v4++;
      v9->SizeInBytes = v8;
    }
    while ( (unsigned __int16)v4 < NumberOfStreamedScripts );
  }
}

//----- (0033542C) --------------------------------------------------------
Int16 __fastcall CStreamedScripts::GetProperIndexFromIndexUsedByScript(
        CStreamedScripts *this,
        Int16 IndexFromScriptFile)
{
  int v2; // r2

  LOWORD(v2) = 0;
  while ( this->ScriptStructures[(__int16)v2].IndexUsedByScriptFile != IndexFromScriptFile )
  {
    v2 = (__int16)(v2 + 1);
    if ( v2 >= 82 )
    {
      LOWORD(v2) = -1;
      return v2;
    }
  }
  return v2;
}

//----- (0033544C) --------------------------------------------------------
bool __fastcall CStreamedScripts::LoadStreamedScript(
        CStreamedScripts *this,
        RwStream_0 *pStream,
        int32 StreamedScriptIndex)
{
  unsigned int SizeInBytes; // r8
  UInt8 *v7; // r0

  if ( !CTheScripts::CheckStreamedScriptVersion(pStream, "UnKown") )
    return 0;
  SizeInBytes = this->ScriptStructures[StreamedScriptIndex].SizeInBytes;
  v7 = (UInt8 *)operator new[](SizeInBytes);
  this->ScriptStructures[StreamedScriptIndex].pStreamedScriptMemory = v7;
  RwStreamRead(pStream, v7, SizeInBytes);
  return 1;
}

//----- (0033549C) --------------------------------------------------------
CRunningScript *__fastcall CStreamedScripts::StartNewStreamedScript(CStreamedScripts *this, int32 StreamedScriptIndex)
{
  streamed_script_struct *v3; // r8
  UInt8 *pStreamedScriptMemory; // r5
  CRunningScript *started; // r6

  v3 = &this->ScriptStructures[StreamedScriptIndex];
  pStreamedScriptMemory = v3->pStreamedScriptMemory;
  if ( !v3->pStreamedScriptMemory && IsMissionSave )
  {
    CStreaming::RequestModel(StreamedScriptIndex + 26230, 12);
    CStreaming::LoadAllRequestedModels(0);
    pStreamedScriptMemory = v3->pStreamedScriptMemory;
  }
  if ( !pStreamedScriptMemory )
    return 0;
  started = CTheScripts::StartNewScript(pStreamedScriptMemory);
  started->bIsThisAStreamedScript = 1;
  started->BaseAddressOfThisScript = pStreamedScriptMemory;
  ++v3->NumberOfUsers;
  CStreaming::SetMissionDoesntRequireModel(StreamedScriptIndex + 26230);
  return started;
}

//----- (00335508) --------------------------------------------------------
void __fastcall CStreamedScripts::RemoveStreamedScriptFromMemory(CStreamedScripts *this, int32 StreamedScriptIndex)
{
  UInt8 *pStreamedScriptMemory; // r0
  streamed_script_struct *v4; // r4

  pStreamedScriptMemory = this->ScriptStructures[StreamedScriptIndex].pStreamedScriptMemory;
  v4 = &this->ScriptStructures[StreamedScriptIndex];
  if ( pStreamedScriptMemory )
    operator delete[](pStreamedScriptMemory);
  v4->pStreamedScriptMemory = 0;
}

//----- (00335524) --------------------------------------------------------
const unsigned __int8 *__fastcall CStreamedScripts::GetStreamedScriptFilename(
        CStreamedScripts *this,
        UInt16 StreamedScriptIndex)
{
  return this->ScriptStructures[StreamedScriptIndex].Filename;
}

//----- (0033552C) --------------------------------------------------------
Int32 __fastcall CStreamedScripts::GetStreamedScriptWithThisStartAddress(CStreamedScripts *this, UInt8 *pStartAddress)
{
  int v2; // r12
  unsigned __int16 v3; // r3
  UInt8 *pStreamedScriptMemory; // lr

  v2 = 0;
  v3 = 0;
  do
  {
    pStreamedScriptMemory = this->ScriptStructures[v2].pStreamedScriptMemory;
    v3 += pStreamedScriptMemory != pStartAddress;
    v2 = v3;
  }
  while ( v3 <= 0x51u && pStreamedScriptMemory != pStartAddress );
  return v3;
}

//----- (0033555C) --------------------------------------------------------
void __fastcall CTheScripts::InitialiseConnectLodObjects(UInt16 ArrayIndex)
{
  CTheScripts::ScriptConnectLodsObjects[ArrayIndex].Object1ID = -1;
  CTheScripts::ScriptConnectLodsObjects[ArrayIndex].Object2ID = -1;
}

//----- (00335578) --------------------------------------------------------
void CTheScripts::InitialiseAllConnectLodObjects()
{
  memset(CTheScripts::ScriptConnectLodsObjects, 255, sizeof(CTheScripts::ScriptConnectLodsObjects));
}

//----- (00335590) --------------------------------------------------------
void __fastcall CTheScripts::AddToListOfConnectedLodObjects(CObject *pObject1, CObject *pObject2)
{
  int v2; // r5
  int v3; // r6
  int v4; // r0
  int v5; // r1
  bool v6; // zf
  bool v7; // zf
  bool v8; // zf
  bool v9; // zf
  bool v10; // zf
  bool v11; // zf
  bool v12; // zf
  bool v13; // zf
  bool v14; // zf
  bool v15; // zf
  int v16; // r2

  v2 = -654471207 * (((char *)pObject1 - (char *)CPools::ms_pObjectPool->m_aStorage) >> 2);
  v3 = CPools::ms_pObjectPool->m_aFlags[-654471207
                                      * (((char *)pObject1 - (char *)CPools::ms_pObjectPool->m_aStorage) >> 2)];
  v4 = CPools::ms_pObjectPool->m_aFlags[-654471207
                                      * (((char *)pObject2 - (char *)CPools::ms_pObjectPool->m_aStorage) >> 2)] | (-40904448 * (((char *)pObject2 - (char *)CPools::ms_pObjectPool->m_aStorage) >> 2));
  v5 = v3 | (v2 << 8);
  v6 = CTheScripts::ScriptConnectLodsObjects[0].Object1ID == v5;
  if ( CTheScripts::ScriptConnectLodsObjects[0].Object1ID == v5 )
    v6 = CTheScripts::ScriptConnectLodsObjects[0].Object2ID == v4;
  if ( !v6 )
  {
    v7 = CTheScripts::ScriptConnectLodsObjects[1].Object1ID == v5;
    if ( CTheScripts::ScriptConnectLodsObjects[1].Object1ID == v5 )
      v7 = CTheScripts::ScriptConnectLodsObjects[1].Object2ID == v4;
    if ( !v7 )
    {
      v8 = CTheScripts::ScriptConnectLodsObjects[2].Object1ID == v5;
      if ( CTheScripts::ScriptConnectLodsObjects[2].Object1ID == v5 )
        v8 = CTheScripts::ScriptConnectLodsObjects[2].Object2ID == v4;
      if ( !v8 )
      {
        v9 = CTheScripts::ScriptConnectLodsObjects[3].Object1ID == v5;
        if ( CTheScripts::ScriptConnectLodsObjects[3].Object1ID == v5 )
          v9 = CTheScripts::ScriptConnectLodsObjects[3].Object2ID == v4;
        if ( !v9 )
        {
          v10 = CTheScripts::ScriptConnectLodsObjects[4].Object1ID == v5;
          if ( CTheScripts::ScriptConnectLodsObjects[4].Object1ID == v5 )
            v10 = CTheScripts::ScriptConnectLodsObjects[4].Object2ID == v4;
          if ( !v10 )
          {
            v11 = CTheScripts::ScriptConnectLodsObjects[5].Object1ID == v5;
            if ( CTheScripts::ScriptConnectLodsObjects[5].Object1ID == v5 )
              v11 = CTheScripts::ScriptConnectLodsObjects[5].Object2ID == v4;
            if ( !v11 )
            {
              v12 = CTheScripts::ScriptConnectLodsObjects[6].Object1ID == v5;
              if ( CTheScripts::ScriptConnectLodsObjects[6].Object1ID == v5 )
                v12 = CTheScripts::ScriptConnectLodsObjects[6].Object2ID == v4;
              if ( !v12 )
              {
                v13 = CTheScripts::ScriptConnectLodsObjects[7].Object1ID == v5;
                if ( CTheScripts::ScriptConnectLodsObjects[7].Object1ID == v5 )
                  v13 = CTheScripts::ScriptConnectLodsObjects[7].Object2ID == v4;
                if ( !v13 )
                {
                  v14 = CTheScripts::ScriptConnectLodsObjects[8].Object1ID == v5;
                  if ( CTheScripts::ScriptConnectLodsObjects[8].Object1ID == v5 )
                    v14 = CTheScripts::ScriptConnectLodsObjects[8].Object2ID == v4;
                  if ( !v14 )
                  {
                    v15 = CTheScripts::ScriptConnectLodsObjects[9].Object1ID == v5;
                    if ( CTheScripts::ScriptConnectLodsObjects[9].Object1ID == v5 )
                      v15 = CTheScripts::ScriptConnectLodsObjects[9].Object2ID == v4;
                    if ( !v15 )
                    {
                      v16 = 0;
                      if ( CTheScripts::ScriptConnectLodsObjects[0].Object1ID != -1 )
                        v16 = -1;
                      if ( CTheScripts::ScriptConnectLodsObjects[1].Object1ID == -1 )
                        v16 = 1;
                      if ( CTheScripts::ScriptConnectLodsObjects[2].Object1ID == -1 )
                        v16 = 2;
                      if ( CTheScripts::ScriptConnectLodsObjects[3].Object1ID == -1 )
                        v16 = 3;
                      if ( CTheScripts::ScriptConnectLodsObjects[4].Object1ID == -1 )
                        v16 = 4;
                      if ( CTheScripts::ScriptConnectLodsObjects[5].Object1ID == -1 )
                        v16 = 5;
                      if ( CTheScripts::ScriptConnectLodsObjects[6].Object1ID == -1 )
                        v16 = 6;
                      if ( CTheScripts::ScriptConnectLodsObjects[7].Object1ID == -1 )
                        v16 = 7;
                      if ( CTheScripts::ScriptConnectLodsObjects[8].Object1ID == -1 )
                        v16 = 8;
                      if ( CTheScripts::ScriptConnectLodsObjects[9].Object1ID == -1 )
                        v16 = 9;
                      if ( v16 != -1 )
                      {
                        CTheScripts::ScriptConnectLodsObjects[v16].Object1ID = v5;
                        CTheScripts::ScriptConnectLodsObjects[v16].Object2ID = v4;
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

//----- (00335720) --------------------------------------------------------
bool __fastcall CTheScripts::ScriptConnectLodsFunction(Int32 ObjectId1, Int32 ObjectId2)
{
  CPool<CObject,CCutsceneObject>::StorageType *m_aStorage; // r2
  int v3; // r4
  unsigned int v4; // r0
  uint8 *v5; // r3
  CEntity *v6; // r4
  unsigned int v7; // r1
  bool v8; // zf
  bool result; // r0

  m_aStorage = (CPool<CObject,CCutsceneObject>::StorageType *)CPools::ms_pObjectPool;
  if ( ObjectId1 >= 0
    && (v3 = (unsigned __int8)ObjectId1, v4 = (unsigned int)ObjectId1 >> 8, CPools::ms_pObjectPool->m_aFlags[v4] == v3) )
  {
    v5 = CPools::ms_pObjectPool->m_aStorage[v4];
    if ( ObjectId2 < 0 )
      return 0;
  }
  else
  {
    v5 = 0;
    if ( ObjectId2 < 0 )
      return 0;
  }
  v6 = (CEntity *)(unsigned __int8)ObjectId2;
  v7 = (unsigned int)ObjectId2 >> 8;
  if ( (CEntity *)CPools::ms_pObjectPool->m_aFlags[v7] != v6 )
    return 0;
  v8 = v5 == 0;
  result = 0;
  if ( v5 )
  {
    m_aStorage = CPools::ms_pObjectPool->m_aStorage;
    v6 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[v7];
    v8 = v6 == 0;
  }
  if ( !v8 )
  {
    *((_DWORD *)v5 + 13) = v6;
    ++m_aStorage[v7][56];
    CWorld::Remove(v6);
    CEntity::SetupBigBuilding(v6);
    CWorld::Add(v6);
    return 1;
  }
  return result;
}

//----- (003357A8) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands2000To2099(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  CRunningScript *v6; // r4
  Int8 v7; // r6
  Int32 FOV_low; // r0
  int v9; // r0
  CPhysical *v10; // r4
  Int32 *PointerToScriptVariable; // r5
  bool v12; // r1
  uint8 *v13; // r4
  float v14; // s20
  float v15; // s18
  float v16; // s16
  float v17; // s20
  float v18; // s18
  float v19; // s16
  const CMatrix **v20; // r4
  Int32 Index; // r0
  char IsObjectInCdImage; // r0
  __int64 v23; // kr00_8
  uint8 *v24; // r6
  CTaskSimpleSwim *TaskSwim; // r0
  __int64 v26; // d16
  int32 v27; // r0
  CColModel *m_pColModel; // r2
  Int32 z_low; // r0
  __int64 v30; // d16
  __int64 v31; // d17
  Int32 y_low; // r2
  CRunningScript *v33; // r0
  Int16 v34; // r1
  int32 ActualScriptThingIndex; // r5
  int32 v36; // r5
  __int64 v37; // kr08_8
  CVehicle *v38; // r9
  int32 v39; // r5
  uint32 PedTypeAcquaintances; // r6
  uint32 PedFlag; // r0
  UInt32 nBikeRearWheelCounter; // r1
  CRunningScript *v43; // r0
  uint8 *v44; // r1
  int v45; // r2
  unsigned int v46; // r3
  Int32 LevelFromPosition; // r0
  float GroundZForCoord; // s0
  float v49; // s16
  float v50; // s18
  int32 v51; // r8
  int32 m_nSize; // r3
  int v53; // r2
  int v54; // r3
  int v55; // r2
  uint8 *v56; // r5
  int v57; // r6
  float *v58; // r0
  RwReal v59; // s4
  RwReal v60; // s8
  Int32 v61; // r5
  CPlayerPed *pPed; // r0
  Int32 v63; // r5
  CPlayerPed *v64; // r0
  int32 v65; // r0
  CCheckpoint *pCheckpoint; // r0
  CVehicle *v67; // r4
  unsigned int v68; // r0
  CPedGroupMembership *p_m_membership; // r6
  _BOOL4 v70; // r5
  int v71; // r0
  uint8 *v72; // r0
  CVehicle *v73; // r0
  intro_text_line *v74; // r0
  int v75; // s0
  float v76; // s16
  float v77; // s0
  UInt16 v78; // r0
  intro_text_line *v79; // r1
  unsigned int v80; // r0
  uint8 *v81; // r0
  CVehicle *v82; // r0
  uint8 *v83; // r0
  Int32 v84; // r8
  Int32 v85; // r10
  RwReal v86; // r11
  float v87; // s20
  float v88; // s16
  int32 v89; // r6
  float v90; // s18
  int v91; // r9
  CTaskComplexSequence *v92; // r11
  CTaskComplexGoToPointAndStandStill *v93; // r5
  bool bRunInSequence; // r10
  float v95; // s20
  CTaskSimpleSlideToCoord *v96; // r0
  CTask *v97; // r5
  CEntity *v98; // r1
  float v99; // s8
  float32x2_t v100; // d0
  float v101; // r3
  CBoundBox *p_newPos; // r2
  uint8 *v103; // r5
  CTask *ActiveTaskByType; // r0
  CTask **p_m_pParent; // r0
  uint8 *v106; // r4
  uint8 *v107; // r0
  __int64 v108; // kr18_8
  int v109; // r9
  CTaskComplexFollowPatrolRoute *v110; // r5
  CRunningScript *v111; // r0
  int32 v112; // r1
  CTask *v113; // r2
  int32 v114; // r3
  char v115; // r5
  uint8 *v116; // r2
  int v117; // r3
  bool v118; // zf
  uint8 *v119; // r6
  CTask *SimplestActiveTask; // r0
  uint8 *v121; // r0
  RwUInt8 v122; // r1
  __int16 v123; // r3
  intro_text_line *v124; // r0
  uint8 *v125; // r1
  int v126; // r2
  unsigned int v127; // r0
  UInt32 IsBoatModel; // r0
  CPed *v129; // r8
  uint8 *v130; // r0
  Bool8 v131; // r0
  CPool<CObject,CCutsceneObject>::StorageType *m_aStorage; // r0
  CObject *v133; // r4
  Int32 v134; // r10
  Int32 v135; // r5
  float v136; // s16
  CTaskSimpleDie *v137; // r0
  CTaskSimpleDie *v138; // r6
  int32 v139; // r3
  Bool8 v140; // r4
  uint8 *v141; // r0
  int v142; // r1
  CTaskSimpleSwim *v143; // r6
  float v144; // r6
  float v145; // r9
  float v146; // r10
  float m_fMass; // s16
  float v148; // s0
  float v149; // s4
  float v150; // s2
  int v151; // r6
  int v152; // r10
  float v153; // s16
  int m_nSpecialColModel; // r0
  float v155; // r6
  __int64 v156; // kr30_8
  uint8 v157; // r1
  CVehicle *v158; // r1
  uint8 v159; // r1
  Int32 x_low; // r0
  Int32 v161; // r1
  Int32 v162; // r2
  float v163; // s20
  float v164; // s16
  float v165; // s18
  int v166; // r0
  float v167; // s4
  float *v168; // r1
  float v169; // s8
  float v170; // s0
  float v171; // s4
  int v172; // r6
  unsigned int v173; // r3
  unsigned int v174; // r2
  unsigned int v175; // r1
  unsigned int *v176; // r0
  unsigned int v177; // r6
  int v178; // r1
  float *v179; // r3
  float v180; // s16
  CPed *v181; // r10
  int v182; // r1
  CObject *v183; // r5
  float v184; // s16
  CTaskComplexPartnerGreet *v185; // r11
  CTaskComplexPartnerGreet *v186; // r10
  uint8 *v187; // r1
  unsigned int v188; // r3
  CEntity *v189; // r6
  bool v190; // zf
  CTask *v191; // r0
  int32 ParameterWithoutIncreasingPC; // r0
  CDecisionMakerTypes *v193; // r0
  CDecisionMakerTypes *v194; // r0
  int v195; // r0
  int32 v196; // r0
  CDecisionMakerTypes *v197; // r0
  CDecisionMakerTypes *v198; // r0
  int v199; // r0
  uint8 v200; // r1
  int v201; // r11
  CTaskComplexDrivePointRoute *v202; // r5
  CVector fTargetRadius; // [sp+8h] [bp-E0h] BYREF
  Int32 v205; // [sp+18h] [bp-D0h]
  Int32 v206; // [sp+1Ch] [bp-CCh]
  Int32 v207; // [sp+20h] [bp-C8h]
  Int32 v208; // [sp+24h] [bp-C4h]
  int v209; // [sp+28h] [bp-C0h]
  Int32 v210; // [sp+2Ch] [bp-BCh]
  CVector v; // [sp+30h] [bp-B8h] BYREF
  CVector v212; // [sp+3Ch] [bp-ACh] BYREF
  CVector newPos; // [sp+48h] [bp-A0h] BYREF
  CBoundBox y; // [sp+58h] [bp-90h] BYREF
  CVector width; // [sp+70h] [bp-78h] BYREF
  CBoundBox pPoint; // [sp+80h] [bp-68h] BYREF
  Char pStringToFill[10]; // [sp+98h] [bp-50h] BYREF
  Char p_cName[8]; // [sp+A2h] [bp-46h] BYREF
  CVector v219; // 0:r0.12
  CVector v220; // 0:r1.12

  v6 = this;
  v7 = 0;
  switch ( CurrCommand )
  {
    case 2000:
      FOV_low = CClock::CurrentDay;
      goto LABEL_296;
    case 2001:
    case 2002:
    case 2004:
    case 2012:
    case 2018:
    case 2019:
    case 2025:
    case 2026:
    case 2027:
    case 2028:
    case 2029:
    case 2036:
    case 2053:
    case 2055:
    case 2056:
    case 2057:
    case 2060:
    case 2061:
    case 2063:
    case 2067:
    case 2075:
    case 2081:
    case 2084:
    case 2098:
      return v7;
    case 2003:
      CRunningScript::CollectParameters(this, 1);
      LOWORD(v9) = 0;
      while ( (unsigned __int16)CTheScripts::StreamedScripts.ScriptStructures[(__int16)v9].IndexUsedByScriptFile != LOWORD(ScriptParams[0]) )
      {
        v9 = (__int16)(v9 + 1);
        if ( v9 >= 82 )
        {
          LOWORD(v9) = -1;
          break;
        }
      }
      ScriptParams[0] = (__int16)v9;
      CRunningScript::ReadTextLabelFromScript(v6, pStringToFill, 8u);
      CScriptsForBrains::AddNewStreamedScriptBrainForCodeUse(
        &CTheScripts::ScriptsForBrains,
        ScriptParams[0],
        pStringToFill,
        3);
      return 0;
    case 2005:
      CRunningScript::CollectParameters(this, 7);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v10 = (CPhysical *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v10 = 0;
      }
      v144 = *(float *)&ScriptParams[1];
      v145 = *(float *)&ScriptParams[2];
      v146 = *(float *)&ScriptParams[3];
      newPos = *(CVector *)&ScriptParams[4];
      Multiply3x3(&pPoint.m_vecMin, v10->m_pMat, &v10->m_vecCOM);
      newPos.x = pPoint.m_vecMin.x + newPos.x;
      newPos.y = pPoint.m_vecMin.y + newPos.y;
      newPos.z = pPoint.m_vecMin.z + newPos.z;
      v212.x = v144;
      v212.y = v145;
      v212.z = v146;
      CVector::Normalise(&v212);
      m_fMass = v10->m_fMass;
      Multiply3x3(&width, v10->m_pMat, &v10->m_vecCOM);
      y.m_vecMin.x = newPos.x - width.x;
      y.m_vecMin.y = newPos.y - width.y;
      y.m_vecMin.z = newPos.z - width.z;
      CrossProduct(&pPoint.m_vecMin, &y.m_vecMin, &v212);
      v148 = 1.0
           / (float)((float)(1.0 / m_fMass)
                   + (float)((float)((float)((float)(pPoint.m_vecMin.x * pPoint.m_vecMin.x)
                                           + (float)(pPoint.m_vecMin.y * pPoint.m_vecMin.y))
                                   + (float)(pPoint.m_vecMin.z * pPoint.m_vecMin.z))
                           / v10->m_fTurnMass));
      v220.y = v148 * v145;
      v220.x = v148 * v144;
      v220.z = v148 * v146;
      CPhysical::ApplyForce(v10, v220, newPos, 1);
      return 0;
    case 2006:
    case 2007:
      PointerToScriptVariable = CRunningScript::GetPointerToScriptVariable(this, 1u);
      v7 = 0;
      v12 = *(float *)CRunningScript::GetPointerToScriptVariable(v6, 2u) == *(float *)PointerToScriptVariable;
      goto LABEL_91;
    case 2010:
      CRunningScript::CollectParameters(this, 4);
      v13 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v14 = *((float *)v13 + 21);
      v15 = *((float *)v13 + 22);
      v16 = *((float *)v13 + 23);
      v.x = *(float *)&ScriptParams[1] / 50.0;
      v.y = *(float *)&ScriptParams[2] / 50.0;
      v.z = *(float *)&ScriptParams[3] / 50.0;
      Multiply3x3(&pPoint.m_vecMin, *((const CMatrix **)v13 + 5), &v);
      v = pPoint.m_vecMin;
      v17 = v14 + pPoint.m_vecMin.x;
      v18 = v15 + pPoint.m_vecMin.y;
      v19 = v16 + pPoint.m_vecMin.z;
      if ( (v13[28] & 4) != 0 )
      {
        (*(void (__fastcall **)(uint8 *, _DWORD))(*(_DWORD *)v13 + 20))(v13, 0);
        CPhysical::AddToMovingList((CPhysical *)v13);
      }
      *((float *)v13 + 21) = v17;
      *((float *)v13 + 22) = v18;
      v7 = 0;
      *((float *)v13 + 23) = v19;
      return v7;
    case 2011:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v20 = (const CMatrix **)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v20 = 0;
      }
      v.x = *(float *)&ScriptParams[1] * CTimer::ms_fTimeStep;
      v.y = *(float *)&ScriptParams[2] * CTimer::ms_fTimeStep;
      v.z = *(float *)&ScriptParams[3] * CTimer::ms_fTimeStep;
      Multiply3x3(&pPoint.m_vecMin, v20[5], &v);
      v = pPoint.m_vecMin;
      if ( ((_BYTE)v20[7] & 4) != 0 )
      {
        ((void (__fastcall *)(const CMatrix **, _DWORD))LODWORD((*v20)->yy))(v20, 0);
        CPhysical::AddToMovingList((CPhysical *)v20);
      }
      v7 = 0;
      v149 = v.z / 50.0;
      v150 = v.y / 50.0;
      *((float *)v20 + 21) = v.x / 50.0;
      *((float *)v20 + 22) = v150;
      *((float *)v20 + 23) = v149;
      return v7;
    case 2013:
      CRunningScript::CollectParameters(this, 2);
      v7 = 0;
      CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1821] = ScriptParams[1];
      return v7;
    case 2014:
      CRunningScript::CollectParameters(this, 1);
      Index = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        Index = CTheScripts::UsedObjectArray[-ScriptParams[0]].Index;
      IsObjectInCdImage = CStreaming::IsObjectInCdImage(Index);
      goto LABEL_99;
    case 2015:
      CRunningScript::CollectParameters(this, 4);
      v2.n64_u32[0] = ScriptParams[0];
      v4.n64_u32[0] = ScriptParams[2];
      v3.n64_u32[0] = ScriptParams[1];
      v5.n64_u32[0] = ScriptParams[3];
      CShadows::RemoveOilInArea(
        vmin_f32(v2, v4).n64_f32[0],
        vmax_f32(v2, v4).n64_f32[0],
        vmin_f32(v3, v5).n64_f32[0],
        vmax_f32(v3, v5).n64_f32[0]);
      return 0;
    case 2016:
      CRunningScript::CollectParameters(this, 2);
      CRadar::SetBlipFriendly(ScriptParams[0], ScriptParams[1]);
      return 0;
    case 2017:
      CRunningScript::CollectParameters(this, 4);
      v23 = *(_QWORD *)ScriptParams;
      LODWORD(pPoint.m_vecMin.x) = ScriptParams[1];
      *(_QWORD *)&pPoint.m_vecMin.y = *(_QWORD *)&ScriptParams[2];
      if ( ScriptParams[0] != -1
        && ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0])
        && (v24 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8]) != 0
        && CPedIntelligence::GetTaskSwim(*((const CPedIntelligence **)v24 + 272)) )
      {
        TaskSwim = CPedIntelligence::GetTaskSwim(*((const CPedIntelligence **)v24 + 272));
        v26 = *(_QWORD *)&pPoint.m_vecMin.x;
        v7 = 0;
        TaskSwim->m_vecTargetPos.z = pPoint.m_vecMin.z;
        *(_QWORD *)&TaskSwim->m_vecTargetPos.x = v26;
      }
      else
      {
        v143 = (CTaskSimpleSwim *)CTask::operator new(0x68u);
        CTaskSimpleSwim::CTaskSimpleSwim(v143, &pPoint.m_vecMin, 0);
        v111 = v6;
        v112 = v23;
        v113 = v143;
        v114 = 2017;
LABEL_322:
        CRunningScript::GivePedScriptedTask(v111, v112, v113, v114);
        return 0;
      }
      return v7;
    case 2020:
      CRunningScript::CollectParameters(this, 1);
      v27 = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        v27 = CTheScripts::UsedObjectArray[-ScriptParams[0]].Index;
      m_pColModel = CModelInfo::ms_modelInfoPtrs[v27]->m_pColModel;
      z_low = LODWORD(m_pColModel->m_boxBound.m_vecMax.z);
      v30 = *(_QWORD *)&m_pColModel->m_boxBound.m_vecMin.x;
      v31 = *(_QWORD *)&m_pColModel->m_boxBound.m_vecMin.z;
      y_low = LODWORD(m_pColModel->m_boxBound.m_vecMax.y);
      ScriptParams[5] = z_low;
      v33 = v6;
      *(_QWORD *)ScriptParams = v30;
      *(_QWORD *)&ScriptParams[2] = v31;
      ScriptParams[4] = y_low;
      v34 = 6;
      goto LABEL_298;
    case 2021:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] == -1 )
        ActualScriptThingIndex = -1;
      else
        ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 7u);
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(v6);
      CTheScripts::GetActualScriptThingIndex(ParameterWithoutIncreasingPC, 7u);
      v193 = CDecisionMakerTypes::m_pPedDecisionTypes;
      if ( !CDecisionMakerTypes::m_pPedDecisionTypes )
      {
        v194 = (CDecisionMakerTypes *)operator new(0xF1C0u);
        CDecisionMakerTypes::CDecisionMakerTypes(v194);
        CDecisionMakerTypes::m_pPedDecisionTypes = v193;
      }
      v7 = 0;
      v195 = CDecisionMakerTypes::CopyDecisionMaker(v193, ActualScriptThingIndex, 0, v6->IsThisAMissionScript);
      ScriptParams[0] = CTheScripts::GetNewUniqueScriptThingIndex(v195, 7u);
      CRunningScript::StoreParameters(v6, 1);
      if ( v6->IsThisAMissionScript )
        goto LABEL_308;
      return v7;
    case 2022:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] == -1 )
        v36 = -1;
      else
        v36 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 7u);
      v196 = CRunningScript::CollectNextParameterWithoutIncreasingPC(v6);
      CTheScripts::GetActualScriptThingIndex(v196, 7u);
      v197 = CDecisionMakerTypes::m_pPedDecisionTypes;
      if ( !CDecisionMakerTypes::m_pPedDecisionTypes )
      {
        v198 = (CDecisionMakerTypes *)operator new(0xF1C0u);
        CDecisionMakerTypes::CDecisionMakerTypes(v198);
        CDecisionMakerTypes::m_pPedDecisionTypes = v197;
      }
      v199 = CDecisionMakerTypes::CopyDecisionMaker(v197, v36, 1, v6->IsThisAMissionScript);
      ScriptParams[0] = CTheScripts::GetNewUniqueScriptThingIndex(v199, 7u);
      CRunningScript::StoreParameters(v6, 1);
      if ( !v6->IsThisAMissionScript )
        return 0;
LABEL_308:
      CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, ScriptParams[0], 9u);
      return 0;
    case 2023:
      CRunningScript::CollectParameters(this, 6);
      v37 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v38 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v38 = 0;
      }
      v151 = ScriptParams[4];
      v152 = ScriptParams[3];
      v153 = *(float *)&ScriptParams[2];
      if ( ScriptParams[4] )
      {
        if ( ScriptParams[4] == 1 )
          v151 = 415;
      }
      else
      {
        v151 = -1;
      }
      v201 = ScriptParams[5];
      v202 = (CTaskComplexDrivePointRoute *)CTask::operator new(0x2Cu);
      CTaskComplexDrivePointRoute::CTaskComplexDrivePointRoute(
        v202,
        v38,
        &CTaskComplexFollowPointRoute::ms_pointRoute,
        v153,
        v152,
        v151,
        -1.0,
        v201);
      v111 = v6;
      v112 = v37;
      v113 = v202;
      v114 = 2023;
      goto LABEL_322;
    case 2024:
      CRunningScript::CollectParameters(this, 3);
      v39 = ScriptParams[2];
      PedTypeAcquaintances = CPedType::GetPedTypeAcquaintances(ScriptParams[0], ScriptParams[1]);
      PedFlag = CPedType::GetPedFlag(v39);
      LOBYTE(nBikeRearWheelCounter) = PedFlag & PedTypeAcquaintances;
      v118 = (PedFlag & PedTypeAcquaintances) == 0;
      v43 = v6;
      if ( !v118 )
        LOBYTE(nBikeRearWheelCounter) = 1;
      goto LABEL_231;
    case 2030:
      CRunningScript::CollectParameters(this, 2);
      v7 = 0;
      v44 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v45 = *((_DWORD *)v44 + 268);
      v46 = v45 & 0xFFFFFEFF;
      if ( ScriptParams[1] )
        v46 = v45 | 0x100;
      *((_DWORD *)v44 + 268) = v46;
      return v7;
    case 2031:
      CRunningScript::CollectParameters(this, 3);
      LODWORD(pPoint.m_vecMin.x) = ScriptParams[0];
      LODWORD(pPoint.m_vecMin.y) = ScriptParams[1];
      LODWORD(pPoint.m_vecMin.z) = ScriptParams[2];
      LevelFromPosition = CTheZones::GetLevelFromPosition(&pPoint.m_vecMin);
      goto LABEL_121;
    case 2032:
      CRunningScript::CollectParameters(this, 5);
      GroundZForCoord = *(float *)&ScriptParams[2];
      v49 = *(float *)ScriptParams;
      v50 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      newPos.y = v50;
      newPos.x = v49;
      newPos.z = GroundZForCoord;
      v51 = ScriptParams[4];
      if ( ScriptParams[4] <= -1 )
        v51 = CTheScripts::UsedObjectArray[-ScriptParams[4]].Index;
      m_nSize = CPools::ms_pObjectPool->m_nSize;
      if ( !m_nSize )
        goto LABEL_191;
      v53 = 420 * m_nSize;
      v54 = m_nSize - 1;
      v55 = v53 - 96;
      break;
    case 2033:
      CRunningScript::CollectParameters(this, 1);
      v61 = ScriptParams[0];
      pPed = CWorld::Players[ScriptParams[0]].pPed;
      if ( !(*((unsigned __int8 *)&pPed->m_nPedFlags + 1) << 31)
        || CVehicle::GetVehicleAppearance(pPed->m_pMyVehicle) != APR_BIKE )
      {
        goto LABEL_191;
      }
      nBikeRearWheelCounter = CWorld::Players[v61].nBikeRearWheelCounter;
      goto LABEL_162;
    case 2034:
      CRunningScript::CollectParameters(this, 1);
      v63 = ScriptParams[0];
      v64 = CWorld::Players[ScriptParams[0]].pPed;
      if ( !(*((unsigned __int8 *)&v64->m_nPedFlags + 1) << 31)
        || CVehicle::GetVehicleAppearance(v64->m_pMyVehicle) != APR_BIKE )
      {
        goto LABEL_191;
      }
      nBikeRearWheelCounter = CWorld::Players[v63].nBikeFrontWheelCounter;
      goto LABEL_162;
    case 2035:
      CRunningScript::CollectParameters(this, 4);
      newPos = *(CVector *)&ScriptParams[1];
      v65 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 3u);
      if ( v65 < 0 )
        return 0;
      pCheckpoint = CTheScripts::ScriptCheckpointArray[v65].pCheckpoint;
      if ( !pCheckpoint )
        return 0;
      CCheckpoints::UpdatePos(pCheckpoint->m_nIdentifier, &newPos);
      return 0;
    case 2037:
      CRunningScript::CollectParameters(this, 5);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v67 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v67 = 0;
      }
      m_nSpecialColModel = v67->m_nSpecialColModel;
      if ( m_nSpecialColModel <= -1 )
      {
        CVehicle::GetSpecialColModel(v67);
        m_nSpecialColModel = v67->m_nSpecialColModel;
        if ( m_nSpecialColModel < 0 )
          return 0;
      }
      v155 = *(float *)&ScriptParams[2];
      v156 = *(_QWORD *)&ScriptParams[3];
      LODWORD(CVehicle::m_aSpecialHydraulicData[m_nSpecialColModel].aScriptControl[0]) = ScriptParams[1];
      CVehicle::m_aSpecialHydraulicData[v67->m_nSpecialColModel].aScriptControl[1] = v155;
      v7 = 0;
      *(_QWORD *)&CVehicle::m_aSpecialHydraulicData[v67->m_nSpecialColModel].aScriptControl[2] = v156;
      return v7;
    case 2038:
      CRunningScript::CollectParameters(this, 1);
      v68 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 8u);
      if ( v68 > 7 )
      {
        v70 = 0;
        v71 = 0;
      }
      else
      {
        p_m_membership = &CPedGroups::ms_groups[v68].m_membership;
        v70 = CPedGroupMembership::GetLeader(p_m_membership) != 0;
        v71 = CPedGroupMembership::CountMembersExcludingLeader(p_m_membership);
      }
      ScriptParams[0] = v70;
      ScriptParams[1] = v71;
      v33 = v6;
      v34 = 2;
      goto LABEL_298;
    case 2039:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v72 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v72 = 0;
      }
      if ( ScriptParams[1] )
      {
        v157 = v72[329];
        v7 = 0;
        if ( v157 )
        {
          v72[329] = 0;
          v72[328] = v157;
        }
      }
      else
      {
        v200 = v72[328];
        v7 = 0;
        if ( v200 )
        {
          v72[328] = 0;
          v72[329] = v200;
        }
      }
      return v7;
    case 2040:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v73 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v73 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v158 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v158 = 0;
      }
      CCarAI::TellCarToFollowOtherCar(v73, v158, *(float *)&ScriptParams[2]);
      return 0;
    case 2041:
      v7 = 0;
      CRopes::PlayerControlsCrane = 4;
      return v7;
    case 2042:
      v7 = 0;
      CWaterLevel::m_bWaterFogScript = 0;
      CRopes::PlayerControlsCrane = 3;
      return v7;
    case 2043:
      CRunningScript::ReadTextLabelFromScript(this, p_cName, 8u);
      CRunningScript::CollectParameters(v6, 1);
      if ( ScriptParams[0] )
      {
        CEntryExitManager::SetEnabledByName(p_cName, 1);
        return 0;
      }
      else
      {
        v7 = 0;
        CEntryExitManager::SetEnabledByName(p_cName, 0);
      }
      return v7;
    case 2044:
      if ( CTheScripts::NumberOfIntroTextLinesThisFrame > 0x5Fu )
        return 0;
      CRunningScript::CollectParameters(this, 2);
      CRunningScript::ReadTextLabelFromScript(v6, p_cName, 8u);
      CText::Get(&TheText, p_cName);
      LODWORD(pPoint.m_vecMin.x) = ScriptParams[0];
      LODWORD(y.m_vecMin.x) = ScriptParams[1];
      width.x = 1.0;
      newPos.x = 1.0;
      CorrectAspect(&pPoint.m_vecMin.x, &y.m_vecMin.x, &width.x, &newPos.x);
      v74 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
      v74->ScriptTextAtX = pPoint.m_vecMin.x / (float)((float)RsGlobal.screenWidth / 640.0);
      v74->ScriptTextAtY = y.m_vecMin.x / (float)((float)RsGlobal.screenHeight / 448.0);
      CRunningScript::CollectParameters(v6, 2);
      v75 = ScriptParams[1];
      v76 = *(float *)ScriptParams;
      strncpy(
        (char *)CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextLabel,
        (const char *)p_cName,
        8u);
      v77 = powf(10.0, (float)v75);
      v78 = CTheScripts::NumberOfIntroTextLinesThisFrame + 1;
      v79 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
      v79->NumberToInsert1 = (int)v76;
      CTheScripts::NumberOfIntroTextLinesThisFrame = v78;
      v7 = 0;
      v79->NumberToInsert2 = (int)(float)(v77 * (float)(v76 - (float)(int)v76));
      return v7;
    case 2045:
      CRunningScript::CollectParameters(this, 1);
      v80 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 8u);
      v12 = 0;
      v7 = 0;
      if ( v80 < 8 )
        v12 = 1;
LABEL_91:
      this = v6;
      goto LABEL_186;
    case 2046:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v81 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v81 = 0;
      }
      v159 = ScriptParams[1];
      if ( ScriptParams[1] != v81[1845] )
      {
        v81[1846] = 0;
        v81[1845] = v159;
      }
      switch ( ScriptParams[2] )
      {
        case 1:
          v7 = 0;
          v81[1846] = 0;
          break;
        case 2:
          v7 = 0;
          v81[1846] |= 1u;
          break;
        case 3:
          v7 = 0;
          v81[1846] |= 2u;
          break;
        case 4:
          v7 = 0;
          v81[1846] |= 4u;
          break;
        case 5:
          v7 = 0;
          v81[1846] |= 8u;
          break;
        case 6:
          v7 = 0;
          v81[1846] |= 0xFu;
          break;
        default:
          return 0;
      }
      return v7;
    case 2047:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v82 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v82 = 0;
      }
      if ( ScriptParams[1] )
        CVehicle::AddVehicleUpgrade(v82, MI_HYDRAULICS);
      else
        CVehicle::RemoveVehicleUpgrade(v82, MI_HYDRAULICS);
      return 0;
    case 2048:
      IsObjectInCdImage = CGameLogic::IsCoopGameGoingOn();
LABEL_99:
      LOBYTE(nBikeRearWheelCounter) = IsObjectInCdImage;
      goto LABEL_230;
    case 2049:
      FOV_low = LODWORD(TheCamera.Cams[TheCamera.ActiveCam].FOV);
      goto LABEL_296;
    case 2051:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v83 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v83 = 0;
      }
      if ( *((_DWORD *)v83 + 361) )
        LOBYTE(nBikeRearWheelCounter) = 0;
      else
        nBikeRearWheelCounter = (*((_DWORD *)v83 + 228) >> 17) & 1;
      goto LABEL_230;
    case 2052:
      CRunningScript::CollectParameters(this, 6);
      v210 = ScriptParams[0];
      v84 = ScriptParams[2];
      v85 = ScriptParams[1];
      v86 = *(float *)&ScriptParams[3];
      v87 = *(float *)&ScriptParams[4];
      v88 = *(float *)&ScriptParams[5];
      CRunningScript::ReadTextLabelFromScript(v6, (Char *)&pPoint, 0x18u);
      v89 = 16;
      CRunningScript::ReadTextLabelFromScript(v6, (Char *)&width, 0x10u);
      CRunningScript::CollectParameters(v6, 6);
      v90 = *(float *)ScriptParams;
      v91 = ScriptParams[5];
      v209 = CTaskSequences::ms_iActiveSequence;
      v205 = ScriptParams[1];
      v206 = ScriptParams[2];
      v207 = ScriptParams[3];
      v208 = ScriptParams[4];
      *(_QWORD *)&y.m_vecMin.x = __PAIR64__(v84, v85);
      y.m_vecMin.z = v86;
      v92 = (CTaskComplexSequence *)CTask::operator new(0x40u);
      CTaskComplexSequence::CTaskComplexSequence(v92);
      v93 = (CTaskComplexGoToPointAndStandStill *)CTask::operator new(0x28u);
      bRunInSequence = 0;
      CTaskComplexGoToPointAndStandStill::CTaskComplexGoToPointAndStandStill(v93, 4, &y.m_vecMin, 0.5, 2.0, 0, 0);
      CTaskComplexSequence::AddTask(v92, v93);
      if ( v205 )
        v89 = 18;
      if ( v91 > 0 )
        v89 = 18;
      v95 = (float)(v87 * 3.1416) / 180.0;
      if ( v88 < 0.0 )
        v88 = 0.1;
      if ( v206 )
        v89 |= 0x40u;
      if ( v207 )
        v89 |= 0x80u;
      if ( !v208 )
        v89 |= 8u;
      v96 = (CTaskSimpleSlideToCoord *)CTask::operator new(0x80u);
      v97 = v96;
      if ( v91 < 1 )
      {
        if ( v209 > -1 )
          bRunInSequence = 1;
        CTaskSimpleSlideToCoord::CTaskSimpleSlideToCoord(
          v96,
          &y.m_vecMin,
          v95,
          v88,
          (const unsigned __int8 *)&pPoint,
          (const unsigned __int8 *)&width,
          v89,
          v90,
          bRunInSequence,
          -1);
      }
      else
      {
        if ( v209 > -1 )
          bRunInSequence = 1;
        CTaskSimpleSlideToCoord::CTaskSimpleSlideToCoord(
          v96,
          &y.m_vecMin,
          v95,
          v88,
          (const unsigned __int8 *)&pPoint,
          (const unsigned __int8 *)&width,
          v89,
          v90,
          bRunInSequence,
          v91);
      }
      CTaskComplexSequence::AddTask(v92, v97);
      v112 = v210;
      v111 = v6;
      v113 = v92;
      v114 = 2052;
      goto LABEL_322;
    case 2054:
      CRunningScript::CollectParameters(this, 1);
      LevelFromPosition = CDarkel::FindTotalPedsKilledByPlayer(ScriptParams[0]);
LABEL_121:
      ScriptParams[0] = LevelFromPosition;
      goto LABEL_297;
    case 2058:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v98 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v98 = 0;
      }
      CEntity::FindTriggerPointCoors(&pPoint.m_vecMin, v98, ScriptParams[1]);
      p_newPos = (CBoundBox *)&newPos;
      newPos = pPoint.m_vecMin;
      goto LABEL_234;
    case 2059:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&y, 0x10u);
      return 0;
    case 2062:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = *(unsigned __int8 *)(*(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1088]
                                           + 209);
      goto LABEL_297;
    case 2064:
      CRunningScript::CollectParameters(this, 6);
      v2.n64_u32[0] = ScriptParams[0];
      v5.n64_u32[0] = ScriptParams[3];
      v3.n64_u32[0] = ScriptParams[1];
      LODWORD(v99) = vmin_f32(v2, v5).n64_u32[0];
      v4.n64_u32[0] = ScriptParams[2];
      v100.n64_u64[0] = vmax_f32(v2, v5).n64_u64[0];
      v5.n64_u32[0] = ScriptParams[4];
      v101 = v100.n64_f32[0];
      v100.n64_u32[0] = ScriptParams[5];
      CPathFind::FindParkingNodeInArea(
        &pPoint.m_vecMin,
        &ThePaths,
        v99,
        v101,
        vmin_f32(v3, v5).n64_f32[0],
        vmax_f32(v3, v5).n64_f32[0],
        vmin_f32(v4, v100).n64_f32[0],
        vmax_f32(v4, v100).n64_f32[0]);
      p_newPos = &pPoint;
LABEL_234:
      x_low = LODWORD(p_newPos->m_vecMin.x);
      v161 = LODWORD(p_newPos->m_vecMin.y);
      v162 = LODWORD(p_newPos->m_vecMin.z);
      ScriptParams[0] = x_low;
      ScriptParams[1] = v161;
      ScriptParams[2] = v162;
      v33 = v6;
      v34 = 3;
      goto LABEL_298;
    case 2065:
      CRunningScript::CollectParameters(this, 1);
      v103 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( v103[1157] << 31 )
      {
        p_m_pParent = (CTask **)(v103 + 1424);
      }
      else
      {
        ActiveTaskByType = CTaskManager::FindActiveTaskByType((const CTaskManager *)(*((_DWORD *)v103 + 272) + 4), 701);
        if ( !ActiveTaskByType )
        {
          ActiveTaskByType = CTaskManager::FindActiveTaskByType(
                               (const CTaskManager *)(*((_DWORD *)v103 + 272) + 4),
                               700);
          if ( !ActiveTaskByType )
            goto LABEL_295;
        }
        p_m_pParent = &ActiveTaskByType[1].m_pParent;
      }
      v191 = *p_m_pParent;
      if ( v191 )
      {
        FOV_low = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                                  * (((char *)v191 - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2)] | (-422239488 * (((char *)v191 - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2));
        goto LABEL_296;
      }
LABEL_295:
      FOV_low = -1;
LABEL_296:
      ScriptParams[0] = FOV_low;
LABEL_297:
      v33 = v6;
      v34 = 1;
LABEL_298:
      CRunningScript::StoreParameters(v33, v34);
      return 0;
    case 2066:
      CRunningScript::PlayAnimScriptCommand(this, 2066);
      return 0;
    case 2068:
      CRunningScript::CollectParameters(this, 16);
      pPoint.m_vecMax.z = *(float *)&ScriptParams[2] + *(float *)&ScriptParams[5];
      pPoint.m_vecMax.y = *(float *)&ScriptParams[1] + *(float *)&ScriptParams[4];
      pPoint.m_vecMin.y = *(float *)&ScriptParams[1] - *(float *)&ScriptParams[4];
      pPoint.m_vecMin.x = *(float *)ScriptParams - *(float *)&ScriptParams[3];
      pPoint.m_vecMin.z = *(float *)&ScriptParams[2] - *(float *)&ScriptParams[5];
      pPoint.m_vecMax.x = *(float *)ScriptParams + *(float *)&ScriptParams[3];
      y.m_vecMax.z = *(float *)&ScriptParams[8] + *(float *)&ScriptParams[11];
      y.m_vecMax.y = *(float *)&ScriptParams[7] + *(float *)&ScriptParams[10];
      y.m_vecMin.y = *(float *)&ScriptParams[7] - *(float *)&ScriptParams[10];
      y.m_vecMin.x = *(float *)&ScriptParams[6] - *(float *)&ScriptParams[9];
      y.m_vecMin.z = *(float *)&ScriptParams[8] - *(float *)&ScriptParams[11];
      y.m_vecMax.x = *(float *)&ScriptParams[6] + *(float *)&ScriptParams[9];
      width = *(CVector *)&ScriptParams[12];
      CStuntJumpManager::AddOne(&pPoint, &y, &width, ScriptParams[15]);
      return 0;
    case 2069:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v106 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v106 = 0;
      }
      v163 = *(float *)&ScriptParams[3];
      v164 = *(float *)&ScriptParams[1];
      v165 = *(float *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        v163 = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      v166 = *((_DWORD *)v106 + 5);
      v167 = 1.0 / CTimer::ms_fTimeStep;
      v168 = (float *)(v166 + 48);
      if ( !v166 )
        v168 = (float *)(v106 + 4);
      v169 = (float)(v164 - *v168) * v167;
      v170 = (float)(v163 - v168[2]) * v167;
      v171 = (float)(v165 - v168[1]) * v167;
      *((float *)v106 + 18) = v169;
      *((float *)v106 + 19) = v171;
      *((float *)v106 + 20) = v170;
      if ( v169 >= -1.0 )
      {
        if ( v169 > 1.0 )
          *((float *)v106 + 18) = 1.0;
      }
      else
      {
        *((float *)v106 + 18) = -1.0;
      }
      if ( v171 >= -1.0 )
      {
        if ( v171 > 1.0 )
          *((float *)v106 + 19) = 1.0;
      }
      else
      {
        *((float *)v106 + 19) = -1.0;
      }
      if ( v170 >= -1.0 )
      {
        if ( v170 > 1.0 )
          *((float *)v106 + 20) = 1.0;
      }
      else
      {
        *((float *)v106 + 20) = -1.0;
      }
      v7 = 0;
      *(_QWORD *)&v219.x = __PAIR64__(LODWORD(v165), LODWORD(v164));
      v219.z = v163;
      MarkSurroundingEntitiesForCollisionWithTrain(v219, 25.0, (CEntity *)v106, 0);
      (*(void (__fastcall **)(uint8 *, float, float, float, _DWORD))(*(_DWORD *)v106 + 60))(
        v106,
        COERCE_FLOAT(LODWORD(v164)),
        COERCE_FLOAT(LODWORD(v165)),
        COERCE_FLOAT(LODWORD(v163)),
        0);
      pPoint.m_vecMin.y = v165;
      pPoint.m_vecMin.x = v164;
      pPoint.m_vecMin.z = v163;
      CTheScripts::ClearSpaceForMissionEntity(&pPoint.m_vecMin, (CEntity *)v106);
      return v7;
    case 2070:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v107 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v107 = 0;
      }
      v172 = *((_DWORD *)v107 + 289);
      v173 = *((_DWORD *)v107 + 290);
      v174 = *((_DWORD *)v107 + 291);
      v175 = *((_DWORD *)v107 + 292);
      v176 = (unsigned int *)(v107 + 1156);
      if ( ScriptParams[1] )
        v177 = v172 | 0x400000;
      else
        v177 = v172 & 0xFFBFFFFF;
      *v176 = v177;
      v7 = 0;
      v176[1] = v173;
      v176[2] = v174;
      v176[3] = v175;
      return v7;
    case 2071:
      CRunningScript::CollectParameters(this, 3);
      v108 = *(_QWORD *)ScriptParams;
      v109 = ScriptParams[2];
      v110 = (CTaskComplexFollowPatrolRoute *)CTask::operator new(0x30u);
      CTaskComplexFollowPatrolRoute::CTaskComplexFollowPatrolRoute(
        v110,
        SHIDWORD(v108),
        &CTaskComplexFollowPatrolRoute::ms_patrolRoute,
        v109,
        0.5,
        5.0);
      v111 = v6;
      v112 = v108;
      v113 = v110;
      v114 = 2071;
      goto LABEL_322;
    case 2072:
      v115 = 1;
      CRunningScript::CollectParameters(this, 1);
      v116 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v117 = *((_DWORD *)v116 + 289);
      v118 = (v117 & 0x200) == 0;
      if ( (v117 & 0x200) == 0 )
      {
        v115 = 0;
        v118 = (v117 & 1) == 0;
      }
      if ( v118 && (*((_DWORD *)v116 + 290) & 0x80000010) != 0 )
      {
        v119 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        v115 = 0;
        if ( CTaskManager::GetSimplestActiveTask((const CTaskManager *)(*((_DWORD *)v119 + 272) + 4)) )
        {
          SimplestActiveTask = CTaskManager::GetSimplestActiveTask((const CTaskManager *)(*((_DWORD *)v119 + 272) + 4));
          if ( (*((int (__fastcall **)(CTask *))SimplestActiveTask->_vptr$CTask + 5))(SimplestActiveTask) == 207 )
            v115 = 1;
        }
      }
      v43 = v6;
      LOBYTE(nBikeRearWheelCounter) = v115;
      goto LABEL_231;
    case 2073:
      CRunningScript::CollectParameters(this, 1);
      v7 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v121 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v121 = 0;
      }
      v178 = *((_DWORD *)v121 + 5);
      v179 = (float *)(v178 + 48);
      if ( !v178 )
        v179 = (float *)(v121 + 4);
      v180 = v179[2];
      *(float *)ScriptParams = v180 - CWorld::FindGroundZFor3DCoord(*v179, v179[1], v180, 0, 0);
      CRunningScript::StoreParameters(v6, 1);
      return v7;
    case 2074:
      CRunningScript::CollectParameters(this, 2);
      v7 = 0;
      CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1844] = ScriptParams[1];
      return v7;
    case 2076:
      CRunningScript::CollectParameters(this, 5);
      CRGBA::CRGBA((CRGBA *)&pPoint, ScriptParams[1], ScriptParams[2], ScriptParams[3], ScriptParams[4]);
      v122 = LOBYTE(pPoint.m_vecMin.x);
      v123 = *(_WORD *)((char *)&pPoint.m_vecMin.x + 1);
      v124 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
      v7 = 0;
      v124->ScriptTextDropShadowColour._anon_0._anon_0.alpha = HIBYTE(pPoint.m_vecMin.x);
      *(_WORD *)&v124->ScriptTextDropShadowColour._anon_0._anon_0.green = v123;
      v124->ScriptTextDropShadowColour._anon_0._anon_0.red = v122;
      v124->ScriptTextEdge = ScriptParams[0];
      return v7;
    case 2077:
      CRunningScript::CollectParameters(this, 2);
      v7 = 0;
      v125 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v126 = *((_DWORD *)v125 + 267);
      v127 = *((_DWORD *)v125 + 268) & 0xFFFFFDFF;
      if ( ScriptParams[1] )
      {
        v126 &= ~0x10u;
        v127 |= 0x200u;
      }
      *((_DWORD *)v125 + 267) = v126;
      *((_DWORD *)v125 + 268) = v127;
      return v7;
    case 2078:
      CRunningScript::CollectParameters(this, 1);
      IsBoatModel = CModelInfo::IsBoatModel(ScriptParams[0]);
      goto LABEL_161;
    case 2079:
      CRunningScript::CollectParameters(this, 1);
      IsBoatModel = CModelInfo::IsPlaneModel(ScriptParams[0]);
      goto LABEL_161;
    case 2080:
      CRunningScript::CollectParameters(this, 1);
      IsBoatModel = CModelInfo::IsHeliModel(ScriptParams[0]);
LABEL_161:
      nBikeRearWheelCounter = IsBoatModel;
LABEL_162:
      LOBYTE(nBikeRearWheelCounter) = nBikeRearWheelCounter != 0;
      goto LABEL_230;
    case 2082:
      CRunningScript::CollectParameters(this, 1);
      v7 = 0;
      if ( ScriptParams[0] )
      {
        TheCamera.m_bDisableFirstPersonInCar = 0;
      }
      else
      {
        TheCamera.m_nCarZoom = 2;
        TheCamera.m_bDisableFirstPersonInCar = 1;
      }
      return v7;
    case 2083:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v129 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v129 = 0;
      }
      v7 = 0;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v181 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v181 = 0;
      }
      v184 = *(float *)&ScriptParams[2];
      v185 = (CTaskComplexPartnerGreet *)CTask::operator new(0x78u);
      memset(&fTargetRadius, 0, sizeof(fTargetRadius));
      CTaskComplexPartnerGreet::CTaskComplexPartnerGreet(
        v185,
        "COMMAND_TASK_GREET_PARTNER",
        v181,
        1u,
        v184,
        ScriptParams[3],
        fTargetRadius);
      CRunningScript::GivePedScriptedTask(v6, ScriptParams[0], v185, 2083);
      v186 = (CTaskComplexPartnerGreet *)CTask::operator new(0x78u);
      memset(&fTargetRadius, 0, sizeof(fTargetRadius));
      CTaskComplexPartnerGreet::CTaskComplexPartnerGreet(
        v186,
        "COMMAND_TASK_GREET_PARTNER",
        v129,
        0,
        v184,
        ScriptParams[3],
        fTargetRadius);
      CRunningScript::GivePedScriptedTask(v6, ScriptParams[1], v186, 2083);
      return v7;
    case 2085:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v130 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v130 = 0;
      }
      v182 = *((_DWORD *)v130 + 361);
      if ( v182 == 4 )
      {
        v7 = 0;
        *((_DWORD *)v130 + 630) = 1043878380;
      }
      else
      {
        if ( v182 != 3 )
          return 0;
        v7 = 0;
        *((_DWORD *)v130 + 536) = 1046562734;
      }
      return v7;
    case 2086:
      CRunningScript::CollectParameters(this, 1);
      v7 = 0;
      v131 = ScriptParams[0];
      if ( ScriptParams[0] )
        v131 = 1;
      CTheScripts::bDisplayHud = v131;
      return v7;
    case 2087:
      CRunningScript::CollectParameters(this, 2);
      m_aStorage = (CPool<CObject,CCutsceneObject>::StorageType *)CPools::ms_pObjectPool;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v133 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v133 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v183 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( ScriptParams[0] < 0 )
          goto LABEL_272;
      }
      else
      {
        v183 = 0;
        if ( ScriptParams[0] < 0 )
          goto LABEL_272;
      }
      if ( CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v187 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        if ( ScriptParams[1] < 0 )
          goto LABEL_278;
        goto LABEL_273;
      }
LABEL_272:
      v187 = 0;
      if ( ScriptParams[1] < 0 )
        goto LABEL_278;
LABEL_273:
      v188 = (unsigned int)ScriptParams[1] >> 8;
      v189 = (CEntity *)CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8];
      if ( v189 == (CEntity *)LOBYTE(ScriptParams[1]) )
      {
        v190 = v187 == 0;
        if ( v187 )
        {
          m_aStorage = CPools::ms_pObjectPool->m_aStorage;
          v189 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[v188];
          v190 = v189 == 0;
        }
        if ( !v190 )
        {
          *((_DWORD *)v187 + 13) = v189;
          ++m_aStorage[v188][56];
          CWorld::Remove(v189);
          CEntity::SetupBigBuilding(v189);
          CWorld::Add(v189);
        }
      }
LABEL_278:
      CTheScripts::AddToListOfConnectedLodObjects(v133, v183);
      return 0;
    case 2088:
      CRunningScript::CollectParameters(this, 1);
      v7 = 0;
      gFireManager.m_nMaxGenerationsAllowed = ScriptParams[0];
      return v7;
    case 2089:
      CRunningScript::CollectParameters(this, 1);
      v134 = ScriptParams[0];
      CRunningScript::ReadTextLabelFromScript(v6, (Char *)&pPoint, 0x18u);
      CRunningScript::ReadTextLabelFromScript(v6, (Char *)&width, 0x10u);
      CRunningScript::CollectParameters(v6, 2);
      v135 = ScriptParams[1];
      v136 = *(float *)ScriptParams;
      v137 = (CTaskSimpleDie *)CTask::operator new(0x28u);
      v138 = v137;
      v139 = 208;
      if ( !v135 )
        v139 = 16;
      CTaskSimpleDie::CTaskSimpleDie(
        v137,
        (const unsigned __int8 *)&pPoint,
        (const unsigned __int8 *)&width,
        v139,
        v136,
        1.0);
      v111 = v6;
      v112 = v134;
      v113 = v138;
      v114 = 2089;
      goto LABEL_322;
    case 2090:
      CRunningScript::CollectParameters(this, 2);
      v140 = 0;
      v7 = 0;
      if ( !ScriptParams[1] )
        v140 = 1;
      CPad::GetPad(ScriptParams[0])->bDisablePlayerDuck = v140;
      return v7;
    case 2096:
      CRunningScript::CollectParameters(this, 6);
      CWorld::SnookerTableMax = *(CVector *)&ScriptParams[3];
      CWorld::SnookerTableMin = *(CVector *)ScriptParams;
      return 0;
    case 2097:
      v12 = 0;
      v7 = 0;
LABEL_186:
      CRunningScript::UpdateCompareFlag(this, v12);
      return v7;
    case 2099:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0 )
        goto LABEL_191;
      if ( CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        goto LABEL_191;
      v141 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !v141 )
        goto LABEL_191;
      v142 = *((_DWORD *)v141 + 81);
      if ( (v142 & 0x1000) == 0 )
        goto LABEL_191;
      *((_DWORD *)v141 + 81) = v142 & 0xFFFFEFFF;
      goto LABEL_331;
    default:
      return -1;
  }
  while ( 1 )
  {
    if ( (CPools::ms_pObjectPool->m_aFlags[v54] & 0x80u) == 0 )
    {
      v56 = &(*CPools::ms_pObjectPool->m_aStorage)[v55];
      if ( v56 != (uint8 *)&elf_hash_bucket[18] && (v56[1] & 4) != 0 && v51 == *((__int16 *)v56 - 143) )
      {
        v57 = *((_DWORD *)v56 - 76);
        v58 = (float *)(v57 + 48);
        if ( !v57 )
          v58 = (float *)(v56 - 320);
        v59 = v49 - *v58;
        v60 = GroundZForCoord - v58[2];
        v212.y = v50 - v58[1];
        v212.x = v59;
        v212.z = v60;
        if ( sqrtf((float)((float)(v59 * v59) + (float)(v212.y * v212.y)) + (float)(v60 * v60)) <= *(float *)&ScriptParams[3] )
          break;
      }
    }
    --v54;
    v55 -= 420;
    if ( v54 == -1 )
    {
LABEL_191:
      LOBYTE(nBikeRearWheelCounter) = 0;
      goto LABEL_230;
    }
  }
LABEL_331:
  LOBYTE(nBikeRearWheelCounter) = 1;
LABEL_230:
  v43 = v6;
LABEL_231:
  CRunningScript::UpdateCompareFlag(v43, nBikeRearWheelCounter);
  return 0;
}
// 335B2E: variable 'v2' is possibly undefined
// 335B2E: variable 'v4' is possibly undefined
// 335B36: variable 'v3' is possibly undefined
// 335B36: variable 'v5' is possibly undefined
// 337454: variable 'v193' is possibly undefined
// 3374BA: variable 'v197' is possibly undefined
// FC: using guessed type int elf_hash_bucket[16411];
// 676438: using guessed type CFireManager *gFireManager_ptr;
// 6767A0: using guessed type __int16 *MI_HYDRAULICS_ptr[3];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 67874C: using guessed type script_checkpoint_struct (*CTheScripts::ScriptCheckpointArray)[20];

//----- (003377A4) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands2100To2199(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  unsigned __int8 v5; // r0
  Int8 v6; // r6
  CRunningScript *v7; // r0
  UInt8 v8; // r1
  bool v9; // zf
  __int64 v10; // r0
  CRunningScript *v11; // r0
  Int16 v12; // r1
  uint8 *v13; // r6
  uint8 *v14; // r5
  uint8 *v15; // r6
  uint8 *v16; // r6
  float *v17; // r0
  float *v18; // r1
  CEntity *v19; // r4
  int v20; // r0
  CZone *SmallestZoneForPosition; // r5
  char *PointerToScriptVariable; // r0
  uint8 *v23; // r1
  int v24; // r2
  unsigned int v25; // r3
  CPed *v26; // r5
  uint8 *v27; // r5
  uint8 *v28; // r1
  uint8 v29; // r2
  uint8 v30; // r3
  CEntity *v31; // r5
  uint8 *v32; // r1
  int v33; // r2
  unsigned int v34; // r3
  CPed *v35; // r5
  Bool8 OneEmergencyServicesCar; // r1
  CPed *v37; // r4
  CVehicle *v38; // r0
  const CPed *v39; // r0
  int32 NearestEntryExit; // r0
  uint8 *v41; // r0
  float v42; // s22
  float v43; // s18
  float v44; // s16
  float v45; // s20
  float v46; // s0
  int v47; // r0
  unsigned int v48; // r2
  int v49; // r3
  int v50; // r6
  float *v51; // r4
  float v52; // s2
  CAnimBlendAssociation *IsGroupActive; // r0
  Bool8 v54; // r3
  unsigned int v55; // r9
  unsigned int v56; // lr
  unsigned int v57; // r3
  int v58; // r2
  unsigned int v59; // r12
  Int32 *v60; // r0
  jump_table_entry *v61; // r4
  unsigned int v62; // r1
  int ZoneByLabelAndReturnIndex; // r0
  CZoneInfo *v64; // r0
  uint8 *v65; // r1
  int v66; // r2
  unsigned int v67; // r3
  Int32 v68; // r6
  uint32 UppercaseKey; // r0
  unsigned int ActualScriptThingIndex; // r4
  int v71; // r0
  uint8 *v72; // r1
  int v73; // r2
  unsigned int v74; // r3
  int v75; // r2
  Bool8 v76; // r4
  CEntity *v77; // r4
  int v78; // r0
  uint8 *v79; // r1
  float v80; // s0
  int32 ParameterWithoutIncreasingPC; // r0
  unsigned int v82; // r5
  uint8 *v83; // r0
  bool v84; // zf
  int v85; // r1
  int v86; // r3
  float v87; // s2
  CVehicle *v88; // r0
  float GroundZForCoord; // s20
  float v90; // s16
  float v91; // s18
  float v92; // s22
  int32 Index; // r0
  int v94; // r3
  unsigned __int16 v95; // r2
  int v96; // r0
  int v97; // r3
  int v98; // r6
  float *v99; // r5
  bool v100; // nf
  __int64 v101; // r2
  int v102; // r6
  UInt32 IndexOfGlobalVariable; // r5
  uint8 *v104; // r1
  uint8 *v105; // r0
  CPhysical *v106; // r0
  int v107; // r2
  unsigned int v108; // r3
  unsigned int v109; // r12
  Int32 *v110; // r4
  jump_table_entry *v111; // r0
  unsigned int v112; // r4
  unsigned int v113; // r3
  Int32 v114; // r6
  int v115; // r6
  CEventGlobalGroup *EventGlobalGroup; // r0
  jump_table_entry *v117; // r0
  CAnimBlendAssociation *Association; // r5
  RpClump_0 *v119; // r0
  CAnimBlendAssociation *v120; // r0
  CAnimBlendAssociation *v121; // r5
  float v122; // s6
  float v123; // s4
  CMatrix *m_pMat; // r0
  float tx; // s16
  float ty; // s18
  float tz; // s20
  float *p_xx; // r0
  float v129; // s2
  float v130; // s4
  CTaskComplexFollowPedFootsteps *v131; // r6
  CTask *v132; // r2
  int32 v133; // r3
  float v134; // s2
  float v135; // s0
  float v136; // s4
  float v137; // s6
  float v138; // s2
  CTaskComplexWalkAlongsidePed *v139; // r6
  int32 v140; // r0
  FxSystem_c *pFXSystem; // r0
  bool v142; // zf
  CEntity *v143; // r1
  jump_table_entry *v144; // r1
  Int32 *p_Address; // r1
  Int32 Value; // t1
  char v147; // r1
  CTaskSimpleSetKindaStayInSamePlace *v148; // r0
  CTaskSimpleSetKindaStayInSamePlace *v149; // r0
  CTask *v150; // r4
  char v151; // r1
  __int16 v152; // r1
  int v153; // r0
  __int16 v154; // r1
  int v155; // r0
  int v156; // r2
  __int64 v157; // d16
  float v159; // s0
  CTaskComplexDie *v160; // r4
  Int32 v161; // r1
  RwV3d_0 posn; // [sp+20h] [bp-C8h] BYREF
  CVector pPoint; // [sp+2Ch] [bp-BCh] BYREF
  CEventScriptCommand pos[2]; // [sp+38h] [bp-B0h] BYREF
  Int16 pNum[8]; // [sp+78h] [bp-70h] BYREF
  CVector Coors; // [sp+88h] [bp-60h] BYREF
  Char v167[10]; // [sp+98h] [bp-50h] BYREF
  Char pStringToFill[8]; // [sp+A2h] [bp-46h] BYREF
  CVector v169; // 0:r0.12
  CVector v170; // 0:r3.4,4:^0.8

  v5 = 18;
  v6 = 0;
  switch ( CurrCommand )
  {
    case 2100:
      CRunningScript::CollectParameters(this, 2);
      CCam::DoCamBump(&TheCamera.Cams[TheCamera.ActiveCam], *(float *)ScriptParams, *(float *)&ScriptParams[1]);
      return 0;
    case 2101:
      HIDWORD(v10) = CClock::ms_nGameClockMonths;
      LODWORD(v10) = CClock::ms_nGameClockDays;
      *(_QWORD *)ScriptParams = v10;
      v11 = this;
      v12 = 2;
      goto LABEL_266;
    case 2102:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v13 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v13 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pos, 0x18u);
      Association = RpAnimBlendClumpGetAssociation(*((RpClump_0 **)v13 + 6), (const unsigned __int8 *)pos);
      CRunningScript::CollectParameters(this, 1);
      if ( !Association )
        return 0;
      v6 = 0;
      LODWORD(Association->m_fSpeed) = ScriptParams[0];
      return v6;
    case 2103:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v14 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v14 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pos, 0x18u);
      v119 = (RpClump_0 *)*((_DWORD *)v14 + 6);
      if ( !v119 || v119->object.type != 2 || !RpAnimBlendClumpIsInitialized(v119) )
        goto LABEL_237;
      IsGroupActive = RpAnimBlendClumpGetAssociation(*((RpClump_0 **)v14 + 6), (const unsigned __int8 *)pos);
      goto LABEL_87;
    case 2104:
    case 2107:
    case 2120:
    case 2121:
    case 2122:
    case 2123:
    case 2124:
    case 2127:
    case 2135:
    case 2140:
    case 2141:
    case 2143:
    case 2146:
    case 2147:
    case 2154:
    case 2157:
    case 2158:
    case 2159:
    case 2160:
    case 2167:
    case 2176:
    case 2178:
    case 2181:
    case 2182:
    case 2191:
    case 2193:
    case 2194:
    case 2196:
    case 2197:
    case 2198:
      return v6;
    case 2105:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v15 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v15 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pos, 0x18u);
      v120 = RpAnimBlendClumpGetAssociation(*((RpClump_0 **)v15 + 6), (const unsigned __int8 *)pos);
      if ( v120 )
        *(float *)&v20 = v120->m_fCurrentTime / v120->m_pAnimBlendHierarchy->m_fTotalTime;
      else
        *(float *)&v20 = 0.0;
      goto LABEL_264;
    case 2106:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v16 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v16 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pos, 0x18u);
      v121 = RpAnimBlendClumpGetAssociation(*((RpClump_0 **)v16 + 6), (const unsigned __int8 *)pos);
      CRunningScript::CollectParameters(this, 1);
      if ( v121 )
        CAnimBlendAssociation::SetCurrentTime(v121, *(float *)ScriptParams * v121->m_pAnimBlendHierarchy->m_fTotalTime);
      return 0;
    case 2108:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v17 = (float *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v17 = 0;
      }
      v6 = 0;
      v122 = *(float *)&ScriptParams[3] / 50.0;
      v123 = *(float *)&ScriptParams[2] / 50.0;
      v17[18] = *(float *)&ScriptParams[1] / 50.0;
      v17[19] = v123;
      v17[20] = v122;
      return v6;
    case 2109:
      CRunningScript::CollectParameters(this, 1);
      v18 = (float *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      *(float *)ScriptParams = v18[18] * 50.0;
      *(float *)&ScriptParams[1] = v18[19] * 50.0;
      *(float *)&ScriptParams[2] = v18[20] * 50.0;
      goto LABEL_262;
    case 2110:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v19 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v19 = 0;
      }
      CWorld::Remove(v19);
      m_pMat = v19->m_pMat;
      if ( m_pMat )
      {
        tx = m_pMat->tx;
        ty = m_pMat->ty;
        tz = m_pMat->tz;
        CMatrix::SetRotate(
          m_pMat,
          (float)(*(float *)&ScriptParams[1] * 3.1416) / 180.0,
          (float)(*(float *)&ScriptParams[2] * 3.1416) / 180.0,
          (float)(*(float *)&ScriptParams[3] * 3.1416) / 180.0);
        p_xx = &v19->m_pMat->xx;
        v129 = ty + p_xx[13];
        v130 = tz + p_xx[14];
        p_xx[12] = tx + p_xx[12];
        p_xx[13] = v129;
        p_xx[14] = v130;
      }
      else
      {
        v19->m_transform.m_heading = (float)(*(float *)&ScriptParams[3] * 3.1416) / 180.0;
      }
      CWorld::Add(v19);
      return 0;
    case 2111:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = *(_DWORD *)(*(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][20]
                                  + 40);
      goto LABEL_265;
    case 2112:
      CRunningScript::CollectParameters(this, 2);
      v6 = 0;
      CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][51] = ScriptParams[1];
      return v6;
    case 2113:
      CRunningScript::CollectParameters(this, 2);
      v6 = 0;
      CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1315] = ScriptParams[1];
      return v6;
    case 2114:
      CRunningScript::CollectParameters(this, 1);
      v20 = CTheZones::m_CurrLevel;
      goto LABEL_264;
    case 2115:
      CRunningScript::CollectParameters(this, 3);
      pPoint = *(CVector *)ScriptParams;
      SmallestZoneForPosition = CTheZones::FindSmallestZoneForPosition(&pPoint, 1u);
      PointerToScriptVariable = (char *)CRunningScript::GetPointerToScriptVariable(this, 2u);
      strncpy(PointerToScriptVariable, (const char *)&SmallestZoneForPosition->TextLabel, 8u);
      return 0;
    case 2116:
    case 2118:
      v7 = this;
      v8 = 2;
      goto LABEL_5;
    case 2117:
    case 2119:
      v7 = this;
      v8 = 1;
LABEL_5:
      v6 = 0;
      v9 = *(_BYTE *)CRunningScript::GetPointerToScriptVariable(v7, v8) == 0;
      goto LABEL_6;
    case 2125:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        InteriorManager_c::ActivatePeds(&g_interiorMan, 1u);
        return 0;
      }
      v6 = 0;
      InteriorManager_c::ActivatePeds(&g_interiorMan, 0);
      return v6;
    case 2126:
      CRunningScript::CollectParameters(this, 2);
      v6 = 0;
      v23 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v24 = *((_DWORD *)v23 + 268);
      v25 = v24 & 0xFFFFFBFF;
      if ( ScriptParams[1] )
        v25 = v24 | 0x400;
      *((_DWORD *)v23 + 268) = v25;
      return v6;
    case 2128:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v26 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v26 = 0;
      }
      v131 = (CTaskComplexFollowPedFootsteps *)CTask::operator new(0x20u);
      CTaskComplexFollowPedFootsteps::CTaskComplexFollowPedFootsteps(v131, v26);
      v132 = v131;
      v133 = 2128;
      goto LABEL_217;
    case 2129:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v27 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v27 = 0;
      }
      v134 = (float)ScriptParams[1];
      if ( ScriptParams[2] )
      {
        v135 = 0.0;
        v136 = *((float *)v27 + 339);
        v100 = v136 < v134;
        v137 = v136 - v134;
        v138 = v134 - v136;
        if ( v100 )
        {
          v137 = 0.0;
          v135 = v138;
        }
        *((float *)v27 + 339) = v137;
      }
      else
      {
        v135 = (float)ScriptParams[1];
      }
      v6 = 0;
      v159 = *((float *)v27 + 337) - v135;
      *((float *)v27 + 337) = v159;
      if ( v159 <= 0.0 )
      {
        *((_DWORD *)v27 + 337) = 0;
        v160 = (CTaskComplexDie *)CTask::operator new(0x28u);
        CTaskComplexDie::CTaskComplexDie(
          v160,
          WEAPONTYPE_UNARMED,
          ANIM_STD_PED,
          ANIM_STD_KO_FRONT,
          4.0,
          0.0,
          0,
          0,
          0,
          0);
        CEventScriptCommand::CEventScriptCommand(pos, 3, v160, 0);
        CEventGroup::Add((CEventGroup *)(*((_DWORD *)v27 + 272) + 104), pos, 0);
        CEventScriptCommand::~CEventScriptCommand(pos);
      }
      return v6;
    case 2130:
      CRunningScript::CollectParameters(this, 2);
      v6 = 0;
      v28 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v29 = v28[2172];
      v30 = v29 & 0xEF;
      if ( ScriptParams[1] )
        v30 = v29 | 0x10;
      v28[2172] = v30;
      return v6;
    case 2131:
      CRunningScript::CollectParameters(this, 2);
      v6 = 0;
      CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][995] = ScriptParams[1];
      return v6;
    case 2133:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] == -1
        || ScriptParams[0] < 0
        || CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
      {
        v31 = 0;
      }
      else
      {
        v31 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      pPoint = *(CVector *)&ScriptParams[1];
      EventGlobalGroup = GetEventGlobalGroup();
      ScriptParams[0] = CEventGlobalGroup::GetSoundLevel(EventGlobalGroup, v31, &pPoint);
      goto LABEL_265;
    case 2134:
      CRunningScript::CollectParameters(this, 2);
      v6 = 0;
      v32 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v33 = *((_DWORD *)v32 + 289);
      v34 = v33 | 0x1000000;
      if ( ScriptParams[1] )
        v34 = v33 & 0xFEFFFFFF;
      *((_DWORD *)v32 + 289) = v34;
      return v6;
    case 2136:
      CRunningScript::CollectParameters(this, 3);
      v6 = 0;
      CTheScripts::fCameraHeadingWhenPlayerIsAttached = (float)(*(float *)&ScriptParams[1] * 3.1416) / 180.0;
      CTheScripts::fCameraHeadingStepWhenPlayerIsAttached = (float)(*(float *)&ScriptParams[2] * 3.1416) / 180.0;
      return v6;
    case 2137:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v35 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v35 = 0;
      }
      v139 = (CTaskComplexWalkAlongsidePed *)CTask::operator new(0x20u);
      CTaskComplexWalkAlongsidePed::CTaskComplexWalkAlongsidePed(v139, v35, 10.0);
      v132 = v139;
      v133 = 2137;
LABEL_217:
      CRunningScript::GivePedScriptedTask(this, ScriptParams[0], v132, v133);
      return 0;
    case 2138:
      CRunningScript::CollectParameters(this, 4);
      pPoint = *(CVector *)&ScriptParams[1];
      OneEmergencyServicesCar = CCarCtrl::ScriptGenerateOneEmergencyServicesCar(
                                  ScriptParams[0],
                                  *(CVector *)&ScriptParams[1]);
      goto LABEL_240;
    case 2139:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] == -1 )
      {
        v149 = (CTaskSimpleSetKindaStayInSamePlace *)CTask::operator new(0xCu);
        v150 = v149;
        v151 = ScriptParams[1];
        if ( ScriptParams[1] )
          v151 = 1;
        CTaskSimpleSetKindaStayInSamePlace::CTaskSimpleSetKindaStayInSamePlace(v149, v151);
        CTaskComplexSequence::AddTask(&CTaskSequences::ms_taskSequence[CTaskSequences::ms_iActiveSequence], v150);
      }
      else
      {
        if ( ScriptParams[0] >= 0
          && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        {
          v37 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        }
        else
        {
          v37 = 0;
        }
        v147 = ScriptParams[1];
        if ( ScriptParams[1] )
          v147 = 1;
        CTaskSimpleSetKindaStayInSamePlace::CTaskSimpleSetKindaStayInSamePlace(
          (CTaskSimpleSetKindaStayInSamePlace *)pos,
          v147);
        CTaskSimpleSetKindaStayInSamePlace::ProcessPed(v148, v37);
        CTaskSimpleSetKindaStayInSamePlace::~CTaskSimpleSetKindaStayInSamePlace((CTaskSimpleSetKindaStayInSamePlace *)pos);
      }
      return 0;
    case 2142:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v38 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v38 = 0;
      }
      v6 = 0;
      CVehicleRecording::StartPlaybackRecordedCar(v38, ScriptParams[1], 0, 1);
      return v6;
    case 2144:
      CRunningScript::CollectParameters(this, 2);
      v6 = 0;
      v9 = ScriptParams[1] == 0;
      v39 = (const CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v39->m_areaCode = ScriptParams[1];
      if ( v9 )
      {
        v39->m_pLastEntryExit = 0;
        if ( CPed::IsPlayer(v39) )
        {
          v6 = 0;
          CEntryExitManager::ms_entryExitStackPosn = 0;
          CTimeCycle::StopExtraColour(0);
        }
      }
      return v6;
    case 2145:
      CRunningScript::CollectParameters(this, 1);
      v6 = 0;
      v9 = CTheScripts::fCameraHeadingStepWhenPlayerIsAttached == 0.0;
LABEL_6:
      CRunningScript::UpdateCompareFlag(this, v9);
      return v6;
    case 2148:
      CRunningScript::CollectParameters(this, 4);
      *(_QWORD *)&pos[0]._vptr$CEvent = *(_QWORD *)ScriptParams;
      NearestEntryExit = CEntryExitManager::FindNearestEntryExit((const CVector2D *)pos, *(float *)&ScriptParams[2], -1);
      if ( (CEntryExitManager::mp_poolEntryExits->m_aFlags[NearestEntryExit] & 0x80u) != 0 )
        v41 = 0;
      else
        v41 = CEntryExitManager::mp_poolEntryExits->m_aStorage[NearestEntryExit];
      v152 = *((_WORD *)v41 + 24);
      if ( ScriptParams[3] )
      {
        *((_WORD *)v41 + 24) = v152 | 0x100;
        v153 = *((_DWORD *)v41 + 14);
        if ( !v153 )
          return 0;
        v154 = *(_WORD *)(v153 + 48) | 0x100;
      }
      else
      {
        *((_WORD *)v41 + 24) = v152 & 0xFEFF;
        v153 = *((_DWORD *)v41 + 14);
        if ( !v153 )
          return 0;
        v154 = *(_WORD *)(v153 + 48) & 0xFEFF;
      }
      *(_WORD *)(v153 + 48) = v154;
      return 0;
    case 2150:
      CRunningScript::CollectParameters(this, 4);
      v42 = *(float *)&ScriptParams[3];
      v43 = *(float *)&ScriptParams[1];
      v44 = *(float *)ScriptParams;
      v45 = *(float *)&ScriptParams[2];
      Coors = *(CVector *)ScriptParams;
      CWorld::FindObjectsInRange(&Coors, *(float *)&ScriptParams[3], 1, pNum, 16, (CEntity **)pos, 0, 0, 0, 1, 0);
      if ( pNum[0] )
      {
        v46 = v42 + v42;
        v47 = 0;
        v48 = 0;
        do
        {
          v49 = *((_DWORD *)&pos[0]._vptr$CEvent + v48);
          if ( (*(_BYTE *)(v49 + 58) & 7) == 4 && (*(_BYTE *)(v49 + 325) & 0x20) != 0 )
          {
            v50 = *(_DWORD *)(v49 + 20);
            v51 = (float *)(v50 + 48);
            if ( !v50 )
              v51 = (float *)(v49 + 4);
            v52 = sqrtf(
                    (float)((float)((float)(*v51 - v44) * (float)(*v51 - v44))
                          + (float)((float)(v51[1] - v43) * (float)(v51[1] - v43)))
                  + (float)((float)(v51[2] - v45) * (float)(v51[2] - v45)));
            if ( v52 < v46 )
            {
              v47 = *((_DWORD *)&pos[0]._vptr$CEvent + v48);
              v46 = v52;
            }
          }
          ++v48;
        }
        while ( v48 < pNum[0] );
        if ( v47 )
          v20 = CPools::ms_pObjectPool->m_aFlags[-654471207
                                               * ((signed int)(v47 - (unsigned int)CPools::ms_pObjectPool->m_aStorage) >> 2)] | (-40904448 * ((signed int)(v47 - (unsigned int)CPools::ms_pObjectPool->m_aStorage) >> 2));
        else
          *(float *)&v20 = NAN;
      }
      else
      {
        *(float *)&v20 = NAN;
      }
LABEL_264:
      ScriptParams[0] = v20;
      goto LABEL_265;
    case 2151:
      CRunningScript::CollectParameters(this, 1);
      IsGroupActive = (CAnimBlendAssociation *)InteriorManager_c::IsGroupActive(&g_interiorMan, ScriptParams[0]);
LABEL_87:
      OneEmergencyServicesCar = (unsigned __int8)IsGroupActive;
      if ( IsGroupActive )
        OneEmergencyServicesCar = 1;
      goto LABEL_240;
    case 2152:
    case 2153:
    case 2155:
    case 2156:
      CRunningScript::GetIndexOfGlobalVariable(this);
      return 0;
    case 2161:
      CRunningScript::CollectParameters(this, 4);
      v54 = ScriptParams[2];
      CTheScripts::SwitchDefaultAddress = ScriptParams[3];
      CTheScripts::NumberOfEntriesStillToReadForSwitch = 2 * LOWORD(ScriptParams[1]);
      v5 = 14;
      CTheScripts::ValueToCheckInSwitchStatement = ScriptParams[0];
      if ( ScriptParams[2] )
        v54 = 1;
      CTheScripts::SwitchDefaultExists = v54;
      goto LABEL_93;
    case 2162:
LABEL_93:
      v55 = v5;
      CRunningScript::CollectParameters(this, v5);
      v56 = CTheScripts::NumberOfEntriesStillToReadForSwitch;
      if ( CTheScripts::NumberOfEntriesStillToReadForSwitch <= v55 )
      {
        v62 = CTheScripts::NumberOfEntriesInSwitchTable;
        if ( CTheScripts::NumberOfEntriesStillToReadForSwitch )
        {
          v107 = CTheScripts::NumberOfEntriesStillToReadForSwitch;
          if ( CTheScripts::NumberOfEntriesStillToReadForSwitch <= 2u )
            v107 = 2;
          v108 = 0;
          v109 = CTheScripts::NumberOfEntriesInSwitchTable + (((unsigned int)&elf_hash_chain[16293] + v107 + 3) >> 1);
          do
          {
            v110 = &ScriptParams[v108];
            CTheScripts::SwitchJumpTable[(unsigned __int16)v62].Value = *v110;
            v108 += 2;
            v111 = &CTheScripts::SwitchJumpTable[(unsigned __int16)v62++];
            v111->Address = v110[1];
          }
          while ( v108 < v56 );
          LOBYTE(v62) = v109 + 1;
          CTheScripts::NumberOfEntriesInSwitchTable = v109 + 1;
        }
        CTheScripts::NumberOfEntriesStillToReadForSwitch = 0;
LABEL_176:
        v112 = (unsigned __int8)(v62 - 1);
        if ( v112 < 2 )
        {
          v115 = 0;
LABEL_187:
          if ( CTheScripts::ValueToCheckInSwitchStatement != CTheScripts::SwitchJumpTable[v112].Value )
          {
            v144 = &CTheScripts::SwitchJumpTable[v115];
            Value = v144->Value;
            p_Address = &v144->Address;
            if ( CTheScripts::ValueToCheckInSwitchStatement != Value )
              p_Address = &CTheScripts::SwitchDefaultAddress;
            goto LABEL_279;
          }
          v117 = &CTheScripts::SwitchJumpTable[v112];
        }
        else
        {
          LOBYTE(v62) = v62 - 1;
          LOBYTE(v113) = 0;
          while ( 1 )
          {
            v114 = CTheScripts::SwitchJumpTable[v112 >> 1].Value;
            if ( CTheScripts::ValueToCheckInSwitchStatement == v114 )
              break;
            if ( CTheScripts::ValueToCheckInSwitchStatement <= v114 )
              v62 = v112 >> 1;
            else
              v113 = v112 >> 1;
            v115 = (unsigned __int8)v113;
            v112 = (unsigned __int8)v62 + (unsigned __int8)v113;
            if ( (unsigned __int8)v62 - (unsigned __int8)v113 <= 1 )
            {
              v112 = (unsigned __int8)v62;
              goto LABEL_187;
            }
          }
          v117 = &CTheScripts::SwitchJumpTable[v112 >> 1];
        }
        p_Address = &v117->Address;
LABEL_279:
        v161 = *p_Address;
        v6 = 0;
        CTheScripts::ValueToCheckInSwitchStatement = 0;
        CTheScripts::NumberOfEntriesStillToReadForSwitch = 0;
        CTheScripts::SwitchDefaultExists = 0;
        CTheScripts::SwitchDefaultAddress = 0;
        CTheScripts::NumberOfEntriesInSwitchTable = 0;
        CRunningScript::UpdatePC(this, v161);
        return v6;
      }
      v57 = 0;
      v58 = CTheScripts::NumberOfEntriesInSwitchTable;
      v59 = CTheScripts::NumberOfEntriesInSwitchTable + (((unsigned int)&elf_hash_chain[16293] + v55 + 3) >> 1);
      do
      {
        v60 = &ScriptParams[v57];
        CTheScripts::SwitchJumpTable[(unsigned __int16)v58].Value = *v60;
        v57 += 2;
        v61 = &CTheScripts::SwitchJumpTable[(unsigned __int16)v58++];
        v61->Address = v60[1];
      }
      while ( v57 < v55 );
      LOBYTE(v62) = v59 + 1;
      CTheScripts::NumberOfEntriesStillToReadForSwitch = v56 - v55;
      CTheScripts::NumberOfEntriesInSwitchTable = v59 + 1;
      if ( (_WORD)v56 == (_WORD)v55 )
        goto LABEL_176;
      return 0;
    case 2163:
      CRunningScript::CollectParameters(this, 1);
      CVehicleRecording::RemoveRecordingFile(ScriptParams[0]);
      return 0;
    case 2164:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      CRunningScript::CollectParameters(this, 1);
      ZoneByLabelAndReturnIndex = CTheZones::FindZoneByLabelAndReturnIndex(pStringToFill, ZONE_INFORMATION);
      if ( ZoneByLabelAndReturnIndex < 0 )
        return 0;
      v6 = 0;
      v64 = &CTheZones::ZoneInfoArray[CTheZones::NavigationZoneArray[ZoneByLabelAndReturnIndex].ZoneInfoIndex];
      *(_WORD *)((char *)v64 + 15) = *(_WORD *)((char *)v64 + 15) & 0xF0FF | (LOWORD(ScriptParams[0]) << 8) & 0xF00;
      return v6;
    case 2165:
      CRunningScript::CollectParameters(this, 2);
      v6 = 0;
      v65 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v66 = *((_DWORD *)v65 + 17);
      v67 = v66 & 0xFFBFFFFF;
      if ( ScriptParams[1] )
        v67 = v66 | 0x400000;
      *((_DWORD *)v65 + 17) = v67;
      return v6;
    case 2166:
      CRunningScript::CollectParameters(this, 8);
      v169.x = (float)ScriptParams[0];
      v169.y = (float)ScriptParams[1];
      v169.z = (float)ScriptParams[2];
      v170.x = (float)ScriptParams[3];
      v6 = 0;
      pPoint.x = (float)ScriptParams[0];
      pPoint.y = (float)ScriptParams[1];
      pPoint.z = (float)ScriptParams[2];
      v170.y = (float)ScriptParams[4];
      v170.z = (float)ScriptParams[5];
      CBirds::CreateNumberOfBirds(v169, v170, ScriptParams[6], ScriptParams[7], 0);
      return v6;
    case 2168:
      CRunningScript::CollectParameters(this, 2);
      v6 = 0;
      *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1212] = ScriptParams[1];
      return v6;
    case 2169:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        CGangWars::SetGangWarsActive(1);
        return 0;
      }
      v6 = 0;
      CGangWars::SetGangWarsActive(0);
      return v6;
    case 2170:
      OneEmergencyServicesCar = CGangWars::GangWarGoingOn();
      goto LABEL_240;
    case 2171:
      CRunningScript::CollectParameters(this, 1);
      v68 = ScriptParams[0];
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&Coors, 0x10u);
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pNum, 0x10u);
      CRunningScript::CollectParameters(this, 1);
      CPedClothesDesc::SetTextureAndModel(
        CWorld::Players[v68].PlayerPedData.m_pClothes,
        (const unsigned __int8 *)&Coors,
        (const unsigned __int8 *)pNum,
        ScriptParams[0]);
      UppercaseKey = CKeyGen::GetUppercaseKey((const unsigned __int8 *)&Coors);
      CShopping::SetPlayerHasBought(UppercaseKey);
      return 0;
    case 2172:
      CShopping::RemoveLoadedShop();
      return 0;
    case 2173:
      CRunningScript::CollectParameters(this, 2);
      ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 8u);
      if ( ActualScriptThingIndex > 7 )
        return 0;
      if ( ScriptParams[1] == -1 )
        v71 = -1;
      else
        v71 = CTheScripts::GetActualScriptThingIndex(ScriptParams[1], 4u);
      v6 = 0;
      CPedGroups::ms_groups[ActualScriptThingIndex].m_intelligence.m_iSequenceTaskID = v71;
      return v6;
    case 2174:
      CRunningScript::CollectParameters(this, 2);
      v72 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v73 = *((_DWORD *)v72 + 291);
      v74 = v73 | 0x200;
      if ( ScriptParams[1] )
        v74 = v73 & 0xFFFFFDFF;
      goto LABEL_119;
    case 2175:
      CRunningScript::CollectParameters(this, 2);
      v72 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v75 = *((_DWORD *)v72 + 291);
      v74 = v75 & 0xFFFFBFFF;
      if ( ScriptParams[1] )
        v74 = v75 | 0x4000;
LABEL_119:
      *((_DWORD *)v72 + 291) = v74;
      return 0;
    case 2177:
      CRunningScript::CollectParameters(this, 2);
      v76 = 0;
      v6 = 0;
      if ( !ScriptParams[1] )
        v76 = 1;
      CPad::GetPad(ScriptParams[0])->bDisablePlayerFireWeapon = v76;
      return v6;
    case 2179:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v77 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v77 = 0;
      }
      v140 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 1u);
      if ( v140 >= 0 )
      {
        pFXSystem = CTheScripts::ScriptEffectSystemArray[v140].pFXSystem;
        if ( pFXSystem )
          FxSystem_c::AttachToBone(pFXSystem, v77, ScriptParams[2]);
      }
      return 0;
    case 2180:
      CRunningScript::CollectParameters(this, 1);
      LOWORD(v78) = 0;
      while ( (unsigned __int16)CTheScripts::StreamedScripts.ScriptStructures[(__int16)v78].IndexUsedByScriptFile != LOWORD(ScriptParams[0]) )
      {
        v78 = (__int16)(v78 + 1);
        if ( v78 >= 82 )
        {
          LOWORD(v78) = -1;
          break;
        }
      }
      ScriptParams[0] = (__int16)v78;
      CRunningScript::ReadTextLabelFromScript(this, v167, 8u);
      CScriptsForBrains::AddNewStreamedScriptBrainForCodeUse(&CTheScripts::ScriptsForBrains, ScriptParams[0], v167, 5);
      return 0;
    case 2183:
      CRunningScript::CollectParameters(this, 3);
      v6 = 0;
      v79 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v80 = (float)(*(float *)&ScriptParams[2] * 3.1416) / 180.0;
      *((_WORD *)v79 + 960) = ScriptParams[1];
      *((float *)v79 + 481) = v80;
      return v6;
    case 2184:
      CRunningScript::CollectParameters(this, 1);
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CRadar::GetActualBlipArrayIndex(ParameterWithoutIncreasingPC);
      v82 = CRadar::SetEntityBlip(BLIPTYPE_CHAR, ScriptParams[0], 1u, BLIPDISPLAY_BOTH, this->ScriptName);
      CRadar::ChangeBlipScale(v82, 3);
      ScriptParams[0] = v82;
LABEL_265:
      v11 = this;
      v12 = 1;
      goto LABEL_266;
    case 2185:
      CRunningScript::CollectParameters(this, 1);
      v83 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v85 = v83[1157] << 31;
      v84 = v85 == 0;
      if ( v85 )
      {
        v85 = *((_DWORD *)v83 + 356);
        v84 = v85 == 0;
      }
      if ( v84 )
      {
        CPed::GetBonePosition((CPed *)v83, &posn, 1u, 0);
      }
      else
      {
        v155 = *(_DWORD *)(v85 + 20);
        v156 = v155 + 48;
        if ( !v155 )
          v156 = v85 + 4;
        v157 = *(_QWORD *)v156;
        posn.z = *(RwReal *)(v156 + 8);
        *(_QWORD *)&posn.x = v157;
      }
      *(RwV3d_0 *)ScriptParams = posn;
LABEL_262:
      v11 = this;
      v12 = 3;
LABEL_266:
      CRunningScript::StoreParameters(v11, v12);
      return 0;
    case 2186:
      CRunningScript::PlayAnimScriptCommand(this, 2186);
      return 0;
    case 2187:
      CRunningScript::CollectParameters(this, 2);
      v86 = *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][904];
      if ( !v86 )
        return 0;
      v87 = *(float *)(v86 + 16);
      if ( v87 > 0.01 )
        v87 = (float)(v87 * 0.5) / 1000.0;
      v6 = 0;
      *(float *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][156] = *(float *)&ScriptParams[1]
                                                                                              * v87;
      return v6;
    case 2188:
      CRunningScript::CollectParameters(this, 4);
      v6 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v88 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v88 = 0;
      }
      CCarCtrl::SetCoordsOfScriptCar(
        v88,
        *(float *)&ScriptParams[1],
        *(float *)&ScriptParams[2],
        *(float *)&ScriptParams[3],
        0,
        0);
      return v6;
    case 2189:
      CRunningScript::CollectParameters(this, 6);
      GroundZForCoord = *(float *)&ScriptParams[2];
      v90 = *(float *)ScriptParams;
      v91 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      v92 = *(float *)&ScriptParams[3];
      Index = ScriptParams[4];
      if ( ScriptParams[4] <= -1 )
        Index = CTheScripts::UsedObjectArray[-ScriptParams[4]].Index;
      Coors.y = v91;
      Coors.x = v90;
      Coors.z = GroundZForCoord;
      CWorld::FindObjectsOfTypeInRange(
        Index,
        &Coors,
        *(float *)&ScriptParams[3],
        1,
        pNum,
        16,
        (CEntity **)pos,
        1,
        0,
        0,
        1,
        1);
      if ( pNum[0] >= 1 )
      {
        v2.n64_f32[0] = v92 + v92;
        v94 = 0;
        v95 = 0;
        v96 = 0;
        do
        {
          v97 = *((_DWORD *)&pos[0]._vptr$CEvent + v94);
          ++v95;
          v98 = *(_DWORD *)(v97 + 20);
          v99 = (float *)(v98 + 48);
          if ( !v98 )
            v99 = (float *)(v97 + 4);
          v3.n64_f32[0] = sqrtf(
                            (float)((float)((float)(*v99 - v90) * (float)(*v99 - v90))
                                  + (float)((float)(v99[1] - v91) * (float)(v99[1] - v91)))
                          + (float)((float)(v99[2] - GroundZForCoord) * (float)(v99[2] - GroundZForCoord)));
          v100 = v3.n64_f32[0] < v2.n64_f32[0];
          v2.n64_u64[0] = vmin_f32(v3, v2).n64_u64[0];
          if ( v100 )
            v96 = v97;
          v94 = v95;
        }
        while ( v95 < pNum[0] );
        if ( v96 )
        {
          v101 = *(_QWORD *)(v96 + 28);
          v102 = v101 & 0xFFFFFFFE;
          if ( ScriptParams[5] )
            v102 = v101 | 1;
          *(_DWORD *)(v96 + 28) = v102;
          *(_DWORD *)(v96 + 32) = HIDWORD(v101);
        }
      }
      return 0;
    case 2190:
      CClock::OffsetClockByADay(1u);
      return 0;
    case 2192:
      IndexOfGlobalVariable = CRunningScript::GetIndexOfGlobalVariable(this);
      CRunningScript::CollectParameters(this, 1);
      COnscreenTimer::SetClockBeepCountdownSecs(&CUserDisplay::OnscnTimer, IndexOfGlobalVariable, ScriptParams[0]);
      return 0;
    case 2195:
      CRunningScript::CollectParameters(this, 2);
      v104 = (uint8 *)CPools::ms_pVehiclePool;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v105 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v105 = 0;
      }
      if ( ScriptParams[1] < 0
        || CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] != LOBYTE(ScriptParams[1]) )
      {
        return 0;
      }
      v142 = v105 == 0;
      v6 = 0;
      if ( v105 )
      {
        v104 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        v142 = v104 == 0;
      }
      if ( v142 )
        return v6;
      (*(void (__fastcall **)(uint8 *, uint8 *, int))(*(_DWORD *)v105 + 248))(v105, v104, 1);
      return 0;
    case 2199:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v106 = (CPhysical *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v106 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v143 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( !v106 )
        {
LABEL_237:
          OneEmergencyServicesCar = 0;
          goto LABEL_240;
        }
      }
      else
      {
        v143 = 0;
        if ( !v106 )
          goto LABEL_237;
      }
      OneEmergencyServicesCar = CPhysical::GetHasCollidedWith(v106, v143);
LABEL_240:
      CRunningScript::UpdateCompareFlag(this, OneEmergencyServicesCar);
      return 0;
    default:
      return -1;
  }
}
// 33890C: variable 'v3' is possibly undefined
// 33890C: variable 'v2' is possibly undefined
// 338E3A: variable 'v148' is possibly undefined
// 10168: using guessed type int elf_hash_chain[22025];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 67982C: using guessed type script_effect_struct (*CTheScripts::ScriptEffectSystemArray)[32];

//----- (003391B8) --------------------------------------------------------
void __fastcall CTheScripts::InitialiseSpecialAnimGroup(UInt16 ArrayIndex)
{
  int v1; // r0

  v1 = ArrayIndex;
  CTheScripts::ScriptAttachedAnimGroups[v1].CharModelIndex = -1;
  CTheScripts::ScriptAttachedAnimGroups[v1].AnimGroupName[0] = 0;
}

//----- (003391D8) --------------------------------------------------------
void CTheScripts::InitialiseSpecialAnimGroupsAttachedToCharModels()
{
  CTheScripts::ScriptAttachedAnimGroups[0].AnimGroupName[0] = 0;
  CTheScripts::ScriptAttachedAnimGroups[0].CharModelIndex = -1;
  CTheScripts::ScriptAttachedAnimGroups[1].CharModelIndex = -1;
  CTheScripts::ScriptAttachedAnimGroups[1].AnimGroupName[0] = 0;
  CTheScripts::ScriptAttachedAnimGroups[2].AnimGroupName[0] = 0;
  CTheScripts::ScriptAttachedAnimGroups[2].CharModelIndex = -1;
  CTheScripts::ScriptAttachedAnimGroups[3].CharModelIndex = -1;
  CTheScripts::ScriptAttachedAnimGroups[3].AnimGroupName[0] = 0;
  CTheScripts::ScriptAttachedAnimGroups[4].CharModelIndex = -1;
  CTheScripts::ScriptAttachedAnimGroups[4].AnimGroupName[0] = 0;
  CTheScripts::ScriptAttachedAnimGroups[5].CharModelIndex = -1;
  CTheScripts::ScriptAttachedAnimGroups[5].AnimGroupName[0] = 0;
  CTheScripts::ScriptAttachedAnimGroups[6].CharModelIndex = -1;
  CTheScripts::ScriptAttachedAnimGroups[6].AnimGroupName[0] = 0;
  CTheScripts::ScriptAttachedAnimGroups[7].AnimGroupName[0] = 0;
  CTheScripts::ScriptAttachedAnimGroups[7].CharModelIndex = -1;
}

//----- (00339218) --------------------------------------------------------
void __fastcall CTheScripts::AddToListOfSpecialAnimGroupsAttachedToCharModels(Int32 modelId, Char *pAnimGroupName)
{
  int v4; // r6
  anim_group_attached_to_char *v5; // r0

  if ( CTheScripts::ScriptAttachedAnimGroups[0].CharModelIndex == modelId )
  {
    if ( !strcmp((const char *)CTheScripts::ScriptAttachedAnimGroups[0].AnimGroupName, (const char *)pAnimGroupName) )
      return;
    v4 = -1;
  }
  else
  {
    v4 = 0;
    if ( CTheScripts::ScriptAttachedAnimGroups[0].CharModelIndex != -1 )
      v4 = -1;
  }
  if ( CTheScripts::ScriptAttachedAnimGroups[1].CharModelIndex == modelId )
  {
    if ( !strcmp((const char *)CTheScripts::ScriptAttachedAnimGroups[1].AnimGroupName, (const char *)pAnimGroupName) )
      return;
  }
  else if ( CTheScripts::ScriptAttachedAnimGroups[1].CharModelIndex == -1 )
  {
    v4 = 1;
  }
  if ( CTheScripts::ScriptAttachedAnimGroups[2].CharModelIndex == modelId )
  {
    if ( !strcmp((const char *)CTheScripts::ScriptAttachedAnimGroups[2].AnimGroupName, (const char *)pAnimGroupName) )
      return;
  }
  else if ( CTheScripts::ScriptAttachedAnimGroups[2].CharModelIndex == -1 )
  {
    v4 = 2;
  }
  if ( CTheScripts::ScriptAttachedAnimGroups[3].CharModelIndex == modelId )
  {
    if ( !strcmp((const char *)CTheScripts::ScriptAttachedAnimGroups[3].AnimGroupName, (const char *)pAnimGroupName) )
      return;
  }
  else if ( CTheScripts::ScriptAttachedAnimGroups[3].CharModelIndex == -1 )
  {
    v4 = 3;
  }
  if ( CTheScripts::ScriptAttachedAnimGroups[4].CharModelIndex == modelId )
  {
    if ( !strcmp((const char *)CTheScripts::ScriptAttachedAnimGroups[4].AnimGroupName, (const char *)pAnimGroupName) )
      return;
  }
  else if ( CTheScripts::ScriptAttachedAnimGroups[4].CharModelIndex == -1 )
  {
    v4 = 4;
  }
  if ( CTheScripts::ScriptAttachedAnimGroups[5].CharModelIndex == modelId )
  {
    if ( !strcmp((const char *)CTheScripts::ScriptAttachedAnimGroups[5].AnimGroupName, (const char *)pAnimGroupName) )
      return;
  }
  else if ( CTheScripts::ScriptAttachedAnimGroups[5].CharModelIndex == -1 )
  {
    v4 = 5;
  }
  if ( CTheScripts::ScriptAttachedAnimGroups[6].CharModelIndex == modelId )
  {
    if ( !strcmp((const char *)CTheScripts::ScriptAttachedAnimGroups[6].AnimGroupName, (const char *)pAnimGroupName) )
      return;
  }
  else if ( CTheScripts::ScriptAttachedAnimGroups[6].CharModelIndex == -1 )
  {
    v4 = 6;
  }
  if ( CTheScripts::ScriptAttachedAnimGroups[7].CharModelIndex == modelId )
  {
    if ( !strcmp((const char *)CTheScripts::ScriptAttachedAnimGroups[7].AnimGroupName, (const char *)pAnimGroupName) )
      return;
  }
  else if ( CTheScripts::ScriptAttachedAnimGroups[7].CharModelIndex == -1 )
  {
    v4 = 7;
    goto LABEL_43;
  }
  if ( v4 != -1 )
  {
LABEL_43:
    v5 = &CTheScripts::ScriptAttachedAnimGroups[v4];
    v5->CharModelIndex = modelId;
    sub_19B9DC((char *)v5->AnimGroupName, (const char *)pAnimGroupName);
  }
}

//----- (003393C4) --------------------------------------------------------
Bool8 __fastcall CTheScripts::ScriptAttachAnimGroupToCharModel(Int32 PedModelIndex, Char *pAnimGroupName)
{
  CBaseModelInfo *v3; // r4
  int v4; // r6

  v3 = CModelInfo::ms_modelInfoPtrs[PedModelIndex];
  v4 = (*((int (__fastcall **)(CBaseModelInfo *))v3->_vptr$CBaseModelInfo + 15))(v3);
  if ( v4 == CAnimManager::GetAnimationBlockIndex(pAnimGroupName) )
    return 0;
  (*((void (__fastcall **)(CBaseModelInfo *, Char *))v3->_vptr$CBaseModelInfo + 13))(v3, pAnimGroupName);
  (*((void (__fastcall **)(CBaseModelInfo *))v3->_vptr$CBaseModelInfo + 14))(v3);
  return 1;
}

//----- (00339414) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
Int8 __fastcall CRunningScript::ProcessCommands2200To2299(CRunningScript *this, Int32 CurrCommand)
{
  CRunningScript *v2; // r4
  Int8 v4; // r6
  int v5; // r1
  Int32 *PointerToScriptVariable; // r5
  int v7; // r0
  __int64 v8; // kr00_8
  UInt8 v9; // r8
  Bool8 v10; // r6
  CPed *v11; // r0
  CPed *v12; // r0
  CPedPool *v13; // r0
  float v14; // s16
  int32 m_nSize; // r3
  float v16; // s22
  float v17; // s18
  float v18; // s20
  int v19; // r6
  int v20; // r5
  CPool<CPed,CCopPed>::StorageType *m_aStorage; // r0
  uint8 *v22; // r9
  int v23; // r10
  bool v24; // nf
  CVector *v25; // r0
  CVector *v26; // r1
  Int32 v27; // r5
  CPed *v28; // r0
  Int32 v29; // r1
  Int32 v30; // r10
  int32 Index; // r11
  __int64 v32; // kr18_8
  float v33; // s16
  int32 v34; // r9
  uint8 *v35; // r10
  Int32 v36; // r0
  uint8 *v37; // r1
  char **v38; // r1
  CAutomobile *v39; // r0
  uint8 *v40; // r1
  int v41; // r2
  unsigned int v42; // r3
  uint8 *v43; // r4
  uint8 *v44; // r5
  const CPed *v45; // r6
  CPed *v46; // r1
  uint8 *v47; // r0
  char IsCutsceneSkipButtonBeingPressed; // r0
  Int16 v49; // r1
  Int32 **v50; // r0
  int v51; // r11
  CEntryExit *v52; // r5
  __int64 v53; // kr20_8
  int32 v54; // r0
  CVector **v55; // r1
  float *v56; // r2
  float *v57; // r3
  CVector *v58; // r1
  _DWORD *v59; // r12
  __int64 v60; // kr28_8
  Int32 *v61; // r3
  __int64 v62; // d16
  Int32 v63; // r0
  CPedPool *v64; // r0
  float v65; // s16
  int32 v66; // r3
  float v67; // s22
  float v68; // s18
  float v69; // s20
  int v70; // r6
  int v71; // r5
  CPool<CPed,CCopPed>::StorageType *v72; // r0
  uint8 *v73; // r9
  int v74; // r10
  bool v75; // nf
  CVector *v76; // r0
  CVector *v77; // r1
  CPed *v78; // r0
  CPlane *v79; // r0
  int32 v80; // r5
  CBaseModelInfo *v81; // r4
  int v82; // r6
  uint8 *v83; // r1
  int v84; // r2
  unsigned int v85; // r3
  int32 v86; // r8
  float v87; // r0
  CPed *v88; // r0
  CZone *SmallestZoneForPosition; // r5
  char *v90; // r0
  int v91; // r2
  uint8 *v92; // r1
  int v93; // r2
  unsigned int v94; // r3
  UInt8 v95; // r4
  CPedGroupMembership *p_m_membership; // r4
  int v97; // r5
  Int32 v98; // r1
  CPlayerPed *PlayerPed; // r0
  CPlayerPed *v100; // r0
  Int32 v101; // r5
  CPlayerInfo *v102; // r8
  ePlayerClothesModels TextureDependency; // r0
  CPedClothesDesc *m_pClothes; // r1
  Int32 v105; // r0
  UInt8 v106; // r1
  Int32 *v107; // r5
  int v108; // r0
  bool IsPlayerInPositionForConversation; // r1
  Int32 v110; // r5
  int32 CarNodeIndexFromDoor; // r8
  int32 v112; // r0
  CRunningScript *v113; // r0
  int32 NearestEntryExit; // r0
  CEntryExit *v115; // r5
  int v116; // r3
  int v117; // r0
  uint8 *v118; // r1
  __int64 v119; // d16
  C2dEffect *EffectInUse; // r0
  char v121; // r5
  CEntryExit *pLink; // r0
  CEntryExit *v123; // r4
  CEntryExit *areacode; // r0
  _BOOL4 IsPlayer; // r0
  CTaskComplexUseEffect *v126; // r5
  CVector Item2_4; // [sp+4h] [bp-174h] BYREF
  CPed *v129; // [sp+50h] [bp-128h]
  CPed *v130; // [sp+54h] [bp-124h]
  CVector pPoint; // [sp+58h] [bp-120h] BYREF
  char v132[10]; // [sp+66h] [bp-112h] BYREF
  CEventAttractor pos; // [sp+70h] [bp-108h] BYREF
  unsigned __int8 Item5[10]; // [sp+8Eh] [bp-EAh] BYREF
  unsigned __int8 Item6[10]; // [sp+98h] [bp-E0h] BYREF
  unsigned __int8 Item7[10]; // [sp+A2h] [bp-D6h] BYREF
  unsigned __int8 Item8[10]; // [sp+ACh] [bp-CCh] BYREF
  unsigned __int8 Item9[10]; // [sp+B6h] [bp-C2h] BYREF
  unsigned __int8 Item10[10]; // [sp+C0h] [bp-B8h] BYREF
  unsigned __int8 Item11[10]; // [sp+CAh] [bp-AEh] BYREF
  unsigned __int8 Item12[16]; // [sp+D4h] [bp-A4h] BYREF
  Char v142[10]; // [sp+E4h] [bp-94h] BYREF
  Char v143[8]; // [sp+EEh] [bp-8Ah] BYREF
  _BYTE ScriptBrainName_2[12]; // [sp+F8h] [bp-80h] OVERLAPPED BYREF
  Char v145[8]; // [sp+10Ah] [bp-6Eh] BYREF
  Char TextLabel2[10]; // [sp+112h] [bp-66h] BYREF
  Char pStringToFill[8]; // [sp+11Eh] [bp-5Ah] BYREF
  Char TextLabel[10]; // [sp+126h] [bp-52h] BYREF
  Int32 v149; // [sp+130h] [bp-48h]

  v2 = this;
  v4 = 0;
  switch ( CurrCommand )
  {
    case 2200:
      CRunningScript::CollectParameters(this, 3);
      v10 = ScriptParams[0];
      if ( ScriptParams[0] )
        v10 = 1;
      CTheScripts::bEnableCraneRaise = v10;
      CTheScripts::bEnableCraneLower = ScriptParams[1] != 0;
      CTheScripts::bEnableCraneRelease = ScriptParams[2] != 0;
      return 0;
    case 2201:
    case 2202:
    case 2205:
    case 2209:
    case 2218:
    case 2222:
    case 2224:
    case 2252:
    case 2253:
    case 2254:
    case 2255:
    case 2261:
      return v4;
    case 2203:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v11 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v11 = 0;
      }
      v4 = 0;
      IsPlayerInPositionForConversation = CConversations::IsPlayerInPositionForConversation(v11, 0);
      goto LABEL_189;
    case 2204:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v12 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v12 = 0;
      }
      if ( ScriptParams[1] )
      {
        CConversations::EnableConversation(v12, 1);
        return 0;
      }
      v4 = 0;
      CConversations::EnableConversation(v12, 0);
      return v4;
    case 2206:
      CRunningScript::CollectParameters(this, 4);
      v13 = CPools::ms_pPedPool;
      v14 = *(float *)&ScriptParams[3];
      *(_DWORD *)&TextLabel[2] = ScriptParams[0];
      *(_DWORD *)&TextLabel[6] = ScriptParams[1];
      v149 = ScriptParams[2];
      m_nSize = CPools::ms_pPedPool->m_nSize;
      if ( m_nSize )
      {
        v16 = *(float *)ScriptParams;
        v17 = *(float *)&ScriptParams[2];
        v18 = *(float *)&ScriptParams[1];
        v19 = m_nSize - 1;
        v20 = 1996 * m_nSize - 900;
        v130 = (CPed *)-1;
        while ( 1 )
        {
          if ( (v13->m_aFlags[v19] & 0x80u) == 0 )
          {
            m_aStorage = v13->m_aStorage;
            v22 = &(*m_aStorage)[v20];
            if ( &(*m_aStorage)[v20] != (uint8 *)&elf_hash_bucket[211] && (*m_aStorage)[v20] == 1 )
            {
              v23 = (int)&(*m_aStorage)[v20 - 1096];
              v24 = (*(_BYTE *)(v23 + 29) & 8) != 0;
              if ( (*(_BYTE *)(v23 + 29) & 8) == 0 )
                v24 = (v22[64] & 8) != 0;
              if ( !v24 )
              {
                v129 = (CPed *)(v22 - 1096);
                if ( !CRunningScript::IsPedDead(v2, (CPed *)(v22 - 1096))
                  && CModelInfo::ms_modelInfoPtrs[*(__int16 *)(v23 + 38)][1].m_modelName[10] << 31
                  && !CPedGroups::GetPedsGroup(v129) )
                {
                  v25 = (CVector *)*((_DWORD *)v22 - 269);
                  v26 = v25 + 4;
                  if ( !v25 )
                    v26 = (CVector *)(v23 + 4);
                  pPoint = *v26;
                  if ( sqrtf(
                         (float)((float)((float)(pPoint.x - v16) * (float)(pPoint.x - v16))
                               + (float)((float)(pPoint.y - v18) * (float)(pPoint.y - v18)))
                       + (float)((float)(pPoint.z - v17) * (float)(pPoint.z - v17))) < v14 )
                    v130 = (CPed *)(CPools::ms_pPedPool->m_aFlags[-1093107909
                                                                * (((char *)v129
                                                                  - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)v129 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)));
                }
              }
            }
          }
          if ( !v19 )
            break;
          --v19;
          v13 = CPools::ms_pPedPool;
          v20 -= 1996;
        }
        v27 = (Int32)v130;
        if ( (int)v130 >= 0 )
        {
          v28 = CPools::ms_pPedPool->m_aFlags[(unsigned int)v130 >> 8] == (unsigned __int8)v130 ? (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)v130 >> 8] : 0;
          CPed::SetCharCreatedBy(v28, 2u);
          ++CPopulation::ms_nTotalMissionPeds;
          if ( v2->IsThisAMissionScript )
            CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, (Int32)v130, 2u);
        }
      }
      else
      {
        v27 = -1;
      }
      goto LABEL_252;
    case 2207:
      CRunningScript::CollectParameters(this, 1);
      v29 = *(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1436];
      goto LABEL_160;
    case 2208:
      CRunningScript::CollectParameters(this, 6);
      v30 = ScriptParams[3];
      Index = ScriptParams[2];
      v32 = *(_QWORD *)&ScriptParams[4];
      v33 = *(float *)&ScriptParams[1];
      v34 = ScriptParams[0];
      CRunningScript::ReadTextLabelFromScript(v2, v143, 8u);
      if ( v34 == -1 )
      {
        *(_DWORD *)ScriptBrainName_2 = v30;
        *(_QWORD *)&ScriptBrainName_2[4] = v32;
        goto LABEL_223;
      }
      if ( v34 >= 0 && CPools::ms_pPedPool->m_aFlags[(unsigned int)v34 >> 8] == (unsigned __int8)v34 )
        v35 = CPools::ms_pPedPool->m_aStorage[(unsigned int)v34 >> 8];
      else
        v35 = 0;
      v117 = *((_DWORD *)v35 + 5);
      v118 = (uint8 *)(v117 + 48);
      if ( !v117 )
        v118 = v35 + 4;
      v119 = *(_QWORD *)v118;
      *(_DWORD *)&ScriptBrainName_2[8] = *((_DWORD *)v118 + 2);
      *(_QWORD *)ScriptBrainName_2 = v119;
      if ( !v35 )
      {
LABEL_223:
        v35 = 0;
        EffectInUse = 0;
        if ( !Index )
          goto LABEL_220;
        goto LABEL_224;
      }
      EffectInUse = CPedIntelligence::GetEffectInUse(*((const CPedIntelligence **)v35 + 272));
      if ( !Index )
      {
LABEL_220:
        Index = -1;
        goto LABEL_226;
      }
LABEL_224:
      if ( Index <= -1 )
        Index = CTheScripts::UsedObjectArray[-Index].Index;
LABEL_226:
      v121 = 0;
      *(_DWORD *)&TextLabel[2] = 0;
      pPoint.x = 0.0;
      CAttractorScanner::GetClosestAttractorOfType(
        (const CVector *)ScriptBrainName_2,
        v33,
        Index,
        5,
        v143,
        1,
        EffectInUse,
        (C2dEffect **)&TextLabel[2],
        (CEntity **)&pPoint);
      if ( *(_DWORD *)&TextLabel[2] )
      {
        if ( (unsigned __int8)v2->ScriptBrainType != 255 )
        {
          CRunningScript::RemoveScriptFromList(v2, &CTheScripts::pActiveScripts);
          CRunningScript::AddScriptToList(v2, &CTheScripts::pIdleScripts);
          CRunningScript::ShutdownThisScript(v2);
          v4 = 1;
          CEventAttractor::CEventAttractor(&pos, *(C2dEffect **)&TextLabel[2], (CEntity *)LODWORD(pPoint.x), 1u);
          pos.m_iTaskType = 233;
          CEventGroup::Add((CEventGroup *)(*((_DWORD *)v35 + 272) + 104), (CEvent *)&pos, 1);
          CPedIntelligence::SetEffectInUse(*((CPedIntelligence **)v35 + 272), *(C2dEffect **)&TextLabel[2]);
          CEventAttractor::~CEventAttractor(&pos);
          return v4;
        }
        v126 = (CTaskComplexUseEffect *)CTask::operator new(0x24u);
        CTaskComplexUseEffect::CTaskComplexUseEffect(v126, *(C2dEffect **)&TextLabel[2], (CEntity *)LODWORD(pPoint.x));
        CRunningScript::GivePedScriptedTask(v2, v34, v126, 2208);
        v121 = 1;
      }
      v113 = v2;
      LOBYTE(v5) = v121;
LABEL_203:
      CRunningScript::UpdateCompareFlag(v113, v5);
      return 0;
    case 2210:
      CRunningScript::CollectParameters(this, 3);
      v4 = 0;
      v36 = ScriptParams[2];
      v37 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( (unsigned __int8)(v37[958] - 57) >= 2u )
        v37[958] = 63;
      *((_DWORD *)v37 + 625) = v36;
      return v4;
    case 2211:
      CRunningScript::CollectParameters(this, 1);
      v38 = CGangWars::bCanTriggerGangWarWhenOnAMission;
      goto LABEL_180;
    case 2212:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v39 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v39 = 0;
      }
      CAutomobile::UpdateMovingCollision(v39, *(float *)&ScriptParams[1]);
      return 0;
    case 2213:
      CRunningScript::CollectParameters(this, 2);
      v40 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v41 = *((_DWORD *)v40 + 268);
      v42 = v41 & 0xFFFFEFFF;
      if ( ScriptParams[1] )
        v42 = v41 | 0x1000;
      goto LABEL_170;
    case 2214:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v43 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v43 = 0;
      }
      v110 = ScriptParams[1];
      CarNodeIndexFromDoor = CDamageManager::GetCarNodeIndexFromDoor((eDoors)ScriptParams[1]);
      if ( (*(int (__fastcall **)(uint8 *, Int32))(*(_DWORD *)v43 + 136))(v43, v110)
        || !*(_DWORD *)&v43[4 * CarNodeIndexFromDoor + 1628] )
      {
        return 0;
      }
      v4 = 0;
      (*(void (__fastcall **)(uint8 *, _DWORD, int32, Int32, Int32, int))(*(_DWORD *)v43 + 112))(
        v43,
        0,
        CarNodeIndexFromDoor,
        v110,
        ScriptParams[2],
        1);
      return v4;
    case 2215:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v44 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v44 = 0;
      }
      v112 = CDamageManager::GetCarNodeIndexFromDoor((eDoors)ScriptParams[1]);
      IsCutsceneSkipButtonBeingPressed = (*(int (__fastcall **)(uint8 *, int32))(*(_DWORD *)v44 + 148))(v44, v112);
      goto LABEL_201;
    case 2216:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        C3dMarkers::ForceRender(1u);
        return 0;
      }
      v4 = 0;
      C3dMarkers::ForceRender(0);
      return v4;
    case 2217:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CStreamedScripts::GetProperIndexFromIndexUsedByScript(
                          &CTheScripts::StreamedScripts,
                          ScriptParams[0]);
      CStreaming::RequestModel(ScriptParams[0] + 26230, 4);
      return 0;
    case 2219:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CStreamedScripts::GetProperIndexFromIndexUsedByScript(
                          &CTheScripts::StreamedScripts,
                          ScriptParams[0]);
      v5 = *((unsigned __int8 *)&CStreaming::ms_aInfoForModel[ScriptParams[0]].m_nextIndex
           + (_DWORD)"stroyP11RwMatrixTag");
      if ( v5 != 1 )
        LOBYTE(v5) = 0;
      goto LABEL_202;
    case 2220:
      CRunningScript::CollectParameters(this, 1);
      v38 = (char **)&CGangWars::bTrainingMission;
      goto LABEL_180;
    case 2221:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v45 = (const CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v45 = 0;
      }
      *(_QWORD *)&pos._vptr$CEvent = *(_QWORD *)&ScriptParams[1];
      NearestEntryExit = CEntryExitManager::FindNearestEntryExit(
                           (const CVector2D *)&pos,
                           *(float *)&ScriptParams[3],
                           -1);
      if ( (CEntryExitManager::mp_poolEntryExits->m_aFlags[NearestEntryExit] & 0x80u) != 0 )
        v115 = 0;
      else
        v115 = (CEntryExit *)CEntryExitManager::mp_poolEntryExits->m_aStorage[NearestEntryExit];
      pLink = v115->pLink;
      v123 = v115;
      if ( pLink )
      {
        pLink->pLink = v115;
        v123 = pLink;
      }
      v45->m_areaCode = v123->areacode;
      areacode = (CEntryExit *)v123->areacode;
      if ( v123->areacode )
        areacode = v115;
      v45->m_pLastEntryExit = areacode;
      IsPlayer = CPed::IsPlayer(v45);
      v4 = 0;
      if ( IsPlayer )
      {
        CEntryExitManager::ms_entryExitStackPosn = 0;
        CEntryExitManager::AddEntryExitToStack(v115);
        v4 = 0;
        if ( v123->extracol )
          CTimeCycle::StartExtraColour(v123->extracol - 1, 0);
        else
          CTimeCycle::StopExtraColour(0);
      }
      return v4;
    case 2223:
      CRunningScript::CollectParameters(this, 2);
      v4 = 0;
      *(float *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1352] = (float)ScriptParams[1];
      return v4;
    case 2225:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        CPostEffects::ScriptNightVisionSwitch(1);
        return 0;
      }
      v4 = 0;
      CPostEffects::ScriptNightVisionSwitch(0);
      return v4;
    case 2226:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        CPostEffects::ScriptInfraredVisionSwitch(1);
        return 0;
      }
      v4 = 0;
      CPostEffects::ScriptInfraredVisionSwitch(0);
      return v4;
    case 2227:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v4 = 0;
      CGangWars::ZoneInfoForTraining = CTheZones::NavigationZoneArray[CTheZones::FindZoneByLabelAndReturnIndex(
                                                                        pStringToFill,
                                                                        ZONE_INFORMATION)].ZoneInfoIndex;
      return v4;
    case 2228:
    case 2229:
    case 2230:
    case 2231:
    case 2232:
    case 2233:
      CRunningScript::CollectParameters(this, 2);
      v5 = ScriptParams[0] & (1 << SLOBYTE(ScriptParams[1]));
      if ( v5 )
        LOBYTE(v5) = 1;
      goto LABEL_202;
    case 2234:
    case 2235:
    case 2236:
      PointerToScriptVariable = CRunningScript::GetPointerToScriptVariable(this, 2u);
      CRunningScript::CollectParameters(v2, 1);
      goto LABEL_7;
    case 2237:
    case 2238:
    case 2239:
      PointerToScriptVariable = CRunningScript::GetPointerToScriptVariable(this, 1u);
      CRunningScript::CollectParameters(v2, 1);
LABEL_7:
      v7 = (1 << SLOBYTE(ScriptParams[0])) | *PointerToScriptVariable;
      goto LABEL_11;
    case 2240:
    case 2241:
    case 2242:
      PointerToScriptVariable = CRunningScript::GetPointerToScriptVariable(this, 2u);
      CRunningScript::CollectParameters(v2, 1);
      goto LABEL_10;
    case 2243:
    case 2244:
    case 2245:
      PointerToScriptVariable = CRunningScript::GetPointerToScriptVariable(this, 1u);
      CRunningScript::CollectParameters(v2, 1);
LABEL_10:
      v7 = *PointerToScriptVariable & ~(1 << SLOBYTE(ScriptParams[0]));
LABEL_11:
      *PointerToScriptVariable = v7;
      return 0;
    case 2246:
      CRunningScript::CollectParameters(this, 2);
      v4 = 0;
      *(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1164] = *(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1164] & 0xE7FFFFFF | ((ScriptParams[1] & 3) << 27);
      return v4;
    case 2247:
      CRunningScript::CollectParameters(this, 4);
      v4 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v46 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v46 = 0;
      }
      CRunningScript::SetCharCoordinates(
        v2,
        v46,
        *(float *)&ScriptParams[1],
        *(float *)&ScriptParams[2],
        *(float *)&ScriptParams[3],
        0,
        1);
      return v4;
    case 2248:
      CRunningScript::CollectParameters(this, 2);
      CShopping::AddPriceModifier(ScriptParams[0], ScriptParams[1]);
      return 0;
    case 2249:
      CRunningScript::CollectParameters(this, 1);
      CShopping::RemovePriceModifier(ScriptParams[0]);
      return 0;
    case 2250:
      CTheZones::InitZonesPopulationSettings();
      return 0;
    case 2251:
      CRunningScript::CollectParameters(this, 4);
      v4 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v47 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v47 = 0;
      }
      v116 = *(_DWORD *)v47;
      *((_DWORD *)v47 + 267) |= 0x200000u;
      (*(void (__fastcall **)(uint8 *))(v116 + 172))(v47);
      return v4;
    case 2256:
      IsCutsceneSkipButtonBeingPressed = CCutsceneMgr::IsCutsceneSkipButtonBeingPressed();
LABEL_201:
      LOBYTE(v5) = IsCutsceneSkipButtonBeingPressed;
LABEL_202:
      v113 = v2;
      goto LABEL_203;
    case 2257:
      pPoint = CCutsceneMgr::ms_cutsceneOffset;
      *(CVector *)ScriptParams = CCutsceneMgr::ms_cutsceneOffset;
      v49 = 3;
      goto LABEL_254;
    case 2258:
      CRunningScript::CollectParameters(this, 2);
      v4 = 0;
      *(_DWORD *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][352] = ScriptParams[1];
      return v4;
    case 2259:
      v50 = CPopCycle::m_nCurrentZoneType;
      goto LABEL_123;
    case 2260:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      LOBYTE(pos._vptr$CEvent) = 0;
      if ( strcasecmp((const char *)pStringToFill, "DUMMY") )
        strcpy((char *)&pos, (const char *)pStringToFill);
      CRunningScript::CollectParameters(v2, 7);
      v4 = 0;
      ScriptParams[0] = CMenuSystem::CreateNewMenu(
                          0,
                          (unsigned __int8 *)&pos,
                          *(float *)ScriptParams * (float)((float)RsGlobal.screenWidth / 640.0),
                          *(float *)&ScriptParams[1] * (float)((float)RsGlobal.screenHeight / 448.0),
                          *(float *)&ScriptParams[2] * (float)((float)RsGlobal.screenWidth / 640.0),
                          LOBYTE(ScriptParams[3]),
                          ScriptParams[4],
                          LOBYTE(ScriptParams[5]),
                          ScriptParams[6]);
      CRunningScript::StoreParameters(v2, 1);
      return v4;
    case 2262:
      CRunningScript::CollectParameters(this, 3);
      CMenuSystem::SetColumnOrientation(ScriptParams[0], ScriptParams[1], ScriptParams[2]);
      return 0;
    case 2263:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CMenuSystem::CheckForSelected(ScriptParams[0]);
      goto LABEL_253;
    case 2264:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CMenuSystem::CheckForAccept(ScriptParams[0]);
      goto LABEL_253;
    case 2265:
      CRunningScript::CollectParameters(this, 3);
      CMenuSystem::ActivateOneItem(ScriptParams[0], ScriptParams[1], ScriptParams[2]);
      return 0;
    case 2266:
      CRunningScript::CollectParameters(this, 1);
      CMenuSystem::SwitchOffMenu(ScriptParams[0]);
      return 0;
    case 2267:
      CRunningScript::CollectParameters(this, 2);
      ScriptBrainName_2[0] = 0;
      LOBYTE(v130) = ScriptParams[0];
      LOBYTE(v129) = ScriptParams[1];
      CRunningScript::ReadTextLabelFromScript(v2, pStringToFill, 8u);
      if ( strcasecmp((const char *)pStringToFill, "DUMMY") )
        strcpy(ScriptBrainName_2, (const char *)pStringToFill);
      TextLabel[2] = 0;
      CRunningScript::ReadTextLabelFromScript(v2, &TextLabel2[2], 8u);
      if ( strcasecmp((const char *)&TextLabel2[2], "DUMMY") )
        strcpy((char *)&TextLabel[2], (const char *)&TextLabel2[2]);
      v51 = 0;
      LOBYTE(pos.m_iTaskType) = 0;
      LOBYTE(pos._vptr$CEvent) = 0;
      LOBYTE(pos.m_pEntity) = 0;
      Item5[0] = 0;
      Item6[0] = 0;
      Item7[0] = 0;
      Item8[0] = 0;
      Item9[0] = 0;
      Item10[0] = 0;
      Item11[0] = 0;
      Item12[0] = 0;
      do
      {
        CRunningScript::ReadTextLabelFromScript(v2, v145, 8u);
        if ( strcasecmp((const char *)v145, "DUMMY") )
          strcpy((char *)&pos + v51, (const char *)v145);
        v51 += 10;
      }
      while ( v51 != 110 );
      CMenuSystem::InsertMenu(
        (uint8)v130,
        (uint8)v129,
        ScriptBrainName_2,
        &TextLabel[2],
        (unsigned __int8 *)&pos,
        (unsigned __int8 *)&pos.m_iTaskType,
        (unsigned __int8 *)&pos.m_pEntity,
        Item5,
        Item6,
        Item7,
        Item8,
        Item9,
        Item10,
        Item11,
        Item12);
      return 0;
    case 2268:
      CRunningScript::CollectParameters(this, 4);
      v52 = 0;
      v53 = *(_QWORD *)ScriptParams;
      pos._vptr$CEvent = (int (**)(void))ScriptParams[1];
      pos.m_iAccumulatedTime = ScriptParams[2];
      v54 = CEntryExitManager::FindNearestEntryExit((const CVector2D *)&pos, *(float *)&ScriptParams[3], 0);
      if ( (CEntryExitManager::mp_poolEntryExits->m_aFlags[v54] & 0x80u) == 0 )
        v52 = (CEntryExit *)CEntryExitManager::mp_poolEntryExits->m_aStorage[v54];
      CRadar::SetBlipEntryExit(v53, v52);
      return 0;
    case 2269:
      CRunningScript::CollectParameters(this, 1);
      v38 = &CGameLogic::bPenaltyForDeathApplies;
      goto LABEL_180;
    case 2270:
      CRunningScript::CollectParameters(this, 1);
      v38 = CGameLogic::bPenaltyForArrestApplies;
      goto LABEL_180;
    case 2271:
      CRunningScript::CollectParameters(this, 5);
      v55 = &CRestart::ExtraHospitalRestartCoors;
      v56 = &CRestart::ExtraHospitalRestartRadius;
      v57 = &CRestart::ExtraHospitalRestartHeading;
      goto LABEL_121;
    case 2272:
      CRunningScript::CollectParameters(this, 5);
      v55 = &CRestart::ExtraPoliceStationRestartCoors;
      v56 = (float *)&CRestart::ExtraPoliceStationRestartRadius;
      v57 = (float *)&CRestart::ExtraPoliceStationRestartHeading;
LABEL_121:
      v58 = *v55;
      v59 = *(_DWORD **)v56;
      v60 = *(_QWORD *)&ScriptParams[2];
      *(_QWORD *)&TextLabel[2] = *(_QWORD *)ScriptParams;
      v4 = 0;
      v61 = *(Int32 **)v57;
      v62 = *(_QWORD *)ScriptParams;
      v63 = ScriptParams[4];
      LODWORD(v58->z) = ScriptParams[2];
      *v59 = HIDWORD(v60);
      *v61 = v63;
      *(_QWORD *)&v58->x = v62;
      v149 = v60;
      return v4;
    case 2273:
      v50 = &CTagManager::ms_numTagged;
LABEL_123:
      ScriptParams[0] = **v50;
      goto LABEL_253;
    case 2274:
      ScriptParams[0] = (int)(float)(CGangWars::TerritoryUnderControlPercentage * 100.0);
      goto LABEL_253;
    case 2275:
    case 2276:
      CRunningScript::ObjectInAngledAreaCheckCommand(this, CurrCommand);
      return 0;
    case 2277:
      CRunningScript::CollectParameters(this, 4);
      v64 = CPools::ms_pPedPool;
      v65 = *(float *)&ScriptParams[3];
      *(_DWORD *)&TextLabel[2] = ScriptParams[0];
      *(_DWORD *)&TextLabel[6] = ScriptParams[1];
      v149 = ScriptParams[2];
      v66 = CPools::ms_pPedPool->m_nSize;
      if ( v66 )
      {
        v67 = *(float *)ScriptParams;
        v68 = *(float *)&ScriptParams[2];
        v69 = *(float *)&ScriptParams[1];
        v70 = v66 - 1;
        v71 = 1996 * v66 - 900;
        v129 = (CPed *)-1;
        while ( 1 )
        {
          if ( (v64->m_aFlags[v70] & 0x80u) == 0 )
          {
            v72 = v64->m_aStorage;
            v73 = &(*v72)[v71];
            if ( &(*v72)[v71] != (uint8 *)&elf_hash_bucket[211] && (*v72)[v71] == 1 )
            {
              v74 = (int)&(*v72)[v71 - 1096];
              v75 = (*(_BYTE *)(v74 + 29) & 8) != 0;
              if ( (*(_BYTE *)(v74 + 29) & 8) == 0 )
                v75 = (v73[64] & 8) != 0;
              if ( !v75 )
              {
                v130 = (CPed *)(v73 - 1096);
                if ( !CRunningScript::IsPedDead(v2, (CPed *)(v73 - 1096))
                  && !CPedGroups::GetPedsGroup(v130)
                  && !(v73[70] >> 7) )
                {
                  v76 = (CVector *)*((_DWORD *)v73 - 269);
                  v77 = v76 + 4;
                  if ( !v76 )
                    v77 = (CVector *)(v74 + 4);
                  pPoint = *v77;
                  if ( sqrtf(
                         (float)((float)((float)(pPoint.x - v67) * (float)(pPoint.x - v67))
                               + (float)((float)(pPoint.y - v69) * (float)(pPoint.y - v69)))
                       + (float)((float)(pPoint.z - v68) * (float)(pPoint.z - v68))) < v65 )
                    v129 = (CPed *)(CPools::ms_pPedPool->m_aFlags[-1093107909
                                                                * (((char *)v130
                                                                  - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)v130 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)));
                }
              }
            }
          }
          if ( !v70 )
            break;
          --v70;
          v64 = CPools::ms_pPedPool;
          v71 -= 1996;
        }
        v27 = (Int32)v129;
        if ( (int)v129 >= 0 )
        {
          v78 = CPools::ms_pPedPool->m_aFlags[(unsigned int)v129 >> 8] == (unsigned __int8)v129 ? (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)v129 >> 8] : 0;
          CPed::SetCharCreatedBy(v78, 2u);
          ++CPopulation::ms_nTotalMissionPeds;
          if ( v2->IsThisAMissionScript )
            CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, (Int32)v129, 2u);
        }
      }
      else
      {
        v27 = -1;
      }
LABEL_252:
      ScriptParams[0] = v27;
      goto LABEL_253;
    case 2278:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v79 = (CPlane *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v79 = 0;
      }
      if ( ScriptParams[1] )
        CPlane::SetGearUp(v79);
      else
        CPlane::SetGearDown(v79);
      return 0;
    case 2279:
      CRunningScript::CollectParameters(this, 1);
      v38 = (char **)&CEntryExitManager::ms_bDisabled;
      goto LABEL_180;
    case 2280:
      CRunningScript::CollectParameters(this, 1);
      v80 = ScriptParams[0];
      CRunningScript::ReadTextLabelFromScript(v2, &TextLabel2[2], 8u);
      if ( v80 <= -1 )
        v80 = CTheScripts::UsedObjectArray[-v80].Index;
      v81 = CModelInfo::ms_modelInfoPtrs[v80];
      v82 = (*((int (__fastcall **)(CBaseModelInfo *))v81->_vptr$CBaseModelInfo + 15))(v81);
      if ( v82 != CAnimManager::GetAnimationBlockIndex(&TextLabel2[2]) )
      {
        (*((void (__fastcall **)(CBaseModelInfo *, Char *))v81->_vptr$CBaseModelInfo + 13))(v81, &TextLabel2[2]);
        (*((void (__fastcall **)(CBaseModelInfo *))v81->_vptr$CBaseModelInfo + 14))(v81);
      }
      CTheScripts::AddToListOfSpecialAnimGroupsAttachedToCharModels(v80, &TextLabel2[2]);
      return 0;
    case 2281:
      CRunningScript::CollectParameters(this, 2);
      v4 = 0;
      v83 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v84 = *((_DWORD *)v83 + 81);
      v85 = v84 & 0xFFFFDFFF;
      if ( ScriptParams[1] )
        v85 = v84 | 0x2000;
      *((_DWORD *)v83 + 81) = v85;
      return v4;
    case 2282:
      CRunningScript::CollectParameters(this, 1);
      v4 = 0;
      CPopulation::m_bDontCreateRandomGangMembers = ScriptParams[0] == 0;
      return v4;
    case 2283:
      CRunningScript::CollectParameters(this, 7);
      v86 = ScriptParams[6];
      *(_DWORD *)&TextLabel[2] = ScriptParams[0];
      *(_DWORD *)&TextLabel[6] = ScriptParams[1];
      v149 = ScriptParams[2];
      pPoint = *(CVector *)&ScriptParams[3];
      *(_DWORD *)&pos.m_bIsPersistent = ScriptParams[5];
      *(_QWORD *)&pos._vptr$CEvent = *(_QWORD *)&pPoint.x;
      v87 = CVector::NormaliseAndMag((CVector *)&pos);
      v4 = 0;
      memset(&Item2_4, 0, sizeof(Item2_4));
      Fx_c::AddSparks(&g_fx, (CVector *)&TextLabel[2], (CVector *)&pos, v87, v86, Item2_4, 1, 0.4, 1.0);
      return v4;
    case 2284:
      CRunningScript::CollectParameters(this, 1);
      v29 = SBYTE1(CModelInfo::ms_modelInfoPtrs[*(__int16 *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][38]][1].m_pColModel);
LABEL_160:
      ScriptParams[0] = v29;
LABEL_253:
      this = v2;
      v49 = 1;
      goto LABEL_254;
    case 2285:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v88 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        if ( v88 )
          CConversations::RemoveConversationForPed(v88);
      }
      return 0;
    case 2286:
    case 2287:
      CRunningScript::CollectParameters(this, 3);
      v8 = *(_QWORD *)ScriptParams;
      v9 = ScriptParams[2];
      CRunningScript::ReadTextLabelFromScript(v2, pStringToFill, 8u);
      strcpy(v132, (const char *)pStringToFill);
      if ( CurrCommand == 2287 )
      {
        CRunningScript::CollectParameters(v2, 2);
        CMenuSystem::InsertOneMenuItemWithNumber(
          v8,
          BYTE4(v8),
          v9,
          (unsigned __int8 *)v132,
          ScriptParams[0],
          ScriptParams[1]);
      }
      else if ( CurrCommand == 2286 )
      {
        CRunningScript::CollectParameters(v2, 1);
        CMenuSystem::InsertOneMenuItemWithNumber(v8, BYTE4(v8), v9, (unsigned __int8 *)v132, ScriptParams[0], -1);
      }
      return 0;
    case 2288:
      CRunningScript::ReadTextLabelFromScript(this, v142, 8u);
      CRunningScript::ReadTextLabelFromScript(v2, (Char *)&pos, 8u);
      CCutsceneMgr::AppendToNextCutscene(v142, (const unsigned __int8 *)&pos);
      return 0;
    case 2289:
      CRunningScript::CollectParameters(this, 3);
      pPoint = *(CVector *)ScriptParams;
      SmallestZoneForPosition = CTheZones::FindSmallestZoneForPosition(&pPoint, 1u);
      v90 = (char *)CRunningScript::GetPointerToScriptVariable(v2, 2u);
      strncpy(v90, (const char *)SmallestZoneForPosition, 8u);
      return 0;
    case 2290:
      CRunningScript::CollectParameters(this, 2);
      v40 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v91 = *((_DWORD *)v40 + 268);
      v42 = v91 & 0xFFFFBFFF;
      if ( ScriptParams[1] )
        v42 = v91 | 0x4000;
LABEL_170:
      *((_DWORD *)v40 + 268) = v42;
      return 0;
    case 2291:
      CRunningScript::CollectParameters(this, 2);
      v4 = 0;
      v92 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v93 = *((_DWORD *)v92 + 267);
      v94 = v93 & 0xFFFFFF7F;
      if ( ScriptParams[1] )
        v94 = v93 | 0x80;
      *((_DWORD *)v92 + 267) = v94;
      return v4;
    case 2292:
      CRunningScript::CollectParameters(this, 1);
      v95 = ScriptParams[0];
      FindPlayerPed(-1)->m_pPlayerData->m_nScriptLimitToGangSize = v95;
      p_m_membership = &CPedGroups::ms_groups[FindPlayerPed(-1)->m_pPlayerData->m_PlayerGroup].m_membership;
      v97 = CPedGroupMembership::CountMembersExcludingLeader(p_m_membership);
      v98 = v97 - FindPlayerPed(-1)->m_pPlayerData->m_nScriptLimitToGangSize;
      if ( v98 >= 1 )
        CPedGroupMembership::RemoveNFollowers(p_m_membership, v98);
      return 0;
    case 2293:
      PlayerPed = FindPlayerPed(-1);
      CPlayerPed::MakePlayerGroupDisappear(PlayerPed);
      return 0;
    case 2294:
      v100 = FindPlayerPed(-1);
      CPlayerPed::MakePlayerGroupReappear(v100);
      return 0;
    case 2295:
      CRunningScript::CollectParameters(this, 2);
      v101 = ScriptParams[1];
      v102 = &CWorld::Players[ScriptParams[0]];
      TextureDependency = CClothes::GetTextureDependency(ScriptParams[1]);
      m_pClothes = v102->PlayerPedData.m_pClothes;
      ScriptParams[0] = m_pClothes->texturesKeyArray[v101];
      v105 = m_pClothes->modelsKeyArray[TextureDependency];
      v49 = 2;
      ScriptParams[1] = v105;
      this = v2;
LABEL_254:
      CRunningScript::StoreParameters(this, v49);
      return 0;
    case 2296:
      CRunningScript::CollectParameters(this, 1);
      v38 = &CStats::bShowUpdateStats;
LABEL_180:
      v4 = 0;
      **v38 = ScriptParams[0] != 0;
      return v4;
    case 2297:
      v106 = 2;
      goto LABEL_183;
    case 2298:
      v106 = 1;
LABEL_183:
      v107 = CRunningScript::GetPointerToScriptVariable(this, v106);
      CRunningScript::ReadTextLabelFromScript(v2, ScriptBrainName_2, 0x10u);
      v108 = strncmp((const char *)v107, ScriptBrainName_2, 0x10u);
      IsPlayerInPositionForConversation = 0;
      v4 = 0;
      if ( !v108 )
        IsPlayerInPositionForConversation = 1;
LABEL_189:
      CRunningScript::UpdateCompareFlag(v2, IsPlayerInPositionForConversation);
      return v4;
    case 2299:
      CRunningScript::CollectParameters(this, 2);
      CRadar::SetCoordBlipAppearance(ScriptParams[0], ScriptParams[1]);
      return 0;
    default:
      return -1;
  }
}
// 339414: variables would overlap: ^F8.12 and stkvar "ScriptBrainName" ^F6.10(has user info)
// FC: using guessed type int elf_hash_bucket[16411];
// 676284: using guessed type char *CGameLogic::bPenaltyForArrestApplies[2];
// 6769C4: using guessed type float CRestart::ExtraHospitalRestartHeading;
// 676A24: using guessed type CVector *CRestart::ExtraHospitalRestartCoors;
// 676D14: using guessed type float CRestart::ExtraHospitalRestartRadius;
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 677038: using guessed type float *CRestart::ExtraPoliceStationRestartHeading;
// 677DD0: using guessed type CStreamingInfo (*CStreaming::ms_aInfoForModel)[26316];
// 677FC0: using guessed type int *CTagManager::ms_numTagged;
// 67831C: using guessed type CVector *CRestart::ExtraPoliceStationRestartCoors;
// 6784B4: using guessed type char *CGangWars::bCanTriggerGangWarWhenOnAMission[2];
// 6784D4: using guessed type char *CGameLogic::bPenaltyForDeathApplies;
// 678AD8: using guessed type int *CPopCycle::m_nCurrentZoneType[5];
// 679678: using guessed type char *CStats::bShowUpdateStats;
// 6797E8: using guessed type float *CRestart::ExtraPoliceStationRestartRadius;
// 339414: using guessed type unsigned __int8 var_EA[10];
// 339414: using guessed type unsigned __int8 var_E0[10];
// 339414: using guessed type unsigned __int8 var_D6[10];
// 339414: using guessed type unsigned __int8 var_CC[10];
// 339414: using guessed type unsigned __int8 var_C2[10];
// 339414: using guessed type unsigned __int8 var_B8[10];
// 339414: using guessed type unsigned __int8 var_AE[10];
// 339414: using guessed type unsigned __int8 var_A4[16];

//----- (0033ADBC) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
Int8 __fastcall CRunningScript::ProcessCommands2300To2399(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  float32x2_t v6; // d5
  uint8x8_t v7; // d16
  Int8 v10; // r5
  float v11; // r8
  float v12; // s16
  float v13; // s18
  float v14; // s20
  UInt32 v15; // r6
  unsigned __int8 v16; // r4
  char v17; // r0
  char v18; // r5
  CRunningScript *v19; // r0
  int v20; // r1
  uint8 *v21; // r0
  Int32 v22; // r0
  char HasPlayerBought; // r0
  uint8 *v24; // r0
  Bool8 v25; // r4
  uint8 *v26; // r0
  Int32 ZoneByLabelAndReturnIndex; // r0
  Bool8 v28; // r6
  CRunningScript *started; // r0
  Int16 v30; // r1
  uint8 *v31; // r1
  int v32; // r2
  unsigned int v33; // r3
  char v34; // r1
  uint8 *v35; // r1
  Int32 v36; // r0
  __int64 v37; // kr08_8
  int32 Index; // r5
  float v39; // s16
  float v40; // s8
  float32x2_t v41; // d1
  float v42; // r2
  float v43; // s8
  float32x2_t v44; // d0
  float v45; // r2
  char v46; // r2
  char v47; // r5
  char v48; // r0
  char v49; // r0
  Int32 ProperIndexFromIndexUsedByScript; // r1
  int32 v51; // r0
  int32 ActualScriptThingIndex; // r0
  CPed *Member; // r0
  Int32 BeatTrackStatus; // r0
  int WaterLevel; // r0
  char v56; // r0
  char v57; // r0
  char v58; // r0
  float v59; // s0
  float *p_m_vectorMoveEndTime; // r0
  bool v61; // r1
  char v62; // r2
  float32x4_t v63; // q4
  __int64 v64; // r8
  float screenWidth; // s0
  float32x4_t v66; // q2
  int v67; // r0
  intro_script_rectangle *v68; // r0
  intro_script_rectangle *v69; // r0
  UInt16 v70; // r0
  intro_script_rectangle *v71; // r1
  uint8 *v72; // r0
  int GarageIndex; // r0
  CGarage *v74; // r0
  char v75; // r1
  char v76; // r0
  uint8 *v77; // r1
  unsigned int v78; // r0
  char v79; // r0
  unsigned int v80; // r0
  CPedGroup *v81; // r0
  char v82; // r1
  int32 v83; // r0
  char v84; // r1
  script_searchlight_struct *v85; // r0
  CPed *v86; // r1
  Int32 v87; // r0
  CPed *v88; // r0
  __int64 v89; // kr20_8 OVERLAPPED
  CPed *v90; // r2
  uint8 *v91; // r4
  int v92; // r0
  float v93; // s2
  float v94; // r2
  float v95; // r3
  __int64 v96; // r0
  CPed *v97; // r0
  CPed *v98; // r0
  CPed *v99; // r0
  Int32 v100; // r0
  FxPrtMult_c *v101; // r0
  CAutomobile *v102; // r4
  uint8 *v103; // r0
  UInt16 v104; // r0
  unsigned int v105; // r0
  int v106; // r2
  unsigned int *v107; // r1
  unsigned int v108; // r2
  Int32 v109; // r3
  unsigned int v110; // r2
  CEntity *v111; // r1
  char *PointerToScriptVariable; // r0
  const char *v113; // r1
  uint32 v114; // r5
  eDoors v115; // r6
  uint8 *v116; // r3
  uint8 *v117; // r0
  CDoor *p_ChassisDoor; // r4
  CPedAttractorManager *PedAttractorManager; // r0
  CPed *PedUsingEffect; // r0
  CRunningScript *v121; // r0
  Int16 v122; // r1
  int v124; // r2
  int v125; // r1
  __int64 bSetSmoothEnds; // [sp+0h] [bp-90h]
  RwV3d_0 pos; // [sp+18h] [bp-78h] BYREF
  CVector pFrom; // [sp+24h] [bp-6Ch] BYREF
  float pWaterZ; // [sp+30h] [bp-60h] BYREF
  FxPrtMult_c v130; // [sp+34h] [bp-5Ch] BYREF
  Char pStringToFill[4]; // [sp+50h] [bp-40h] BYREF
  CVector v132; // 0:r0.12

  v10 = 0;
  switch ( CurrCommand )
  {
    case 2300:
    case 2306:
    case 2307:
    case 2314:
    case 2315:
    case 2321:
    case 2331:
    case 2337:
    case 2343:
    case 2346:
    case 2348:
    case 2349:
    case 2354:
    case 2357:
    case 2360:
    case 2364:
    case 2367:
    case 2371:
      return v10;
    case 2301:
      CRunningScript::CollectParameters(this, 1);
      v17 = ScriptParams[0];
      if ( ScriptParams[0] )
        v17 = 1;
      CPostEffects::ScriptHeatHazeFXSwitch(v17);
      return 0;
    case 2302:
      v18 = 0;
      if ( CTouchInterface::m_pWidgets[162]
        && CWidgetHelpText::GetNumQueuedMessages((CWidgetHelpText *)CTouchInterface::m_pWidgets[162]) > 0 )
      {
        v18 = 1;
      }
      v19 = this;
      LOBYTE(v20) = v18;
      goto LABEL_214;
    case 2303:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0])
        && (v21 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8]) != 0 )
      {
        v22 = (char)v21[332];
        if ( (ScriptParams[1] | 1) == 57 )
        {
          HasPlayerBought = CDarkel::CheckDamagedWeaponType(v22, ScriptParams[1]);
LABEL_212:
          LOBYTE(v20) = HasPlayerBought;
        }
        else
        {
          LOBYTE(v20) = ScriptParams[1] == v22;
        }
      }
      else
      {
        LOBYTE(v20) = 0;
      }
LABEL_213:
      v19 = this;
LABEL_214:
      CRunningScript::UpdateCompareFlag(v19, v20);
      return 0;
    case 2304:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0
        || CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
      {
        return 0;
      }
      v24 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v10 = 0;
      if ( v24 )
        v24[332] = -1;
      return v10;
    case 2305:
      CRunningScript::CollectParameters(this, 2);
      v25 = 0;
      v10 = 0;
      if ( !ScriptParams[1] )
        v25 = 1;
      CPad::GetPad(ScriptParams[0])->bDisablePlayerJump = v25;
      return v10;
    case 2308:
      CRunningScript::CollectParameters(this, 1);
      CHudColours::GetRGBA((CRGBA *)&v130, &HudColour, ScriptParams[0]);
      v7.n64_u32[0] = LODWORD(v130.m_red);
      *(uint32x4_t *)ScriptParams = vmovl_u16((uint16x4_t)vmovl_u8(v7).n128_u64[0]);
      goto LABEL_253;
    case 2309:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v26 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v26 = 0;
      }
      if ( ScriptParams[1] )
      {
        CObject::LockDoor((CObject *)v26);
        return 0;
      }
      v124 = *((_DWORD *)v26 + 17);
      v10 = 0;
      v125 = *(_DWORD *)v26;
      *((_DWORD *)v26 + 21) = 0;
      *((_DWORD *)v26 + 22) = 0;
      *((_DWORD *)v26 + 23) = 0;
      *((_DWORD *)v26 + 17) = v124 & 0xFFFFFFF3;
      (*(void (__fastcall **)(uint8 *, int))(v125 + 20))(v26, 1);
      return v10;
    case 2310:
      CRunningScript::CollectParameters(this, 2);
      v10 = 0;
      *(_DWORD *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][144] = ScriptParams[1];
      return v10;
    case 2311:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = *(_DWORD *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][144];
      goto LABEL_245;
    case 2312:
      CRunningScript::CollectParameters(this, 2);
      v10 = 0;
      *(_DWORD *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][148] = ScriptParams[1];
      return v10;
    case 2313:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = *(_DWORD *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][148];
      goto LABEL_245;
    case 2316:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      ZoneByLabelAndReturnIndex = CTheZones::FindZoneByLabelAndReturnIndex(pStringToFill, ZONE_INFORMATION);
      CGangWars::SetSpecificZoneToTriggerGangWar(ZoneByLabelAndReturnIndex);
      return 0;
    case 2317:
      CGangWars::ClearSpecificZonesToTriggerGangWar();
      return 0;
    case 2318:
      CRunningScript::CollectParameters(this, 2);
      CMenuSystem::SetActiveMenuItem(ScriptParams[0], ScriptParams[1]);
      return 0;
    case 2319:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CStreamedScripts::GetProperIndexFromIndexUsedByScript(
                          &CTheScripts::StreamedScripts,
                          ScriptParams[0]);
      CStreaming::SetMissionDoesntRequireModel(ScriptParams[0] + 26230);
      return 0;
    case 2320:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CStreamedScripts::GetProperIndexFromIndexUsedByScript(
                          &CTheScripts::StreamedScripts,
                          ScriptParams[0]);
      CStreaming::RemoveModel(ScriptParams[0] + 26230);
      return 0;
    case 2322:
      CRunningScript::CollectParameters(this, 3);
      v28 = ScriptParams[0];
      CTheScripts::MessageCentre = ScriptParams[1];
      v10 = 0;
      CTheScripts::MessageWidth = ScriptParams[2];
      if ( ScriptParams[0] )
        v28 = 1;
      CTheScripts::bUseMessageFormatting = v28;
      return v10;
    case 2323:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CStreamedScripts::GetProperIndexFromIndexUsedByScript(
                          &CTheScripts::StreamedScripts,
                          ScriptParams[0]);
      started = CStreamedScripts::StartNewStreamedScript(&CTheScripts::StreamedScripts, ScriptParams[0]);
      CRunningScript::ReadParametersForNewlyStartedScript(this, started);
      return 0;
    case 2324:
      v30 = 1;
      goto LABEL_120;
    case 2325:
      CWeather::SetWeatherToAppropriateTypeNow();
      return 0;
    case 2326:
      CRunningScript::CollectParameters(this, 2);
      v10 = 0;
      v31 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v32 = *((_DWORD *)v31 + 81);
      v33 = v32 & 0xFFFBFFFF;
      if ( ScriptParams[1] )
        v33 = v32 | 0x40000;
      *((_DWORD *)v31 + 81) = v33;
      return v10;
    case 2327:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      CRunningScript::CollectParameters(this, 1);
      v34 = ScriptParams[0];
      if ( ScriptParams[0] )
        v34 = 1;
      CAudioZones::SwitchAudioZone(pStringToFill, v34);
      return 0;
    case 2328:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v35 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v35 = 0;
      }
      v105 = *((_DWORD *)v35 + 268);
      v106 = *((_DWORD *)v35 + 267);
      v107 = (unsigned int *)(v35 + 1068);
      if ( (v105 & 0x200) != 0 )
      {
        v110 = v106 & 0xFFFFFFEF;
      }
      else
      {
        v108 = v106 & 0xFFFFFFEF;
        v109 = ScriptParams[1];
        if ( ScriptParams[1] )
          v109 = 1;
        v110 = v108 | (16 * v109);
      }
      *v107 = v110;
      v107[1] = v105;
      return 0;
    case 2329:
      CRunningScript::CollectParameters(this, 2);
      v10 = 0;
      v36 = ScriptParams[1];
      if ( ScriptParams[1] )
        v36 = 1;
      *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1068] = *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1068] & 0xFFFFFFBF | (v36 << 6);
      return v10;
    case 2330:
      CRunningScript::GetPointerToScriptVariable(this, 2u);
      return 0;
    case 2332:
      CRunningScript::CollectParameters(this, 5);
      v37 = *(_QWORD *)ScriptParams;
      pWaterZ = *(float *)&ScriptParams[2];
      Index = ScriptParams[4];
      v39 = *(float *)&ScriptParams[3];
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&v130, 8u);
      *(_QWORD *)&pFrom.x = v37;
      pFrom.z = pWaterZ;
      if ( Index )
      {
        if ( Index <= -1 )
          Index = CTheScripts::UsedObjectArray[-Index].Index;
      }
      else
      {
        Index = -1;
      }
      pos.x = 0.0;
      *(_DWORD *)pStringToFill = 0;
      CAttractorScanner::GetClosestAttractorOfType(
        &pFrom,
        v39,
        Index,
        5,
        (const unsigned __int8 *)&v130,
        0,
        0,
        (C2dEffect **)&pos,
        (CEntity **)pStringToFill);
      ScriptParams[0] = -1;
      if ( LODWORD(pos.x) )
      {
        PedAttractorManager = GetPedAttractorManager();
        PedUsingEffect = CPedAttractorManager::GetPedUsingEffect(
                           PedAttractorManager,
                           (const C2dEffect *)LODWORD(pos.x),
                           *(const CEntity **)pStringToFill);
        if ( PedUsingEffect )
          ScriptParams[0] = CPools::ms_pPedPool->m_aFlags[-1093107909
                                                        * (((char *)PedUsingEffect
                                                          - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)PedUsingEffect - (char *)CPools::ms_pPedPool->m_aStorage) >> 2));
      }
      goto LABEL_245;
    case 2333:
      CRunningScript::CollectParameters(this, 6);
      v10 = 0;
      v3.n64_u32[0] = ScriptParams[0];
      v5.n64_u32[0] = ScriptParams[3];
      v4.n64_u32[0] = ScriptParams[1];
      v6.n64_u32[0] = ScriptParams[4];
      LODWORD(v40) = vmin_f32(v3, v5).n64_u32[0];
      v41.n64_u64[0] = vmax_f32(v3, v5).n64_u64[0];
      v2.n64_u32[0] = ScriptParams[2];
      v42 = v41.n64_f32[0];
      v41.n64_u32[0] = ScriptParams[5];
      CPathFind::SwitchRoadsOffInArea(
        &ThePaths,
        v40,
        v42,
        vmin_f32(v4, v6).n64_f32[0],
        vmax_f32(v4, v6).n64_f32[0],
        vmin_f32(v2, v41).n64_f32[0],
        vmax_f32(v2, v41).n64_f32[0],
        0,
        1,
        1);
      return v10;
    case 2334:
      CRunningScript::CollectParameters(this, 6);
      v10 = 0;
      v2.n64_u32[0] = ScriptParams[0];
      v5.n64_u32[0] = ScriptParams[3];
      v3.n64_u32[0] = ScriptParams[1];
      v6.n64_u32[0] = ScriptParams[4];
      LODWORD(v43) = vmin_f32(v2, v5).n64_u32[0];
      v44.n64_u64[0] = vmax_f32(v2, v5).n64_u64[0];
      v4.n64_u32[0] = ScriptParams[2];
      v45 = v44.n64_f32[0];
      v44.n64_u32[0] = ScriptParams[5];
      CPathFind::SwitchPedRoadsOffInArea(
        &ThePaths,
        v43,
        v45,
        vmin_f32(v3, v6).n64_f32[0],
        vmax_f32(v3, v6).n64_f32[0],
        vmin_f32(v4, v44).n64_f32[0],
        vmax_f32(v4, v44).n64_f32[0],
        0,
        1);
      return v10;
    case 2335:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][2528];
      goto LABEL_245;
    case 2336:
      CRunningScript::CollectParameters(this, 8);
      LODWORD(v130.m_red) = ScriptParams[3];
      *(_QWORD *)&v130.m_green = *(_QWORD *)&ScriptParams[4];
      pFrom = *(CVector *)ScriptParams;
      v46 = ScriptParams[7];
      if ( ScriptParams[7] )
        v46 = 1;
      CCamera::VectorTrackLinear(&TheCamera, (CVector *)&v130, &pFrom, (float)ScriptParams[6], v46);
      return 0;
    case 2338:
      CRunningScript::CollectParameters(this, 4);
      v47 = ScriptParams[3];
      if ( ScriptParams[3] )
        v47 = 1;
      CCamera::LerpFOV(&TheCamera, *(float *)ScriptParams, *(float *)&ScriptParams[1], (float)ScriptParams[2], v47);
      return 0;
    case 2339:
      CRunningScript::CollectParameters(this, 1);
      v48 = ScriptParams[0];
      if ( ScriptParams[0] )
        v48 = 1;
      CPlane::SwitchAmbientPlanes(v48);
      return 0;
    case 2340:
      CRunningScript::CollectParameters(this, 2);
      v49 = ScriptParams[0];
      if ( ScriptParams[0] )
        v49 = 1;
      CPostEffects::ScriptDarknessFilterSwitch(v49, ScriptParams[1]);
      return 0;
    case 2341:
      CCamera::InitialiseScriptableComponents(&TheCamera);
      return 0;
    case 2342:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CTheScripts::StreamedScripts.ScriptStructures[CStreamedScripts::GetProperIndexFromIndexUsedByScript(
                                                                        &CTheScripts::StreamedScripts,
                                                                        ScriptParams[0])].NumberOfUsers;
      goto LABEL_245;
    case 2344:
      CRunningScript::CollectParameters(this, 3);
      ScriptParams[0] = CStreamedScripts::GetProperIndexFromIndexUsedByScript(
                          &CTheScripts::StreamedScripts,
                          ScriptParams[0]);
      v10 = 0;
      CScriptsForBrains::AddNewScriptBrain(
        &CTheScripts::ScriptsForBrains,
        ScriptParams[0],
        ScriptParams[1],
        ScriptParams[2],
        0,
        -1,
        -1.0);
      return v10;
    case 2345:
      CRunningScript::CollectParameters(this, 5);
      ProperIndexFromIndexUsedByScript = CStreamedScripts::GetProperIndexFromIndexUsedByScript(
                                           &CTheScripts::StreamedScripts,
                                           ScriptParams[0]);
      LOWORD(v51) = ScriptParams[1];
      ScriptParams[0] = ProperIndexFromIndexUsedByScript;
      if ( ScriptParams[1] <= -1 )
        v51 = CTheScripts::UsedObjectArray[-ScriptParams[1]].Index;
      CScriptsForBrains::AddNewScriptBrain(
        &CTheScripts::ScriptsForBrains,
        ProperIndexFromIndexUsedByScript,
        v51,
        ScriptParams[2],
        1,
        ScriptParams[4],
        *(float *)&ScriptParams[3]);
      return 0;
    case 2347:
      CRunningScript::CollectParameters(this, 2);
      ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 8u);
      Member = CPedGroupMembership::GetMember(
                 &CPedGroups::ms_groups[ActualScriptThingIndex].m_membership,
                 ScriptParams[1]);
      if ( Member )
        BeatTrackStatus = CPools::ms_pPedPool->m_aFlags[-1093107909
                                                      * (((char *)Member - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)Member - (char *)CPools::ms_pPedPool->m_aStorage) >> 2));
      else
        BeatTrackStatus = -1;
      goto LABEL_240;
    case 2350:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[2] )
        WaterLevel = CWaterLevel::GetWaterLevel(*(float *)ScriptParams, *(float *)&ScriptParams[1], 0.0, &pWaterZ, 1, 0);
      else
        WaterLevel = CWaterLevel::GetWaterLevelNoWaves(
                       *(float *)ScriptParams,
                       *(float *)&ScriptParams[1],
                       0.0,
                       &pWaterZ,
                       0,
                       0);
      if ( !WaterLevel )
        pWaterZ = -1000.0;
      *(float *)ScriptParams = pWaterZ;
      goto LABEL_245;
    case 2351:
      CRunningScript::CollectParameters(this, 1);
      v10 = 0;
      v56 = ScriptParams[0];
      if ( ScriptParams[0] )
        v56 = 1;
      TheCamera.m_bPersistCamLookAt = v56;
      return v10;
    case 2352:
      CRunningScript::CollectParameters(this, 1);
      v10 = 0;
      v57 = ScriptParams[0];
      if ( ScriptParams[0] )
        v57 = 1;
      TheCamera.m_bPersistCamPos = v57;
      return v10;
    case 2353:
      CRunningScript::CollectParameters(this, 1);
      v10 = 0;
      v58 = ScriptParams[0];
      if ( ScriptParams[0] )
        v58 = 1;
      TheCamera.m_bPersistFOV = v58;
      return v10;
    case 2355:
      v59 = (float)CTimer::m_snTimeInMilliseconds;
      p_m_vectorMoveEndTime = &TheCamera.m_vectorMoveEndTime;
      goto LABEL_97;
    case 2356:
      v59 = (float)CTimer::m_snTimeInMilliseconds;
      p_m_vectorMoveEndTime = &TheCamera.m_vectorTrackEndTime;
LABEL_97:
      v61 = 0;
      v10 = 0;
      if ( *p_m_vectorMoveEndTime >= v59 )
        v61 = 1;
      goto LABEL_172;
    case 2358:
      CRunningScript::CollectParameters(this, 8);
      LODWORD(v130.m_red) = ScriptParams[3];
      *(_QWORD *)&v130.m_green = *(_QWORD *)&ScriptParams[4];
      pFrom = *(CVector *)ScriptParams;
      v62 = ScriptParams[7];
      if ( ScriptParams[7] )
        v62 = 1;
      CCamera::VectorMoveLinear(&TheCamera, (CVector *)&v130, &pFrom, (float)ScriptParams[6], v62);
      return 0;
    case 2359:
      CRunningScript::CollectParameters(this, 4);
      v63 = *(float32x4_t *)ScriptParams;
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v10 = 0;
      LOBYTE(v130.m_red) = 0;
      if ( strcasecmp((const char *)pStringToFill, "DUMMY") )
        strcpy((char *)&v130, (const char *)pStringToFill);
      LODWORD(v64) = 1;
      CRunningScript::CollectParameters(this, 1);
      screenWidth = (float)RsGlobal.screenWidth;
      HIDWORD(v64) = ScriptParams[0];
      v66.n128_f32[1] = (float)RsGlobal.screenHeight / 448.0;
      v67 = CTheScripts::NumberOfIntroRectanglesThisFrame;
      CTheScripts::IntroRectangles[CTheScripts::NumberOfIntroRectanglesThisFrame].eWindowType = WINDOW_HEADER_NO_TEXT;
      v68 = &CTheScripts::IntroRectangles[v67];
      v68->ScriptSpriteIndex = -1;
      v68->ScriptRectRotation = 0.0;
      v66.n128_f32[0] = screenWidth / 640.0;
      v66.n128_f32[2] = screenWidth / 640.0;
      v66.n128_u32[3] = v66.n128_u32[1];
      *(float32x4_t *)&v68->ScriptRectMinX = vmulq_f32(v63, v66);
      CRGBA::CRGBA((CRGBA *)&pFrom, 0, 0, 0, 0xBEu);
      v69 = &CTheScripts::IntroRectangles[CTheScripts::NumberOfIntroRectanglesThisFrame];
      v69->ScriptRectColour = (CRGBA)LODWORD(pFrom.x);
      strcpy((char *)v69->pTitle, (const char *)&v130);
      v70 = CTheScripts::NumberOfIntroRectanglesThisFrame + 1;
      v71 = &CTheScripts::IntroRectangles[CTheScripts::NumberOfIntroRectanglesThisFrame];
      *(_QWORD *)&v71->nAlignment = v64;
      v71->pMessage[0] = 0;
      CTheScripts::NumberOfIntroRectanglesThisFrame = v70;
      return v10;
    case 2361:
      CRunningScript::CollectParameters(this, 8);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v72 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v72 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v111 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v111 = 0;
      }
      pos = *(RwV3d_0 *)&ScriptParams[2];
      pFrom.x = (float)(*(float *)&ScriptParams[5] * 3.1416) / 180.0;
      pFrom.y = (float)(*(float *)&ScriptParams[6] * 3.1416) / 180.0;
      pFrom.z = (float)(*(float *)&ScriptParams[7] * 3.1416) / 180.0;
      CPhysical::AttachEntityToEntity(
        (int)v72,
        v111,
        ScriptParams[2],
        ScriptParams[3],
        ScriptParams[4],
        (_DWORD *)LODWORD(pFrom.x),
        SLODWORD(pFrom.y));
      return 0;
    case 2362:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      CRunningScript::CollectParameters(this, 1);
      GarageIndex = CGarages::FindGarageIndex(pStringToFill);
      if ( GarageIndex <= -1 )
        return 0;
      v10 = 0;
      v74 = &CGarages::aGarages[(__int16)GarageIndex];
      v75 = ScriptParams[0];
      if ( ScriptParams[0] )
        v75 = 1;
      v74->Flags = (CGarageFlags)(*(_BYTE *)&v74->Flags & 0x7F | (v75 << 7));
      return v10;
    case 2363:
      CRunningScript::CollectParameters(this, 2);
      v76 = ScriptParams[1];
      v77 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( ScriptParams[1] )
        v76 = 1;
      v78 = v76 & 1 | (2 * (*((_DWORD *)v77 + 292) >> 1));
      goto LABEL_137;
    case 2365:
      CRunningScript::CollectParameters(this, 1);
      v10 = 0;
      v79 = ScriptParams[0];
      if ( ScriptParams[0] )
        v79 = 1;
      TheCamera.m_bForceCinemaCam = v79;
      return v10;
    case 2366:
      v30 = 2;
LABEL_120:
      CRunningScript::CollectParameters(this, v30);
      return 0;
    case 2368:
      CRunningScript::CollectParameters(this, 2);
      v80 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 8u);
      if ( v80 > 7 )
        return 0;
      v10 = 0;
      v81 = &CPedGroups::ms_groups[v80];
      v82 = ScriptParams[1];
      if ( ScriptParams[1] )
        v82 = 1;
      v81->m_followLeader = v82;
      return v10;
    case 2369:
      CRunningScript::CollectParameters(this, 2);
      v83 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 2u);
      if ( v83 < 0 )
        return 0;
      v10 = 0;
      v84 = ScriptParams[1];
      v85 = &CTheScripts::ScriptSearchLightArray[v83];
      if ( ScriptParams[1] )
        v84 = 1;
      v85->bClipIfColliding = v84;
      return v10;
    case 2370:
      CRunningScript::CollectParameters(this, 1);
      HasPlayerBought = CShopping::HasPlayerBought(ScriptParams[0]);
      goto LABEL_212;
    case 2372:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v86 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v86 = 0;
      }
      CCamera::SetCameraDirectlyInFrontForFollowPed_ForAPed_CamOnAString(&TheCamera, v86);
      return 0;
    case 2373:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CWorld::Players[ScriptParams[0]].MaxArmour;
      goto LABEL_245;
    case 2374:
      CRunningScript::CollectParameters(this, 2);
      v87 = ScriptParams[1];
      v77 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( ScriptParams[1] )
        v87 = 1;
      v78 = *((_DWORD *)v77 + 292) & 0xFFFFFFFB | (4 * v87);
LABEL_137:
      *((_DWORD *)v77 + 292) = v78;
      return 0;
    case 2375:
      CRunningScript::CollectParameters(this, 2);
      v10 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v88 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v88 = 0;
      }
      ScriptParams[0] = CPed::Say(v88, ScriptParams[1], 0, 1.0, 0, 0, 0);
      goto LABEL_204;
    case 2376:
      CRunningScript::CollectParameters(this, 5);
      v10 = 0;
      v89 = *(_QWORD *)ScriptParams;
      pos = *(RwV3d_0 *)ScriptParams;
      bSetSmoothEnds = *(_QWORD *)&ScriptParams[1];
      CExplosion::AddExplosion(
        0,
        0,
        (eExplosionType)ScriptParams[3],
        *(CVector *)&v89,
        0,
        1u,
        *(float *)&ScriptParams[4],
        0);
      return v10;
    case 2377:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v90 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v90 = 0;
      }
      CAudioEngine::AttachMissionAudioToPed(&AudioEngine, LOBYTE(ScriptParams[0]) - 1, v90);
      return 0;
    case 2378:
      CRunningScript::CollectParameters(this, 2);
      CPickups::UpdateMoneyPerDay(ScriptParams[0], ScriptParams[1]);
      return 0;
    case 2379:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v91 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v91 = 0;
      }
      PointerToScriptVariable = (char *)CRunningScript::GetPointerToScriptVariable(this, 2u);
      v113 = (const char *)*((_DWORD *)v91 + 485);
      if ( v113 )
      {
        strcpy(PointerToScriptVariable, v113);
        return 0;
      }
      v10 = 0;
      *PointerToScriptVariable = 0;
      return v10;
    case 2380:
      CRunningScript::CollectParameters(this, 1);
      v92 = *(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1940];
      if ( v92 )
      {
        if ( *(_DWORD *)(v92 + 56) )
        {
          v93 = *(float *)(v92 + 44);
          v94 = *(float *)(v92 + 36);
          v95 = *(float *)(v92 + 32);
          LODWORD(v96) = v92 + 40;
          *((float *)&v96 + 1) = (float)(v93 * 3.1416) / 180.0;
        }
        else
        {
          v96 = (unsigned int)(v92 + 24);
          v95 = (float)(*(float *)(v96 + 8) + *(float *)(v96 + 16)) * 0.5;
          v94 = (float)(*(float *)(v96 + 12) + *(float *)(v96 + 20)) * 0.5;
        }
        LODWORD(v96) = *(_DWORD *)v96;
        *(float *)ScriptParams = v95;
        *(float *)&ScriptParams[1] = v94;
        *(_QWORD *)&ScriptParams[2] = v96;
      }
LABEL_253:
      v121 = this;
      v122 = 4;
      goto LABEL_246;
    case 2381:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v97 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v97 = 0;
      }
      HasPlayerBought = CPed::GetPedTalking(v97);
      goto LABEL_212;
    case 2382:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v98 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v98 = 0;
      }
      CPed::DisablePedSpeech(v98, ScriptParams[1]);
      return 0;
    case 2383:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v99 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v99 = 0;
      }
      CPed::EnablePedSpeech(v99);
      return 0;
    case 2384:
      CRunningScript::CollectParameters(this, 4);
      v10 = 0;
      pos = *(RwV3d_0 *)ScriptParams;
      CGameLogic::SetUpSkip(*(CVector *)ScriptParams, *(float *)&ScriptParams[3], 0, 0, 0);
      return v10;
    case 2385:
      v10 = 0;
      CGameLogic::ClearSkip(0);
      return v10;
    case 2386:
      CRunningScript::CollectParameters(this, 1);
      CAudioEngine::PreloadBeatTrack(&AudioEngine, ScriptParams[0]);
      return 0;
    case 2387:
      BeatTrackStatus = CAudioEngine::GetBeatTrackStatus(&AudioEngine);
      goto LABEL_240;
    case 2388:
      v10 = 0;
      CAudioEngine::PlayPreloadedBeatTrack(&AudioEngine, 0);
      return v10;
    case 2389:
      CAudioEngine::StopBeatTrack(&AudioEngine);
      return 0;
    case 2390:
      ScriptParams[0] = CStats::FindMaxNumberOfGroupMembers();
      goto LABEL_245;
    case 2391:
      CRunningScript::CollectParameters(this, 2);
      v10 = 0;
      v100 = ScriptParams[1];
      if ( ScriptParams[1] )
        v100 = 1;
      *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1072] = *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1072] & 0xFFFBFFFF | (v100 << 18);
      return v10;
    case 2392:
    case 2393:
    case 2394:
      CRunningScript::CollectParameters(this, 3);
      v11 = *(float *)&ScriptParams[2];
      v12 = *(float *)ScriptParams;
      v13 = *(float *)&ScriptParams[1];
      v14 = *(float *)&ScriptParams[2];
      pWaterZ = *(float *)&ScriptParams[2];
      if ( CurrCommand == 2393 )
      {
        v15 = MI_HORSESHOE;
        v104 = 242;
      }
      else
      {
        if ( CurrCommand == 2392 )
        {
          v15 = MI_PICKUP_CAMERA;
          CStats::IncrementStat(0xE8u, 1.0);
          v16 = 20;
          goto LABEL_184;
        }
        v15 = MI_OYSTER;
        v104 = 244;
      }
      CStats::IncrementStat(v104, 1.0);
      v16 = 3;
LABEL_184:
      if ( v14 <= -100.0 )
      {
        v11 = CWorld::FindGroundZForCoord(v12, v13) + 0.5;
        pWaterZ = v11;
      }
      *(_QWORD *)&v132.x = __PAIR64__(LODWORD(v13), LODWORD(v12));
      v10 = 0;
      v132.z = v11;
      ScriptParams[0] = CPickups::GenerateNewOne(v132, v15, v16, 0, 0, 0, 0);
LABEL_204:
      CRunningScript::StoreParameters(this, 1);
      return v10;
    case 2395:
      CRunningScript::CollectParameters(this, 1);
      v10 = 0;
      v61 = (*(_DWORD *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][28] & 0x40004) == 0;
LABEL_172:
      CRunningScript::UpdateCompareFlag(this, v61);
      return v10;
    case 2396:
      CRunningScript::CollectParameters(this, 12);
      pos = *(RwV3d_0 *)ScriptParams;
      pFrom = *(CVector *)&ScriptParams[3];
      FxPrtMult_c::FxPrtMult_c(
        &v130,
        *(float *)&ScriptParams[6],
        *(float *)&ScriptParams[7],
        *(float *)&ScriptParams[8],
        *(float *)&ScriptParams[9],
        *(float *)&ScriptParams[10],
        1.0,
        *(float *)&ScriptParams[11]);
      v10 = 0;
      FxSystem_c::AddParticle(g_fx.m_fxSysSmokeHuge, &pos, &pFrom, 0.0, v101, -1.0, 1.2, 0.6, 0);
      return v10;
    case 2397:
      CRunningScript::CollectParameters(this, 1);
      v20 = (*(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1168] >> 3) & 1;
      goto LABEL_213;
    case 2398:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v102 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v102 = 0;
      }
      v114 = ScriptParams[2];
      v115 = ScriptParams[1];
      if ( ScriptParams[1] > 5 )
      {
        p_ChassisDoor = &v102->ChassisDoor;
        if ( ScriptParams[3] >= 0 )
          CDoor::Open(p_ChassisDoor, (float)ScriptParams[3]);
        p_ChassisDoor->m_nDoorState = v114;
        return 0;
      }
      else
      {
        if ( ScriptParams[3] >= 0 )
          CDoor::Open(&v102->Door[ScriptParams[1]], (float)ScriptParams[3]);
        CDamageManager::SetDoorStatus(&v102->Damage, v115, v114);
        v10 = 0;
        CAutomobile::SetDoorDamage(v102, v115, 0);
      }
      return v10;
    case 2399:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v103 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v103 = 0;
      }
      v116 = &v103[24 * ScriptParams[1]];
      v117 = v103 + 1824;
      if ( ScriptParams[1] < 6 )
        v117 = v116 + 1484;
      BeatTrackStatus = *((_DWORD *)v117 + 3);
LABEL_240:
      ScriptParams[0] = BeatTrackStatus;
LABEL_245:
      v121 = this;
      v122 = 1;
LABEL_246:
      CRunningScript::StoreParameters(v121, v122);
      return 0;
    default:
      return -1;
  }
}
// 33BC4B: failed to expand linear variable kr20_8.8
// FC: using guessed type int elf_hash_bucket[16411];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0033C6EC) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands2400To2499(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  Int8 v6; // r6
  Int32 *PointerToScriptVariable; // r8
  Int32 *v8; // r9
  size_t v9; // r6
  int v10; // r0
  Bool8 v11; // r4
  Int32 v12; // r0
  uint8 *v13; // r1
  unsigned int v14; // r0
  Int32 NewMenu; // r0
  CTaskSimpleSwim *TaskSwim; // r0
  CTaskComplexFacial *TaskSecondary; // r0
  CTaskComplexFacial *v18; // r0
  uint8 *v19; // r1
  char v20; // r0
  CVehicle *v21; // r5
  CPed *v22; // r1
  bool v23; // r1
  const CVehicle *v24; // r5
  int32 v25; // r5
  int32 ActualScriptThingIndex; // r0
  FxSystem_c *pFXSystem; // r1
  Int32 v28; // r1
  UInt8 v29; // r2
  CObject *v30; // r5
  int32 v31; // r5
  CObject *v32; // r2
  CObject *v33; // r2
  char **v34; // r1
  float GroundZForCoord; // s20
  float v36; // s16
  float v37; // s18
  float v38; // s22
  int32 Index; // r0
  int v40; // r4
  int v41; // r2
  unsigned __int16 v42; // r1
  int v43; // r2
  int v44; // r3
  float *v45; // r6
  bool v46; // nf
  uint8 *v47; // r0
  int v48; // r1
  float MovingCollisionOffset; // r0
  CVehicle *v50; // r0
  EScriptCrossHair **v51; // r1
  CAutomobile *v52; // r0
  char v53; // r2
  Bool8 v54; // r4
  float v55; // s16
  int32 v56; // r0
  CCheckpoint *pCheckpoint; // r0
  uint8 *v58; // r0
  _DWORD *v59; // r1
  int v60; // r3
  int v61; // r2
  unsigned int v62; // r1
  CVehicle *v63; // r0
  char **v64; // r0
  CPed *v65; // r4
  unsigned int v66; // r4
  CPool<CObject,CCutsceneObject>::StorageType *m_aStorage; // r6
  CObject *v68; // r5
  RpClump_0 *m_pRwObject; // r0
  EScriptCrossHair *v70; // r1
  Int32 v71; // r0
  char **v72; // r1
  Int32 v73; // r0
  unsigned int v74; // r0
  CVehicle *v75; // r0
  Bool8 *v76; // r1
  Bool8 v77; // r0
  uint8 *v78; // r0
  Int32 v79; // r0
  char v80; // r2
  Int32 v81; // r0
  Int32 v82; // r0
  int32 NearestEntryExit; // r0
  Int32 v84; // r0
  Int32 v85; // r0
  int ZoneByLabelAndReturnIndex; // r0
  CZoneInfo *v87; // r0
  uint8 *v88; // r0
  CPed *v89; // r1
  Bool8 v90; // r3
  Bool8 v91; // r0
  bool v92; // zf
  CVehiclePool *v93; // r0
  int32 m_nSize; // r1
  int v95; // r4
  float v96; // s16
  float v97; // s18
  float v98; // s20
  float v99; // s22
  float v100; // s24
  int i; // r6
  CPool<CVehicle,CHeli>::StorageType *v102; // r0
  const CVehicle *v103; // r5
  CMatrix *m_pMat; // r12
  CVector *p_tx; // r0
  int v106; // r6
  CVehiclePool *v107; // r0
  int32 v108; // r12
  Int32 v109; // r5
  unsigned __int64 v110; // r2
  Int32 v111; // r9
  Int32 v112; // r4
  Int32 v113; // r1
  float v114; // s26
  char v115; // r9
  float v116; // s24
  float v117; // s20
  float v118; // s16
  float v119; // s18
  int v120; // r8
  int v121; // r4
  float v122; // s22
  CPool<CVehicle,CHeli>::StorageType *v123; // r0
  uint8 *v124; // r5
  int IsLawEnforcementVehicle; // r0
  bool v126; // zf
  int v127; // r1
  float *v128; // r0
  float v129; // s0
  float v130; // s0
  char v131; // r0
  char v132; // r1
  char *v133; // r4
  CPed *v134; // r0
  const CVector *PlayerCentreOfWorld; // r0
  __int64 v136; // d16
  Int32 v137; // r8
  CTask *v138; // r0
  CTaskSimpleHoldEntity *v139; // r5
  CTaskSimple *v140; // r5
  char v141; // r4
  CRunningScript *v142; // r0
  Int16 v143; // r1
  Int32 ParameterWithoutIncreasingPC; // r6
  int m_nModelIndex; // r0
  bool v146; // zf
  CDecisionMakerTypes *v147; // r0
  CDecisionMakerTypes *v148; // r0
  int v149; // r0
  CVehicle *v150; // r0
  int32 v151; // r1
  CVector vPosition; // [sp+20h] [bp-B0h] BYREF
  CVector Coors; // [sp+64h] [bp-6Ch] BYREF
  Int16 pStringToFill[4]; // [sp+72h] [bp-5Eh] BYREF

  v6 = 0;
  switch ( CurrCommand )
  {
    case 2400:
      CRunningScript::CollectParameters(this, 2);
      v11 = 0;
      v6 = 0;
      if ( !ScriptParams[1] )
        v11 = 1;
      CPad::GetPad(ScriptParams[0])->bDisablePlayerDisplayVitalStats = v11;
      return v6;
    case 2401:
      CRunningScript::CollectParameters(this, 2);
      v12 = ScriptParams[1];
      v13 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( ScriptParams[1] )
        v12 = 1;
      v14 = *((_DWORD *)v13 + 292) & 0xFFFFFFEF | (16 * v12);
      goto LABEL_168;
    case 2402:
    case 2403:
    case 2425:
    case 2430:
    case 2431:
    case 2447:
    case 2448:
    case 2451:
    case 2457:
    case 2469:
    case 2481:
      return v6;
    case 2404:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      LOBYTE(vPosition.x) = 0;
      if ( strcasecmp((const char *)pStringToFill, "DUMMY") )
        strcpy((char *)&vPosition, (const char *)pStringToFill);
      CRunningScript::CollectParameters(this, 7);
      NewMenu = CMenuSystem::CreateNewMenu(
                  1u,
                  (unsigned __int8 *)&vPosition,
                  *(float *)ScriptParams * (float)((float)RsGlobal.screenWidth / 640.0),
                  *(float *)&ScriptParams[1] * (float)((float)RsGlobal.screenHeight / 448.0),
                  *(float *)&ScriptParams[2] * (float)((float)RsGlobal.screenHeight / 448.0),
                  LOBYTE(ScriptParams[3]),
                  ScriptParams[4],
                  LOBYTE(ScriptParams[5]),
                  ScriptParams[6]);
      goto LABEL_16;
    case 2405:
      CRunningScript::CollectParameters(this, 1);
      TaskSwim = CPedIntelligence::GetTaskSwim(*(const CPedIntelligence **)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1088]);
      goto LABEL_267;
    case 2406:
      CRunningScript::CollectParameters(this, 1);
      NewMenu = CPedIntelligence::GetTaskSwim(*(const CPedIntelligence **)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1088])->m_nSwimState;
LABEL_16:
      ScriptParams[0] = NewMenu;
      goto LABEL_332;
    case 2407:
      CRunningScript::CollectParameters(this, 2);
      TaskSecondary = (CTaskComplexFacial *)CTaskManager::GetTaskSecondary(
                                              (const CTaskManager *)(*(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1088]
                                                                   + 4),
                                              3);
      v6 = 0;
      CTaskComplexFacial::SetRequest(TaskSecondary, 7, ScriptParams[1], -1, 0);
      return v6;
    case 2408:
      CRunningScript::CollectParameters(this, 1);
      v18 = (CTaskComplexFacial *)CTaskManager::GetTaskSecondary(
                                    (const CTaskManager *)(*(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1088]
                                                         + 4),
                                    3);
      CTaskComplexFacial::StopAll(v18);
      return 0;
    case 2409:
      CRunningScript::CollectParameters(this, 1);
      v19 = (uint8 *)((*(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1068] >> 10) & 1);
      goto LABEL_306;
    case 2410:
      CRunningScript::CollectParameters(this, 1);
      v20 = ScriptParams[0];
      if ( ScriptParams[0] )
        v20 = 1;
      CHeli::SwitchPoliceHelis(v20);
      return 0;
    case 2411:
      CShopping::StoreVehicleMods();
      return 0;
    case 2412:
      CShopping::RestoreVehicleMods();
      return 0;
    case 2413:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v21 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v21 = 0;
      }
      MovingCollisionOffset = NAN;
      switch ( ScriptParams[1] )
      {
        case 0:
          MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetUpgrade(v21, 0));
          goto LABEL_331;
        case 1:
          MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetUpgrade(v21, 1));
          if ( MovingCollisionOffset == NAN )
            MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetUpgrade(v21, 2));
          goto LABEL_331;
        case 2:
          MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetUpgrade(v21, 6));
          goto LABEL_331;
        case 3:
          MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetUpgrade(v21, 8));
          if ( MovingCollisionOffset == NAN )
            MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetUpgrade(v21, 9));
          goto LABEL_331;
        case 4:
          MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetUpgrade(v21, 10));
          goto LABEL_331;
        case 5:
          MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetUpgrade(v21, 11));
          goto LABEL_331;
        case 6:
          MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetUpgrade(v21, 12));
          goto LABEL_331;
        case 7:
          MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetUpgrade(v21, 14));
          goto LABEL_331;
        case 8:
          MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetUpgrade(v21, 15));
          goto LABEL_331;
        case 9:
          MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetUpgrade(v21, 16));
          goto LABEL_331;
        case 0xA:
          MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetUpgrade(v21, 17));
          goto LABEL_331;
        case 0xC:
          v150 = v21;
          v151 = 2;
          goto LABEL_330;
        case 0xD:
          v150 = v21;
          v151 = 19;
          goto LABEL_330;
        case 0xE:
          v150 = v21;
          v151 = 12;
          goto LABEL_330;
        case 0xF:
          v150 = v21;
          v151 = 13;
          goto LABEL_330;
        case 0x10:
          v150 = v21;
          v151 = 20;
LABEL_330:
          MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetReplacementUpgrade(v150, v151));
          break;
        default:
          goto LABEL_331;
      }
      goto LABEL_331;
    case 2414:
      CRunningScript::CollectParameters(this, 1);
      v19 = (uint8 *)((mod_HandlingManager.m_aHandlingData[*((unsigned __int8 *)&CModelInfo::ms_modelInfoPtrs[*(__int16 *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][38]][1].m_flags
                                                           + 2)].hFlags >> 25) & 1);
      goto LABEL_306;
    case 2415:
      CRunningScript::CollectParameters(this, 1);
      v19 = (uint8 *)((mod_HandlingManager.m_aHandlingData[*((unsigned __int8 *)&CModelInfo::ms_modelInfoPtrs[*(__int16 *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][38]][1].m_flags
                                                           + 2)].hFlags >> 26) & 1);
      goto LABEL_306;
    case 2416:
      CGameLogic::ForceDeathRestart();
      return 0;
    case 2417:
      CWaterLevel::SyncWater();
      return 0;
    case 2418:
      CRunningScript::CollectParameters(this, 4);
      v6 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v22 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v22 = 0;
      }
      CRunningScript::SetCharCoordinates(
        this,
        v22,
        *(float *)&ScriptParams[1],
        *(float *)&ScriptParams[2],
        *(float *)&ScriptParams[3],
        1,
        0);
      return v6;
    case 2419:
      CRunningScript::CollectParameters(this, 1);
      v23 = (unsigned int)CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 5u) < 0x3C;
      v6 = 0;
      CRunningScript::UpdateCompareFlag(this, v23);
      return v6;
    case 2420:
      CGameLogic::ResetStuffUponResurrection();
      return 0;
    case 2421:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v24 = (const CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v24 = 0;
      }
      if ( !CVehicle::IsLawEnforcementVehicle(v24) )
      {
        m_nModelIndex = v24->m_nModelIndex;
        if ( m_nModelIndex != 407 )
        {
          v146 = m_nModelIndex == 544;
          if ( m_nModelIndex != 544 )
            v146 = m_nModelIndex == 416;
          if ( !v146 )
            goto LABEL_305;
        }
      }
      LOBYTE(v19) = 1;
      goto LABEL_306;
    case 2422:
      CRunningScript::CollectParameters(this, 1);
      v25 = ScriptParams[0];
      ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 1u);
      if ( ActualScriptThingIndex < 0 )
        return 0;
      pFXSystem = CTheScripts::ScriptEffectSystemArray[ActualScriptThingIndex].pFXSystem;
      if ( !pFXSystem )
        return 0;
      FxManager_c::DestroyFxSystem(&g_fxMan, pFXSystem);
      CTheScripts::RemoveScriptEffectSystem(v25);
      if ( !this->IsThisAMissionScript )
        return 0;
      v28 = v25;
      v29 = 4;
      goto LABEL_249;
    case 2423:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v30 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v30 = 0;
      }
      LOBYTE(v19) = 0;
      if ( !v30 || !CWorld::Players[CWorld::PlayerInFocus].pPed )
        goto LABEL_306;
      PlayerCentreOfWorld = FindPlayerCentreOfWorld(CWorld::PlayerInFocus);
      v136 = *(_QWORD *)&PlayerCentreOfWorld->x;
      vPosition.z = PlayerCentreOfWorld->z;
      *(_QWORD *)&vPosition.x = v136;
      TaskSwim = (CTaskSimpleSwim *)CScriptsForBrains::IsObjectWithinBrainActivationRange(
                                      &CTheScripts::ScriptsForBrains,
                                      v30,
                                      &vPosition);
      goto LABEL_267;
    case 2424:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] == -1 )
        v31 = -1;
      else
        v31 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 7u);
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      if ( CTheScripts::GetActualScriptThingIndex(ParameterWithoutIncreasingPC, 7u) == -1 )
      {
        v147 = CDecisionMakerTypes::m_pPedDecisionTypes;
        if ( !CDecisionMakerTypes::m_pPedDecisionTypes )
        {
          v148 = (CDecisionMakerTypes *)operator new(0xF1C0u);
          CDecisionMakerTypes::CDecisionMakerTypes(v148);
          CDecisionMakerTypes::m_pPedDecisionTypes = v147;
        }
        v149 = CDecisionMakerTypes::CopyDecisionMaker(v147, v31, 0, this->IsThisAMissionScript);
        ParameterWithoutIncreasingPC = CTheScripts::GetNewUniqueScriptThingIndex(v149, 7u);
        ScriptParams[0] = ParameterWithoutIncreasingPC;
        if ( this->IsThisAMissionScript )
        {
          CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, ParameterWithoutIncreasingPC, 9u);
          ParameterWithoutIncreasingPC = ScriptParams[0];
        }
      }
      else
      {
        ScriptParams[0] = ParameterWithoutIncreasingPC;
      }
      CScriptResourceManager::AddToResourceManager(
        &CTheScripts::ScriptResourceManager,
        ParameterWithoutIncreasingPC,
        3u,
        this);
      goto LABEL_332;
    case 2426:
      CRunningScript::CollectParameters(this, 4);
      vPosition = *(CVector *)ScriptParams;
      CAudioEngine::ReportMissionAudioEvent(&AudioEngine, ScriptParams[3], &vPosition);
      return 0;
    case 2427:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v32 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v32 = 0;
      }
      CAudioEngine::ReportMissionAudioEvent(&AudioEngine, ScriptParams[1], v32);
      return 0;
    case 2428:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v33 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v33 = 0;
      }
      CAudioEngine::AttachMissionAudioToObject(&AudioEngine, LOBYTE(ScriptParams[0]) - 1, v33);
      return 0;
    case 2429:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = LOBYTE(CModelInfo::ms_modelInfoPtrs[*(__int16 *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][38]][15].m_txdIndex);
      goto LABEL_332;
    case 2432:
      CRunningScript::CollectParameters(this, 4);
      CFireManager::ExtinguishPoint(&gFireManager, *(CVector *)ScriptParams, *(float *)&ScriptParams[3]);
      return 0;
    case 2433:
      CRunningScript::CollectParameters(this, 1);
      LOBYTE(v19) = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1485] & 1;
      goto LABEL_306;
    case 2434:
      CRunningScript::CollectParameters(this, 2);
      v13 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v14 = *((_DWORD *)v13 + 292) & 0xFFFFFF7F | ((ScriptParams[1] & 1) << 7);
      goto LABEL_168;
    case 2435:
      CRunningScript::CollectParameters(this, 1);
      v34 = CPopulation::m_bOnlyCreateRandomGangMembers;
      goto LABEL_174;
    case 2436:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = *(__int16 *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][38];
      goto LABEL_332;
    case 2437:
      CRunningScript::CollectParameters(this, 7);
      GroundZForCoord = *(float *)&ScriptParams[2];
      v36 = *(float *)ScriptParams;
      v37 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      v38 = *(float *)&ScriptParams[3];
      Index = ScriptParams[4];
      if ( ScriptParams[4] <= -1 )
        Index = CTheScripts::UsedObjectArray[-ScriptParams[4]].Index;
      v40 = 0;
      Coors.y = v37;
      Coors.x = v36;
      Coors.z = GroundZForCoord;
      CWorld::FindObjectsOfTypeInRange(
        Index,
        &Coors,
        *(float *)&ScriptParams[3],
        1,
        pStringToFill,
        16,
        (CEntity **)&vPosition,
        1,
        0,
        0,
        1,
        1);
      if ( pStringToFill[0] >= 1 )
      {
        v2.n64_f32[0] = v38 + v38;
        v41 = 0;
        v40 = 0;
        v42 = 0;
        do
        {
          v43 = *((_DWORD *)&vPosition.x + v41);
          ++v42;
          v44 = *(_DWORD *)(v43 + 20);
          v45 = (float *)(v44 + 48);
          if ( !v44 )
            v45 = (float *)(v43 + 4);
          v3.n64_f32[0] = sqrtf(
                            (float)((float)((float)(*v45 - v36) * (float)(*v45 - v36))
                                  + (float)((float)(v45[1] - v37) * (float)(v45[1] - v37)))
                          + (float)((float)(v45[2] - GroundZForCoord) * (float)(v45[2] - GroundZForCoord)));
          v46 = v3.n64_f32[0] < v2.n64_f32[0];
          v2.n64_u64[0] = vmin_f32(v3, v2).n64_u64[0];
          if ( v46 )
            v40 = v43;
          v41 = v42;
        }
        while ( v42 < pStringToFill[0] );
      }
      if ( ScriptParams[6] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[6] >> 8] == LOBYTE(ScriptParams[6]) )
      {
        v47 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[6] >> 8];
        if ( !v40 )
          return 0;
      }
      else
      {
        v47 = 0;
        if ( !v40 )
          return 0;
      }
      if ( ScriptParams[5] )
        v40 = 0;
      *((_DWORD *)v47 + 75) = v40;
      return 0;
    case 2438:
      CFireManager::ClearAllScriptFireFlags(&gFireManager);
      return 0;
    case 2439:
      CRunningScript::CollectParameters(this, 1);
      v48 = *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1060];
      if ( v48 )
      {
        if ( (*(_BYTE *)(v48 + 58) & 7) == 2 )
          LODWORD(MovingCollisionOffset) = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                                                           * ((signed int)(v48
                                                                                         - (unsigned int)CPools::ms_pVehiclePool->m_aStorage) >> 2)] | (-422239488 * ((signed int)(v48 - (unsigned int)CPools::ms_pVehiclePool->m_aStorage) >> 2));
        else
          MovingCollisionOffset = NAN;
      }
      else
      {
        MovingCollisionOffset = NAN;
      }
      goto LABEL_331;
    case 2440:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v50 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v50 = 0;
      }
      MovingCollisionOffset = COERCE_FLOAT(CVehicle::GetRemapIndex(v50));
      goto LABEL_331;
    case 2442:
      CRunningScript::CollectParameters(this, 1);
      v51 = (EScriptCrossHair **)&CEventGunShot::ms_fGunShotSenseRangeForRiot2;
      goto LABEL_189;
    case 2443:
    case 2444:
      PointerToScriptVariable = CRunningScript::GetPointerToScriptVariable(this, 2u);
      v8 = CRunningScript::GetPointerToScriptVariable(this, 2u);
      v9 = strlen((const char *)PointerToScriptVariable);
      v10 = strlen((const char *)v8) + v9;
      if ( CurrCommand == 2443 )
      {
        if ( v10 > 15 )
          return 0;
      }
      else if ( v10 > 7 )
      {
        return 0;
      }
      v133 = (char *)CRunningScript::GetPointerToScriptVariable(this, 2u);
      strcpy(v133, (const char *)PointerToScriptVariable);
      strcat(v133, (const char *)v8);
      return 0;
    case 2445:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v52 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v52 = 0;
      }
      MovingCollisionOffset = CAutomobile::GetMovingCollisionOffset(v52);
      goto LABEL_331;
    case 2446:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      CRunningScript::CollectParameters(this, 2);
      v53 = ScriptParams[1];
      if ( ScriptParams[1] )
        v53 = 1;
      CEntryExitManager::SetEntryExitFlag((const unsigned __int8 *)pStringToFill, ScriptParams[0], v53);
      return 0;
    case 2449:
      CRunningScript::CollectParameters(this, 1);
      CAudioEngine::PauseBeatTrack(&AudioEngine, ScriptParams[0]);
      return 0;
    case 2450:
      CRunningScript::CollectParameters(this, 2);
      v54 = 0;
      v6 = 0;
      if ( !ScriptParams[1] )
        v54 = 1;
      CPad::GetPad(ScriptParams[0])->bDisablePlayerCycleWeapon = v54;
      return v6;
    case 2452:
      CRunningScript::CollectParameters(this, 3);
      CPathFind::MarkRoadNodeAsDontWander(
        &ThePaths,
        *(float *)ScriptParams,
        *(float *)&ScriptParams[1],
        *(float *)&ScriptParams[2]);
      return 0;
    case 2453:
      CPathFind::UnMarkAllRoadNodesAsDontWander(&ThePaths);
      return 0;
    case 2454:
      CRunningScript::CollectParameters(this, 2);
      v55 = *(float *)&ScriptParams[1];
      v56 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 3u);
      if ( v56 >= 0 )
      {
        pCheckpoint = CTheScripts::ScriptCheckpointArray[v56].pCheckpoint;
        if ( pCheckpoint )
          CCheckpoints::SetHeading(pCheckpoint->m_nIdentifier, v55);
      }
      return 0;
    case 2455:
      CRunningScript::CollectParameters(this, 1);
      CStats::SetStatValue(0xE4u, (float)ScriptParams[0]);
      return 0;
    case 2456:
      CRunningScript::CollectParameters(this, 1);
      CStats::IncrementStat(0xE0u, (float)ScriptParams[0]);
      return 0;
    case 2458:
      CRunningScript::CollectParameters(this, 2);
      v58 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v59 = v58 + 28;
      v60 = *((_DWORD *)v58 + 7);
      v61 = *((_DWORD *)v58 + 8);
      if ( ScriptParams[1] )
      {
        *v59 = v60 | 1;
        *((_DWORD *)v58 + 8) = v61;
        v62 = *((_DWORD *)v58 + 17) | 2;
      }
      else
      {
        *v59 = v60 & 0xFFFFFFFE;
        *((_DWORD *)v58 + 8) = v61;
        v62 = *((_DWORD *)v58 + 17) & 0xFFFFFFFD;
      }
      *((_DWORD *)v58 + 17) = v62;
      return 0;
    case 2459:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v63 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v63 = 0;
      }
      CVehicleRecording::ChangeCarPlaybackToUseAI(v63);
      return 0;
    case 2460:
      CRunningScript::CollectParameters(this, 3);
      CCamera::AddShakeSimple(&TheCamera, *(float *)&ScriptParams[1], ScriptParams[0], *(float *)&ScriptParams[2]);
      return 0;
    case 2461:
      v64 = CPostEffects::m_bNightVision;
      goto LABEL_187;
    case 2462:
      CRunningScript::CollectParameters(this, 1);
      v34 = (char **)&CPopulation::m_bDontCreateRandomCops;
      goto LABEL_174;
    case 2463:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] != -1 )
      {
        v6 = 0;
        *(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1168] = *(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1168] & 0xFFFFFDFF | ((ScriptParams[1] & 1) << 9);
        return v6;
      }
      v140 = (CTaskSimple *)CTask::operator new(0xCu);
      v141 = ScriptParams[1];
      CTaskSimple::CTaskSimple(v140);
      LOBYTE(v140[1]._vptr$CTask) = v141;
      v140->_vptr$CTask = (int (**)(void))&off_669B78;
      CRunningScript::GivePedScriptedTask(this, -1, v140, 2463);
      return 0;
    case 2464:
      CRunningScript::ScriptTaskPickUpObject(this, 2464);
      return 0;
    case 2465:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v65 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v65 = 0;
      }
      v6 = 0;
      v137 = ScriptParams[1];
      if ( CTaskManager::GetTaskSecondary(&v65->m_pPedIntelligence->m_taskManager, 0) )
      {
        v6 = 0;
        v138 = CTaskManager::GetTaskSecondary(&v65->m_pPedIntelligence->m_taskManager, 0);
        if ( (*((int (__fastcall **)(CTask *))v138->_vptr$CTask + 5))(v138) == 307 )
        {
          v6 = 0;
          v139 = (CTaskSimpleHoldEntity *)CTaskManager::GetTaskSecondary(&v65->m_pPedIntelligence->m_taskManager, 0);
          CTaskSimpleHoldEntity::DropEntity(v139, v65, v137 != 0);
          (*((void (__fastcall **)(CTaskSimpleHoldEntity *, CPed *, int, _DWORD))v139->_vptr$CTask + 7))(
            v139,
            v65,
            1,
            0);
        }
      }
      return v6;
    case 2466:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && (v66 = (unsigned int)ScriptParams[0] >> 8,
            CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0])) )
      {
        m_aStorage = CPools::ms_pObjectPool->m_aStorage;
        v68 = (CObject *)CPools::ms_pObjectPool->m_aStorage[v66];
        CTheScripts::CleanUpThisObject(v68);
        if ( v68 )
        {
          m_pRwObject = (RpClump_0 *)v68->m_pRwObject;
          if ( m_pRwObject )
            RpClumpForAllAtomics(
              m_pRwObject,
              CClumpModelInfo::SetAtomicRendererCB,
              CVisibilityPlugins::RenderFadingClumpCB);
          *(_DWORD *)&m_aStorage[v66][324] |= 0x400000u;
        }
      }
      else
      {
        CTheScripts::CleanUpThisObject(0);
      }
      if ( !this->IsThisAMissionScript )
        return 0;
      v28 = ScriptParams[0];
      v29 = 3;
LABEL_249:
      CMissionCleanup::RemoveEntityFromList(&CTheScripts::MissionCleanUp, v28, v29);
      return 0;
    case 2467:
      CRunningScript::CollectParameters(this, 1);
      v70 = &CTheScripts::bDrawCrossHair;
      v71 = ScriptParams[0];
      if ( ScriptParams[0] )
        v71 = 1;
      goto LABEL_190;
    case 2468:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&vPosition, 8u);
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&Coors, 8u);
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      CRunningScript::CollectParameters(this, 3);
      CConversations::SetUpConversationNode(
        (unsigned __int8 *)&vPosition,
        (unsigned __int8 *)&Coors,
        (unsigned __int8 *)pStringToFill,
        ScriptParams[0],
        ScriptParams[1],
        ScriptParams[2]);
      return 0;
    case 2470:
      CRunningScript::CollectParameters(this, 1);
      v72 = CTheScripts::RadarShowBlipOnAllLevels;
      goto LABEL_145;
    case 2471:
      CRunningScript::CollectParameters(this, 2);
      v73 = ScriptParams[1];
      v13 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( ScriptParams[1] )
        v73 = 1;
      v14 = *((_DWORD *)v13 + 292) & 0xFFFFFBFF | (v73 << 10);
      goto LABEL_168;
    case 2472:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && (v74 = (unsigned int)ScriptParams[0] >> 8,
            CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]))
        && (v19 = CPools::ms_pPedPool->m_aStorage[v74]) != 0 )
      {
        v46 = (v19[1157] & 0x80) != 0;
        LOBYTE(v19) = 0;
        if ( v46 && CPools::ms_pPedPool->m_aStorage[v74][1884] == 2 )
          LOBYTE(v19) = 1;
      }
      else
      {
LABEL_305:
        LOBYTE(v19) = 0;
      }
      goto LABEL_306;
    case 2473:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&vPosition, 0xFu);
      MovingCollisionOffset = COERCE_FLOAT(CKeyGen::GetUppercaseKey((const unsigned __int8 *)&vPosition));
      goto LABEL_331;
    case 2474:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      CRunningScript::CollectParameters(this, 1);
      v6 = 0;
      CConversations::SetUpConversationNode((unsigned __int8 *)pStringToFill, 0, 0, ScriptParams[0], 0, 0);
      return v6;
    case 2475:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v75 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v75 = 0;
      }
      v134 = CVehicle::PickRandomPassenger(v75);
      v6 = 0;
      if ( v134 )
        CPed::Say(v134, ScriptParams[1], 0, 1.0, 0, 0, 0);
      return v6;
    case 2476:
      CRunningScript::CollectParameters(this, 1);
      v72 = CTheScripts::HideAllFrontEndMapBlips;
LABEL_145:
      v76 = (Bool8 *)*v72;
      v77 = ScriptParams[0] != 0;
      goto LABEL_210;
    case 2477:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] == 4 )
        return 0;
      v6 = 0;
      TheCamera.m_nCarZoom = ScriptParams[0];
      return v6;
    case 2478:
      CRunningScript::CollectParameters(this, 1);
      v78 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      LOBYTE(v19) = 0;
      if ( v78[1157] << 31 && *(_DWORD *)(*((_DWORD *)v78 + 356) + 1440) == 6 )
        LOBYTE(v19) = 1;
      goto LABEL_306;
    case 2479:
      CRunningScript::CollectParameters(this, 4);
      v6 = 0;
      vPosition = *(CVector *)ScriptParams;
      CGameLogic::SetUpSkip(*(CVector *)ScriptParams, *(float *)&ScriptParams[3], 1, 0, 0);
      return v6;
    case 2480:
      CRunningScript::CollectParameters(this, 2);
      v6 = 0;
      v79 = ScriptParams[1];
      if ( ScriptParams[1] )
        v79 = 1;
      *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1072] = *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1072] & 0xFFDFFFFF | (v79 << 21);
      return v6;
    case 2482:
      CRunningScript::CollectParameters(this, 1);
      v80 = ScriptParams[0];
      if ( ScriptParams[0] )
        v80 = 1;
      v81 = CLoadedCarGroup::PickRandomCar(&CPopulation::m_AppropriateLoadedCars, 0, v80);
      ScriptParams[0] = v81;
      if ( v81 == -1 )
        v82 = -1;
      else
        v82 = SBYTE1(CModelInfo::ms_modelInfoPtrs[v81][1].m_pColModel);
      ScriptParams[1] = v82;
      v142 = this;
      v143 = 2;
      goto LABEL_333;
    case 2483:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1288];
      goto LABEL_332;
    case 2484:
      CRunningScript::CollectParameters(this, 5);
      *(_QWORD *)&vPosition.x = *(_QWORD *)ScriptParams;
      NearestEntryExit = CEntryExitManager::FindNearestEntryExit(
                           (const CVector2D *)&vPosition,
                           *(float *)&ScriptParams[2],
                           -1);
      CEntryExitManager::SetEntryExitFlagWithIndex(NearestEntryExit, ScriptParams[3], ScriptParams[4] != 0);
      return 0;
    case 2485:
      CRunningScript::CollectParameters(this, 2);
      v84 = ScriptParams[1];
      v13 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( ScriptParams[1] )
        v84 = 1;
      v14 = *((_DWORD *)v13 + 292) & 0xFFFFEFFF | (v84 << 12);
      goto LABEL_168;
    case 2486:
      CRunningScript::CollectParameters(this, 2);
      v85 = ScriptParams[1];
      v13 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( ScriptParams[1] )
        v85 = 1;
      v14 = *((_DWORD *)v13 + 292) & 0xFFFFF7FF | (v85 << 11);
LABEL_168:
      *((_DWORD *)v13 + 292) = v14;
      return 0;
    case 2487:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      CRunningScript::CollectParameters(this, 1);
      ZoneByLabelAndReturnIndex = CTheZones::FindZoneByLabelAndReturnIndex((Char *)pStringToFill, ZONE_INFORMATION);
      if ( ZoneByLabelAndReturnIndex < 0 )
        return 0;
      v6 = 0;
      v87 = &CTheZones::ZoneInfoArray[CTheZones::NavigationZoneArray[ZoneByLabelAndReturnIndex].ZoneInfoIndex];
      *(_WORD *)((char *)v87 + 15) = *(_WORD *)((char *)v87 + 15) & 0xFF7F | (unsigned __int8)(LOBYTE(ScriptParams[0]) << 7);
      return v6;
    case 2488:
      CRunningScript::CollectParameters(this, 8);
      vPosition = *(CVector *)ScriptParams;
      Coors = *(CVector *)&ScriptParams[3];
      Fx_c::AddBlood(
        &g_fx,
        &vPosition,
        &Coors,
        ScriptParams[6],
        *(float *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[7] >> 8][304]);
      return 0;
    case 2489:
      CRunningScript::CollectParameters(this, 1);
      v34 = &CHud::bScriptDontDisplayVehicleName;
      goto LABEL_174;
    case 2490:
      CRunningScript::CollectParameters(this, 1);
      v34 = CHud::bScriptDontDisplayAreaName;
LABEL_174:
      v6 = 0;
      **v34 = ScriptParams[0] == 0;
      return v6;
    case 2491:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v88 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v88 = 0;
      }
      TaskSwim = (CTaskSimpleSwim *)CDamageManager::GetDoorStatus(
                                      (const CDamageManager *)(v88 + 1460),
                                      (eDoors)ScriptParams[1]);
LABEL_267:
      LOBYTE(v19) = (_BYTE)TaskSwim;
      if ( TaskSwim )
        LOBYTE(v19) = 1;
      goto LABEL_306;
    case 2492:
      CRunningScript::CollectParameters(this, 4);
      v6 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v89 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v89 = 0;
      }
      CRunningScript::SetCharCoordinates(
        this,
        v89,
        *(float *)&ScriptParams[1],
        *(float *)&ScriptParams[2],
        *(float *)&ScriptParams[3],
        0,
        0);
      return v6;
    case 2493:
      CRunningScript::CollectParameters(this, 1);
      v90 = 0;
      v6 = 0;
      v91 = ScriptParams[0];
      v92 = ScriptParams[0] == 0;
      if ( ScriptParams[0] )
        v91 = 1;
      this->bIsThisAMiniGameScript = v91;
      if ( v92 )
        v90 = 1;
      CTheScripts::bDisplayNonMiniGameHelpMessages = v90;
      CTheScripts::bMiniGameInProgress = v91;
      return v6;
    case 2494:
      v64 = (char **)&CTheScripts::bMiniGameInProgress;
LABEL_187:
      LOBYTE(v19) = **v64;
      goto LABEL_306;
    case 2495:
      CRunningScript::CollectParameters(this, 1);
      v51 = (EScriptCrossHair **)CTheScripts::ForceRandomCarModel;
LABEL_189:
      v70 = *v51;
      v71 = ScriptParams[0];
LABEL_190:
      *v70 = v71;
      return 0;
    case 2496:
      CRunningScript::CollectParameters(this, 6);
      v93 = CPools::ms_pVehiclePool;
      m_nSize = CPools::ms_pVehiclePool->m_nSize;
      if ( m_nSize )
      {
        v95 = m_nSize - 1;
        v96 = *(float *)ScriptParams;
        v97 = *(float *)&ScriptParams[1];
        v98 = *(float *)&ScriptParams[2];
        v99 = *(float *)&ScriptParams[3];
        v100 = *(float *)&ScriptParams[4];
        for ( i = 2604 * m_nSize - 2604; ; i -= 2604 )
        {
          if ( (v93->m_aFlags[v95] & 0x80u) != 0 )
            goto LABEL_206;
          v102 = v93->m_aStorage;
          v103 = (const CVehicle *)&(*v102)[i];
          if ( !&(*v102)[i]
            || CVehicle::GetVehicleAppearance((const CVehicle *)&(*v102)[i]) != APR_CAR
            && CVehicle::GetVehicleAppearance(v103) != APR_BIKE )
          {
            goto LABEL_206;
          }
          if ( ScriptParams[5] != v103->m_nModelIndex && ScriptParams[5] > -1 || !CVehicle::CanBeDeleted(v103) )
            goto LABEL_206;
          m_pMat = v103->m_pMat;
          p_tx = (CVector *)&m_pMat->tx;
          if ( !m_pMat )
            p_tx = &v103->m_transform.m_translate;
          if ( IsVecIn2dAngledArea(p_tx, v96, v97, v98, v99, v100) == 1 )
          {
            LODWORD(MovingCollisionOffset) = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                                                             * (((char *)v103
                                                                               - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2)] | (-422239488 * (((char *)v103 - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2));
            if ( !v95 )
              break;
          }
          else
          {
LABEL_206:
            MovingCollisionOffset = NAN;
            if ( !v95 )
              break;
          }
          if ( MovingCollisionOffset != NAN )
            break;
          --v95;
          v93 = CPools::ms_pVehiclePool;
        }
      }
      else
      {
        MovingCollisionOffset = NAN;
      }
LABEL_331:
      *(float *)ScriptParams = MovingCollisionOffset;
LABEL_332:
      v142 = this;
      v143 = 1;
LABEL_333:
      CRunningScript::StoreParameters(v142, v143);
      return 0;
    case 2497:
      CRunningScript::CollectParameters(this, 1);
      v76 = &CTheScripts::bAddNextMessageToPreviousBriefs;
      v77 = ScriptParams[0];
LABEL_210:
      *v76 = v77;
      return 0;
    case 2498:
      CDarkel::FailKillFrenzy();
      return 0;
    case 2499:
      CRunningScript::CollectParameters(this, 6);
      v106 = 0;
      v107 = CPools::ms_pVehiclePool;
      v108 = CPools::ms_pVehiclePool->m_nSize;
      if ( v108 < 1 )
        goto LABEL_243;
      v109 = ScriptParams[2];
      v110 = __PAIR64__(ScriptParams[1], ScriptParams[3]);
      v111 = ScriptParams[0];
      v112 = ScriptParams[5];
      if ( *(float *)ScriptParams > *(float *)&ScriptParams[3] )
      {
        v111 = ScriptParams[3];
        LODWORD(v110) = ScriptParams[0];
      }
      v113 = ScriptParams[4];
      v114 = *(float *)&v111;
      v115 = 0;
      v116 = *(float *)&v110;
      if ( *(float *)&ScriptParams[1] > *(float *)&ScriptParams[4] )
        v113 = ScriptParams[1];
      v117 = *(float *)&v113;
      if ( *(float *)&ScriptParams[2] > *(float *)&ScriptParams[5] )
      {
        v112 = ScriptParams[2];
        v109 = ScriptParams[5];
      }
      v118 = *(float *)&v112;
      v119 = *(float *)&v109;
      v120 = v108 - 1;
      v121 = 0;
      if ( *(float *)&ScriptParams[1] > *(float *)&ScriptParams[4] )
        HIDWORD(v110) = ScriptParams[4];
      v122 = *((float *)&v110 + 1);
      break;
    default:
      return -1;
  }
  while ( 1 )
  {
    if ( (v107->m_aFlags[v121] & 0x80u) == 0 )
    {
      v123 = v107->m_aStorage;
      v124 = &(*v123)[v106];
      if ( &(*v123)[v106] )
      {
        IsLawEnforcementVehicle = CVehicle::IsLawEnforcementVehicle((const CVehicle *)&(*v123)[v106]);
        v126 = IsLawEnforcementVehicle == 0;
        if ( IsLawEnforcementVehicle )
          v126 = *((unsigned __int16 *)v124 + 19) == 430;
        if ( !v126 )
        {
          v127 = *((_DWORD *)v124 + 5);
          v128 = (float *)(v127 + 48);
          if ( !v127 )
            v128 = (float *)(v124 + 4);
          if ( *v128 >= v114 && *v128 <= v116 )
          {
            v129 = v128[1];
            if ( v129 >= v122 && v129 <= v117 )
              break;
          }
        }
      }
    }
    if ( v120 == v121 )
      goto LABEL_242;
LABEL_222:
    ++v121;
    v107 = CPools::ms_pVehiclePool;
    v106 += 2604;
  }
  v130 = v128[2];
  v131 = 0;
  v132 = 0;
  if ( v130 >= v119 )
    v131 = 1;
  if ( v130 <= v118 )
    v132 = 1;
  v115 |= v131 & v132;
  if ( v120 != v121 )
    goto LABEL_222;
LABEL_242:
  LOBYTE(v106) = v115;
LABEL_243:
  LOBYTE(v19) = v106 & 1;
LABEL_306:
  CRunningScript::UpdateCompareFlag(this, (Bool8)v19);
  return 0;
}
// 33CFCE: variable 'v3' is possibly undefined
// 33CFCE: variable 'v2' is possibly undefined
// 33E14C: variable 'v147' is possibly undefined
// 669B78: using guessed type void *;
// 675FA8: using guessed type int *CTheScripts::ForceRandomCarModel[2];
// 676360: using guessed type char *CTheScripts::RadarShowBlipOnAllLevels[2];
// 676438: using guessed type CFireManager *gFireManager_ptr;
// 676668: using guessed type char *CPostEffects::m_bNightVision[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 677340: using guessed type float *CEventGunShot::ms_fGunShotSenseRangeForRiot2;
// 6782D8: using guessed type char *CTheScripts::bDisplayNonMiniGameHelpMessages[3];
// 6784A0: using guessed type char *CPopulation::m_bOnlyCreateRandomGangMembers[3];
// 678680: using guessed type char *CHud::bScriptDontDisplayAreaName[2];
// 67874C: using guessed type script_checkpoint_struct (*CTheScripts::ScriptCheckpointArray)[20];
// 6788A0: using guessed type char *CTheScripts::HideAllFrontEndMapBlips[3];
// 67982C: using guessed type script_effect_struct (*CTheScripts::ScriptEffectSystemArray)[32];
// 679BDC: using guessed type CLoadedCarGroup *CPopulation::m_AppropriateLoadedCars;
// 679F64: using guessed type char *CHud::bScriptDontDisplayVehicleName;
// 33C6EC: using guessed type Int16 pStringToFill[4];

//----- (0033E408) --------------------------------------------------------
int __fastcall IsVecIn2dAngledArea(
        CVector *vecPos,
        float TargetX1,
        float TargetY1,
        float TargetX2,
        float TargetY2,
        float DistanceFrom1To4)
{
  float i; // s0
  float v11; // r6
  float v12; // s14
  float v13; // s4
  float v14; // s0
  float v15; // s2
  float v16; // s10
  float v17; // s6
  float v18; // s8
  float v19; // s12
  float v20; // s1
  int v21; // r4
  float v22; // s14
  float v23; // s12
  float v24; // s1
  float v25; // s3
  float v26; // s14
  float v27; // s1
  int v28; // r1
  int v29; // r0
  float v30; // s8

  for ( i = CGeneral::GetRadianAngleBetweenPoints(TargetX1, TargetY1, TargetX2, TargetY2) + 1.5708; i < 0.0; i = i + 6.2832 )
    ;
  for ( ; i > 6.2832; i = i + -6.2832 )
    ;
  v11 = sinf(i);
  v12 = TargetY2 - TargetY1;
  v13 = TargetX2 - TargetX1;
  v14 = cosf(i) * DistanceFrom1To4;
  v15 = v11 * DistanceFrom1To4;
  v16 = vecPos->x - TargetX1;
  v17 = (float)(v13 * v13) + (float)(v12 * v12);
  v18 = vecPos->y - TargetY1;
  v19 = sqrtf(v17);
  if ( v17 <= 0.0 )
  {
    v20 = 1.0;
  }
  else
  {
    v12 = v12 * (float)(1.0 / v19);
    v20 = v13 * (float)(1.0 / v19);
  }
  v21 = 0;
  v22 = (float)(v16 * v20) + (float)(v18 * v12);
  if ( v22 >= 0.0 && v22 <= v19 )
  {
    v23 = (float)(TargetY1 - v14) - TargetY1;
    v24 = (float)(v15 + TargetX1) - TargetX1;
    v25 = (float)(v24 * v24) + (float)(v23 * v23);
    v26 = sqrtf(v25);
    if ( v25 <= 0.0 )
    {
      v27 = 1.0;
    }
    else
    {
      v23 = v23 * (float)(1.0 / v26);
      v27 = v24 * (float)(1.0 / v26);
    }
    v28 = 0;
    v29 = 0;
    v30 = (float)(v18 * v23) + (float)(v16 * v27);
    if ( v30 <= v26 )
      v28 = 1;
    if ( v30 >= 0.0 )
      v29 = 1;
    v21 = v28 & v29;
  }
  if ( CTheScripts::DbgFlag )
    CTheScripts::DrawDebugAngledSquare(
      TargetX1,
      TargetY1,
      TargetX2,
      TargetY2,
      v15 + TargetX2,
      TargetY2 - v14,
      v15 + TargetX1,
      TargetY1 - v14);
  return v21;
}

//----- (0033E5D4) --------------------------------------------------------
int __fastcall IsVecIn3dAngledArea(
        CVector *vecPos,
        float TargetX1,
        float TargetY1,
        float TargetZ1,
        float TargetX2,
        float TargetY2,
        float TargetZ2,
        float DistanceFrom1To4)
{
  float32x2_t v8; // d0
  float32x2_t v9; // d2
  float z; // s2

  v8.n64_f32[0] = TargetZ2;
  v9.n64_f32[0] = TargetZ1;
  z = vecPos->z;
  if ( z < vmin_f32(v9, v8).n64_f32[0] || z > vmax_f32(v9, v8).n64_f32[0] )
    return 0;
  else
    return IsVecIn2dAngledArea(vecPos, TargetX1, TargetY1, TargetX2, TargetY2, DistanceFrom1To4);
}
// 33E5E6: variable 'v9' is possibly undefined
// 33E5E6: variable 'v8' is possibly undefined

//----- (0033E630) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands2500To2599(CRunningScript *this, Int32 CurrCommand)
{
  Int8 v3; // r6
  uint8 *v4; // r1
  unsigned int v5; // r0
  uint8 *v6; // r1
  CRunningScript *v7; // r0
  Int16 v8; // r1
  char v9; // r0
  UInt16 v10; // r0
  float v11; // r1
  bool8 **v12; // r1
  __int64 v13; // kr00_8
  int ActiveCam; // r4
  char *v15; // r0
  int v16; // r2
  CPlayerPed *v17; // r0
  CMatrix *m_pMat; // r2
  const CVector *p_tx; // r1
  CPed *v20; // r5
  __int64 v21; // kr08_8
  CPlayerPed *pPed; // r5
  AssocGroupId m_motionAnimGroup; // r6
  int (**v24)(void); // r0
  int v25; // r1
  uint8 *v26; // r4
  uint8 *v32; // r0
  uint8 *v33; // r0
  __int16 v34; // r0
  uint8 *v35; // r0
  int32 ActualPickupIndex; // r0
  Int32 Index; // r1
  CWanted *PlayerWanted; // r0
  CPed *v39; // r0
  CPed *v40; // r0
  char v41; // r0
  CPlayerPed *PlayerPed; // r0
  Int16 *p_CoorsX; // r0
  unsigned int v44; // r1
  float v45; // s10
  float v46; // s12
  float v47; // s14
  CPedGroupMembership *p_m_membership; // r4
  int v49; // r5
  Int32 v50; // r1
  uint8 *v51; // r5
  CVehicle *v52; // r5
  uint32 nMonetaryValue; // r1
  float v54; // s0
  int32 CarGenerator; // r5
  bool v57; // zf
  bool v58; // zf
  bool v59; // zf
  bool v60; // zf
  bool v61; // zf
  bool v62; // zf
  bool v63; // zf
  char v64; // r0
  CAutomobile *v65; // r0
  CPlayerPed *v66; // r4
  CPedIntelligence *m_pPedIntelligence; // r6
  CTaskComplexUseGoggles *v68; // r5
  CTaskManager *p_m_taskManager; // r0
  CPlayerPedData *m_pPlayerData; // r0
  bool8 *v71; // r1
  bool8 v72; // r0
  CPed *v73; // r0
  CPed *v74; // r2
  unsigned int ActualScriptThingIndex; // r5
  CDecisionMakerTypes *v76; // r0
  CDecisionMakerTypes *v77; // r0
  Int32 v78; // r0
  uint8 *v79; // r1
  unsigned int v80; // r0
  Int32 v81; // r0
  CVehicle *v82; // r2
  Int32 m_PrefsLanguage; // r0
  uint8 *v84; // r0
  GxtChar *v85; // r0
  uint8 *v86; // r2
  CTaskSimpleJetPack *IsCarModel; // r0
  int32 v88; // r0
  char IsPedRegisteredWithEffect; // r0
  CTrain *v90; // r0
  CTrain *v91; // r0
  GxtChar *v92; // r6
  CPed *v93; // r0
  float v94; // s16
  uint8 *v95; // r1
  char v96; // r0
  uint8 *v97; // r0
  CPhysical *v98; // r2
  GxtChar *v99; // r0
  uint8 *v100; // r0
  __int64 v101; // kr30_8
  CPed *v102; // r9
  char v103; // r0
  CPlayerPed *v104; // r0
  uint8 *v105; // r4
  Int8 MostFavoriteRadioStation; // r0
  Int32 v107; // r0
  const CPedAttractorManager *PedAttractorManager; // r0
  CVehicle *v109; // r5
  uint8 *v110; // r1
  int v111; // r1
  _BYTE *v112; // r0
  CEntity *v113; // r1
  char CanSeeThisEntity; // r0
  CAEVehicleAudioEntity *v115; // r0
  CTaskComplexSignalAtPed *v116; // r5
  uint8 CarColourFromGrid; // r0
  int v118; // r0
  uint8 *v119; // r1
  __int64 v120; // kr40_8
  int v121; // r8
  int v122; // r0
  CTaskSimpleCarSetPedOut *v123; // r0
  int v124; // r0
  _DWORD *v125; // r0
  CPhysical *v126; // r5
  int v127; // r4
  unsigned int Mode; // r0
  CVehicle *PlayerVehicle; // r0
  CMatrix *v130; // r2
  const CVector *p_m_translate; // r1
  int v132; // r2
  _DWORD *v133; // r0
  uint8 *v134; // r6
  bool v135; // zf
  CVector SpeedVarDesired; // [sp+0h] [bp-270h] BYREF
  Char v138[8]; // [sp+30h] [bp-240h] BYREF
  CTaskSimpleCarSetPedOut pStringToFill[21]; // [sp+38h] [bp-238h] BYREF
  Char v140[8]; // [sp+23Ah] [bp-36h] BYREF

  v3 = 0;
  switch ( CurrCommand )
  {
    case 2500:
      CRunningScript::CollectParameters(this, 2);
      v4 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v5 = *((_DWORD *)v4 + 268) & 0xFFBFFFFF | ((ScriptParams[1] & 1) << 22);
      goto LABEL_10;
    case 2501:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v20 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v20 = 0;
      }
      PedAttractorManager = GetPedAttractorManager();
      IsPedRegisteredWithEffect = CPedAttractorManager::IsPedRegisteredWithEffect(PedAttractorManager, v20);
      goto LABEL_345;
    case 2502:
    case 2515:
    case 2524:
    case 2538:
    case 2547:
    case 2553:
    case 2560:
    case 2564:
    case 2565:
    case 2573:
      return v3;
    case 2503:
      CRunningScript::CollectParameters(this, 2);
      v21 = *(_QWORD *)ScriptParams;
      pPed = CWorld::Players[ScriptParams[0]].pPed;
      m_motionAnimGroup = pPed->m_motionAnimGroup;
      (*((void (__fastcall **)(CPlayerPed *))pPed->_vptr$CPlaceable + 9))(pPed);
      v24 = pPed->_vptr$CPlaceable;
      pPed->m_nModelIndex = -1;
      ((void (__fastcall *)(CPlayerPed *, _DWORD))v24[6])(pPed, HIDWORD(v21));
      pPed->m_motionAnimGroup = m_motionAnimGroup;
      return 0;
    case 2504:
      LOBYTE(v25) = MobileSettings::settings[24].value;
      goto LABEL_346;
    case 2505:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v26 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v26 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v109 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v109 = 0;
      }
      v118 = *((_DWORD *)v26 + 5);
      v119 = (uint8 *)(v118 + 48);
      if ( !v118 )
        v119 = v26 + 4;
      v120 = *(_QWORD *)v119;
      v121 = *((_DWORD *)v119 + 2);
      v122 = CCarEnterExit::ComputeTargetDoorToExit(v109, (const CPed *)v26);
      CTaskSimpleCarSetPedOut::CTaskSimpleCarSetPedOut(pStringToFill, v109, v122, 0);
      CTaskSimpleCarSetPedOut::ProcessPed(v123, (CPed *)v26);
      v124 = *((_DWORD *)v26 + 5);
      if ( v124 )
      {
        *(_DWORD *)(v124 + 48) = v120;
        *(_DWORD *)(*((_DWORD *)v26 + 5) + 52) = HIDWORD(v120);
        v125 = (_DWORD *)(*((_DWORD *)v26 + 5) + 56);
      }
      else
      {
        v125 = v26 + 12;
        *(_QWORD *)(v26 + 4) = v120;
      }
      *v125 = v121;
      CTaskSimpleCarSetPedOut::~CTaskSimpleCarSetPedOut(pStringToFill);
      return 0;
    case 2506:
      CRunningScript::CollectParameters(this, 6);
      _R2 = ScriptParams[3] << 23;
      __asm { UXTB16.W        R2, R2 }
      v3 = 0;
      *(_DWORD *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][68] = (ScriptParams[1] << 18) & 0x40000 | *(_DWORD *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][68] & 0xFF43FFFF | ((ScriptParams[2] & 1) << 19) | _R2 | (ScriptParams[4] << 20) & 0x100000 | (ScriptParams[5] << 21) & 0x200000;
      return v3;
    case 2507:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v32 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v32 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v110 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v110 = 0;
      }
      goto LABEL_344;
    case 2508:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v33 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v33 = 0;
      }
      Index = ScriptParams[1];
      if ( ScriptParams[1] <= -1 )
        Index = CTheScripts::UsedObjectArray[-ScriptParams[1]].Index;
      v3 = 0;
      LOBYTE(Index) = Index == *((__int16 *)v33 + 19);
      goto LABEL_309;
    case 2511:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v34 = ScriptParams[1];
      if ( ScriptParams[1] )
        v34 = 1;
      *(_WORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1484] = *(_WORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1484] & 0xFDFF | (v34 << 9);
      return v3;
    case 2512:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v35 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v35 = 0;
      }
      v111 = *((_DWORD *)v35 + 360);
      if ( v111 )
      {
        if ( v111 != 9 )
          goto LABEL_284;
        v112 = v35 + 2072;
      }
      else
      {
        v112 = v35 + 2420;
      }
      LOBYTE(v25) = *v112 == 4;
      goto LABEL_346;
    case 2513:
      CRunningScript::CollectParameters(this, 1);
      ActualPickupIndex = CPickups::GetActualPickupIndex(ScriptParams[0]);
      LOBYTE(Index) = 0;
      v3 = 0;
      if ( ActualPickupIndex != -1 )
        LOBYTE(Index) = 1;
      goto LABEL_309;
    case 2514:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      g_LoadMonitor.m_bEnableAmbientCrime = ScriptParams[0] != 0;
      return v3;
    case 2516:
      PlayerWanted = FindPlayerWanted(-1);
      CWanted::ClearWantedLevelAndGoOnParole(PlayerWanted);
      return 0;
    case 2517:
      CRunningScript::CollectParameters(this, 5);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v39 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v39 = 0;
      }
      v3 = 0;
      ScriptParams[0] = CPed::Say(
                          v39,
                          ScriptParams[1],
                          0,
                          1.0,
                          LOBYTE(ScriptParams[2]),
                          LOBYTE(ScriptParams[3]),
                          LOBYTE(ScriptParams[4]));
      goto LABEL_253;
    case 2518:
      CRunningScript::CollectParameters(this, 5);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v40 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v40 = 0;
      }
      CPed::SayScript(v40, ScriptParams[1], ScriptParams[2], ScriptParams[3], ScriptParams[4]);
      return 0;
    case 2519:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v41 = ScriptParams[1];
      if ( ScriptParams[1] )
        v41 = 1;
      CWorld::Players[ScriptParams[0]].pPed->m_pPlayerData->m_bForceInteriorLighting = v41;
      return v3;
    case 2520:
      CRunningScript::CollectParameters(this, 1);
      return 0;
    case 2521:
      PlayerPed = FindPlayerPed(-1);
      CWorld::UseDetonator(PlayerPed);
      return 0;
    case 2522:
      CRunningScript::CollectParameters(this, 3);
      pStringToFill[0].CTaskSimple = *(CTaskSimple *)ScriptParams;
      pStringToFill[0].m_pTargetVehicle = (CVehicle *)ScriptParams[2];
      p_CoorsX = &CPickups::aPickUps[0].CoorsX;
      v44 = 0;
      while ( 1 )
      {
        if ( *((_BYTE *)p_CoorsX + 12) == 8 )
        {
          v45 = (float)((float)p_CoorsX[1] * 0.125) - *(float *)&ScriptParams[1];
          v46 = (float)((float)*p_CoorsX * 0.125) - *(float *)ScriptParams;
          v47 = (float)((float)p_CoorsX[2] * 0.125) - *(float *)&ScriptParams[2];
          if ( sqrtf((float)((float)(v46 * v46) + (float)(v45 * v45)) + (float)(v47 * v47)) < 0.5 )
            break;
        }
        ++v44;
        p_CoorsX += 16;
        if ( v44 >= 0x26C )
        {
LABEL_284:
          LOBYTE(v25) = 0;
          goto LABEL_346;
        }
      }
LABEL_328:
      LOBYTE(v25) = 1;
      goto LABEL_346;
    case 2523:
      CRunningScript::CollectParameters(this, 3);
      CMenuSystem::SetColumnWidth(
        ScriptParams[0],
        ScriptParams[1],
        (unsigned int)(float)((float)((float)RsGlobal.screenWidth / 640.0) * (float)LOWORD(ScriptParams[2])));
      return 0;
    case 2525:
      CRunningScript::CollectParameters(this, 1);
      p_m_membership = &CPedGroups::ms_groups[FindPlayerPed(-1)->m_pPlayerData->m_PlayerGroup].m_membership;
      v49 = CPedGroupMembership::CountMembersExcludingLeader(p_m_membership);
      v50 = v49 - FindPlayerPed(-1)->m_pPlayerData->m_nScriptLimitToGangSize - ScriptParams[0];
      if ( v50 >= 1 )
        CPedGroupMembership::RemoveNFollowers(p_m_membership, v50);
      return 0;
    case 2526:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v51 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v51 = 0;
      }
      if ( !CTaskManager::FindActiveTaskByType((const CTaskManager *)(*((_DWORD *)v51 + 272) + 4), 701)
        && !CTaskManager::FindActiveTaskByType((const CTaskManager *)(*((_DWORD *)v51 + 272) + 4), 700) )
      {
        goto LABEL_284;
      }
      LOBYTE(v25) = CTaskManager::FindActiveTaskByType((const CTaskManager *)(*((_DWORD *)v51 + 272) + 4), 800) == 0;
      goto LABEL_346;
    case 2528:
      CRunningScript::CollectParameters(this, 5);
      v3 = 0;
      pStringToFill[0].CTaskSimple = *(CTaskSimple *)ScriptParams;
      pStringToFill[0].m_pTargetVehicle = (CVehicle *)ScriptParams[2];
      if ( ScriptParams[4] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[4] >> 8] == LOBYTE(ScriptParams[4]) )
      {
        v52 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[4] >> 8];
      }
      else
      {
        v52 = 0;
      }
      CGameLogic::SetUpSkip(*(CVector *)ScriptParams, *(float *)&ScriptParams[3], 0, v52, 0);
      return v3;
    case 2529:
      CRunningScript::CollectParameters(this, 1);
      nMonetaryValue = mod_HandlingManager.m_aHandlingData[*((unsigned __int8 *)&CModelInfo::ms_modelInfoPtrs[ScriptParams[0]][1].m_flags
                                                           + 2)].nMonetaryValue;
      goto LABEL_120;
    case 2530:
      CRunningScript::CollectParameters(this, 12);
      v54 = *(float *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[2] > -100.0 )
        v54 = *(float *)&ScriptParams[2] + 0.015;
      CarGenerator = CTheCarGenerators::CreateCarGenerator(
                       *(const float *)ScriptParams,
                       *(const float *)&ScriptParams[1],
                       v54,
                       *(const float *)&ScriptParams[3],
                       ScriptParams[4],
                       ScriptParams[5],
                       ScriptParams[6],
                       ScriptParams[7],
                       ScriptParams[8],
                       ScriptParams[9],
                       ScriptParams[10],
                       ScriptParams[11],
                       0,
                       1u);
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 9u);
      _ZF = LOBYTE(pStringToFill[0]._vptr$CTask) == 95;
      if ( LOBYTE(pStringToFill[0]._vptr$CTask) != 95 )
        _ZF = LOBYTE(pStringToFill[0]._vptr$CTask) == 0;
      if ( _ZF )
        LOBYTE(pStringToFill[0]._vptr$CTask) = 32;
      v57 = BYTE1(pStringToFill[0]._vptr$CTask) == 0;
      if ( BYTE1(pStringToFill[0]._vptr$CTask) )
        v57 = BYTE1(pStringToFill[0]._vptr$CTask) == 95;
      if ( v57 )
        BYTE1(pStringToFill[0]._vptr$CTask) = 32;
      v58 = BYTE2(pStringToFill[0]._vptr$CTask) == 95;
      if ( BYTE2(pStringToFill[0]._vptr$CTask) != 95 )
        v58 = BYTE2(pStringToFill[0]._vptr$CTask) == 0;
      if ( v58 )
        BYTE2(pStringToFill[0]._vptr$CTask) = 32;
      v59 = HIBYTE(pStringToFill[0]._vptr$CTask) == 95;
      if ( HIBYTE(pStringToFill[0]._vptr$CTask) != 95 )
        v59 = HIBYTE(pStringToFill[0]._vptr$CTask) == 0;
      if ( v59 )
        HIBYTE(pStringToFill[0]._vptr$CTask) = 32;
      v60 = LOBYTE(pStringToFill[0].m_pParent) == 95;
      if ( LOBYTE(pStringToFill[0].m_pParent) != 95 )
        v60 = LOBYTE(pStringToFill[0].m_pParent) == 0;
      if ( v60 )
        LOBYTE(pStringToFill[0].m_pParent) = 32;
      v61 = BYTE1(pStringToFill[0].m_pParent) == 95;
      if ( BYTE1(pStringToFill[0].m_pParent) != 95 )
        v61 = BYTE1(pStringToFill[0].m_pParent) == 0;
      if ( v61 )
        BYTE1(pStringToFill[0].m_pParent) = 32;
      v62 = BYTE2(pStringToFill[0].m_pParent) == 95;
      if ( BYTE2(pStringToFill[0].m_pParent) != 95 )
        v62 = BYTE2(pStringToFill[0].m_pParent) == 0;
      if ( v62 )
        BYTE2(pStringToFill[0].m_pParent) = 32;
      v63 = HIBYTE(pStringToFill[0].m_pParent) == 95;
      if ( HIBYTE(pStringToFill[0].m_pParent) != 95 )
        v63 = HIBYTE(pStringToFill[0].m_pParent) == 0;
      if ( v63 )
        HIBYTE(pStringToFill[0].m_pParent) = 32;
      v3 = 0;
      LOBYTE(pStringToFill[0].m_pTargetVehicle) = 0;
      CSpecialPlateHandler::Add(
        &CTheCarGenerators::m_SpecialPlateHandler,
        CarGenerator,
        (unsigned __int8 *)pStringToFill);
      ScriptParams[0] = CarGenerator;
LABEL_253:
      CRunningScript::StoreParameters(this, 1);
      return v3;
    case 2531:
      CRunningScript::CollectParameters(this, 1);
      v25 = (*(unsigned __int16 *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1484] >> 6) & 1;
      goto LABEL_346;
    case 2532:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      CObject::bAircraftCarrierSamSiteDisabled = ScriptParams[0] == 0;
      return v3;
    case 2533:
      CRunningScript::CollectParameters(this, 7);
      v3 = 0;
      pStringToFill[0].CTaskSimple = *(CTaskSimple *)ScriptParams;
      pStringToFill[0].m_pTargetVehicle = (CVehicle *)ScriptParams[2];
      memset(&SpeedVarDesired, 0, sizeof(SpeedVarDesired));
      CPointLights::AddLight(
        0,
        *(CVector *)ScriptParams,
        SpeedVarDesired,
        *(float *)&ScriptParams[6],
        (float)ScriptParams[3] / 255.0,
        (float)ScriptParams[4] / 255.0,
        (float)ScriptParams[5] / 255.0,
        0,
        1,
        0);
      return v3;
    case 2534:
      CRunningScript::CollectParameters(this, 1);
      v64 = ScriptParams[0];
      if ( ScriptParams[0] )
        v64 = 1;
      CEntryExitManager::EnableBurglaryHouses(v64);
      return 0;
    case 2535:
      CRunningScript::CollectParameters(this, 1);
      LOBYTE(v25) = ((CPad::GetPad(ScriptParams[0])->DisablePlayerControls >> 5) & 1) == 0;
      goto LABEL_346;
    case 2536:
      CRunningScript::CollectParameters(this, 1);
      nMonetaryValue = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][51];
LABEL_120:
      ScriptParams[0] = nMonetaryValue;
      goto LABEL_183;
    case 2537:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v65 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v65 = 0;
      }
      CAutomobile::NitrousControl(v65, 1);
      return 0;
    case 2539:
      CRunningScript::CollectParameters(this, 2);
      v66 = CWorld::Players[ScriptParams[0]].pPed;
      if ( !ScriptParams[1] )
      {
        CPed::TakeOffGoggles(CWorld::Players[ScriptParams[0]].pPed);
        return 0;
      }
      if ( !v66->m_pGogglesClump )
        return 0;
      m_pPedIntelligence = v66->m_pPedIntelligence;
      if ( m_pPedIntelligence->m_taskManager.m_tasks[3] )
        return 0;
      v68 = (CTaskComplexUseGoggles *)CTask::operator new(0xCu);
      CTaskComplexUseGoggles::CTaskComplexUseGoggles(v68);
      p_m_taskManager = &m_pPedIntelligence->m_taskManager;
      v3 = 0;
      CTaskManager::SetTask(p_m_taskManager, v68, 3, 0);
      m_pPlayerData = v66->m_pPlayerData;
      if ( m_pPlayerData )
      {
        m_pPlayerData->m_bDontAllowWeaponChange = 1;
        return 0;
      }
      return v3;
    case 2540:
      CRunningScript::CollectParameters(this, 1);
      v12 = (bool8 **)&gAllowScriptedFixedCameraCollision_ptr;
      goto LABEL_131;
    case 2541:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v73 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v73 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v113 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v113 = 0;
      }
      v3 = 0;
      CanSeeThisEntity = CPed::OurPedCanSeeThisEntity(v73, v113, 0);
      goto LABEL_308;
    case 2542:
      CRunningScript::CollectParameters(this, 1);
      v71 = &CHud::bScriptForceDisplayWithCounters;
      v72 = ScriptParams[0];
      goto LABEL_136;
    case 2543:
      CRunningScript::CollectParameters(this, 4);
      v3 = 0;
      TheCamera.m_VehicleTweaks[4] = *(CCamera::CVehicleCamTweak *)ScriptParams;
      return v3;
    case 2544:
      v3 = 0;
      TheCamera.m_VehicleTweaks[4].m_ModelId = -1;
      TheCamera.m_VehicleTweaks[4].m_LenMod = 1.0;
      TheCamera.m_VehicleTweaks[4].m_TargetZMod = 1.0;
      TheCamera.m_VehicleTweaks[4].m_PitchMod = 0.0;
      return v3;
    case 2545:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v74 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v74 = 0;
      }
      CAudioEngine::ReportMissionAudioEvent(&AudioEngine, ScriptParams[1], v74);
      return 0;
    case 2546:
      CRunningScript::CollectParameters(this, 1);
      ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 7u);
      if ( ActualScriptThingIndex > 0x13 )
        goto LABEL_284;
      if ( !CDecisionMakerTypes::m_pPedDecisionTypes )
      {
        v76 = (CDecisionMakerTypes *)operator new(0xF1C0u);
        CDecisionMakerTypes::CDecisionMakerTypes(v76);
        CDecisionMakerTypes::m_pPedDecisionTypes = v77;
      }
      LOBYTE(v25) = CDecisionMakerTypes::m_bIsActive[ActualScriptThingIndex];
      goto LABEL_346;
    case 2548:
      CRunningScript::CollectParameters(this, 2);
      v78 = ScriptParams[1];
      v79 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( ScriptParams[1] )
        v78 = 1;
      v80 = *((_DWORD *)v79 + 292) & 0xFFFF7FFF | (v78 << 15);
      goto LABEL_232;
    case 2549:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
        CAEPedSpeechAudioEntity::DisableAllPedSpeech();
      else
        CAEPedSpeechAudioEntity::EnableAllPedSpeech();
      return 0;
    case 2550:
      CRunningScript::CollectParameters(this, 2);
      v81 = ScriptParams[1];
      v79 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( ScriptParams[1] )
        v81 = 1;
      v80 = *((_DWORD *)v79 + 292) & 0xFFFDFFFF | (v81 << 17);
      goto LABEL_232;
    case 2551:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v82 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v82 = 0;
      }
      CAudioEngine::ReportMissionAudioEvent(&AudioEngine, ScriptParams[1], v82);
      return 0;
    case 2552:
      CGameLogic::DoWeaponStuffAtStartOf2PlayerGame(1);
      return 0;
    case 2554:
      v3 = 0;
      Index = CPad::GetPad(0)->JustOutOfFrontEnd;
      if ( Index != 1 )
        LOBYTE(Index) = 0;
      goto LABEL_309;
    case 2555:
      m_PrefsLanguage = FrontEndMenuManager.m_PrefsLanguage;
      if ( FrontEndMenuManager.m_PrefsLanguage > 4 )
        m_PrefsLanguage = 0;
      ScriptParams[0] = m_PrefsLanguage;
      goto LABEL_183;
    case 2556:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v84 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v84 = 0;
      }
      v3 = 0;
      CanSeeThisEntity = (*(int (__fastcall **)(uint8 *, _DWORD))(*(_DWORD *)v84 + 56))(v84, 0);
LABEL_308:
      LOBYTE(Index) = CanSeeThisEntity;
LABEL_309:
      CRunningScript::UpdateCompareFlag(this, Index);
      return v3;
    case 2557:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      v85 = CText::Get(&TheText, (const unsigned __int8 *)pStringToFill);
      ScriptParams[0] = (int)CFont::GetStringWidth(v85, 1u, 1u);
      goto LABEL_183;
    case 2558:
      CRunningScript::CollectParameters(this, 1);
      v86 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( (v86[914] & 2) == 0 )
        return 0;
      v3 = 0;
      if ( !*((_DWORD *)v86 + 360) )
        *(_WORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][2176] = 0;
      return v3;
    case 2559:
      CRunningScript::CollectParameters(this, 3);
      pStringToFill[0].CTaskSimple = *(CTaskSimple *)ScriptParams;
      pStringToFill[0].m_pTargetVehicle = (CVehicle *)ScriptParams[2];
      CRestart::SetRespawnPointForDurationOfMission(*(CVector *)ScriptParams);
      return 0;
    case 2561:
      CRunningScript::CollectParameters(this, 1);
      IsCarModel = (CTaskSimpleJetPack *)CModelInfo::IsCarModel(ScriptParams[0]);
      goto LABEL_191;
    case 2562:
      CRunningScript::CollectParameters(this, 2);
      v88 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 2u);
      if ( v88 < 0 )
        return 0;
      v3 = 0;
      CTheScripts::ScriptSearchLightArray[v88].bRenderGroundLight = ScriptParams[1];
      return v3;
    case 2563:
      IsPedRegisteredWithEffect = CGangWars::GangWarFightingGoingOn();
      goto LABEL_345;
    case 2566:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v90 = (CTrain *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v90 = 0;
      }
      IsPedRegisteredWithEffect = CTrain::IsNextStationAllowed(v90);
      goto LABEL_345;
    case 2567:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v91 = (CTrain *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v91 = 0;
      }
      CTrain::SkipToNextAllowedStation(v91);
      return 0;
    case 2568:
      CRunningScript::ReadTextLabelFromScript(this, v140, 8u);
      v92 = CText::Get(&TheText, v140);
      CRunningScript::CollectParameters(this, 1);
      CMessages::InsertNumberInString(v92, ScriptParams[0], -1, -1, -1, -1, -1, (GxtChar *)pStringToFill);
      CFont::SetFontStyle(CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextFontStyle);
      CFont::SetScale(
        (float)(CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextYScale
              * (float)((float)RsGlobal.screenHeight / 448.0))
      * 0.5);
      ScriptParams[0] = (int)CFont::GetStringWidth((GxtChar *)pStringToFill, 1u, 1u);
LABEL_183:
      v7 = this;
      v8 = 1;
      goto LABEL_184;
    case 2569:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v93 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v93 = 0;
      }
      if ( ScriptParams[1] )
      {
        v3 = 0;
        if ( v93 )
          CPed::DisablePedSpeechForScriptSpeech(v93, 0);
        return v3;
      }
      if ( v93 )
        CPed::EnablePedSpeechForScriptSpeech(v93);
      return 0;
    case 2570:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      *(_DWORD *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][324] = *(_DWORD *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][324] & 0xFEFFFFFF | ((ScriptParams[1] & 1) << 24);
      return v3;
    case 2571:
      CRunningScript::CollectParameters(this, 4);
      pStringToFill[0].CTaskSimple = *(CTaskSimple *)ScriptParams;
      pStringToFill[0].m_pTargetVehicle = (CVehicle *)ScriptParams[2];
      v94 = (float)(*(float *)&ScriptParams[3] * 3.1416) / 180.0;
      CTimer::Stop();
      CRenderer::RequestObjectsInDirection((const CVector *)pStringToFill, v94, 32);
      CStreaming::LoadScene((const CVector *)pStringToFill);
      CTimer::Update();
      return 0;
    case 2572:
      CRunningScript::CollectParameters(this, 1);
      IsCarModel = CPedIntelligence::GetTaskJetPack(CWorld::Players[ScriptParams[0]].pPed->m_pPedIntelligence);
LABEL_191:
      LOBYTE(v25) = (_BYTE)IsCarModel;
      if ( IsCarModel )
        LOBYTE(v25) = 1;
      goto LABEL_346;
    case 2574:
      CRunningScript::CollectParameters(this, 1);
      CMessages::ClearThisBigPrintNow(ScriptParams[0] - 1);
      return 0;
    case 2575:
      IsPedRegisteredWithEffect = CMenuManager::HasLanguageChanged(&FrontEndMenuManager);
      goto LABEL_345;
    case 2576:
      CRunningScript::CollectParameters(this, 2);
      v10 = ScriptParams[0];
      v11 = (float)ScriptParams[1];
      goto LABEL_197;
    case 2577:
      CRunningScript::CollectParameters(this, 3);
      v95 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v3 = 0;
      v95[1082] = ScriptParams[1];
      v95[1083] = ScriptParams[2];
      return v3;
    case 2578:
      CRunningScript::CollectParameters(this, 1);
      v6 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      ScriptParams[0] = v6[1082];
      ScriptParams[1] = v6[1083];
      v7 = this;
      v8 = 2;
LABEL_184:
      CRunningScript::StoreParameters(v7, v8);
      return 0;
    case 2579:
      CPopulation::ManageAllPopulation();
      return 0;
    case 2580:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      v96 = ScriptParams[0];
      if ( ScriptParams[0] )
        v96 = 1;
      CGarages::NoResprays = v96;
      CGarages::AllRespraysCloseOrOpen(ScriptParams[0] == 0);
      return v3;
    case 2581:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v97 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v97 = 0;
      }
      v25 = *((_DWORD *)v97 + 268);
      if ( (v25 & 0x1000000) == 0 )
        goto LABEL_284;
      v132 = *((_DWORD *)v97 + 267);
      v133 = v97 + 1068;
      *v133 = v132;
      v133[1] = v25 & 0xFEFFFFFF;
      LOBYTE(v25) = 1;
      goto LABEL_346;
    case 2582:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v98 = (CPhysical *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v98 = 0;
      }
      CAudioEngine::AttachMissionAudioToPhysical(&AudioEngine, LOBYTE(ScriptParams[0]) - 1, v98);
      return 0;
    case 2583:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v9 = ScriptParams[1];
      if ( ScriptParams[1] )
        v9 = 1;
      *((_BYTE *)&CTheCarGenerators::CarGeneratorArray[LOWORD(ScriptParams[0])] + 13) = *((_BYTE *)&CTheCarGenerators::CarGeneratorArray[LOWORD(ScriptParams[0])]
                                                                                        + 13) & 0xF7 | (8 * v9);
      return v3;
    case 2584:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      CRunningScript::ReadTextLabelFromScript(this, v140, 8u);
      CRunningScript::ReadTextLabelFromScript(this, v138, 8u);
      CRunningScript::CollectParameters(this, 3);
      CConversations::SetUpConversationNode(
        (unsigned __int8 *)pStringToFill,
        v140,
        v138,
        -ScriptParams[0],
        -ScriptParams[1],
        -ScriptParams[2]);
      return 0;
    case 2585:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      v99 = CText::Get(&TheText, (const unsigned __int8 *)pStringToFill);
      CHud::SetZoneName(v99, 1u);
      return 0;
    case 2586:
      CRunningScript::PlayAnimScriptCommand(this, 2586);
      return 0;
    case 2587:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v32 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v32 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v110 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v110 = 0;
      }
      if ( v32[1157] << 31 )
        v126 = (CPhysical *)*((_DWORD *)v32 + 356);
      else
        v126 = 0;
      if ( !(v110[1157] << 31) )
      {
        if ( !v126 )
          goto LABEL_344;
        goto LABEL_340;
      }
      v134 = (uint8 *)*((_DWORD *)v110 + 356);
      v135 = v126 == 0;
      if ( v126 )
        v135 = v134 == 0;
      if ( v135 )
      {
        if ( v126 )
        {
LABEL_340:
          v32 = v110;
          v110 = (uint8 *)v126;
          goto LABEL_344;
        }
        if ( v134 )
          v110 = (uint8 *)*((_DWORD *)v110 + 356);
      }
      else
      {
        if ( CPhysical::GetHasCollidedWith(v126, *((CEntity **)v110 + 356)) )
          goto LABEL_328;
        v32 = v134;
        v110 = (uint8 *)v126;
      }
LABEL_344:
      IsPedRegisteredWithEffect = CPhysical::GetHasCollidedWith((CPhysical *)v32, (CEntity *)v110);
LABEL_345:
      LOBYTE(v25) = IsPedRegisteredWithEffect;
LABEL_346:
      CRunningScript::UpdateCompareFlag(this, v25);
      return 0;
    case 2588:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v100 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v100 = 0;
      }
      v115 = (CAEVehicleAudioEntity *)(v100 + 316);
      if ( ScriptParams[1] )
        CAEVehicleAudioEntity::EnableHelicoptor(v115);
      else
        CAEVehicleAudioEntity::DisableHelicoptor(v115);
      return 0;
    case 2589:
      CRunningScript::CollectParameters(this, 2);
      v101 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v102 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v102 = 0;
      }
      v116 = (CTaskComplexSignalAtPed *)CTask::operator new(0x18u);
      v3 = 0;
      CTaskComplexSignalAtPed::CTaskComplexSignalAtPed(v116, v102, -1, 0);
      CRunningScript::GivePedScriptedTask(this, v101, v116, 2589);
      return v3;
    case 2590:
      CRunningScript::CollectParameters(this, 1);
      v103 = ScriptParams[0];
      CWeapon::m_nTakePhotoFrames = 2;
      CWeapon::ms_bTakePhoto = 1;
      if ( ScriptParams[0] )
        v103 = 1;
      CPostEffects::m_bSavePhotoFromScript = v103;
      return 0;
    case 2591:
      CRunningScript::CollectParameters(this, 2);
      v10 = ScriptParams[0];
      v11 = *(float *)&ScriptParams[1];
LABEL_197:
      CStats::IncrementStat(v10, v11);
      return 0;
    case 2592:
      CRunningScript::CollectParameters(this, 2);
      v104 = FindPlayerPed(ScriptParams[0]);
      CPlayerPed::ForceGroupToAlwaysFollow(v104, ScriptParams[1] != 0);
      return 0;
    case 2593:
      CRunningScript::CollectParameters(this, 2);
      v4 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v5 = *((_DWORD *)v4 + 268) & 0xFDFFFFFF | ((ScriptParams[1] & 1) << 25);
LABEL_10:
      *((_DWORD *)v4 + 268) = v5;
      return 0;
    case 2594:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v105 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v105 = 0;
      }
      CarColourFromGrid = CMenuSystem::GetCarColourFromGrid(ScriptParams[0], ScriptParams[3]);
      v3 = 0;
      if ( ScriptParams[2] == 1 )
        v105[1080] = CarColourFromGrid;
      else
        v105[1081] = CarColourFromGrid;
      return v3;
    case 2595:
      CRunningScript::CollectParameters(this, 3);
      CMenuSystem::HighlightOneItem(ScriptParams[0], ScriptParams[1], ScriptParams[2]);
      return 0;
    case 2596:
      CRunningScript::CollectParameters(this, 1);
      v12 = (bool8 **)CCullZones::bMilitaryZonesDisabled;
LABEL_131:
      v71 = *v12;
      v72 = ScriptParams[0] != 0;
LABEL_136:
      *v71 = v72;
      return 0;
    case 2597:
      CRunningScript::CollectParameters(this, 2);
      v13 = *(_QWORD *)ScriptParams;
      ActiveCam = TheCamera.ActiveCam;
      v15 = (char *)&TheCamera + 528 * TheCamera.ActiveCam;
      v16 = *((unsigned __int16 *)v15 + 191);
      *((_DWORD *)v15 + 129) = ScriptParams[1];
      *((_DWORD *)v15 + 125) = v13;
      if ( v16 == 4 )
      {
        v17 = FindPlayerPed(-1);
        m_pMat = v17->m_pMat;
        v3 = 0;
        p_tx = (const CVector *)&m_pMat->tx;
        if ( !m_pMat )
          p_tx = &v17->m_transform.m_translate;
        CCam::Process_FollowPed_SA(&TheCamera.Cams[ActiveCam], p_tx, 0.0, 0.0, 0.0, 1);
      }
      else
      {
        v3 = 0;
        if ( FindPlayerVehicle(-1, 0) )
        {
          v3 = 0;
          v127 = TheCamera.ActiveCam;
          Mode = (unsigned __int16)TheCamera.Cams[TheCamera.ActiveCam].Mode;
          if ( Mode <= 0x16 && ((1 << Mode) & (unsigned int)&loc_440008) != 0 )
          {
            v3 = 0;
            PlayerVehicle = FindPlayerVehicle(-1, 0);
            v130 = PlayerVehicle->m_pMat;
            p_m_translate = (const CVector *)&v130->tx;
            if ( !v130 )
              p_m_translate = &PlayerVehicle->m_transform.m_translate;
            CCam::Process_FollowCar_SA(&TheCamera.Cams[v127], p_m_translate, 0.0, 0.0, 0.0, 1);
          }
        }
      }
      return v3;
    case 2598:
      MostFavoriteRadioStation = CStats::FindMostFavoriteRadioStation();
      CAudioEngine::RetuneRadio(&AudioEngine, MostFavoriteRadioStation);
      return 0;
    case 2599:
      CRunningScript::CollectParameters(this, 2);
      v107 = ScriptParams[1];
      v79 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( ScriptParams[1] )
        v107 = 1;
      v80 = *((_DWORD *)v79 + 292) & 0xFFF7FFFF | (v107 << 19);
LABEL_232:
      *((_DWORD *)v79 + 292) = v80;
      return 0;
    default:
      return -1;
  }
}
// 33F2F4: variable 'v77' is possibly undefined
// 33FF20: variable 'v123' is possibly undefined
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 678210: using guessed type char *CCullZones::bMilitaryZonesDisabled[6];
// 6793D0: using guessed type char (*CDecisionMakerTypes::m_bIsActive)[20];
// 679D88: using guessed type char *CObject::bAircraftCarrierSamSiteDisabled[5];

//----- (00340240) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands2600To2699(CRunningScript *this, Int32 CurrCommand)
{
  Int8 v4; // r5
  GxtChar *v5; // r8
  uint8 *v6; // r5
  float v7; // r4
  CTaskSimpleClimb *TaskClimb; // r0
  Bool8 m_PrefsUseWideScreen; // r1
  GxtChar *v10; // r1
  CWidgetHelpText *v11; // r5
  Bool8 IsStringQueued; // r0
  char **v13; // r1
  __int64 v14; // kr00_8
  int v15; // r9
  int v16; // r6
  float v17; // s16
  Int32 v18; // r0
  uint8 *v19; // r4
  CPlayerPed *PlayerPed; // r0
  int v21; // r0
  int v22; // r0
  int m_nCarZoom; // r0
  CVehicle *v24; // r6
  char *v25; // r1
  char v26; // r0
  int32 Index; // r1
  bool v28; // zf
  CPedPool *v29; // r0
  int32 m_nSize; // r1
  int v31; // r5
  float v32; // s24
  float v33; // s26
  float v34; // s16
  float v35; // s18
  float v36; // s20
  float v37; // s22
  int v38; // r6
  int v39; // r2
  CPool<CPed,CCopPed>::StorageType *m_aStorage; // r0
  uint8 *v41; // r11
  int v42; // r8
  bool v43; // nf
  int v44; // r9
  int IsPedDead; // r0
  bool v46; // zf
  CPedGroup *PedsGroup; // r0
  int v48; // r1
  float *v49; // r0
  float v50; // s0
  float v51; // s0
  int v52; // r1
  char **v53; // r1
  float v54; // s0
  bool8 v55; // r0
  int InputType; // r0
  bool IsTouched; // r0
  int WidgetPosition; // r5
  CTouchInterface::WidgetIDs v59; // r5
  Int32 v60; // r0
  int v61; // r1
  int v62; // r0
  int **v63; // r1
  float WidgetValue; // r6
  Bool8 v65; // r1
  CRunningScript *v66; // r0
  Int16 v67; // r1
  Bool8 v68; // r1
  UInt8 *PCPointer; // r0
  int v70; // r1
  UInt8 v71; // r6
  UInt8 *v72; // r0
  int v73; // r1
  UInt8 v74; // r6
  UInt8 *v75; // r0
  int v76; // r1
  UInt8 v77; // r6
  bool v78; // r0
  CWidget *v79; // r4
  UInt8 *v80; // r0
  int i; // r1
  UInt8 v82; // r6
  unsigned __int8 *ScriptName; // r1
  eSaveTypes v84; // r0
  intro_text_line *v85; // r1
  uint8 ScriptTextFontStyle; // r0
  float v87; // r4
  GxtChar *v88; // r0
  float StringWidth; // r0
  float v90; // s0
  intro_text_line *v91; // r0
  float v92; // s2
  float ScriptTextYScale; // s0
  intro_text_line *v94; // r0
  intro_text_line *v95; // r0
  float v96; // r4
  GxtChar *v97; // r0
  float v98; // r0
  float v99; // s0
  intro_text_line *v100; // r0
  float v101; // s2
  float v102; // s0
  char v103; // r0
  uint8 v104; // r6
  uint8 v105; // r5
  bool IsCarColourInGrid; // r0
  uint8 CarColourFromGrid; // r0
  Char *v108; // r4
  float v109; // r5
  CRunningScript *v110; // r0
  int32 value; // r0
  bool v112; // zf
  bool v113; // zf
  CTaskComplexFollowNodeRoute *v115; // r5
  float v116; // s0
  intro_text_line *v117; // r0
  UInt16 v118; // r0
  intro_text_line *v119; // r1
  float v120; // r0
  UInt16 v121; // r2
  float v122; // [sp+24h] [bp-3A4h] BYREF
  float height; // [sp+28h] [bp-3A0h] BYREF
  float width; // [sp+2Ch] [bp-39Ch] BYREF
  WidgetPosition pDest[50]; // [sp+30h] [bp-398h] BYREF
  float fScaleX[3]; // [sp+35Ch] [bp-6Ch] BYREF
  unsigned int pStringToFill[3]; // [sp+368h] [bp-60h] BYREF

  v4 = 0;
  switch ( CurrCommand )
  {
    case 2600:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v6 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        if ( v6 )
        {
          v7 = *(float *)&ScriptParams[1];
          if ( CPedIntelligence::GetTaskSwim(*((const CPedIntelligence **)v6 + 272)) )
            CPedIntelligence::GetTaskSwim(*((const CPedIntelligence **)v6 + 272))->m_fControlSpeed = v7;
        }
      }
      return 0;
    case 2601:
      CRunningScript::CollectParameters(this, 1);
      TaskClimb = CPedIntelligence::GetTaskClimb(CWorld::Players[ScriptParams[0]].pPed->m_pPedIntelligence);
      m_PrefsUseWideScreen = (unsigned __int8)TaskClimb;
      if ( TaskClimb )
        m_PrefsUseWideScreen = 1;
      goto LABEL_180;
    case 2602:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      v10 = CText::Get(&TheText, (const unsigned __int8 *)pStringToFill);
      v11 = (CWidgetHelpText *)CTouchInterface::m_pWidgets[162];
      if ( !CTouchInterface::m_pWidgets[162] )
        goto LABEL_232;
      CMessages::GxtStringCopy((GxtChar *)pDest, v10, 0x190u);
      IsStringQueued = CWidgetHelpText::IsStringQueued(v11, (GxtChar *)pDest);
      goto LABEL_179;
    case 2603:
      m_PrefsUseWideScreen = FrontEndMenuManager.m_PrefsUseWideScreen;
      goto LABEL_180;
    case 2604:
      CRunningScript::CollectParameters(this, 1);
      v13 = &CTheScripts::bDrawSubtitlesBeforeFade;
      goto LABEL_45;
    case 2605:
      CRunningScript::CollectParameters(this, 1);
      v13 = &CTheScripts::bDrawOddJobTitleBeforeFade;
      goto LABEL_45;
    case 2606:
      CRunningScript::CollectParameters(this, 7);
      v14 = *(_QWORD *)ScriptParams;
      v15 = ScriptParams[4];
      v16 = ScriptParams[5];
      v17 = *(float *)&ScriptParams[6];
      LODWORD(pDest[0].m_fOriginX) = ScriptParams[1];
      LODWORD(pDest[0].m_fOriginY) = ScriptParams[2];
      LODWORD(pDest[0].m_fScaleX) = ScriptParams[3];
      if ( ScriptParams[5] == -2 )
      {
        v16 = -1;
      }
      else if ( ScriptParams[5] == -1 )
      {
        v16 = (int)&elf_hash_bucket[12437];
      }
      v115 = (CTaskComplexFollowNodeRoute *)CTask::operator new(0x60u);
      CTaskComplexFollowNodeRoute::CTaskComplexFollowNodeRoute(
        v115,
        v15,
        (const CVector *)pDest,
        v17,
        3.0,
        2.0,
        1,
        v16,
        1);
      CRunningScript::GivePedScriptedTask(this, v14, v115, 2606);
      return 0;
    case 2607:
      CRunningScript::CollectParameters(this, 1);
      v4 = 0;
      v18 = ScriptParams[0];
      if ( ScriptParams[0] )
        v18 = 2;
      CTheScripts::bDrawCrossHair = v18;
      return v4;
    case 2608:
      CRunningScript::CollectParameters(this, 1);
      v19 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      (*(void (__fastcall **)(uint8 *))(*(_DWORD *)v19 + 204))(v19);
      v4 = 0;
      *((_DWORD *)v19 + 307) = 1148846080;
      return v4;
    case 2609:
      CRunningScript::CollectParameters(this, 2);
      PlayerPed = FindPlayerPed(ScriptParams[0]);
      CPlayerPed::ForceGroupToNeverFollow(PlayerPed, ScriptParams[1] != 0);
      return 0;
    case 2610:
      CRunningScript::CollectParameters(this, 1);
      m_PrefsUseWideScreen = 0;
      v21 = *(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][256];
      if ( v21 && (*(_BYTE *)(v21 + 58) & 7) == 2 )
        m_PrefsUseWideScreen = 1;
      goto LABEL_180;
    case 2611:
      CRunningScript::CollectParameters(this, 1);
      v22 = *(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][256];
      if ( v22 && (*(_BYTE *)(v22 + 58) & 7) == 2 )
        m_nCarZoom = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                                     * ((signed int)(v22
                                                                   - (unsigned int)CPools::ms_pVehiclePool->m_aStorage) >> 2)] | (-422239488 * ((signed int)(v22 - (unsigned int)CPools::ms_pVehiclePool->m_aStorage) >> 2));
      else
        m_nCarZoom = -1;
      goto LABEL_235;
    case 2612:
    case 2616:
    case 2626:
      return v4;
    case 2613:
      CRunningScript::CollectParameters(this, 5);
      v4 = 0;
      if ( ScriptParams[4] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[4] >> 8] == LOBYTE(ScriptParams[4]) )
      {
        v24 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[4] >> 8];
      }
      else
      {
        v24 = 0;
      }
      CGameLogic::SetUpSkip(*(CVector *)ScriptParams, *(float *)&ScriptParams[3], 0, v24, 1);
      return v4;
    case 2614:
      IsStringQueued = CGameLogic::IsSkipWaitingForScriptToFadeIn();
      goto LABEL_179;
    case 2615:
      CRunningScript::CollectParameters(this, 1);
      v13 = CVehicle::ms_forceVehicleLightsOff;
LABEL_45:
      v25 = *v13;
      v26 = ScriptParams[0];
      goto LABEL_85;
    case 2617:
      m_nCarZoom = TheCamera.m_nCarZoom;
      goto LABEL_235;
    case 2618:
      CRunningScript::CollectParameters(this, 2);
      Index = ScriptParams[1];
      if ( ScriptParams[1] <= -1 )
        Index = CTheScripts::UsedObjectArray[-ScriptParams[1]].Index;
      v4 = 0;
      v28 = CWorld::Players[ScriptParams[0]].PlayerPedData.m_nModelIndexOfLastBuildingShot == Index;
      goto LABEL_137;
    case 2619:
      CRunningScript::CollectParameters(this, 1);
      v4 = 0;
      CWorld::Players[ScriptParams[0]].PlayerPedData.m_nModelIndexOfLastBuildingShot = -1;
      return v4;
    case 2620:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pDest, 8u);
      CRunningScript::CollectParameters(this, 1);
      v4 = 0;
      CConversations::SetUpConversationNode((unsigned __int8 *)pDest, 0, 0, -ScriptParams[0], 0, 0);
      return v4;
    case 2621:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        if ( CCheat::m_aCheatFunctions[98] )
        {
          CCheat::m_aCheatFunctions[98]();
          return 0;
        }
        v4 = 0;
        CCheat::m_aCheatsActive[98] = CCheat::m_aCheatsActive[98] == 0;
      }
      else
      {
        v4 = 0;
        CCheat::m_aCheatsActive[98] = 0;
      }
      return v4;
    case 2622:
      CRunningScript::CollectParameters(this, 6);
      v29 = CPools::ms_pPedPool;
      m_nSize = CPools::ms_pPedPool->m_nSize;
      if ( m_nSize )
      {
        v31 = m_nSize - 1;
        v32 = *(float *)ScriptParams + *(float *)&ScriptParams[3];
        v33 = *(float *)ScriptParams - *(float *)&ScriptParams[3];
        v34 = *(float *)&ScriptParams[2] + *(float *)&ScriptParams[5];
        v35 = *(float *)&ScriptParams[1] + *(float *)&ScriptParams[4];
        v36 = *(float *)&ScriptParams[2] - *(float *)&ScriptParams[5];
        v37 = *(float *)&ScriptParams[1] - *(float *)&ScriptParams[4];
        v38 = 1996 * m_nSize - 900;
        v39 = -1096;
        while ( 1 )
        {
          if ( (v29->m_aFlags[v31] & 0x80u) == 0 )
          {
            m_aStorage = v29->m_aStorage;
            v41 = &(*m_aStorage)[v38];
            if ( &(*m_aStorage)[v38] != (uint8 *)&elf_hash_bucket[211] && (*m_aStorage)[v38] == 1 )
            {
              v42 = (int)&(*m_aStorage)[v39 + v38];
              v43 = (*(_BYTE *)(v42 + 29) & 8) != 0;
              if ( (*(_BYTE *)(v42 + 29) & 8) == 0 )
                v43 = (v41[64] & 8) != 0;
              if ( !v43 )
              {
                v44 = v39;
                IsPedDead = CRunningScript::IsPedDead(this, (CPed *)(v41 - 1096));
                v46 = IsPedDead == 0;
                v39 = v44;
                if ( !IsPedDead )
                  v46 = v41[61] << 31 == 0;
                if ( v46 )
                {
                  PedsGroup = CPedGroups::GetPedsGroup((const CPed *)(v41 - 1096));
                  v39 = v44;
                  if ( !PedsGroup )
                  {
                    v48 = *((_DWORD *)v41 - 269);
                    v49 = (float *)(v48 + 48);
                    if ( !v48 )
                      v49 = (float *)(v42 + 4);
                    if ( *v49 >= v33 && *v49 <= v32 )
                    {
                      v50 = v49[1];
                      if ( v50 >= v37 && v50 <= v35 )
                      {
                        v51 = v49[2];
                        if ( v51 >= v36 && v51 <= v34 )
                          break;
                      }
                    }
                  }
                }
              }
            }
          }
          if ( !v31 )
          {
            m_nCarZoom = -1;
            goto LABEL_235;
          }
          --v31;
          v29 = CPools::ms_pPedPool;
          v38 -= 1996;
        }
        v52 = -1093107909 * ((&v41[v44] - (uint8 *)CPools::ms_pPedPool->m_aStorage) >> 2);
        m_nCarZoom = CPools::ms_pPedPool->m_aFlags[v52] | (v52 << 8);
      }
      else
      {
        m_nCarZoom = -1;
      }
LABEL_235:
      ScriptParams[0] = m_nCarZoom;
LABEL_236:
      CRunningScript::StoreParameters(this, 1);
      return 0;
    case 2623:
      CRunningScript::CollectParameters(this, 1);
      v53 = (char **)&CGameLogic::bScriptCoopGameGoingOn;
      goto LABEL_84;
    case 2624:
      CRunningScript::CollectParameters(this, 4);
      ScriptParams[0] = C3dMarkers::User3dMarkerSet(
                          *(float *)ScriptParams,
                          *(float *)&ScriptParams[1],
                          *(float *)&ScriptParams[2],
                          ScriptParams[3]);
      goto LABEL_236;
    case 2625:
      CRunningScript::CollectParameters(this, 1);
      C3dMarkers::User3dMarkerDelete(ScriptParams[0]);
      return 0;
    case 2627:
      CTaskComplexProstituteSolicit::GetRidOfPlayerProstitute();
      return 0;
    case 2628:
      CRunningScript::CollectParameters(this, 1);
      v53 = CTheScripts::bDisplayNonMiniGameHelpMessages;
LABEL_84:
      v25 = *v53;
      v26 = ScriptParams[0] != 0;
LABEL_85:
      *v25 = v26;
      return 0;
    case 2629:
      CRunningScript::CollectParameters(this, 1);
      v4 = 0;
      v54 = CVehicle::ms_fRailTrackResistanceDefault;
      if ( *(float *)ScriptParams > 0.0 )
        v54 = *(float *)ScriptParams * CVehicle::ms_fRailTrackResistanceDefault;
      CVehicle::ms_fRailTrackResistance = v54;
      return v4;
    case 2630:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[1] )
      {
        CScriptsForBrains::SwitchAllObjectBrainsWithThisID(&CTheScripts::ScriptsForBrains, ScriptParams[0], 1);
        return 0;
      }
      v4 = 0;
      CScriptsForBrains::SwitchAllObjectBrainsWithThisID(&CTheScripts::ScriptsForBrains, ScriptParams[0], 0);
      return v4;
    case 2631:
      CConversations::DoneSettingUpConversation(1);
      return 0;
    case 2632:
      CRunningScript::CollectParameters(this, 1);
      v4 = 0;
      v55 = ScriptParams[0];
      if ( ScriptParams[0] )
        v55 = 1;
      FrontEndMenuManager.bPauseWhenInWidescreen = v55;
      return v4;
    case 2633:
    case 2637:
    case 2638:
    case 2639:
      v4 = 0;
      CRunningScript::UpdateCompareFlag(this, 0);
      return v4;
    case 2634:
      v4 = 0;
      CPad::GetPad(0);
      ScriptParams[0] = LODWORD(CPad::NewMouseControllerState.m_AmountMoved.x);
      CPad::GetPad(0);
      ScriptParams[1] = LODWORD(CPad::NewMouseControllerState.m_AmountMoved.y);
      goto LABEL_126;
    case 2635:
      InputType = CHID::GetInputType();
      m_PrefsUseWideScreen = InputType;
      if ( InputType != 1 )
        m_PrefsUseWideScreen = 0;
      goto LABEL_180;
    case 2636:
      m_PrefsUseWideScreen = MousePointerStateHelper.m_bUpAndDownInverted;
      goto LABEL_180;
    case 2640:
      v4 = 0;
      ++CRunningScript::ProcessCommands2600To2699(int)::nDebugInt32;
      return v4;
    case 2641:
      CRunningScript::CollectParameters(this, 1);
      v4 = 0;
      IsTouched = CTouchInterface::IsTouched((CTouchInterface::WidgetIDs)ScriptParams[0], 0, 2);
      goto LABEL_184;
    case 2642:
      CRunningScript::CollectParameters(this, 1);
      LOBYTE(WidgetPosition) = 0;
      if ( CTouchInterface::IsReleased((CTouchInterface::WidgetIDs)ScriptParams[0], 0, 2) )
      {
        LOBYTE(WidgetPosition) = 1;
        if ( ScriptParams[0] == 102 )
          CPad::GetPad(0)->bStopRhythmSprites = 1;
      }
      if ( ScriptParams[0] == 105 )
        LOBYTE(WidgetPosition) = 0;
      goto LABEL_245;
    case 2643:
      CRunningScript::CollectParameters(this, 1);
      v4 = 0;
      IsTouched = CTouchInterface::IsDoubleTapped((CTouchInterface::WidgetIDs)ScriptParams[0], 0, 1);
      goto LABEL_184;
    case 2644:
      CRunningScript::CollectParameters(this, 1);
      v59 = ScriptParams[0];
      if ( CTouchInterface::IsSwipedLeft((CTouchInterface::WidgetIDs)ScriptParams[0], 1)
        || CTouchInterface::IsSwipedRight(v59, 1) )
      {
        m_PrefsUseWideScreen = 1;
      }
      else
      {
LABEL_232:
        m_PrefsUseWideScreen = 0;
      }
      goto LABEL_180;
    case 2645:
      CRunningScript::CollectParameters(this, 1);
      IsStringQueued = CTouchInterface::IsSwipedLeft((CTouchInterface::WidgetIDs)ScriptParams[0], 1);
      goto LABEL_179;
    case 2646:
      CRunningScript::CollectParameters(this, 1);
      IsStringQueued = CTouchInterface::IsSwipedRight((CTouchInterface::WidgetIDs)ScriptParams[0], 1);
      goto LABEL_179;
    case 2647:
      if ( DoMissionSkip )
      {
        LOBYTE(WidgetPosition) = 1;
        DoMissionSkip = 0;
        v60 = currentSkipToMissionNumber;
        ScriptParams[0] = currentMissionPage;
      }
      else
      {
        LOBYTE(WidgetPosition) = 0;
        ScriptParams[0] = 0;
        v60 = 0;
      }
      ScriptParams[1] = v60;
      v66 = this;
      v67 = 2;
      goto LABEL_244;
    case 2648:
      v61 = SkipToMissionNumber;
      v62 = -1;
      if ( SkipToMissionNumber == -1 )
      {
        LOBYTE(WidgetPosition) = 0;
      }
      else
      {
        LOBYTE(WidgetPosition) = 1;
        SkipToMissionNumber = -1;
        v62 = v61;
        DoMissionSkip = 1;
      }
      v63 = (int **)&ScriptParams_ptr;
      goto LABEL_242;
    case 2649:
      v62 = 0;
      if ( SkipToMissionPage )
      {
        LOBYTE(WidgetPosition) = 1;
        ScriptParams[0] = SkipToMissionPage;
        if ( SkipToMissionPage == -2 )
          goto LABEL_243;
        v63 = &SkipToMissionPage_ptr;
      }
      else
      {
        LOBYTE(WidgetPosition) = 0;
        v63 = (int **)&ScriptParams_ptr;
      }
LABEL_242:
      **v63 = v62;
LABEL_243:
      v66 = this;
      v67 = 1;
LABEL_244:
      CRunningScript::StoreParameters(v66, v67);
LABEL_245:
      v110 = this;
      m_PrefsUseWideScreen = WidgetPosition;
LABEL_246:
      CRunningScript::UpdateCompareFlag(v110, m_PrefsUseWideScreen);
      return 0;
    case 2650:
      CRunningScript::CollectParameters(this, 1);
      WidgetValue = CTouchInterface::GetWidgetValue((CTouchInterface::WidgetIDs)ScriptParams[0]);
      v65 = 0;
      v4 = 0;
      if ( WidgetValue > 0.0 )
        v65 = 1;
      CRunningScript::UpdateCompareFlag(this, v65);
      *(float *)ScriptParams = WidgetValue;
      CRunningScript::StoreParameters(this, 1);
      return v4;
    case 2651:
      CRunningScript::CollectParameters(this, 1);
      v4 = 0;
      pDest[0].m_fOriginX = 0.0;
      pStringToFill[0] = 0;
      CTouchInterface::GetWidgetValue2(
        (CTouchInterface::WidgetIDs)ScriptParams[0],
        &pDest[0].m_fOriginX,
        (float *)pStringToFill);
      CRunningScript::UpdateCompareFlag(this, 0);
      *(_QWORD *)ScriptParams = __PAIR64__(pStringToFill[0], LODWORD(pDest[0].m_fOriginX));
LABEL_126:
      CRunningScript::StoreParameters(this, 2);
      return v4;
    case 2652:
      CRunningScript::CollectParameters(this, 2);
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      if ( *(float *)ScriptParams == 0.0 )
      {
        v4 = 0;
        CRunningScript::ProcessCommands2600To2699(int)::currentMissionSlot = (int)*(float *)&ScriptParams[1] - 1;
        numMissions[CRunningScript::ProcessCommands2600To2699(int)::currentMissionSlot] = 0;
      }
      else
      {
        strncpy(
          (char *)missionLabel[CRunningScript::ProcessCommands2600To2699(int)::currentMissionSlot][numMissions[CRunningScript::ProcessCommands2600To2699(int)::currentMissionSlot]],
          (const char *)pStringToFill,
          8u);
        ++numMissions[CRunningScript::ProcessCommands2600To2699(int)::currentMissionSlot];
        return 0;
      }
      return v4;
    case 2653:
      CRunningScript::CollectParameters(this, 1);
      WidgetPosition = CTouchInterface::GetWidgetPosition(
                         (CTouchInterface::WidgetIDs)ScriptParams[0],
                         &pDest[0].m_fOriginX,
                         (float *)pStringToFill,
                         fScaleX,
                         &width);
      if ( WidgetPosition != 1 )
        goto LABEL_245;
      ScriptParams[0] = LODWORD(pDest[0].m_fOriginX);
      ScriptParams[1] = pStringToFill[0];
      *(float *)&ScriptParams[2] = fScaleX[0];
      *(float *)&ScriptParams[3] = width;
      v66 = this;
      v67 = 4;
      goto LABEL_244;
    case 2654:
    case 2668:
      CRunningScript::CollectParameters(this, 2);
      if ( CurrCommand == 2654 )
        CTouchInterface::SetWidgetValue((CTouchInterface::WidgetIDs)ScriptParams[0], *(float *)&ScriptParams[1]);
      else
        CTouchInterface::SetEquippedItem((CTouchInterface::WidgetIDs)ScriptParams[0], ScriptParams[1]);
      return 0;
    case 2655:
      CRunningScript::CollectParameters(this, 3);
      CTouchInterface::SetSliderRange(
        (CTouchInterface::WidgetIDs)ScriptParams[0],
        *(float *)&ScriptParams[1],
        *(float *)&ScriptParams[2]);
      return 0;
    case 2656:
      CRunningScript::CollectParameters(this, 2);
      CTouchInterface::AddWidgetFlag((CTouchInterface::WidgetIDs)ScriptParams[0], ScriptParams[1]);
      return 0;
    case 2657:
      CRunningScript::CollectParameters(this, 2);
      CTouchInterface::RemoveWidgetFlag((CTouchInterface::WidgetIDs)ScriptParams[0], ScriptParams[1]);
      return 0;
    case 2658:
      CRunningScript::CollectParameters(this, 2);
      CTouchInterface::AddButtonFlag((CTouchInterface::WidgetIDs)ScriptParams[0], ScriptParams[1]);
      return 0;
    case 2659:
      CRunningScript::CollectParameters(this, 2);
      CTouchInterface::RemoveButtonFlag((CTouchInterface::WidgetIDs)ScriptParams[0], ScriptParams[1]);
      return 0;
    case 2660:
      v4 = 0;
      v28 = CHID::GetInputType() == 0;
LABEL_137:
      v68 = v28;
      goto LABEL_185;
    case 2661:
      m_PrefsUseWideScreen = !SkipIntroCutscene;
      goto LABEL_180;
    case 2662:
      PCPointer = this->PCPointer;
      v70 = 0;
      v4 = 0;
      do
      {
        v71 = PCPointer[v70];
        this->PCPointer = &PCPointer[v70 + 1];
        *((_BYTE *)&pDest[0].m_fOriginX + v70++) = v71;
      }
      while ( v70 != 128 );
      return v4;
    case 2663:
      CRunningScript::CollectParameters(this, 3);
      v72 = this->PCPointer;
      v73 = 0;
      v4 = 0;
      do
      {
        v74 = v72[v73];
        this->PCPointer = &v72[v73 + 1];
        *((_BYTE *)&pDest[0].m_fOriginX + v73++) = v74;
      }
      while ( v73 != 128 );
      return v4;
    case 2664:
      CRunningScript::CollectParameters(this, 3);
      v75 = this->PCPointer;
      v76 = 0;
      v4 = 0;
      do
      {
        v77 = v75[v76];
        this->PCPointer = &v75[v76 + 1];
        *((_BYTE *)&pDest[0].m_fOriginX + v76++) = v77;
      }
      while ( v76 != 128 );
      return v4;
    case 2665:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      *(_QWORD *)&pDest[0].m_fOriginX = 0x437A000042C80000LL;
      *(_QWORD *)&pDest[0].m_fScaleX = 0x4316000042C80000LL;
      if ( !strcasecmp((const char *)pStringToFill, "IE09") )
      {
        pDest[0].m_fScaleY = 150.0;
        pDest[0].m_fOriginY = 244.0;
        v78 = 0;
      }
      else
      {
        v78 = 1;
      }
      CTouchInterface::CreateShopWidget((const unsigned __int8 *)pStringToFill, 0, 0, pDest, v78);
      return 0;
    case 2666:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      CRunningScript::CollectParameters(this, 1);
      v79 = CTouchInterface::m_pWidgets[156];
      if ( CTouchInterface::m_pWidgets[156] )
      {
        sprintf((unsigned __int8 *)pDest, (const unsigned __int8 *)&dword_341BE4, ScriptParams[0]);
        (*((void (__fastcall **)(CWidget *, unsigned int *, WidgetPosition *))v79->_vptr$CWidget + 35))(
          v79,
          pStringToFill,
          pDest);
      }
      return 0;
    case 2667:
      CRunningScript::CollectParameters(this, 1);
      CTouchInterface::DeleteWidget((CTouchInterface::WidgetIDs)ScriptParams[0]);
      return 0;
    case 2669:
    case 2680:
    case 2681:
    case 2682:
    case 2683:
    case 2684:
    case 2685:
    case 2686:
    case 2687:
    case 2688:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      v5 = CText::Get(&TheText, (const unsigned __int8 *)pStringToFill);
      CRunningScript::CollectParameters(this, 1);
      switch ( CurrCommand )
      {
        case 2680:
          if ( CHID::GetInputType() )
            return 0;
          goto LABEL_203;
        case 2681:
          if ( CHID::GetInputType() != 1 )
            goto LABEL_187;
          goto LABEL_203;
        case 2682:
          if ( CHID::GetInputType() | MobileSettings::settings[9].value )
            return 0;
          goto LABEL_203;
        case 2683:
          v4 = 0;
          if ( CHID::GetInputType() )
            return v4;
          value = MobileSettings::settings[9].value;
          goto LABEL_199;
        case 2684:
          if ( CHID::GetInputType() != 1 )
            return 0;
          goto LABEL_203;
        case 2685:
LABEL_187:
          if ( CHID::GetInputType() != 2 )
            return 0;
          goto LABEL_203;
        case 2686:
          if ( CHID::GetInputType() | MobileSettings::settings[3].value )
            return 0;
          goto LABEL_203;
        case 2687:
          v4 = 0;
          if ( CHID::GetInputType() )
            return v4;
          value = MobileSettings::settings[3].value;
LABEL_199:
          if ( value != 1 )
            return v4;
LABEL_203:
          v112 = CTheScripts::bDisplayNonMiniGameHelpMessages == 0;
          if ( !CTheScripts::bDisplayNonMiniGameHelpMessages )
            v112 = this->bIsThisAMiniGameScript == 0;
          if ( !v112 || !CTheScripts::bMiniGameInProgress )
          {
            CHud::SetHelpMessage((const unsigned __int8 *)pStringToFill, v5, 0, 1, 0, ScriptParams[0]);
            if ( CTheScripts::bAddNextMessageToPreviousBriefs )
              goto LABEL_225;
          }
          goto LABEL_227;
        case 2688:
          v4 = 0;
          if ( !CHID::GetInputType() && MobileSettings::settings[3].value == 2 )
            goto LABEL_203;
          return v4;
        default:
          goto LABEL_203;
      }
    case 2670:
      CRunningScript::CollectParameters(this, 1);
      v80 = this->PCPointer;
      for ( i = 0; i != 128; ++i )
      {
        v82 = v80[i];
        this->PCPointer = &v80[i + 1];
        *((_BYTE *)&pDest[0].m_fOriginX + i) = v82;
      }
      CTouchInterface::SetWidgetTexture((CTouchInterface::WidgetIDs)ScriptParams[0], (unsigned __int8 *)pDest);
      return 0;
    case 2671:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] == 99 )
        return 0;
      ScriptName = this->ScriptName;
      missionReplaySetting = 1;
      v84 = eCheckpointSave;
LABEL_165:
      v4 = 0;
      SaveGameForPause(v84, ScriptName);
      return v4;
    case 2672:
      if ( CTheScripts::NumberOfIntroTextLinesThisFrame > 0x5Fu )
        return 0;
      CRunningScript::CollectParameters(this, 2);
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      CText::Get(&TheText, (const unsigned __int8 *)pStringToFill);
      LODWORD(pDest[0].m_fOriginX) = ScriptParams[0];
      fScaleX[0] = *(float *)&ScriptParams[1];
      CRunningScript::CollectParameters(this, 1);
      width = *(float *)ScriptParams;
      height = 1.0;
      CorrectAspect(&pDest[0].m_fOriginX, fScaleX, &width, &height);
      v85 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
      v85->ScriptTextAtX = pDest[0].m_fOriginX / (float)((float)RsGlobal.screenWidth / 640.0);
      ScriptTextFontStyle = v85->ScriptTextFontStyle;
      v85->ScriptTextAtY = fScaleX[0] / (float)((float)RsGlobal.screenHeight / 448.0);
      CFont::SetFontStyle(ScriptTextFontStyle);
      CFont::SetScale(
        (float)(CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextYScale
              * (float)((float)RsGlobal.screenHeight / 448.0))
      * 0.5);
      v87 = CFont::GetHeight(0);
      v88 = CText::Get(&TheText, (const unsigned __int8 *)pStringToFill);
      StringWidth = CFont::GetStringWidth(v88, 1u, 0);
      if ( StringWidth <= width )
      {
        ScriptTextYScale = CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextYScale;
      }
      else
      {
        v90 = width / StringWidth;
        v91 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
        v92 = v90 * v91->ScriptTextXScale;
        ScriptTextYScale = v90 * v91->ScriptTextYScale;
        v91->ScriptTextXScale = v92;
        v91->ScriptTextYScale = ScriptTextYScale;
      }
      CFont::SetScale((float)(ScriptTextYScale * (float)((float)RsGlobal.screenHeight / 448.0)) * 0.5);
      v4 = 0;
      v116 = (float)(v87 - CFont::GetHeight(0)) * 0.5;
      v117 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
      v117->ScriptTextAtY = v117->ScriptTextAtY + v116;
      strncpy((char *)v117->ScriptTextLabel, (const char *)pStringToFill, 8u);
      v118 = CTheScripts::NumberOfIntroTextLinesThisFrame + 1;
      v119 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
      v119->NumberToInsert1 = -1;
      v119->NumberToInsert2 = -1;
      CTheScripts::NumberOfIntroTextLinesThisFrame = v118;
      return v4;
    case 2673:
      if ( CTheScripts::NumberOfIntroTextLinesThisFrame > 0x5Fu )
        return 0;
      CRunningScript::CollectParameters(this, 2);
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      CText::Get(&TheText, (const unsigned __int8 *)pStringToFill);
      fScaleX[0] = *(float *)ScriptParams;
      width = *(float *)&ScriptParams[1];
      CRunningScript::CollectParameters(this, 2);
      height = *(float *)&ScriptParams[1];
      v122 = 1.0;
      CorrectAspect(fScaleX, &width, &height, &v122);
      v94 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
      v94->ScriptTextAtX = fScaleX[0] / (float)((float)RsGlobal.screenWidth / 640.0);
      v94->ScriptTextAtY = width / (float)((float)RsGlobal.screenHeight / 448.0);
      strncpy((char *)v94->ScriptTextLabel, (const char *)pStringToFill, 8u);
      v95 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
      v95->NumberToInsert1 = ScriptParams[0];
      v95->NumberToInsert2 = -1;
      CFont::SetFontStyle(v95->ScriptTextFontStyle);
      CFont::SetScale(
        (float)(CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextYScale
              * (float)((float)RsGlobal.screenHeight / 448.0))
      * 0.5);
      v96 = CFont::GetHeight(0);
      v97 = CText::Get(&TheText, (const unsigned __int8 *)pStringToFill);
      CMessages::InsertNumberInString(v97, ScriptParams[0], -1, -1, -1, -1, -1, (GxtChar *)pDest);
      v98 = CFont::GetStringWidth((GxtChar *)pDest, 1u, 0);
      if ( v98 <= height )
      {
        v102 = CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextYScale;
      }
      else
      {
        v99 = height / v98;
        v100 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
        v101 = v99 * v100->ScriptTextXScale;
        v102 = v99 * v100->ScriptTextYScale;
        v100->ScriptTextXScale = v101;
        v100->ScriptTextYScale = v102;
      }
      CFont::SetScale((float)(v102 * (float)((float)RsGlobal.screenHeight / 448.0)) * 0.5);
      v4 = 0;
      v120 = CFont::GetHeight(0);
      v121 = CTheScripts::NumberOfIntroTextLinesThisFrame;
      CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextAtY = CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextAtY
                                                                                              + (float)((float)(v96 - v120) * 0.5);
      CTheScripts::NumberOfIntroTextLinesThisFrame = v121 + 1;
      return v4;
    case 2674:
      v84 = eAutoSave;
      ScriptName = 0;
      goto LABEL_165;
    case 2675:
      CRunningScript::CollectParameters(this, 4);
      CTouchInterface::SetWidgetValue3(
        (CTouchInterface::WidgetIDs)ScriptParams[0],
        *(float *)&ScriptParams[1],
        *(float *)&ScriptParams[2],
        *(float *)&ScriptParams[3]);
      return 0;
    case 2676:
      CRunningScript::CollectParameters(this, 1);
      v103 = ScriptParams[0];
      if ( ScriptParams[0] )
        v103 = 1;
      IsStringQueued = IsGameResuming(v103);
      goto LABEL_179;
    case 2677:
      CRunningScript::CollectParameters(this, 2);
      v104 = ScriptParams[1];
      v105 = ScriptParams[0];
      IsCarColourInGrid = CMenuSystem::IsCarColourInGrid(ScriptParams[0], ScriptParams[1]);
      CRunningScript::UpdateCompareFlag(this, IsCarColourInGrid);
      CarColourFromGrid = CMenuSystem::FindCarColourFromGrid(v105, v104);
      CMenuSystem::SetActiveMenuItem(v105, CarColourFromGrid);
      return 0;
    case 2678:
      CRunningScript::CollectParameters(this, 1);
      IsStringQueued = CHID::Implements((HIDMapping)ScriptParams[0]);
      goto LABEL_179;
    case 2679:
      CRunningScript::CollectParameters(this, 1);
      v108 = this->ScriptName;
      if ( !strcmp((const char *)v108, "crane2") && CTheScripts::IsPlayerOnAMission() )
        return 0;
      v4 = 0;
      missionReplaySetting = 0;
      IsOddJob = ScriptParams[0];
      SaveGameForPause(eOddjobSave, v108);
      return v4;
    case 2689:
    case 2690:
    case 2691:
    case 2692:
    case 2693:
    case 2694:
    case 2695:
    case 2696:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      v5 = CText::Get(&TheText, (const unsigned __int8 *)pStringToFill);
      CRunningScript::CollectParameters(this, 1);
      switch ( CurrCommand )
      {
        case 2690:
          if ( CHID::GetInputType() )
            return 0;
          goto LABEL_221;
        case 2691:
          if ( CHID::GetInputType() != 1 )
            goto LABEL_211;
          goto LABEL_221;
        case 2692:
          if ( CHID::GetInputType() | MobileSettings::settings[9].value )
            return 0;
          goto LABEL_221;
        case 2693:
          v4 = 0;
          if ( CHID::GetInputType() || MobileSettings::settings[9].value != 1 )
            return v4;
          goto LABEL_221;
        case 2694:
          if ( CHID::GetInputType() != 1 )
            return 0;
          goto LABEL_221;
        case 2695:
LABEL_211:
          if ( CHID::GetInputType() != 2 )
            return 0;
          goto LABEL_221;
        case 2696:
          if ( CHID::GetInputType() | MobileSettings::settings[3].value )
            return 0;
          goto LABEL_221;
        default:
LABEL_221:
          v113 = CTheScripts::bDisplayNonMiniGameHelpMessages == 0;
          if ( !CTheScripts::bDisplayNonMiniGameHelpMessages )
            v113 = this->bIsThisAMiniGameScript == 0;
          if ( !v113 || !CTheScripts::bMiniGameInProgress )
          {
            CHud::SetHelpMessage((const unsigned __int8 *)pStringToFill, v5, 0, 0, 0, 0);
            if ( CTheScripts::bAddNextMessageToPreviousBriefs )
LABEL_225:
              CMessages::AddToPreviousBriefArray((const unsigned __int8 *)pStringToFill, v5, -1, -1, -1, -1, -1, -1, 0);
          }
LABEL_227:
          v4 = 0;
          CTheScripts::bAddNextMessageToPreviousBriefs = 1;
          break;
      }
      return v4;
    case 2697:
      CRunningScript::CollectParameters(this, 3);
      CTouchInterface::SetWidgetValue2(
        (CTouchInterface::WidgetIDs)ScriptParams[0],
        *(float *)&ScriptParams[1],
        *(float *)&ScriptParams[2]);
      return 0;
    case 2698:
      CRunningScript::CollectParameters(this, 7);
      v109 = *(float *)&ScriptParams[6];
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      CTouchInterface::SetWidgetInfo(
        (CTouchInterface::WidgetIDs)ScriptParams[0],
        (unsigned __int8 *)pStringToFill,
        v109,
        ScriptParams[1] != 0,
        ScriptParams[2] != 0,
        ScriptParams[3] != 0,
        ScriptParams[4] != 0,
        ScriptParams[5]);
      return 0;
    case 2699:
      CRunningScript::CollectParameters(this, 5);
      CRunningScript::ReadTextLabelFromScript(this, (Char *)pStringToFill, 8u);
      CRunningScript::ReadTextLabelFromScript(this, (Char *)fScaleX, 8u);
      CTouchInterface::SetWidgetInfo2(
        (CTouchInterface::WidgetIDs)ScriptParams[0],
        ScriptParams[1],
        ScriptParams[2],
        ScriptParams[3],
        ScriptParams[4],
        (unsigned __int8 *)pStringToFill,
        (unsigned __int8 *)fScaleX);
      return 0;
    case 2700:
      v4 = 0;
      CStreaming::LoadAllRequestedModels(0);
      return v4;
    case 2701:
      CRunningScript::CollectParameters(this, 1);
      IsStringQueued = CHID::IsReleased((HIDMapping)ScriptParams[0]);
LABEL_179:
      m_PrefsUseWideScreen = IsStringQueued;
LABEL_180:
      v110 = this;
      goto LABEL_246;
    case 2702:
      CRunningScript::CollectParameters(this, 1);
      return 0;
    case 2703:
      CWeaponEffects::ClearAllCrosshairs();
      v4 = 0;
      CPed::SetWeaponLockOnTarget(CWorld::Players[CWorld::PlayerInFocus].pPed, 0);
      return v4;
    case 2704:
      CRunningScript::CollectParameters(this, 1);
      v4 = 0;
      IsTouched = CHID::IsPressed((HIDMapping)ScriptParams[0], 0);
LABEL_184:
      v68 = IsTouched;
LABEL_185:
      CRunningScript::UpdateCompareFlag(this, v68);
      return v4;
    default:
      return -1;
  }
}
// 0: using guessed type int dword_0;
// 20: using guessed type int dword_20;
// 60: using guessed type int dword_60;
// FC: using guessed type int elf_hash_bucket[16411];
// 341BE4: using guessed type int dword_341BE4;
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 6782D8: using guessed type char *CTheScripts::bDisplayNonMiniGameHelpMessages[3];
// 6787E0: using guessed type char *CTheScripts::bDrawSubtitlesBeforeFade;
// 6792C4: using guessed type int *SkipToMissionPage_ptr;
// 679CA8: using guessed type char *CTheScripts::bDrawOddJobTitleBeforeFade;
// 679D90: using guessed type char *CVehicle::ms_forceVehicleLightsOff[3];
// 340240: using guessed type unsigned int pStringToFill[3];

//----- (00341C68) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands300To399(CRunningScript *this, Int32 CurrCommand)
{
  Int8 v3; // r6
  bool v4; // r1
  float v5; // s0
  int v6; // r4
  UInt16 v7; // r5
  CCarGenerator *v8; // r0
  UInt32 IndexOfGlobalVariable; // r5
  UInt32 v10; // r0
  UInt32 v11; // r0
  uint8 *v12; // r5
  CEntity *v13; // r1
  unsigned int v14; // r1
  CEntity *v15; // r4
  CPad *Pad; // r0
  float GroundZForCoord; // s0
  RwReal v18; // s16
  RwReal v19; // s18
  int32 ParameterWithoutIncreasingPC; // r0
  Int32 v21; // r0
  int v22; // s20
  int v23; // s18
  int v24; // s16
  int32 v25; // r0
  int Fading; // r0
  float v27; // s0
  Int32 v28; // r4
  RwReal v29; // s16
  RwReal v30; // s18
  float v31; // s20
  float v32; // s0
  Int32 v33; // r4
  RwReal v34; // s16
  RwReal v35; // s18
  float v36; // s20
  float v37; // s0
  RwReal v38; // s16
  RwReal v39; // s18
  float v40; // s20
  float v41; // s0
  float v42; // s0
  float v43; // s2
  uint8 *v44; // r0
  uint8 *v45; // r1
  int v46; // r1
  float v47; // s0
  float v48; // s0
  unsigned int v49; // r4
  CPool<CPed,CCopPed>::StorageType *m_aStorage; // r5
  uint8 *v51; // r6
  bool v52; // zf
  CMatrix *v53; // r0
  uint8 *v54; // r6
  CMatrix *v55; // t1
  float v56; // s0
  uint8 *v57; // r0
  uint8 *v58; // r4
  uint8 *v59; // r0
  CEntity *v60; // r4
  uint8 *v61; // r0
  CPed *v62; // r0
  UInt8 *PCPointer; // r1
  UInt32 v64; // r2
  float v65; // s0
  uint8 *v66; // r0
  int32 v67; // r0
  unsigned int v68; // r5
  int32 v69; // r0
  unsigned int v70; // r0
  int32 v71; // r0
  Int32 v72; // r5
  int v73; // s20
  int v74; // s16
  int v75; // s18
  int32 v76; // r0
  int v77; // r5
  bool HasCollidedWith; // r1
  bool v79; // zf
  int v80; // r0
  int v81; // r0
  uint8 *v82; // r1
  RwReal v83; // r0
  __int64 v84; // d16
  int v85; // r1
  float v86; // s0
  float v87; // s2
  CMatrix *v88; // r0
  float v89; // s0
  int v90; // r1
  float v91; // s0
  float v92; // s2
  CMatrix *m_pMat; // r0
  float v94; // s0
  CEntity *v95; // r1
  uint8 *v96; // r2
  int v97; // r1
  int v98; // r2
  int DoesPointLieWithinZoneWithGivenName; // r0
  float v100; // r5
  float v101; // s0
  int v102; // r0
  int v103; // r1
  const CMatrix *v104; // r0
  RwMatrix *v105; // r1
  const CSimpleTransform *v106; // r0
  float v107; // s0
  RwObject_0 *m_pRwObject; // r0
  char *parent; // r1
  const CMatrix *v111; // r0
  RwMatrix *v112; // r1
  int v113; // r0
  int v114; // r1
  UInt64 v115; // [sp+28h] [bp-60h] BYREF
  CVector CamPosToGoTo; // [sp+30h] [bp-58h] BYREF
  CVector UpOffsets; // [sp+40h] [bp-48h] BYREF

  v3 = 0;
  switch ( CurrCommand )
  {
    case 311:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v4 = ScriptParams[1] == *(__int16 *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][38];
      goto LABEL_162;
    case 331:
      CRunningScript::CollectParameters(this, 12);
      v5 = *(float *)&ScriptParams[2];
      v3 = 0;
      if ( *(float *)&ScriptParams[2] > -100.0 )
        v5 = *(float *)&ScriptParams[2] + 0.015;
      ScriptParams[0] = CTheCarGenerators::CreateCarGenerator(
                          *(const float *)ScriptParams,
                          *(const float *)&ScriptParams[1],
                          v5,
                          *(const float *)&ScriptParams[3],
                          ScriptParams[4],
                          ScriptParams[5],
                          ScriptParams[6],
                          ScriptParams[7],
                          ScriptParams[8],
                          ScriptParams[9],
                          ScriptParams[10],
                          ScriptParams[11],
                          0,
                          1u);
      goto LABEL_98;
    case 332:
      CRunningScript::CollectParameters(this, 2);
      v6 = LOWORD(ScriptParams[0]);
      v7 = ScriptParams[1];
      v8 = &CTheCarGenerators::CarGeneratorArray[LOWORD(ScriptParams[0])];
      if ( !ScriptParams[1] )
      {
        CCarGenerator::SwitchOff(v8);
        return 0;
      }
      if ( ScriptParams[1] >= 101 )
      {
        CCarGenerator::SwitchOn(v8);
        return 0;
      }
      CCarGenerator::SwitchOn(v8);
      v3 = 0;
      CTheCarGenerators::CarGeneratorArray[v6].GenerateCount = v7;
      return v3;
    case 334:
      IndexOfGlobalVariable = CRunningScript::GetIndexOfGlobalVariable(this);
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      COnscreenTimer::AddClock(&CUserDisplay::OnscnTimer, IndexOfGlobalVariable, 0, ScriptParams[0] != 0);
      return v3;
    case 335:
      v10 = CRunningScript::GetIndexOfGlobalVariable(this);
      COnscreenTimer::ClearClock(&CUserDisplay::OnscnTimer, v10);
      return 0;
    case 337:
      v11 = CRunningScript::GetIndexOfGlobalVariable(this);
      COnscreenTimer::ClearCounter(&CUserDisplay::OnscnTimer, v11);
      return 0;
    case 340:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v12 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v12 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&UpOffsets, 8u);
      v115 = 0LL;
      strcpy((char *)&v115, (const char *)&UpOffsets);
      CPed::IsPlayer((const CPed *)v12);
      v80 = v12[1157] << 31;
      v79 = v80 == 0;
      if ( v80 )
      {
        v80 = *((_DWORD *)v12 + 356);
        v79 = v80 == 0;
      }
      if ( v79 )
      {
        v81 = *((_DWORD *)v12 + 5);
        v82 = (uint8 *)(v81 + 48);
        if ( !v81 )
          v82 = v12 + 4;
        v83 = *((float *)v82 + 2);
        v84 = *(_QWORD *)v82;
      }
      else
      {
        v97 = *(_DWORD *)(v80 + 20);
        v98 = v97 + 48;
        if ( !v97 )
          v98 = v80 + 4;
        v84 = *(_QWORD *)v98;
        v83 = *(float *)(v98 + 8);
      }
      CamPosToGoTo.z = v83;
      *(_QWORD *)&CamPosToGoTo.x = v84;
      v3 = 0;
      DoesPointLieWithinZoneWithGivenName = CTheZones::DoesPointLieWithinZoneWithGivenName(
                                              &CamPosToGoTo,
                                              v115,
                                              ZONE_NAVIGATION);
      v4 = DoesPointLieWithinZoneWithGivenName;
      if ( DoesPointLieWithinZoneWithGivenName )
        v4 = 1;
      goto LABEL_162;
    case 344:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v13 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        if ( v13 )
          CCamera::TakeControl(&TheCamera, v13, ScriptParams[1], ScriptParams[2], 1);
      }
      return 0;
    case 345:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] < 0 )
        return 0;
      v14 = (unsigned int)ScriptParams[0] >> 8;
      if ( CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        return 0;
      v15 = (CEntity *)CPools::ms_pPedPool->m_aStorage[v14];
      if ( !v15 )
        return 0;
      if ( CPed::IsPlayer((const CPed *)CPools::ms_pPedPool->m_aStorage[v14]) )
      {
        v3 = 0;
        CCamera::TakeControl(&TheCamera, 0, ScriptParams[1], ScriptParams[2], 1);
        return v3;
      }
      CCamera::TakeControl(&TheCamera, v15, ScriptParams[1], ScriptParams[2], 1);
      return 0;
    case 346:
      CCamera::Restore(&TheCamera);
      return 0;
    case 347:
      CRunningScript::CollectParameters(this, 3);
      Pad = CPad::GetPad(ScriptParams[0]);
      v3 = 0;
      CPad::StartShake(Pad, ScriptParams[1], ScriptParams[2], 0);
      return v3;
    case 349:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      CTimer::ms_fTimeScale = *(float *)ScriptParams;
      return v3;
    case 351:
      CRunningScript::CollectParameters(this, 6);
      CamPosToGoTo = *(CVector *)ScriptParams;
      UpOffsets = *(CVector *)&ScriptParams[3];
      CCamera::SetCamPositionForFixedMode(&TheCamera, &CamPosToGoTo, &UpOffsets);
      return 0;
    case 352:
      CRunningScript::CollectParameters(this, 4);
      GroundZForCoord = *(float *)&ScriptParams[2];
      v18 = *(float *)ScriptParams;
      v19 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      CamPosToGoTo.y = v19;
      CamPosToGoTo.x = v18;
      CamPosToGoTo.z = GroundZForCoord;
      CCamera::TakeControlNoEntity(&TheCamera, &CamPosToGoTo, ScriptParams[3], 1);
      return 0;
    case 353:
      CRunningScript::CollectParameters(this, 3);
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CRadar::GetActualBlipArrayIndex(ParameterWithoutIncreasingPC);
      v21 = CRadar::SetEntityBlip(
              BLIPTYPE_CAR,
              ScriptParams[0],
              ScriptParams[1],
              (eBlipDisplay)ScriptParams[2],
              this->ScriptName);
      goto LABEL_38;
    case 354:
    case 358:
    case 385:
    case 393:
      return v3;
    case 356:
      CRunningScript::CollectParameters(this, 1);
      CRadar::ClearBlip(ScriptParams[0]);
      return 0;
    case 357:
      CRunningScript::CollectParameters(this, 2);
      CRadar::ChangeBlipColour(ScriptParams[0], ScriptParams[1]);
      return 0;
    case 359:
      CRunningScript::CollectParameters(this, 5);
      v22 = ScriptParams[2];
      v23 = ScriptParams[0];
      v24 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v22 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      v25 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CRadar::GetActualBlipArrayIndex(v25);
      v21 = CRadar::SetCoordBlip(4, v23, v24, v22, ScriptParams[3], ScriptParams[4]);
LABEL_38:
      ScriptParams[0] = v21;
      goto LABEL_181;
    case 360:
      CRunningScript::CollectParameters(this, 2);
      CRadar::ChangeBlipScale(ScriptParams[0], ScriptParams[1]);
      return 0;
    case 361:
      CRunningScript::CollectParameters(this, 3);
      CCamera::SetFadeColour(&TheCamera, ScriptParams[0], ScriptParams[1], ScriptParams[2]);
      return 0;
    case 362:
      CRunningScript::CollectParameters(this, 2);
      CCamera::Fade(&TheCamera, (float)ScriptParams[0] / 1000.0, ScriptParams[1]);
      if ( ScriptParams[1] == 1 )
      {
        v3 = 0;
        if ( this->IsThisAMissionScript )
          CTheScripts::bScriptHasFadedOut = 0;
      }
      else if ( this->IsThisAMissionScript )
      {
        v3 = 0;
        CTheScripts::bScriptHasFadedOut = 1;
      }
      else
      {
        return 0;
      }
      return v3;
    case 363:
      Fading = CCamera::GetFading(&TheCamera);
      goto LABEL_110;
    case 364:
      CRunningScript::CollectParameters(this, 5);
      v27 = *(float *)&ScriptParams[2];
      v28 = ScriptParams[4];
      v29 = *(float *)ScriptParams;
      v30 = *(float *)&ScriptParams[1];
      v31 = *(float *)&ScriptParams[3];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v27 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      CamPosToGoTo.y = v30;
      CamPosToGoTo.x = v29;
      CamPosToGoTo.z = v27;
      CRestart::AddHospitalRestartPoint(&CamPosToGoTo, v31, v28);
      return 0;
    case 365:
      CRunningScript::CollectParameters(this, 5);
      v32 = *(float *)&ScriptParams[2];
      v33 = ScriptParams[4];
      v34 = *(float *)ScriptParams;
      v35 = *(float *)&ScriptParams[1];
      v36 = *(float *)&ScriptParams[3];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v32 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      CamPosToGoTo.y = v35;
      CamPosToGoTo.x = v34;
      CamPosToGoTo.z = v32;
      CRestart::AddPoliceRestartPoint(&CamPosToGoTo, v36, v33);
      return 0;
    case 366:
      CRunningScript::CollectParameters(this, 4);
      v37 = *(float *)&ScriptParams[2];
      v38 = *(float *)ScriptParams;
      v39 = *(float *)&ScriptParams[1];
      v40 = *(float *)&ScriptParams[3];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v37 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      CamPosToGoTo.y = v39;
      CamPosToGoTo.x = v38;
      CamPosToGoTo.z = v37;
      CRestart::OverrideNextRestart(&CamPosToGoTo, v40);
      return 0;
    case 367:
      CRunningScript::CollectParameters(this, 10);
      v41 = *(float *)&ScriptParams[4];
      CamPosToGoTo = *(CVector *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[4] == 0.0 )
      {
        v42 = 0.0;
        v43 = *(float *)&ScriptParams[5];
      }
      else
      {
        v100 = cosf(*(float *)&ScriptParams[4]);
        v42 = sinf(v41) * *(float *)&ScriptParams[5];
        v43 = v100 * *(float *)&ScriptParams[5];
      }
      CShadows::StoreShadowToBeRendered(
        ScriptParams[0],
        &CamPosToGoTo,
        COERCE_FLOAT(LODWORD(v42) ^ 0x80000000),
        v43,
        v43,
        v42,
        ScriptParams[6],
        ScriptParams[7],
        ScriptParams[8],
        ScriptParams[9]);
      return 0;
    case 370:
      CRunningScript::CollectParameters(this, 1);
      v44 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( v44[1157] << 31 )
        v45 = (uint8 *)*((_DWORD *)v44 + 356);
      else
        v45 = 0;
      if ( v45 )
        v44 = v45;
      v46 = *(int *)((char *)&dword_14 + (_DWORD)v44);
      if ( v46 )
        v47 = atan2f(COERCE_FLOAT(*(_DWORD *)(v46 + 16) ^ 0x80000000), *(float *)(v46 + 20));
      else
        v47 = *((float *)v44 + 4);
      v101 = v47 * 180.0;
      goto LABEL_176;
    case 371:
      CRunningScript::CollectParameters(this, 2);
      v48 = *(float *)&ScriptParams[1];
      v49 = (unsigned int)ScriptParams[0] >> 8;
      if ( *(float *)&ScriptParams[1] < 0.0 )
        v48 = *(float *)&ScriptParams[1] + 360.0;
      m_aStorage = CPools::ms_pPedPool->m_aStorage;
      v51 = CPools::ms_pPedPool->m_aStorage[v49];
      if ( v48 > 360.0 )
        v48 = v48 + -360.0;
      v52 = v51[1157] << 31 == 0;
      if ( v51[1157] << 31 )
        v52 = *((_DWORD *)v51 + 356) == 0;
      if ( !v52 )
        return 0;
      v55 = (CMatrix *)*((_DWORD *)v51 + 5);
      v54 = v51 + 20;
      v53 = v55;
      v56 = (float)(v48 * 3.1416) / 180.0;
      *((float *)v54 + 339) = v56;
      *((float *)v54 + 338) = v56;
      if ( v55 )
        CMatrix::SetRotateZOnly(v53, v56);
      else
        *(float *)&m_aStorage[v49][16] = v56;
      v113 = *(_DWORD *)&m_aStorage[v49][24];
      if ( !v113 )
        return 0;
      v114 = *(_DWORD *)(v113 + 4);
      v104 = *(const CMatrix **)v54;
      v105 = (RwMatrix *)(v114 + 16);
      if ( *(_DWORD *)v54 )
        goto LABEL_194;
      v106 = (const CSimpleTransform *)&m_aStorage[v49][4];
      goto LABEL_196;
    case 372:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v57 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v57 = 0;
      }
      v85 = *((_DWORD *)v57 + 5);
      if ( v85 )
        v86 = atan2f(COERCE_FLOAT(*(_DWORD *)(v85 + 16) ^ 0x80000000), *(float *)(v85 + 20));
      else
        v86 = *((float *)v57 + 4);
      v101 = v86 * 180.0;
      goto LABEL_176;
    case 373:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v58 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v58 = 0;
      }
      v87 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[1] < 0.0 )
        v87 = *(float *)&ScriptParams[1] + 360.0;
      if ( v87 > 360.0 )
        v87 = v87 + -360.0;
      v88 = (CMatrix *)*((_DWORD *)v58 + 5);
      v89 = (float)(v87 * 3.1416) / 180.0;
      if ( v88 )
        CMatrix::SetRotateZOnly(v88, v89);
      else
        *((float *)v58 + 4) = v89;
      v102 = *((_DWORD *)v58 + 6);
      if ( !v102 )
        return 0;
      v103 = *(_DWORD *)(v102 + 4);
      v104 = (const CMatrix *)*((_DWORD *)v58 + 5);
      v105 = (RwMatrix *)(v103 + 16);
      if ( v104 )
      {
LABEL_194:
        CMatrix::UpdateRwMatrix(v104, v105);
      }
      else
      {
        v106 = (const CSimpleTransform *)(v58 + 4);
LABEL_196:
        CSimpleTransform::UpdateRwMatrix(v106, v105);
      }
      return 0;
    case 374:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v59 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v59 = 0;
      }
      v90 = *((_DWORD *)v59 + 5);
      if ( v90 )
        v91 = atan2f(COERCE_FLOAT(*(_DWORD *)(v90 + 16) ^ 0x80000000), *(float *)(v90 + 20));
      else
        v91 = *((float *)v59 + 4);
      v101 = v91 * 180.0;
LABEL_176:
      v107 = v101 / 3.1416;
      if ( v107 < 0.0 )
        v107 = v107 + 360.0;
      if ( v107 > 360.0 )
        v107 = v107 + -360.0;
      *(float *)ScriptParams = v107;
      goto LABEL_181;
    case 375:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v60 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v60 = 0;
      }
      CWorld::Remove(v60);
      v92 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[1] < 0.0 )
        v92 = *(float *)&ScriptParams[1] + 360.0;
      if ( v92 > 360.0 )
        v92 = v92 + -360.0;
      m_pMat = v60->m_pMat;
      v94 = (float)(v92 * 3.1416) / 180.0;
      if ( m_pMat )
        CMatrix::SetRotateZOnly(m_pMat, v94);
      else
        v60->m_transform.m_heading = v94;
      m_pRwObject = v60->m_pRwObject;
      if ( m_pRwObject )
      {
        parent = (char *)m_pRwObject->parent;
        v111 = v60->m_pMat;
        v112 = (RwMatrix *)(parent + 16);
        if ( v111 )
          CMatrix::UpdateRwMatrix(v111, v112);
        else
          CSimpleTransform::UpdateRwMatrix(&v60->m_transform, v112);
      }
      CEntity::UpdateRwFrame(v60);
      CWorld::Add(v60);
      return 0;
    case 377:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v61 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v61 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v95 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v95 = 0;
      }
      if ( v61[1157] << 31 )
        v96 = (uint8 *)*((_DWORD *)v61 + 356);
      else
        v96 = 0;
      if ( v96 )
        v61 = v96;
      HasCollidedWith = CPhysical::GetHasCollidedWith((CPhysical *)v61, v95);
      goto LABEL_154;
    case 379:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v62 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v62 = 0;
      }
      CPed::SetAmmo(v62, (eWeaponType)ScriptParams[1], ScriptParams[2]);
      return 0;
    case 384:
      v3 = 0;
      PCPointer = this->PCPointer;
      this->PCPointer = PCPointer + 1;
      v64 = *(unsigned __int16 *)(PCPointer + 1);
      this->PCPointer = PCPointer + 3;
      CTheScripts::OnAMissionFlag = v64;
      return v3;
    case 388:
      CRunningScript::CollectParameters(this, 2);
      v65 = (float)ScriptParams[1];
      v66 = &CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1348];
      goto LABEL_94;
    case 389:
      CRunningScript::CollectParameters(this, 2);
      v65 = (float)ScriptParams[1];
      v66 = &CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1228];
LABEL_94:
      v4 = 0;
      v3 = 0;
      if ( *(float *)v66 > v65 )
        v4 = 1;
LABEL_162:
      CRunningScript::UpdateCompareFlag(this, v4);
      return v3;
    case 390:
      CRunningScript::CollectParameters(this, 1);
      v67 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CRadar::GetActualBlipArrayIndex(v67);
      v3 = 0;
      v68 = CRadar::SetEntityBlip(BLIPTYPE_CAR, ScriptParams[0], 0, BLIPDISPLAY_BOTH, this->ScriptName);
      CRadar::ChangeBlipScale(v68, 3);
      ScriptParams[0] = v68;
LABEL_98:
      CRunningScript::StoreParameters(this, 1);
      return v3;
    case 391:
      CRunningScript::CollectParameters(this, 1);
      v69 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CRadar::GetActualBlipArrayIndex(v69);
      v70 = CRadar::SetEntityBlip(BLIPTYPE_CHAR, ScriptParams[0], 1u, BLIPDISPLAY_BOTH, this->ScriptName);
      goto LABEL_101;
    case 392:
      CRunningScript::CollectParameters(this, 1);
      v71 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CRadar::GetActualBlipArrayIndex(v71);
      v70 = CRadar::SetEntityBlip(BLIPTYPE_OBJECT, ScriptParams[0], 6u, BLIPDISPLAY_BOTH, this->ScriptName);
LABEL_101:
      v72 = v70;
      CRadar::ChangeBlipScale(v70, 3);
      ScriptParams[0] = v72;
      goto LABEL_181;
    case 394:
      CRunningScript::CollectParameters(this, 3);
      v73 = ScriptParams[2];
      v74 = ScriptParams[0];
      v75 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v73 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      v76 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CRadar::GetActualBlipArrayIndex(v76);
      v77 = CRadar::SetCoordBlip(4, v74, v75, v73, 5, 3);
      CRadar::ChangeBlipScale(v77, 3);
      ScriptParams[0] = v77;
      goto LABEL_181;
    case 395:
      CRunningScript::CollectParameters(this, 2);
      CRadar::ChangeBlipDisplay(ScriptParams[0], (eBlipDisplay)ScriptParams[1]);
      return 0;
    case 396:
      CRunningScript::CollectParameters(this, 4);
      CamPosToGoTo = *(CVector *)ScriptParams;
      CAudioEngine::ReportMissionAudioEvent(&AudioEngine, ScriptParams[3], &CamPosToGoTo);
      return 0;
    case 397:
      CRunningScript::CollectParameters(this, 4);
LABEL_181:
      CRunningScript::StoreParameters(this, 1);
      return 0;
    case 398:
      CRunningScript::CollectParameters(this, 1);
      return 0;
    case 399:
      CRunningScript::CollectParameters(this, 1);
      Fading = CUpsideDownCarCheck::HasCarBeenUpsideDownForAWhile(&CTheScripts::UpsideDownCars, ScriptParams[0]);
LABEL_110:
      HasCollidedWith = Fading;
      if ( Fading )
        HasCollidedWith = 1;
LABEL_154:
      CRunningScript::UpdateCompareFlag(this, HasCollidedWith);
      return 0;
    default:
      return -1;
  }
}
// 14: using guessed type int dword_14;
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (00342D7C) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands400To499(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  float32x2_t v6; // d5
  Int8 v8; // r5
  uint8 *v9; // r4
  CPlayerInfo *v10; // r0
  CPed *v11; // r4
  uint8 *v12; // r0
  CEntity *v13; // r4
  float GroundZForCoord; // s20
  int (**v15)(void); // s16
  CTask *v16; // s18
  eWantedLevel m_WantedLevel; // r1
  CVehicle *v18; // r0
  CPed *v19; // r0
  CVehicle *v20; // r0
  CObject *v21; // r0
  uint8 *v22; // r8
  GxtChar *v23; // r5
  GxtChar *v24; // r6
  int bAddToPrevBriefs; // r0
  GxtChar *v26; // r5
  int v27; // r0
  unsigned __int32 v28; // s8
  unsigned __int32 v29; // s6
  float v30; // s4
  float v31; // r1
  float v32; // r2
  float32x2_t v33; // d1
  float v34; // r3
  unsigned __int32 v35; // s8
  unsigned __int32 v36; // s6
  unsigned int v37; // r0
  CPool<CVehicle,CHeli>::StorageType *m_aStorage; // r1
  uint8 *v39; // r2
  _DWORD *v40; // r2
  int v41; // r3
  int v42; // t1
  uint8 *v43; // r6
  float *v44; // r2
  float v45; // s0
  char v46; // r5
  uint8 *v47; // r1
  unsigned int v48; // r0
  uint8 *v49; // r1
  unsigned int v50; // r2
  int v51; // r3
  Bool8 v52; // r1
  int v53; // r5
  Int32 v54; // r0
  int v55; // r5
  int i; // r6
  int v57; // r2
  Int32 *v58; // r3
  Int32 v59; // r0
  Int32 v60; // r2
  Int32 v61; // r3
  int IsVehicleStopped; // r0
  CCopPed *v63; // r6
  bool v64; // zf
  CWeaponInfo *WeaponInfo; // r0
  int v66; // r5
  CEmergencyPed *v67; // r0
  int m_nPedFlags; // r3
  int v69; // r12
  int v70; // r1
  int v71; // r2
  int v72; // r2
  int v73; // r2
  int SwitchRoadsOff; // [sp+Ch] [bp-64h]
  CTaskSimpleCarSetPedInAsPassenger Coors; // [sp+1Ch] [bp-54h] BYREF

  v8 = -1;
  switch ( CurrCommand )
  {
    case 400:
      CRunningScript::CollectParameters(this, 1);
      CUpsideDownCarCheck::AddCarToCheck(&CTheScripts::UpsideDownCars, ScriptParams[0]);
      return 0;
    case 401:
      CRunningScript::CollectParameters(this, 1);
      CUpsideDownCarCheck::RemoveCarFromCheck(&CTheScripts::UpsideDownCars, ScriptParams[0]);
      return 0;
    case 417:
    case 418:
    case 419:
    case 420:
    case 421:
    case 422:
    case 423:
    case 424:
    case 425:
    case 426:
      CRunningScript::CharInAreaCheckCommand(this, CurrCommand);
      return 0;
    case 427:
    case 428:
      CRunningScript::CarInAreaCheckCommand(this, CurrCommand);
      return 0;
    case 429:
    case 430:
    case 431:
    case 432:
      CRunningScript::LocateCarCommand(this, CurrCommand);
      return 0;
    case 434:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v9 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v9 = 0;
      }
      v53 = CPed::GiveWeapon((CPed *)v9, (eWeaponType)ScriptParams[1], ScriptParams[2], 1);
      if ( CPed::IsPlayer((const CPed *)v9) )
      {
        *(_BYTE *)(*((_DWORD *)v9 + 273) + 32) = v53;
      }
      else
      {
        CPed::SetCurrentWeapon((CPed *)v9, v53);
        v64 = v9[1157] << 31 == 0;
        if ( v9[1157] << 31 )
          v64 = *((_DWORD *)v9 + 356) == 0;
        if ( !v64 )
        {
          WeaponInfo = CWeaponInfo::GetWeaponInfo(*(eWeaponType *)&v9[28 * (char)v9[1820] + 1444], 1);
          CPed::RemoveWeaponModel((CPed *)v9, WeaponInfo->m_modelId);
        }
      }
      return 0;
    case 436:
      CRunningScript::CollectParameters(this, 2);
      v10 = &CWorld::Players[ScriptParams[0]];
      if ( !ScriptParams[1] )
      {
        CPlayerInfo::MakePlayerSafe(v10, 1, 10.0);
        return 0;
      }
      if ( CCutsceneMgr::IntroTextIsActiveHack )
        CCutsceneMgr::IntroTextIsActiveHack = 0;
      v8 = 0;
      CPlayerInfo::MakePlayerSafe(v10, 0, 10.0);
      return v8;
    case 437:
      CRunningScript::CollectParameters(this, 1);
      CWeather::ForceWeather(ScriptParams[0]);
      return 0;
    case 438:
      CRunningScript::CollectParameters(this, 1);
      CWeather::ForceWeatherNow(ScriptParams[0]);
      return 0;
    case 439:
      CWeather::ReleaseWeather();
      return 0;
    case 441:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v11 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v11 = 0;
      }
      v54 = ScriptParams[1];
      if ( ScriptParams[1] )
      {
        v55 = 0;
        for ( i = 1444; ; i += 28 )
        {
          if ( *(int (***)(void))((char *)&v11->_vptr$CPlaceable + i) != (int (**)(void))v54 )
            goto LABEL_87;
          if ( CPed::IsPlayer(v11) )
            break;
          CPed::SetCurrentWeapon(v11, v55);
          if ( v55 == 12 )
            return 0;
LABEL_83:
          ++v55;
          v54 = ScriptParams[1];
        }
        v11->m_pPlayerData->m_nChosenWeapon = v55;
LABEL_87:
        if ( v55 == 12 )
          return 0;
        goto LABEL_83;
      }
      v8 = 0;
      if ( CPed::IsPlayer(v11) )
        v11->m_pPlayerData->m_nChosenWeapon = 0;
      else
        CPed::SetCurrentWeapon(v11, 0);
      return v8;
    case 443:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v12 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v12 = 0;
      }
      v57 = *((_DWORD *)v12 + 5);
      v58 = (Int32 *)(v57 + 48);
      if ( !v57 )
        v58 = (Int32 *)(v12 + 4);
      v59 = *v58;
      v60 = v58[1];
      v61 = v58[2];
      ScriptParams[0] = v59;
      ScriptParams[1] = v60;
      ScriptParams[2] = v61;
      CRunningScript::StoreParameters(this, 3);
      return 0;
    case 444:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] < 0 )
        return 0;
      if ( CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        return 0;
      v13 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !v13 )
        return 0;
      GroundZForCoord = *(float *)&ScriptParams[3];
      v15 = (int (**)(void))ScriptParams[1];
      v16 = (CTask *)ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      v8 = 0;
      (*((void (__fastcall **)(CEntity *, int (**)(void), CTask *, float, _DWORD))v13->_vptr$CPlaceable + 15))(
        v13,
        v15,
        v16,
        COERCE_FLOAT(LODWORD(GroundZForCoord)),
        0);
      Coors.m_pParent = v16;
      Coors._vptr$CTask = v15;
      *(float *)&Coors.m_bIsFinished = GroundZForCoord;
      CTheScripts::ClearSpaceForMissionEntity((const CVector *)&Coors, v13);
      return v8;
    case 445:
      ScriptParams[0] = CTimer::m_snTimeInMilliseconds;
      goto LABEL_62;
    case 448:
      CRunningScript::CollectParameters(this, 1);
      m_WantedLevel = CWorld::Players[ScriptParams[0]].pPed->m_pPlayerData->m_Wanted->m_WantedLevel;
      goto LABEL_61;
    case 449:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v18 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v18 = 0;
      }
      IsVehicleStopped = CTheScripts::IsVehicleStopped(v18);
      v52 = IsVehicleStopped;
      if ( IsVehicleStopped )
        v52 = 1;
      goto LABEL_98;
    case 450:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v19 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v19 = 0;
      }
      CTheScripts::CleanUpThisPed(v19);
      if ( this->IsThisAMissionScript )
        goto LABEL_101;
      return 0;
    case 451:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v20 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v20 = 0;
      }
      CTheScripts::CleanUpThisVehicle(v20);
      if ( this->IsThisAMissionScript )
        CMissionCleanup::RemoveEntityFromList(&CTheScripts::MissionCleanUp, ScriptParams[0], 1u);
      return 0;
    case 452:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v21 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v21 = 0;
      }
      CTheScripts::CleanUpThisObject(v21);
      if ( this->IsThisAMissionScript )
        goto LABEL_107;
      return 0;
    case 453:
      CRunningScript::CollectParameters(this, 1);
LABEL_101:
      CMissionCleanup::RemoveEntityFromList(&CTheScripts::MissionCleanUp, ScriptParams[0], 2u);
      return 0;
    case 455:
      CRunningScript::CollectParameters(this, 1);
LABEL_107:
      CMissionCleanup::RemoveEntityFromList(&CTheScripts::MissionCleanUp, ScriptParams[0], 3u);
      return 0;
    case 456:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v22 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v22 = 0;
      }
      CRunningScript::GetCorrectPedModelIndexForEmergencyServiceType(this, ScriptParams[1], &ScriptParams[2]);
      if ( ScriptParams[1] == 6 )
      {
        v63 = (CCopPed *)CPed::operator new(0x7CCu);
        CCopPed::CCopPed(v63, (eCopType)ScriptParams[2]);
      }
      else
      {
        v66 = ScriptParams[1] | 1;
        v67 = (CEmergencyPed *)CPed::operator new(0x7A4u);
        v63 = (CCopPed *)v67;
        if ( v66 == 19 )
          CEmergencyPed::CEmergencyPed(v67, ScriptParams[1], ScriptParams[2]);
        else
          CCivilianPed::CCivilianPed((CCivilianPed *)v67, (ePedType)ScriptParams[1], ScriptParams[2]);
      }
      CPed::SetCharCreatedBy(v63, 2u);
      m_nPedFlags = (int)v63->m_nPedFlags;
      v69 = *((_DWORD *)&v63->m_nPedFlags + 1);
      v70 = *((_DWORD *)&v63->m_nPedFlags + 2);
      v71 = *((_DWORD *)&v63->m_nPedFlags + 3);
      *(_DWORD *)&v63->m_nPedFlags = m_nPedFlags & 0x7FFFFFFF;
      if ( (v22[1069] & 2) != 0 )
      {
        *(_DWORD *)&v63->m_nPedFlags = m_nPedFlags & 0x7FFFDFFF;
        *((_DWORD *)&v63->m_nPedFlags + 1) = v69;
        *((_DWORD *)&v63->m_nPedFlags + 2) = v70;
        *((_DWORD *)&v63->m_nPedFlags + 3) = v71;
      }
      if ( ScriptParams[3] < 0 )
        v72 = 0;
      else
        v72 = CCarEnterExit::ComputeTargetDoorToEnterAsPassenger((const CVehicle *)v22, ScriptParams[3]);
      v8 = 0;
      CTaskSimpleCarSetPedInAsPassenger::CTaskSimpleCarSetPedInAsPassenger(&Coors, (CVehicle *)v22, v72, 0);
      Coors.m_bWarpingInToCar = 1;
      CTaskSimpleCarSetPedInAsPassenger::ProcessPed(&Coors, v63);
      CTaskSimpleCarSetPedInAsPassenger::~CTaskSimpleCarSetPedInAsPassenger(&Coors);
      ++CPopulation::ms_nTotalMissionPeds;
      CWorld::Add(v63);
      ScriptParams[0] = CPools::ms_pPedPool->m_aFlags[-1093107909
                                                    * (((char *)v63 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)v63 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2));
      CRunningScript::StoreParameters(this, 1);
      if ( !this->IsThisAMissionScript )
        return v8;
      CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, ScriptParams[0], 2u);
      return 0;
    case 483:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&Coors, 8u);
      v23 = CText::Get(&TheText, (const unsigned __int8 *)&Coors);
      CRunningScript::CollectParameters(this, 3);
      CMessages::AddBigMessageWithNumber(
        v23,
        ScriptParams[1],
        LOWORD(ScriptParams[2]) - 1,
        ScriptParams[0],
        -1,
        -1,
        -1,
        -1,
        -1);
      return 0;
    case 484:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&Coors, 8u);
      v24 = CText::Get(&TheText, (const unsigned __int8 *)&Coors);
      CRunningScript::CollectParameters(this, 3);
      bAddToPrevBriefs = CTheScripts::bAddNextMessageToPreviousBriefs;
      if ( CTheScripts::bAddNextMessageToPreviousBriefs )
        bAddToPrevBriefs = 1;
      CMessages::AddMessageWithNumber(
        (const unsigned __int8 *)&Coors,
        v24,
        ScriptParams[1],
        ScriptParams[2],
        ScriptParams[0],
        -1,
        -1,
        -1,
        -1,
        -1,
        bAddToPrevBriefs);
      goto LABEL_55;
    case 485:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&Coors, 8u);
      v26 = CText::Get(&TheText, (const unsigned __int8 *)&Coors);
      CRunningScript::CollectParameters(this, 3);
      v27 = CTheScripts::bAddNextMessageToPreviousBriefs;
      if ( CTheScripts::bAddNextMessageToPreviousBriefs )
        v27 = 1;
      CMessages::AddMessageJumpQWithNumber(
        v26,
        ScriptParams[1],
        ScriptParams[2],
        ScriptParams[0],
        -1LL,
        -1,
        -1,
        -1,
        v27);
LABEL_55:
      CTheScripts::bAddNextMessageToPreviousBriefs = 1;
      return 0;
    case 487:
      CRunningScript::CollectParameters(this, 6);
      v8 = 0;
      SwitchRoadsOff = 0;
      v3.n64_u32[0] = ScriptParams[0];
      v5.n64_u32[0] = ScriptParams[3];
      v4.n64_u32[0] = ScriptParams[1];
      v6.n64_u32[0] = ScriptParams[4];
      v28 = vmin_f32(v3, v5).n64_u32[0];
      v33.n64_u64[0] = vmax_f32(v3, v5).n64_u64[0];
      v2.n64_u32[0] = ScriptParams[2];
      v29 = vmin_f32(v4, v6).n64_u32[0];
      LODWORD(v30) = vmax_f32(v4, v6).n64_u32[0];
      v31 = *(float *)&v28;
      v32 = v33.n64_f32[0];
      v33.n64_u32[0] = ScriptParams[5];
      v34 = *(float *)&v29;
      goto LABEL_58;
    case 488:
      CRunningScript::CollectParameters(this, 6);
      v8 = 0;
      v3.n64_u32[0] = ScriptParams[0];
      v5.n64_u32[0] = ScriptParams[3];
      v4.n64_u32[0] = ScriptParams[1];
      v6.n64_u32[0] = ScriptParams[4];
      v35 = vmin_f32(v3, v5).n64_u32[0];
      v33.n64_u64[0] = vmax_f32(v3, v5).n64_u64[0];
      v2.n64_u32[0] = ScriptParams[2];
      v36 = vmin_f32(v4, v6).n64_u32[0];
      LODWORD(v30) = vmax_f32(v4, v6).n64_u32[0];
      v31 = *(float *)&v35;
      v32 = v33.n64_f32[0];
      v33.n64_u32[0] = ScriptParams[5];
      v34 = *(float *)&v36;
      SwitchRoadsOff = 1;
LABEL_58:
      CPathFind::SwitchRoadsOffInArea(
        &ThePaths,
        v31,
        v32,
        v34,
        v30,
        vmin_f32(v2, v33).n64_f32[0],
        vmax_f32(v2, v33).n64_f32[0],
        SwitchRoadsOff,
        1,
        0);
      return v8;
    case 489:
      CRunningScript::CollectParameters(this, 1);
      m_WantedLevel = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1160];
      goto LABEL_61;
    case 490:
      CRunningScript::CollectParameters(this, 1);
      m_WantedLevel = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1164];
LABEL_61:
      ScriptParams[0] = m_WantedLevel;
LABEL_62:
      CRunningScript::StoreParameters(this, 1);
      return 0;
    case 491:
      CRunningScript::CollectParameters(this, 1);
      CCarCtrl::CarDensityMultiplier = *(float *)ScriptParams;
      return 0;
    case 492:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0 )
      {
        v37 = (unsigned int)ScriptParams[0] >> 8;
        if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        {
          m_aStorage = CPools::ms_pVehiclePool->m_aStorage;
          v39 = CPools::ms_pVehiclePool->m_aStorage[v37];
          if ( v39 )
          {
            v42 = *((_DWORD *)v39 + 17);
            v40 = v39 + 68;
            v41 = v42;
            v43 = m_aStorage[v37];
            if ( ScriptParams[1] )
            {
              *v40 = v41 | 1;
              v44 = (float *)*((_DWORD *)v43 + 226);
              *((float *)v43 + 36) = v44[1] * 3.0;
              *((float *)v43 + 37) = v44[3] * 5.0;
              v45 = v44[9] + v44[9];
            }
            else
            {
              *v40 = v41 & 0xFFFFFFFE;
              v73 = *((_DWORD *)v43 + 226);
              *((_DWORD *)v43 + 36) = *(_DWORD *)(v73 + 4);
              *((_DWORD *)v43 + 37) = *(_DWORD *)(v73 + 12);
              v45 = *(float *)(v73 + 36);
            }
            *(float *)&m_aStorage[v37][164] = v45;
          }
        }
      }
      return 0;
    case 496:
      CRunningScript::CollectParameters(this, 1);
      CWanted::SetMaximumWantedLevel(ScriptParams[0]);
      return 0;
    case 499:
      v46 = 1;
      CRunningScript::CollectParameters(this, 1);
      v47 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v48 = v47[189];
      if ( v47[189] )
      {
        v49 = v47 + 192;
        v50 = 0;
        v46 = 1;
        do
        {
          v51 = *(_DWORD *)&v49[4 * v50];
          if ( v51 && (unsigned __int8)((*(_BYTE *)(v51 + 58) & 7) - 1) < 2u )
            v46 = 0;
          ++v50;
        }
        while ( v50 < v48 );
      }
      v52 = v46;
LABEL_98:
      CRunningScript::UpdateCompareFlag(this, v52);
      return 0;
    default:
      return v8;
  }
}
// 34338C: variable 'v3' is possibly undefined
// 34338C: variable 'v5' is possibly undefined
// 343398: variable 'v4' is possibly undefined
// 343398: variable 'v6' is possibly undefined
// 343410: variable 'v2' is possibly undefined
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (00343A28) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
Int8 __fastcall CRunningScript::ProcessCommands500To599(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  float32x2_t v6; // d5
  Int8 v8; // r6
  bool v9; // r1
  int v10; // r2
  CPlayerPedData *m_pPlayerData; // r1
  CWanted *m_Wanted; // r1
  char v13; // r2
  GxtChar *v14; // r8
  int Status; // r0
  float v16; // s0
  float v17; // s16
  float v18; // s18
  __int64 v19; // kr00_8
  uint8 *v20; // r0
  __int64 v21; // kr08_8 OVERLAPPED
  int32 Index; // r8
  float v23; // s20
  Int32 v24; // s16
  Int32 v25; // s18
  int32 ParameterWithoutIncreasingPC; // r0
  bool IsPickUpPickedUp; // r0
  CAutomobile *v28; // r0
  GxtChar *v29; // r5
  int GarageIndex; // r5
  CAutomobile *v31; // r1
  Bool8 v32; // r4
  CPed *v33; // r4
  float v34; // s0
  float *p_m_nHealth; // r0
  uint8 *v36; // r1
  uint8 *v37; // r1
  unsigned __int32 v38; // s8
  unsigned __int32 v39; // s6
  float v40; // s2
  float v41; // r1
  float v42; // r2
  float32x2_t v43; // d0
  float v44; // r3
  unsigned __int32 v45; // s8
  unsigned __int32 v46; // s6
  Int16 v47; // r1
  uint8 *v48; // r0
  Int32 v49; // r1
  uint8 *v50; // r4
  uint8 *v51; // r8
  Int32 v52; // r5
  int32 v53; // r0
  int m_status; // r1
  Int32 v55; // r5
  float GroundZForCoord; // s0
  int (**v57)(void); // s16
  int v58; // s18
  UInt8 *PCPointer; // r12
  Int32 PlayerSlotWithPedPointer; // r0
  int v61; // r1
  Int32 MaxHealth; // r0
  CEntity *v63; // r1
  AssocGroupId v64; // r0
  int v65; // r5
  const unsigned __int8 *AnimGroupName; // r0
  int v67; // r1
  bool v68; // zf
  char v69; // r4
  CTaskComplexDie *v70; // r5
  float m_nMaxHealth; // s4
  __int64 Type; // [sp+0h] [bp-A0h]
  int bMakeSound; // [sp+Ch] [bp-94h]
  CEventScriptCommand pName; // [sp+48h] [bp-58h] BYREF
  Char v76[10]; // [sp+60h] [bp-40h] BYREF
  Char pStringToFill[8]; // [sp+6Ah] [bp-36h] BYREF
  CVector v78; // 0:r0.12

  v8 = 0;
  switch ( CurrCommand )
  {
    case 500:
      CRunningScript::CollectParameters(this, 1);
      v8 = 0;
      v9 = *(float *)(*(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][20] + 40) <= 0.3;
      goto LABEL_107;
    case 501:
      CRunningScript::CollectParameters(this, 1);
      v10 = -1093107909
          * (((char *)CWorld::Players[ScriptParams[0]].pPed - (char *)CPools::ms_pPedPool->m_aStorage) >> 2);
      ScriptParams[0] = CPools::ms_pPedPool->m_aFlags[v10] | (v10 << 8);
      goto LABEL_52;
    case 502:
      CRestart::CancelOverrideRestart();
      return 0;
    case 503:
      CRunningScript::CollectParameters(this, 2);
      m_pPlayerData = CWorld::Players[ScriptParams[0]].pPed->m_pPlayerData;
      if ( m_pPlayerData )
        m_Wanted = m_pPlayerData->m_Wanted;
      else
        m_Wanted = 0;
      v13 = *((_BYTE *)&dword_1C + (_DWORD)m_Wanted + 2);
      if ( ScriptParams[1] )
      {
        *((_BYTE *)&dword_1C + (_DWORD)m_Wanted + 2) = v13 | 1;
        CWorld::StopAllLawEnforcersInTheirTracks();
      }
      else
      {
        *((_BYTE *)&dword_1C + (_DWORD)m_Wanted + 2) = v13 & 0xFE;
      }
      return 0;
    case 505:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v8 = 0;
      if ( !strcasecmp((const char *)pStringToFill, "DUMMY") )
        v14 = 0;
      else
        v14 = CText::Get(&TheText, pStringToFill);
      CRunningScript::CollectParameters(this, 8);
      v69 = ScriptParams[7];
      if ( ScriptParams[7] )
        v69 = 1;
      CDarkel::StartFrenzy(
        (eWeaponType)ScriptParams[0],
        ScriptParams[1],
        ScriptParams[2],
        ScriptParams[3],
        v14,
        ScriptParams[4],
        ScriptParams[5],
        ScriptParams[6],
        v69,
        0);
      return v8;
    case 506:
      Status = CDarkel::ReadStatus();
      goto LABEL_18;
    case 507:
      CRunningScript::CollectParameters(this, 1);
      v16 = sqrtf(*(float *)ScriptParams);
      goto LABEL_51;
    case 514:
    case 515:
    case 516:
    case 517:
    case 518:
    case 519:
      CRunningScript::LocateCharCarCommand(this, CurrCommand);
      return 0;
    case 520:
      CRunningScript::CollectParameters(this, 2);
      v17 = *(float *)ScriptParams;
      v18 = *(float *)&ScriptParams[1];
      *(float *)ScriptParams = v17 + (float)((float)(v18 - v17) * (float)((float)rand() * 4.6566e-10));
      goto LABEL_52;
    case 521:
      CRunningScript::CollectParameters(this, 2);
      v19 = *(_QWORD *)ScriptParams;
      Status = (int)(float)((float)((float)(unsigned __int16)rand() * 0.000015259) * (float)(HIDWORD(v19) - v19)) + v19;
LABEL_18:
      ScriptParams[0] = Status;
      goto LABEL_52;
    case 522:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] < 0 )
        return 0;
      if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        return 0;
      v20 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !v20 )
        return 0;
      v8 = 0;
      *((_DWORD *)v20 + 322) = ScriptParams[1];
      return v8;
    case 523:
      CRunningScript::CollectParameters(this, 1);
      v8 = 0;
      (*(void (__fastcall **)(uint8 *, _DWORD, _DWORD))(*(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][0]
                                                      + 168))(
        CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8],
        0,
        0);
      return v8;
    case 524:
      CRunningScript::CollectParameters(this, 4);
      v8 = 0;
      v21 = *(_QWORD *)ScriptParams;
      Type = *(_QWORD *)&ScriptParams[1];
      CExplosion::AddExplosion(0, 0, (eExplosionType)ScriptParams[3], *(CVector *)&v21, 0, 1u, -1.0, 0);
      return v8;
    case 525:
      CRunningScript::CollectParameters(this, 1);
      v8 = 0;
      v9 = *(float *)(*(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][20] + 40) >= 0.0;
      goto LABEL_107;
    case 531:
      CRunningScript::CollectParameters(this, 5);
      Index = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        Index = CTheScripts::UsedObjectArray[-ScriptParams[0]].Index;
      v23 = *(float *)&ScriptParams[4];
      v24 = ScriptParams[2];
      v25 = ScriptParams[3];
      if ( *(float *)&ScriptParams[4] <= -100.0 )
        v23 = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[2], *(float *)&ScriptParams[3]) + 0.5;
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CPickups::GetActualPickupIndex(ParameterWithoutIncreasingPC);
      *(_QWORD *)&v78.x = __PAIR64__(v25, v24);
      v8 = 0;
      v78.z = v23;
      ScriptParams[0] = CPickups::GenerateNewOne(v78, Index, LOBYTE(ScriptParams[1]), 0, 0, 0, 0);
      CRunningScript::StoreParameters(this, 1);
      return v8;
    case 532:
      CRunningScript::CollectParameters(this, 1);
      IsPickUpPickedUp = CPickups::IsPickUpPickedUp(ScriptParams[0]);
      goto LABEL_133;
    case 533:
      CRunningScript::CollectParameters(this, 1);
      CPickups::RemovePickUp(ScriptParams[0]);
      return 0;
    case 534:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v28 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v28 = 0;
      }
      if ( ScriptParams[1] )
      {
        CAutomobile::SetTaxiLight(v28, 1);
        return 0;
      }
      v8 = 0;
      CAutomobile::SetTaxiLight(v28, 0);
      return v8;
    case 535:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v29 = CText::Get(&TheText, pStringToFill);
      CRunningScript::CollectParameters(this, 2);
      CMessages::AddBigMessageQ(v29, ScriptParams[0], LOWORD(ScriptParams[1]) - 1);
      return 0;
    case 539:
      CRunningScript::ReadTextLabelFromScript(this, v76, 8u);
      GarageIndex = CGarages::FindGarageIndex(v76);
      CRunningScript::CollectParameters(this, 1);
      if ( GarageIndex < 0 )
        return 0;
      if ( ScriptParams[0] <= -1 )
      {
        v8 = 0;
        CGarages::SetTargetCarForMissionGarage(GarageIndex, 0);
        return v8;
      }
      if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        v31 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      else
        v31 = 0;
      CGarages::SetTargetCarForMissionGarage(GarageIndex, v31);
      return 0;
    case 540:
    case 561:
    case 592:
      return v8;
    case 545:
      CRunningScript::CollectParameters(this, 2);
      v32 = ScriptParams[1];
      if ( ScriptParams[1] )
        v32 = 1;
      CPad::GetPad(ScriptParams[0])->bApplyBrakes = v32;
      return 0;
    case 547:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v33 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v33 = 0;
      }
      if ( !ScriptParams[1] )
      {
        v70 = (CTaskComplexDie *)CTask::operator new(0x28u);
        v8 = 0;
        CTaskComplexDie::CTaskComplexDie(v70, WEAPONTYPE_UNARMED, ANIM_STD_PED, ANIM_STD_KO_FRONT, 4.0, 0.0, 0, 0, 0, 0);
        CEventScriptCommand::CEventScriptCommand(&pName, 3, v70, 0);
        CEventGroup::Add(&v33->m_pPedIntelligence->m_eventGroup, &pName, 0);
        CEventScriptCommand::~CEventScriptCommand(&pName);
        return v8;
      }
      if ( CPed::IsPlayer(v33) )
      {
        PlayerSlotWithPedPointer = CWorld::FindPlayerSlotWithPedPointer(v33);
        v61 = ScriptParams[1];
        MaxHealth = CWorld::Players[PlayerSlotWithPedPointer].MaxHealth;
        if ( ScriptParams[1] > MaxHealth )
          v61 = MaxHealth;
        p_m_nHealth = &v33->m_nHealth;
        v34 = (float)v61;
      }
      else
      {
        p_m_nHealth = &v33->m_nMaxHealth;
        v34 = (float)ScriptParams[1];
        m_nMaxHealth = v33->m_nMaxHealth;
        v33->m_nHealth = (float)ScriptParams[1];
        if ( m_nMaxHealth != 100.0 )
          return 0;
      }
LABEL_145:
      *p_m_nHealth = v34;
      return 0;
    case 548:
      CRunningScript::CollectParameters(this, 2);
      v34 = (float)ScriptParams[1];
      p_m_nHealth = (float *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1228];
      goto LABEL_145;
    case 550:
      CRunningScript::CollectParameters(this, 1);
      v36 = &CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1348];
      goto LABEL_50;
    case 551:
      CRunningScript::CollectParameters(this, 1);
      v36 = &CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1228];
LABEL_50:
      LODWORD(v16) = (int)*(float *)v36;
LABEL_51:
      *(float *)ScriptParams = v16;
LABEL_52:
      CRunningScript::StoreParameters(this, 1);
      return 0;
    case 553:
      CRunningScript::CollectParameters(this, 3);
      v37 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v8 = 0;
      v37[1080] = ScriptParams[1];
      v37[1081] = ScriptParams[2];
      return v8;
    case 554:
      CRunningScript::CollectParameters(this, 6);
      v8 = 0;
      bMakeSound = 0;
      v2.n64_u32[0] = ScriptParams[0];
      v5.n64_u32[0] = ScriptParams[3];
      v3.n64_u32[0] = ScriptParams[1];
      v6.n64_u32[0] = ScriptParams[4];
      v38 = vmin_f32(v2, v5).n64_u32[0];
      v43.n64_u64[0] = vmax_f32(v2, v5).n64_u64[0];
      v4.n64_u32[0] = ScriptParams[2];
      v39 = vmin_f32(v3, v6).n64_u32[0];
      LODWORD(v40) = vmax_f32(v3, v6).n64_u32[0];
      v41 = *(float *)&v38;
      v42 = v43.n64_f32[0];
      v43.n64_u32[0] = ScriptParams[5];
      v44 = *(float *)&v39;
      goto LABEL_56;
    case 555:
      CRunningScript::CollectParameters(this, 6);
      v8 = 0;
      v2.n64_u32[0] = ScriptParams[0];
      v5.n64_u32[0] = ScriptParams[3];
      v3.n64_u32[0] = ScriptParams[1];
      v6.n64_u32[0] = ScriptParams[4];
      v45 = vmin_f32(v2, v5).n64_u32[0];
      v43.n64_u64[0] = vmax_f32(v2, v5).n64_u64[0];
      v4.n64_u32[0] = ScriptParams[2];
      v46 = vmin_f32(v3, v6).n64_u32[0];
      LODWORD(v40) = vmax_f32(v3, v6).n64_u32[0];
      v41 = *(float *)&v45;
      v42 = v43.n64_f32[0];
      v43.n64_u32[0] = ScriptParams[5];
      v44 = *(float *)&v46;
      bMakeSound = 1;
LABEL_56:
      CPathFind::SwitchPedRoadsOffInArea(
        &ThePaths,
        v41,
        v42,
        v44,
        v40,
        vmin_f32(v4, v43).n64_f32[0],
        vmax_f32(v4, v43).n64_f32[0],
        bMakeSound,
        0);
      return v8;
    case 565:
      v47 = 3;
      goto LABEL_59;
    case 566:
      v47 = 2;
LABEL_59:
      CRunningScript::CollectParameters(this, v47);
      return 0;
    case 567:
      CRunningScript::CollectParameters(this, 4);
      CGangs::SetGangWeapons(ScriptParams[0], ScriptParams[1], ScriptParams[2], ScriptParams[3]);
      return 0;
    case 571:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v48 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v48 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v63 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v63 = 0;
      }
      v68 = v48[1157] << 31 == 0;
      if ( v48[1157] << 31 )
        v68 = *((_DWORD *)v48 + 356) == 0;
      if ( v68 )
      {
        IsPickUpPickedUp = CPhysical::GetHasCollidedWith((CPhysical *)v48, v63);
LABEL_133:
        LOBYTE(m_status) = IsPickUpPickedUp;
      }
      else
      {
        LOBYTE(m_status) = 0;
      }
      goto LABEL_134;
    case 572:
      CRunningScript::CollectParameters(this, 1);
      --ScriptParams[0];
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pName, 8u);
      if ( (unsigned __int8)(LOBYTE(pName._vptr$CEvent) - 65) <= 0x19u )
        LOBYTE(pName._vptr$CEvent) += 32;
      if ( (unsigned __int8)(BYTE1(pName._vptr$CEvent) - 65) < 0x1Au )
        BYTE1(pName._vptr$CEvent) += 32;
      if ( (unsigned __int8)(BYTE2(pName._vptr$CEvent) - 65) <= 0x19u )
        BYTE2(pName._vptr$CEvent) += 32;
      if ( (unsigned __int8)(HIBYTE(pName._vptr$CEvent) - 65) <= 0x19u )
        HIBYTE(pName._vptr$CEvent) += 32;
      if ( (unsigned __int8)(LOBYTE(pName.m_iAccumulatedTime) - 65) <= 0x19u )
        LOBYTE(pName.m_iAccumulatedTime) += 32;
      if ( (unsigned __int8)(BYTE1(pName.m_iAccumulatedTime) - 65) <= 0x19u )
        BYTE1(pName.m_iAccumulatedTime) += 32;
      if ( (unsigned __int8)(BYTE2(pName.m_iAccumulatedTime) - 65) <= 0x19u )
        BYTE2(pName.m_iAccumulatedTime) += 32;
      if ( (unsigned __int8)(HIBYTE(pName.m_iAccumulatedTime) - 65) <= 0x19u )
        HIBYTE(pName.m_iAccumulatedTime) += 32;
      CStreaming::RequestSpecialChar(ScriptParams[0], (const unsigned __int8 *)&pName, 12);
      v49 = ScriptParams[0] + 290;
      goto LABEL_91;
    case 573:
      CRunningScript::CollectParameters(this, 1);
      IsPickUpPickedUp = CStreaming::HasSpecialCharLoaded(--ScriptParams[0]);
      goto LABEL_133;
    case 577:
      CRunningScript::CollectParameters(this, 1);
      IsPickUpPickedUp = CPlayerInfo::IsPlayerInRemoteMode(&CWorld::Players[ScriptParams[0]]);
      goto LABEL_133;
    case 578:
      CRunningScript::CollectParameters(this, 2);
      v50 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v50[1202] = ScriptParams[1] & 7 | v50[1202] & 0xF8;
      *((_DWORD *)v50 + 311) = FindPlayerPed(-1);
      return 0;
    case 580:
      CRunningScript::CollectParameters(this, 3);
      v8 = 0;
      CCutsceneMgr::ms_cutsceneOffset = *(CVector *)ScriptParams;
      return v8;
    case 581:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v51 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v51 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pName, 0x10u);
      if ( CAnimManager::ms_numAnimAssocDefinitions < 1 )
      {
        v64 = ANIM_STD_PED;
      }
      else
      {
        v64 = ANIM_STD_PED;
        v65 = 0;
        do
        {
          AnimGroupName = CAnimManager::GetAnimGroupName(v64);
          v67 = strcasecmp((const char *)&pName, (const char *)AnimGroupName);
          v65 += v67 != 0;
          v64 = (unsigned __int16)v65;
        }
        while ( CAnimManager::ms_numAnimAssocDefinitions > (unsigned __int16)v65 && v67 );
      }
      *((_DWORD *)v51 + 312) = v64;
      return 0;
    case 583:
      CRunningScript::CollectParameters(this, 1);
      v52 = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        v52 = CTheScripts::UsedObjectArray[-ScriptParams[0]].Index;
      CStreaming::RequestModel(v52, 12);
      v49 = v52;
LABEL_91:
      CScriptResourceManager::AddToResourceManager(&CTheScripts::ScriptResourceManager, v49, 2u, this);
      return 0;
    case 584:
      CRunningScript::CollectParameters(this, 1);
      v53 = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        v53 = CTheScripts::UsedObjectArray[-ScriptParams[0]].Index;
      m_status = CStreaming::ms_aInfoForModel[v53].m_status;
      if ( m_status != 1 )
        LOBYTE(m_status) = 0;
LABEL_134:
      CRunningScript::UpdateCompareFlag(this, m_status);
      return 0;
    case 585:
      CRunningScript::CollectParameters(this, 1);
      v55 = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        v55 = CTheScripts::UsedObjectArray[-ScriptParams[0]].Index;
      if ( CScriptResourceManager::RemoveFromResourceManager(&CTheScripts::ScriptResourceManager, v55, 2u, this) )
        CStreaming::SetMissionDoesntRequireModel(v55);
      return 0;
    case 591:
      CRunningScript::CollectParameters(this, 9);
      GroundZForCoord = *(float *)&ScriptParams[2];
      v57 = (int (**)(void))ScriptParams[0];
      v58 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      PCPointer = this->PCPointer;
      pName.m_iAccumulatedTime = v58;
      pName._vptr$CEvent = v57;
      *(float *)&pName.m_bIsPersistent = GroundZForCoord;
      v8 = 0;
      CCoronas::RegisterCorona(
        (u_native)&PCPointer[(_DWORD)this
                           + (unsigned int)(float)((float)(*(float *)&v57 + 3000.0)
                                                 + (float)(unsigned int)(float)((float)(*(float *)&v58 + 3000.0)
                                                                              * 12001.0))],
        0,
        ScriptParams[6],
        ScriptParams[7],
        ScriptParams[8],
        0xFFu,
        (const CVector *)&pName,
        *(float *)&ScriptParams[3],
        450.0,
        LOBYTE(ScriptParams[4]),
        ScriptParams[5],
        1u,
        0,
        0,
        0.0,
        0,
        1.5,
        0,
        15.0,
        0,
        0);
      return v8;
    case 595:
      CClock::StoreClock();
      return 0;
    case 596:
      CClock::RestoreClock();
      return 0;
    case 598:
      CRunningScript::CollectParameters(this, 1);
      v8 = 0;
      v9 = CWorld::Players[ScriptParams[0]].PlayerState == 0;
LABEL_107:
      CRunningScript::UpdateCompareFlag(this, v9);
      return v8;
    default:
      return -1;
  }
}
// 343D91: failed to expand linear variable kr08_8.8
// 1C: using guessed type int dword_1C;
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 677DD0: using guessed type CStreamingInfo (*CStreaming::ms_aInfoForModel)[26316];

//----- (0034495C) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands600To699(CRunningScript *this, Int32 CurrCommand)
{
  Int8 v3; // r5
  uint8 *v4; // r1
  uint8 v5; // r2
  uint8 v6; // r3
  Int32 v7; // r3
  int GarageIndex; // r0
  Int32 Index; // r0
  CBaseModelInfo *v10; // r6
  CObject *v11; // r5
  char v12; // r0
  float GroundZForCoord; // s20
  RwReal v14; // s16
  RwReal v15; // s18
  CMatrix *m_pMat; // r0
  float *p_tz; // r0
  CPed *v18; // r0
  int v19; // s20
  int v20; // s16
  int v21; // s18
  int32 ParameterWithoutIncreasingPC; // r0
  int v23; // r5
  int v24; // s20
  int v25; // s16
  int v26; // s18
  int32 v27; // r0
  int v28; // r3
  int *v29; // r1
  unsigned int v30; // r1
  int v31; // r2
  unsigned int v32; // r3
  int v33; // r12
  int *v34; // r1
  unsigned int v35; // r1
  int v36; // r2
  unsigned int v37; // r0
  unsigned int v38; // r2
  unsigned int v39; // r0
  unsigned int v40; // r2
  unsigned int v41; // r0
  int v42; // r0
  int IsPedStopped; // r0
  Bool8 v44; // r1
  CMatrix *v45; // r0
  float tx; // s22
  float ty; // s24
  float tz; // s26
  float *p_xx; // r0
  float v50; // s2
  float v51; // s4
  RwObject_0 *m_pRwObject; // r0
  char *parent; // r1
  const CMatrix *v54; // r0
  RwMatrix *v55; // r1
  CVector pStringToFill; // [sp+10h] [bp-50h] BYREF

  v3 = 0;
  switch ( CurrCommand )
  {
    case 659:
      v3 = 0;
      ScriptParams[0] = 0;
      CRunningScript::StoreParameters(this, 1);
      return v3;
    case 660:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v4 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v5 = v4[2172];
      v6 = v5 | 2;
      if ( ScriptParams[1] )
        v6 = v5 & 0xFD;
      v4[2172] = v6;
      return v3;
    case 662:
      CRunningScript::CollectParameters(this, 1);
      v7 = ScriptParams[0]--;
      if ( CScriptResourceManager::RemoveFromResourceManager(&CTheScripts::ScriptResourceManager, v7 + 289, 2u, this) )
        CStreaming::SetMissionDoesntRequireSpecialChar(ScriptParams[0]);
      goto LABEL_74;
    case 663:
      CRunningScript::CollectParameters(this, 1);
      CDarkel::ResetModelsKilledByPlayer(ScriptParams[0]);
      goto LABEL_74;
    case 664:
      CRunningScript::CollectParameters(this, 2);
      ScriptParams[0] = CDarkel::QueryModelsKilledByPlayer(ScriptParams[1], ScriptParams[0]);
      goto LABEL_35;
    case 665:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 8u);
      GarageIndex = CGarages::FindGarageIndex((unsigned __int8 *)&pStringToFill);
      if ( GarageIndex > -1 )
        CGarages::ActivateGarage(GarageIndex);
      goto LABEL_74;
    case 667:
      CRunningScript::CollectParameters(this, 4);
      Index = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        Index = CTheScripts::UsedObjectArray[-ScriptParams[0]].Index;
      v10 = CModelInfo::ms_modelInfoPtrs[Index];
      v10->m_alpha = -1;
      v11 = CObject::Create(Index, 0);
      v12 = 6;
      if ( !this->bIsThisAStreamedScript && (unsigned __int8)this->ScriptBrainType == 255 )
        v12 = 2;
      v11->ObjectCreatedBy = v12;
      GroundZForCoord = *(float *)&ScriptParams[3];
      v14 = *(float *)&ScriptParams[1];
      v15 = *(float *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      m_pMat = v11->m_pMat;
      if ( m_pMat )
      {
        m_pMat->tx = v14;
        v11->m_pMat->ty = v15;
        p_tz = &v11->m_pMat->tz;
      }
      else
      {
        p_tz = &v11->m_transform.m_translate.z;
        v11->m_transform.m_translate.x = v14;
        v11->m_transform.m_translate.y = v15;
      }
      *p_tz = GroundZForCoord;
      v45 = v11->m_pMat;
      if ( v45 )
      {
        tx = v45->tx;
        ty = v45->ty;
        tz = v45->tz;
        CMatrix::SetRotate(v45, 0.0, 0.0, 0.0);
        p_xx = &v11->m_pMat->xx;
        v50 = ty + p_xx[13];
        v51 = tz + p_xx[14];
        p_xx[12] = tx + p_xx[12];
        p_xx[13] = v50;
        p_xx[14] = v51;
      }
      else
      {
        v11->m_transform.m_heading = 0.0;
      }
      m_pRwObject = v11->m_pRwObject;
      if ( m_pRwObject )
      {
        parent = (char *)m_pRwObject->parent;
        v54 = v11->m_pMat;
        v55 = (RwMatrix *)(parent + 16);
        if ( v54 )
          CMatrix::UpdateRwMatrix(v54, v55);
        else
          CSimpleTransform::UpdateRwMatrix(&v11->m_transform, v55);
      }
      CEntity::UpdateRwFrame(v11);
      if ( (*((int (__fastcall **)(CBaseModelInfo *))v10->_vptr$CBaseModelInfo + 4))(v10) )
        CEntity::SetupBigBuilding(v11);
      pStringToFill.y = v15;
      pStringToFill.x = v14;
      pStringToFill.z = GroundZForCoord;
      CTheScripts::ClearSpaceForMissionEntity(&pStringToFill, v11);
      CWorld::Add(v11);
      ScriptParams[0] = CPools::ms_pObjectPool->m_aFlags[-654471207
                                                       * (((char *)v11 - (char *)CPools::ms_pObjectPool->m_aStorage) >> 2)] | (-40904448 * (((char *)v11 - (char *)CPools::ms_pObjectPool->m_aStorage) >> 2));
      CRunningScript::StoreParameters(this, 1);
      if ( this->IsThisAMissionScript )
        CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, ScriptParams[0], 3u);
      goto LABEL_74;
    case 672:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v18 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v18 = 0;
      }
      IsPedStopped = CTheScripts::IsPedStopped(v18);
      v44 = IsPedStopped;
      if ( IsPedStopped )
        v44 = 1;
      CRunningScript::UpdateCompareFlag(this, v44);
      goto LABEL_74;
    case 675:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
        CCamera::SetWideScreenOn(&TheCamera);
      else
        CCamera::SetWideScreenOff(&TheCamera);
      goto LABEL_74;
    case 676:
    case 677:
      return v3;
    case 679:
      CRunningScript::CollectParameters(this, 4);
      v19 = ScriptParams[2];
      v20 = ScriptParams[0];
      v21 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v19 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CRadar::GetActualBlipArrayIndex(ParameterWithoutIncreasingPC);
      v23 = CRadar::SetCoordBlip(5, v20, v21, v19, 2, 3);
      goto LABEL_34;
    case 680:
      CRunningScript::CollectParameters(this, 4);
      v24 = ScriptParams[2];
      v25 = ScriptParams[0];
      v26 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v24 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      v27 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CRadar::GetActualBlipArrayIndex(v27);
      v23 = CRadar::SetCoordBlip(4, v25, v26, v24, 5, 3);
LABEL_34:
      CRadar::SetBlipSprite(v23, ScriptParams[3]);
      ScriptParams[0] = v23;
LABEL_35:
      CRunningScript::StoreParameters(this, 1);
      goto LABEL_74;
    case 681:
      CRunningScript::CollectParameters(this, 2);
      v28 = 1996;
      v29 = CPools::ms_pPedPool;
      goto LABEL_38;
    case 682:
      CRunningScript::CollectParameters(this, 2);
      v28 = 2604;
      v29 = (int *)&CPools::ms_pVehiclePool;
LABEL_38:
      v30 = **(_DWORD **)*v29 + ((unsigned int)ScriptParams[0] >> 8) * v28;
      v3 = 0;
      v31 = *(_DWORD *)(v30 + 68);
      v32 = v31 & 0xFFBFFFFF;
      if ( ScriptParams[1] )
        v32 = v31 | 0x400000;
      *(_DWORD *)(v30 + 68) = v32;
      return v3;
    case 683:
      CRunningScript::CollectParameters(this, 6);
      v33 = 1996;
      v34 = CPools::ms_pPedPool;
      goto LABEL_43;
    case 684:
      CRunningScript::CollectParameters(this, 6);
      v33 = 2604;
      v34 = (int *)&CPools::ms_pVehiclePool;
LABEL_43:
      v35 = **(_DWORD **)*v34 + ((unsigned int)ScriptParams[0] >> 8) * v33;
      v36 = *(_DWORD *)(v35 + 68);
      v37 = v36 & 0xFFFBFFFF;
      if ( ScriptParams[1] )
        v37 = v36 | 0x40000;
      v38 = v37 & 0xFFF7FFFF;
      if ( ScriptParams[2] )
        v38 = v37 | 0x80000;
      v39 = v38 & 0xFF7FFFFF;
      v3 = 0;
      if ( ScriptParams[3] )
        v39 = v38 | 0x800000;
      v40 = v39 & 0xFFEFFFFF;
      if ( ScriptParams[4] )
        v40 = v39 | 0x100000;
      v41 = v40 & 0xFFDFFFFF;
      if ( ScriptParams[5] )
        v41 = v40 | 0x200000;
      *(_DWORD *)(v35 + 68) = v41;
      break;
    case 697:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 8u);
      v42 = CGarages::FindGarageIndex((unsigned __int8 *)&pStringToFill);
      if ( v42 > -1 )
        CGarages::DeActivateGarage(v42);
LABEL_74:
      v3 = 0;
      break;
    default:
      v3 = -1;
      break;
  }
  return v3;
}
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 678534: using guessed type int *CPools::ms_pVehiclePool;

//----- (00344F74) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands700To799(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  float32x2_t v6; // d5
  Int8 v8; // r6
  unsigned int v9; // r0
  CPool<CVehicle,CHeli>::StorageType *m_aStorage; // r1
  uint8 *v11; // r2
  uint8 *v12; // r2
  int IsShallowWater; // r0
  float GroundZForCoord; // s0
  CPathFind *v15; // s16
  Int32 v16; // s18
  float v17; // r6
  CNodeAddress *NodeClosestToCoors; // r0
  float v19; // r1
  float v20; // r0
  char v21; // r5
  float v22; // s0
  CPathFind *v23; // s16
  Int32 v24; // s18
  Int32 v25; // r6
  CNodeAddress *v26; // r0
  uint8 *v27; // r4
  uint8 *v28; // r5
  float GroundZFor3DCoord; // r0
  float v30; // s0
  Int32 v31; // s16
  Int32 v32; // s18
  unsigned int ActualScriptThingIndex; // r0
  __int16 v34; // r1
  unsigned int v35; // r0
  uint8 *v36; // r0
  uint8 *v37; // r0
  Bool8 v38; // r1
  uint8 *v39; // r5
  int v40; // r5
  int32 m_nSize; // r6
  int v42; // r9
  int v43; // r8
  float v44; // s16
  float v45; // s18
  uint8 *m_aFlags; // r1
  CPool<CPed,CCopPed>::StorageType *v47; // r0
  uint8 *v48; // r5
  int v49; // r0
  uint8 *v50; // r1
  __int64 v51; // d16
  float z; // s20
  int DoesPointLieWithinZoneWithGivenName; // r0
  float v54; // s20
  RwReal v55; // s18
  RwReal v56; // s16
  int32 ParameterWithoutIncreasingPC; // r0
  char *v58; // r3
  int v59; // r4
  bool v60; // zf
  float *v61; // r1
  float v62; // s0
  float v63; // r0
  float v64; // s8
  float32x2_t v65; // d0
  float v66; // s6
  float v67; // s16
  float v68; // r9
  float v69; // s20
  float v70; // s18
  Bool8 IsProjectileInRange; // r0
  int v72; // r1
  int v73; // r1
  int GarageIndex; // r8
  GxtChar *v75; // r8
  int v76; // r0
  GxtChar *v77; // r9
  int v78; // r0
  GxtChar *v79; // r9
  int v80; // r0
  GxtChar *v81; // r8
  int v82; // r0
  GxtChar *v83; // r9
  int v84; // r0
  float StatValue; // r0
  uint8 *v86; // r0
  Int32 v87; // r0
  uint8 *v88; // r0
  Int32 v89; // r2
  float v90; // s20
  Int32 v91; // s16
  Int32 v92; // s18
  int v93; // r0
  unsigned __int8 v94; // r1
  char v95; // r0
  float v96; // r3
  Int32 v97; // s16
  Int32 v98; // s18
  int v99; // r1
  int v100; // r2
  unsigned int v101; // r5
  int v102; // r1
  uint8 v103; // r2
  CPathNode *v104; // r0
  float v105; // s4
  float v106; // s0
  int IsWithinArea; // r0
  CRunningScript *v108; // r0
  unsigned int v109; // r3
  uint8 v110; // r6
  unsigned int v111; // r3
  bool v113; // [sp+1Ch] [bp-D4h]
  CPed *v114; // [sp+20h] [bp-D0h]
  uint8 *v115; // [sp+24h] [bp-CCh]
  char v116; // [sp+40h] [bp-B0h] BYREF
  char v117; // [sp+4Ch] [bp-A4h] BYREF
  float pWaterZ; // [sp+58h] [bp-98h] BYREF
  bool pBool; // [sp+5Fh] [bp-91h] BYREF
  CVector pSuccess; // [sp+60h] [bp-90h] BYREF
  UInt64 v121; // [sp+70h] [bp-80h] BYREF
  Char v122[8]; // [sp+7Ah] [bp-76h] BYREF
  Char MissionName[10]; // [sp+82h] [bp-6Eh] BYREF
  float v124; // [sp+8Ch] [bp-64h]
  Char v125[8]; // [sp+96h] [bp-5Ah] BYREF
  Char TextLabel[10]; // [sp+9Eh] [bp-52h] BYREF
  Char pStringToFill[8]; // [sp+AAh] [bp-46h] BYREF
  CVector v128; // 0:r0.12
  CVector v129; // 0:r1.12
  CVector v130; // 0:r2.8,8:^0.4
  CVector v131; // 0:r2.8,8:^0.4

  v8 = 0;
  pWaterZ = 0.0;
  switch ( CurrCommand )
  {
    case 703:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0 )
        goto LABEL_149;
      v9 = (unsigned int)ScriptParams[0] >> 8;
      if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        goto LABEL_149;
      m_aStorage = CPools::ms_pVehiclePool->m_aStorage;
      v11 = CPools::ms_pVehiclePool->m_aStorage[v9];
      if ( !v11 )
        goto LABEL_149;
      if ( v11[69] << 31 )
        goto LABEL_175;
      v12 = m_aStorage[v9];
      if ( *((_WORD *)v12 + 19) != 539 || *((float *)v12 + 506) >= 1.0 )
        goto LABEL_149;
      IsShallowWater = SurfaceInfos_c::IsShallowWater(&g_surfaceInfos, m_aStorage[v9][1883]);
      goto LABEL_37;
    case 704:
      CRunningScript::CollectParameters(this, 3);
      GroundZForCoord = *(float *)&ScriptParams[2];
      v15 = (CPathFind *)ScriptParams[0];
      v16 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      *(_QWORD *)&v130.x = __PAIR64__(LODWORD(GroundZForCoord), v16);
      v17 = 0.0;
      LODWORD(v130.z) = 1;
      NodeClosestToCoors = CPathFind::FindNodeClosestToCoors(
                             (CNodeAddress *)&ThePaths,
                             v15,
                             v130,
                             1000000.0,
                             COERCE_FLOAT(1),
                             0,
                             0,
                             0,
                             0,
                             v113);
      if ( (unsigned __int16)NodeClosestToCoors == 0xFFFF )
      {
        v19 = 0.0;
        v20 = 0.0;
        v21 = 0;
      }
      else
      {
        v21 = 1;
        v104 = &ThePaths.pNodes[(unsigned __int16)NodeClosestToCoors][(unsigned int)NodeClosestToCoors >> 16];
        v105 = (float)v104->CoorsY * 0.125;
        v106 = (float)v104->CoorsX * 0.125;
        v20 = (float)v104->CoorsZ * 0.125;
        v19 = v105;
        v17 = v106;
      }
      *(float *)ScriptParams = v17;
      *(float *)&ScriptParams[1] = v19;
      *(float *)&ScriptParams[2] = v20;
      goto LABEL_186;
    case 705:
      CRunningScript::CollectParameters(this, 3);
      v22 = *(float *)&ScriptParams[2];
      v23 = (CPathFind *)ScriptParams[0];
      v24 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v22 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      *(_QWORD *)&v131.x = __PAIR64__(LODWORD(v22), v24);
      v25 = 0;
      v131.z = 0.0;
      v26 = CPathFind::FindNodeClosestToCoors((CNodeAddress *)&ThePaths, v23, v131, 1000000.0, 0.0, 1, 0, 0, 0, v113);
      CPathFind::FindNodeCoorsForScript((CVector *)&MissionName[2], &ThePaths, (CNodeAddress)v26, (bool *)&pSuccess);
      if ( LOBYTE(pSuccess.x) )
      {
        v21 = 1;
        v25 = LODWORD(v124);
        ScriptParams[0] = *(_DWORD *)&MissionName[2];
        ScriptParams[1] = *(_DWORD *)&MissionName[6];
      }
      else
      {
        v21 = 0;
        ScriptParams[0] = 0;
        ScriptParams[1] = 0;
      }
      ScriptParams[2] = v25;
LABEL_186:
      CRunningScript::StoreParameters(this, 3);
      v108 = this;
      LOBYTE(v34) = v21;
      goto LABEL_200;
    case 706:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v27 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v27 = 0;
      }
      v90 = *(float *)&ScriptParams[3];
      v91 = ScriptParams[1];
      v92 = ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        v90 = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      *(_DWORD *)&MissionName[6] = v92;
      *(_DWORD *)&MissionName[2] = v91;
      v124 = v90 + CEntity::GetDistanceFromCentreOfMassToBaseOfModel((CEntity *)v27);
      v93 = CCarCtrl::JoinCarWithRoadSystemGotoCoors((CVehicle *)v27, (const CVector *)&MissionName[2], 0, 0);
      v94 = v27[958] - 57;
      if ( v93 )
      {
        if ( v94 < 2u )
          goto LABEL_190;
        v95 = 13;
      }
      else
      {
        if ( v94 < 2u )
          goto LABEL_190;
        v95 = 12;
      }
      v27[958] = v95;
LABEL_190:
      v109 = v27[980];
      v99 = *((_DWORD *)v27 + 267);
      v100 = *((_DWORD *)v27 + 268);
      v110 = v27[58];
      if ( v109 <= 1 )
        LOBYTE(v109) = 1;
      v27[980] = v109;
      v27[58] = v110 & 7 | 0x18;
LABEL_193:
      v111 = v99 & 0xFFFFFFEF;
      v8 = 0;
      if ( (v100 & 0x200) == 0 )
        v111 = v99 | 0x10;
      *((_DWORD *)v27 + 267) = v111;
      *((_DWORD *)v27 + 236) = CTimer::m_snTimeInMilliseconds;
      return v8;
    case 714:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v28 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v28 = 0;
      }
      goto LABEL_159;
    case 715:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v28 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v28 = 0;
      }
      goto LABEL_159;
    case 716:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v28 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v28 = 0;
      }
LABEL_159:
      CEntity::GetBoundCentre((CVector *)&MissionName[2], (const CEntity *)v28);
      LOBYTE(v34) = CCamera::IsSphereVisible(
                      &TheCamera,
                      (const CVector *)&MissionName[2],
                      CModelInfo::ms_modelInfoPtrs[*((__int16 *)v28 + 19)]->m_pColModel->m_sphereBound.m_fRadius);
      goto LABEL_199;
    case 718:
      CRunningScript::CollectParameters(this, 3);
      v8 = 0;
      GroundZFor3DCoord = CWorld::FindGroundZFor3DCoord(
                            *(float *)ScriptParams,
                            *(float *)&ScriptParams[1],
                            *(float *)&ScriptParams[2],
                            &pBool,
                            0);
      goto LABEL_34;
    case 719:
      CRunningScript::CollectParameters(this, 5);
      v30 = *(float *)&ScriptParams[2];
      v31 = ScriptParams[0];
      v32 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v30 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      *(_DWORD *)&MissionName[6] = v32;
      *(_DWORD *)&MissionName[2] = v31;
      v124 = v30;
      v8 = 0;
      GroundZFor3DCoord = COERCE_FLOAT(
                            CFireManager::StartScriptFire(
                              &gFireManager,
                              (const CVector *)&MissionName[2],
                              0,
                              0.8,
                              1u,
                              SLOBYTE(ScriptParams[3]),
                              ScriptParams[4]));
LABEL_34:
      *(float *)ScriptParams = GroundZFor3DCoord;
      goto LABEL_92;
    case 720:
      CRunningScript::CollectParameters(this, 1);
      ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 5u);
      if ( ActualScriptThingIndex > 0x3B )
        goto LABEL_149;
      IsShallowWater = CFireManager::IsScriptFireExtinguished(&gFireManager, ActualScriptThingIndex);
LABEL_37:
      LOBYTE(v34) = IsShallowWater;
      if ( IsShallowWater )
        LOBYTE(v34) = 1;
      goto LABEL_199;
    case 721:
      CRunningScript::CollectParameters(this, 1);
      v35 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 5u);
      if ( v35 <= 0x3B )
        CFireManager::RemoveScriptFire(&gFireManager, v35);
      return 0;
    case 723:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v27 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v27 = 0;
      }
      v96 = 0.0;
      v97 = ScriptParams[1];
      v98 = ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
      {
        CWaterLevel::GetWaterLevel(
          *(float *)&ScriptParams[1],
          *(float *)&ScriptParams[2],
          *(float *)&ScriptParams[3],
          &pWaterZ,
          1,
          0);
        v96 = pWaterZ;
      }
      if ( (unsigned __int8)(v27[958] - 57) >= 2u )
        v27[958] = 14;
      v99 = *((_DWORD *)v27 + 267);
      v100 = *((_DWORD *)v27 + 268);
      *((float *)v27 + 254) = v96;
      *((_DWORD *)v27 + 252) = v97;
      *((_DWORD *)v27 + 253) = v98;
      v101 = v27[980];
      v27[58] = v27[58] & 7 | 0x18;
      if ( v101 <= 1 )
        LOBYTE(v101) = 1;
      v27[980] = v101;
      goto LABEL_193;
    case 724:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v36 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v36 = 0;
      }
      v8 = 0;
      if ( (unsigned __int8)(v36[958] - 57) >= 2u )
        v36[958] = 0;
      v102 = *((_DWORD *)v36 + 267);
      v36[980] = 0;
      v103 = v36[58];
      *((_DWORD *)v36 + 267) = v102 & 0xFFFFFFEF;
      v36[58] = v103 & 7 | 0x18;
      return v8;
    case 726:
      CRunningScript::CollectParameters(this, 6);
      v37 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( v37[1158] << 31 )
      {
        IsWithinArea = CPlaceable::IsWithinArea(
                         (const CPlaceable *)v37,
                         *(float *)&ScriptParams[1],
                         *(float *)&ScriptParams[2],
                         *(float *)&ScriptParams[3],
                         *(float *)&ScriptParams[4]);
        v38 = IsWithinArea;
        if ( IsWithinArea )
          v38 = 1;
      }
      else
      {
        v38 = 0;
      }
      CRunningScript::UpdateCompareFlag(this, v38);
      if ( ScriptParams[5] )
        CTheScripts::HighlightImportantArea(
          (u_native)&this->PCPointer[(unsigned int)this],
          *(float *)&ScriptParams[1],
          *(float *)&ScriptParams[2],
          *(float *)&ScriptParams[3],
          *(float *)&ScriptParams[4],
          -100.0);
      if ( CTheScripts::DbgFlag )
        CTheScripts::DrawDebugSquare(
          *(float *)&ScriptParams[1],
          *(float *)&ScriptParams[2],
          *(float *)&ScriptParams[3],
          *(float *)&ScriptParams[4]);
      return 0;
    case 728:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v39 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v39 = 0;
      }
      v87 = ScriptParams[1];
      if ( ScriptParams[1] != 56 )
        goto LABEL_197;
      if ( CWeapon::IsTypeMelee((const CWeapon *)&v39[28 * (char)v39[1820] + 1444]) )
      {
LABEL_175:
        LOBYTE(v34) = 1;
        goto LABEL_199;
      }
      v87 = ScriptParams[1];
LABEL_197:
      v89 = *(_DWORD *)&v39[28 * (char)v39[1820] + 1444];
      goto LABEL_198;
    case 731:
      CRunningScript::CollectParameters(this, 2);
      v8 = 0;
      CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][980] = (unsigned int)*(float *)&ScriptParams[1];
      return v8;
    case 733:
      CRunningScript::ReadTextLabelFromScript(this, &TextLabel[2], 8u);
      v121 = 0LL;
      strcpy((char *)&v121, (const char *)&TextLabel[2]);
      CRunningScript::CollectParameters(this, 3);
      v40 = -1;
      m_nSize = CPools::ms_pPedPool->m_nSize;
      FindPlayerCoors((CVector *)&MissionName[2], -1);
      if ( !m_nSize )
        goto LABEL_83;
      v42 = m_nSize - 1;
      v43 = 1996 * m_nSize - 900;
      v44 = v124 + 5.0;
      v45 = v124 + -5.0;
      break;
    case 736:
      CRunningScript::CollectParameters(this, 1);
      v34 = *(_WORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1158] & 1;
      goto LABEL_199;
    case 737:
      CRunningScript::CollectParameters(this, 5);
      v54 = *(float *)&ScriptParams[2];
      v55 = *(float *)ScriptParams;
      v56 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v54 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]) + 0.5;
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CPickups::GetActualPickupIndex(ParameterWithoutIncreasingPC);
      v58 = &v116;
      v59 = 19;
      v8 = 0;
      if ( ScriptParams[4] )
        v58 = &v117;
      v60 = ScriptParams[4] == 0;
      *(RwReal *)v58 = v55;
      v128.y = v56;
      *((RwReal *)v58 + 1) = v56;
      v128.z = v54;
      *((float *)v58 + 2) = v54;
      v128.x = v55;
      if ( v60 )
        v59 = 8;
      ScriptParams[0] = CPickups::GenerateNewOne(v128, MI_MONEY, v59, ScriptParams[3], 0, 0, 0);
LABEL_92:
      CRunningScript::StoreParameters(this, 1);
      return v8;
    case 738:
      CRunningScript::CollectParameters(this, 2);
      v8 = 0;
      CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1822] = ScriptParams[1];
      return v8;
    case 739:
      CRunningScript::CollectParameters(this, 1);
      v61 = (float *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v62 = sqrtf((float)((float)(v61[18] * v61[18]) + (float)(v61[19] * v61[19])) + (float)(v61[20] * v61[20])) * 50.0;
      goto LABEL_111;
    case 740:
      CRunningScript::ReadTextLabelFromScript(this, &MissionName[2], 8u);
      CCutsceneMgr::LoadCutsceneData(&MissionName[2]);
      return 0;
    case 741:
    case 742:
    case 755:
    case 793:
      return v8;
    case 743:
      CCutsceneMgr::StartCutscene();
      return 0;
    case 744:
      v63 = COERCE_FLOAT(CCutsceneMgr::GetCutsceneTimeInMilleseconds());
      goto LABEL_108;
    case 745:
      LOBYTE(v34) = CCutsceneMgr::HasCutsceneFinished();
      goto LABEL_199;
    case 746:
      CCutsceneMgr::DeleteCutsceneData();
      return 0;
    case 747:
      CCamera::RestoreWithJumpCut(&TheCamera);
      return 0;
    case 748:
      CRunningScript::CollectParameters(this, 3);
      return 0;
    case 749:
      CRunningScript::CollectParameters(this, 1);
      v8 = 0;
      CWorld::Players[CWorld::PlayerInFocus].TotalNumCollectables = ScriptParams[0];
      return v8;
    case 750:
      CRunningScript::CollectParameters(this, 6);
      v8 = 0;
      v2.n64_u32[0] = ScriptParams[0];
      v5.n64_u32[0] = ScriptParams[3];
      v3.n64_u32[0] = ScriptParams[1];
      v6.n64_u32[0] = ScriptParams[4];
      LODWORD(v64) = vmin_f32(v2, v5).n64_u32[0];
      v65.n64_u64[0] = vmax_f32(v2, v5).n64_u64[0];
      v4.n64_u32[0] = ScriptParams[2];
      LODWORD(v66) = vmin_f32(v3, v6).n64_u32[0];
      LODWORD(v67) = vmax_f32(v3, v6).n64_u32[0];
      v68 = v65.n64_f32[0];
      v65.n64_u32[0] = ScriptParams[5];
      LODWORD(v69) = vmin_f32(v4, v65).n64_u32[0];
      LODWORD(v70) = vmax_f32(v4, v65).n64_u32[0];
      IsProjectileInRange = CProjectileInfo::IsProjectileInRange(v64, v68, v66, v67, v69, v70, 0);
      CRunningScript::UpdateCompareFlag(this, IsProjectileInRange);
      if ( !CTheScripts::DbgFlag )
        return v8;
      CTheScripts::DrawDebugCube(v64, v66, v69, v68, v67, v70);
      return 0;
    case 754:
      CRunningScript::CollectParameters(this, 2);
      v8 = 0;
      CRunningScript::UpdateCompareFlag(
        this,
        ScriptParams[1] == *(__int16 *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][38]);
      return v8;
    case 758:
      CRunningScript::CollectParameters(this, 1);
      v63 = sinf((float)(*(float *)ScriptParams * 3.1416) / 180.0);
      goto LABEL_108;
    case 759:
      CRunningScript::CollectParameters(this, 1);
      v63 = cosf((float)(*(float *)ScriptParams * 3.1416) / 180.0);
LABEL_108:
      *(float *)ScriptParams = v63;
      goto LABEL_112;
    case 760:
      CRunningScript::CollectParameters(this, 1);
      v72 = *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][20];
      v62 = *(float *)(v72 + 16)
          / sqrtf(
              (float)(*(float *)(v72 + 16) * *(float *)(v72 + 16))
            + (float)(*(float *)(v72 + 20) * *(float *)(v72 + 20)));
      goto LABEL_111;
    case 761:
      CRunningScript::CollectParameters(this, 1);
      v73 = *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][20];
      v62 = *(float *)(v73 + 20)
          / sqrtf(
              (float)(*(float *)(v73 + 16) * *(float *)(v73 + 16))
            + (float)(*(float *)(v73 + 20) * *(float *)(v73 + 20)));
LABEL_111:
      *(float *)ScriptParams = v62;
      goto LABEL_112;
    case 762:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      GarageIndex = CGarages::FindGarageIndex(pStringToFill);
      CRunningScript::CollectParameters(this, 1);
      if ( GarageIndex <= -1 )
        return 0;
      v8 = 0;
      CGarages::ChangeGarageType(GarageIndex, ScriptParams[0], 0);
      return v8;
    case 765:
      CRunningScript::ReadTextLabelFromScript(this, v125, 8u);
      v75 = CText::Get(&TheText, v125);
      CRunningScript::CollectParameters(this, 4);
      v76 = CTheScripts::bAddNextMessageToPreviousBriefs;
      if ( CTheScripts::bAddNextMessageToPreviousBriefs )
        v76 = 1;
      CMessages::AddMessageJumpQWithNumber(
        v75,
        ScriptParams[2],
        ScriptParams[3],
        ScriptParams[0],
        (unsigned int)ScriptParams[1] | 0xFFFFFFFF00000000LL,
        -1,
        -1,
        -1,
        v76);
      goto LABEL_130;
    case 767:
      CRunningScript::ReadTextLabelFromScript(this, v125, 8u);
      v77 = CText::Get(&TheText, v125);
      CRunningScript::CollectParameters(this, 5);
      v78 = CTheScripts::bAddNextMessageToPreviousBriefs;
      if ( CTheScripts::bAddNextMessageToPreviousBriefs )
        v78 = 1;
      CMessages::AddMessageWithNumber(
        v125,
        v77,
        ScriptParams[3],
        ScriptParams[4],
        ScriptParams[0],
        ScriptParams[1],
        ScriptParams[2],
        -1,
        -1,
        -1,
        v78);
      CTheScripts::bAddNextMessageToPreviousBriefs = 1;
      return 0;
    case 770:
      CRunningScript::ReadTextLabelFromScript(this, v125, 8u);
      v79 = CText::Get(&TheText, v125);
      CRunningScript::CollectParameters(this, 6);
      v80 = CTheScripts::bAddNextMessageToPreviousBriefs;
      if ( CTheScripts::bAddNextMessageToPreviousBriefs )
        v80 = 1;
      CMessages::AddMessageWithNumber(
        v125,
        v79,
        ScriptParams[4],
        ScriptParams[5],
        ScriptParams[0],
        ScriptParams[1],
        ScriptParams[2],
        ScriptParams[3],
        -1,
        -1,
        v80);
      goto LABEL_130;
    case 771:
      CRunningScript::ReadTextLabelFromScript(this, v125, 8u);
      v81 = CText::Get(&TheText, v125);
      CRunningScript::CollectParameters(this, 6);
      v82 = CTheScripts::bAddNextMessageToPreviousBriefs;
      if ( CTheScripts::bAddNextMessageToPreviousBriefs )
        v82 = 1;
      CMessages::AddMessageJumpQWithNumber(
        v81,
        ScriptParams[4],
        ScriptParams[5],
        ScriptParams[0],
        *(__int64 *)&ScriptParams[1],
        ScriptParams[3],
        -1,
        -1,
        v82);
      goto LABEL_130;
    case 776:
      CRunningScript::ReadTextLabelFromScript(this, v125, 8u);
      v83 = CText::Get(&TheText, v125);
      CRunningScript::CollectParameters(this, 8);
      v84 = CTheScripts::bAddNextMessageToPreviousBriefs;
      if ( CTheScripts::bAddNextMessageToPreviousBriefs )
        v84 = 1;
      CMessages::AddMessageWithNumber(
        v125,
        v83,
        ScriptParams[6],
        ScriptParams[7],
        ScriptParams[0],
        ScriptParams[1],
        ScriptParams[2],
        ScriptParams[3],
        ScriptParams[4],
        ScriptParams[5],
        v84);
LABEL_130:
      v8 = 0;
      CTheScripts::bAddNextMessageToPreviousBriefs = 1;
      return v8;
    case 780:
      CRunningScript::CollectParameters(this, 1);
      v8 = 0;
      CStats::IncrementStat(0, (float)ScriptParams[0]);
      return v8;
    case 781:
      CRunningScript::CollectParameters(this, 1);
      CStats::SetStatValue(1u, (float)ScriptParams[0]);
      return 0;
    case 791:
      CStats::IncrementStat(0x92u, 1.0);
      return 0;
    case 792:
      CRunningScript::ReadTextLabelFromScript(this, v122, 8u);
      CText::Get(&TheText, v122);
      strncpy((char *)CStats::LastMissionPassedName, (const char *)v122, 8u);
      CStats::IncrementStat(0x93u, 1.0);
      StatValue = CStats::GetStatValue(0xB0u);
      CStats::IncrementStat(0xB1u, StatValue);
      CStats::SetStatValue(0xB0u, 0.0);
      CTheScripts::LastMissionPassedTime = CTimer::m_snTimeInMilliseconds;
      if ( !strcmp((const char *)v122, "SWEET_1") )
        Menu_ShowNag();
      v8 = 0;
      if ( !strcmp((const char *)v122, "BCESAR4") )
      {
        CStreaming::RequestModel(477, 8);
        CStreaming::RequestVehicleUpgrade(1025, 8);
        CStreaming::LoadAllRequestedModels(0);
        v129.x = -538.0;
        *(_QWORD *)&v129.y = 0x429C6666C3320000LL;
        *(_DWORD *)&CCarCtrl::CreateCarForScript(477, v129, 0)->m_colour1 = 0;
      }
      return v8;
    case 794:
      CFireManager::RemoveAllScriptFires(&gFireManager);
      return 0;
    case 797:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] < 0 )
        goto LABEL_149;
      if ( CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        goto LABEL_149;
      v86 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !v86 )
        goto LABEL_149;
      v87 = (char)v86[1896];
      goto LABEL_147;
    case 798:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0])
        && (v88 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8]) != 0 )
      {
        v87 = (char)v88[1304];
LABEL_147:
        v89 = ScriptParams[1];
        if ( (ScriptParams[1] | 1) == 57 )
          LOBYTE(v34) = CDarkel::CheckDamagedWeaponType(v87, ScriptParams[1]);
        else
LABEL_198:
          LOBYTE(v34) = v89 == v87;
      }
      else
      {
LABEL_149:
        LOBYTE(v34) = 0;
      }
LABEL_199:
      v108 = this;
LABEL_200:
      CRunningScript::UpdateCompareFlag(v108, v34);
      return 0;
    default:
      return -1;
  }
  do
  {
    m_aFlags = CPools::ms_pPedPool->m_aFlags;
    if ( (m_aFlags[v42] & 0x80u) == 0 )
    {
      v47 = CPools::ms_pPedPool->m_aStorage;
      v48 = &(*CPools::ms_pPedPool->m_aStorage)[v43];
      if ( v48 != (uint8 *)&elf_hash_bucket[211]
        && (m_aFlags[-1093107909 * ((v43 - 1096) >> 2)] | (-662750464 * ((v43 - 1096) >> 2))) != CTheScripts::LastRandomPedId
        && (*v47)[v43] == 1
        && ((*v47)[v43 - 1067] & 8) == 0 )
      {
        if ( (v48[64] & 8) != 0 )
        {
          v40 = -1;
LABEL_67:
          if ( !v42 )
            break;
          goto LABEL_82;
        }
        v115 = &(*v47)[v43 - 1096];
        if ( CRunningScript::IsPedDead(this, (CPed *)(v48 - 1096)) )
          goto LABEL_63;
        v114 = (CPed *)(v48 - 1096);
        if ( !*((_DWORD *)v48 + 82) && !(v48[61] << 31) )
        {
          if ( !CRunningScript::ThisIsAValidRandomPed(
                  this,
                  *((_DWORD *)v48 + 85),
                  ScriptParams[0],
                  ScriptParams[1],
                  ScriptParams[2])
            || CPedGroups::GetPedsGroup(v114) )
          {
            goto LABEL_63;
          }
          v49 = *((_DWORD *)v48 - 269);
          v50 = (uint8 *)(v49 + 48);
          if ( !v49 )
            v50 = v115 + 4;
          v51 = *(_QWORD *)v50;
          pSuccess.z = *((RwReal *)v50 + 2);
          z = pSuccess.z;
          *(_QWORD *)&pSuccess.x = v51;
          DoesPointLieWithinZoneWithGivenName = CTheZones::DoesPointLieWithinZoneWithGivenName(
                                                  &pSuccess,
                                                  v121,
                                                  ZONE_NAVIGATION);
          v40 = -1;
          if ( z > v44 || z < v45 )
            goto LABEL_64;
          if ( DoesPointLieWithinZoneWithGivenName )
          {
            MissionName[2] = 0;
            CWorld::FindRoofZFor3DCoord(pSuccess.x, pSuccess.y, pSuccess.z, (bool *)&MissionName[2]);
            if ( MissionName[2] )
            {
LABEL_63:
              v40 = -1;
            }
            else
            {
              v40 = CPools::ms_pPedPool->m_aFlags[-1093107909
                                                * (((char *)v114 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)v114 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2));
              CTheScripts::LastRandomPedId = v40;
              CPed::SetCharCreatedBy(v114, 2u);
              ++CPopulation::ms_nTotalMissionPeds;
              if ( this->IsThisAMissionScript )
                CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, v40, 2u);
            }
LABEL_64:
            if ( !v42 )
              break;
            goto LABEL_82;
          }
          goto LABEL_67;
        }
      }
    }
    v40 = -1;
    if ( !v42 )
      break;
LABEL_82:
    --v42;
    v43 -= 1996;
  }
  while ( v40 == -1 );
LABEL_83:
  ScriptParams[0] = v40;
LABEL_112:
  CRunningScript::StoreParameters(this, 1);
  return 0;
}
// 345164: variable 'v113' is possibly undefined
// 3459EC: variable 'v2' is possibly undefined
// 3459EC: variable 'v5' is possibly undefined
// 3459F8: variable 'v3' is possibly undefined
// 3459F8: variable 'v6' is possibly undefined
// 345A14: variable 'v4' is possibly undefined
// FC: using guessed type int elf_hash_bucket[16411];
// 676438: using guessed type CFireManager *gFireManager_ptr;
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 678534: using guessed type int *CPools::ms_pVehiclePool;
// 344F74: using guessed type UInt64 var_80;

//----- (00346504) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands800To899(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  float32x2_t v6; // d4
  float32x2_t v7; // d5
  Int8 v9; // r5
  uint8 *v10; // r4
  uint8 *v11; // r1
  uint8 v12; // r2
  uint8 v13; // r3
  uint8 *v14; // r2
  CVehiclePool *v15; // r0
  int32 m_nSize; // r1
  int v17; // r5
  int v18; // r4
  uint8 *v19; // r9
  CVehicle *v20; // r6
  int v21; // r9
  int v22; // r11
  int v23; // r6
  int Mode; // r0
  int32 Index; // r9
  float v26; // s20
  Int32 v27; // s16
  Int32 v28; // s18
  int32 ParameterWithoutIncreasingPC; // r0
  char v30; // r0
  char v31; // r0
  uint8 *v32; // r1
  int v33; // r2
  unsigned int v34; // r3
  char v35; // r0
  uint8 *v36; // r4
  uint8 *v37; // r1
  int v38; // r2
  unsigned int v39; // r3
  int v40; // r0
  intro_text_line *v41; // r1
  UInt16 v42; // r0
  intro_text_line *v43; // r1
  __int64 v44; // kr10_8
  int v45; // r0
  RwUInt8 v46; // r1
  __int16 v47; // r3
  intro_text_line *v48; // r0
  Bool8 v49; // r1
  Bool8 v50; // r1
  Bool8 v51; // r1
  Bool8 v52; // r1
  CEntity *v53; // r9
  uint8 *v54; // r9
  unsigned int v55; // r0
  CPed *v56; // r5
  uint8 *v57; // r0
  bool v58; // zf
  uint8 *v59; // r6
  CPedGroup *PedsGroup; // r0
  CPedGroupMembership *p_m_membership; // r4
  uint8 *v62; // r0
  float v63; // s6
  float32x2_t v64; // d0
  float32x2_t v65; // d1
  float v66; // r2
  float v67; // r3
  char CanSeeThisEntity; // r0
  CPhysical *v69; // r1
  CObject *v70; // r4
  CPed *v71; // r4
  int GarageIndex; // r0
  int v73; // r0
  uint8 *v74; // r4
  ePedPieceTypes v75; // s20
  const CEntity *v76; // s16
  float v77; // s18
  int32 v78; // r4
  float v79; // s22
  __int16 v80; // r0
  int v81; // r1
  int v82; // r3
  unsigned __int16 v83; // r2
  int v84; // r0
  int v85; // r3
  int v86; // r5
  float *v87; // r4
  bool v88; // nf
  _DWORD *v89; // r1
  int v90; // r3
  int v91; // r2
  int v92; // r1
  unsigned __int16 v93; // r3
  CEntity *pEntity; // r6
  CPed *v95; // r0
  int v96; // r1
  CPed *v97; // r8
  GxtChar *v98; // r4
  ePedType v99; // r11
  int v100; // r6
  int32 v101; // r4
  CBaseModelInfo *v102; // r1
  RwObject_0 *v103; // r0
  CCivilianPed *v104; // r5
  CPedIntelligence *m_pPedIntelligence; // r6
  CTaskSimpleStandStill *v106; // r4
  float v107; // s0
  int (**v108)(void); // s18
  int v109; // s16
  float v110; // s0
  CMatrix *v111; // r0
  float *p_tz; // r0
  float *v113; // r0
  int v114; // r2
  const CEventDamage *v115; // r0
  int v116; // r0
  uint8 *v117; // r1
  int v118; // r0
  __int64 v119; // d16
  char v120; // r2
  int v121; // r0
  unsigned int v122; // r2
  CMatrix *m_pMat; // r5
  float m_heading; // s2
  const CMatrix *v125; // r1
  float *v126; // r2
  float v127; // s18
  float v128; // s20
  float v129; // s16
  int v130; // r0
  __int64 v131; // kr18_8
  float v132; // s2
  float v133; // s12
  float v134; // s2
  int v135; // r6
  unsigned int v136; // r3
  unsigned int v137; // r2
  unsigned int v138; // r1
  unsigned int *v139; // r0
  unsigned int v140; // r6
  CPhysical *v141; // r0
  unsigned __int32 *p_m_nArmour; // r5
  Int32 PlayerSlotWithPedPointer; // r0
  float32x2_t v144; // d16
  float GroundZForCoord; // s20
  int (**v146)(void); // s16
  int v147; // s18
  float v148; // s20
  CEntity *v149; // r1
  CVehicle *v150; // r4
  float v151; // s6
  float v152; // s4
  CRunningScript *v153; // r0
  CMatrix *v154; // r0
  float tx; // s16
  float ty; // s18
  float tz; // s20
  float *p_xx; // r0
  float v159; // s2
  float v160; // s4
  float v161; // s4
  float v162; // s16
  char v163; // r5
  CPlayerPed *pPed; // r6
  float v165; // s8
  float v166; // s12
  float v167; // s18
  bool v168; // cc
  float v169; // s14
  int v170; // s10
  float v171; // s6
  CVector *v172; // r4
  CColModel *v173; // r0
  const CEntity *v174; // r1
  float v175; // r2
  RwReal v176; // r3
  RwReal v177; // r6
  RwReal v178; // r0
  __int64 v179; // kr20_8
  CVector *v180; // r5
  CVector *v181; // r12
  CVector *v182; // r6
  CVector *v183; // r0
  float v184; // s12
  CVector *v185; // r1
  float v186; // s14
  CVector *v187; // r1
  CVector *v188; // r1
  float v189; // r3
  float v190; // s12
  CVector *v191; // r0
  float v192; // s2
  CVector *v193; // r0
  float v194; // s6
  CVector *v195; // r0
  float v196; // s2
  CVector *v197; // r0
  int (**v198)(void); // r1
  int m_iAccumulatedTime; // r2
  float v200; // r3
  char v201; // r4
  char v202; // r0
  char v203; // r1
  char v204; // r0
  CSimpleTransform *p_tx; // r0
  __int64 v206; // d16
  CVector *p_CoorsMax; // r4
  CColModel *m_pColModel; // r0
  const CEntity *x_low; // r1
  float y; // r2
  RwReal z; // r3
  RwReal x; // r6
  RwReal v213; // r0
  __int64 v214; // kr28_8
  CVector *p_height; // r5
  CVector *v216; // r12
  CVector *v217; // r6
  CVector *p_width; // r0
  float v219; // s12
  CVector *v220; // r1
  float v221; // s14
  CVector *p_v; // r1
  CVector *v223; // r1
  float v224; // r3
  float v225; // s12
  CVector *v226; // r0
  float v227; // s2
  CVector *v228; // r0
  float v229; // s6
  CVector *v230; // r0
  float v231; // s2
  CVector *v232; // r0
  int v233; // r2
  int v234; // r3
  CEntity *v235; // r6
  int v236; // r1
  unsigned __int16 v237; // r3
  CEntity *v238; // r5
  int v239; // r6
  RwObject_0 *m_pRwObject; // r0
  char *parent; // r1
  const CMatrix *v242; // r0
  RwMatrix *v243; // r1
  CEventDamage CoorsMin; // [sp+40h] [bp-130h] BYREF
  CPedDamageResponseCalculator CoorsMax; // [sp+80h] [bp-F0h] BYREF
  CVector v; // [sp+98h] [bp-D8h] BYREF
  CVector height; // [sp+A8h] [bp-C8h] BYREF
  CVector width; // [sp+B8h] [bp-B8h] BYREF
  CMatrix RotationOfBoxMatrix; // [sp+C4h] [bp-ACh] BYREF
  Int16 pNum; // [sp+10Eh] [bp-62h] BYREF
  CVector v252; // [sp+110h] [bp-60h] BYREF
  Char pStringToFill[8]; // [sp+122h] [bp-4Eh] BYREF
  CVector v254; // 0:r0.12

  v9 = 0;
  RotationOfBoxMatrix.m_pRwMat = 0;
  RotationOfBoxMatrix.m_owner = 0;
  switch ( CurrCommand )
  {
    case 801:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v10 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v10 = 0;
      }
      CPedDamageResponseCalculator::CPedDamageResponseCalculator(
        &CoorsMax,
        0,
        1000.0,
        WEAPONTYPE_SNIPERRIFLE,
        PED_SPHERE_HEAD,
        0);
      CEventDamage::CEventDamage(
        &CoorsMin,
        0,
        CTimer::m_snTimeInMilliseconds,
        WEAPONTYPE_SNIPERRIFLE,
        PED_SPHERE_HEAD,
        0,
        0,
        *((_DWORD *)v10 + 289) & 0x100);
      if ( CEventDamage::AffectsPed(v115, (CPed *)v10) )
        CPedDamageResponseCalculator::ComputeDamageResponse(&CoorsMax, (CPed *)v10, &CoorsMin.m_pedDamageResponse, 1);
      else
        CoorsMin.m_pedDamageResponse.m_bDamageCalculated = 1;
      v9 = 0;
      CEventGroup::Add((CEventGroup *)(*((_DWORD *)v10 + 272) + 104), (CEvent *)&CoorsMin, 0);
      CEventDamage::~CEventDamage(&CoorsMin);
      CPedDamageResponseCalculator::~CPedDamageResponseCalculator(&CoorsMax);
      goto LABEL_392;
    case 803:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      v11 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v12 = v11[1472];
      v13 = v12 & 0xFB;
      if ( ScriptParams[1] )
        v13 = v12 | 4;
      v11[1472] = v13;
      goto LABEL_392;
    case 805:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v14 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v14 = 0;
      }
      v116 = *((_DWORD *)v14 + 5);
      v117 = (uint8 *)(v116 + 48);
      if ( !v116 )
        v117 = v14 + 4;
      goto LABEL_184;
    case 806:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v14 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v14 = 0;
      }
      v118 = *((_DWORD *)v14 + 5);
      v117 = (uint8 *)(v118 + 48);
      if ( !v118 )
        v117 = v14 + 4;
LABEL_184:
      v119 = *(_QWORD *)v117;
      *(_DWORD *)&CoorsMin.m_bIsPersistent = *((_DWORD *)v117 + 2);
      *(_QWORD *)&CoorsMin._vptr$CEvent = v119;
      ScriptParams[0] = CFireManager::StartScriptFire(
                          &gFireManager,
                          (const CVector *)&CoorsMin,
                          (CEntity *)v14,
                          0.8,
                          1u,
                          0,
                          1);
      goto LABEL_185;
    case 807:
      CRunningScript::CollectParameters(this, 5);
      v15 = CPools::ms_pVehiclePool;
      m_nSize = CPools::ms_pVehiclePool->m_nSize;
      if ( !m_nSize )
      {
        v23 = -1;
        goto LABEL_247;
      }
      v17 = m_nSize - 1;
      v18 = m_nSize;
      while ( 2 )
      {
        if ( (v15->m_aFlags[v17] & 0x80u) != 0
          || (v19 = v15->m_aStorage[v18], v20 = (CVehicle *)(v19 - 2604), v19 == (uint8 *)&elf_hash_bucket[588])
          || CVehicle::GetVehicleAppearance((const CVehicle *)(v19 - 2604)) != APR_CAR
          && CVehicle::GetVehicleAppearance((const CVehicle *)(v19 - 2604)) != APR_BIKE
          || *(v19 - 1536) << 31
          || ScriptParams[4] != *((__int16 *)v19 - 1283) && ScriptParams[4] > -1
          || !CVehicle::CanBeDeleted((const CVehicle *)(v19 - 2604))
          || !CPlaceable::IsWithinArea(
                (const CPlaceable *)(v19 - 2604),
                *(float *)ScriptParams,
                *(float *)&ScriptParams[1],
                *(float *)&ScriptParams[2],
                *(float *)&ScriptParams[3]) )
        {
          v23 = -1;
          if ( !v17 )
            break;
          goto LABEL_32;
        }
        v21 = -1075391197 * (((char *)v20 - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2);
        v22 = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                              * (((char *)v20 - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2)];
        CVehicle::SetVehicleCreatedBy(v20, 2, 0);
        v23 = v22 | (v21 << 8);
        if ( this->IsThisAMissionScript )
          CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, v22 | (v21 << 8), 1u);
        if ( v17 )
        {
LABEL_32:
          if ( v23 != -1 )
            break;
          --v17;
          v15 = CPools::ms_pVehiclePool;
          --v18;
          continue;
        }
        break;
      }
LABEL_247:
      ScriptParams[0] = v23;
      CRunningScript::StoreParameters(this, 1);
LABEL_391:
      v9 = 0;
LABEL_392:
      CMatrix::~CMatrix(&RotationOfBoxMatrix);
      return v9;
    case 809:
    case 812:
    case 894:
    case 899:
      goto LABEL_392;
    case 810:
      CRunningScript::CollectParameters(this, 1);
      Mode = (unsigned __int16)TheCamera.Cams[TheCamera.ActiveCam].Mode;
      if ( Mode == 18 )
      {
        CCamera::SetZoomValueCamStringScript(&TheCamera, ScriptParams[0]);
      }
      else if ( Mode == 4 )
      {
        CCamera::SetZoomValueFollowPedScript(&TheCamera, ScriptParams[0]);
      }
      goto LABEL_391;
    case 811:
      CRunningScript::CollectParameters(this, 6);
      Index = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        Index = CTheScripts::UsedObjectArray[-ScriptParams[0]].Index;
      v26 = *(float *)&ScriptParams[5];
      v27 = ScriptParams[3];
      v28 = ScriptParams[4];
      if ( *(float *)&ScriptParams[5] <= -100.0 )
        v26 = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[3], *(float *)&ScriptParams[4]) + 0.5;
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CPickups::GetActualPickupIndex(ParameterWithoutIncreasingPC);
      *(_QWORD *)&v254.x = __PAIR64__(v28, v27);
      v9 = 0;
      v254.z = v26;
      ScriptParams[0] = CPickups::GenerateNewOne(v254, Index, LOBYTE(ScriptParams[1]), ScriptParams[2], 0, 0, 0);
LABEL_185:
      CRunningScript::StoreParameters(this, 1);
      goto LABEL_392;
    case 816:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      v30 = ScriptParams[1];
      if ( ScriptParams[1] )
        v30 = 1;
      CWorld::Players[ScriptParams[0]].DoesNotGetTired = v30;
      goto LABEL_392;
    case 817:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      v31 = ScriptParams[1];
      if ( ScriptParams[1] )
        v31 = 1;
      CWorld::Players[ScriptParams[0]].FastReload = v31;
      goto LABEL_392;
    case 818:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      v32 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v33 = *((_DWORD *)v32 + 289);
      v34 = v33 & 0xFFFBFFFF;
      if ( ScriptParams[1] )
        v34 = v33 | 0x40000;
      *((_DWORD *)v32 + 289) = v34;
      goto LABEL_392;
    case 821:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      v35 = ScriptParams[0];
      if ( ScriptParams[0] )
        v35 = 1;
      CGarages::RespraysAreFree = v35;
      goto LABEL_392;
    case 823:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v36 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v36 = 0;
      }
      if ( v36 == (uint8 *)FindPlayerPed(-1) )
      {
        v120 = ScriptParams[1];
        if ( ScriptParams[1] )
          v120 = 1;
        gPlayerPedVisible = v120;
      }
      v121 = *((_DWORD *)v36 + 7);
      v9 = 0;
      v122 = v121 & 0xFFFFFF7F;
      if ( ScriptParams[1] )
        v122 = v121 | 0x80;
      *((_DWORD *)v36 + 7) = v122;
      goto LABEL_392;
    case 824:
      CRunningScript::CollectParameters(this, 2);
      v37 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v38 = *((_DWORD *)v37 + 7);
      v39 = v38 & 0xFFFFFF7F;
      if ( ScriptParams[1] )
        v39 = v38 | 0x80;
      goto LABEL_173;
    case 825:
      CRunningScript::CollectParameters(this, 11);
      v9 = 0;
      v2.n64_u32[0] = ScriptParams[0];
      v3.n64_u32[0] = ScriptParams[1];
      v6.n64_u32[0] = ScriptParams[4];
      v4.n64_u32[0] = ScriptParams[2];
      v7.n64_u32[0] = ScriptParams[5];
      v5.n64_u32[0] = ScriptParams[3];
      CoorsMin.m_iAccumulatedTime = vmin_f32(v3, v6).n64_u32[0];
      CoorsMin._vptr$CEvent = (int (**)(void))vmin_f32(v2, v5).n64_u32[0];
      *(_DWORD *)&CoorsMin.m_bIsPersistent = vmin_f32(v4, v7).n64_u32[0];
      v40 = ScriptParams[10];
      LODWORD(CoorsMax.m_fRawDamage) = vmax_f32(v3, v6).n64_u32[0];
      CoorsMax.m_pInflictor = (const CEntity *)vmax_f32(v2, v5).n64_u32[0];
      CoorsMax.m_eHitZone = vmax_f32(v4, v7).n64_u32[0];
      if ( ScriptParams[10] )
        v40 = 1;
      CWorld::FindObjectsIntersectingCube(
        (const CVector *)&CoorsMin,
        (const CVector *)&CoorsMax,
        &pNum,
        2,
        0,
        ScriptParams[6] != 0,
        ScriptParams[7] != 0,
        ScriptParams[8] != 0,
        ScriptParams[9] != 0,
        v40);
      CRunningScript::UpdateCompareFlag(this, pNum > 0);
      goto LABEL_392;
    case 830:
      if ( CTheScripts::NumberOfIntroTextLinesThisFrame <= 0x5Fu )
      {
        CRunningScript::CollectParameters(this, 2);
        CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
        if ( strcasecmp((const char *)pStringToFill, "SH_BCK") )
        {
          if ( !strcasecmp((const char *)pStringToFill, "LOAD_01") && !CCutsceneMgr::IntroTextIsActiveHack )
            CCutsceneMgr::IntroTextIsActiveHack = 1;
          CText::Get(&TheText, pStringToFill);
          CoorsMin._vptr$CEvent = (int (**)(void))ScriptParams[0];
          CoorsMax.m_pInflictor = (const CEntity *)ScriptParams[1];
          width.x = 1.0;
          height.x = 1.0;
          CorrectAspect((float *)&CoorsMin, (float *)&CoorsMax, &width.x, &height.x);
          v41 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
          v41->ScriptTextAtX = *(float *)&CoorsMin._vptr$CEvent / (float)((float)RsGlobal.screenWidth / 640.0);
          v41->ScriptTextAtY = *(float *)&CoorsMax.m_pInflictor / (float)((float)RsGlobal.screenHeight / 448.0);
          strncpy((char *)v41->ScriptTextLabel, (const char *)pStringToFill, 8u);
          v42 = CTheScripts::NumberOfIntroTextLinesThisFrame + 1;
          v43 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
          v43->NumberToInsert1 = -1;
          v43->NumberToInsert2 = -1;
          CTheScripts::NumberOfIntroTextLinesThisFrame = v42;
        }
      }
      goto LABEL_391;
    case 831:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      v44 = *(_QWORD *)ScriptParams;
      v45 = CTheScripts::NumberOfIntroTextLinesThisFrame;
      LODWORD(CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextXScale) = ScriptParams[0];
      CTheScripts::IntroTextLines[v45].ScriptTextYScale = *((float *)&v44 + 1);
      goto LABEL_392;
    case 832:
      CRunningScript::CollectParameters(this, 4);
      CRGBA::CRGBA((CRGBA *)&CoorsMin, ScriptParams[0], ScriptParams[1], ScriptParams[2], ScriptParams[3]);
      v9 = 0;
      v46 = (RwUInt8)CoorsMin._vptr$CEvent;
      v47 = *(_WORD *)((char *)&CoorsMin._vptr$CEvent + 1);
      v48 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
      v48->ScriptTextColor._anon_0._anon_0.alpha = HIBYTE(CoorsMin._vptr$CEvent);
      *(_WORD *)&v48->ScriptTextColor._anon_0._anon_0.green = v47;
      v48->ScriptTextColor._anon_0._anon_0.red = v46;
      goto LABEL_392;
    case 833:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      v49 = ScriptParams[0];
      if ( ScriptParams[0] )
        v49 = 1;
      CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextJustify = v49;
      goto LABEL_392;
    case 834:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      v50 = ScriptParams[0];
      if ( ScriptParams[0] )
        v50 = 1;
      CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextCentre = v50;
      goto LABEL_392;
    case 835:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      LODWORD(CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextWrapX) = ScriptParams[0];
      goto LABEL_392;
    case 836:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      LODWORD(CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextCentreSize) = ScriptParams[0];
      goto LABEL_392;
    case 837:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      v51 = ScriptParams[0];
      if ( ScriptParams[0] )
        v51 = 1;
      CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextBackgrnd = v51;
      goto LABEL_392;
    case 840:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      v52 = ScriptParams[0];
      if ( ScriptParams[0] )
        v52 = 1;
      CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextProportional = v52;
      goto LABEL_392;
    case 841:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextFontStyle = ScriptParams[0];
      goto LABEL_392;
    case 845:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v53 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v53 = 0;
      }
      m_pMat = v53->m_pMat;
      if ( m_pMat )
        m_heading = atan2f(COERCE_FLOAT(LODWORD(m_pMat->xy) ^ 0x80000000), m_pMat->yy);
      else
        m_heading = v53->m_transform.m_heading;
      v161 = (float)(m_heading * 180.0) / 3.1416;
      if ( v161 < 0.0 )
        v161 = v161 + 360.0;
      v162 = *(float *)&ScriptParams[1];
      if ( v161 == *(float *)&ScriptParams[1] )
        goto LABEL_255;
      v165 = v161 - *(float *)&ScriptParams[1];
      v166 = *(float *)&ScriptParams[1] - v161;
      if ( (float)(v161 - *(float *)&ScriptParams[1]) < 0.0 )
        v165 = (float)(v161 - *(float *)&ScriptParams[1]) + 360.0;
      if ( (float)(*(float *)&ScriptParams[1] - v161) < 0.0 )
        v166 = (float)(*(float *)&ScriptParams[1] - v161) + 360.0;
      if ( v166 >= v165 )
      {
        v167 = *(float *)&ScriptParams[1];
        if ( v165 >= *(float *)&ScriptParams[2] )
          v167 = v161 - *(float *)&ScriptParams[2];
      }
      else
      {
        v167 = *(float *)&ScriptParams[1];
        if ( v166 >= *(float *)&ScriptParams[2] )
          v167 = *(float *)&ScriptParams[2] + v161;
      }
      if ( !ScriptParams[3] )
        goto LABEL_368;
      p_tx = (CSimpleTransform *)&m_pMat->tx;
      if ( !m_pMat )
        p_tx = &v53->m_transform;
      v206 = *(_QWORD *)&p_tx->m_translate.x;
      *(RwReal *)&CoorsMin.m_bIsPersistent = p_tx->m_translate.z;
      *(_QWORD *)&CoorsMin._vptr$CEvent = v206;
      CMatrix::SetRotateZ(&RotationOfBoxMatrix, (float)(v167 * 3.1416) / 180.0);
      p_CoorsMax = (CVector *)&CoorsMax;
      RotationOfBoxMatrix.tx = *(float *)&v206 + RotationOfBoxMatrix.tx;
      RotationOfBoxMatrix.ty = *((float *)&v206 + 1) + RotationOfBoxMatrix.ty;
      RotationOfBoxMatrix.tz = *(float *)&CoorsMin.m_bIsPersistent + RotationOfBoxMatrix.tz;
      m_pColModel = CModelInfo::ms_modelInfoPtrs[v53->m_nModelIndex]->m_pColModel;
      x_low = (const CEntity *)LODWORD(m_pColModel->m_boxBound.m_vecMin.x);
      y = m_pColModel->m_boxBound.m_vecMin.y;
      z = m_pColModel->m_boxBound.m_vecMin.z;
      x = m_pColModel->m_boxBound.m_vecMax.x;
      v214 = *(_QWORD *)&m_pColModel->m_boxBound.m_vecMax.y;
      v213 = m_pColModel->m_boxBound.m_vecMax.z;
      CoorsMax.m_pInflictor = x_low;
      CoorsMax.m_fRawDamage = y;
      *(RwReal *)&CoorsMax.m_eHitZone = z;
      width.x = x;
      width.y = y;
      width.z = v213;
      height.x = x;
      LODWORD(height.y) = v214;
      height.z = z;
      LODWORD(v.x) = x_low;
      *(_QWORD *)&v.y = __PAIR64__(LODWORD(v213), v214);
      operator*(&v252, &RotationOfBoxMatrix, (const CVector *)&CoorsMax);
      CoorsMax.m_eHitZone = LODWORD(v252.z);
      *(_QWORD *)&CoorsMax.m_pInflictor = *(_QWORD *)&v252.x;
      operator*(&v252, &RotationOfBoxMatrix, &width);
      p_height = &height;
      width = v252;
      operator*(&v252, &RotationOfBoxMatrix, &height);
      height = v252;
      operator*(&v252, &RotationOfBoxMatrix, &v);
      v216 = &height;
      v217 = (CVector *)&CoorsMax;
      v = v252;
      p_width = (CVector *)&CoorsMax;
      if ( width.x < *(float *)&CoorsMax.m_pInflictor )
        p_width = &width;
      v219 = p_width->x;
      v220 = p_width;
      if ( height.x < p_width->x )
        v220 = &height;
      v221 = v220->x;
      p_v = &height;
      if ( v.x < v221 )
      {
        p_v = &v;
        p_width = &v;
      }
      if ( height.x < v219 )
        p_width = p_v;
      v223 = (CVector *)&CoorsMax;
      v224 = p_width->x;
      if ( width.y > CoorsMax.m_fRawDamage )
        v223 = &width;
      v225 = v223->y;
      v226 = v223;
      if ( height.y > v225 )
        v226 = &height;
      if ( v.y > v226->y )
      {
        v216 = &v;
        v223 = &v;
      }
      if ( width.x > *(float *)&CoorsMax.m_pInflictor )
        v217 = &width;
      v227 = v217->x;
      v228 = v217;
      if ( height.x > v217->x )
        v228 = &height;
      v229 = v228->x;
      v230 = &height;
      if ( v.x > v229 )
      {
        v230 = &v;
        v217 = &v;
      }
      if ( height.x > v227 )
        v217 = v230;
      if ( width.y < CoorsMax.m_fRawDamage )
        p_CoorsMax = &width;
      v231 = p_CoorsMax->y;
      v232 = p_CoorsMax;
      if ( height.y < v231 )
        v232 = &height;
      if ( v.y < v232->y )
      {
        p_height = &v;
        p_CoorsMax = &v;
      }
      if ( height.y < v231 )
        p_CoorsMax = p_height;
      v163 = 1;
      if ( height.y > v225 )
        v223 = v216;
      CWorld::FindObjectsIntersectingAngledCollisionBox(
        &CModelInfo::ms_modelInfoPtrs[v53->m_nModelIndex]->m_pColModel->m_boxBound,
        &RotationOfBoxMatrix,
        (const CVector *)&CoorsMin,
        v224,
        p_CoorsMax->y,
        v217->x,
        v223->y,
        &pNum,
        2,
        0,
        0,
        1,
        1,
        0,
        0);
      if ( pNum <= 0 )
      {
        m_pMat = v53->m_pMat;
LABEL_368:
        if ( m_pMat )
          CMatrix::SetRotateZOnly(m_pMat, (float)(v167 * 3.1416) / 180.0);
        else
          v53->m_transform.m_heading = (float)(v167 * 3.1416) / 180.0;
        m_pRwObject = v53->m_pRwObject;
        if ( m_pRwObject )
        {
          parent = (char *)m_pRwObject->parent;
          v242 = v53->m_pMat;
          v243 = (RwMatrix *)(parent + 16);
          if ( v242 )
            CMatrix::UpdateRwMatrix(v242, v243);
          else
            CSimpleTransform::UpdateRwMatrix(&v53->m_transform, v243);
        }
        CEntity::UpdateRwFrame(v53);
        if ( v167 == v162 )
LABEL_255:
          v163 = 1;
        else
          v163 = 0;
      }
      goto LABEL_389;
    case 846:
      CRunningScript::CollectParameters(this, 8);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v54 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v54 = 0;
      }
      v125 = (const CMatrix *)*((_DWORD *)v54 + 5);
      v126 = &v125->tx;
      if ( !v125 )
        v126 = (float *)(v54 + 4);
      v127 = *(float *)&ScriptParams[1];
      v128 = *(float *)&ScriptParams[2];
      v129 = *(float *)&ScriptParams[3];
      v130 = *((_DWORD *)v126 + 2);
      *(_QWORD *)&CoorsMin._vptr$CEvent = *(_QWORD *)v126;
      v131 = *(_QWORD *)&CoorsMin._vptr$CEvent;
      *(_DWORD *)&CoorsMin.m_bIsPersistent = v130;
      if ( *(float *)&CoorsMin._vptr$CEvent == *(float *)&ScriptParams[1]
        && *(float *)&CoorsMin.m_bIsPersistent == *(float *)&ScriptParams[3] )
      {
        goto LABEL_255;
      }
      v132 = *(float *)&CoorsMin._vptr$CEvent - *(float *)&ScriptParams[1];
      v133 = *(float *)&CoorsMin.m_iAccumulatedTime - *(float *)&ScriptParams[2];
      if ( (float)(*(float *)&CoorsMin._vptr$CEvent - *(float *)&ScriptParams[1]) >= 0.0 )
      {
        v168 = v132 <= *(float *)&ScriptParams[4];
        v134 = *(float *)&ScriptParams[1];
        if ( !v168 )
          v134 = *(float *)&CoorsMin._vptr$CEvent - *(float *)&ScriptParams[4];
      }
      else
      {
        v88 = *(float *)&ScriptParams[4] < (float)-v132;
        v134 = *(float *)&ScriptParams[1];
        if ( v88 )
          v134 = *(float *)&CoorsMin._vptr$CEvent + *(float *)&ScriptParams[4];
      }
      v169 = *(float *)&CoorsMin.m_bIsPersistent - *(float *)&ScriptParams[3];
      *(float *)&CoorsMin._vptr$CEvent = v134;
      if ( v133 >= 0.0 )
      {
        v170 = ScriptParams[2];
        if ( v133 > *(float *)&ScriptParams[5] )
          *(float *)&v170 = *((float *)&v131 + 1) - *(float *)&ScriptParams[5];
      }
      else
      {
        v170 = ScriptParams[2];
        if ( *(float *)&ScriptParams[5] < (float)-v133 )
          *(float *)&v170 = *(float *)&ScriptParams[5] + *((float *)&v131 + 1);
      }
      CoorsMin.m_iAccumulatedTime = v170;
      if ( v169 >= 0.0 )
      {
        v171 = *(float *)&ScriptParams[3];
        if ( v169 > *(float *)&ScriptParams[6] )
          v171 = *(float *)&CoorsMin.m_bIsPersistent - *(float *)&ScriptParams[6];
      }
      else
      {
        v171 = *(float *)&ScriptParams[3];
        if ( *(float *)&ScriptParams[6] < (float)-v169 )
          v171 = *(float *)&ScriptParams[6] + *(float *)&CoorsMin.m_bIsPersistent;
      }
      *(float *)&CoorsMin.m_bIsPersistent = v171;
      if ( ScriptParams[7] )
      {
        CMatrix::operator=(&RotationOfBoxMatrix, v125);
        v172 = (CVector *)&CoorsMax;
        LODWORD(RotationOfBoxMatrix.tx) = CoorsMin._vptr$CEvent;
        LODWORD(RotationOfBoxMatrix.ty) = CoorsMin.m_iAccumulatedTime;
        RotationOfBoxMatrix.tz = *(float *)&CoorsMin.m_bIsPersistent;
        v173 = CModelInfo::ms_modelInfoPtrs[*((__int16 *)v54 + 19)]->m_pColModel;
        v174 = (const CEntity *)LODWORD(v173->m_boxBound.m_vecMin.x);
        v175 = v173->m_boxBound.m_vecMin.y;
        v176 = v173->m_boxBound.m_vecMin.z;
        v177 = v173->m_boxBound.m_vecMax.x;
        v179 = *(_QWORD *)&v173->m_boxBound.m_vecMax.y;
        v178 = v173->m_boxBound.m_vecMax.z;
        CoorsMax.m_pInflictor = v174;
        CoorsMax.m_fRawDamage = v175;
        *(RwReal *)&CoorsMax.m_eHitZone = v176;
        width.x = v177;
        width.y = v175;
        width.z = v178;
        height.x = v177;
        LODWORD(height.y) = v179;
        height.z = v176;
        LODWORD(v.x) = v174;
        *(_QWORD *)&v.y = __PAIR64__(LODWORD(v178), v179);
        operator*(&v252, &RotationOfBoxMatrix, (const CVector *)&CoorsMax);
        CoorsMax.m_eHitZone = LODWORD(v252.z);
        *(_QWORD *)&CoorsMax.m_pInflictor = *(_QWORD *)&v252.x;
        operator*(&v252, &RotationOfBoxMatrix, &width);
        v180 = &height;
        width = v252;
        operator*(&v252, &RotationOfBoxMatrix, &height);
        height = v252;
        operator*(&v252, &RotationOfBoxMatrix, &v);
        v181 = &height;
        v182 = (CVector *)&CoorsMax;
        v = v252;
        v183 = (CVector *)&CoorsMax;
        if ( width.x < *(float *)&CoorsMax.m_pInflictor )
          v183 = &width;
        v184 = v183->x;
        v185 = v183;
        if ( height.x < v183->x )
          v185 = &height;
        v186 = v185->x;
        v187 = &height;
        if ( v.x < v186 )
        {
          v187 = &v;
          v183 = &v;
        }
        if ( height.x < v184 )
          v183 = v187;
        v188 = (CVector *)&CoorsMax;
        v189 = v183->x;
        if ( width.y > CoorsMax.m_fRawDamage )
          v188 = &width;
        v190 = v188->y;
        v191 = v188;
        if ( height.y > v190 )
          v191 = &height;
        if ( v.y > v191->y )
        {
          v181 = &v;
          v188 = &v;
        }
        if ( width.x > *(float *)&CoorsMax.m_pInflictor )
          v182 = &width;
        v192 = v182->x;
        v193 = v182;
        if ( height.x > v182->x )
          v193 = &height;
        v194 = v193->x;
        v195 = &height;
        if ( v.x > v194 )
        {
          v195 = &v;
          v182 = &v;
        }
        if ( height.x > v192 )
          v182 = v195;
        if ( width.y < CoorsMax.m_fRawDamage )
          v172 = &width;
        v196 = v172->y;
        v197 = v172;
        if ( height.y < v196 )
          v197 = &height;
        if ( v.y < v197->y )
        {
          v180 = &v;
          v172 = &v;
        }
        if ( height.y < v196 )
          v172 = v180;
        v163 = 1;
        if ( height.y > v190 )
          v188 = v181;
        CWorld::FindObjectsIntersectingAngledCollisionBox(
          &CModelInfo::ms_modelInfoPtrs[*((__int16 *)v54 + 19)]->m_pColModel->m_boxBound,
          &RotationOfBoxMatrix,
          (const CVector *)&CoorsMin,
          v189,
          v172->y,
          v182->x,
          v188->y,
          &pNum,
          2,
          0,
          0,
          1,
          1,
          0,
          0);
        if ( pNum > 0 )
        {
LABEL_389:
          v153 = this;
          LOBYTE(v96) = v163;
LABEL_390:
          CRunningScript::UpdateCompareFlag(v153, v96);
          goto LABEL_391;
        }
        v198 = CoorsMin._vptr$CEvent;
        m_iAccumulatedTime = CoorsMin.m_iAccumulatedTime;
        v200 = *(float *)&CoorsMin.m_bIsPersistent;
      }
      else
      {
        v198 = (int (**)(void))LODWORD(v134);
        m_iAccumulatedTime = v170;
        v200 = v171;
      }
      v201 = 0;
      (*(void (__fastcall **)(uint8 *, int (**)(void), int, float, _DWORD))(*(_DWORD *)v54 + 60))(
        v54,
        v198,
        m_iAccumulatedTime,
        COERCE_FLOAT(LODWORD(v200)),
        0);
      v202 = 0;
      v203 = 0;
      if ( *(float *)&CoorsMin.m_iAccumulatedTime == v128 )
        v202 = 1;
      if ( *(float *)&CoorsMin._vptr$CEvent == v127 )
        v203 = 1;
      v204 = v202 & v203;
      if ( *(float *)&CoorsMin.m_bIsPersistent == v129 )
        v201 = 1;
      v163 = v204 & v201;
      goto LABEL_389;
    case 847:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0 )
      {
        v55 = (unsigned int)ScriptParams[0] >> 8;
        if ( CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        {
          v56 = (CPed *)CPools::ms_pPedPool->m_aStorage[v55];
          if ( v56 )
          {
            if ( v56->CharCreatedBy == 2 )
            {
              v57 = CPools::ms_pPedPool->m_aStorage[v55];
              v58 = v57[1157] << 31 == 0;
              if ( v57[1157] << 31 )
                v58 = *((_DWORD *)v57 + 356) == 0;
              if ( v58 )
              {
                v59 = v57 + 1156;
                CPed::SetCharCreatedBy(v56, 1u);
                PedsGroup = CPedGroups::GetPedsGroup(v56);
                if ( PedsGroup )
                {
                  p_m_membership = &PedsGroup->m_membership;
                  if ( CPedGroupMembership::IsFollower(&PedsGroup->m_membership, v56) )
                    CPedGroupMembership::RemoveMember(p_m_membership, v56);
                }
                --CPopulation::ms_nTotalMissionPeds;
                *((_DWORD *)v59 + 1) |= 8u;
                CWorld::RemoveReferencesToDeletedObject(v56);
              }
              else
              {
                CTheScripts::RemoveThisPed(v56);
              }
            }
          }
        }
      }
      if ( this->IsThisAMissionScript )
        CMissionCleanup::RemoveEntityFromList(&CTheScripts::MissionCleanUp, ScriptParams[0], 2u);
      goto LABEL_391;
    case 848:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v62 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v62 = 0;
      }
      v135 = *((_DWORD *)v62 + 289);
      v136 = *((_DWORD *)v62 + 290);
      v137 = *((_DWORD *)v62 + 291);
      v138 = *((_DWORD *)v62 + 292);
      v139 = (unsigned int *)(v62 + 1156);
      v9 = 0;
      if ( ScriptParams[1] )
        v140 = v135 | 0x200000;
      else
        v140 = v135 & 0xFFDFFFFF;
      *v139 = v140;
      v139[1] = v136;
      v139[2] = v137;
      v139[3] = v138;
      goto LABEL_392;
    case 854:
      CRunningScript::CollectParameters(this, 7);
      v2.n64_u32[0] = ScriptParams[4];
      v3.n64_u32[0] = ScriptParams[1];
      v4.n64_u32[0] = ScriptParams[5];
      v6.n64_u32[0] = ScriptParams[2];
      LODWORD(v63) = vmin_f32(v3, v2).n64_u32[0];
      v64.n64_u64[0] = vmax_f32(v3, v2).n64_u64[0];
      v65.n64_u64[0] = vmin_f32(v6, v4).n64_u64[0];
      v66 = v64.n64_f32[0];
      v64.n64_u32[0] = ScriptParams[6];
      v67 = v65.n64_f32[0];
      v65.n64_u32[0] = ScriptParams[3];
      CanSeeThisEntity = CExplosion::TestForExplosionInArea(
                           ScriptParams[0],
                           v63,
                           v66,
                           v67,
                           vmax_f32(v6, v4).n64_f32[0],
                           vmin_f32(v65, v64).n64_f32[0],
                           vmax_f32(v65, v64).n64_f32[0]);
      goto LABEL_238;
    case 860:
      CRunningScript::CollectParameters(this, 5);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v69 = (CPhysical *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v69 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v141 = (CPhysical *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v141 = 0;
      }
      CPhysical::PlacePhysicalRelativeToOtherPhysical(v141, v69, *(CVector *)&ScriptParams[2]);
      goto LABEL_391;
    case 861:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v70 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v70 = 0;
      }
      if ( ScriptParams[1] )
      {
        CObject::SetObjectTargettable(v70, 1u);
        goto LABEL_391;
      }
      v9 = 0;
      pPed = CWorld::Players[CWorld::PlayerInFocus].pPed;
      CObject::SetObjectTargettable(v70, 0);
      if ( pPed->m_pEntLockOnTarget == v70 )
      {
        v9 = 0;
        CPed::SetWeaponLockOnTarget(pPed, 0);
      }
      goto LABEL_392;
    case 863:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v71 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v71 = 0;
      }
      p_m_nArmour = (unsigned __int32 *)&v71->m_nArmour;
      v71->m_nArmour = v71->m_nArmour + (float)ScriptParams[1];
      if ( CPed::IsPlayer(v71) )
      {
        PlayerSlotWithPedPointer = CWorld::FindPlayerSlotWithPedPointer(v71);
        v2.n64_u32[0] = *p_m_nArmour;
        v3.n64_f32[0] = (float)CWorld::Players[PlayerSlotWithPedPointer].MaxArmour;
        v144.n64_u64[0] = vmin_f32(v2, v3).n64_u64[0];
      }
      else
      {
        v2.n64_u32[0] = 1120403456;
        v3.n64_u32[0] = *p_m_nArmour;
        v144.n64_u64[0] = vmin_f32(v3, v2).n64_u64[0];
      }
      v2.n64_u32[0] = 0;
      *p_m_nArmour = vmax_f32(v144, v2).n64_u32[0];
      goto LABEL_391;
    case 864:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&v252, 8u);
      GarageIndex = CGarages::FindGarageIndex((unsigned __int8 *)&v252);
      if ( GarageIndex > -1 )
        CGarage::OpenThisGarage(&CGarages::aGarages[(__int16)GarageIndex]);
      goto LABEL_391;
    case 865:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&v252, 8u);
      v73 = CGarages::FindGarageIndex((unsigned __int8 *)&v252);
      if ( v73 > -1 )
        CGarage::CloseThisGarage(&CGarages::aGarages[(__int16)v73]);
      goto LABEL_391;
    case 866:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v74 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v74 = 0;
      }
      GroundZForCoord = *(float *)&ScriptParams[3];
      v146 = (int (**)(void))ScriptParams[1];
      v147 = ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      CPedIntelligence::FlushImmediately(*((CPedIntelligence **)v74 + 272), 1);
      v9 = 0;
      v148 = GroundZForCoord + CEntity::GetDistanceFromCentreOfMassToBaseOfModel((CEntity *)v74);
      (*(void (__fastcall **)(uint8 *, int (**)(void), int, _DWORD, _DWORD))(*(_DWORD *)v74 + 60))(
        v74,
        v146,
        v147,
        LODWORD(v148),
        0);
      CoorsMin.m_iAccumulatedTime = v147;
      CoorsMin._vptr$CEvent = v146;
      *(float *)&CoorsMin.m_bIsPersistent = v148;
      CTheScripts::ClearSpaceForMissionEntity((const CVector *)&CoorsMin, (CEntity *)v74);
      goto LABEL_392;
    case 867:
      CRunningScript::CollectParameters(this, 6);
      v75 = (ePedPieceTypes)ScriptParams[2];
      v76 = (const CEntity *)ScriptParams[0];
      v77 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        *(float *)&v75 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      v78 = ScriptParams[4];
      v79 = *(float *)&ScriptParams[3];
      if ( ScriptParams[4] <= -1 )
        v78 = CTheScripts::UsedObjectArray[-ScriptParams[4]].Index;
      CoorsMax.m_fRawDamage = v77;
      CoorsMax.m_pInflictor = v76;
      CoorsMax.m_eHitZone = v75;
      CWorld::FindObjectsOfTypeInRange(
        v78,
        (const CVector *)&CoorsMax,
        *(float *)&ScriptParams[3],
        1,
        (Int16 *)&width,
        16,
        (CEntity **)&CoorsMin,
        1,
        0,
        0,
        1,
        1);
      v80 = LOWORD(width.x);
      if ( !LOWORD(width.x) )
      {
        CoorsMax.m_fRawDamage = v77;
        CoorsMax.m_pInflictor = v76;
        CoorsMax.m_eHitZone = v75;
        CWorld::FindLodOfTypeInRange(
          v78,
          (const CVector *)&CoorsMax,
          v79,
          1,
          (Int16 *)&width,
          16,
          (CEntity **)&CoorsMin);
        v80 = LOWORD(width.x);
      }
      v81 = v80;
      if ( v80 < 1 )
        goto LABEL_391;
      v2.n64_f32[0] = v79 + v79;
      v82 = 0;
      v83 = 0;
      v84 = 0;
      do
      {
        v85 = *((_DWORD *)&CoorsMin._vptr$CEvent + v82);
        ++v83;
        v86 = *(_DWORD *)(v85 + 20);
        v87 = (float *)(v86 + 48);
        if ( !v86 )
          v87 = (float *)(v85 + 4);
        v3.n64_f32[0] = sqrtf(
                          (float)((float)((float)(*v87 - *(float *)&v76) * (float)(*v87 - *(float *)&v76))
                                + (float)((float)(v87[1] - v77) * (float)(v87[1] - v77)))
                        + (float)((float)(v87[2] - *(float *)&v75) * (float)(v87[2] - *(float *)&v75)));
        v88 = v3.n64_f32[0] < v2.n64_f32[0];
        v2.n64_u64[0] = vmin_f32(v3, v2).n64_u64[0];
        if ( v88 )
          v84 = v85;
        v82 = v83;
      }
      while ( v83 < v81 );
      if ( !v84 )
        goto LABEL_391;
      v89 = (_DWORD *)(v84 + 28);
      v90 = *(_DWORD *)(v84 + 28);
      v91 = *(_DWORD *)(v84 + 32);
      if ( ScriptParams[5] )
      {
        *v89 = v90 | 0x81;
        *(_DWORD *)(v84 + 32) = v91;
        if ( !*(_BYTE *)(v84 + 50) )
        {
          v92 = 0;
          v93 = 0;
          do
          {
            pEntity = CTheScripts::InvisibilitySettingArray[v92].pEntity;
            v93 += pEntity != (CEntity *)v84;
            v92 = v93;
          }
          while ( v93 <= 0x13u && pEntity != (CEntity *)v84 );
          if ( pEntity == (CEntity *)v84 )
          {
            v9 = 0;
            CTheScripts::InvisibilitySettingArray[v93].pEntity = 0;
            goto LABEL_392;
          }
        }
      }
      else
      {
        *v89 = v90 & 0xFFFFFF7E;
        *(_DWORD *)(v84 + 32) = v91;
        if ( !*(_BYTE *)(v84 + 50) )
        {
          v233 = 0;
          v234 = 0;
          do
          {
            v235 = CTheScripts::InvisibilitySettingArray[v233].pEntity;
            v234 += v235 != (CEntity *)v84;
            v233 = (unsigned __int16)v234;
          }
          while ( (unsigned __int16)v234 <= 0x13u && v235 != (CEntity *)v84 );
          if ( v235 != (CEntity *)v84 )
          {
            v236 = 0;
            v237 = 0;
            do
            {
              v238 = CTheScripts::InvisibilitySettingArray[v236].pEntity;
              v239 = (int)v238;
              if ( v238 )
                v239 = 1;
              v237 += v239;
              v236 = v237;
            }
            while ( v237 <= 0x13u && v239 );
            if ( !v238 )
              CTheScripts::InvisibilitySettingArray[v237].pEntity = (CEntity *)v84;
          }
        }
      }
      goto LABEL_391;
    case 868:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v95 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v95 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v149 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v149 = 0;
      }
      CanSeeThisEntity = CPed::OurPedCanSeeThisEntity(v95, v149, 1);
LABEL_238:
      LOBYTE(v96) = CanSeeThisEntity;
      goto LABEL_239;
    case 870:
      CRunningScript::CollectParameters(this, 1);
      v96 = *(_DWORD *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][28] & 0x280 ^ 0x80;
      if ( v96 )
        LOBYTE(v96) = 1;
LABEL_239:
      v153 = this;
      goto LABEL_390;
    case 874:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v97 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        if ( ScriptParams[1] < 0 )
          goto LABEL_240;
      }
      else
      {
        v97 = 0;
        if ( ScriptParams[1] < 0 )
          goto LABEL_240;
      }
      if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v150 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        goto LABEL_241;
      }
LABEL_240:
      v150 = 0;
LABEL_241:
      v9 = 0;
      CPedIntelligence::FlushImmediately(v97->m_pPedIntelligence, 0);
      CTaskSimpleCarSetPedInAsDriver::CTaskSimpleCarSetPedInAsDriver(
        (CTaskSimpleCarSetPedInAsDriver *)&CoorsMin,
        v150,
        0);
      LOBYTE(CoorsMin.m_eWeaponUsed) = 1;
      CTaskSimpleCarSetPedInAsDriver::ProcessPed((CTaskSimpleCarSetPedInAsDriver *)&CoorsMin, v97);
      CTaskSimpleCarSetPedInAsDriver::~CTaskSimpleCarSetPedInAsDriver((CTaskSimpleCarSetPedInAsDriver *)&CoorsMin);
      goto LABEL_392;
    case 877:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v98 = CText::Get(&TheText, pStringToFill);
      CRunningScript::CollectParameters(this, 4);
      CMessages::AddBigMessageWithNumber(
        v98,
        ScriptParams[2],
        LOWORD(ScriptParams[3]) - 1,
        ScriptParams[0],
        ScriptParams[1],
        -1,
        -1,
        -1,
        -1);
      goto LABEL_391;
    case 883:
      CCamera::SetCameraDirectlyBehindForFollowPed_CamOnAString(&TheCamera);
      goto LABEL_391;
    case 886:
      CRunningScript::CollectParameters(this, 3);
      v99 = PEDTYPE_COP;
      v100 = 0;
      do
      {
        v101 = CPopulation::ChooseCivilianOccupation(0, 0, -1, -1, -1, 0, 0, 0, 0);
        v102 = CModelInfo::ms_modelInfoPtrs[v101];
        v103 = v102->m_pRwObject;
        if ( v103 )
          v99 = *(_DWORD *)v102[1].m_modelName;
        if ( (v99 & 0xFFFFFFFE) == 4 )
          break;
        ++v100;
      }
      while ( (unsigned __int16)v100 < 5u );
      if ( !v103 )
      {
        v101 = 7;
        v99 = *(_DWORD *)CModelInfo::ms_modelInfoPtrs[7][1].m_modelName;
      }
      v104 = (CCivilianPed *)CPed::operator new(0x7A4u);
      CCivilianPed::CCivilianPed(v104, v99, v101);
      m_pPedIntelligence = v104->m_pPedIntelligence;
      v106 = (CTaskSimpleStandStill *)CTask::operator new(0x20u);
      CTaskSimpleStandStill::CTaskSimpleStandStill(
        v106,
        (const int)"List_FillGlobeColPointsER8CPtrListRK8CColLineRP7CEntitybP15CStoredCollPoly",
        1,
        0,
        8.0);
      CTaskManager::SetTask(&m_pPedIntelligence->m_taskManager, v106, 4, 0);
      CPed::SetCharCreatedBy(v104, 2u);
      *(_DWORD *)&v104->m_nPedFlags &= ~0x80000000;
      v107 = *(float *)&ScriptParams[2];
      v108 = (int (**)(void))ScriptParams[0];
      v109 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v107 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      CoorsMin.m_iAccumulatedTime = v109;
      CoorsMin._vptr$CEvent = v108;
      v110 = v107 + 1.0;
      *(float *)&CoorsMin.m_bIsPersistent = v110;
      v111 = v104->m_pMat;
      if ( v111 )
      {
        LODWORD(v111->tx) = v108;
        LODWORD(v104->m_pMat->ty) = v109;
        p_tz = &v104->m_pMat->tz;
      }
      else
      {
        p_tz = &v104->m_transform.m_translate.z;
        LODWORD(v104->m_transform.m_translate.x) = v108;
        LODWORD(v104->m_transform.m_translate.y) = v109;
      }
      *p_tz = v110;
      v154 = v104->m_pMat;
      if ( v154 )
      {
        tx = v154->tx;
        ty = v154->ty;
        tz = v154->tz;
        CMatrix::SetRotate(v154, 0.0, 0.0, 0.0);
        p_xx = &v104->m_pMat->xx;
        v159 = ty + p_xx[13];
        v160 = tz + p_xx[14];
        p_xx[12] = tx + p_xx[12];
        p_xx[13] = v159;
        p_xx[14] = v160;
      }
      else
      {
        v104->m_transform.m_heading = 0.0;
      }
      CTheScripts::ClearSpaceForMissionEntity((const CVector *)&CoorsMin, v104);
      if ( this->IsThisAMissionScript )
        *(_DWORD *)&v104->m_nFlags |= 0x40000u;
      CWorld::Add(v104);
      ++CPopulation::ms_nTotalMissionPeds;
      ScriptParams[0] = CPools::ms_pPedPool->m_aFlags[-1093107909
                                                    * (((char *)v104 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)v104 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2));
      CRunningScript::StoreParameters(this, 1);
      if ( this->IsThisAMissionScript )
        CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, ScriptParams[0], 2u);
      goto LABEL_391;
    case 897:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v113 = (float *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v113 = 0;
      }
      v9 = 0;
      v151 = *(float *)&ScriptParams[3] / 50.0;
      v152 = *(float *)&ScriptParams[2] / 50.0;
      v113[18] = *(float *)&ScriptParams[1] / 50.0;
      v113[19] = v152;
      v113[20] = v151;
      goto LABEL_392;
    case 898:
      CRunningScript::CollectParameters(this, 2);
      v37 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v114 = *((_DWORD *)v37 + 7);
      v39 = v114 & 0xFFFFFFFE;
      if ( ScriptParams[1] )
        v39 = v114 | 1;
LABEL_173:
      *((_DWORD *)v37 + 7) = v39;
      goto LABEL_391;
    default:
      v9 = -1;
      goto LABEL_392;
  }
}
// 346AA2: variable 'v3' is possibly undefined
// 346AA2: variable 'v6' is possibly undefined
// 346AB6: variable 'v2' is possibly undefined
// 346AB6: variable 'v5' is possibly undefined
// 346AAE: variable 'v4' is possibly undefined
// 346AAE: variable 'v7' is possibly undefined
// 3477AC: variable 'v115' is possibly undefined
// FC: using guessed type int elf_hash_bucket[16411];
// 676438: using guessed type CFireManager *gFireManager_ptr;
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 678534: using guessed type int *CPools::ms_pVehiclePool;

//----- (00348554) --------------------------------------------------------
void __fastcall CTheScripts::AddToInvisibilitySwapArray(CEntity *pEnt, bool bVisible)
{
  int v2; // lr
  unsigned __int16 v3; // r3
  CEntity *pEntity; // r4
  int v5; // r1
  unsigned __int16 v6; // r3
  CEntity *v7; // r2

  if ( !pEnt->m_iplIndex )
  {
    v2 = 0;
    v3 = 0;
    do
    {
      pEntity = CTheScripts::InvisibilitySettingArray[v2].pEntity;
      v3 += pEntity != pEnt;
      v2 = v3;
    }
    while ( v3 <= 0x13u && pEntity != pEnt );
    if ( pEntity == pEnt )
    {
      if ( bVisible )
        CTheScripts::InvisibilitySettingArray[v3].pEntity = 0;
    }
    else if ( !bVisible )
    {
      v5 = 0;
      v6 = 0;
      do
      {
        v7 = CTheScripts::InvisibilitySettingArray[v5].pEntity;
        v6 += v7 != 0;
        v5 = v6;
      }
      while ( v6 <= 0x13u && v7 );
      if ( !v7 )
        CTheScripts::InvisibilitySettingArray[v6].pEntity = pEnt;
    }
  }
}

//----- (003485EC) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands900To999(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  float32x2_t v6; // d4
  float32x2_t v7; // d5
  float32x2_t v8; // d7
  Int8 v10; // r5
  Int16 v11; // r1
  GxtChar *v12; // r8
  GxtChar *v13; // r5
  Bool8 *v14; // r4
  int v15; // r0
  char v16; // r0
  unsigned __int32 v17; // s0
  RwReal v18; // s2
  Bool8 v19; // r1
  float *v20; // r0
  float v21; // s8
  float v22; // s0
  float v23; // s10
  UInt8 v24; // r3
  float v25; // s2
  int v26; // r0
  __int16 v27; // r1
  intro_script_rectangle *v28; // r0
  UInt16 v29; // r0
  RwUInt8 x_low; // r1
  intro_script_rectangle *v31; // r2
  float v32; // s8
  float v33; // s0
  float v34; // s10
  UInt8 v35; // r3
  float v36; // s4
  int v37; // r0
  UInt8 v38; // r1
  intro_script_rectangle *v39; // r0
  int i; // r0
  char v41; // r1
  int32 TxdSlot; // r4
  int32 v43; // r5
  CPhysical *v44; // r4
  uint8 *v45; // r6
  float GroundZForCoord; // s0
  RwReal v47; // r4
  RwReal v48; // s16
  Bool8 v49; // r0
  uint8 *v50; // r1
  int v51; // r2
  unsigned int v52; // r3
  uint8 *v53; // r0
  uint8 *v54; // r1
  int v55; // r2
  unsigned int v56; // r3
  uint8 *v57; // r4
  float v58; // s0
  RwReal v59; // s16
  RwReal v60; // s18
  char v61; // r0
  uint8 *v62; // r4
  Bool8 v63; // r1
  uint8 v64; // t1
  char v65; // r1
  int v66; // r0
  uint8 *v67; // r1
  int v68; // r2
  unsigned int v69; // r3
  int GarageIndex; // r0
  bool IsGarageOpen; // r0
  int v72; // r0
  uint8 *v73; // r1
  float v74; // s20
  float v75; // s16
  float v76; // s18
  __int64 v77; // r8
  float v78; // s22
  int v79; // r3
  unsigned __int16 v80; // r1
  CBuilding *v81; // r2
  CBuilding *v82; // r6
  CBuilding *v83; // r3
  CMatrix *m_pMat; // r4
  float *p_tx; // r5
  bool v86; // nf
  int v87; // r0
  unsigned __int16 v88; // r2
  int v89; // r5
  CBuilding *pBuilding; // r3
  int v91; // r0
  unsigned __int16 v92; // r2
  CBuilding *v93; // r5
  int v94; // r3
  float v95; // s20
  RwReal v96; // s16
  RwReal v97; // s18
  Int32 v98; // r5
  UInt8 *PCPointer; // r1
  unsigned __int8 *v100; // r3
  unsigned int v101; // r0
  _DWORD *v102; // r2
  unsigned int v103; // r3
  int v104; // r1
  int v105; // r0
  CPlayerPedData *m_pPlayerData; // r1
  CWanted *m_Wanted; // r1
  char v108; // r2
  uint8 *v109; // r0
  int v110; // r0
  UInt32 IndexOfGlobalVariable; // r8
  Int32 v112; // r6
  UInt32 v113; // r8
  int v114; // r6
  char *v115; // r4
  float v116; // r4
  RwReal v117; // r4
  RwReal v118; // r5
  RwReal v119; // r6
  uint8 *HasCarBeenStuckForAWhile; // r0
  int MissionAudioLoadingStatus; // r0
  CRunningScript *v122; // r0
  float v123; // s0
  CPathFind *v124; // s16
  Int32 v125; // s18
  float NodeOrientationForCarPlacement; // r5
  CNodeAddress *NodeClosestToCoors; // r8
  char v128; // r6
  GxtChar *v129; // r0
  GxtChar *v130; // r0
  CPlayerPed *PlayerPed; // r0
  CPlayerPed *v132; // r0
  int32 ParameterWithoutIncreasingPC; // r0
  unsigned int v134; // r5
  Bool8 v135; // r1
  Bool8 v136; // r1
  Bool8 v137; // r1
  GxtChar *v138; // r5
  bool v139; // zf
  Char *ScriptName; // r5
  CWidgetHelpText *v141; // r4
  float v142; // s0
  float v143; // s4
  int v144; // r0
  CAnimBlendAssociation *Association; // r5
  int v146; // r1
  _BYTE *v147; // r0
  CVector *v148; // r1
  CVector *v149; // r2
  float ATanOfXY; // r0
  float v151; // s0
  CMatrix *v152; // r0
  char v154; // r3
  GxtChar *v155; // r0
  GxtChar *v156; // r0
  building_swap_struct *v157; // r1
  Int32 *p_OldModelIndex; // r1
  Int32 OldModelIndex; // t1
  __int64 v160; // kr08_8
  float v161; // s16
  float v162; // r0
  float v163; // s0
  int v164; // r0
  float *v165; // r0
  CMatrix *v166; // r0
  int v167; // r2
  bool v168; // [sp+1Ch] [bp-D4h]
  Int16 pNum; // [sp+26h] [bp-CAh] BYREF
  float height; // [sp+28h] [bp-C8h] BYREF
  unsigned __int64 width; // [sp+2Ch] [bp-C4h] BYREF
  float x; // [sp+34h] [bp-BCh] BYREF
  CVector vecPosition; // [sp+38h] [bp-B8h] BYREF
  CVector CoorsMin; // [sp+48h] [bp-A8h] BYREF
  Char v175[10]; // [sp+88h] [bp-68h] BYREF
  Char pStringToFill[8]; // [sp+92h] [bp-5Eh] BYREF
  Char TextLabel[10]; // [sp+9Ah] [bp-56h] BYREF
  float v178; // [sp+A4h] [bp-4Ch]
  CVector v179; // 0:r2.8,8:^0.4

  v10 = 0;
  switch ( CurrCommand )
  {
    case 900:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v12 = CText::Get(&TheText, pStringToFill);
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v13 = CText::Get(&TheText, pStringToFill);
      CRunningScript::CollectParameters(this, 2);
      v14 = &CTheScripts::bAddNextMessageToPreviousBriefs;
      v15 = CTheScripts::bAddNextMessageToPreviousBriefs;
      if ( CTheScripts::bAddNextMessageToPreviousBriefs )
        v15 = 1;
      CMessages::AddMessageJumpQWithString(v12, ScriptParams[0], ScriptParams[1], v13, v15);
      v16 = 1;
      goto LABEL_60;
    case 906:
      CRunningScript::CollectParameters(this, 6);
      v10 = 0;
      v4.n64_f32[0] = *(float *)&ScriptParams[2] + *(float *)&ScriptParams[5];
      v3.n64_f32[0] = *(float *)&ScriptParams[2] - *(float *)&ScriptParams[5];
      height = *(float *)&ScriptParams[4];
      x = *(float *)ScriptParams;
      v8.n64_f32[0] = *(float *)ScriptParams + *(float *)&ScriptParams[3];
      v5.n64_f32[0] = *(float *)ScriptParams - *(float *)&ScriptParams[3];
      width = __PAIR64__(ScriptParams[1], ScriptParams[3]);
      v17 = vmax_f32(v3, v4).n64_u32[0];
      LODWORD(v18) = vmin_f32(v3, v4).n64_u32[0];
      v4.n64_f32[0] = *(float *)&ScriptParams[4] + *(float *)&ScriptParams[1];
      v6.n64_f32[0] = *(float *)&ScriptParams[1] - *(float *)&ScriptParams[4];
      CoorsMin.z = v18;
      *(_DWORD *)&TextLabel[6] = vmax_f32(v6, v4).n64_u32[0];
      LODWORD(CoorsMin.y) = vmin_f32(v6, v4).n64_u32[0];
      *(_DWORD *)&TextLabel[2] = vmax_f32(v5, v8).n64_u32[0];
      LODWORD(CoorsMin.x) = vmin_f32(v5, v8).n64_u32[0];
      LODWORD(v178) = v17;
      CWorld::FindMissionEntitiesIntersectingCube(&CoorsMin, (const CVector *)&TextLabel[2], &pNum, 2, 0, 1, 1, 1);
      v19 = pNum > 0;
      goto LABEL_200;
    case 907:
      CTimer::Suspend();
      v10 = 0;
      CStreaming::LoadAllRequestedModels(0);
      CTimer::Resume();
      return v10;
    case 908:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v20 = (float *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v20 = 0;
      }
      v10 = 0;
      v142 = v20[19] + (float)(*(float *)&ScriptParams[2] / 50.0);
      v143 = v20[20] + (float)(*(float *)&ScriptParams[3] / 50.0);
      v20[18] = v20[18] + (float)(*(float *)&ScriptParams[1] / 50.0);
      v20[19] = v142;
      v20[20] = v143;
      return v10;
    case 909:
      CRunningScript::CollectParameters(this, 9);
      v10 = 0;
      if ( CPad::GetPad(0)->bStopRhythmSprites )
        return v10;
      HIDWORD(width) = ScriptParams[2];
      x = *(float *)&ScriptParams[1];
      *(float *)&width = *(float *)&ScriptParams[3] * 0.5;
      height = *(float *)&ScriptParams[4] * 0.5;
      CorrectAspect(&x, (float *)&width + 1, (float *)&width, &height);
      v21 = *((float *)&width + 1) + height;
      v22 = *((float *)&width + 1) - height;
      v23 = x + *(float *)&width;
      v24 = ScriptParams[7];
      v25 = x - *(float *)&width;
      v26 = CTheScripts::NumberOfIntroRectanglesThisFrame;
      v27 = ScriptParams[0];
      CTheScripts::IntroRectangles[CTheScripts::NumberOfIntroRectanglesThisFrame].eWindowType = WINDOW_SPRITE_NO_ROTATION;
      v28 = &CTheScripts::IntroRectangles[v26];
      v28->ScriptRectRotation = 0.0;
      v28->ScriptSpriteIndex = v27 - 1;
      v28->ScriptRectMinX = v25;
      v28->ScriptRectMinY = v22;
      v28->ScriptRectMaxX = v23;
      v28->ScriptRectMaxY = v21;
      CRGBA::CRGBA((CRGBA *)&CoorsMin, ScriptParams[5], ScriptParams[6], v24, ScriptParams[8]);
      v29 = CTheScripts::NumberOfIntroRectanglesThisFrame;
      x_low = LOBYTE(CoorsMin.x);
      v31 = &CTheScripts::IntroRectangles[CTheScripts::NumberOfIntroRectanglesThisFrame];
LABEL_15:
      v31->ScriptRectColour._anon_0._anon_0.red = x_low;
      *(_WORD *)&v31->ScriptRectColour._anon_0._anon_0.green = *(_WORD *)((char *)&CoorsMin.x + 1);
      v31->ScriptRectColour._anon_0._anon_0.alpha = HIBYTE(CoorsMin.x);
      v31->pTitle[0] = 0;
      CTheScripts::NumberOfIntroRectanglesThisFrame = v29 + 1;
      return v10;
    case 910:
      CRunningScript::CollectParameters(this, 8);
      HIDWORD(width) = ScriptParams[1];
      x = *(float *)ScriptParams;
      *(float *)&width = *(float *)&ScriptParams[2] * 0.5;
      height = *(float *)&ScriptParams[3] * 0.5;
      CorrectAspect(&x, (float *)&width + 1, (float *)&width, &height);
      v10 = 0;
      v32 = *((float *)&width + 1) + height;
      v33 = *((float *)&width + 1) - height;
      v34 = x + *(float *)&width;
      v35 = ScriptParams[6];
      v36 = x - *(float *)&width;
      v37 = CTheScripts::NumberOfIntroRectanglesThisFrame;
      v38 = ScriptParams[4];
      CTheScripts::IntroRectangles[CTheScripts::NumberOfIntroRectanglesThisFrame].eWindowType = WINDOW_SOLID_COLOUR;
      v39 = &CTheScripts::IntroRectangles[v37];
      v39->ScriptSpriteIndex = -1;
      v39->ScriptRectRotation = 0.0;
      v39->ScriptRectMinX = v36;
      v39->ScriptRectMinY = v33;
      v39->ScriptRectMaxX = v34;
      v39->ScriptRectMaxY = v32;
      CRGBA::CRGBA((CRGBA *)&CoorsMin, v38, ScriptParams[5], v35, ScriptParams[7]);
      v29 = CTheScripts::NumberOfIntroRectanglesThisFrame;
      x_low = LOBYTE(CoorsMin.x);
      v31 = &CTheScripts::IntroRectangles[CTheScripts::NumberOfIntroRectanglesThisFrame];
      goto LABEL_15;
    case 911:
      CRunningScript::CollectParameters(this, 1);
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&CoorsMin, 0xFu);
      for ( i = 0; i != 15; ++i )
      {
        v41 = *((_BYTE *)&CoorsMin.x + i);
        if ( (unsigned __int8)(v41 - 65) <= 0x19u )
          *((_BYTE *)&CoorsMin.x + i) = v41 + 32;
      }
      TxdSlot = CTxdStore::FindTxdSlot("script");
      CTxdStore::PushCurrentTxd();
      v10 = 0;
      CTxdStore::SetCurrentTxd(TxdSlot, 0);
      CSprite2d::SetTexture(&CTheScripts::ScriptSprites[ScriptParams[0] - 1], (unsigned __int8 *)&CoorsMin);
      CTxdStore::PopCurrentTxd();
      return v10;
    case 912:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      strcpy((char *)&CoorsMin, "models\\txd\\");
      strncpy((char *)&CoorsMin.z + 3, (const char *)pStringToFill, 8u);
      strcat((char *)&CoorsMin, ".txd");
      v43 = CTxdStore::FindTxdSlot("script");
      if ( v43 == -1 )
        v43 = CTxdStore::AddTxdSlot("script", (const unsigned __int8 *)&off_349508, 0);
      CTxdStore::LoadTxd(v43, (const unsigned __int8 *)&CoorsMin);
      CTxdStore::AddRef(v43);
      if ( !this->IsThisAMissionScript )
        return 0;
      CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, 1, 0xDu);
      return 0;
    case 913:
      CTheScripts::RemoveScriptTextureDictionary();
      if ( !this->IsThisAMissionScript )
        return 0;
      CMissionCleanup::RemoveEntityFromList(&CTheScripts::MissionCleanUp, 1, 0xDu);
      return 0;
    case 914:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v44 = (CPhysical *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v44 = 0;
      }
      v144 = *(_DWORD *)&v44->m_nFlags & 4;
      if ( ScriptParams[1] )
      {
        if ( !v144 )
          return 0;
        v10 = 0;
        (*((void (__fastcall **)(CPhysical *, _DWORD))v44->_vptr$CPlaceable + 5))(v44, 0);
        CPhysical::AddToMovingList(v44);
      }
      else
      {
        if ( v144 )
          return 0;
        (*((void (__fastcall **)(CPhysical *, int))v44->_vptr$CPlaceable + 5))(v44, 1);
        CPhysical::RemoveFromMovingList(v44);
        return 0;
      }
      return v10;
    case 915:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v45 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v45 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, &TextLabel[2], 0x18u);
      Association = RpAnimBlendClumpGetAssociation(*((RpClump_0 **)v45 + 6), &TextLabel[2]);
      CRunningScript::CollectParameters(this, 1);
      if ( !Association )
        return 0;
      LODWORD(Association->m_fSpeed) = ScriptParams[0];
      return 0;
    case 916:
      CRunningScript::CollectParameters(this, 1);
      if ( (unsigned int)(ScriptParams[0] - 1) > 1 )
        return 0;
      CAudioEngine::PreloadBeatTrack(&AudioEngine, LOWORD(ScriptParams[0]) + 10);
      CAudioEngine::PlayPreloadedBeatTrack(&AudioEngine, 1u);
      return 0;
    case 917:
      CRunningScript::CollectParameters(this, 5);
      GroundZForCoord = *(float *)&ScriptParams[2];
      v47 = *(float *)ScriptParams;
      v48 = *(float *)&ScriptParams[1];
      x = *(float *)ScriptParams;
      HIDWORD(width) = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      CoorsMin.y = v48;
      CoorsMin.x = v47;
      CoorsMin.z = GroundZForCoord;
      CWorld::ClearExcitingStuffFromArea(&CoorsMin, *(float *)&ScriptParams[3], ScriptParams[4]);
      return 0;
    case 918:
      CRunningScript::CollectParameters(this, 1);
      v10 = 0;
      v49 = ScriptParams[0];
      if ( ScriptParams[0] )
        v49 = 1;
      CUserDisplay::OnscnTimer.FreezeTimers = v49;
      return v10;
    case 919:
      CRunningScript::CollectParameters(this, 2);
      v10 = 0;
      v50 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v51 = *((_DWORD *)v50 + 268);
      v52 = v51 & 0xFFFF7FFF;
      if ( ScriptParams[1] )
        v52 = v51 | 0x8000;
      *((_DWORD *)v50 + 268) = v52;
      return v10;
    case 924:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v53 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v53 = 0;
      }
      v146 = *((_DWORD *)v53 + 360);
      if ( v146 == 9 )
      {
        v147 = v53 + 1576;
      }
      else
      {
        if ( v146 )
          return 0;
        v147 = v53 + 2172;
      }
      v10 = 0;
      v154 = *v147 & 0xFB;
      if ( ScriptParams[1] )
        v154 = *v147 | 4;
      *v147 = v154;
      return v10;
    case 926:
      CRunningScript::CollectParameters(this, 2);
      v10 = 0;
      v54 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v55 = *((_DWORD *)v54 + 289);
      v56 = v55 & 0xDFFFFFFF;
      if ( ScriptParams[1] )
        v56 = v55 | 0x20000000;
      *((_DWORD *)v54 + 289) = v56;
      return v10;
    case 927:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v57 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v57 = 0;
      }
      v148 = (CVector *)*((_DWORD *)v57 + 5);
      v149 = v148 + 4;
      if ( !v148 )
        v149 = (CVector *)(v57 + 4);
      vecPosition = *v149;
      ATanOfXY = CGeneral::GetATanOfXY(
                   vecPosition.x - *(float *)&ScriptParams[1],
                   vecPosition.y - *(float *)&ScriptParams[2]);
      v151 = ATanOfXY + 1.5708;
      if ( (float)(ATanOfXY + 1.5708) > 6.2832 )
        v151 = (float)(ATanOfXY + 1.5708) + -6.2832;
      v152 = (CMatrix *)*((_DWORD *)v57 + 5);
      if ( v152 )
        CMatrix::SetRotateZOnly(v152, v151);
      else
        *((float *)v57 + 4) = v151;
      return 0;
    case 929:
      CRunningScript::CollectParameters(this, 4);
      v58 = *(float *)&ScriptParams[2];
      v59 = *(float *)ScriptParams;
      v60 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v58 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      vecPosition.y = v60;
      vecPosition.x = v59;
      vecPosition.z = v58;
      v10 = 0;
      C3dMarkers::PlaceMarkerSet(
        (u_native)&this->PCPointer[(unsigned int)this],
        1u,
        &vecPosition,
        *(float *)&ScriptParams[3],
        COLMISSIONMARKER._anon_0._anon_0.red,
        COLMISSIONMARKER._anon_0._anon_0.green,
        COLMISSIONMARKER._anon_0._anon_0.blue,
        0xE4u,
        0x800u,
        0.1,
        0);
      return v10;
    case 930:
      CRunningScript::CollectParameters(this, 2);
      v61 = ScriptParams[1];
      v62 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v64 = v62[58];
      v14 = v62 + 58;
      v63 = v64;
      if ( (v64 & 0xF8) == 16 && ScriptParams[1] != 2 )
      {
        CCarCtrl::SwitchVehicleToRealPhysics((CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8]);
        v63 = *v14;
        v61 = ScriptParams[1];
      }
      v16 = v63 & 7 | (8 * v61);
LABEL_60:
      *v14 = v16;
      return 0;
    case 931:
      CRunningScript::CollectParameters(this, 1);
      v10 = 0;
      v65 = 0;
      v66 = *(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1436];
      if ( v66 != 5 )
        v65 = 1;
      v19 = v65 ^ (v66 == 22);
      goto LABEL_200;
    case 932:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&CoorsMin, 8u);
      if ( (unsigned __int8)(LOBYTE(CoorsMin.x) - 65) <= 0x19u )
        LOBYTE(CoorsMin.x) += 32;
      if ( (unsigned __int8)(BYTE1(CoorsMin.x) - 65) < 0x1Au )
        BYTE1(CoorsMin.x) += 32;
      if ( (unsigned __int8)(BYTE2(CoorsMin.x) - 65) <= 0x19u )
        BYTE2(CoorsMin.x) += 32;
      if ( (unsigned __int8)(HIBYTE(CoorsMin.x) - 65) <= 0x19u )
        HIBYTE(CoorsMin.x) += 32;
      if ( (unsigned __int8)(LOBYTE(CoorsMin.y) - 65) <= 0x19u )
        LOBYTE(CoorsMin.y) += 32;
      if ( (unsigned __int8)(BYTE1(CoorsMin.y) - 65) <= 0x19u )
        BYTE1(CoorsMin.y) += 32;
      if ( (unsigned __int8)(BYTE2(CoorsMin.y) - 65) <= 0x19u )
        BYTE2(CoorsMin.y) += 32;
      if ( (unsigned __int8)(HIBYTE(CoorsMin.y) - 65) <= 0x19u )
        HIBYTE(CoorsMin.y) += 32;
      strncpy((char *)this->ScriptName, (const char *)&CoorsMin, 8u);
      if ( !strcmp((const char *)this->ScriptName, "copcar")
        || !strcmp((const char *)this->ScriptName, "ambulan")
        || !strcmp((const char *)this->ScriptName, "firetru")
        || !strcmp((const char *)this->ScriptName, "stunt")
        || !strcmp((const char *)this->ScriptName, "ram_2p")
        || !strcmp((const char *)this->ScriptName, "bike_2p")
        || !strcmp((const char *)this->ScriptName, "cars_2p")
        || !strcmp((const char *)this->ScriptName, "heli_2p")
        || !strcmp((const char *)this->ScriptName, "peds_2p") )
      {
        IsOddJob = 1;
      }
      if ( !this->IsThisAMissionScript || this->bIsThisAStreamedScript )
        return 0;
      v10 = 0;
      if ( CTheScripts::IsPlayerOnAMission() && !IsOddJob )
      {
        missionReplaySetting = 1;
        SaveGameForPause(eStartmissionSave, this->ScriptName);
        return 0;
      }
      return v10;
    case 935:
    case 936:
      v11 = 1;
      goto LABEL_96;
    case 937:
    case 980:
    case 986:
    case 991:
    case 993:
      return v10;
    case 938:
      v11 = 3;
LABEL_96:
      CRunningScript::CollectParameters(this, v11);
      return 0;
    case 939:
      CRunningScript::CollectParameters(this, 2);
      v10 = 0;
      v67 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v68 = *((_DWORD *)v67 + 267);
      v69 = v68 & 0xFFFF7FFF;
      if ( ScriptParams[1] )
        v69 = v68 | 0x8000;
      *((_DWORD *)v67 + 267) = v69;
      return v10;
    case 941:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        CRubbish::SetVisibility(1);
        return 0;
      }
      else
      {
        v10 = 0;
        CRubbish::SetVisibility(0);
      }
      return v10;
    case 943:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        v10 = 0;
        CStreaming::ms_disableStreaming = 0;
      }
      else
      {
        CStreaming::ms_disableStreaming = 1;
        return 0;
      }
      return v10;
    case 944:
      CRunningScript::ReadTextLabelFromScript(this, v175, 8u);
      GarageIndex = CGarages::FindGarageIndex(v175);
      if ( GarageIndex <= -1 )
        goto LABEL_174;
      IsGarageOpen = CGarages::IsGarageOpen(GarageIndex);
      goto LABEL_108;
    case 945:
      CRunningScript::ReadTextLabelFromScript(this, v175, 8u);
      v72 = CGarages::FindGarageIndex(v175);
      if ( v72 <= -1 )
        goto LABEL_174;
      IsGarageOpen = CGarages::IsGarageClosed(v72);
LABEL_108:
      LOBYTE(v73) = IsGarageOpen;
      goto LABEL_187;
    case 950:
      CRunningScript::CollectParameters(this, 6);
      v74 = *(float *)&ScriptParams[2];
      v75 = *(float *)ScriptParams;
      v76 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v74 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      HIDWORD(v77) = ScriptParams[4];
      v78 = *(float *)&ScriptParams[3];
      if ( ScriptParams[4] <= -1 )
        HIDWORD(v77) = CTheScripts::UsedObjectArray[-ScriptParams[4]].Index;
      LODWORD(v77) = ScriptParams[5];
      if ( ScriptParams[5] <= -1 )
        LODWORD(v77) = CTheScripts::UsedObjectArray[-ScriptParams[5]].Index;
      *(float *)&TextLabel[6] = v76;
      *(float *)&TextLabel[2] = v75;
      v178 = v74;
      CWorld::FindObjectsOfTypeInRange(
        HIDWORD(v77),
        (const CVector *)&TextLabel[2],
        *(float *)&ScriptParams[3],
        1,
        (Int16 *)&vecPosition,
        16,
        (CEntity **)&CoorsMin,
        1,
        0,
        0,
        0,
        0);
      if ( SLOWORD(vecPosition.x) < 1 )
        return 0;
      v2.n64_f32[0] = v78 + v78;
      v79 = 0;
      v80 = 0;
      v81 = 0;
      v82 = 0;
      do
      {
        v83 = (CBuilding *)*((_DWORD *)&CoorsMin.x + v79);
        ++v80;
        m_pMat = v83->m_pMat;
        p_tx = &m_pMat->tx;
        if ( !m_pMat )
          p_tx = &v83->m_transform.m_translate.x;
        v3.n64_f32[0] = sqrtf(
                          (float)((float)((float)(*p_tx - v75) * (float)(*p_tx - v75))
                                + (float)((float)(p_tx[1] - v76) * (float)(p_tx[1] - v76)))
                        + (float)((float)(p_tx[2] - v74) * (float)(p_tx[2] - v74)));
        v86 = v3.n64_f32[0] < v2.n64_f32[0];
        v2.n64_u64[0] = vmin_f32(v3, v2).n64_u64[0];
        if ( v86 )
        {
          v81 = v83;
          v82 = v83;
        }
        v79 = v80;
      }
      while ( v80 < SLOWORD(vecPosition.x) );
      if ( !v81 )
        return 0;
      CBuilding::ReplaceWithNewModel(v82, v77);
      if ( v82->m_iplIndex )
        return 0;
      v87 = 0;
      v88 = 0;
      do
      {
        v89 = 0;
        pBuilding = CTheScripts::BuildingSwapArray[v87].pBuilding;
        if ( pBuilding != v82 )
          v89 = 1;
        v88 += v89;
        v87 = v88;
      }
      while ( v88 <= 0x18u && v89 );
      if ( pBuilding != v82 )
      {
        v91 = 0;
        v92 = 0;
        do
        {
          v93 = CTheScripts::BuildingSwapArray[v91].pBuilding;
          v94 = (int)v93;
          if ( v93 )
            v94 = 1;
          v92 += v94;
          v91 = v92;
        }
        while ( v92 <= 0x18u && v94 );
        if ( !v93 )
        {
          v10 = 0;
          CTheScripts::BuildingSwapArray[v92].pBuilding = v82;
          *(_QWORD *)&CTheScripts::BuildingSwapArray[v92].NewModelIndex = v77;
          return v10;
        }
        return 0;
      }
      v157 = &CTheScripts::BuildingSwapArray[v88];
      OldModelIndex = v157->OldModelIndex;
      p_OldModelIndex = &v157->OldModelIndex;
      if ( OldModelIndex != (_DWORD)v77 )
      {
        CTheScripts::BuildingSwapArray[v88].NewModelIndex = v77;
        return 0;
      }
      v10 = 0;
      CTheScripts::BuildingSwapArray[v88].pBuilding = 0;
      CTheScripts::BuildingSwapArray[v88].NewModelIndex = -1;
      *p_OldModelIndex = -1;
      return v10;
    case 951:
      CRunningScript::CollectParameters(this, 1);
      v10 = 0;
      CWorld::bProcessCutsceneOnly = ScriptParams[0] == 0;
      return v10;
    case 954:
      CRunningScript::CollectParameters(this, 6);
      v2.n64_u32[0] = ScriptParams[0];
      v5.n64_u32[0] = ScriptParams[3];
      v3.n64_u32[0] = ScriptParams[1];
      v6.n64_u32[0] = ScriptParams[4];
      v4.n64_u32[0] = ScriptParams[2];
      v7.n64_u32[0] = ScriptParams[5];
      CWorld::ClearCarsFromArea(
        vmin_f32(v2, v5).n64_f32[0],
        vmin_f32(v3, v6).n64_f32[0],
        vmin_f32(v4, v7).n64_f32[0],
        vmax_f32(v2, v5).n64_f32[0],
        vmax_f32(v3, v6).n64_f32[0],
        vmax_f32(v4, v7).n64_f32[0]);
      return 0;
    case 956:
      CRunningScript::CollectParameters(this, 4);
      v95 = *(float *)&ScriptParams[2];
      v96 = *(float *)ScriptParams;
      v97 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v95 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      vecPosition.y = v97;
      vecPosition.x = v96;
      vecPosition.z = v95;
      v98 = ScriptParams[3];
      CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      PCPointer = this->PCPointer;
      v100 = &CTheScripts::UsedObjectArray[394].Name[20];
      v101 = -1;
      do
      {
        ++v101;
        v102 = v100 + 24;
        if ( v101 > 0xF )
          break;
        v139 = v100[12] == 0;
        v100 += 24;
      }
      while ( !v139 );
      *((_BYTE *)v102 - 12) = 1;
      *((RwReal *)v102 - 1) = v96;
      *(RwReal *)v102 = v97;
      *((float *)v102 + 1) = v95;
      v102[2] = v98;
      v103 = *((unsigned __int16 *)v102 - 5);
      *(v102 - 2) = (char *)this + (_DWORD)PCPointer + v101;
      v104 = 1;
      if ( v103 < 0xFFFE )
        v104 = v103 + 1;
      *((_WORD *)v102 - 5) = v104;
      ScriptParams[0] = v101 | (v104 << 16);
      goto LABEL_202;
    case 957:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] == -1
        || CTheScripts::ScriptSphereArray[LOWORD(ScriptParams[0])].ReferenceIndex != HIWORD(ScriptParams[0]) )
      {
        return 0;
      }
      v10 = 0;
      v105 = LOWORD(ScriptParams[0]);
      if ( CTheScripts::ScriptSphereArray[LOWORD(ScriptParams[0])].bUsed )
      {
        CTheScripts::ScriptSphereArray[LOWORD(ScriptParams[0])].bUsed = 0;
        CTheScripts::ScriptSphereArray[v105].UniqueId = 0;
      }
      return v10;
    case 959:
      CRunningScript::CollectParameters(this, 2);
      m_pPlayerData = CWorld::Players[ScriptParams[0]].pPed->m_pPlayerData;
      if ( m_pPlayerData )
        m_Wanted = m_pPlayerData->m_Wanted;
      else
        m_Wanted = 0;
      v108 = *((_BYTE *)&dword_1C + (_DWORD)m_Wanted + 2);
      if ( ScriptParams[1] )
      {
        *((_BYTE *)&dword_1C + (_DWORD)m_Wanted + 2) = v108 | 4;
        CWorld::StopAllLawEnforcersInTheirTracks();
      }
      else
      {
        *((_BYTE *)&dword_1C + (_DWORD)m_Wanted + 2) = v108 & 0xFB;
      }
      return 0;
    case 960:
      CRunningScript::CollectParameters(this, 1);
      v109 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( v109[1157] << 31 )
        v110 = *((_DWORD *)v109 + 356);
      else
        v110 = 0;
      ScriptParams[0] = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                                        * ((signed int)(v110
                                                                      - (unsigned int)CPools::ms_pVehiclePool->m_aStorage) >> 2)] | (-422239488 * ((signed int)(v110 - (unsigned int)CPools::ms_pVehiclePool->m_aStorage) >> 2));
      goto LABEL_202;
    case 963:
      IndexOfGlobalVariable = CRunningScript::GetIndexOfGlobalVariable(this);
      CRunningScript::CollectParameters(this, 1);
      v112 = ScriptParams[0];
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      CText::Get(&TheText, pStringToFill);
      COnscreenTimer::AddClock(&CUserDisplay::OnscnTimer, IndexOfGlobalVariable, pStringToFill, v112 != 0);
      return 0;
    case 964:
      v113 = CRunningScript::GetIndexOfGlobalVariable(this);
      CRunningScript::CollectParameters(this, 1);
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      CText::Get(&TheText, pStringToFill);
      v10 = 0;
      COnscreenTimer::AddCounter(&CUserDisplay::OnscnTimer, v113, ScriptParams[0], pStringToFill, 0);
      return v10;
    case 965:
      CRunningScript::CollectParameters(this, 4);
      if ( CCarCtrl::NumRandomCars > 44 )
        return 0;
      v10 = 0;
      v114 = CLoadedCarGroup::PickRandomCar(&CPopulation::m_AppropriateLoadedCars, 0, 1);
      if ( v114 != -1 )
      {
        switch ( *(_DWORD *)&CModelInfo::ms_modelInfoPtrs[v114][1].m_modelName[20] )
        {
          case 1:
            v115 = (char *)CVehicle::operator new(0x9B0u);
            CMonsterTruck::CMonsterTruck((CMonsterTruck *)v115, v114, 1u);
            break;
          case 2:
            v115 = (char *)CVehicle::operator new(0x9D0u);
            CQuadBike::CQuadBike((CQuadBike *)v115, v114, 1u);
            break;
          case 3:
            v115 = (char *)CVehicle::operator new(0xA2Cu);
            CHeli::CHeli((CHeli *)v115, v114, 1u);
            break;
          case 4:
            v115 = (char *)CVehicle::operator new(0xA18u);
            CPlane::CPlane((CPlane *)v115, v114, 1u);
            break;
          case 9:
            v115 = (char *)CVehicle::operator new(0x828u);
            CBike::CBike((CBike *)v115, v114, 1u);
            goto LABEL_274;
          case 0xA:
            v115 = (char *)CVehicle::operator new(0x84Cu);
            CBmx::CBmx((CBmx *)v115, v114, 1u);
LABEL_274:
            v115[1576] |= 0x10u;
            break;
          case 0xB:
            v115 = (char *)CVehicle::operator new(0xA08u);
            CTrailer::CTrailer((CTrailer *)v115, v114, 1u);
            break;
          default:
            v115 = (char *)CVehicle::operator new(0x99Cu);
            CAutomobile::CAutomobile((CAutomobile *)v115, v114, 1u, 1u);
            break;
        }
        v160 = *(_QWORD *)ScriptParams;
        v161 = *(float *)&ScriptParams[2];
        v162 = (*(float (__fastcall **)(char *))(*(_DWORD *)v115 + 216))(v115);
        *(_QWORD *)&vecPosition.x = v160;
        v163 = v161 + v162;
        vecPosition.z = v161 + v162;
        v164 = *((_DWORD *)v115 + 5);
        if ( v164 )
        {
          *(_DWORD *)(v164 + 48) = v160;
          *(_DWORD *)(*((_DWORD *)v115 + 5) + 52) = HIDWORD(v160);
          v165 = (float *)(*((_DWORD *)v115 + 5) + 56);
        }
        else
        {
          v165 = (float *)(v115 + 12);
          *(_QWORD *)(v115 + 4) = v160;
        }
        *v165 = v163;
        v166 = (CMatrix *)*((_DWORD *)v115 + 5);
        if ( v166 )
          CMatrix::SetRotateZOnly(v166, (float)(*(float *)&ScriptParams[3] * 3.1416) / 180.0);
        else
          *((float *)v115 + 4) = (float)(*(float *)&ScriptParams[3] * 3.1416) / 180.0;
        CTheScripts::ClearSpaceForMissionEntity(&vecPosition, (CEntity *)v115);
        v167 = *((_DWORD *)v115 + 267);
        v115[58] = v115[58] & 7 | 0x20;
        *((_DWORD *)v115 + 267) = v167 & 0xFDFFFFF7 | 0x2000000;
        CCarCtrl::JoinCarWithRoadSystem((CVehicle *)v115);
        v10 = 0;
        if ( (unsigned __int8)(v115[958] - 57) >= 2u )
          v115[958] = 0;
        v115[957] = 0;
        v115[959] = 0;
        *((_DWORD *)v115 + 243) = 1091567616;
        v115[980] = 9;
        *(_WORD *)(v115 + 955) = 0;
        *((_DWORD *)v115 + 267) &= ~0x10u;
        CWorld::Add((CEntity *)v115);
      }
      return v10;
    case 967:
      CRunningScript::CollectParameters(this, 1);
      v116 = *(float *)ScriptParams;
      FindPlayerWanted(-1)->m_fMultiplier = v116;
      return 0;
    case 968:
      CCamera::SetCameraDirectlyInFrontForFollowPed_CamOnAString(&TheCamera);
      return 0;
    case 969:
      CRunningScript::CollectParameters(this, 1);
      LOWORD(v73) = *(_WORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1070] & 1;
      goto LABEL_187;
    case 970:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v73 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
LABEL_186:
        LOBYTE(v73) = v73 != 0;
      }
      else
      {
LABEL_174:
        LOBYTE(v73) = 0;
      }
LABEL_187:
      v122 = this;
LABEL_188:
      CRunningScript::UpdateCompareFlag(v122, (Bool8)v73);
      return 0;
    case 971:
      CRunningScript::CollectParameters(this, 3);
      v117 = *(float *)ScriptParams;
      v118 = *(float *)&ScriptParams[1];
      v119 = *(float *)&ScriptParams[2];
      CTimer::Stop();
      CoorsMin.x = v117;
      CoorsMin.y = v118;
      CoorsMin.z = v119;
      CStreaming::LoadScene(&CoorsMin);
      CTimer::Update();
      return 0;
    case 972:
      CRunningScript::CollectParameters(this, 3);
      v10 = 0;
      CStuckCarCheck::AddCarToCheck(
        &CTheScripts::StuckCars,
        ScriptParams[0],
        *(float *)&ScriptParams[1],
        ScriptParams[2],
        0,
        0,
        0,
        0,
        0);
      return v10;
    case 973:
      CRunningScript::CollectParameters(this, 1);
      CStuckCarCheck::RemoveCarFromCheck(&CTheScripts::StuckCars, ScriptParams[0]);
      return 0;
    case 974:
      CRunningScript::CollectParameters(this, 1);
      HasCarBeenStuckForAWhile = (uint8 *)CStuckCarCheck::HasCarBeenStuckForAWhile(
                                            &CTheScripts::StuckCars,
                                            ScriptParams[0]);
      goto LABEL_185;
    case 975:
      CRunningScript::CollectParameters(this, 2);
      CAudioEngine::PreloadMissionAudio(&AudioEngine, LOBYTE(ScriptParams[0]) - 1, ScriptParams[1]);
      return 0;
    case 976:
      CRunningScript::CollectParameters(this, 1);
      MissionAudioLoadingStatus = CAudioEngine::GetMissionAudioLoadingStatus(&AudioEngine, LOBYTE(ScriptParams[0]) - 1);
      LOBYTE(v73) = MissionAudioLoadingStatus;
      if ( MissionAudioLoadingStatus != 1 )
        LOBYTE(v73) = 0;
      goto LABEL_187;
    case 977:
      CRunningScript::CollectParameters(this, 1);
      CAudioEngine::PlayLoadedMissionAudio(&AudioEngine, LOBYTE(ScriptParams[0]) - 1);
      return 0;
    case 978:
      CRunningScript::CollectParameters(this, 1);
      HasCarBeenStuckForAWhile = (uint8 *)CAudioEngine::IsMissionAudioSampleFinished(
                                            &AudioEngine,
                                            LOBYTE(ScriptParams[0]) - 1);
LABEL_185:
      v73 = HasCarBeenStuckForAWhile;
      goto LABEL_186;
    case 979:
      CRunningScript::CollectParameters(this, 3);
      v123 = *(float *)&ScriptParams[2];
      v124 = (CPathFind *)ScriptParams[0];
      v125 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v123 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      *(_QWORD *)&v179.x = __PAIR64__(LODWORD(v123), v125);
      NodeOrientationForCarPlacement = 0.0;
      v179.z = 0.0;
      NodeClosestToCoors = CPathFind::FindNodeClosestToCoors(
                             (CNodeAddress *)&ThePaths,
                             v124,
                             v179,
                             1000000.0,
                             0.0,
                             1,
                             0,
                             0,
                             0,
                             v168);
      CPathFind::FindNodeCoorsForScript(&CoorsMin, &ThePaths, (CNodeAddress)NodeClosestToCoors, (bool *)&TextLabel[2]);
      if ( TextLabel[2] )
      {
        *(CVector *)ScriptParams = CoorsMin;
        NodeOrientationForCarPlacement = CPathFind::FindNodeOrientationForCarPlacement(
                                           &ThePaths,
                                           (CNodeAddress)NodeClosestToCoors);
        v128 = 1;
      }
      else
      {
        v128 = 0;
        ScriptParams[0] = 0;
        ScriptParams[1] = 0;
        ScriptParams[2] = 0;
      }
      *(float *)&ScriptParams[3] = NodeOrientationForCarPlacement;
      CRunningScript::StoreParameters(this, 4);
      v122 = this;
      LOBYTE(v73) = v128;
      goto LABEL_188;
    case 981:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v129 = CText::Get(&TheText, pStringToFill);
      CMessages::ClearThisPrint(v129);
      return 0;
    case 982:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v130 = CText::Get(&TheText, pStringToFill);
      CMessages::ClearThisBigPrint(v130);
      return 0;
    case 983:
      CRunningScript::CollectParameters(this, 4);
      CoorsMin = *(CVector *)&ScriptParams[1];
      CAudioEngine::SetMissionAudioPosition(&AudioEngine, LOBYTE(ScriptParams[0]) - 1, &CoorsMin);
      return 0;
    case 984:
      if ( !FindPlayerPed(-1) )
        return 0;
      v10 = 0;
      if ( !(*((unsigned __int8 *)&FindPlayerPed(-1)->m_nPedFlags + 1) << 31) )
      {
        MobileMenu::InitForSave(&gMobileMenu);
        PlayerPed = FindPlayerPed(-1);
        PlayerPed->m_vecMoveSpeed.x = 0.0;
        PlayerPed->m_vecMoveSpeed.y = 0.0;
        PlayerPed->m_vecMoveSpeed.z = 0.0;
        v132 = FindPlayerPed(-1);
        v132->m_vecTurnSpeed.x = 0.0;
        v132->m_vecTurnSpeed.y = 0.0;
        v132->m_vecTurnSpeed.z = 0.0;
      }
      return v10;
    case 985:
      v10 = 0;
      v19 = ((int)gMobileMenu.pendingScreen | gMobileMenu.screenStack.numEntries) == 0;
LABEL_200:
      CRunningScript::UpdateCompareFlag(this, v19);
      return v10;
    case 988:
      CRunningScript::CollectParameters(this, 1);
      CPickups::GetActualPickupIndex(ScriptParams[0]);
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CRadar::GetActualBlipArrayIndex(ParameterWithoutIncreasingPC);
      v134 = CRadar::SetEntityBlip(BLIPTYPE_PICKUP, ScriptParams[0], 6u, BLIPDISPLAY_BOTH, this->ScriptName);
      CRadar::ChangeBlipScale(v134, 3);
      ScriptParams[0] = v134;
LABEL_202:
      CRunningScript::StoreParameters(this, 1);
      return 0;
    case 990:
      CRunningScript::CollectParameters(this, 1);
      v10 = 0;
      CPopulation::PedDensityMultiplier = *(float *)ScriptParams;
      return v10;
    case 992:
      CRunningScript::CollectParameters(this, 1);
      v10 = 0;
      v135 = ScriptParams[0];
      if ( ScriptParams[0] )
        v135 = 1;
      CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextBeforeFade = v135;
      return v10;
    case 995:
      CRunningScript::CollectParameters(this, 1);
      v10 = 0;
      v136 = ScriptParams[0];
      if ( ScriptParams[0] )
        v136 = 1;
      CTheScripts::IntroRectangles[CTheScripts::NumberOfIntroRectanglesThisFrame].ScriptRectBeforeFade = v136;
      return v10;
    case 996:
      CRunningScript::CollectParameters(this, 1);
      v10 = 0;
      v137 = ScriptParams[0];
      if ( ScriptParams[0] )
        v137 = 1;
      CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextRightJustify = v137;
      return v10;
    case 997:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      if ( !strcmp("HELP_42", (const char *)pStringToFill) )
      {
        v10 = 0;
        CPad::GetPad(0)->bSetSteeringMode = 1;
      }
      else
      {
        v138 = CText::Get(&TheText, pStringToFill);
        v139 = CTheScripts::bDisplayNonMiniGameHelpMessages == 0;
        if ( !CTheScripts::bDisplayNonMiniGameHelpMessages )
          v139 = this->bIsThisAMiniGameScript == 0;
        if ( !v139 || !CTheScripts::bMiniGameInProgress )
        {
          CHud::SetHelpMessage(pStringToFill, v138, 0, 0, 0, 0);
          if ( CTheScripts::bAddNextMessageToPreviousBriefs )
            CMessages::AddToPreviousBriefArray(pStringToFill, v138, -1, -1, -1, -1, -1, -1, 0);
        }
        v10 = 0;
        CTheScripts::bAddNextMessageToPreviousBriefs = 1;
      }
      return v10;
    case 998:
      if ( CTheScripts::pActiveScripts )
      {
        ScriptName = CTheScripts::pActiveScripts->ScriptName;
        if ( !strcmp((const char *)CTheScripts::pActiveScripts->ScriptName, "strap3") )
          return 0;
        v141 = (CWidgetHelpText *)CTouchInterface::m_pWidgets[162];
        if ( CTouchInterface::m_pWidgets[162] )
        {
          if ( !strcmp((const char *)ScriptName, "heist9") )
          {
            v155 = CText::Get(&TheText, "HM9_49");
            if ( CWidgetHelpText::IsStringQueued(v141, v155) )
              return 0;
            v156 = CText::Get(&TheText, "HM9_49X");
            if ( CWidgetHelpText::IsStringQueued(v141, v156) )
              return 0;
          }
        }
      }
      v10 = 0;
      CHud::SetHelpMessage(0, 0, 1, 0, 0, 0);
      return v10;
    case 999:
      CRunningScript::CollectParameters(this, 1);
      v10 = 0;
      CHud::m_ItemToFlash = ScriptParams[0];
      return v10;
    default:
      return -1;
  }
}
// 3487A4: variable 'v3' is possibly undefined
// 3487A4: variable 'v4' is possibly undefined
// 3487C4: variable 'v6' is possibly undefined
// 3487BC: variable 'v5' is possibly undefined
// 3487BC: variable 'v8' is possibly undefined
// 349230: variable 'v2' is possibly undefined
// 34932A: variable 'v7' is possibly undefined
// 3499EC: variable 'v168' is possibly undefined
// 1C: using guessed type int dword_1C;
// FC: using guessed type int elf_hash_bucket[16411];
// 349508: using guessed type void *off_349508;
// 67664C: using guessed type int *CCarCtrl::NumRandomCars;
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 6782D8: using guessed type char *CTheScripts::bDisplayNonMiniGameHelpMessages[3];
// 678534: using guessed type int *CPools::ms_pVehiclePool;
// 6796D8: using guessed type script_sphere_struct (*CTheScripts::ScriptSphereArray)[16];
// 679BDC: using guessed type CLoadedCarGroup *CPopulation::m_AppropriateLoadedCars;

//----- (0034A2F0) --------------------------------------------------------
void __fastcall CTheScripts::AddToBuildingSwapArray(CBuilding *pBildng, Int32 OldModIndx, Int32 NewModIndx)
{
  int v3; // lr
  unsigned __int16 v4; // r3
  CBuilding *pBuilding; // r5
  int v6; // lr
  unsigned __int16 v7; // r3
  CBuilding *v8; // r5
  __int16 v9; // r4
  building_swap_struct *v10; // r0
  building_swap_struct *v11; // r1
  Int32 *p_OldModelIndex; // r1
  Int32 OldModelIndex; // t1

  if ( !pBildng->m_iplIndex )
  {
    v3 = 0;
    v4 = 0;
    do
    {
      pBuilding = CTheScripts::BuildingSwapArray[v3].pBuilding;
      v4 += pBuilding != pBildng;
      v3 = v4;
    }
    while ( v4 <= 0x18u && pBuilding != pBildng );
    if ( pBuilding == pBildng )
    {
      v11 = &CTheScripts::BuildingSwapArray[v4];
      OldModelIndex = v11->OldModelIndex;
      p_OldModelIndex = &v11->OldModelIndex;
      if ( OldModelIndex == NewModIndx )
      {
        CTheScripts::BuildingSwapArray[v4].pBuilding = 0;
        CTheScripts::BuildingSwapArray[v4].NewModelIndex = -1;
        *p_OldModelIndex = -1;
      }
      else
      {
        CTheScripts::BuildingSwapArray[v4].NewModelIndex = NewModIndx;
      }
    }
    else
    {
      v6 = 0;
      v7 = 0;
      do
      {
        v8 = CTheScripts::BuildingSwapArray[v6].pBuilding;
        v9 = (__int16)v8;
        if ( v8 )
          v9 = 1;
        v7 += v9;
        v6 = v7;
      }
      while ( v7 <= 0x18u && v8 );
      if ( !v8 )
      {
        CTheScripts::BuildingSwapArray[v7].pBuilding = pBildng;
        v10 = &CTheScripts::BuildingSwapArray[v7];
        v10->NewModelIndex = NewModIndx;
        v10->OldModelIndex = OldModIndx;
      }
    }
  }
}

//----- (0034A3D0) --------------------------------------------------------
int32 __fastcall CTheScripts::GetActualScriptThingIndex(int32 Index, UInt8 ArrayToUse)
{
  unsigned int v2; // r5
  int32 v3; // r4
  int bUsed; // r0
  script_effect_struct (**v5)[32]; // r0
  int32 result; // r0
  char (**v7)[8]; // r0
  CDecisionMakerTypes *v8; // r0
  CDecisionMakerTypes *v9; // r0
  CDecisionMakerTypes *v10; // r0
  CDecisionMakerTypes *v11; // r0

  if ( Index == -1 )
    return -1;
  v2 = HIWORD(Index);
  v3 = (unsigned __int16)Index;
  switch ( ArrayToUse )
  {
    case 0u:
      if ( v2 != CTheScripts::ScriptSphereArray[(unsigned __int16)Index].ReferenceIndex )
        return -1;
      bUsed = CTheScripts::ScriptSphereArray[(unsigned __int16)Index].bUsed;
      goto LABEL_29;
    case 1u:
      if ( v2 != CTheScripts::ScriptEffectSystemArray[(unsigned __int16)Index].ReferenceIndex )
        return -1;
      v5 = &CTheScripts::ScriptEffectSystemArray;
      goto LABEL_11;
    case 2u:
      if ( v2 != CTheScripts::ScriptSearchLightArray[(unsigned __int16)Index].ReferenceIndex )
        return -1;
      bUsed = CTheScripts::ScriptSearchLightArray[(unsigned __int16)Index].bUsed;
      goto LABEL_29;
    case 3u:
      if ( v2 != CTheScripts::ScriptCheckpointArray[(unsigned __int16)Index].ReferenceIndex )
        return -1;
      v5 = (script_effect_struct (**)[32])&CTheScripts::ScriptCheckpointArray;
LABEL_11:
      bUsed = (**v5)[v3].bUsed;
      goto LABEL_29;
    case 4u:
      if ( v2 != CTheScripts::ScriptSequenceTaskArray[(unsigned __int16)Index].ReferenceIndex )
        return -1;
      bUsed = CTheScripts::ScriptSequenceTaskArray[(unsigned __int16)Index].bUsed;
      goto LABEL_29;
    case 5u:
      if ( v2 != gFireManager.m_Fires[(unsigned __int16)Index].ScriptReferenceIndex )
        return -1;
      if ( (*(_BYTE *)&gFireManager.m_Fires[(unsigned __int16)Index] & 2) == 0 )
        return -1;
      return v3;
    case 6u:
      if ( v2 != CScripted2dEffects::ScriptReferenceIndex[(unsigned __int16)Index] )
        return -1;
      v7 = (char (**)[8])&CScripted2dEffects::ms_activated;
      goto LABEL_28;
    case 7u:
      v8 = CDecisionMakerTypes::m_pPedDecisionTypes;
      if ( !CDecisionMakerTypes::m_pPedDecisionTypes )
      {
        v9 = (CDecisionMakerTypes *)operator new(0xF1C0u);
        CDecisionMakerTypes::CDecisionMakerTypes(v9);
        CDecisionMakerTypes::m_pPedDecisionTypes = v8;
      }
      if ( v2 != CDecisionMakerTypes::ScriptReferenceIndex[v3] )
        return -1;
      if ( !v8 )
      {
        v10 = (CDecisionMakerTypes *)operator new(0xF1C0u);
        CDecisionMakerTypes::CDecisionMakerTypes(v10);
        CDecisionMakerTypes::m_pPedDecisionTypes = v11;
      }
      v7 = (char (**)[8])&CDecisionMakerTypes::m_bIsActive;
      goto LABEL_28;
    case 8u:
      if ( v2 != CPedGroups::ScriptReferenceIndex[(unsigned __int16)Index] )
        return -1;
      v7 = &CPedGroups::ms_activeGroups;
LABEL_28:
      bUsed = (unsigned __int8)(**v7)[v3];
LABEL_29:
      if ( !bUsed )
        v3 = -1;
      result = v3;
      break;
    default:
      return -1;
  }
  return result;
}
// 34A4DE: variable 'v8' is possibly undefined
// 34A502: variable 'v11' is possibly undefined
// 6760D4: using guessed type char (*CScripted2dEffects::ms_activated)[64];
// 677350: using guessed type char (*CPedGroups::ms_activeGroups)[8];
// 67874C: using guessed type script_checkpoint_struct (*CTheScripts::ScriptCheckpointArray)[20];
// 6793D0: using guessed type char (*CDecisionMakerTypes::m_bIsActive)[20];
// 67982C: using guessed type script_effect_struct (*CTheScripts::ScriptEffectSystemArray)[32];

//----- (0034A588) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
unsigned int __fastcall CTheScripts::AddScriptSphere(UInt32 SphereId, CVector CentreCoords, float Radius)
{
  unsigned int v3; // r12
  unsigned __int8 *v4; // r4
  unsigned __int8 *v5; // lr
  bool v6; // zf
  int v7; // r4
  UInt32 v8; // r0
  unsigned int v9; // r5
  unsigned int result; // r0

  v3 = -1;
  v4 = &CTheScripts::UsedObjectArray[394].Name[20];
  do
  {
    ++v3;
    v5 = v4 + 24;
    if ( v3 > 0xF )
      break;
    v6 = v4[12] == 0;
    v4 += 24;
  }
  while ( !v6 );
  v7 = 1;
  v8 = SphereId + v3;
  *(v5 - 12) = 1;
  *((float *)v5 + 2) = Radius;
  v9 = *((unsigned __int16 *)v5 - 5);
  *((_QWORD *)v5 - 1) = *(_QWORD *)((char *)&CentreCoords - 4);
  *(_QWORD *)v5 = *(_QWORD *)&CentreCoords.y;
  if ( v9 < 0xFFFE )
    v7 = v9 + 1;
  result = v3 | (v7 << 16);
  *((_WORD *)v5 - 5) = v7;
  return result;
}
// 34A588: variables would overlap: r0.4 and r0.8
// 34A588: variables would overlap: r2.8 and r1.12
// 34A588: variables would overlap: r2.8 and r0.8

//----- (0034A5E4) --------------------------------------------------------
void __fastcall CTheScripts::RemoveScriptSphere(int32 ScriptSphereIndex)
{
  int v1; // r1
  int v2; // r0

  if ( ScriptSphereIndex != -1 )
  {
    v1 = (unsigned __int16)ScriptSphereIndex;
    if ( CTheScripts::ScriptSphereArray[(unsigned __int16)ScriptSphereIndex].ReferenceIndex == HIWORD(ScriptSphereIndex) )
    {
      v2 = (unsigned __int16)ScriptSphereIndex;
      if ( CTheScripts::ScriptSphereArray[v1].bUsed )
      {
        CTheScripts::ScriptSphereArray[v2].bUsed = 0;
        CTheScripts::ScriptSphereArray[v2].UniqueId = 0;
      }
    }
  }
}

//----- (0034A638) --------------------------------------------------------
int32 __fastcall CTheScripts::GetUniqueScriptThingIndex(int32 ArrayIndex, UInt8 ArrayToUse)
{
  __int16 (**v4)[8]; // r0
  CDecisionMakerTypes *v5; // r0
  CDecisionMakerTypes *v6; // r0

  if ( ArrayToUse == 7 )
  {
    if ( !CDecisionMakerTypes::m_pPedDecisionTypes )
    {
      v5 = (CDecisionMakerTypes *)operator new(0xF1C0u);
      CDecisionMakerTypes::CDecisionMakerTypes(v5);
      CDecisionMakerTypes::m_pPedDecisionTypes = v6;
    }
    v4 = (__int16 (**)[8])&CDecisionMakerTypes::ScriptReferenceIndex;
  }
  else
  {
    if ( ArrayToUse != 8 )
      return -1;
    v4 = &CPedGroups::ScriptReferenceIndex;
  }
  return ArrayIndex | ((unsigned __int16)(**v4)[ArrayIndex] << 16);
}
// 34A66E: variable 'v6' is possibly undefined
// 676BF4: using guessed type __int16 (*CDecisionMakerTypes::ScriptReferenceIndex)[20];
// 677A44: using guessed type __int16 (*CPedGroups::ScriptReferenceIndex)[8];

//----- (0034A694) --------------------------------------------------------
int32 __fastcall CTheScripts::GetNewUniqueScriptThingIndex(int32 ArrayIndex, UInt8 ArrayToUse)
{
  int v3; // r1
  script_sphere_struct (**v4)[16]; // r0
  int32 result; // r0
  script_effect_struct (**v6)[32]; // r0
  int v7; // r2
  script_searchlight_struct *v8; // r0
  unsigned int ReferenceIndex; // r1
  int v10; // r0
  int v11; // r3
  script_unique_thing_struct *v12; // r1
  unsigned int v13; // r2
  unsigned int v14; // r1
  int v15; // r2
  __int16 (**v16)[8]; // r0
  CDecisionMakerTypes *v17; // r0
  CDecisionMakerTypes *v18; // r0
  int v19; // r1
  unsigned int v20; // r3
  __int16 (*v21)[8]; // r0
  int v22; // r2
  unsigned int v23; // r1
  CDecisionMakerTypes *v24; // r0
  CDecisionMakerTypes *v25; // r0

  switch ( ArrayToUse )
  {
    case 0u:
      v3 = 3 * ArrayIndex;
      v4 = &CTheScripts::ScriptSphereArray;
      goto LABEL_14;
    case 1u:
      v6 = &CTheScripts::ScriptEffectSystemArray;
      goto LABEL_9;
    case 2u:
      v7 = 1;
      v8 = &CTheScripts::ScriptSearchLightArray[ArrayIndex];
      ReferenceIndex = v8->ReferenceIndex;
      if ( ReferenceIndex < 0xFFFE )
        v7 = ReferenceIndex + 1;
      v8->ReferenceIndex = v7;
      return ArrayIndex | (v7 << 16);
    case 3u:
      v6 = (script_effect_struct (**)[32])&CTheScripts::ScriptCheckpointArray;
LABEL_9:
      v10 = (int)&(**v6)[ArrayIndex];
      goto LABEL_15;
    case 4u:
      v11 = 1;
      v12 = &CTheScripts::ScriptSequenceTaskArray[ArrayIndex];
      v13 = v12->ReferenceIndex;
      v12->bUsed = 1;
      if ( v13 < 0xFFFE )
        v11 = v13 + 1;
      result = ArrayIndex | (v11 << 16);
      v12->ReferenceIndex = v11;
      return result;
    case 5u:
      v3 = 5 * ArrayIndex;
      v4 = (script_sphere_struct (**)[16])&gFireManager_ptr;
LABEL_14:
      v10 = (int)*v4 + 8 * v3;
LABEL_15:
      v14 = *(unsigned __int16 *)(v10 + 2);
      v15 = 1;
      if ( v14 < 0xFFFE )
        v15 = v14 + 1;
      *(_WORD *)(v10 + 2) = v15;
      return ArrayIndex | (v15 << 16);
    case 6u:
      v16 = (__int16 (**)[8])&CScripted2dEffects::ScriptReferenceIndex;
      goto LABEL_26;
    case 7u:
      v17 = CDecisionMakerTypes::m_pPedDecisionTypes;
      if ( !CDecisionMakerTypes::m_pPedDecisionTypes )
      {
        v18 = (CDecisionMakerTypes *)operator new(0xF1C0u);
        CDecisionMakerTypes::CDecisionMakerTypes(v18);
        CDecisionMakerTypes::m_pPedDecisionTypes = v17;
      }
      v19 = 1;
      v20 = CDecisionMakerTypes::ScriptReferenceIndex[ArrayIndex];
      if ( v20 < 0xFFFE )
        v19 = v20 + 1;
      CDecisionMakerTypes::ScriptReferenceIndex[ArrayIndex] = v19;
      if ( v17 )
        return ArrayIndex | (v19 << 16);
      v24 = (CDecisionMakerTypes *)operator new(0xF1C0u);
      CDecisionMakerTypes::CDecisionMakerTypes(v24);
      CDecisionMakerTypes::m_pPedDecisionTypes = v25;
      return ArrayIndex | (CDecisionMakerTypes::ScriptReferenceIndex[ArrayIndex] << 16);
    case 8u:
      v16 = &CPedGroups::ScriptReferenceIndex;
LABEL_26:
      v21 = *v16;
      v22 = 1;
      v23 = (unsigned __int16)(*v21)[ArrayIndex];
      if ( v23 < 0xFFFE )
        v22 = v23 + 1;
      (*v21)[ArrayIndex] = v22;
      result = ArrayIndex | (v22 << 16);
      break;
    default:
      result = -1;
      break;
  }
  return result;
}
// 34A754: variable 'v17' is possibly undefined
// 34A7AA: variable 'v25' is possibly undefined
// 676438: using guessed type CFireManager *gFireManager_ptr;
// 676BF4: using guessed type __int16 (*CDecisionMakerTypes::ScriptReferenceIndex)[20];
// 677458: using guessed type __int16 (*CScripted2dEffects::ScriptReferenceIndex)[64];
// 677A44: using guessed type __int16 (*CPedGroups::ScriptReferenceIndex)[8];
// 67874C: using guessed type script_checkpoint_struct (*CTheScripts::ScriptCheckpointArray)[20];
// 6796D8: using guessed type script_sphere_struct (*CTheScripts::ScriptSphereArray)[16];
// 67982C: using guessed type script_effect_struct (*CTheScripts::ScriptEffectSystemArray)[32];

//----- (0034A7EC) --------------------------------------------------------
void CTheScripts::DrawScriptSpheres()
{
  int i; // r8

  for ( i = 0; i != 16; ++i )
  {
    if ( CTheScripts::ScriptSphereArray[i].bUsed )
      C3dMarkers::PlaceMarkerSet(
        CTheScripts::ScriptSphereArray[i].UniqueId,
        1u,
        &CTheScripts::ScriptSphereArray[i].Centre,
        CTheScripts::ScriptSphereArray[i].Radius,
        COLMISSIONMARKER._anon_0._anon_0.red,
        COLMISSIONMARKER._anon_0._anon_0.green,
        COLMISSIONMARKER._anon_0._anon_0.blue,
        0xE4u,
        0x800u,
        0.1,
        0);
  }
}
// 0: using guessed type int dword_0;

//----- (0034A86C) --------------------------------------------------------
void CTheScripts::UndoBuildingSwaps()
{
  int i; // r4
  CBuilding *pBuilding; // r0
  building_swap_struct *v2; // r5

  for ( i = 0; i != 25; ++i )
  {
    pBuilding = CTheScripts::BuildingSwapArray[i].pBuilding;
    if ( pBuilding )
    {
      v2 = &CTheScripts::BuildingSwapArray[i];
      CBuilding::ReplaceWithNewModel(pBuilding, CTheScripts::BuildingSwapArray[i].OldModelIndex);
      CTheScripts::BuildingSwapArray[i].pBuilding = 0;
      v2->NewModelIndex = -1;
      v2->OldModelIndex = -1;
    }
  }
}

//----- (0034A8B8) --------------------------------------------------------
void CTheScripts::UndoEntityInvisibilitySettings()
{
  int i; // r3
  CEntity *pEntity; // r0

  for ( i = 0; i != 20; ++i )
  {
    pEntity = CTheScripts::InvisibilitySettingArray[i].pEntity;
    if ( pEntity )
    {
      *(_DWORD *)&pEntity->m_nFlags |= 0x80u;
      *(_DWORD *)&CTheScripts::InvisibilitySettingArray[i].pEntity->m_nFlags |= 1u;
      CTheScripts::InvisibilitySettingArray[i].pEntity = 0;
    }
  }
}

//----- (0034A904) --------------------------------------------------------
void __fastcall CRunningScript::UpdateCompareFlag(CRunningScript *this, Bool8 LatestResult)
{
  Bool8 v2; // r2
  unsigned int AndOrState; // r3
  Bool8 v4; // r1
  Bool8 CmpFlag; // r12
  UInt16 v6; // r1

  v2 = LatestResult == 0;
  AndOrState = this->AndOrState;
  if ( !this->NotForLatestExpression )
    v2 = LatestResult;
  if ( this->AndOrState )
  {
    if ( AndOrState > 8 )
    {
      if ( (unsigned __int16)(AndOrState - 21) <= 7u )
      {
        CmpFlag = this->CmpFlag;
        v6 = AndOrState - 1;
        if ( AndOrState == 21 )
          v6 = 0;
        this->AndOrState = v6;
        this->CmpFlag = CmpFlag | v2;
      }
    }
    else
    {
      v4 = this->CmpFlag;
      this->AndOrState = AndOrState - 1;
      this->CmpFlag = v4 & v2;
    }
  }
  else
  {
    this->CmpFlag = v2;
  }
}

//----- (0034A964) --------------------------------------------------------
void __fastcall CRunningScript::LocateCharCommand(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  float v6; // s17
  unsigned int v8; // r5
  Int16 v10; // r1
  uint8 *v11; // r4
  bool v12; // zf
  int v13; // r0
  int v14; // r1
  float *v15; // r2
  unsigned int v16; // r0
  float v17; // s30
  float v18; // s28
  _BOOL4 v19; // r6
  float v20; // s26
  float v21; // s16
  float v22; // s18
  float v23; // s22
  Int32 *v24; // r0
  Int32 v25; // s20
  Int32 *v26; // r1
  char v27; // r9
  float v28; // s24
  char v29; // r8
  Int32 v30; // r4
  char v31; // r10
  int v32; // r11
  int v33; // r0
  int v34; // r1
  Bool8 NotForLatestExpression; // r0
  unsigned int AndOrState; // r1
  Bool8 v37; // r0
  Bool8 CmpFlag; // r2
  UInt16 v39; // r3
  u_native v40; // r4
  float v41; // s16
  float v42; // s18
  float v43; // s2
  float v44; // s24
  float v45; // s22
  float v46; // s26
  char v47; // r0
  uint8 *v48; // [sp+18h] [bp-78h]
  Int32 v49; // [sp+1Ch] [bp-74h]
  CRunningScript *v50; // [sp+20h] [bp-70h]
  CVector pCoors; // [sp+24h] [bp-6Ch] BYREF

  v8 = CurrCommand - 254;
  if ( (unsigned int)(CurrCommand - 254) <= 5 )
    v10 = 8;
  else
    v10 = 6;
  CRunningScript::CollectParameters(this, v10);
  v50 = this;
  if ( ScriptParams[0] >= 0
    && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
  {
    v11 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
  }
  else
  {
    v11 = 0;
  }
  v13 = v11[1157] << 31;
  v12 = v13 == 0;
  if ( v13 )
  {
    v13 = *((_DWORD *)v11 + 356);
    v12 = v13 == 0;
  }
  if ( v12 )
    v13 = (int)v11;
  v14 = *(_DWORD *)(v13 + 20);
  v15 = (float *)(v14 + 48);
  if ( !v14 )
    v15 = (float *)(v13 + 4);
  v49 = CurrCommand;
  v16 = CurrCommand - 239;
  v17 = *v15;
  v18 = v15[1];
  v19 = 0;
  v20 = v15[2];
  if ( v16 <= 0x14 && ((1 << v16) & 0x1C0007) != 0 )
    v19 = CTheScripts::IsPedStopped((CPed *)v11) == 0;
  v48 = v11;
  v21 = *(float *)&ScriptParams[1];
  v22 = *(float *)&ScriptParams[2];
  v23 = *(float *)&ScriptParams[3];
  if ( v8 > 5 )
  {
    v24 = &ScriptParams[5];
    v26 = &ScriptParams[4];
    v25 = ScriptParams[3];
  }
  else
  {
    v24 = &ScriptParams[7];
    v25 = ScriptParams[4];
    v6 = *(float *)&ScriptParams[6];
    v26 = &ScriptParams[5];
  }
  v27 = 0;
  v28 = *(float *)v26;
  v29 = 0;
  v30 = *v24;
  v31 = 0;
  v32 = 0;
  if ( v6 == 36.0 )
    v27 = 1;
  if ( *(float *)v26 == 36.0 )
    v29 = 1;
  if ( *(float *)&v25 == 36.0 )
    v31 = 1;
  v33 = strcmp((const char *)v50->ScriptName, "desert5");
  if ( ((v33 == 0) & (unsigned __int8)v31 & (unsigned __int8)v29 & (unsigned __int8)v27) != 0 )
  {
    v6 = *(float *)&v25 * 1.2;
    v28 = *(float *)&v25 * 1.2;
    *(float *)&v25 = *(float *)&v25 * 1.2;
  }
  if ( !v19 )
  {
    if ( v17 < (float)(v21 - *(float *)&v25) )
      v32 = 1;
    v34 = (v17 > (float)(v21 + *(float *)&v25)) | v32;
    if ( v8 > 5 )
    {
      if ( !v34 )
      {
        LOBYTE(v32) = 0;
        if ( v18 < (float)(v22 - v28) || v18 > (float)(v22 + v28) )
          goto LABEL_42;
        goto LABEL_62;
      }
    }
    else if ( !v34 )
    {
      LOBYTE(v32) = 0;
      if ( v18 < (float)(v22 - v28) )
        goto LABEL_42;
      if ( v18 > (float)(v22 + v28) )
        goto LABEL_42;
      LOBYTE(v32) = 0;
      if ( v20 < (float)(v23 - v6) || v20 > (float)(v23 + v6) )
        goto LABEL_42;
      if ( !v33 )
        CAudioEngine::ReportFrontendAudioEvent(&AudioEngine, 1, 0.0, 1.0);
LABEL_62:
      LOBYTE(v32) = 0;
      v47 = v49 + 20;
      if ( (unsigned int)(v49 - 236) <= 0x17 )
      {
        if ( ((1 << v47) & 0x240009) != 0 )
        {
          LOBYTE(v32) = 1;
        }
        else if ( ((1 << v47) & 0x480012) != 0 )
        {
          LOBYTE(v32) = (v48[1157] & 1) == 0;
        }
        else if ( ((1 << v47) & 0x900024) != 0 )
        {
          v32 = (*((_DWORD *)v48 + 289) >> 8) & 1;
        }
      }
      goto LABEL_42;
    }
    LOBYTE(v32) = 0;
  }
LABEL_42:
  NotForLatestExpression = v50->NotForLatestExpression;
  AndOrState = v50->AndOrState;
  v37 = (NotForLatestExpression != 0) ^ v32;
  if ( v50->AndOrState )
  {
    if ( AndOrState > 8 )
    {
      if ( (unsigned __int16)(AndOrState - 21) > 7u )
        goto LABEL_50;
      v39 = AndOrState - 1;
      v37 |= v50->CmpFlag;
      if ( AndOrState == 21 )
        v39 = 0;
      v50->AndOrState = v39;
    }
    else
    {
      CmpFlag = v50->CmpFlag;
      v50->AndOrState = AndOrState - 1;
      v37 &= CmpFlag;
    }
  }
  v50->CmpFlag = v37;
LABEL_50:
  if ( v30 )
  {
    v2.n64_f32[0] = v22 + v28;
    v3.n64_f32[0] = v21 + *(float *)&v25;
    v4.n64_f32[0] = v22 - v28;
    v40 = (u_native)&v50->PCPointer[(unsigned int)v50];
    v5.n64_f32[0] = v21 - *(float *)&v25;
    if ( v8 <= 5 )
    {
      v41 = vmax_f32(v4, v2).n64_f32[0];
      v42 = vmax_f32(v5, v3).n64_f32[0];
      v43 = vmin_f32(v5, v3).n64_f32[0];
      v44 = (float)(vmin_f32(v4, v2).n64_f32[0] + v41) * 0.5;
      pCoors.y = v44;
      pCoors.x = (float)(v43 + v42) * 0.5;
      if ( v23 <= -100.0 )
        v23 = CWorld::FindGroundZForCoord((float)(v43 + v42) * 0.5, v44) + 2.0;
      pCoors.z = v23;
      CShadows::RenderIndicatorShadow(
        v40,
        2u,
        0,
        &pCoors,
        v42 - (float)((float)(v43 + v42) * 0.5),
        0.0,
        0.0,
        v44 - v41,
        0);
      return;
    }
    v45 = vmax_f32(v5, v3).n64_f32[0];
    v46 = vmax_f32(v4, v2).n64_f32[0];
    pCoors.y = (float)(vmin_f32(v4, v2).n64_f32[0] + v46) * 0.5;
    pCoors.x = (float)(vmin_f32(v5, v3).n64_f32[0] + v45) * 0.5;
    pCoors.z = CWorld::FindGroundZForCoord(pCoors.x, pCoors.y) + 2.0;
    CShadows::RenderIndicatorShadow(v40, 2u, 0, &pCoors, v45 - pCoors.x, 0.0, 0.0, pCoors.y - v46, 0);
  }
  if ( v8 >= 6 && CTheScripts::DbgFlag )
    CTheScripts::DrawDebugSquare(v21 - *(float *)&v25, v22 - v28, v21 + *(float *)&v25, v22 + v28);
}
// 34AA78: variable 'v6' is possibly undefined
// 34ABC6: variable 'v4' is possibly undefined
// 34ABC6: variable 'v2' is possibly undefined
// 34ABCE: variable 'v5' is possibly undefined
// 34ABCE: variable 'v3' is possibly undefined
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0034AD94) --------------------------------------------------------
Bool8 __fastcall CTheScripts::IsPedStopped(CPed *pPedToCheck)
{
  bool v2; // zf
  CVehicle *m_pMyVehicle; // r0

  m_pMyVehicle = (CVehicle *)(*((unsigned __int8 *)&pPedToCheck->m_nPedFlags + 1) << 31);
  v2 = m_pMyVehicle == 0;
  if ( m_pMyVehicle )
  {
    m_pMyVehicle = pPedToCheck->m_pMyVehicle;
    v2 = m_pMyVehicle == 0;
  }
  if ( v2 )
    return (!CPed::IsPlayer(pPedToCheck)
         || !RpAnimBlendClumpGetAssociation((RpClump_0 *)pPedToCheck->m_pRwObject, 6u)
         && !RpAnimBlendClumpGetAssociation((RpClump_0 *)pPedToCheck->m_pRwObject, 7u)
         && !RpAnimBlendClumpGetAssociation((RpClump_0 *)pPedToCheck->m_pRwObject, 0x74u)
         && !RpAnimBlendClumpGetAssociation((RpClump_0 *)pPedToCheck->m_pRwObject, 0x76u))
        && pPedToCheck->m_eMoveState <= PEDMOVE_TURN_R
        && (*(_DWORD *)&pPedToCheck->m_nPedFlags & 0x601) == 1
        && pPedToCheck->m_extractedVelocity.x == 0.0
        && pPedToCheck->m_extractedVelocity.y == 0.0;
  return m_pMyVehicle->m_fTrueDistanceTravelled <= (float)(CTimer::ms_fTimeStep * 0.01);
}

//----- (0034AE54) --------------------------------------------------------
void __fastcall CTheScripts::HighlightImportantArea(
        u_native AreaID,
        float X1,
        float Y1,
        float X2,
        float Y2,
        float CentreZ)
{
  float32x2_t v6; // d0
  float32x2_t v7; // d1
  float32x2_t v8; // d2
  float32x2_t v9; // d3
  float v11; // s16
  float v12; // s18
  float v13; // s22
  float v14; // s0
  float v15; // s20
  CVector pCoors; // [sp+14h] [bp-34h] BYREF

  v6.n64_f32[0] = Y2;
  v8.n64_f32[0] = Y1;
  v7.n64_f32[0] = X2;
  v9.n64_f32[0] = X1;
  v11 = vmax_f32(v8, v6).n64_f32[0];
  v12 = vmax_f32(v9, v7).n64_f32[0];
  v13 = (float)(vmin_f32(v8, v6).n64_f32[0] + v11) * 0.5;
  v14 = CentreZ;
  v15 = (float)(vmin_f32(v9, v7).n64_f32[0] + v12) * 0.5;
  pCoors.y = v13;
  pCoors.x = v15;
  if ( CentreZ <= -100.0 )
    v14 = CWorld::FindGroundZForCoord(v15, v13) + 2.0;
  pCoors.z = v14;
  CShadows::RenderIndicatorShadow(AreaID, 2u, 0, &pCoors, v12 - v15, 0.0, 0.0, v13 - v11, 0);
}
// 34AE70: variable 'v8' is possibly undefined
// 34AE70: variable 'v6' is possibly undefined
// 34AE78: variable 'v9' is possibly undefined
// 34AE78: variable 'v7' is possibly undefined

//----- (0034AEFE) --------------------------------------------------------
void __fastcall CTheScripts::DrawDebugSquare(float X1, float Y1, float X2, float Y2)
{
  CEntity *refEntityPtr; // [sp+28h] [bp-88h] BYREF
  CColPoint colPoint; // [sp+2Ch] [bp-84h] BYREF
  CVector v10; // [sp+58h] [bp-58h] BYREF
  CVector v11; // [sp+64h] [bp-4Ch] BYREF
  CVector v12; // [sp+70h] [bp-40h] BYREF
  CVector vecStart; // [sp+7Ch] [bp-34h] BYREF

  vecStart.x = X1;
  vecStart.y = Y1;
  vecStart.z = -1000.0;
  CWorld::ProcessVerticalLine(&vecStart, 1000.0, &colPoint, &refEntityPtr, 1, 0, 0, 0, 1, 0, 0);
  v12.y = Y1;
  v12.x = X2;
  v12.z = -1000.0;
  vecStart.z = colPoint.m_vecPosition.z + 2.0;
  CWorld::ProcessVerticalLine(&v12, 1000.0, &colPoint, &refEntityPtr, 1, 0, 0, 0, 1, 0, 0);
  v11.x = X2;
  v12.z = colPoint.m_vecPosition.z + 2.0;
  v11.y = Y2;
  v11.z = -1000.0;
  CWorld::ProcessVerticalLine(&v11, 1000.0, &colPoint, &refEntityPtr, 1, 0, 0, 0, 1, 0, 0);
  v11.z = colPoint.m_vecPosition.z + 2.0;
  v10.x = X1;
  v10.y = Y2;
  v10.z = -1000.0;
  CWorld::ProcessVerticalLine(&v10, 1000.0, &colPoint, &refEntityPtr, 1, 0, 0, 0, 1, 0, 0);
}

//----- (0034AFFC) --------------------------------------------------------
void __fastcall CRunningScript::LocateCharCharCommand(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d1
  float32x2_t v3; // d2
  float32x2_t v4; // d8
  float32x2_t v5; // d10
  unsigned int v7; // r6
  Int16 v9; // r1
  uint8 *v10; // r0
  uint8 *v11; // r2
  unsigned int v12; // r12
  int v13; // r3
  float *v14; // r1
  float v15; // s8
  float v16; // s4
  float v17; // s2
  int v18; // r1
  float *v19; // r3
  bool v20; // zf
  int v21; // r1
  float v22; // s18
  int v23; // r2
  float v24; // s22
  float v25; // s0
  Int32 v26; // r0
  int v27; // r2
  int v28; // r2
  Bool8 NotForLatestExpression; // r1
  unsigned int AndOrState; // r3
  Bool8 v31; // r1
  Bool8 CmpFlag; // r2
  UInt16 v33; // r5
  char *v34; // r4
  float v35; // s18
  float v36; // s22
  float v37; // s6
  float v38; // s20
  float v39; // s26
  float v40; // s24
  char v41; // r3
  CVector pCoors; // [sp+14h] [bp-5Ch] BYREF

  v7 = CurrCommand - 260;
  if ( (unsigned int)(CurrCommand - 260) <= 2 )
    v9 = 6;
  else
    v9 = 5;
  CRunningScript::CollectParameters(this, v9);
  if ( ScriptParams[0] >= 0
    && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
  {
    v10 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
  }
  else
  {
    v10 = 0;
  }
  if ( ScriptParams[1] >= 0
    && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
  {
    v11 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
  }
  else
  {
    v11 = 0;
  }
  v12 = *((_DWORD *)v10 + 289);
  if ( (v12 & 0x100) != 0 && *((_DWORD *)v10 + 356) )
    v10 = (uint8 *)*((_DWORD *)v10 + 356);
  v13 = *((_DWORD *)v10 + 5);
  v14 = (float *)(v13 + 48);
  if ( !v13 )
    v14 = (float *)(v10 + 4);
  v15 = *v14;
  v16 = v14[1];
  v17 = v14[2];
  if ( v11[1157] << 31 && *((_DWORD *)v11 + 356) )
    v11 = (uint8 *)*((_DWORD *)v11 + 356);
  v18 = *((_DWORD *)v11 + 5);
  v19 = (float *)(v18 + 48);
  v20 = v18 == 0;
  v21 = 0;
  v22 = *(float *)&ScriptParams[3];
  if ( v20 )
    v19 = (float *)(v11 + 4);
  v23 = 0;
  v24 = v19[1];
  v4.n64_f32[0] = *v19 + *(float *)&ScriptParams[2];
  v25 = v19[2];
  v5.n64_f32[0] = *v19 - *(float *)&ScriptParams[2];
  v26 = ScriptParams[5];
  if ( v15 > v4.n64_f32[0] )
    v23 = 1;
  if ( v15 < v5.n64_f32[0] )
    v21 = 1;
  v27 = v23 | v21;
  if ( v7 >= 3 )
    v26 = ScriptParams[4];
  if ( v7 > 2 )
  {
    if ( !v27 )
    {
      LOBYTE(v28) = 0;
      if ( v16 < (float)(v24 - *(float *)&ScriptParams[3]) || v16 > (float)(v24 + *(float *)&ScriptParams[3]) )
        goto LABEL_37;
      goto LABEL_57;
    }
LABEL_36:
    LOBYTE(v28) = 0;
    goto LABEL_37;
  }
  if ( v27 )
    goto LABEL_36;
  LOBYTE(v28) = 0;
  if ( v16 < (float)(v24 - *(float *)&ScriptParams[3]) )
    goto LABEL_37;
  if ( v16 > (float)(v24 + *(float *)&ScriptParams[3]) )
    goto LABEL_37;
  LOBYTE(v28) = 0;
  if ( v17 < (float)(v25 - *(float *)&ScriptParams[4]) || v17 > (float)(v25 + *(float *)&ScriptParams[4]) )
    goto LABEL_37;
LABEL_57:
  v41 = CurrCommand + 14;
  LOBYTE(v28) = 0;
  if ( (unsigned int)(CurrCommand - 242) <= 0x14 )
  {
    if ( ((1 << v41) & 0x40001) != 0 )
    {
      LOBYTE(v28) = 1;
    }
    else if ( ((1 << v41) & 0x80002) != 0 )
    {
      LOBYTE(v28) = ((v12 >> 8) & 1) == 0;
    }
    else if ( ((1 << v41) & 0x100004) != 0 )
    {
      v28 = (v12 >> 8) & 1;
    }
  }
LABEL_37:
  NotForLatestExpression = this->NotForLatestExpression;
  AndOrState = this->AndOrState;
  v31 = (NotForLatestExpression != 0) ^ v28;
  if ( this->AndOrState )
  {
    if ( AndOrState > 8 )
    {
      if ( (unsigned __int16)(AndOrState - 21) > 7u )
        goto LABEL_45;
      v33 = AndOrState - 1;
      v31 |= this->CmpFlag;
      if ( AndOrState == 21 )
        v33 = 0;
      this->AndOrState = v33;
    }
    else
    {
      CmpFlag = this->CmpFlag;
      this->AndOrState = AndOrState - 1;
      v31 &= CmpFlag;
    }
  }
  this->CmpFlag = v31;
LABEL_45:
  if ( v26 )
  {
    v2.n64_f32[0] = v24 + v22;
    v3.n64_f32[0] = v24 - v22;
    v34 = (char *)this + (unsigned int)this->PCPointer;
    if ( v7 <= 2 )
    {
      v35 = vmax_f32(v3, v2).n64_f32[0];
      v36 = vmax_f32(v5, v4).n64_f32[0];
      v37 = vmin_f32(v5, v4).n64_f32[0];
      v38 = (float)(vmin_f32(v3, v2).n64_f32[0] + v35) * 0.5;
      pCoors.y = v38;
      pCoors.x = (float)(v37 + v36) * 0.5;
      if ( v25 <= -100.0 )
        v25 = CWorld::FindGroundZForCoord((float)(v37 + v36) * 0.5, v38) + 2.0;
      pCoors.z = v25;
      CShadows::RenderIndicatorShadow(
        (u_native)v34,
        2u,
        0,
        &pCoors,
        v36 - (float)((float)(v37 + v36) * 0.5),
        0.0,
        0.0,
        v38 - v35,
        0);
      return;
    }
    v39 = vmax_f32(v3, v2).n64_f32[0];
    v40 = vmax_f32(v5, v4).n64_f32[0];
    pCoors.y = (float)(vmin_f32(v3, v2).n64_f32[0] + v39) * 0.5;
    pCoors.x = (float)(vmin_f32(v5, v4).n64_f32[0] + v40) * 0.5;
    pCoors.z = CWorld::FindGroundZForCoord(pCoors.x, pCoors.y) + 2.0;
    CShadows::RenderIndicatorShadow((u_native)v34, 2u, 0, &pCoors, v40 - pCoors.x, 0.0, 0.0, pCoors.y - v39, 0);
  }
  if ( v7 >= 3 && CTheScripts::DbgFlag )
    CTheScripts::DrawDebugSquare(v5.n64_f32[0], v24 - v22, v4.n64_f32[0], v24 + v22);
}
// 34B1BA: variable 'v3' is possibly undefined
// 34B1BA: variable 'v2' is possibly undefined
// 34B1C2: variable 'v5' is possibly undefined
// 34B1C2: variable 'v4' is possibly undefined
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0034B358) --------------------------------------------------------
void __fastcall CRunningScript::LocateCharCarCommand(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d1
  float32x2_t v3; // d2
  float32x2_t v4; // d8
  float32x2_t v5; // d10
  unsigned int v7; // r9
  Int16 v9; // r1
  uint8 *v10; // r0
  uint8 *v11; // r2
  unsigned int v12; // r1
  int v13; // r3
  float *v14; // r6
  float v15; // s18
  int v16; // r2
  float v17; // s22
  float *v18; // r3
  float v19; // s0
  int v20; // r6
  float v21; // s4
  Int32 v22; // r0
  int v23; // r2
  int v24; // r2
  int v25; // r2
  float v26; // s2
  Bool8 NotForLatestExpression; // r1
  unsigned int AndOrState; // r3
  Bool8 v29; // r1
  Bool8 CmpFlag; // r2
  UInt16 v31; // r6
  char *v32; // r4
  float v33; // s18
  float v34; // s22
  float v35; // s6
  float v36; // s20
  float v37; // s26
  float v38; // s24
  int v39; // r2
  CVector pCoors; // [sp+14h] [bp-64h] BYREF

  v7 = CurrCommand - 517;
  if ( (unsigned int)(CurrCommand - 517) <= 2 )
    v9 = 6;
  else
    v9 = 5;
  CRunningScript::CollectParameters(this, v9);
  if ( ScriptParams[0] >= 0
    && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
  {
    v10 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
  }
  else
  {
    v10 = 0;
  }
  if ( ScriptParams[1] >= 0
    && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
  {
    v11 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
  }
  else
  {
    v11 = 0;
  }
  v12 = *((_DWORD *)v10 + 289);
  if ( (v12 & 0x100) != 0 && *((_DWORD *)v10 + 356) )
    v10 = (uint8 *)*((_DWORD *)v10 + 356);
  v13 = *((_DWORD *)v11 + 5);
  v14 = (float *)(v13 + 48);
  v15 = *(float *)&ScriptParams[3];
  if ( !v13 )
    v14 = (float *)(v11 + 4);
  v16 = *((_DWORD *)v10 + 5);
  v4.n64_f32[0] = *v14 + *(float *)&ScriptParams[2];
  v17 = v14[1];
  v18 = (float *)(v16 + 48);
  v19 = v14[2];
  if ( !v16 )
    v18 = (float *)(v10 + 4);
  v5.n64_f32[0] = *v14 - *(float *)&ScriptParams[2];
  v20 = 0;
  v21 = v18[1];
  v22 = ScriptParams[5];
  v23 = 0;
  if ( *v18 > v4.n64_f32[0] )
    v20 = 1;
  if ( *v18 < v5.n64_f32[0] )
    v23 = 1;
  v24 = v23 | v20;
  if ( v7 >= 3 )
    v22 = ScriptParams[4];
  if ( v7 > 2 )
  {
    if ( v24 )
      goto LABEL_32;
    LOBYTE(v25) = 0;
    if ( v21 < (float)(v17 - *(float *)&ScriptParams[3]) )
      goto LABEL_33;
    v26 = v17 + *(float *)&ScriptParams[3];
    goto LABEL_53;
  }
  if ( v24 )
    goto LABEL_32;
  LOBYTE(v25) = 0;
  if ( v21 >= (float)(v17 - *(float *)&ScriptParams[3]) && v21 <= (float)(v17 + *(float *)&ScriptParams[3]) )
  {
    v21 = v18[2];
    LOBYTE(v25) = 0;
    if ( v21 >= (float)(v19 - *(float *)&ScriptParams[4]) )
    {
      v26 = v19 + *(float *)&ScriptParams[4];
LABEL_53:
      if ( v21 > v26 )
        goto LABEL_33;
      if ( (unsigned int)(CurrCommand - 514) <= 5 )
      {
        v39 = 1 << (CurrCommand - 2);
        if ( (v39 & 9) != 0 )
        {
          LOBYTE(v25) = 1;
        }
        else if ( (v39 & 0x12) != 0 )
        {
          LOBYTE(v25) = ((v12 >> 8) & 1) == 0;
        }
        else
        {
          v25 = (v12 >> 8) & 1;
        }
        goto LABEL_33;
      }
LABEL_32:
      LOBYTE(v25) = 0;
    }
  }
LABEL_33:
  NotForLatestExpression = this->NotForLatestExpression;
  AndOrState = this->AndOrState;
  v29 = (NotForLatestExpression != 0) ^ v25;
  if ( this->AndOrState )
  {
    if ( AndOrState > 8 )
    {
      if ( (unsigned __int16)(AndOrState - 21) > 7u )
        goto LABEL_41;
      v31 = AndOrState - 1;
      v29 |= this->CmpFlag;
      if ( AndOrState == 21 )
        v31 = 0;
      this->AndOrState = v31;
    }
    else
    {
      CmpFlag = this->CmpFlag;
      this->AndOrState = AndOrState - 1;
      v29 &= CmpFlag;
    }
  }
  this->CmpFlag = v29;
LABEL_41:
  if ( v22 )
  {
    v2.n64_f32[0] = v17 + v15;
    v3.n64_f32[0] = v17 - v15;
    v32 = (char *)this + (unsigned int)this->PCPointer;
    if ( v7 <= 2 )
    {
      v33 = vmax_f32(v3, v2).n64_f32[0];
      v34 = vmax_f32(v5, v4).n64_f32[0];
      v35 = vmin_f32(v5, v4).n64_f32[0];
      v36 = (float)(vmin_f32(v3, v2).n64_f32[0] + v33) * 0.5;
      pCoors.y = v36;
      pCoors.x = (float)(v35 + v34) * 0.5;
      if ( v19 <= -100.0 )
        v19 = CWorld::FindGroundZForCoord((float)(v35 + v34) * 0.5, v36) + 2.0;
      pCoors.z = v19;
      CShadows::RenderIndicatorShadow(
        (u_native)v32,
        2u,
        0,
        &pCoors,
        v34 - (float)((float)(v35 + v34) * 0.5),
        0.0,
        0.0,
        v36 - v33,
        0);
      return;
    }
    v37 = vmax_f32(v3, v2).n64_f32[0];
    v38 = vmax_f32(v5, v4).n64_f32[0];
    pCoors.y = (float)(vmin_f32(v3, v2).n64_f32[0] + v37) * 0.5;
    pCoors.x = (float)(vmin_f32(v5, v4).n64_f32[0] + v38) * 0.5;
    pCoors.z = CWorld::FindGroundZForCoord(pCoors.x, pCoors.y) + 2.0;
    CShadows::RenderIndicatorShadow((u_native)v32, 2u, 0, &pCoors, v38 - pCoors.x, 0.0, 0.0, pCoors.y - v37, 0);
  }
  if ( v7 >= 3 && CTheScripts::DbgFlag )
    CTheScripts::DrawDebugSquare(v5.n64_f32[0], v17 - v15, v4.n64_f32[0], v17 + v15);
}
// 34B506: variable 'v3' is possibly undefined
// 34B506: variable 'v2' is possibly undefined
// 34B50E: variable 'v5' is possibly undefined
// 34B50E: variable 'v4' is possibly undefined
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0034B690) --------------------------------------------------------
void __fastcall CRunningScript::LocateCharObjectCommand(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d1
  float32x2_t v3; // d2
  float32x2_t v4; // d8
  float32x2_t v5; // d10
  unsigned int v7; // r9
  Int16 v9; // r1
  uint8 *v10; // r0
  uint8 *v11; // r2
  unsigned int v12; // r1
  int v13; // r3
  float *v14; // r6
  float v15; // s18
  int v16; // r2
  float v17; // s22
  float *v18; // r3
  float v19; // s0
  int v20; // r6
  float v21; // s4
  Int32 v22; // r0
  int v23; // r2
  int v24; // r2
  int v25; // r2
  float v26; // s2
  Bool8 NotForLatestExpression; // r1
  unsigned int AndOrState; // r3
  Bool8 v29; // r1
  Bool8 CmpFlag; // r2
  UInt16 v31; // r6
  char *v32; // r4
  float v33; // s18
  float v34; // s22
  float v35; // s6
  float v36; // s20
  float v37; // s26
  float v38; // s24
  int v39; // r2
  CVector pCoors; // [sp+14h] [bp-64h] BYREF

  v7 = CurrCommand - 1140;
  if ( (unsigned int)(CurrCommand - 1140) <= 2 )
    v9 = 6;
  else
    v9 = 5;
  CRunningScript::CollectParameters(this, v9);
  if ( ScriptParams[0] >= 0
    && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
  {
    v10 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
  }
  else
  {
    v10 = 0;
  }
  if ( ScriptParams[1] >= 0
    && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
  {
    v11 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
  }
  else
  {
    v11 = 0;
  }
  v12 = *((_DWORD *)v10 + 289);
  if ( (v12 & 0x100) != 0 && *((_DWORD *)v10 + 356) )
    v10 = (uint8 *)*((_DWORD *)v10 + 356);
  v13 = *((_DWORD *)v11 + 5);
  v14 = (float *)(v13 + 48);
  v15 = *(float *)&ScriptParams[3];
  if ( !v13 )
    v14 = (float *)(v11 + 4);
  v16 = *((_DWORD *)v10 + 5);
  v4.n64_f32[0] = *v14 + *(float *)&ScriptParams[2];
  v17 = v14[1];
  v18 = (float *)(v16 + 48);
  v19 = v14[2];
  if ( !v16 )
    v18 = (float *)(v10 + 4);
  v5.n64_f32[0] = *v14 - *(float *)&ScriptParams[2];
  v20 = 0;
  v21 = v18[1];
  v22 = ScriptParams[5];
  v23 = 0;
  if ( *v18 > v4.n64_f32[0] )
    v20 = 1;
  if ( *v18 < v5.n64_f32[0] )
    v23 = 1;
  v24 = v23 | v20;
  if ( v7 >= 3 )
    v22 = ScriptParams[4];
  if ( v7 > 2 )
  {
    if ( v24 )
      goto LABEL_32;
    LOBYTE(v25) = 0;
    if ( v21 < (float)(v17 - *(float *)&ScriptParams[3]) )
      goto LABEL_33;
    v26 = v17 + *(float *)&ScriptParams[3];
    goto LABEL_53;
  }
  if ( v24 )
    goto LABEL_32;
  LOBYTE(v25) = 0;
  if ( v21 >= (float)(v17 - *(float *)&ScriptParams[3]) && v21 <= (float)(v17 + *(float *)&ScriptParams[3]) )
  {
    v21 = v18[2];
    LOBYTE(v25) = 0;
    if ( v21 >= (float)(v19 - *(float *)&ScriptParams[4]) )
    {
      v26 = v19 + *(float *)&ScriptParams[4];
LABEL_53:
      if ( v21 > v26 )
        goto LABEL_33;
      if ( (unsigned int)(CurrCommand - 1137) <= 5 )
      {
        v39 = 1 << (CurrCommand - 113);
        if ( (v39 & 9) != 0 )
        {
          LOBYTE(v25) = 1;
        }
        else if ( (v39 & 0x12) != 0 )
        {
          LOBYTE(v25) = ((v12 >> 8) & 1) == 0;
        }
        else
        {
          v25 = (v12 >> 8) & 1;
        }
        goto LABEL_33;
      }
LABEL_32:
      LOBYTE(v25) = 0;
    }
  }
LABEL_33:
  NotForLatestExpression = this->NotForLatestExpression;
  AndOrState = this->AndOrState;
  v29 = (NotForLatestExpression != 0) ^ v25;
  if ( this->AndOrState )
  {
    if ( AndOrState > 8 )
    {
      if ( (unsigned __int16)(AndOrState - 21) > 7u )
        goto LABEL_41;
      v31 = AndOrState - 1;
      v29 |= this->CmpFlag;
      if ( AndOrState == 21 )
        v31 = 0;
      this->AndOrState = v31;
    }
    else
    {
      CmpFlag = this->CmpFlag;
      this->AndOrState = AndOrState - 1;
      v29 &= CmpFlag;
    }
  }
  this->CmpFlag = v29;
LABEL_41:
  if ( v22 )
  {
    v2.n64_f32[0] = v17 + v15;
    v3.n64_f32[0] = v17 - v15;
    v32 = (char *)this + (unsigned int)this->PCPointer;
    if ( v7 <= 2 )
    {
      v33 = vmax_f32(v3, v2).n64_f32[0];
      v34 = vmax_f32(v5, v4).n64_f32[0];
      v35 = vmin_f32(v5, v4).n64_f32[0];
      v36 = (float)(vmin_f32(v3, v2).n64_f32[0] + v33) * 0.5;
      pCoors.y = v36;
      pCoors.x = (float)(v35 + v34) * 0.5;
      if ( v19 <= -100.0 )
        v19 = CWorld::FindGroundZForCoord((float)(v35 + v34) * 0.5, v36) + 2.0;
      pCoors.z = v19;
      CShadows::RenderIndicatorShadow(
        (u_native)v32,
        2u,
        0,
        &pCoors,
        v34 - (float)((float)(v35 + v34) * 0.5),
        0.0,
        0.0,
        v36 - v33,
        0);
      return;
    }
    v37 = vmax_f32(v3, v2).n64_f32[0];
    v38 = vmax_f32(v5, v4).n64_f32[0];
    pCoors.y = (float)(vmin_f32(v3, v2).n64_f32[0] + v37) * 0.5;
    pCoors.x = (float)(vmin_f32(v5, v4).n64_f32[0] + v38) * 0.5;
    pCoors.z = CWorld::FindGroundZForCoord(pCoors.x, pCoors.y) + 2.0;
    CShadows::RenderIndicatorShadow((u_native)v32, 2u, 0, &pCoors, v38 - pCoors.x, 0.0, 0.0, pCoors.y - v37, 0);
  }
  if ( v7 >= 3 && CTheScripts::DbgFlag )
    CTheScripts::DrawDebugSquare(v5.n64_f32[0], v17 - v15, v4.n64_f32[0], v17 + v15);
}
// 34B83E: variable 'v3' is possibly undefined
// 34B83E: variable 'v2' is possibly undefined
// 34B846: variable 'v5' is possibly undefined
// 34B846: variable 'v4' is possibly undefined
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0034B9C8) --------------------------------------------------------
void __fastcall CRunningScript::LocateCarCommand(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d1
  float32x2_t v3; // d2
  float32x2_t v4; // d3
  float32x2_t v5; // d4
  unsigned int v7; // r6
  Int16 v9; // r1
  uint8 *v10; // r1
  bool v11; // zf
  int v12; // r3
  float v13; // s0
  float v14; // s16
  float v15; // s18
  float v16; // s0
  Int32 *v17; // r0
  Int32 v18; // s20
  Int32 *v19; // r2
  Int32 v20; // r0
  float v21; // s22
  int v22; // r2
  Bool8 NotForLatestExpression; // r1
  unsigned int AndOrState; // r3
  Bool8 v25; // r1
  Bool8 CmpFlag; // r2
  int v27; // r5
  float *v28; // r3
  int v29; // r1
  float v30; // s4
  int v31; // r1
  UInt16 v32; // r5
  char *v33; // r4
  float v34; // s16
  float v35; // s18
  float v36; // s4
  float v37; // s22
  float v38; // s26
  float v39; // s24
  float v40; // s6
  float v41; // s4
  float v42; // s2
  char v43; // r2
  char v44; // r1
  CVector pCoors; // [sp+14h] [bp-5Ch] BYREF

  v7 = CurrCommand - 431;
  if ( (unsigned int)(CurrCommand - 431) <= 1 )
    v9 = 8;
  else
    v9 = 6;
  CRunningScript::CollectParameters(this, v9);
  if ( ScriptParams[0] >= 0
    && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
  {
    v10 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
  }
  else
  {
    v10 = 0;
  }
  v11 = CurrCommand == 432;
  v12 = 0;
  if ( CurrCommand != 432 )
    v11 = CurrCommand == 430;
  if ( v11 )
  {
    v2.n64_f32[0] = CTimer::ms_fOldTimeStep;
    v3.n64_f32[0] = CTimer::ms_fTimeStep;
    v2.n64_u64[0] = vmin_f32(v3, v2).n64_u64[0];
    v13 = v2.n64_f32[0] * 0.01;
    v2.n64_u32[0] = *((_DWORD *)v10 + 54);
    if ( v2.n64_f32[0] > v13 )
      v12 = 1;
  }
  v14 = *(float *)&ScriptParams[1];
  v15 = *(float *)&ScriptParams[2];
  v16 = *(float *)&ScriptParams[3];
  if ( v7 > 1 )
  {
    v17 = &ScriptParams[5];
    v19 = &ScriptParams[4];
    v18 = ScriptParams[3];
  }
  else
  {
    v17 = &ScriptParams[7];
    v18 = ScriptParams[4];
    v2.n64_u32[0] = ScriptParams[6];
    v19 = &ScriptParams[5];
  }
  v20 = *v17;
  v21 = *(float *)v19;
  v22 = 0;
  if ( !v12 )
  {
    v27 = *((_DWORD *)v10 + 5);
    v28 = (float *)(v27 + 48);
    if ( !v27 )
      v28 = (float *)(v10 + 4);
    v29 = 0;
    v30 = v28[1];
    if ( *v28 > (float)(*(float *)&ScriptParams[1] + *(float *)&v18) )
      v29 = 1;
    if ( *v28 < (float)(*(float *)&ScriptParams[1] - *(float *)&v18) )
      v22 = 1;
    v31 = v29 | v22;
    if ( v7 > 1 )
    {
      LOBYTE(v22) = 0;
      if ( !v31 )
      {
        if ( v30 <= (float)(*(float *)&ScriptParams[2] + v21) )
          LOBYTE(v22) = 1;
        LOBYTE(v22) = v22 & (v30 >= (float)(*(float *)&ScriptParams[2] - v21));
      }
    }
    else if ( v31 )
    {
      LOBYTE(v22) = 0;
    }
    else
    {
      LOBYTE(v22) = 0;
      if ( v30 >= (float)(*(float *)&ScriptParams[2] - v21) && v30 <= (float)(*(float *)&ScriptParams[2] + v21) )
      {
        v40 = *(float *)&ScriptParams[3] - v2.n64_f32[0];
        v41 = v28[2];
        v42 = *(float *)&ScriptParams[3] + v2.n64_f32[0];
        v43 = 0;
        v44 = 0;
        if ( v41 >= v40 )
          v43 = 1;
        if ( v41 <= v42 )
          v44 = 1;
        LOBYTE(v22) = v43 & v44;
      }
    }
  }
  NotForLatestExpression = this->NotForLatestExpression;
  AndOrState = this->AndOrState;
  v25 = (NotForLatestExpression != 0) ^ v22;
  if ( this->AndOrState )
  {
    if ( AndOrState > 8 )
    {
      if ( (unsigned __int16)(AndOrState - 21) > 7u )
        goto LABEL_35;
      v32 = AndOrState - 1;
      v25 |= this->CmpFlag;
      if ( AndOrState == 21 )
        v32 = 0;
      this->AndOrState = v32;
    }
    else
    {
      CmpFlag = this->CmpFlag;
      this->AndOrState = AndOrState - 1;
      v25 &= CmpFlag;
    }
  }
  this->CmpFlag = v25;
LABEL_35:
  if ( v20 )
  {
    v2.n64_f32[0] = v15 + v21;
    v3.n64_f32[0] = v14 + *(float *)&v18;
    v4.n64_f32[0] = v15 - v21;
    v33 = (char *)this + (unsigned int)this->PCPointer;
    v5.n64_f32[0] = v14 - *(float *)&v18;
    if ( v7 <= 1 )
    {
      v34 = vmax_f32(v4, v2).n64_f32[0];
      v35 = vmax_f32(v5, v3).n64_f32[0];
      v36 = vmin_f32(v5, v3).n64_f32[0];
      v37 = (float)(vmin_f32(v4, v2).n64_f32[0] + v34) * 0.5;
      pCoors.y = v37;
      pCoors.x = (float)(v36 + v35) * 0.5;
      if ( v16 <= -100.0 )
        v16 = CWorld::FindGroundZForCoord((float)(v36 + v35) * 0.5, v37) + 2.0;
      pCoors.z = v16;
      CShadows::RenderIndicatorShadow(
        (u_native)v33,
        2u,
        0,
        &pCoors,
        v35 - (float)((float)(v36 + v35) * 0.5),
        0.0,
        0.0,
        v37 - v34,
        0);
      return;
    }
    v38 = vmax_f32(v4, v2).n64_f32[0];
    v39 = vmax_f32(v5, v3).n64_f32[0];
    pCoors.y = (float)(vmin_f32(v4, v2).n64_f32[0] + v38) * 0.5;
    pCoors.x = (float)(vmin_f32(v5, v3).n64_f32[0] + v39) * 0.5;
    pCoors.z = CWorld::FindGroundZForCoord(pCoors.x, pCoors.y) + 2.0;
    CShadows::RenderIndicatorShadow((u_native)v33, 2u, 0, &pCoors, v39 - pCoors.x, 0.0, 0.0, pCoors.y - v38, 0);
  }
  if ( v7 >= 2 && CTheScripts::DbgFlag )
    CTheScripts::DrawDebugSquare(v14 - *(float *)&v18, v15 - v21, v14 + *(float *)&v18, v15 + v21);
}
// 34BA40: variable 'v3' is possibly undefined
// 34BA40: variable 'v2' is possibly undefined
// 34BB4E: variable 'v4' is possibly undefined
// 34BB56: variable 'v5' is possibly undefined
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0034BD14) --------------------------------------------------------
Bool8 __fastcall CTheScripts::IsVehicleStopped(CVehicle *pVehicleToCheck)
{
  float32x2_t v1; // d1
  float32x2_t v2; // d2

  v1.n64_f32[0] = CTimer::ms_fOldTimeStep;
  v2.n64_f32[0] = CTimer::ms_fTimeStep;
  return pVehicleToCheck->m_fTrueDistanceTravelled <= (float)(vmin_f32(v2, v1).n64_f32[0] * 0.01);
}
// 34BD2C: variable 'v2' is possibly undefined
// 34BD2C: variable 'v1' is possibly undefined

//----- (0034BD54) --------------------------------------------------------
void __fastcall CRunningScript::LocateObjectCommand(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d1
  float32x2_t v3; // d2
  float32x2_t v4; // d9
  float32x2_t v5; // d10
  Int16 v8; // r1
  uint8 *v9; // r0
  float v10; // s16
  float v11; // s0
  Int32 *v12; // r3
  Int32 v13; // s6
  Int32 *v14; // r2
  int v15; // r4
  float v16; // s22
  float *v17; // r2
  Int32 v18; // r0
  int v19; // r3
  float v20; // s4
  int v21; // r4
  int v22; // r3
  char v23; // r1
  char v24; // r2
  bool v25; // nf
  bool v26; // fzf
  bool v27; // fnf
  float v28; // s6
  float v29; // s4
  float v30; // s2
  Bool8 NotForLatestExpression; // r3
  unsigned int AndOrState; // r2
  Bool8 v33; // r1
  Bool8 CmpFlag; // r3
  UInt16 v35; // r4
  char *v36; // r5
  float v37; // s16
  float v38; // s22
  float v39; // s6
  float v40; // s20
  float v41; // s26
  float v42; // s24
  CVector pCoors; // [sp+14h] [bp-5Ch] BYREF

  if ( CurrCommand == 1254 )
    v8 = 8;
  else
    v8 = 6;
  CRunningScript::CollectParameters(this, v8);
  if ( ScriptParams[0] >= 0
    && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
  {
    v9 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
  }
  else
  {
    v9 = 0;
  }
  v10 = *(float *)&ScriptParams[2];
  v11 = *(float *)&ScriptParams[3];
  if ( CurrCommand == 1254 )
  {
    v12 = &ScriptParams[7];
    v13 = ScriptParams[4];
    v2.n64_u32[0] = ScriptParams[6];
    v14 = &ScriptParams[5];
  }
  else
  {
    v12 = &ScriptParams[5];
    v14 = &ScriptParams[4];
    v13 = ScriptParams[3];
  }
  v4.n64_f32[0] = *(float *)&ScriptParams[1] + *(float *)&v13;
  v15 = *((_DWORD *)v9 + 5);
  v16 = *(float *)v14;
  v5.n64_f32[0] = *(float *)&ScriptParams[1] - *(float *)&v13;
  v17 = (float *)(v15 + 48);
  if ( !v15 )
    v17 = (float *)(v9 + 4);
  v18 = *v12;
  v19 = 0;
  v20 = v17[1];
  v21 = 0;
  if ( *v17 > v4.n64_f32[0] )
    v19 = 1;
  if ( *v17 < v5.n64_f32[0] )
    v21 = 1;
  v22 = v19 | v21;
  if ( CurrCommand != 1254 )
  {
    v23 = 0;
    if ( v22 )
      goto LABEL_30;
    v24 = 0;
    v25 = v20 < (float)(*(float *)&ScriptParams[2] - v16);
    v26 = v20 == (float)(*(float *)&ScriptParams[2] + v16);
    v27 = v20 < (float)(*(float *)&ScriptParams[2] + v16);
    goto LABEL_25;
  }
  if ( v22 )
  {
    v23 = 0;
    goto LABEL_30;
  }
  v23 = 0;
  if ( v20 >= (float)(*(float *)&ScriptParams[2] - v16) && v20 <= (float)(*(float *)&ScriptParams[2] + v16) )
  {
    v28 = *(float *)&ScriptParams[3] - v2.n64_f32[0];
    v29 = v17[2];
    v30 = *(float *)&ScriptParams[3] + v2.n64_f32[0];
    v24 = 0;
    v23 = 0;
    v25 = v29 < v28;
    v26 = v29 == v30;
    v27 = v29 < v30;
LABEL_25:
    if ( !v25 )
      v24 = 1;
    if ( v27 || v26 )
      v23 = 1;
    v23 &= v24;
  }
LABEL_30:
  NotForLatestExpression = this->NotForLatestExpression;
  AndOrState = this->AndOrState;
  v33 = v23 ^ (NotForLatestExpression != 0);
  if ( this->AndOrState )
  {
    if ( AndOrState > 8 )
    {
      if ( (unsigned __int16)(AndOrState - 21) > 7u )
        goto LABEL_38;
      v35 = AndOrState - 1;
      v33 |= this->CmpFlag;
      if ( AndOrState == 21 )
        v35 = 0;
      this->AndOrState = v35;
    }
    else
    {
      CmpFlag = this->CmpFlag;
      this->AndOrState = AndOrState - 1;
      v33 &= CmpFlag;
    }
  }
  this->CmpFlag = v33;
LABEL_38:
  if ( v18 )
  {
    v2.n64_f32[0] = v10 + v16;
    v3.n64_f32[0] = v10 - v16;
    v36 = (char *)this + (unsigned int)this->PCPointer;
    if ( CurrCommand == 1254 )
    {
      v37 = vmax_f32(v3, v2).n64_f32[0];
      v38 = vmax_f32(v5, v4).n64_f32[0];
      v39 = vmin_f32(v5, v4).n64_f32[0];
      v40 = (float)(vmin_f32(v3, v2).n64_f32[0] + v37) * 0.5;
      pCoors.y = v40;
      pCoors.x = (float)(v39 + v38) * 0.5;
      if ( v11 <= -100.0 )
        v11 = CWorld::FindGroundZForCoord((float)(v39 + v38) * 0.5, v40) + 2.0;
      pCoors.z = v11;
      CShadows::RenderIndicatorShadow(
        (u_native)v36,
        2u,
        0,
        &pCoors,
        v38 - (float)((float)(v39 + v38) * 0.5),
        0.0,
        0.0,
        v40 - v37,
        0);
      return;
    }
    v41 = vmax_f32(v3, v2).n64_f32[0];
    v42 = vmax_f32(v5, v4).n64_f32[0];
    pCoors.y = (float)(vmin_f32(v3, v2).n64_f32[0] + v41) * 0.5;
    pCoors.x = (float)(vmin_f32(v5, v4).n64_f32[0] + v42) * 0.5;
    pCoors.z = CWorld::FindGroundZForCoord(pCoors.x, pCoors.y) + 2.0;
    CShadows::RenderIndicatorShadow((u_native)v36, 2u, 0, &pCoors, v42 - pCoors.x, 0.0, 0.0, pCoors.y - v41, 0);
  }
  if ( CurrCommand != 1254 && CTheScripts::DbgFlag )
    CTheScripts::DrawDebugSquare(v5.n64_f32[0], v10 - v16, v4.n64_f32[0], v10 + v16);
}
// 34BE66: variable 'v2' is possibly undefined
// 34BEF2: variable 'v3' is possibly undefined
// 34BEFA: variable 'v5' is possibly undefined
// 34BEFA: variable 'v4' is possibly undefined
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0034C02C) --------------------------------------------------------
void __fastcall CRunningScript::CharInAngledAreaCheckCommand(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d1
  float v3; // s18
  float32x2_t v4; // d10
  float v5; // s22
  unsigned int v7; // r6
  Int16 v8; // r1
  uint8 *v9; // r9
  _BOOL4 v10; // r11
  unsigned int v11; // r5
  float v12; // s28
  float v13; // s30
  Int32 *v14; // r6
  Int32 *v15; // r4
  Int32 v16; // s16
  Int32 v17; // r4
  float v18; // s24
  float i; // s0
  Int32 v20; // r6
  Int32 v21; // r4
  float v22; // r8
  float v23; // s0
  float v24; // s2
  float v25; // s24
  float v26; // s26
  Int32 v27; // r4
  int v28; // r1
  CRunningScript *v29; // r5
  unsigned int v30; // r6
  Bool8 NotForLatestExpression; // r0
  unsigned int AndOrState; // r2
  Bool8 v33; // r0
  Bool8 CmpFlag; // r1
  float v35; // s12
  unsigned int v36; // r0
  float v37; // s10
  float v38; // s1
  float v39; // s14
  int v40; // r1
  Int32 v41; // r3
  float *v42; // r2
  float v43; // s6
  float v44; // s4
  float v45; // s8
  float v46; // s12
  UInt16 v47; // r3
  float v48; // s20
  float v49; // s10
  float v50; // s12
  float v51; // s14
  float v52; // s1
  float v53; // s10
  float v54; // s14
  float v55; // s6
  int v56; // r1
  float v57; // [sp+1Ch] [bp-74h]
  float v58; // [sp+20h] [bp-70h]
  float v59; // [sp+24h] [bp-6Ch]
  unsigned int j; // [sp+28h] [bp-68h]

  v7 = CurrCommand - 1532;
  if ( (unsigned int)(CurrCommand - 1532) <= 5 )
    v8 = 9;
  else
    v8 = 7;
  CRunningScript::CollectParameters(this, v8);
  if ( ScriptParams[0] >= 0
    && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
  {
    v9 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
  }
  else
  {
    v9 = 0;
  }
  v10 = 0;
  if ( (unsigned int)(CurrCommand - 1529) <= 8 && ((1 << (CurrCommand + 7)) & 0x1C7) != 0 )
    v10 = CTheScripts::IsPedStopped((CPed *)v9) == 0;
  v11 = v7;
  v12 = *(float *)&ScriptParams[1];
  v13 = *(float *)&ScriptParams[2];
  v4.n64_u32[0] = ScriptParams[3];
  if ( v7 > 5 )
  {
    v14 = &ScriptParams[5];
    v15 = &ScriptParams[6];
    v16 = ScriptParams[4];
  }
  else
  {
    v14 = &ScriptParams[7];
    v15 = &ScriptParams[8];
    v2.n64_u32[0] = ScriptParams[6];
    v16 = ScriptParams[5];
    LODWORD(v5) = vmin_f32(v4, v2).n64_u32[0];
    LODWORD(v3) = vmax_f32(v4, v2).n64_u32[0];
    v4.n64_u32[0] = ScriptParams[4];
  }
  v17 = *v15;
  v18 = *(float *)v14;
  v58 = *(float *)&ScriptParams[2];
  v59 = v4.n64_f32[0];
  v57 = *(float *)&ScriptParams[1];
  for ( i = CGeneral::GetRadianAngleBetweenPoints(
              *(float *)&ScriptParams[1],
              *(float *)&ScriptParams[2],
              v4.n64_f32[0],
              *(float *)&v16)
          + 1.5708; i < 0.0; i = i + 6.2832 )
    ;
  v20 = v17;
  v21 = CurrCommand;
  for ( j = v11; i > 6.2832; i = i + -6.2832 )
    ;
  v22 = sinf(i);
  v23 = v18 * cosf(i);
  v24 = v18 * v22;
  v25 = v13 - v23;
  v26 = v12 + v24;
  if ( v10 )
  {
    v27 = v20;
    LOBYTE(v28) = 0;
    v29 = this;
    v30 = j;
  }
  else
  {
    v35 = v4.n64_f32[0] - v12;
    v36 = *((_DWORD *)v9 + 289);
    v37 = *(float *)&v16 - v13;
    v38 = (float)(v37 * v37) + (float)(v35 * v35);
    if ( (v36 & 0x100) != 0 && *((_DWORD *)v9 + 356) )
      v9 = (uint8 *)*((_DWORD *)v9 + 356);
    v39 = sqrtf(v38);
    v40 = *((_DWORD *)v9 + 5);
    v41 = v21;
    v27 = v20;
    v42 = (float *)(v40 + 48);
    if ( !v40 )
      v42 = (float *)(v9 + 4);
    v43 = *v42 - v12;
    v44 = v42[2];
    v45 = v42[1] - v13;
    if ( v38 <= 0.0 )
    {
      v46 = 1.0;
    }
    else
    {
      v37 = v37 * (float)(1.0 / v39);
      v46 = v35 * (float)(1.0 / v39);
    }
    v30 = v11;
    v29 = this;
    LOBYTE(v28) = 0;
    v49 = (float)(v43 * v46) + (float)(v45 * v37);
    if ( v49 >= 0.0 && v49 <= v39 )
    {
      v50 = v25 - v13;
      v51 = v26 - v12;
      v52 = (float)(v51 * v51) + (float)(v50 * v50);
      v53 = sqrtf(v52);
      if ( v52 <= 0.0 )
      {
        v54 = 1.0;
      }
      else
      {
        v50 = v50 * (float)(1.0 / v53);
        v54 = v51 * (float)(1.0 / v53);
      }
      LOBYTE(v28) = 0;
      v55 = (float)(v43 * v54) + (float)(v45 * v50);
      if ( v55 >= 0.0 && v55 <= v53 )
      {
        if ( j > 5 || (LOBYTE(v28) = 0, v44 >= v5) && v44 <= v3 )
        {
          if ( (unsigned int)(v41 - 1526) > 0xB )
          {
            LOBYTE(v28) = 0;
          }
          else
          {
            v56 = 1 << (v41 + 10);
            if ( (v56 & 0x249) != 0 )
            {
              LOBYTE(v28) = 1;
            }
            else if ( (v56 & 0x492) != 0 )
            {
              LOBYTE(v28) = ((v36 >> 8) & 1) == 0;
            }
            else
            {
              v28 = (v36 >> 8) & 1;
            }
          }
        }
      }
    }
  }
  NotForLatestExpression = v29->NotForLatestExpression;
  AndOrState = v29->AndOrState;
  v33 = (NotForLatestExpression != 0) ^ v28;
  if ( v29->AndOrState )
  {
    if ( AndOrState > 8 )
    {
      if ( (unsigned __int16)(AndOrState - 21) > 7u )
        goto LABEL_35;
      v47 = AndOrState - 1;
      v33 |= v29->CmpFlag;
      if ( AndOrState == 21 )
        v47 = 0;
      v29->AndOrState = v47;
    }
    else
    {
      CmpFlag = v29->CmpFlag;
      v29->AndOrState = AndOrState - 1;
      v33 &= CmpFlag;
    }
  }
  v29->CmpFlag = v33;
LABEL_35:
  v48 = v4.n64_f32[0] + v24;
  if ( v27 )
  {
    if ( v30 <= 5 )
    {
      CTheScripts::HighlightImportantAngledArea(
        (u_native)&v29->PCPointer[(unsigned int)v29],
        v57,
        v58,
        v59,
        *(float *)&v16,
        v48,
        *(float *)&v16 - v23,
        v26,
        v25,
        (float)(v3 + v5) * 0.5);
      return;
    }
    CTheScripts::HighlightImportantAngledArea(
      (u_native)&v29->PCPointer[(unsigned int)v29],
      v57,
      v58,
      v59,
      *(float *)&v16,
      v48,
      *(float *)&v16 - v23,
      v26,
      v25,
      -100.0);
  }
  if ( v30 >= 6 )
  {
    if ( CTheScripts::DbgFlag )
      CTheScripts::DrawDebugAngledSquare(v57, v58, v59, *(float *)&v16, v48, *(float *)&v16 - v23, v26, v25);
  }
}
// 34C0DE: variable 'v4' is possibly undefined
// 34C0DE: variable 'v2' is possibly undefined
// 34C270: variable 'v3' is possibly undefined
// 34C270: variable 'v5' is possibly undefined
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0034C3F8) --------------------------------------------------------
void __fastcall CTheScripts::HighlightImportantAngledArea(
        u_native AreaID,
        float X1,
        float Y1,
        float X2,
        float Y2,
        float X3,
        float Y3,
        float X4,
        float Y4,
        float CentreZ)
{
  float v11; // s10
  float v12; // s2
  float v13; // s3
  float v14; // s4
  float v15; // s16
  float v16; // s18
  float v17; // s1
  float v18; // s14
  float v19; // s6
  float v20; // s8
  float GroundZForCoord; // s6
  float v22; // s22
  float v23; // s20
  CVector pCoors; // [sp+14h] [bp-34h] BYREF

  v11 = (float)(X2 + X3) * 0.5;
  v12 = (float)(X1 + X2) * 0.5;
  v13 = (float)(Y2 + Y3) * 0.5;
  v14 = (float)(Y1 + Y2) * 0.5;
  if ( v11 >= v12 )
  {
    if ( v11 <= v12 )
      v15 = (float)(X1 + X2) * 0.5;
    else
      v15 = (float)(X2 + X3) * 0.5;
  }
  else
  {
    v15 = (float)(X1 + X2) * 0.5;
    v12 = (float)(X2 + X3) * 0.5;
  }
  if ( v13 >= v14 )
  {
    if ( v13 <= v14 )
      v16 = (float)(Y1 + Y2) * 0.5;
    else
      v16 = (float)(Y2 + Y3) * 0.5;
  }
  else
  {
    v16 = (float)(Y1 + Y2) * 0.5;
    v14 = (float)(Y2 + Y3) * 0.5;
  }
  v17 = (float)(X3 + X4) * 0.5;
  v18 = (float)(Y3 + Y4) * 0.5;
  if ( v17 >= v12 )
  {
    if ( v17 > v15 )
      v15 = (float)(X3 + X4) * 0.5;
  }
  else
  {
    v12 = (float)(X3 + X4) * 0.5;
  }
  if ( v18 >= v14 )
  {
    if ( v18 > v16 )
      v16 = (float)(Y3 + Y4) * 0.5;
  }
  else
  {
    v14 = (float)(Y3 + Y4) * 0.5;
  }
  v19 = (float)(X1 + X4) * 0.5;
  v20 = (float)(Y1 + Y4) * 0.5;
  if ( v19 >= v12 )
  {
    if ( v19 > v15 )
      v15 = (float)(X1 + X4) * 0.5;
  }
  else
  {
    v12 = (float)(X1 + X4) * 0.5;
  }
  GroundZForCoord = CentreZ;
  if ( v20 >= v14 )
  {
    if ( v20 > v16 )
      v16 = (float)(Y1 + Y4) * 0.5;
  }
  else
  {
    v14 = (float)(Y1 + Y4) * 0.5;
  }
  v22 = (float)(v16 + v14) * 0.5;
  v23 = (float)(v15 + v12) * 0.5;
  pCoors.y = v22;
  pCoors.x = v23;
  if ( CentreZ <= -100.0 )
    GroundZForCoord = CWorld::FindGroundZForCoord(v23, v22);
  pCoors.z = GroundZForCoord;
  CShadows::RenderIndicatorShadow(AreaID, 2u, 0, &pCoors, v15 - v23, 0.0, 0.0, v22 - v16, 0);
}

//----- (0034C58E) --------------------------------------------------------
void __fastcall CTheScripts::DrawDebugAngledSquare(
        float X1,
        float Y1,
        float X2,
        float Y2,
        float X3,
        float Y3,
        float X4,
        float Y4)
{
  CEntity *refEntityPtr; // [sp+20h] [bp-88h] BYREF
  CColPoint colPoint; // [sp+24h] [bp-84h] BYREF
  CVector v12; // [sp+50h] [bp-58h] BYREF
  CVector v13; // [sp+5Ch] [bp-4Ch] BYREF
  CVector v14; // [sp+68h] [bp-40h] BYREF
  CVector vecStart; // [sp+74h] [bp-34h] BYREF

  vecStart.x = X1;
  vecStart.y = Y1;
  vecStart.z = -1000.0;
  CWorld::ProcessVerticalLine(&vecStart, 1000.0, &colPoint, &refEntityPtr, 1, 0, 0, 0, 1, 0, 0);
  v14.x = X2;
  v14.y = Y2;
  v14.z = -1000.0;
  vecStart.z = colPoint.m_vecPosition.z + 2.0;
  CWorld::ProcessVerticalLine(&v14, 1000.0, &colPoint, &refEntityPtr, 1, 0, 0, 0, 1, 0, 0);
  v13.x = X3;
  v13.y = Y3;
  v13.z = -1000.0;
  v14.z = colPoint.m_vecPosition.z + 2.0;
  CWorld::ProcessVerticalLine(&v13, 1000.0, &colPoint, &refEntityPtr, 1, 0, 0, 0, 1, 0, 0);
  v12.x = X4;
  v12.y = Y4;
  v12.z = -1000.0;
  v13.z = colPoint.m_vecPosition.z + 2.0;
  CWorld::ProcessVerticalLine(&v12, 1000.0, &colPoint, &refEntityPtr, 1, 0, 0, 0, 1, 0, 0);
}

//----- (0034C69C) --------------------------------------------------------
void __fastcall CRunningScript::ObjectInAngledAreaCheckCommand(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d1
  float v3; // s18
  float32x2_t v4; // d10
  float v5; // s22
  Int16 v8; // r1
  uint8 *v9; // r8
  float v10; // s28
  float v11; // s30
  Int32 *v12; // r0
  Int32 v13; // s16
  Int32 *v14; // r1
  float v15; // r11
  float v16; // s24
  float i; // s0
  float v18; // r10
  float v19; // s14
  float v20; // s12
  float v21; // s0
  int v22; // r0
  float *v23; // r1
  float v24; // s0
  float v25; // s2
  float v26; // s8
  float v27; // s1
  float v28; // s4
  float v29; // s6
  float v30; // s10
  float v31; // s14
  char v32; // r0
  float v33; // s26
  float v34; // s12
  float v35; // s12
  float v36; // s14
  float v37; // s1
  float v38; // s10
  float v39; // s14
  char v40; // r1
  char v41; // r0
  float v42; // s6
  char v43; // r1
  char v44; // r0
  Bool8 NotForLatestExpression; // r2
  unsigned int AndOrState; // r1
  Bool8 v47; // r0
  Bool8 CmpFlag; // r2
  UInt16 v49; // r3
  float v50; // s20
  float X2; // [sp+20h] [bp-68h]
  Int32 v52; // [sp+24h] [bp-64h]

  if ( CurrCommand == 2276 )
    v8 = 9;
  else
    v8 = 7;
  CRunningScript::CollectParameters(this, v8);
  if ( ScriptParams[0] >= 0
    && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
  {
    v9 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
  }
  else
  {
    v9 = 0;
  }
  v10 = *(float *)&ScriptParams[1];
  v11 = *(float *)&ScriptParams[2];
  v4.n64_u32[0] = ScriptParams[3];
  if ( CurrCommand == 2276 )
  {
    v12 = &ScriptParams[7];
    v2.n64_u32[0] = ScriptParams[6];
    v13 = ScriptParams[5];
    v14 = &ScriptParams[8];
    LODWORD(v5) = vmin_f32(v4, v2).n64_u32[0];
    LODWORD(v3) = vmax_f32(v4, v2).n64_u32[0];
    v4.n64_u32[0] = ScriptParams[4];
  }
  else
  {
    v12 = &ScriptParams[5];
    v14 = &ScriptParams[6];
    v13 = ScriptParams[4];
  }
  v15 = *(float *)&ScriptParams[1];
  v52 = *v14;
  v16 = *(float *)v12;
  X2 = v4.n64_f32[0];
  for ( i = CGeneral::GetRadianAngleBetweenPoints(
              *(float *)&ScriptParams[1],
              *(float *)&ScriptParams[2],
              v4.n64_f32[0],
              *(float *)&v13)
          + 1.5708; i < 0.0; i = i + 6.2832 )
    ;
  for ( ; i > 6.2832; i = i + -6.2832 )
    ;
  v18 = sinf(i);
  v19 = v4.n64_f32[0] - v10;
  v20 = *(float *)&v13 - v11;
  v21 = cosf(i);
  v22 = *((_DWORD *)v9 + 5);
  v23 = (float *)(v22 + 48);
  if ( !v22 )
    v23 = (float *)(v9 + 4);
  v24 = v16 * v21;
  v25 = v16 * v18;
  v26 = v23[1] - v11;
  v27 = (float)(v20 * v20) + (float)(v19 * v19);
  v28 = v23[2];
  v29 = *v23 - v10;
  v30 = sqrtf(v27);
  if ( v27 <= 0.0 )
  {
    v31 = 1.0;
  }
  else
  {
    v20 = v20 * (float)(1.0 / v30);
    v31 = v19 * (float)(1.0 / v30);
  }
  v32 = 0;
  v33 = v10 + v25;
  v34 = (float)(v29 * v31) + (float)(v26 * v20);
  if ( v34 >= 0.0 && v34 <= v30 )
  {
    v35 = (float)(v11 - v24) - v11;
    v36 = v33 - v10;
    v37 = (float)(v36 * v36) + (float)(v35 * v35);
    v38 = sqrtf(v37);
    if ( v37 <= 0.0 )
    {
      v39 = 1.0;
    }
    else
    {
      v35 = v35 * (float)(1.0 / v38);
      v39 = v36 * (float)(1.0 / v38);
    }
    v40 = 0;
    v41 = 0;
    v42 = (float)(v29 * v39) + (float)(v26 * v35);
    if ( v42 <= v38 )
      v40 = 1;
    if ( v42 >= 0.0 )
      v41 = 1;
    v32 = v41 & v40;
    if ( v42 >= 0.0 && v42 <= v38 && CurrCommand == 2276 )
    {
      v43 = 0;
      v44 = 0;
      if ( v28 >= v5 )
        v43 = 1;
      if ( v28 <= v3 )
        v44 = 1;
      v32 = v44 & v43;
    }
  }
  NotForLatestExpression = this->NotForLatestExpression;
  AndOrState = this->AndOrState;
  v47 = v32 ^ (NotForLatestExpression != 0);
  if ( this->AndOrState )
  {
    if ( AndOrState > 8 )
    {
      if ( (unsigned __int16)(AndOrState - 21) > 7u )
        goto LABEL_45;
      v49 = AndOrState - 1;
      v47 |= this->CmpFlag;
      if ( AndOrState == 21 )
        v49 = 0;
      this->AndOrState = v49;
    }
    else
    {
      CmpFlag = this->CmpFlag;
      this->AndOrState = AndOrState - 1;
      v47 &= CmpFlag;
    }
  }
  this->CmpFlag = v47;
LABEL_45:
  v50 = v4.n64_f32[0] + v25;
  if ( v52 )
  {
    if ( CurrCommand == 2276 )
    {
      CTheScripts::HighlightImportantAngledArea(
        (u_native)&this->PCPointer[(unsigned int)this],
        v15,
        v11,
        X2,
        *(float *)&v13,
        v50,
        *(float *)&v13 - v24,
        v33,
        v11 - v24,
        (float)(v3 + v5) * 0.5);
      return;
    }
    CTheScripts::HighlightImportantAngledArea(
      (u_native)&this->PCPointer[(unsigned int)this],
      v15,
      v11,
      X2,
      *(float *)&v13,
      v50,
      *(float *)&v13 - v24,
      v33,
      v11 - v24,
      -100.0);
  }
  if ( CurrCommand != 2276 )
  {
    if ( CTheScripts::DbgFlag )
      CTheScripts::DrawDebugAngledSquare(v15, v11, X2, *(float *)&v13, v50, *(float *)&v13 - v24, v33, v11 - v24);
  }
}
// 34C724: variable 'v4' is possibly undefined
// 34C724: variable 'v2' is possibly undefined
// 34C8DA: variable 'v5' is possibly undefined
// 34C8E2: variable 'v3' is possibly undefined
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0034CA00) --------------------------------------------------------
void __fastcall CRunningScript::FlameInAngledAreaCheckCommand(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float v4; // s16
  float v5; // s18
  Int32 *v8; // r1
  Int32 *v9; // r2
  Int32 *v10; // r0
  Int32 *v11; // r5
  float v12; // s20
  float v13; // s22
  float v14; // s24
  Int32 v15; // r4
  float v16; // s28
  float v17; // s30
  float v18; // r11
  float i; // s0
  float v20; // r10
  float v21; // s23
  int v22; // r4
  float v23; // s25
  unsigned __int16 v24; // r5
  float v25; // s29
  float v26; // s27
  float v27; // s31
  float v28; // s24
  float v29; // s26
  float v30; // s4
  float v31; // s2
  float v32; // s0
  float v33; // s4
  int v34; // r0
  float v35; // s4
  float v36; // s4
  float v37; // s4
  int v38; // r0
  int v39; // r1
  int v40; // r2
  int v41; // r3
  float v42; // s0
  int v43; // r1
  unsigned int AndOrState; // r2
  Int32 v45; // r6
  Bool8 CmpFlag; // r0
  Bool8 v47; // r0
  UInt16 v48; // r3
  float v49; // s22
  float Y2; // [sp+18h] [bp-88h]
  float v51; // [sp+1Ch] [bp-84h]
  float v52; // [sp+20h] [bp-80h]
  float v53; // [sp+24h] [bp-7Ch]
  float v54; // [sp+28h] [bp-78h]
  float v55; // [sp+2Ch] [bp-74h]
  Int32 j; // [sp+30h] [bp-70h]
  CVector vecFlamePosition; // [sp+34h] [bp-6Ch] BYREF

  if ( CurrCommand == 1838 )
  {
    CRunningScript::CollectParameters(this, 8);
    v8 = &ScriptParams[3];
    v9 = &ScriptParams[4];
    v2.n64_u32[0] = ScriptParams[2];
    v10 = &ScriptParams[6];
    v3.n64_u32[0] = ScriptParams[5];
    v11 = &ScriptParams[7];
    LODWORD(v5) = vmin_f32(v2, v3).n64_u32[0];
    LODWORD(v4) = vmax_f32(v2, v3).n64_u32[0];
  }
  else
  {
    CRunningScript::CollectParameters(this, 6);
    v8 = &ScriptParams[2];
    v9 = &ScriptParams[3];
    v10 = &ScriptParams[4];
    v11 = &ScriptParams[5];
  }
  v12 = *(float *)v9;
  v13 = *(float *)v8;
  v14 = *(float *)v10;
  v15 = *v11;
  v16 = *(float *)ScriptParams;
  v17 = *(float *)&ScriptParams[1];
  v18 = *(float *)ScriptParams;
  v53 = *(float *)&ScriptParams[1];
  v54 = *(float *)v8;
  Y2 = *(float *)v9;
  for ( i = CGeneral::GetRadianAngleBetweenPoints(
              *(float *)ScriptParams,
              *(float *)&ScriptParams[1],
              *(float *)v8,
              *(float *)v9)
          + 1.5708; i < 0.0; i = i + 6.2832 )
    ;
  for ( j = v15; i > 6.2832; i = i + -6.2832 )
    ;
  v20 = sinf(i);
  v21 = v14 * cosf(i);
  v22 = 0;
  v23 = v12 - v17;
  v24 = 0;
  v25 = v13 - v16;
  v55 = v14 * v20;
  v26 = (float)(v17 - v21) - v17;
  v52 = v17 - v21;
  v27 = (float)(v16 + (float)(v14 * v20)) - v16;
  v51 = v16 + (float)(v14 * v20);
  if ( CurrCommand != 1838 )
    v22 = 1;
  v28 = sqrtf((float)(v25 * v25) + (float)(v23 * v23));
  v29 = sqrtf((float)(v27 * v27) + (float)(v26 * v26));
  do
  {
    if ( CShotInfo::GetPositionOfPossibleFlame(v24, &vecFlamePosition) )
    {
      v30 = (float)(v25 * v25) + (float)(v23 * v23);
      v31 = vecFlamePosition.y - v17;
      v32 = vecFlamePosition.x - v16;
      if ( v30 <= 0.0 )
      {
        v25 = 1.0;
      }
      else
      {
        v33 = 1.0 / sqrtf(v30);
        v23 = v23 * v33;
        v25 = v25 * v33;
      }
      v34 = 0;
      v35 = (float)(v32 * v25) + (float)(v31 * v23);
      if ( v35 >= 0.0 && v35 <= v28 )
      {
        v36 = (float)(v27 * v27) + (float)(v26 * v26);
        if ( v36 <= 0.0 )
        {
          v27 = 1.0;
        }
        else
        {
          v37 = 1.0 / sqrtf(v36);
          v26 = v26 * v37;
          v27 = v27 * v37;
        }
        v38 = 0;
        v39 = 0;
        v40 = 0;
        v41 = 0;
        v42 = (float)(v32 * v27) + (float)(v31 * v26);
        if ( v42 <= v29 )
          v38 = 1;
        if ( v42 >= 0.0 )
          v39 = 1;
        if ( v42 > v29 )
          v40 = 1;
        if ( v42 < 0.0 )
          v41 = 1;
        if ( !(v40 | v41 | v22) )
        {
          v38 = 0;
          v39 = 0;
          if ( vecFlamePosition.z >= v5 )
            v38 = 1;
          if ( vecFlamePosition.z <= v4 )
            v39 = 1;
        }
        v34 = v38 & v39;
      }
    }
    else
    {
      v34 = 0;
    }
    ++v24;
    v43 = v34 ^ 1;
  }
  while ( v24 <= 0x63u && v43 );
  AndOrState = this->AndOrState;
  if ( !this->NotForLatestExpression )
    LOBYTE(v43) = v34;
  if ( !this->AndOrState )
  {
    this->CmpFlag = v43;
    v45 = j;
    goto LABEL_48;
  }
  v45 = j;
  if ( AndOrState > 8 )
  {
    if ( (unsigned __int16)(AndOrState - 21) > 7u )
      goto LABEL_48;
    v48 = AndOrState - 1;
    v47 = this->CmpFlag | v43;
    if ( AndOrState == 21 )
      v48 = 0;
    this->AndOrState = v48;
  }
  else
  {
    CmpFlag = this->CmpFlag;
    this->AndOrState = AndOrState - 1;
    v47 = CmpFlag & v43;
  }
  this->CmpFlag = v47;
LABEL_48:
  v49 = v13 + v55;
  if ( v45 )
  {
    if ( CurrCommand == 1838 )
    {
      CTheScripts::HighlightImportantAngledArea(
        (u_native)&this->PCPointer[(unsigned int)this],
        v18,
        v53,
        v54,
        v12,
        v49,
        v12 - v21,
        v51,
        v52,
        (float)(v4 + v5) * 0.5);
      return;
    }
    CTheScripts::HighlightImportantAngledArea(
      (u_native)&this->PCPointer[(unsigned int)this],
      v18,
      v53,
      v54,
      v12,
      v49,
      v12 - v21,
      v51,
      v52,
      -100.0);
  }
  if ( CurrCommand != 1838 )
  {
    if ( CTheScripts::DbgFlag )
      CTheScripts::DrawDebugAngledSquare(v18, v53, v54, Y2, v49, v12 - v21, v51, v52);
  }
}
// 34CA42: variable 'v2' is possibly undefined
// 34CA42: variable 'v3' is possibly undefined
// 34CC60: variable 'v5' is possibly undefined
// 34CC68: variable 'v4' is possibly undefined
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0034CDB8) --------------------------------------------------------
void __fastcall CRunningScript::CharInAreaCheckCommand(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float v3; // s2
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  float32x2_t v6; // d4
  float32x2_t v7; // d5
  unsigned __int64 v8; // d6
  int v11; // r8
  uint8 *v12; // r6
  bool v13; // zf
  int v14; // r0
  int v15; // r1
  float *v16; // r2
  float v17; // s28
  float v18; // s26
  float v19; // s24
  _BOOL4 v20; // r2
  Int32 *v21; // r0
  float32x2_t v22; // d8
  Int32 v23; // r0
  float32x2_t v24; // d11
  int v25; // r1
  float32x2_t v26; // d10
  float32x2_t v27; // d9
  int v28; // r1
  Bool8 NotForLatestExpression; // r3
  unsigned int AndOrState; // r2
  Bool8 v31; // r1
  Bool8 CmpFlag; // r3
  UInt16 v33; // r6
  float v34; // s24
  float v35; // s4
  float v36; // s16
  char *v37; // r4
  float v38; // s8
  float v39; // s0
  float v40; // s24
  UInt8 *PCPointer; // r5
  float v42; // s26
  int v43; // r2
  CVector pCoors; // [sp+14h] [bp-5Ch] BYREF

  if ( (unsigned int)(CurrCommand - 422) < 5 || CurrCommand == 164 )
  {
    CRunningScript::CollectParameters(this, 8);
    v11 = 1;
  }
  else
  {
    CRunningScript::CollectParameters(this, 6);
    v11 = 0;
  }
  if ( ScriptParams[0] >= 0
    && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
  {
    v12 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
  }
  else
  {
    v12 = 0;
  }
  v14 = v12[1157] << 31;
  v13 = v14 == 0;
  if ( v14 )
  {
    v14 = *((_DWORD *)v12 + 356);
    v13 = v14 == 0;
  }
  if ( v13 )
    v14 = (int)v12;
  v15 = *(_DWORD *)(v14 + 20);
  v16 = (float *)(v15 + 48);
  if ( !v15 )
    v16 = (float *)(v14 + 4);
  v17 = *v16;
  v18 = v16[1];
  v19 = v16[2];
  v20 = 0;
  if ( (unsigned int)(CurrCommand - 419) <= 7 && ((1 << (CurrCommand + 93)) & 0xE7) != 0 )
    v20 = CTheScripts::IsPedStopped((CPed *)v12) == 0;
  v4.n64_u32[0] = ScriptParams[1];
  v5.n64_u32[0] = ScriptParams[2];
  v7.n64_u32[0] = ScriptParams[3];
  v6.n64_u32[0] = ScriptParams[4];
  if ( v11 == 1 )
  {
    v2.n64_u32[0] = ScriptParams[6];
    LODWORD(v8) = ScriptParams[5];
    v21 = &ScriptParams[7];
    LODWORD(v3) = vmax_f32(v7, v2).n64_u32[0];
    v2.n64_u32[0] = vmin_f32(v7, v2).n64_u32[0];
    v7.n64_u64[0] = v6.n64_u64[0];
    v6.n64_u64[0] = v8;
  }
  else
  {
    v21 = &ScriptParams[5];
  }
  v22.n64_u64[0] = vmax_f32(v5, v6).n64_u64[0];
  v23 = *v21;
  v24.n64_u64[0] = vmin_f32(v5, v6).n64_u64[0];
  v25 = 0;
  v26.n64_u64[0] = vmin_f32(v4, v7).n64_u64[0];
  v27.n64_u64[0] = vmax_f32(v4, v7).n64_u64[0];
  if ( !v20 )
  {
    if ( v17 < v26.n64_f32[0] )
      v25 = 1;
    v28 = v25 | (v17 > v27.n64_f32[0]);
    if ( v11 == 1 )
    {
      if ( v28 )
        goto LABEL_33;
      LOBYTE(v25) = 0;
      if ( v18 < v24.n64_f32[0] )
        goto LABEL_34;
      if ( v18 > v22.n64_f32[0] )
        goto LABEL_34;
      LOBYTE(v25) = 0;
      if ( v19 < v2.n64_f32[0] || v19 > v3 )
        goto LABEL_34;
LABEL_53:
      if ( (unsigned int)(CurrCommand - 417) <= 9 )
      {
        v43 = 1 << (CurrCommand + 95);
        if ( (v43 & 0x129) != 0 )
        {
          LOBYTE(v25) = (v12[1157] & 1) == 0;
          goto LABEL_34;
        }
        if ( (v43 & 0x252) != 0 )
        {
          v25 = (*((_DWORD *)v12 + 289) >> 8) & 1;
          goto LABEL_34;
        }
        goto LABEL_59;
      }
      if ( (unsigned int)(CurrCommand - 163) < 2 )
      {
LABEL_59:
        LOBYTE(v25) = 1;
        goto LABEL_34;
      }
LABEL_33:
      LOBYTE(v25) = 0;
      goto LABEL_34;
    }
    if ( v28 )
      goto LABEL_33;
    LOBYTE(v25) = 0;
    if ( v18 >= v24.n64_f32[0] && v18 <= v22.n64_f32[0] )
      goto LABEL_53;
  }
LABEL_34:
  NotForLatestExpression = this->NotForLatestExpression;
  AndOrState = this->AndOrState;
  v31 = v25 ^ (NotForLatestExpression != 0);
  if ( this->AndOrState )
  {
    if ( AndOrState > 8 )
    {
      if ( (unsigned __int16)(AndOrState - 21) > 7u )
        goto LABEL_42;
      v33 = AndOrState - 1;
      v31 |= this->CmpFlag;
      if ( AndOrState == 21 )
        v33 = 0;
      this->AndOrState = v33;
    }
    else
    {
      CmpFlag = this->CmpFlag;
      this->AndOrState = AndOrState - 1;
      v31 &= CmpFlag;
    }
  }
  this->CmpFlag = v31;
LABEL_42:
  if ( v23 )
  {
    if ( v11 == 1 )
    {
      v34 = vmax_f32(v24, v22).n64_f32[0];
      v35 = vmin_f32(v24, v22).n64_f32[0];
      v36 = vmax_f32(v26, v27).n64_f32[0];
      v37 = (char *)this + (unsigned int)this->PCPointer;
      v38 = vmin_f32(v26, v27).n64_f32[0];
      v39 = (float)(v2.n64_f32[0] + v3) * 0.5;
      pCoors.y = (float)(v35 + v34) * 0.5;
      pCoors.x = (float)(v38 + v36) * 0.5;
      if ( v39 <= -100.0 )
        v39 = CWorld::FindGroundZForCoord((float)(v38 + v36) * 0.5, (float)(v35 + v34) * 0.5) + 2.0;
      pCoors.z = v39;
      CShadows::RenderIndicatorShadow(
        (u_native)v37,
        2u,
        0,
        &pCoors,
        v36 - (float)((float)(v38 + v36) * 0.5),
        0.0,
        0.0,
        (float)((float)(v35 + v34) * 0.5) - v34,
        0);
      return;
    }
    v40 = vmax_f32(v26, v27).n64_f32[0];
    PCPointer = this->PCPointer;
    v42 = vmax_f32(v24, v22).n64_f32[0];
    pCoors.y = (float)(vmin_f32(v24, v22).n64_f32[0] + v42) * 0.5;
    pCoors.x = (float)(vmin_f32(v26, v27).n64_f32[0] + v40) * 0.5;
    pCoors.z = CWorld::FindGroundZForCoord(pCoors.x, pCoors.y) + 2.0;
    CShadows::RenderIndicatorShadow(
      (u_native)this + (_DWORD)PCPointer,
      2u,
      0,
      &pCoors,
      v40 - pCoors.x,
      0.0,
      0.0,
      pCoors.y - v42,
      0);
  }
  if ( !(v11 | (CTheScripts::DbgFlag == 0)) )
    CTheScripts::DrawDebugSquare(v26.n64_f32[0], v24.n64_f32[0], v27.n64_f32[0], v22.n64_f32[0]);
}
// 34CE8A: variable 'v7' is possibly undefined
// 34CE8A: variable 'v2' is possibly undefined
// 34CE92: variable 'v6' is possibly undefined
// 34CE96: variable 'v8' is possibly undefined
// 34CE9E: variable 'v5' is possibly undefined
// 34CEAA: variable 'v4' is possibly undefined
// 34CF06: variable 'v3' is possibly undefined
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0034D11C) --------------------------------------------------------
void __fastcall CRunningScript::CarInAreaCheckCommand(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  float32x2_t v6; // d4
  float32x2_t v7; // d5
  unsigned __int64 v8; // d6
  bool v10; // zf
  int v12; // r6
  uint8 *v13; // r1
  int v14; // r2
  Int32 *v15; // r0
  float32x2_t v16; // d8
  Int32 v17; // r0
  float32x2_t v18; // d11
  int v19; // r3
  float32x2_t v20; // d10
  float32x2_t v21; // d9
  Bool8 NotForLatestExpression; // r1
  unsigned int AndOrState; // r2
  Bool8 v24; // r1
  Bool8 CmpFlag; // r3
  int v26; // r5
  float *v27; // r2
  int v28; // r1
  float v29; // s4
  int v30; // r1
  float v31; // s4
  char v32; // r2
  char v33; // r1
  UInt16 v34; // r5
  float v35; // s24
  float v36; // s4
  float v37; // s16
  char *v38; // r4
  float v39; // s8
  float v40; // s0
  float v41; // s24
  UInt8 *PCPointer; // r5
  float v43; // s26
  CVector pCoors; // [sp+14h] [bp-5Ch] BYREF

  v10 = CurrCommand == 428;
  if ( CurrCommand != 428 )
    v10 = CurrCommand == 177;
  if ( v10 )
  {
    CRunningScript::CollectParameters(this, 8);
    v12 = 1;
  }
  else
  {
    CRunningScript::CollectParameters(this, 6);
    v12 = 0;
  }
  if ( ScriptParams[0] >= 0
    && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
  {
    v13 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
  }
  else
  {
    v13 = 0;
  }
  v14 = 0;
  if ( (unsigned int)(CurrCommand - 427) <= 1 )
  {
    v3.n64_f32[0] = CTimer::ms_fOldTimeStep;
    v4.n64_f32[0] = CTimer::ms_fTimeStep;
    v2.n64_f32[0] = vmin_f32(v4, v3).n64_f32[0] * 0.01;
    v3.n64_u32[0] = *((_DWORD *)v13 + 54);
    if ( v3.n64_f32[0] > v2.n64_f32[0] )
      v14 = 1;
  }
  v4.n64_u32[0] = ScriptParams[1];
  v5.n64_u32[0] = ScriptParams[2];
  v7.n64_u32[0] = ScriptParams[3];
  v6.n64_u32[0] = ScriptParams[4];
  if ( v12 == 1 )
  {
    v2.n64_u32[0] = ScriptParams[6];
    LODWORD(v8) = ScriptParams[5];
    v15 = &ScriptParams[7];
    v3.n64_u32[0] = vmax_f32(v7, v2).n64_u32[0];
    v2.n64_u32[0] = vmin_f32(v7, v2).n64_u32[0];
    v7.n64_u64[0] = v6.n64_u64[0];
    v6.n64_u64[0] = v8;
  }
  else
  {
    v15 = &ScriptParams[5];
  }
  v16.n64_u64[0] = vmax_f32(v5, v6).n64_u64[0];
  v17 = *v15;
  v18.n64_u64[0] = vmin_f32(v5, v6).n64_u64[0];
  v19 = 0;
  v20.n64_u64[0] = vmin_f32(v4, v7).n64_u64[0];
  v21.n64_u64[0] = vmax_f32(v4, v7).n64_u64[0];
  if ( !v14 )
  {
    v26 = *((_DWORD *)v13 + 5);
    v27 = (float *)(v26 + 48);
    if ( !v26 )
      v27 = (float *)(v13 + 4);
    v28 = 0;
    v29 = v27[1];
    if ( *v27 > v21.n64_f32[0] )
      v28 = 1;
    if ( *v27 < v20.n64_f32[0] )
      v19 = 1;
    v30 = v28 | v19;
    LOBYTE(v19) = 0;
    if ( v12 == 1 )
    {
      if ( !v30 && v29 >= v18.n64_f32[0] && v29 <= v16.n64_f32[0] )
      {
        v31 = v27[2];
        v32 = 0;
        v33 = 0;
        if ( v31 >= v2.n64_f32[0] )
          v32 = 1;
        if ( v31 <= v3.n64_f32[0] )
          v33 = 1;
        LOBYTE(v19) = v33 & v32;
      }
    }
    else if ( !v30 )
    {
      if ( v29 <= v16.n64_f32[0] )
        LOBYTE(v19) = 1;
      LOBYTE(v19) = v19 & (v29 >= v18.n64_f32[0]);
    }
  }
  NotForLatestExpression = this->NotForLatestExpression;
  AndOrState = this->AndOrState;
  v24 = (NotForLatestExpression != 0) ^ v19;
  if ( this->AndOrState )
  {
    if ( AndOrState > 8 )
    {
      if ( (unsigned __int16)(AndOrState - 21) > 7u )
        goto LABEL_40;
      v34 = AndOrState - 1;
      v24 |= this->CmpFlag;
      if ( AndOrState == 21 )
        v34 = 0;
      this->AndOrState = v34;
    }
    else
    {
      CmpFlag = this->CmpFlag;
      this->AndOrState = AndOrState - 1;
      v24 &= CmpFlag;
    }
  }
  this->CmpFlag = v24;
LABEL_40:
  if ( v17 )
  {
    if ( v12 == 1 )
    {
      v35 = vmax_f32(v18, v16).n64_f32[0];
      v36 = vmin_f32(v18, v16).n64_f32[0];
      v37 = vmax_f32(v20, v21).n64_f32[0];
      v38 = (char *)this + (unsigned int)this->PCPointer;
      v39 = vmin_f32(v20, v21).n64_f32[0];
      v40 = (float)(v2.n64_f32[0] + v3.n64_f32[0]) * 0.5;
      pCoors.y = (float)(v36 + v35) * 0.5;
      pCoors.x = (float)(v39 + v37) * 0.5;
      if ( v40 <= -100.0 )
        v40 = CWorld::FindGroundZForCoord((float)(v39 + v37) * 0.5, (float)(v36 + v35) * 0.5) + 2.0;
      pCoors.z = v40;
      CShadows::RenderIndicatorShadow(
        (u_native)v38,
        2u,
        0,
        &pCoors,
        v37 - (float)((float)(v39 + v37) * 0.5),
        0.0,
        0.0,
        (float)((float)(v36 + v35) * 0.5) - v35,
        0);
      return;
    }
    v41 = vmax_f32(v20, v21).n64_f32[0];
    PCPointer = this->PCPointer;
    v43 = vmax_f32(v18, v16).n64_f32[0];
    pCoors.y = (float)(vmin_f32(v18, v16).n64_f32[0] + v43) * 0.5;
    pCoors.x = (float)(vmin_f32(v20, v21).n64_f32[0] + v41) * 0.5;
    pCoors.z = CWorld::FindGroundZForCoord(pCoors.x, pCoors.y) + 2.0;
    CShadows::RenderIndicatorShadow(
      (u_native)this + (_DWORD)PCPointer,
      2u,
      0,
      &pCoors,
      v41 - pCoors.x,
      0.0,
      0.0,
      pCoors.y - v43,
      0);
  }
  if ( !(v12 | (CTheScripts::DbgFlag == 0)) )
    CTheScripts::DrawDebugSquare(v20.n64_f32[0], v18.n64_f32[0], v21.n64_f32[0], v16.n64_f32[0]);
}
// 34D19E: variable 'v4' is possibly undefined
// 34D19E: variable 'v3' is possibly undefined
// 34D1E0: variable 'v7' is possibly undefined
// 34D1E0: variable 'v2' is possibly undefined
// 34D1E8: variable 'v6' is possibly undefined
// 34D1EC: variable 'v8' is possibly undefined
// 34D1F4: variable 'v5' is possibly undefined
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0034D44C) --------------------------------------------------------
void __fastcall CRunningScript::ObjectInAreaCheckCommand(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float v3; // s2
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  float32x2_t v6; // d4
  float32x2_t v7; // d5
  unsigned __int64 v8; // d6
  Int16 v11; // r1
  uint8 *v12; // r0
  Int32 *v13; // r3
  int v14; // r1
  float32x2_t v15; // d9
  float32x2_t v16; // d8
  int v17; // r5
  float *v18; // r2
  float32x2_t v19; // d10
  float32x2_t v20; // d11
  int v21; // r1
  float v22; // s4
  Int32 v23; // r0
  int v24; // r3
  char v25; // r1
  float v26; // s4
  char v27; // r2
  bool v28; // nf
  bool v29; // fzf
  bool v30; // fnf
  Bool8 NotForLatestExpression; // r3
  unsigned int AndOrState; // r2
  Bool8 v33; // r1
  Bool8 CmpFlag; // r3
  UInt16 v35; // r5
  float v36; // s24
  float v37; // s4
  float v38; // s16
  char *v39; // r4
  float v40; // s8
  float v41; // s0
  float v42; // s24
  UInt8 *PCPointer; // r5
  float v44; // s26
  CVector pCoors; // [sp+14h] [bp-5Ch] BYREF

  if ( CurrCommand == 1258 )
    v11 = 8;
  else
    v11 = 6;
  CRunningScript::CollectParameters(this, v11);
  if ( ScriptParams[0] >= 0
    && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
  {
    v12 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
  }
  else
  {
    v12 = 0;
  }
  v4.n64_u32[0] = ScriptParams[1];
  v5.n64_u32[0] = ScriptParams[2];
  v6.n64_u32[0] = ScriptParams[3];
  v7.n64_u32[0] = ScriptParams[4];
  if ( CurrCommand == 1258 )
  {
    v13 = &ScriptParams[7];
    v2.n64_u32[0] = ScriptParams[6];
    LODWORD(v8) = ScriptParams[5];
    LODWORD(v3) = vmax_f32(v6, v2).n64_u32[0];
    v2.n64_u32[0] = vmin_f32(v6, v2).n64_u32[0];
    v6.n64_u64[0] = v7.n64_u64[0];
    v7.n64_u64[0] = v8;
  }
  else
  {
    v13 = &ScriptParams[5];
  }
  v14 = *((_DWORD *)v12 + 5);
  v15.n64_u64[0] = vmax_f32(v4, v6).n64_u64[0];
  v16.n64_u64[0] = vmax_f32(v5, v7).n64_u64[0];
  v17 = 0;
  v18 = (float *)(v14 + 48);
  if ( !v14 )
    v18 = (float *)(v12 + 4);
  v19.n64_u64[0] = vmin_f32(v5, v7).n64_u64[0];
  v20.n64_u64[0] = vmin_f32(v4, v6).n64_u64[0];
  v21 = 0;
  v22 = v18[1];
  v23 = *v13;
  if ( *v18 > v15.n64_f32[0] )
    v21 = 1;
  if ( *v18 < v20.n64_f32[0] )
    v17 = 1;
  v24 = v17 | v21;
  v25 = 0;
  if ( CurrCommand == 1258 )
  {
    if ( v24 || v22 < v19.n64_f32[0] || v22 > v16.n64_f32[0] )
      goto LABEL_29;
    v26 = v18[2];
    v27 = 0;
    v25 = 0;
    v28 = v26 < v2.n64_f32[0];
    v29 = v26 == v3;
    v30 = v26 < v3;
  }
  else
  {
    if ( v24 )
      goto LABEL_29;
    v27 = 0;
    v28 = v22 < v19.n64_f32[0];
    v29 = v22 == v16.n64_f32[0];
    v30 = v22 < v16.n64_f32[0];
  }
  if ( !v28 )
    v27 = 1;
  if ( v30 || v29 )
    v25 = 1;
  v25 &= v27;
LABEL_29:
  NotForLatestExpression = this->NotForLatestExpression;
  AndOrState = this->AndOrState;
  v33 = v25 ^ (NotForLatestExpression != 0);
  if ( this->AndOrState )
  {
    if ( AndOrState > 8 )
    {
      if ( (unsigned __int16)(AndOrState - 21) > 7u )
        goto LABEL_37;
      v35 = AndOrState - 1;
      v33 |= this->CmpFlag;
      if ( AndOrState == 21 )
        v35 = 0;
      this->AndOrState = v35;
    }
    else
    {
      CmpFlag = this->CmpFlag;
      this->AndOrState = AndOrState - 1;
      v33 &= CmpFlag;
    }
  }
  this->CmpFlag = v33;
LABEL_37:
  if ( v23 )
  {
    if ( CurrCommand == 1258 )
    {
      v36 = vmax_f32(v19, v16).n64_f32[0];
      v37 = vmin_f32(v19, v16).n64_f32[0];
      v38 = vmax_f32(v20, v15).n64_f32[0];
      v39 = (char *)this + (unsigned int)this->PCPointer;
      v40 = vmin_f32(v20, v15).n64_f32[0];
      v41 = (float)(v2.n64_f32[0] + v3) * 0.5;
      pCoors.y = (float)(v37 + v36) * 0.5;
      pCoors.x = (float)(v40 + v38) * 0.5;
      if ( v41 <= -100.0 )
        v41 = CWorld::FindGroundZForCoord((float)(v40 + v38) * 0.5, (float)(v37 + v36) * 0.5) + 2.0;
      pCoors.z = v41;
      CShadows::RenderIndicatorShadow(
        (u_native)v39,
        2u,
        0,
        &pCoors,
        v38 - (float)((float)(v40 + v38) * 0.5),
        0.0,
        0.0,
        (float)((float)(v37 + v36) * 0.5) - v36,
        0);
      return;
    }
    v42 = vmax_f32(v20, v15).n64_f32[0];
    PCPointer = this->PCPointer;
    v44 = vmax_f32(v19, v16).n64_f32[0];
    pCoors.y = (float)(vmin_f32(v19, v16).n64_f32[0] + v44) * 0.5;
    pCoors.x = (float)(vmin_f32(v20, v15).n64_f32[0] + v42) * 0.5;
    pCoors.z = CWorld::FindGroundZForCoord(pCoors.x, pCoors.y) + 2.0;
    CShadows::RenderIndicatorShadow(
      (u_native)this + (_DWORD)PCPointer,
      2u,
      0,
      &pCoors,
      v42 - pCoors.x,
      0.0,
      0.0,
      pCoors.y - v44,
      0);
  }
  if ( CurrCommand != 1258 && CTheScripts::DbgFlag )
    CTheScripts::DrawDebugSquare(v20.n64_f32[0], v19.n64_f32[0], v15.n64_f32[0], v16.n64_f32[0]);
}
// 34D4CE: variable 'v6' is possibly undefined
// 34D4CE: variable 'v2' is possibly undefined
// 34D4D6: variable 'v7' is possibly undefined
// 34D4DA: variable 'v8' is possibly undefined
// 34D4E6: variable 'v4' is possibly undefined
// 34D4EA: variable 'v5' is possibly undefined
// 34D558: variable 'v3' is possibly undefined
// 676F70: using guessed type int (*ScriptParams_ptr)[32];

//----- (0034D714) --------------------------------------------------------
void __fastcall CRunningScript::DoDeatharrestCheck(CRunningScript *this)
{
  bool v2; // zf
  UInt16 v3; // r1

  if ( this->DeatharrestCheckEnabled
    && CTheScripts::OnAMissionFlag
    && *(_DWORD *)&CTheScripts::ScriptSpace[CTheScripts::OnAMissionFlag] == 1
    && (CPlayerInfo::IsRestartingAfterDeath(&CWorld::Players[CWorld::PlayerInFocus])
     || CPlayerInfo::IsRestartingAfterArrest(&CWorld::Players[CWorld::PlayerInFocus])) )
  {
    v2 = AllowMissionReplay == 7;
    if ( AllowMissionReplay != 7 )
      v2 = AllowMissionReplay == 0;
    if ( v2 )
    {
      v3 = 0;
      if ( !this->StackDepth )
        v3 = -1;
      this->StackDepth = v3;
      this->PCPointer = this->PCStack[v3];
      CMessages::ClearSmallMessagesOnly();
      *(_DWORD *)&CTheScripts::ScriptSpace[CTheScripts::OnAMissionFlag] = 0;
      this->ActivateTime = 0;
      this->DoneDeatharrest = 1;
    }
  }
}

//----- (0034D7DC) --------------------------------------------------------
Int16 __fastcall CRunningScript::GetPadState(CRunningScript *this, UInt16 PadNumber, UInt16 ButtonNumber)
{
  int v3; // r4
  Int16 result; // r0
  CPad *Pad; // r0

  v3 = ButtonNumber;
  if ( PadNumber )
    return 0;
  Pad = CPad::GetPad(0);
  switch ( v3 )
  {
    case 0:
      result = Pad->NewState.LeftStickX;
      break;
    case 1:
      result = Pad->NewState.LeftStickY;
      break;
    case 2:
      result = Pad->NewState.RightStickX;
      break;
    case 3:
      result = Pad->NewState.RightStickY;
      break;
    case 4:
      result = Pad->NewState.LeftShoulder1;
      break;
    case 5:
      result = Pad->NewState.LeftShoulder2;
      break;
    case 6:
      result = Pad->NewState.RightShoulder1;
      break;
    case 7:
      result = Pad->NewState.RightShoulder2;
      break;
    case 8:
      result = Pad->NewState.DPadUp;
      break;
    case 9:
      result = Pad->NewState.DPadDown;
      break;
    case 10:
      result = Pad->NewState.DPadLeft;
      break;
    case 11:
      result = Pad->NewState.DPadRight;
      break;
    case 12:
      result = Pad->NewState.Start;
      break;
    case 13:
      result = Pad->NewState.Select;
      break;
    case 14:
      result = Pad->NewState.ButtonSquare;
      break;
    case 15:
      result = Pad->NewState.ButtonTriangle;
      break;
    case 16:
      result = Pad->NewState.ButtonCross;
      break;
    case 17:
      result = Pad->NewState.ButtonCircle;
      break;
    case 18:
      result = Pad->NewState.ShockButtonL;
      break;
    case 19:
      result = Pad->NewState.ShockButtonR;
      break;
    default:
      return 0;
  }
  return result;
}

//----- (0034D888) --------------------------------------------------------
void __fastcall CTheScripts::ScriptDebugCircle2D(float x, float y, float radiusX, float radiusY, int32 color)
{
  int v9; // r6
  float v10; // s18
  uint32 v11; // r9
  float v12; // s26
  int v13; // r11
  float v14; // s28
  float v15; // s30
  float v16; // s28
  float v17; // s0
  unsigned int v18; // r0
  float v19; // s0
  unsigned int v20; // r1
  unsigned int v21; // r2
  float v22; // s0
  unsigned int v23; // r3
  unsigned int v24; // [sp+4h] [bp-A4h]
  unsigned int v25; // [sp+8h] [bp-A0h]
  RwIm2DVertex vertices; // [sp+10h] [bp-98h] BYREF
  float v27; // [sp+2Ch] [bp-7Ch]
  float v28; // [sp+30h] [bp-78h]
  char v29; // [sp+3Ch] [bp-6Ch]
  char v30; // [sp+3Dh] [bp-6Bh]
  char v31; // [sp+3Eh] [bp-6Ah]
  char v32; // [sp+3Fh] [bp-69h]

  RwRenderStateSet(rwRENDERSTATEZWRITEENABLE, (char *)&dword_0 + 1);
  v9 = 0;
  RwRenderStateSet(rwRENDERSTATEZTESTENABLE, 0);
  RwRenderStateSet(rwRENDERSTATEVERTEXALPHAENABLE, (char *)&dword_0 + 1);
  RwRenderStateSet(rwRENDERSTATESRCBLEND, &byte_5);
  RwRenderStateSet(rwRENDERSTATEDESTBLEND, &byte_6);
  RwRenderStateSet(rwRENDERSTATETEXTUREFILTER, (char *)&dword_0 + 2);
  RwRenderStateSet(rwRENDERSTATETEXTURERASTER, 0);
  v10 = radiusX;
  v25 = 2 * BYTE1(color) + (unsigned __int8)__ROR4__(color, 8);
  v24 = 2 * BYTE2(color) + (unsigned __int8)__ROR4__(color, 16);
  v11 = (CTimer::m_snTimeInMilliseconds >> 6) & 0xF;
  do
  {
    v12 = sinf((float)v9 * 0.3927);
    v13 = v9 + 1;
    v14 = cosf((float)v9 * 0.3927);
    v15 = sinf((float)(v9 + 1) * 0.3927);
    v16 = v14 * radiusY;
    v17 = cosf((float)(v9 + 1) * 0.3927);
    LOBYTE(v18) = HIBYTE(color);
    v19 = v17 * radiusY;
    if ( v11 == v9 )
      v18 = (unsigned int)(3 * HIBYTE(color)) >> 2;
    LOBYTE(v20) = BYTE2(color);
    vertices.r = v18;
    if ( v11 == v9 )
      v20 = v24 >> 2;
    LOBYTE(v21) = BYTE1(color);
    vertices.g = v20;
    v22 = v19 + y;
    if ( v11 == v9 )
      v21 = v25 >> 2;
    LOBYTE(v23) = color;
    vertices.b = v21;
    if ( v11 == v9 )
      v23 = (3 * (unsigned int)(unsigned __int8)color) >> 2;
    vertices.a = v23;
    v29 = v18;
    v30 = v20;
    v31 = v21;
    v32 = v23;
    vertices.y = v16 + y;
    vertices.x = (float)(v12 * v10) + x;
    v27 = (float)(v15 * v10) + x;
    v28 = v22;
    RwIm2DRenderLine_BUGFIX(&vertices, 2, 0, 1);
    ++v9;
  }
  while ( v13 != 16 );
  RwRenderStateSet(rwRENDERSTATEVERTEXALPHAENABLE, 0);
  RwRenderStateSet(rwRENDERSTATEZTESTENABLE, (char *)&dword_0 + 1);
  RwRenderStateSet(rwRENDERSTATEZWRITEENABLE, (char *)&dword_0 + 1);
}
// 0: using guessed type int dword_0;
// 5: using guessed type char byte_5;
// 6: using guessed type char byte_6;

//----- (0034DA34) --------------------------------------------------------
void __fastcall CTheScripts::ClearSpaceForMissionEntity(const CVector *Coors, CEntity *pEnt)
{
  char v3; // r0
  float m_fRadius; // r1
  const CVector *v5; // r0
  CEntity *v6; // r5
  int v7; // r0
  int v8; // r2
  int v9; // r1
  CEntity *v10; // r3
  int v11; // r0
  int v12; // r8
  CEntity *v13; // r6
  bool v14; // zf
  CColModel *ColModel; // r10
  CCollisionData *m_pColData; // r11
  int m_nNoOfLines; // r9
  const CMatrix *m_pMat; // r4
  const CMatrix *v19; // r5
  CColModel *v20; // r0
  int32 v21; // r0
  int v22; // r0
  CPed *m_pLastRenderedLink; // r0
  unsigned __int8 m_pRwObject; // r0
  int v25; // r5
  CPed *v26; // r4
  CEntity *v28[16]; // [sp+28h] [bp-60h] BYREF
  Int16 pNum[15]; // [sp+6Ah] [bp-1Eh] BYREF

  v3 = `guard variable for'CTheScripts::ClearSpaceForMissionEntity(CVector const&,CEntity *)::aTempColPoints;
  __dmb(0xBu);
  if ( (v3 & 1) == 0
    && _cxa_guard_acquire((__guard *)&`guard variable for'CTheScripts::ClearSpaceForMissionEntity(CVector const&,CEntity *)::aTempColPoints) )
  {
    _cxa_guard_release((__guard *)&`guard variable for'CTheScripts::ClearSpaceForMissionEntity(CVector const&,CEntity *)::aTempColPoints);
  }
  m_fRadius = CModelInfo::ms_modelInfoPtrs[pEnt->m_nModelIndex]->m_pColModel->m_sphereBound.m_fRadius;
  pNum[0] = 0;
  v5 = Coors;
  v6 = pEnt;
  CWorld::FindObjectsKindaColliding(v5, m_fRadius, 0, pNum, 16, v28, 0, 1, 1, 0, 0);
  v7 = pNum[0];
  if ( pNum[0] >= 1 )
  {
    v8 = 0;
    v9 = 0;
    do
    {
      v10 = v28[v8];
      if ( v10 != pEnt && (*(_BYTE *)&v10->m_info & 7) == 3 && BYTE1(v10[19].m_transform.m_heading) << 31 )
        v28[v8] = 0;
      v8 = (unsigned __int16)++v9;
    }
    while ( (unsigned __int16)v9 < v7 );
    v11 = 0;
    v12 = 0;
    do
    {
      v13 = v28[v11];
      v14 = v13 == v6;
      if ( v13 != v6 )
        v14 = v13 == 0;
      if ( !v14 )
      {
        ColModel = CEntity::GetColModel(v6);
        m_pColData = ColModel->m_pColData;
        if ( m_pColData )
        {
          m_nNoOfLines = m_pColData->_anon_0.m_nNoOfLines;
          if ( m_nNoOfLines >= 1 )
            m_pColData->_anon_0.m_nNoOfLines = 0;
          m_pMat = v6->m_pMat;
          if ( !m_pMat )
          {
            CPlaceable::AllocateMatrix(v6);
            CSimpleTransform::UpdateMatrix(&pEnt->m_transform, v6->m_pMat);
            m_pMat = v6->m_pMat;
          }
          v19 = v13->m_pMat;
          if ( !v19 )
          {
            CPlaceable::AllocateMatrix(v13);
            CSimpleTransform::UpdateMatrix(&v13->m_transform, v13->m_pMat);
            v19 = v13->m_pMat;
          }
          v20 = CEntity::GetColModel(v13);
          v21 = CCollision::ProcessColModels(
                  m_pMat,
                  ColModel,
                  v19,
                  v20,
                  CTheScripts::ClearSpaceForMissionEntity(CVector const&,CEntity *)::aTempColPoints,
                  0,
                  0,
                  0);
          if ( m_nNoOfLines >= 1 )
            m_pColData->_anon_0.m_nNoOfLines = m_nNoOfLines;
          v6 = pEnt;
          if ( v21 >= 1 )
          {
            v22 = *(_BYTE *)&v13->m_info & 7;
            if ( v22 == 3 )
            {
              if ( !CPed::IsPlayer((const CPed *)v13) && CPed::CanBeDeleted((CPed *)v13) )
                CPopulation::RemovePed((CPed *)v13);
            }
            else if ( v22 == 2 && (v13[17].m_nScanCode & 8) == 0 && CVehicle::CanBeDeleted((const CVehicle *)v13) )
            {
              m_pLastRenderedLink = (CPed *)v13[18].m_pLastRenderedLink;
              if ( m_pLastRenderedLink )
              {
                CPopulation::RemovePed(m_pLastRenderedLink);
                if ( v13[18].m_pLastRenderedLink )
                  CEntity::CleanUpOldReference(
                    (CEntity *)v13[18].m_pLastRenderedLink,
                    (CEntity **)&v13[18].m_pLastRenderedLink);
                v13[18].m_pLastRenderedLink = 0;
              }
              m_pRwObject = (unsigned __int8)v13[19].m_pRwObject;
              if ( m_pRwObject )
              {
                v25 = 0;
                do
                {
                  v26 = (CPed *)*((_DWORD *)&v13[18].m_nScanCode + v25);
                  if ( v26 )
                  {
                    CVehicle::RemovePassenger((CVehicle *)v13, *((CPed **)&v13[18].m_nScanCode + v25));
                    CPopulation::RemovePed(v26);
                    m_pRwObject = (unsigned __int8)v13[19].m_pRwObject;
                  }
                  ++v25;
                }
                while ( v25 < m_pRwObject );
              }
              CCarCtrl::RemoveFromInterestingVehicleList((CVehicle *)v13);
              CWorld::Remove(v13);
              (*((void (__fastcall **)(CEntity *))v13->_vptr$CPlaceable + 1))(v13);
              v6 = pEnt;
            }
          }
        }
      }
      v11 = (unsigned __int16)++v12;
    }
    while ( (unsigned __int16)v12 < pNum[0] );
  }
}
// 81AF60: using guessed type char `guard variable for'CTheScripts::ClearSpaceForMissionEntity(CVector const&,CEntity *)::aTempColPoints;
// 34DA34: using guessed type Int16 pNum[15];

//----- (0034DC38) --------------------------------------------------------
void __fastcall CTheScripts::RemoveThisPed(CPed *pPed)
{
  int CharCreatedBy; // r8
  bool v3; // zf
  CVehicle *m_pMyVehicle; // r0
  CVehicle *v5; // r0
  int i; // r3
  FxSystem_c *pFXSystem; // r5

  if ( pPed )
  {
    CharCreatedBy = pPed->CharCreatedBy;
    m_pMyVehicle = (CVehicle *)(*((unsigned __int8 *)&pPed->m_nPedFlags + 1) << 31);
    v3 = m_pMyVehicle == 0;
    if ( m_pMyVehicle )
    {
      m_pMyVehicle = pPed->m_pMyVehicle;
      v3 = m_pMyVehicle == 0;
    }
    if ( !v3 )
    {
      if ( m_pMyVehicle->pDriver == pPed )
      {
        CVehicle::RemoveDriver(m_pMyVehicle, 0);
        pPed->m_pMyVehicle->m_info = (CEntity::CEntityInfo)(*(_BYTE *)&pPed->m_pMyVehicle->m_info & 7 | 0x20);
        v5 = pPed->m_pMyVehicle;
        if ( v5->m_eDoorLockState == CARLOCK_LOCKED_INITIALLY )
          v5->m_eDoorLockState = CARLOCK_UNLOCKED;
        if ( pPed->m_nPedType == 6 && CVehicle::IsLawEnforcementVehicle(pPed->m_pMyVehicle) )
          CVehicle::ChangeLawEnforcerState(pPed->m_pMyVehicle, 0);
      }
      else
      {
        CVehicle::RemovePassenger(m_pMyVehicle, pPed);
      }
    }
    for ( i = 0; i != 32; ++i )
    {
      if ( CTheScripts::ScriptEffectSystemArray[i].bUsed )
      {
        pFXSystem = CTheScripts::ScriptEffectSystemArray[i].pFXSystem;
        if ( pFXSystem->m_pEntity == pPed )
          pFXSystem->m_parentMat = 0;
      }
    }
    CWorld::RemoveReferencesToDeletedObject(pPed);
    (*((void (__fastcall **)(CPed *))pPed->_vptr$CPlaceable + 1))(pPed);
    if ( CharCreatedBy == 2 )
      --CPopulation::ms_nTotalMissionPeds;
  }
}
// 67982C: using guessed type script_effect_struct (*CTheScripts::ScriptEffectSystemArray)[32];

//----- (0034DD0C) --------------------------------------------------------
void __fastcall CTheScripts::CleanUpThisPed(CPed *pPed)
{
  CVehicle *v2; // r0
  int v3; // r6
  CPedGroup *PedsGroup; // r0
  CPedGroupMembership *p_m_membership; // r5
  bool v6; // zf
  CEvent *EventOfType; // r0
  bool v8; // zf
  CTask *v9; // r0
  CTaskComplexWander *WanderTaskByPedType; // r0
  CEvent *m_iAccumulatedTime; // r0
  bool v12; // zf
  CTask *v13; // r0
  CTaskComplexSequence *v14; // r5
  CTaskComplex *v15; // r6
  CTaskComplexWander *v16; // r8
  int32 m_vehicleType; // r1
  int32 m_baseVehicleType; // r1
  bool v19; // zf
  CVehicle *m_pMyVehicle; // r0
  CEventScriptCommand v21; // [sp+0h] [bp-28h] BYREF

  if ( pPed && pPed->CharCreatedBy == 2 )
  {
    CPed::SetCharCreatedBy(pPed, 1u);
    if ( (*((_DWORD *)&pPed->m_nPedFlags + 3) & 0x10) != 0 )
      goto LABEL_31;
    if ( (*(_DWORD *)&pPed->m_nPedFlags & 0x100) != 0 && (v2 = pPed->m_pMyVehicle) != 0 && v2->pDriver == pPed )
    {
      m_vehicleType = v2->m_vehicleType;
      if ( m_vehicleType == 4 )
      {
        if ( (unsigned __int8)(v2->AutoPilot.Mission - 57) >= 2u )
          v2->AutoPilot.Mission = 22;
        v2[1].AutoPilot.aPathNodeList[3] = (CNodeAddress)1148846080;
        v2[1].AutoPilot.aPathNodeList[5] = (CNodeAddress)1148846080;
        v2->AutoPilot.TargetCoors.x = 10000.0;
        v2->AutoPilot.TargetCoors.y = 10000.0;
        v2->AutoPilot.TargetCoors.z = 1000.0;
      }
      else if ( m_vehicleType == 3 )
      {
        if ( (unsigned __int8)(v2->AutoPilot.Mission - 57) >= 2u )
          v2->AutoPilot.Mission = 20;
        v2[1].AutoPilot.aPathNodeList[3] = (CNodeAddress)1148846080;
        v2[1].AutoPilot.aPathNodeList[5] = (CNodeAddress)1148846080;
        v2->AutoPilot.TargetCoors.x = 10000.0;
        v2->AutoPilot.TargetCoors.y = -10000.0;
        v2->AutoPilot.TargetCoors.z = 1000.0;
      }
      else
      {
        m_baseVehicleType = v2->m_baseVehicleType;
        v19 = m_baseVehicleType == 9;
        if ( m_baseVehicleType != 9 )
          v19 = m_baseVehicleType == 0;
        if ( v19 )
        {
          CCarCtrl::JoinCarWithRoadSystem(v2);
          m_pMyVehicle = pPed->m_pMyVehicle;
          if ( (unsigned __int8)(m_pMyVehicle->AutoPilot.Mission - 57) >= 2u )
            m_pMyVehicle->AutoPilot.Mission = 1;
        }
      }
      v3 = 0;
    }
    else
    {
      v3 = 1;
    }
    *(_DWORD *)&pPed->m_nPedFlags &= ~0x200000u;
    PedsGroup = CPedGroups::GetPedsGroup(pPed);
    if ( PedsGroup )
    {
      p_m_membership = &PedsGroup->m_membership;
      if ( CPedGroupMembership::IsFollower(&PedsGroup->m_membership, pPed) )
        CPedGroupMembership::RemoveMember(p_m_membership, pPed);
    }
    if ( !v3 )
      goto LABEL_31;
    v6 = *((unsigned __int8 *)&pPed->m_nPedFlags + 1) << 31 == 0;
    if ( *((unsigned __int8 *)&pPed->m_nPedFlags + 1) << 31 )
      v6 = pPed->m_pMyVehicle == 0;
    if ( v6 )
    {
      EventOfType = CEventGroup::GetEventOfType(&pPed->m_pPedIntelligence->m_eventGroup, 32);
      v8 = EventOfType == 0;
      if ( EventOfType )
      {
        EventOfType = (CEvent *)EventOfType[1].m_iAccumulatedTime;
        v8 = EventOfType == 0;
      }
      if ( !v8 && (*((int (__fastcall **)(CEvent *))EventOfType->_vptr$CEvent + 5))(EventOfType) == 912 )
        goto LABEL_31;
      v9 = pPed->m_pPedIntelligence->m_taskManager.m_tasks[3];
      if ( v9 )
      {
        if ( (*((int (__fastcall **)(CTask *))v9->_vptr$CTask + 5))(v9) == 912 )
          goto LABEL_31;
      }
      WanderTaskByPedType = CTaskComplexWander::GetWanderTaskByPedType(pPed);
      CEventScriptCommand::CEventScriptCommand(&v21, 3, WanderTaskByPedType, 0);
      CEventGroup::Add(&pPed->m_pPedIntelligence->m_eventGroup, &v21, 0);
    }
    else
    {
      m_iAccumulatedTime = CEventGroup::GetEventOfType(&pPed->m_pPedIntelligence->m_eventGroup, 32);
      v12 = m_iAccumulatedTime == 0;
      if ( m_iAccumulatedTime )
      {
        m_iAccumulatedTime = (CEvent *)m_iAccumulatedTime[1].m_iAccumulatedTime;
        v12 = m_iAccumulatedTime == 0;
      }
      if ( !v12 && (*((int (__fastcall **)(CEvent *))m_iAccumulatedTime->_vptr$CEvent + 5))(m_iAccumulatedTime) == 244 )
        goto LABEL_31;
      v13 = pPed->m_pPedIntelligence->m_taskManager.m_tasks[3];
      if ( v13 )
      {
        if ( (*((int (__fastcall **)(CTask *))v13->_vptr$CTask + 5))(v13) == 244 )
          goto LABEL_31;
      }
      v14 = (CTaskComplexSequence *)CTask::operator new(0x40u);
      CTaskComplexSequence::CTaskComplexSequence(v14);
      v15 = (CTaskComplex *)CTask::operator new(0x14u);
      CTaskComplex::CTaskComplex(v15);
      v15[1]._vptr$CTask = 0;
      v15->_vptr$CTask = (int (**)(void))&off_66AF80;
      LOWORD(v15[1].m_pParent) = 1;
      v16 = CTaskComplexWander::GetWanderTaskByPedType(pPed);
      CTaskComplexSequence::AddTask(v14, v15);
      CTaskComplexSequence::AddTask(v14, v16);
      CEventScriptCommand::CEventScriptCommand(&v21, 3, v14, 0);
      CEventGroup::Add(&pPed->m_pPedIntelligence->m_eventGroup, &v21, 0);
    }
    CEventScriptCommand::~CEventScriptCommand(&v21);
LABEL_31:
    --CPopulation::ms_nTotalMissionPeds;
  }
}
// 66AF80: using guessed type void *off_66AF80;
// 677A98: using guessed type void *`vtable for'CTaskComplexLeaveAnyCar;

//----- (0034DF4C) --------------------------------------------------------
void __fastcall CTheScripts::CleanUpThisVehicle(CVehicle *pVehicle)
{
  CPhysical::CPhysicalFlags m_nPhysicalFlags; // r1

  if ( pVehicle )
  {
    if ( pVehicle->VehicleCreatedBy == 2 )
    {
      m_nPhysicalFlags = pVehicle->m_nPhysicalFlags;
      *(_DWORD *)&pVehicle->m_nVehicleFlags &= ~8u;
      pVehicle->m_nPhysicalFlags = (CPhysical::CPhysicalFlags)(*(_DWORD *)&m_nPhysicalFlags & 0xFFFFDFFB);
      CCarCtrl::RemoveFromInterestingVehicleList(pVehicle);
      CVehicleRecording::StopPlaybackRecordedCar(pVehicle);
      sub_18E184(pVehicle, 1, 0);
    }
  }
}

//----- (0034DF94) --------------------------------------------------------
void __fastcall CTheScripts::CleanUpThisObject(CObject *pObj)
{
  CObject::CObjectFlags m_nObjectFlags; // r3
  uint32 v2; // r1

  if ( pObj )
  {
    if ( (pObj->ObjectCreatedBy | 4) == 6 )
    {
      m_nObjectFlags = pObj->m_nObjectFlags;
      pObj->ObjectCreatedBy = 3;
      v2 = CTimer::m_snTimeInMilliseconds;
      pObj->m_nParentModelIndex = -1;
      pObj->m_nObjectFlags = (CObject::CObjectFlags)(*(_DWORD *)&m_nObjectFlags & 0xFFFFFF7F);
      pObj->m_nEndOfLifeTime = v2 + 20000000;
      ++CObject::nNoTempObjects;
    }
  }
}

//----- (0034DFF0) --------------------------------------------------------
void CTheScripts::ReadObjectNamesFromScript()
{
  UInt8 *v0; // r0
  int v1; // r3
  int v2; // r1
  int v3; // r3
  UsedObjects *v4; // r3
  unsigned __int8 v5; // r4

  CTheScripts::NumberOfUsedObjects = *(_WORD *)&CTheScripts::ScriptSpace[*(_DWORD *)&CTheScripts::ScriptSpace[3] + 8];
  if ( CTheScripts::NumberOfUsedObjects )
  {
    v0 = &CTheScripts::ScriptSpace[*(_DWORD *)&CTheScripts::ScriptSpace[3] + 12];
    v1 = 0;
    v2 = 0;
    do
    {
      v3 = v1;
      ++v2;
      CTheScripts::UsedObjectArray[v3].Name[0] = *v0;
      v4 = &CTheScripts::UsedObjectArray[v3];
      v4->Name[1] = v0[1];
      v4->Name[2] = v0[2];
      v4->Name[3] = v0[3];
      v4->Name[4] = v0[4];
      v4->Name[5] = v0[5];
      v4->Name[6] = v0[6];
      v4->Name[7] = v0[7];
      v4->Name[8] = v0[8];
      v4->Name[9] = v0[9];
      v4->Name[10] = v0[10];
      v4->Name[11] = v0[11];
      v4->Name[12] = v0[12];
      v4->Name[13] = v0[13];
      v4->Name[14] = v0[14];
      v4->Name[15] = v0[15];
      v4->Name[16] = v0[16];
      v4->Name[17] = v0[17];
      v4->Name[18] = v0[18];
      v4->Name[19] = v0[19];
      v4->Name[20] = v0[20];
      v4->Name[21] = v0[21];
      v4->Name[22] = v0[22];
      v5 = v0[23];
      v0 += 24;
      v4->Index = 0;
      v4->Name[23] = v5;
      v1 = (unsigned __int16)v2;
    }
    while ( (unsigned __int16)v2 < (unsigned int)CTheScripts::NumberOfUsedObjects );
  }
}

//----- (0034E0B8) --------------------------------------------------------
void CTheScripts::UpdateObjectIndices()
{
  unsigned __int16 v0; // r4
  UsedObjects *v1; // r1

  if ( CTheScripts::NumberOfUsedObjects >= 2u )
  {
    v0 = 1;
    do
    {
      v1 = &CTheScripts::UsedObjectArray[v0];
      v1->Index = -1;
      CModelInfo::GetModelInfo(v1->Name, &v1->Index);
      ++v0;
    }
    while ( v0 < (unsigned int)CTheScripts::NumberOfUsedObjects );
  }
}

//----- (0034E110) --------------------------------------------------------
void CTheScripts::ReadMultiScriptFileOffsetsFromScript()
{
  UInt8 *v0; // r1
  int v1; // r12
  Int32 *v2; // r1
  int v3; // r2
  int v4; // r0
  Int32 v5; // t1

  v0 = &CTheScripts::ScriptSpace[*(_DWORD *)&CTheScripts::ScriptSpace[*(_DWORD *)&CTheScripts::ScriptSpace[3] + 3]];
  CTheScripts::MainScriptSize = *((_DWORD *)v0 + 2);
  v1 = *((__int16 *)v0 + 8);
  CTheScripts::LargestMissionScriptSize = *((_DWORD *)v0 + 3);
  CTheScripts::NumberOfMissionScripts = v1;
  CTheScripts::NumberOfExclusiveMissionScripts = *((_WORD *)v0 + 9);
  CTheScripts::LargestNumberOfMissionScriptLocalVariables = *((_DWORD *)v0 + 5);
  if ( v1 >= 1 )
  {
    v2 = (Int32 *)(v0 + 24);
    v3 = 0;
    v4 = 0;
    do
    {
      ++v4;
      v5 = *v2++;
      CTheScripts::MultiScriptArray[v3].StartOfScriptIndex = v5;
      v3 = (unsigned __int16)v4;
    }
    while ( (unsigned __int16)v4 < v1 );
  }
}

//----- (0034E1A8) --------------------------------------------------------
void __fastcall LoadMissionScript(int scriptIndex)
{
  int v1; // r4
  int32 StartOfScriptIndex; // r4
  u_native v3; // r5
  CRunningScript *started; // r0

  v1 = scriptIndex;
  if ( CTheScripts::NumberOfExclusiveMissionScripts >= 1 )
  {
    if ( scriptIndex < 65533 )
      return;
    v1 = 0xFFFF - scriptIndex;
  }
  CTimer::Suspend();
  StartOfScriptIndex = CTheScripts::MultiScriptArray[v1].StartOfScriptIndex;
  CFileMgr::ChangeDir((const unsigned __int8 *)&off_34E268);
  CFileMgr::SetDir((const unsigned __int8 *)&byte_61CADE);
  if ( !CGame::bMissionPackGame )
  {
    v3 = CFileMgr::OpenFile("data\\script\\mainV1.scm", (const unsigned __int8 *)&dword_34E278);
    CFileMgr::Seek(v3, StartOfScriptIndex, 0);
    CFileMgr::ReadBytes(v3, &CTheScripts::ScriptSpace[270000], (int32)&elf_hash_chain[776]);
    CFileMgr::CloseFile(v3);
    CTheScripts::WipeLocalVariableMemoryForMissionScript();
    started = CTheScripts::StartNewScript(&CTheScripts::ScriptSpace[270000]);
    started->IsThisAMissionScript = 1;
    started->ThisMustBeTheOnlyMissionRunning = 1;
    started->BaseAddressOfThisScript = &CTheScripts::ScriptSpace[270000];
    CTheScripts::bAlreadyRunningAMissionScript = 1;
    CGameLogic::ClearSkip(0);
  }
  sub_19F744();
}
// 10168: using guessed type int elf_hash_chain[22025];
// 34E268: using guessed type int *off_34E268;
// 34E278: using guessed type int dword_34E278;
// 61CADE: using guessed type char byte_61CADE;

//----- (0034E284) --------------------------------------------------------
bool __fastcall CRunningScript::ThisIsAValidRandomCop(
        CRunningScript *this,
        uint32 PedModelIndex,
        Int32 CopFlag,
        Int32 SwatFlag,
        Int32 FBIFlag,
        Int32 ArmyFlag,
        Int32 MiamiViceFlag)
{
  _BOOL4 result; // r0

  switch ( PedModelIndex )
  {
    case 0x118u:
    case 0x119u:
    case 0x11Au:
    case 0x11Cu:
      if ( !CopFlag )
        goto LABEL_4;
      result = 1;
      break;
    case 0x11Du:
      result = SwatFlag != 0;
      break;
    case 0x11Eu:
      result = FBIFlag != 0;
      break;
    case 0x11Fu:
      result = ArmyFlag != 0;
      break;
    default:
LABEL_4:
      result = 0;
      break;
  }
  return result;
}

//----- (0034E2CC) --------------------------------------------------------
bool __fastcall CRunningScript::ThisIsAValidRandomPed(
        CRunningScript *this,
        uint32 PedType,
        Int32 CivilianFlag,
        Int32 GangFlag,
        Int32 CriminalFlag)
{
  bool v6; // zf

  if ( PedType > 0x16 )
    return 0;
  if ( ((1 << PedType) & 0xFF80) != 0 )
    return GangFlag != 0;
  if ( ((1 << PedType) & 0x30) == 0 )
  {
    v6 = ((1 << PedType) & 0x500000) == 0;
    if ( ((1 << PedType) & 0x500000) != 0 )
      v6 = CriminalFlag == 0;
    return !v6;
  }
  return CivilianFlag != 0;
}

//----- (0034E314) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands1000To1099(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  float32x2_t v6; // d4
  float32x2_t v7; // d5
  Int8 v9; // r5
  uint8 *v10; // r1
  uint8 v11; // r2
  uint8 v12; // r3
  int CanPlayerStartMission; // r0
  Int32 v14; // r4
  CPad *Pad; // r0
  UInt8 v16; // r5
  uint8 *v17; // r1
  CRunningScript *v18; // r0
  Int16 v19; // r1
  uint8 *v20; // r4
  CPad *v21; // r0
  uint8 *v22; // r1
  int v23; // r2
  uint8 *v24; // r5
  int v25; // r1
  char v26; // r0
  u_native v27; // r0
  u_native v28; // r8
  int32 Bytes; // r9
  CRunningScript *started; // r0
  u_native v31; // r4
  CRunningScript *v32; // r0
  uint8 *v33; // r1
  int v34; // r2
  unsigned int v35; // r3
  uint8 *v36; // r0
  char v37; // r0
  uint8 *v38; // r0
  CRunningScript *v39; // r0
  bool v40; // r1
  uint8 *v41; // r1
  __int16 v42; // r2
  __int16 v43; // r3
  CPed *v44; // r8
  int v45; // r1
  uint8 *v46; // r1
  int v47; // r2
  unsigned int v48; // r3
  int v49; // r2
  uint8 *v50; // r0
  uint8 *v51; // r5
  unsigned int v52; // r0
  _DWORD *v53; // r3
  CVehicle *v54; // r9
  uint8 *v55; // r1
  int v56; // r6
  CTask *SimplestActiveTask; // r0
  CTask *v58; // r5
  int v59; // r0
  float *v60; // r1
  bool v61; // zf
  float v62; // s10
  float v63; // s0
  Int32 v64; // s2
  Int32 offset; // [sp+Ch] [bp-64h]
  CTaskSimpleCarSetPedInAsPassenger v67; // [sp+10h] [bp-60h] BYREF
  CVector v68; // [sp+30h] [bp-40h] BYREF
  CVector v69; // [sp+3Ch] [bp-34h] BYREF

  v9 = 0;
  switch ( CurrCommand )
  {
    case 1000:
    case 1002:
    case 1033:
    case 1035:
    case 1046:
    case 1071:
    case 1086:
    case 1087:
    case 1088:
      return v9;
    case 1003:
      CMessages::ClearSmallMessagesOnly();
      return 0;
    case 1005:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      v10 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v11 = v10[2172];
      v12 = v11 & 0xF7;
      if ( ScriptParams[1] )
        v12 = v11 | 8;
      v10[2172] = v12;
      return v9;
    case 1006:
      CRunningScript::CollectParameters(this, 1);
      CanPlayerStartMission = CPlayerPed::CanPlayerStartMission(CWorld::Players[ScriptParams[0]].pPed);
      goto LABEL_27;
    case 1007:
      CRunningScript::CollectParameters(this, 1);
      v14 = ScriptParams[0];
      Pad = CPad::GetPad(ScriptParams[0]);
      Pad->DisablePlayerControls |= 0x80u;
      CPlayerInfo::MakePlayerSafe(&CWorld::Players[v14], 1, 10000.0);
      v9 = 0;
      CCutsceneMgr::ms_cutsceneProcessing = 1;
      return v9;
    case 1008:
      v16 = 1;
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
        v16 = 2;
      CTheScripts::UseTextCommands = v16;
      return 0;
    case 1011:
      CRunningScript::CollectParameters(this, 1);
      v17 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      ScriptParams[0] = v17[1080];
      ScriptParams[1] = v17[1081];
      v18 = this;
      v19 = 2;
      goto LABEL_167;
    case 1012:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        CWorld::SetAllCarsCanBeDamaged(1);
        return 0;
      }
      v9 = 0;
      CWorld::SetAllCarsCanBeDamaged(0);
      FindPlayerCoors(&v69, -1);
      CWorld::ExtinguishAllCarFiresInArea(v69, 4000.0);
      return v9;
    case 1013:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v20 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v20 = 0;
      }
      if ( ScriptParams[1] )
      {
        v52 = *((_DWORD *)v20 + 267) | 0x200000;
      }
      else
      {
        CVehicle::ExtinguishCarFire((CVehicle *)v20);
        v52 = *((_DWORD *)v20 + 267) & 0xFFDFFFFF;
      }
      *((_DWORD *)v20 + 267) = v52;
      return 0;
    case 1021:
      CRunningScript::CollectParameters(this, 2);
      v21 = CPad::GetPad(ScriptParams[0]);
      CPad::SetDrunkInputDelay(v21, ScriptParams[1]);
      return 0;
    case 1022:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      v22 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v23 = *((_DWORD *)v22 + 290);
      *((_WORD *)v22 + 943) = ScriptParams[1];
      *((_DWORD *)v22 + 290) = v23 | 0x20000;
      return v9;
    case 1024:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v24 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v24 = 0;
      }
      goto LABEL_164;
    case 1031:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] < 0 )
      {
        v24 = 0;
      }
      else if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v24 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v24 = 0;
      }
LABEL_164:
      v67._vptr$CTask = (int (**)(void))ScriptParams[1];
      v67.m_pParent = (CTask *)ScriptParams[2];
      *(_DWORD *)&v67.m_bIsFinished = ScriptParams[3];
      Multiply3x3(&v68, *((const CMatrix **)v24 + 5), (const CVector *)&v67);
      v59 = *((_DWORD *)v24 + 5);
      v60 = (float *)(v59 + 48);
      v61 = v59 == 0;
      v18 = this;
      if ( v61 )
        v60 = (float *)(v24 + 4);
      v62 = v60[2];
      v63 = v68.x + *v60;
      *(float *)&v64 = v68.y + v60[1];
      v19 = 3;
      *(float *)ScriptParams = v63;
      ScriptParams[1] = v64;
      *(float *)&ScriptParams[2] = v68.z + v62;
      goto LABEL_167;
    case 1036:
      CanPlayerStartMission = CLocalisation::GermanGame();
LABEL_27:
      v25 = CanPlayerStartMission;
      goto LABEL_86;
    case 1037:
      CRunningScript::CollectParameters(this, 1);
      CAudioEngine::ClearMissionAudio(&AudioEngine, LOBYTE(ScriptParams[0]) - 1);
      return 0;
    case 1044:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      v26 = ScriptParams[1];
      if ( ScriptParams[1] )
        v26 = 1;
      CWorld::Players[ScriptParams[0]].bFreeHealthCare = v26;
      return v9;
    case 1047:
      CRunningScript::CollectParameters(this, 1);
      if ( CTheScripts::NumberOfExclusiveMissionScripts < 1 )
        goto LABEL_35;
      if ( ScriptParams[0] < 65533 )
        return 0;
      ScriptParams[0] = 0xFFFF - ScriptParams[0];
LABEL_35:
      CTimer::Suspend();
      offset = CTheScripts::MultiScriptArray[ScriptParams[0]].StartOfScriptIndex;
      CFileMgr::ChangeDir((const unsigned __int8 *)&off_34F1D8);
      if ( !CGame::bMissionPackGame )
        goto LABEL_40;
      break;
    case 1048:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      v33 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v34 = *((_DWORD *)v33 + 7);
      v35 = v34 & 0xFFFFBFFF;
      if ( ScriptParams[1] )
        v35 = v34 | 0x4000;
      *((_DWORD *)v33 + 7) = v35;
      return v9;
    case 1050:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v36 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v36 = 0;
      }
      ScriptParams[0] = 0;
      if ( *((_DWORD *)v36 + 361) == ScriptParams[1] )
        ScriptParams[0] = *((_DWORD *)v36 + 364);
      if ( *((_DWORD *)v36 + 368) == ScriptParams[1] )
        ScriptParams[0] = *((_DWORD *)v36 + 371);
      if ( *((_DWORD *)v36 + 375) == ScriptParams[1] )
        ScriptParams[0] = *((_DWORD *)v36 + 378);
      if ( *((_DWORD *)v36 + 382) == ScriptParams[1] )
        ScriptParams[0] = *((_DWORD *)v36 + 385);
      if ( *((_DWORD *)v36 + 389) == ScriptParams[1] )
        ScriptParams[0] = *((_DWORD *)v36 + 392);
      if ( *((_DWORD *)v36 + 396) == ScriptParams[1] )
        ScriptParams[0] = *((_DWORD *)v36 + 399);
      if ( *((_DWORD *)v36 + 403) == ScriptParams[1] )
        ScriptParams[0] = *((_DWORD *)v36 + 406);
      if ( *((_DWORD *)v36 + 410) == ScriptParams[1] )
        ScriptParams[0] = *((_DWORD *)v36 + 413);
      if ( *((_DWORD *)v36 + 417) == ScriptParams[1] )
        ScriptParams[0] = *((_DWORD *)v36 + 420);
      if ( *((_DWORD *)v36 + 424) == ScriptParams[1] )
        ScriptParams[0] = *((_DWORD *)v36 + 427);
      if ( *((_DWORD *)v36 + 431) == ScriptParams[1] )
        ScriptParams[0] = *((_DWORD *)v36 + 434);
      if ( *((_DWORD *)v36 + 438) == ScriptParams[1] )
        ScriptParams[0] = *((_DWORD *)v36 + 441);
      if ( *((_DWORD *)v36 + 445) == ScriptParams[1] )
        ScriptParams[0] = *((_DWORD *)v36 + 448);
      goto LABEL_130;
    case 1053:
      CRunningScript::CollectParameters(this, 1);
      CCamera::SetNearClipScript(&TheCamera, *(float *)ScriptParams);
      return 0;
    case 1054:
      CRunningScript::CollectParameters(this, 1);
      v37 = ScriptParams[0];
      if ( ScriptParams[0] != -1 )
      {
        if ( ScriptParams[0] == 11 )
        {
          v37 = 12;
          ScriptParams[0] = 12;
        }
        CAudioEngine::RetuneRadio(&AudioEngine, v37 + 1);
      }
      return 0;
    case 1059:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v38 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v38 = 0;
      }
      v53 = v38 + 1960;
      v9 = 0;
      if ( !*((_DWORD *)v38 + 360) )
        v53 = v38 + 2228;
      *v53 = ScriptParams[1];
      return v9;
    case 1060:
      if ( !CLocalisation::Metric() )
      {
        v9 = 0;
        CRunningScript::UpdateCompareFlag(this, 0);
        return v9;
      }
      v39 = this;
      v40 = 1;
LABEL_154:
      CRunningScript::UpdateCompareFlag(v39, v40);
      return 0;
    case 1061:
      CRunningScript::CollectParameters(this, 1);
      *(float *)ScriptParams = *(float *)ScriptParams / 0.3;
      goto LABEL_130;
    case 1064:
      CRunningScript::CollectParameters(this, 2);
      v9 = 0;
      v41 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v42 = *(_WORD *)(v41 + 991);
      v43 = v42 & 0xFFFB;
      if ( ScriptParams[1] )
        v43 = v42 | 4;
      *(_WORD *)(v41 + 991) = v43;
      return v9;
    case 1067:
      CRunningScript::CollectParameters(this, 6);
      v2.n64_u32[0] = ScriptParams[0];
      v5.n64_u32[0] = ScriptParams[3];
      v3.n64_u32[0] = ScriptParams[1];
      v6.n64_u32[0] = ScriptParams[4];
      v4.n64_u32[0] = ScriptParams[2];
      v7.n64_u32[0] = ScriptParams[5];
      CWorld::ClearPedsFromArea(
        vmin_f32(v2, v5).n64_f32[0],
        vmin_f32(v3, v6).n64_f32[0],
        vmin_f32(v4, v7).n64_f32[0],
        vmax_f32(v2, v5).n64_f32[0],
        vmax_f32(v3, v6).n64_f32[0],
        vmax_f32(v4, v7).n64_f32[0]);
      return 0;
    case 1068:
      CRunningScript::CollectParameters(this, 1);
      CStats::SetStatValue(0x94u, (float)ScriptParams[0]);
      return 0;
    case 1069:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = (int)(float)((float)ScriptParams[0] / 0.3);
      goto LABEL_130;
    case 1070:
      CRunningScript::CollectParameters(this, 2);
      CStats::RegisterFastestTime(ScriptParams[0], ScriptParams[1]);
      return 0;
    case 1072:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v44 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        if ( ScriptParams[1] < 0 )
          goto LABEL_142;
      }
      else
      {
        v44 = 0;
        if ( ScriptParams[1] < 0 )
          goto LABEL_142;
      }
      if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v54 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        goto LABEL_143;
      }
LABEL_142:
      v54 = 0;
LABEL_143:
      if ( ScriptParams[2] < 0 )
        v56 = 0;
      else
        v56 = CCarEnterExit::ComputeTargetDoorToEnterAsPassenger(v54, ScriptParams[2]);
      v9 = 0;
      CPedIntelligence::FlushImmediately(v44->m_pPedIntelligence, 0);
      CTaskSimpleCarSetPedInAsPassenger::CTaskSimpleCarSetPedInAsPassenger(&v67, v54, v56, 0);
      v67.m_bWarpingInToCar = 1;
      CTaskSimpleCarSetPedInAsPassenger::ProcessPed(&v67, v44);
      CTaskSimpleCarSetPedInAsPassenger::~CTaskSimpleCarSetPedInAsPassenger(&v67);
      return v9;
    case 1073:
      CRunningScript::CollectParameters(this, 2);
      v40 = 0;
      if ( ScriptParams[1] < CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1164]
        && !*(_DWORD *)(ScriptParams[0] + 4 * ScriptParams[1] + 1128) )
      {
        v40 = 1;
      }
      goto LABEL_153;
    case 1074:
      CRunningScript::CollectParameters(this, 2);
      v45 = -1093107909
          * ((signed int)(*(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][4 * ScriptParams[1] + 1128]
                        - (unsigned int)CPools::ms_pPedPool->m_aStorage) >> 2);
      ScriptParams[0] = CPools::ms_pPedPool->m_aFlags[v45] | (v45 << 8);
      goto LABEL_130;
    case 1075:
      CRunningScript::CollectParameters(this, 2);
      v46 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v47 = *((_DWORD *)v46 + 290);
      v48 = v47 & 0xFFFFFBFF;
      if ( ScriptParams[1] )
        v48 = v47 | 0x400;
      goto LABEL_89;
    case 1076:
      CCredits::Start();
      return 0;
    case 1077:
      CCredits::Stop();
      return 0;
    case 1078:
      v40 = !CCredits::bCreditsGoing;
      goto LABEL_153;
    case 1084:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        v9 = 0;
        TheCamera.m_bIgnoreFadingStuffForMusic = 0;
      }
      else
      {
        TheCamera.m_bIgnoreFadingStuffForMusic = 1;
        return 0;
      }
      return v9;
    case 1089:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = *(__int16 *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][38];
LABEL_130:
      v18 = this;
      v19 = 1;
LABEL_167:
      CRunningScript::StoreParameters(v18, v19);
      return 0;
    case 1093:
      v25 = (unsigned __int8)(CCheat::m_aCheatsActive[42] | CCheat::m_aCheatsActive[35] | CCheat::m_aCheatsActive[41]);
LABEL_86:
      v40 = v25 != 0;
      goto LABEL_153;
    case 1094:
      CRunningScript::CollectParameters(this, 2);
      v46 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v49 = *((_DWORD *)v46 + 290);
      v48 = v49 | 0x1000;
      if ( ScriptParams[1] )
        v48 = v49 & 0xFFFFEFFF;
LABEL_89:
      *((_DWORD *)v46 + 290) = v48;
      return 0;
    case 1096:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v50 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v50 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v55 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v55 = 0;
      }
      if ( v50[1157] << 31 && *((uint8 **)v50 + 356) == v55 )
        goto LABEL_148;
      goto LABEL_152;
    case 1097:
      CRunningScript::CollectParameters(this, 1);
      v50 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !(v50[1157] << 31) )
        goto LABEL_152;
LABEL_148:
      SimplestActiveTask = CTaskManager::GetSimplestActiveTask((const CTaskManager *)(*((_DWORD *)v50 + 272) + 4));
      v58 = SimplestActiveTask;
      if ( SimplestActiveTask
        && ((*((int (__fastcall **)(CTask *))SimplestActiveTask->_vptr$CTask + 5))(SimplestActiveTask) == 709
         || (*((int (__fastcall **)(CTask *))v58->_vptr$CTask + 5))(v58) == 1022) )
      {
LABEL_151:
        v40 = 1;
      }
      else
      {
LABEL_152:
        v40 = 0;
      }
LABEL_153:
      v39 = this;
      goto LABEL_154;
    case 1099:
      CRunningScript::CollectParameters(this, 1);
      v51 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !(v51[1157] << 31)
        && !CTaskManager::FindActiveTaskByType((const CTaskManager *)(*((_DWORD *)v51 + 272) + 4), 700)
        && !CTaskManager::FindActiveTaskByType((const CTaskManager *)(*((_DWORD *)v51 + 272) + 4), 701) )
      {
        goto LABEL_151;
      }
      goto LABEL_152;
    default:
      return -1;
  }
  while ( CMenuManager::CheckMissionPackValidMenu(&FrontEndMenuManager) )
  {
    CFileMgr::SetDirMyDocuments();
    sprintf(gString, "MPACK//MPACK%d//SCR.SCM", CGame::bMissionPackGame);
    v27 = CFileMgr::OpenFile(gString, "rb");
    v28 = v27;
    if ( v27 )
    {
      CFileMgr::Seek(v27, offset, 0);
      Bytes = CFileMgr::ReadBytes(v28, &CTheScripts::ScriptSpace[270000], (int32)&elf_hash_chain[776]);
      CFileMgr::CloseFile(v28);
      if ( Bytes >= 1 )
      {
        CTheScripts::WipeLocalVariableMemoryForMissionScript();
        started = CTheScripts::StartNewScript(&CTheScripts::ScriptSpace[270000]);
        started->IsThisAMissionScript = 1;
        started->ThisMustBeTheOnlyMissionRunning = 1;
        started->BaseAddressOfThisScript = &CTheScripts::ScriptSpace[270000];
        CTheScripts::bAlreadyRunningAMissionScript = 1;
        CGameLogic::ClearSkip(0);
        break;
      }
    }
  }
LABEL_40:
  CFileMgr::SetDir((const unsigned __int8 *)&byte_61CADE);
  if ( !CGame::bMissionPackGame )
  {
    v31 = CFileMgr::OpenFile("data\\script\\mainV1.scm", "rb");
    CFileMgr::Seek(v31, offset, 0);
    CFileMgr::ReadBytes(v31, &CTheScripts::ScriptSpace[270000], (int32)&elf_hash_chain[776]);
    CFileMgr::CloseFile(v31);
    CTheScripts::WipeLocalVariableMemoryForMissionScript();
    v32 = CTheScripts::StartNewScript(&CTheScripts::ScriptSpace[270000]);
    v32->IsThisAMissionScript = 1;
    v32->ThisMustBeTheOnlyMissionRunning = 1;
    v32->BaseAddressOfThisScript = &CTheScripts::ScriptSpace[270000];
    CTheScripts::bAlreadyRunningAMissionScript = 1;
    CGameLogic::ClearSkip(0);
  }
  CTimer::Resume();
  v9 = 0;
  missionReplaySetting = 0;
  return v9;
}
// 34EA46: variable 'v2' is possibly undefined
// 34EA46: variable 'v5' is possibly undefined
// 34EA56: variable 'v3' is possibly undefined
// 34EA56: variable 'v6' is possibly undefined
// 34EA5E: variable 'v4' is possibly undefined
// 34EA5E: variable 'v7' is possibly undefined
// 10168: using guessed type int elf_hash_chain[22025];
// 41EAC: using guessed type Elf32_Sym stru_41EAC;
// 34F1D8: using guessed type int *off_34F1D8;
// 61CADE: using guessed type char byte_61CADE;
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 678534: using guessed type int *CPools::ms_pVehiclePool;

//----- (0034F2A4) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands1100To1199(CRunningScript *this, Int32 CurrCommand)
{
  CRunningScript *v2; // r8
  Int8 v3; // r5
  CPed *v4; // r0
  CPed *v5; // r0
  uint8 *v6; // r0
  const CPed *v7; // r5
  uint8 *v8; // r0
  char v9; // r5
  CVehicle *pRemoteVehicle; // r0
  int v11; // r0
  CPad *Pad; // r4
  uint8 *v13; // r4
  int v14; // r5
  char v15; // r0
  Bool8 v16; // r1
  Int32 *PointerToScriptVariable; // r4
  __int64 v18; // kr00_8
  float v19; // s16
  int32 ParameterWithoutIncreasingPC; // r0
  CEntity *v21; // r4
  __int64 v22; // kr08_8
  uint8 *v23; // r9
  uint8 *v24; // r2
  CRunningScript *v25; // r6
  CRunningScript *pNext; // r4
  intro_text_line *v27; // r0
  UInt16 v28; // r0
  intro_text_line *v29; // r2
  intro_text_line *v30; // r0
  uint8 *v31; // r1
  __int16 v32; // r2
  __int16 v33; // r3
  uint8 *v34; // r0
  int v35; // r0
  __int64 v36; // r4
  float GroundZForCoord; // s0
  uint8 *v38; // r1
  CPed *v39; // r9
  uint32 WheelStatus; // r1
  CPed *v41; // r0
  Int16 *p_CoorsX; // r0
  unsigned int v43; // r1
  float v44; // s10
  float v45; // s12
  float v46; // s14
  CPed *v47; // r0
  uint8 *v48; // r0
  uint8 *v49; // r0
  CAutomobile *v50; // r0
  CPed *v51; // r0
  uint8 *v52; // r0
  bool v53; // zf
  uint8 *v54; // r0
  uint8 *v55; // r0
  uint8 *v56; // r0
  Int32 *v57; // r4
  CEntity *v58; // r1
  CPedGroup *PedsGroup; // r0
  const CPedGroupMembership *p_m_membership; // r4
  CMatrix *m_pMat; // r0
  float tx; // s16
  float ty; // s18
  float tz; // s20
  float *p_xx; // r0
  float v66; // s2
  float v67; // s4
  CEntity *m_pEntLockOnTarget; // r0
  char v69; // r6
  CEntity *v70; // r0
  int v71; // r5
  char v72; // r6
  int m_entities; // r10
  CPed *v74; // r4
  int v75; // r3
  bool v76; // zf
  Int32 v77; // r1
  int v78; // r0
  CRunningScript *v79; // r0
  Int16 v80; // r1
  const CVehicle *v81; // r0
  const CDamageManager *v82; // r5
  uint32 v83; // r4
  uint32 v84; // r0
  char v85; // r4
  uint32 v86; // r0
  char v87; // r4
  uint32 v88; // r0
  RwObject_0 *m_pRwObject; // r0
  char *parent; // r1
  const CMatrix *v91; // r0
  RwMatrix *v92; // r1
  CPlayerInfo *v93; // r4
  CPad *PadFromPlayer; // r0
  uint8 *m_pMouseLockOnRecruitPed; // r0
  int v96; // r1
  bool v97; // zf
  int v98; // r1
  bool v99; // zf
  int v100; // r1
  bool v101; // zf
  int v102; // r1
  bool v103; // zf
  float height; // [sp+18h] [bp-80h] BYREF
  float width; // [sp+1Ch] [bp-7Ch] BYREF
  float y; // [sp+20h] [bp-78h] BYREF
  Char pStringToFill[8]; // [sp+26h] [bp-72h] BYREF
  Char TextLabel[10]; // [sp+2Eh] [bp-6Ah] BYREF
  CVector v110; // 0:r0.12

  v2 = this;
  v3 = 0;
  switch ( CurrCommand )
  {
    case 1101:
    case 1104:
    case 1105:
    case 1117:
    case 1129:
    case 1153:
    case 1154:
    case 1171:
    case 1180:
    case 1182:
    case 1183:
    case 1185:
      return v3;
    case 1107:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v21 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v21 = 0;
      }
      CWorld::Remove(v21);
      m_pMat = v21->m_pMat;
      if ( m_pMat )
      {
        tx = m_pMat->tx;
        ty = m_pMat->ty;
        tz = m_pMat->tz;
        CMatrix::SetRotate(
          m_pMat,
          (float)(*(float *)&ScriptParams[1] * 3.1416) / 180.0,
          (float)(*(float *)&ScriptParams[2] * 3.1416) / 180.0,
          (float)(*(float *)&ScriptParams[3] * 3.1416) / 180.0);
        p_xx = &v21->m_pMat->xx;
        v66 = ty + p_xx[13];
        v67 = tz + p_xx[14];
        p_xx[12] = tx + p_xx[12];
        p_xx[13] = v66;
        p_xx[14] = v67;
      }
      else
      {
        v21->m_transform.m_heading = (float)(*(float *)&ScriptParams[3] * 3.1416) / 180.0;
      }
      m_pRwObject = v21->m_pRwObject;
      if ( m_pRwObject )
      {
        parent = (char *)m_pRwObject->parent;
        v91 = v21->m_pMat;
        v92 = (RwMatrix *)(parent + 16);
        if ( v91 )
          CMatrix::UpdateRwMatrix(v91, v92);
        else
          CSimpleTransform::UpdateRwMatrix(&v21->m_transform, v92);
      }
      CEntity::UpdateRwFrame(v21);
      CWorld::Add(v21);
      return 0;
    case 1108:
      *(CVector *)ScriptParams = TheCamera.Cams[2].Source;
      goto LABEL_194;
    case 1111:
      CRunningScript::CollectParameters(this, 2);
      v22 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v23 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v23 = 0;
      }
      m_pEntLockOnTarget = CWorld::Players[ScriptParams[0]].pPed->m_pEntLockOnTarget;
      if ( m_pEntLockOnTarget )
      {
        v69 = 0;
        if ( (*(_BYTE *)&m_pEntLockOnTarget->m_info & 7) == 3 && m_pEntLockOnTarget == (CEntity *)v23 )
          v69 = 1;
      }
      else
      {
        v69 = 0;
      }
      if ( CHID::GetInputType() == 2
        && (v93 = &CWorld::Players[v22],
            PadFromPlayer = CPlayerPed::GetPadFromPlayer(v93->pPed),
            CPad::GetTarget(PadFromPlayer, 0)) )
      {
        LOBYTE(WheelStatus) = v69;
        m_pMouseLockOnRecruitPed = (uint8 *)v93->pPed->m_pMouseLockOnRecruitPed;
        if ( m_pMouseLockOnRecruitPed == v23 )
          LOBYTE(WheelStatus) = 1;
        if ( !m_pMouseLockOnRecruitPed )
          LOBYTE(WheelStatus) = v69;
      }
      else
      {
        LOBYTE(WheelStatus) = v69;
      }
      goto LABEL_258;
    case 1112:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v24 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v24 = 0;
      }
      v70 = CWorld::Players[ScriptParams[0]].pPed->m_pEntLockOnTarget;
      if ( !v70 )
        goto LABEL_161;
      LOBYTE(WheelStatus) = 0;
      if ( (*(_BYTE *)&v70->m_info & 7) == 4 )
        goto LABEL_158;
      goto LABEL_258;
    case 1113:
      CRunningScript::ReadTextLabelFromScript(this, &TextLabel[2], 8u);
      if ( (unsigned __int8)(TextLabel[2] - 65) <= 0x19u )
        TextLabel[2] += 32;
      if ( (unsigned __int8)(TextLabel[3] - 65) < 0x1Au )
        TextLabel[3] += 32;
      if ( (unsigned __int8)(TextLabel[4] - 65) <= 0x19u )
        TextLabel[4] += 32;
      if ( (unsigned __int8)(TextLabel[5] - 65) <= 0x19u )
        TextLabel[5] += 32;
      if ( (unsigned __int8)(TextLabel[6] - 65) <= 0x19u )
        TextLabel[6] += 32;
      if ( (unsigned __int8)(TextLabel[7] - 65) <= 0x19u )
        TextLabel[7] += 32;
      if ( (unsigned __int8)(TextLabel[8] - 65) <= 0x19u )
        TextLabel[8] += 32;
      if ( (unsigned __int8)(TextLabel[9] - 65) <= 0x19u )
        TextLabel[9] += 32;
      v25 = CTheScripts::pActiveScripts;
      if ( !CTheScripts::pActiveScripts )
        return 0;
      v3 = 0;
      do
      {
        pNext = v25->pNext;
        if ( !strcmp((const char *)v25->ScriptName, (const char *)&TextLabel[2]) )
        {
          CRunningScript::RemoveScriptFromList(v25, &CTheScripts::pActiveScripts);
          CRunningScript::AddScriptToList(v25, &CTheScripts::pIdleScripts);
          CRunningScript::ShutdownThisScript(v25);
        }
        v25 = pNext;
      }
      while ( pNext );
      return v3;
    case 1114:
      if ( CTheScripts::NumberOfIntroTextLinesThisFrame > 0x5Fu )
        return 0;
      CRunningScript::CollectParameters(this, 2);
      CRunningScript::ReadTextLabelFromScript(v2, pStringToFill, 8u);
      CText::Get(&TheText, pStringToFill);
      *(_DWORD *)&TextLabel[2] = ScriptParams[0];
      y = *(float *)&ScriptParams[1];
      height = 1.0;
      width = 1.0;
      CorrectAspect((float *)&TextLabel[2], &y, &width, &height);
      v27 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
      v27->ScriptTextAtX = *(float *)&TextLabel[2] / (float)((float)RsGlobal.screenWidth / 640.0);
      v27->ScriptTextAtY = y / (float)((float)RsGlobal.screenHeight / 448.0);
      CRunningScript::CollectParameters(v2, 1);
      strncpy(
        (char *)CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextLabel,
        (const char *)pStringToFill,
        8u);
      v28 = CTheScripts::NumberOfIntroTextLinesThisFrame;
      v29 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
      v29->NumberToInsert1 = ScriptParams[0];
      v29->NumberToInsert2 = -1;
      goto LABEL_73;
    case 1115:
      if ( CTheScripts::NumberOfIntroTextLinesThisFrame > 0x5Fu )
        return 0;
      CRunningScript::CollectParameters(this, 2);
      CRunningScript::ReadTextLabelFromScript(v2, pStringToFill, 8u);
      CText::Get(&TheText, pStringToFill);
      *(_DWORD *)&TextLabel[2] = ScriptParams[0];
      y = *(float *)&ScriptParams[1];
      height = 1.0;
      width = 1.0;
      CorrectAspect((float *)&TextLabel[2], &y, &width, &height);
      v30 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
      v30->ScriptTextAtX = *(float *)&TextLabel[2] / (float)((float)RsGlobal.screenWidth / 640.0);
      v30->ScriptTextAtY = y / (float)((float)RsGlobal.screenHeight / 448.0);
      CRunningScript::CollectParameters(v2, 2);
      strncpy(
        (char *)CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].ScriptTextLabel,
        (const char *)pStringToFill,
        8u);
      v28 = CTheScripts::NumberOfIntroTextLinesThisFrame;
      *(_QWORD *)&CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame].NumberToInsert1 = *(_QWORD *)ScriptParams;
LABEL_73:
      CTheScripts::NumberOfIntroTextLinesThisFrame = v28 + 1;
      return 0;
    case 1116:
      v3 = 0;
      CTheScripts::FailCurrentMission = 2;
      return v3;
    case 1120:
      CRunningScript::CollectParameters(this, 2);
      CCamera::SetParametersForScriptInterpolation(
        &TheCamera,
        *(float *)ScriptParams,
        100.0 - *(float *)ScriptParams,
        ScriptParams[1]);
      return 0;
    case 1123:
      *(float *)ScriptParams = TheCamera.Cams[2].Source.x + TheCamera.Cams[2].Front.x;
      *(float *)&ScriptParams[1] = TheCamera.Cams[2].Source.y + TheCamera.Cams[2].Front.y;
      *(float *)&ScriptParams[2] = TheCamera.Cams[2].Source.z + TheCamera.Cams[2].Front.z;
      goto LABEL_194;
    case 1124:
      CRunningScript::CollectParameters(this, 8);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v4 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v4 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v58 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v58 = 0;
      }
      width = *(float *)&ScriptParams[3];
      y = *(float *)&ScriptParams[2];
      height = *(float *)&ScriptParams[4];
      CPed::AttachPedToEntity(
        v4,
        v58,
        *(CVector *)&ScriptParams[2],
        ScriptParams[5],
        (float)(*(float *)&ScriptParams[6] * 3.1416) / 180.0,
        (eWeaponType)ScriptParams[7]);
      return 0;
    case 1125:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v5 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        if ( v5 )
        {
          if ( v5->m_pAttachToEntity )
            CPed::DettachPedFromEntity(v5);
        }
      }
      return 0;
    case 1126:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v31 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v32 = *(_WORD *)(v31 + 991);
      v33 = v32 & 0xFFF7;
      if ( ScriptParams[1] )
        v33 = v32 | 8;
      *(_WORD *)(v31 + 991) = v33;
      return v3;
    case 1127:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0
        || CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
      {
        return 0;
      }
      v6 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v3 = 0;
      if ( v6 )
        v6[1896] = -1;
      return v3;
    case 1128:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0
        || CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
      {
        return 0;
      }
      v34 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v3 = 0;
      if ( v34 )
        v34[1304] = -1;
      return v3;
    case 1132:
      CRunningScript::CollectParameters(this, 1);
      v35 = *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1124];
      if ( v35 )
        v11 = CPools::ms_pPedPool->m_aFlags[-1093107909
                                          * ((signed int)(v35 - (unsigned int)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * ((signed int)(v35 - (unsigned int)CPools::ms_pPedPool->m_aStorage) >> 2));
      else
        v11 = -1;
      goto LABEL_230;
    case 1133:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v7 = (const CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v7 = 0;
      }
      PedsGroup = CPedGroups::GetPedsGroup(v7);
      if ( PedsGroup )
      {
        p_m_membership = &PedsGroup->m_membership;
        if ( CPedGroupMembership::IsLeader(&PedsGroup->m_membership, v7) )
          v11 = (unsigned __int8)CPedGroupMembership::CountMembersExcludingLeader(p_m_membership);
        else
          v11 = 0;
      }
      else
      {
        v11 = 0;
      }
      goto LABEL_230;
    case 1134:
      CRunningScript::CollectParameters(this, 6);
      v36 = *(_QWORD *)&ScriptParams[1];
      GroundZForCoord = *(float *)&ScriptParams[3];
      width = *(float *)&ScriptParams[2];
      y = *(float *)&ScriptParams[1];
      height = *(float *)&ScriptParams[3];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
      {
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
        height = GroundZForCoord;
      }
      CRemote::GivePlayerRemoteControlledCar(
        *(float *)&v36,
        *((float *)&v36 + 1),
        GroundZForCoord,
        (float)(*(float *)&ScriptParams[4] * 3.1416) / 180.0,
        LOWORD(ScriptParams[5]));
      return 0;
    case 1136:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = *(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][28 * (char)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1820] + 1444];
      goto LABEL_231;
    case 1137:
    case 1138:
    case 1139:
    case 1140:
    case 1141:
    case 1142:
      CRunningScript::LocateCharObjectCommand(this, CurrCommand);
      return 0;
    case 1143:
      CRunningScript::CollectParameters(this, 3);
      v38 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v3 = 0;
      v38[959] = ScriptParams[1];
      *((_DWORD *)v38 + 240) = ScriptParams[2] + CTimer::m_snTimeInMilliseconds;
      return v3;
    case 1146:
      CRunningScript::CollectParameters(this, 1);
      v8 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( v8[1157] << 31 )
      {
        v81 = (const CVehicle *)*((_DWORD *)v8 + 356);
        v9 = 0;
        if ( v81 )
        {
          v53 = CVehicle::GetVehicleAppearance(v81) == APR_BIKE;
LABEL_197:
          if ( v53 )
            v9 = 1;
        }
      }
      else
      {
        v9 = 0;
      }
LABEL_199:
      this = v2;
      LOBYTE(WheelStatus) = v9;
      goto LABEL_259;
    case 1152:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v39 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v39 = 0;
      }
      v71 = 0;
      v72 = 1;
      m_entities = (int)v39->m_pPedIntelligence->m_pedScanner.m_entities;
      while ( 1 )
      {
        v74 = *(CPed **)(m_entities + 4 * v71);
        if ( v74 )
        {
          if ( !CPed::IsAlive(*(const CPed **)(m_entities + 4 * v71))
            && CPedGeometryAnalyser::CanPedTargetPed(v39, v74, 1) )
          {
            break;
          }
        }
        if ( (unsigned int)++v71 >= 0x10 )
        {
          v72 = 0;
          break;
        }
      }
      this = v2;
      LOBYTE(WheelStatus) = v72;
      goto LABEL_259;
    case 1156:
      CRunningScript::CollectParameters(this, 1);
      pRemoteVehicle = CWorld::Players[ScriptParams[0]].pRemoteVehicle;
      if ( pRemoteVehicle )
        v11 = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                              * (((char *)pRemoteVehicle - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2)] | (-422239488 * (((char *)pRemoteVehicle - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2));
      else
        v11 = -1;
LABEL_230:
      ScriptParams[0] = v11;
LABEL_231:
      v79 = v2;
      v80 = 1;
      goto LABEL_232;
    case 1157:
      LOBYTE(WheelStatus) = 1;
      goto LABEL_259;
    case 1160:
      CRunningScript::CollectParameters(this, 1);
      LOBYTE(WheelStatus) = CModelInfo::ms_modelInfoPtrs[ScriptParams[0]] != 0;
      goto LABEL_258;
    case 1161:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v41 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v41 = 0;
      }
      if ( ScriptParams[1] )
      {
        v3 = 0;
        if ( v41 )
          CPed::DisablePedSpeech(v41, 0);
        return v3;
      }
      if ( v41 )
        CPed::EnablePedSpeech(v41);
      return 0;
    case 1162:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      CVehicle::bDisableRemoteDetonation = ScriptParams[0] == 0;
      return v3;
    case 1163:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      *(_WORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1122] = ScriptParams[1];
      return v3;
    case 1164:
      CRunningScript::CollectParameters(this, 3);
      y = *(float *)ScriptParams;
      height = *(float *)&ScriptParams[2];
      width = *(float *)&ScriptParams[1];
      p_CoorsX = &CPickups::aPickUps[0].CoorsX;
      v43 = 0;
      while ( 1 )
      {
        if ( *((_BYTE *)p_CoorsX + 12) )
        {
          v44 = (float)((float)p_CoorsX[1] * 0.125) - *(float *)&ScriptParams[1];
          v45 = (float)((float)*p_CoorsX * 0.125) - *(float *)ScriptParams;
          v46 = (float)((float)p_CoorsX[2] * 0.125) - *(float *)&ScriptParams[2];
          if ( sqrtf((float)((float)(v45 * v45) + (float)(v44 * v44)) + (float)(v46 * v46)) < 0.5 )
            break;
        }
        ++v43;
        p_CoorsX += 16;
        if ( v43 >= 0x26C )
        {
LABEL_161:
          LOBYTE(WheelStatus) = 0;
          goto LABEL_258;
        }
      }
LABEL_181:
      LOBYTE(WheelStatus) = 1;
      goto LABEL_258;
    case 1167:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v47 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v47 = 0;
      }
      CPed::ClearWeapons(v47);
      return 0;
    case 1169:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v48 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v48 = 0;
      }
      v75 = *((_DWORD *)v48 + 361);
      v24 = (uint8 *)ScriptParams[1];
      v76 = v75 == ScriptParams[1];
      if ( v75 != ScriptParams[1] )
        v76 = *((_DWORD *)v48 + 368) == ScriptParams[1];
      if ( v76 || *((_DWORD *)v48 + 375) == ScriptParams[1] || *((_DWORD *)v48 + 382) == ScriptParams[1] )
        goto LABEL_181;
      v96 = *((_DWORD *)v48 + 389);
      v97 = v96 == ScriptParams[1];
      if ( v96 != ScriptParams[1] )
        v97 = *((_DWORD *)v48 + 396) == ScriptParams[1];
      if ( v97 )
        goto LABEL_181;
      v98 = *((_DWORD *)v48 + 403);
      v99 = v98 == ScriptParams[1];
      if ( v98 != ScriptParams[1] )
        v99 = *((_DWORD *)v48 + 410) == ScriptParams[1];
      if ( v99 )
        goto LABEL_181;
      v100 = *((_DWORD *)v48 + 417);
      v101 = v100 == ScriptParams[1];
      if ( v100 != ScriptParams[1] )
        v101 = *((_DWORD *)v48 + 424) == ScriptParams[1];
      if ( v101 )
        goto LABEL_181;
      v102 = *((_DWORD *)v48 + 431);
      v103 = v102 == ScriptParams[1];
      if ( v102 != ScriptParams[1] )
        v103 = *((_DWORD *)v48 + 438) == ScriptParams[1];
      if ( v103 )
        goto LABEL_181;
      v70 = (CEntity *)*((_DWORD *)v48 + 445);
      LOBYTE(WheelStatus) = 0;
LABEL_158:
      if ( v70 == (CEntity *)v24 )
        LOBYTE(WheelStatus) = 1;
      goto LABEL_258;
    case 1172:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      Pad = CPad::GetPad(ScriptParams[0]);
      *(_DWORD *)&TextLabel[2] = 0;
      *(_DWORD *)&TextLabel[6] = 0;
      CPad::GetLeftAnalogue(Pad, (CVector2D *)&TextLabel[2]);
      ScriptParams[0] = (int)*(float *)&TextLabel[2];
      ScriptParams[1] = (int)*(float *)&TextLabel[6];
      CPad::GetRightAnalogue(Pad, (CVector2D *)&TextLabel[2]);
      ScriptParams[2] = (int)*(float *)&TextLabel[2];
      ScriptParams[3] = (int)*(float *)&TextLabel[6];
      CRunningScript::StoreParameters(v2, 4);
      return v3;
    case 1173:
      CRunningScript::CollectParameters(this, 1);
      v13 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v14 = *((_DWORD *)v13 + 293);
      v15 = v14;
      if ( v14 )
        v15 = 1;
      if ( !*((_DWORD *)v13 + 360) )
        v15 = (v14 != 0) | (CDamageManager::GetEngineStatus((const CDamageManager *)(v13 + 1460)) > 0xE0);
      v3 = 0;
      v16 = (*((float *)v13 + 307) < 250.0) | v15;
      goto LABEL_119;
    case 1174:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v49 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v49 = 0;
      }
      v77 = ScriptParams[1];
      if ( *((_DWORD *)v49 + 360) == 9 )
      {
        switch ( ScriptParams[1] )
        {
          case 4:
            WheelStatus = v49[1648];
            v78 = v49[1649];
            if ( WheelStatus != 1 )
              LOBYTE(WheelStatus) = 0;
            if ( v78 != 1 )
              LOBYTE(v78) = 0;
            LOBYTE(WheelStatus) = WheelStatus | v78;
            goto LABEL_258;
          case 2:
            v77 = 0;
            break;
          case 3:
            v77 = 1;
            break;
          default:
LABEL_255:
            WheelStatus = v49[v77 + 1648];
LABEL_256:
            if ( WheelStatus != 1 )
              LOBYTE(WheelStatus) = 0;
            goto LABEL_258;
        }
        ScriptParams[1] = v77;
        goto LABEL_255;
      }
      v82 = (const CDamageManager *)(v49 + 1460);
      if ( ScriptParams[1] != 4 )
      {
        WheelStatus = CDamageManager::GetWheelStatus((const CDamageManager *)(v49 + 1460), ScriptParams[1]);
        goto LABEL_256;
      }
      v83 = CDamageManager::GetWheelStatus((const CDamageManager *)(v49 + 1460), 0);
      if ( v83 != 1 )
        LOBYTE(v83) = 0;
      v84 = CDamageManager::GetWheelStatus(v82, 1);
      if ( v84 != 1 )
        LOBYTE(v84) = 0;
      v85 = v83 | v84;
      v86 = CDamageManager::GetWheelStatus(v82, 2);
      if ( v86 != 1 )
        LOBYTE(v86) = 0;
      v87 = v85 | v86;
      v88 = CDamageManager::GetWheelStatus(v82, 3);
      if ( v88 != 1 )
        LOBYTE(v88) = 0;
      LOBYTE(WheelStatus) = v88 | v87;
LABEL_258:
      this = v2;
LABEL_259:
      CRunningScript::UpdateCompareFlag(this, WheelStatus);
      return 0;
    case 1186:
      CRunningScript::CollectParameters(this, 6);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v50 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v50 = 0;
      }
      width = *(float *)&ScriptParams[2];
      y = *(float *)&ScriptParams[1];
      height = *(float *)&ScriptParams[3];
      CAutomobile::TellHeliToGoToCoors(
        v50,
        *(float *)&ScriptParams[1],
        *(float *)&ScriptParams[2],
        *(float *)&ScriptParams[3],
        *(float *)&ScriptParams[4],
        *(float *)&ScriptParams[5]);
      return 0;
    case 1187:
      PointerToScriptVariable = CRunningScript::GetPointerToScriptVariable(this, 2u);
      CRunningScript::CollectParameters(v2, 1);
      goto LABEL_118;
    case 1188:
      PointerToScriptVariable = CRunningScript::GetPointerToScriptVariable(this, 1u);
      CRunningScript::CollectParameters(v2, 1);
LABEL_118:
      v3 = 0;
      v16 = *PointerToScriptVariable == ScriptParams[0];
LABEL_119:
      CRunningScript::UpdateCompareFlag(v2, v16);
      return v3;
    case 1189:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v51 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v51 = 0;
      }
      CPed::CreateDeadPedPickupCoors(v51, &y, &width, &height);
      *(float *)ScriptParams = y;
      *(float *)&ScriptParams[1] = width;
      *(float *)&ScriptParams[2] = height;
LABEL_194:
      v79 = v2;
      v80 = 3;
LABEL_232:
      CRunningScript::StoreParameters(v79, v80);
      return 0;
    case 1190:
      CRunningScript::CollectParameters(this, 5);
      v18 = *(_QWORD *)ScriptParams;
      v19 = *(float *)&ScriptParams[2];
      width = *(float *)&ScriptParams[1];
      y = *(float *)ScriptParams;
      height = *(float *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
      {
        v19 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]) + 0.5;
        height = v19;
      }
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(v2);
      CPickups::GetActualPickupIndex(ParameterWithoutIncreasingPC);
      v110.z = v19;
      v3 = 0;
      *(_QWORD *)&v110.x = v18;
      ScriptParams[0] = CPickups::GenerateNewOne(v110, MI_PICKUP_REVENUE, 16, ScriptParams[3], ScriptParams[4], 0, 0);
      CRunningScript::StoreParameters(v2, 1);
      return v3;
    case 1191:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      v52 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !(v52[1157] << 31) )
        goto LABEL_199;
      v53 = CVehicle::GetVehicleAppearance(*((const CVehicle **)v52 + 356)) == APR_BOAT;
      goto LABEL_197;
    case 1193:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      v54 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !(v54[1157] << 31) )
        goto LABEL_199;
      v53 = CVehicle::GetVehicleAppearance(*((const CVehicle **)v54 + 356)) == APR_HELI;
      goto LABEL_197;
    case 1195:
      CRunningScript::CollectParameters(this, 1);
      v9 = 0;
      v55 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !(v55[1157] << 31) )
        goto LABEL_199;
      v53 = CVehicle::GetVehicleAppearance(*((const CVehicle **)v55 + 356)) == APR_PLANE;
      goto LABEL_197;
    case 1197:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0 )
        goto LABEL_161;
      if ( CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        goto LABEL_161;
      v56 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !v56 )
        goto LABEL_161;
      WheelStatus = (*((_DWORD *)v56 + 17) >> 8) & 1;
      goto LABEL_258;
    case 1198:
      v57 = CRunningScript::GetPointerToScriptVariable(this, 2u);
      CRunningScript::CollectParameters(v2, 1);
      goto LABEL_135;
    case 1199:
      v57 = CRunningScript::GetPointerToScriptVariable(this, 1u);
      CRunningScript::CollectParameters(v2, 1);
LABEL_135:
      v3 = 0;
      *v57 = ScriptParams[0];
      return v3;
    default:
      return -1;
  }
}
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 678534: using guessed type int *CPools::ms_pVehiclePool;

//----- (003507B8) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
Int8 __fastcall CRunningScript::ProcessCommands1200To1299(CRunningScript *this, Int32 CurrCommand)
{
  Int8 v3; // r5
  Int32 *PointerToScriptVariable; // r5
  Int32 v5; // r1
  Int32 v6; // r0
  Int32 *v7; // r0
  bool v8; // cc
  Bool8 v9; // r1
  Int32 *v10; // r5
  Int32 v11; // r1
  Int32 v12; // r0
  Int32 *v13; // r0
  uint8 *v14; // r1
  __int64 v15; // r0
  char v16; // r5
  unsigned int v17; // r0
  CPool<CVehicle,CHeli>::StorageType *m_aStorage; // r1
  uint8 *v19; // r2
  float *v20; // r3
  float v21; // s6
  float v22; // s2
  float v23; // s4
  int v24; // r3
  float v25; // s0
  uint8 *v26; // r1
  int v27; // r2
  unsigned int v28; // r3
  Int32 v29; // r3
  char v30; // r6
  uint8 *v31; // r5
  uint8 *v32; // r0
  int v33; // r1
  _DWORD *v34; // r2
  int v35; // r3
  int v36; // r6
  int v37; // r0
  uint8 *v38; // r5
  int v39; // r1
  float GroundZForCoord; // s20
  RwReal v41; // s16
  Int32 v42; // s18
  int32 ParameterWithoutIncreasingPC; // r0
  unsigned int v44; // r5
  CAutomobile *v45; // r0
  CAutomobile *v46; // r0
  CAutomobile *v47; // r0
  float v48; // s0
  CPathFind *v49; // s16
  Int32 v50; // s18
  RwReal z; // r6
  CNodeAddress *NthNodeClosestToCoors; // r0
  float v53; // s0
  RwReal v54; // s16
  RwReal v55; // s18
  UInt8 *PCPointer; // r12
  uint8 *v57; // r1
  int v58; // r2
  unsigned int v59; // r3
  uint8 *v60; // r1
  int v61; // r2
  unsigned int v62; // r3
  uint8 *v63; // r0
  unsigned int *v64; // r0
  int v65; // r1
  int v66; // t1
  unsigned int v67; // r1
  float v68; // s0
  int v69; // r2
  CAutomobile *v70; // r0
  uint8 *v71; // r0
  CTaskSimpleDuckToggle *v72; // r5
  int32 AnimationBlockIndex; // r5
  int32 v74; // r5
  int v75; // r2
  int *v76; // r1
  CRunningScript *v77; // r0
  CPed *v78; // r0
  UInt32 IndexOfGlobalVariable; // r5
  Int32 v80; // r0
  CPlayerInfo *v81; // r6
  __int64 v82; // d17
  __int64 v83; // r2
  uint8 *v84; // r0
  uint32 v85; // r6
  uint32 UppercaseKey; // r0
  char v87; // r0
  __int64 v88; // kr10_8
  int v89; // r9
  CPed *v90; // r5
  CTaskComplexUseSwatRope *v91; // r6
  int VacantSlot; // r0
  CPedIntelligence *m_pPedIntelligence; // r8
  CTaskSimpleStandStill *v94; // r6
  CMatrix *m_pMat; // r0
  CSimpleTransform *p_tx; // r1
  __int64 v97; // d16
  CAutomobile *v98; // r0
  float v99; // s0
  uint8 *v100; // r0
  CRunningScript *v101; // r0
  Int16 v102; // r1
  GxtChar *v103; // r5
  bool v104; // zf
  int v105; // r0
  float *v106; // r1
  Int32 v107; // s2
  Int32 v108; // s4
  float v109; // s0
  CEntity *v110; // r1
  Int32 v111; // r1
  uint8 *v112; // r1
  Int32 v113; // r6
  void (*v114)(void); // r3
  Int16 v115; // r1
  CRunningScript *v116; // r0
  Int32 GraphType; // [sp+0h] [bp-B8h]
  Int32 v119; // [sp+4h] [bp-B4h]
  CNodeAddress *bWaterNode; // [sp+20h] [bp-98h]
  float v121; // [sp+44h] [bp-74h] BYREF
  CNodeAddress pNode2; // [sp+48h] [bp-70h] BYREF
  CNodeAddress Node; // [sp+4Ch] [bp-6Ch] BYREF
  CVector pSuccess; // [sp+50h] [bp-68h] BYREF
  CVector Coors; // [sp+60h] [bp-58h] BYREF
  Char pStringToFill[8]; // [sp+72h] [bp-46h] BYREF
  CVector v127; // 0:r1.12
  CVector v128; // 0:r2.8,8:^0.4

  Node.Region = -1;
  pNode2.Region = -1;
  v3 = 0;
  switch ( CurrCommand )
  {
    case 1200:
      PointerToScriptVariable = CRunningScript::GetPointerToScriptVariable(this, 2u);
      CRunningScript::CollectParameters(this, 1);
      goto LABEL_6;
    case 1201:
      PointerToScriptVariable = CRunningScript::GetPointerToScriptVariable(this, 1u);
      CRunningScript::CollectParameters(this, 1);
LABEL_6:
      v5 = *PointerToScriptVariable;
      v6 = ScriptParams[0];
      goto LABEL_10;
    case 1202:
      CRunningScript::CollectParameters(this, 1);
      v7 = CRunningScript::GetPointerToScriptVariable(this, 2u);
      goto LABEL_9;
    case 1203:
      CRunningScript::CollectParameters(this, 1);
      v7 = CRunningScript::GetPointerToScriptVariable(this, 1u);
LABEL_9:
      v6 = *v7;
      v5 = ScriptParams[0];
LABEL_10:
      v8 = v5 <= v6;
      v9 = 0;
      v3 = 0;
      if ( !v8 )
        v9 = 1;
      goto LABEL_21;
    case 1204:
      v10 = CRunningScript::GetPointerToScriptVariable(this, 2u);
      CRunningScript::CollectParameters(this, 1);
      goto LABEL_15;
    case 1205:
      v10 = CRunningScript::GetPointerToScriptVariable(this, 1u);
      CRunningScript::CollectParameters(this, 1);
LABEL_15:
      v11 = *v10;
      v12 = ScriptParams[0];
      goto LABEL_19;
    case 1206:
      CRunningScript::CollectParameters(this, 1);
      v13 = CRunningScript::GetPointerToScriptVariable(this, 2u);
      goto LABEL_18;
    case 1207:
      CRunningScript::CollectParameters(this, 1);
      v13 = CRunningScript::GetPointerToScriptVariable(this, 1u);
LABEL_18:
      v12 = *v13;
      v11 = ScriptParams[0];
LABEL_19:
      v8 = v11 < v12;
      v9 = 0;
      v3 = 0;
      if ( !v8 )
        v9 = 1;
      goto LABEL_21;
    case 1208:
      CRunningScript::CollectParameters(this, 2);
      v14 = &CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][28 * ScriptParams[1]];
      LODWORD(v15) = *((_DWORD *)v14 + 354);
      HIDWORD(v15) = *((_DWORD *)v14 + 357);
      *(_QWORD *)ScriptParams = v15;
      ScriptParams[2] = CPickups::ModelForWeapon((eWeaponType)v15);
      goto LABEL_154;
    case 1209:
      CRunningScript::CollectParameters(this, 5);
      CPathFind::FindNodePairClosestToCoors(
        &ThePaths,
        *(CVector *)ScriptParams,
        0,
        &Node,
        &pNode2,
        &v121,
        *(float *)&ScriptParams[3],
        *(float *)&ScriptParams[4],
        1u,
        1,
        0);
      if ( Node.Region == 0xFFFF )
      {
        v16 = 0;
        *(_QWORD *)ScriptParams = 0LL;
        *(_QWORD *)&ScriptParams[2] = 0LL;
        *(_QWORD *)&ScriptParams[3] = 0LL;
        *(_QWORD *)&ScriptParams[5] = 0LL;
      }
      else
      {
        v113 = 0;
        CPathFind::FindNodeCoorsForScript(&Coors, &ThePaths, Node, 0);
        *(CVector *)ScriptParams = Coors;
        CPathFind::FindNodeCoorsForScript(&pSuccess, &ThePaths, pNode2, (bool *)pStringToFill);
        Coors = pSuccess;
        if ( pStringToFill[0] )
        {
          v16 = 1;
          v113 = LODWORD(v121);
          *(CVector *)&ScriptParams[3] = Coors;
        }
        else
        {
          v16 = 0;
          ScriptParams[5] = 0;
          *(_QWORD *)ScriptParams = 0LL;
          *(_QWORD *)&ScriptParams[2] = 0LL;
          ScriptParams[4] = 0;
        }
        ScriptParams[6] = v113;
      }
      v116 = this;
      v115 = 7;
      goto LABEL_201;
    case 1210:
      CRunningScript::CollectParameters(this, 2);
      v17 = (unsigned int)ScriptParams[0] >> 8;
      m_aStorage = CPools::ms_pVehiclePool->m_aStorage;
      v19 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v20 = (float *)*((_DWORD *)v19 + 5);
      v21 = v20[6];
      v22 = (float)(*(float *)&ScriptParams[1] / 60.0) * v20[4];
      v23 = (float)(*(float *)&ScriptParams[1] / 60.0) * v20[5];
      v24 = *((_DWORD *)v19 + 226);
      v25 = (float)(*(float *)&ScriptParams[1] / 60.0) * v21;
      *((float *)v19 + 18) = v22;
      *((float *)v19 + 19) = v23;
      *((float *)v19 + 20) = v25;
      if ( (*(_BYTE *)(v24 + 207) & 2) == 0 || *((_DWORD *)v19 + 360) )
        return 0;
      v3 = 0;
      *(_DWORD *)&m_aStorage[v17][2144] = 1046562734;
      return v3;
    case 1211:
      CRunningScript::CollectParameters(this, 1);
      CGame::currArea = ScriptParams[0];
      CStreaming::RemoveBuildingsNotInArea(ScriptParams[0]);
      return 0;
    case 1212:
    case 1214:
    case 1215:
    case 1223:
    case 1269:
    case 1287:
    case 1291:
    case 1299:
      return v3;
    case 1213:
      CRunningScript::CollectParameters(this, 2);
      v26 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v27 = *((_DWORD *)v26 + 267);
      v28 = v27 & 0xF7FFFFFF;
      if ( ScriptParams[1] )
        v28 = v27 | 0x8000000;
      goto LABEL_84;
    case 1216:
      CRunningScript::CollectParameters(this, 7);
      v29 = ScriptParams[3];
      v30 = ScriptParams[6];
      if ( ScriptParams[6] )
        v30 = 1;
      GraphType = ScriptParams[4];
      v119 = ScriptParams[5];
      CRoadBlocks::RegisterScriptRoadBlock(*(CVector *)ScriptParams, *(CVector *)&v29, v30);
      return 0;
    case 1217:
      CRoadBlocks::ClearScriptRoadBlocks();
      return 0;
    case 1220:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v31 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v31 = 0;
      }
      pSuccess = *(CVector *)&ScriptParams[1];
      Multiply3x3(&Coors, *((const CMatrix **)v31 + 5), &pSuccess);
      v105 = *((_DWORD *)v31 + 5);
      v106 = (float *)(v105 + 48);
      if ( !v105 )
        v106 = (float *)(v31 + 4);
      *(float *)&v107 = Coors.y + v106[1];
      *(float *)&v108 = Coors.z + v106[2];
      *(float *)ScriptParams = Coors.x + *v106;
      ScriptParams[1] = v107;
      ScriptParams[2] = v108;
LABEL_154:
      v101 = this;
      v102 = 3;
      goto LABEL_155;
    case 1221:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0 )
        goto LABEL_96;
      if ( CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        goto LABEL_96;
      v32 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !v32 )
        goto LABEL_96;
      v33 = *((_DWORD *)v32 + 290);
      if ( (v33 & 0x40000) == 0 )
        goto LABEL_96;
      v34 = v32 + 1156;
      v35 = *((_DWORD *)v32 + 289);
      v36 = *((_DWORD *)v32 + 291);
      v37 = *((_DWORD *)v32 + 292);
      *v34 = v35;
      v34[1] = v33 & 0xFFFBFFFF;
      v34[2] = v36;
      v34[3] = v37;
LABEL_48:
      LOBYTE(v39) = 1;
      goto LABEL_106;
    case 1224:
      CRunningScript::CollectParameters(this, 1);
      v38 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( v38[1157] << 31
        && (CVehicle::GetVehicleAppearance(*((const CVehicle **)v38 + 356)) == APR_PLANE
         || CVehicle::GetVehicleAppearance(*((const CVehicle **)v38 + 356)) == APR_HELI) )
      {
        goto LABEL_48;
      }
      goto LABEL_96;
    case 1230:
      CRunningScript::CollectParameters(this, 4);
      GroundZForCoord = *(float *)&ScriptParams[2];
      v41 = *(float *)ScriptParams;
      v42 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CRadar::GetActualBlipArrayIndex(ParameterWithoutIncreasingPC);
      v127.x = v41;
      *(_QWORD *)&v127.y = __PAIR64__(LODWORD(GroundZForCoord), v42);
      v44 = CRadar::SetShortRangeCoordBlip(BLIPTYPE_COORDS, v127, 5u, BLIPDISPLAY_BOTH, this->ScriptName);
      CRadar::SetBlipSprite(v44, ScriptParams[3]);
      ScriptParams[0] = v44;
      goto LABEL_144;
    case 1232:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v45 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v45 = 0;
      }
      v109 = (float)((float)(*(float *)&ScriptParams[1] + 90.0) * 3.1416) / 180.0;
      v121 = v109;
      if ( v109 < 0.0 )
      {
        do
          v109 = v109 + 6.2832;
        while ( v109 < 0.0 );
        v121 = v109;
      }
      if ( v109 > 6.2832 )
      {
        do
          v109 = v109 + -6.2832;
        while ( v109 > 6.2832 );
        v121 = v109;
      }
      CAutomobile::SetHeliOrientation(v45, v109);
      return 0;
    case 1233:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v46 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v46 = 0;
      }
      CAutomobile::ClearHeliOrientation(v46);
      return 0;
    case 1234:
      CRunningScript::CollectParameters(this, 6);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v47 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v47 = 0;
      }
      CAutomobile::TellPlaneToGoToCoors(
        v47,
        *(float *)&ScriptParams[1],
        *(float *)&ScriptParams[2],
        *(float *)&ScriptParams[3],
        *(float *)&ScriptParams[4],
        *(float *)&ScriptParams[5]);
      return 0;
    case 1235:
      CRunningScript::CollectParameters(this, 4);
      v48 = *(float *)&ScriptParams[2];
      v49 = (CPathFind *)ScriptParams[0];
      v50 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v48 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      *(_QWORD *)&v128.x = __PAIR64__(LODWORD(v48), v50);
      z = 0.0;
      v128.z = 0.0;
      NthNodeClosestToCoors = CPathFind::FindNthNodeClosestToCoors(
                                (CNodeAddress *)&ThePaths,
                                v49,
                                v128,
                                1000000.0,
                                0.0,
                                1,
                                ScriptParams[3] - 1,
                                0,
                                0,
                                0,
                                bWaterNode);
      CPathFind::FindNodeCoorsForScript(&Coors, &ThePaths, (CNodeAddress)NthNodeClosestToCoors, (bool *)&pSuccess);
      if ( LOBYTE(pSuccess.x) )
      {
        v16 = 1;
        z = Coors.z;
        ScriptParams[0] = LODWORD(Coors.x);
        ScriptParams[1] = LODWORD(Coors.y);
      }
      else
      {
        v16 = 0;
        ScriptParams[0] = 0;
        ScriptParams[1] = 0;
      }
      v115 = 3;
      *(RwReal *)&ScriptParams[2] = z;
      v116 = this;
LABEL_201:
      CRunningScript::StoreParameters(v116, v115);
      v77 = this;
      LOBYTE(v39) = v16;
      goto LABEL_202;
    case 1237:
      CRunningScript::CollectParameters(this, 9);
      v53 = *(float *)&ScriptParams[2];
      v54 = *(float *)ScriptParams;
      v55 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v53 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      PCPointer = this->PCPointer;
      Coors.y = v55;
      v3 = 0;
      Coors.x = v54;
      Coors.z = v53;
      CCoronas::RegisterCorona(
        (u_native)this + (_DWORD)PCPointer,
        0,
        ScriptParams[6],
        ScriptParams[7],
        ScriptParams[8],
        0xFFu,
        &Coors,
        *(float *)&ScriptParams[3],
        150.0,
        LOBYTE(ScriptParams[4]),
        ScriptParams[5],
        1u,
        0,
        0,
        0.0,
        0,
        0.2,
        0,
        15.0,
        0,
        0);
      return v3;
    case 1238:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      CVehicle::bDisableRemoteDetonationOnContact = ScriptParams[0] == 0;
      return v3;
    case 1239:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v57 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v58 = *((_DWORD *)v57 + 17);
      v59 = v58 & 0xFFFFDFFF;
      if ( ScriptParams[1] )
        v59 = v58 | 0x2000;
      *((_DWORD *)v57 + 17) = v59;
      return v3;
    case 1240:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v60 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v61 = *((_DWORD *)v60 + 290);
      v62 = v61 & 0xFFEFFFFF;
      if ( ScriptParams[1] )
        v62 = v61 | 0x100000;
      *((_DWORD *)v60 + 290) = v62;
      return v3;
    case 1241:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v63 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v66 = *((_DWORD *)v63 + 17);
      v64 = (unsigned int *)(v63 + 68);
      v65 = v66;
      if ( ScriptParams[1] )
        v67 = v65 | 0x10000000;
      else
        v67 = v65 & 0xEFFFFFFF;
      *v64 = v67;
      return v3;
    case 1242:
      CRunningScript::CollectParameters(this, 1);
      LOBYTE(v39) = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][189] != 0;
      goto LABEL_106;
    case 1243:
      v3 = 0;
      CPlayerInfo::BlowUpRCBuggy(&CWorld::Players[CWorld::PlayerInFocus], 0);
      return v3;
    case 1245:
      CRunningScript::CollectParameters(this, 1);
      LODWORD(v68) = (int)*(float *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1356];
      goto LABEL_139;
    case 1247:
      CRunningScript::CollectParameters(this, 2);
      v26 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v69 = *((_DWORD *)v26 + 267);
      v28 = v69 & 0xEFFFFFFF;
      if ( ScriptParams[1] )
        v28 = v69 | 0x10000000;
LABEL_84:
      *((_DWORD *)v26 + 267) = v28;
      return 0;
    case 1248:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][993] = ScriptParams[1];
      return v3;
    case 1249:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v70 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v70 = 0;
      }
      CAutomobile::PopBoot(v70);
      return 0;
    case 1250:
      CRunningScript::CollectParameters(this, 2);
      return 0;
    case 1251:
      CRunningScript::CollectParameters(this, 3);
      CAEPedSpeechAudioEntity::SetCJMood(ScriptParams[1], ScriptParams[2], -1, -1, -1);
      return 0;
    case 1252:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      *(_QWORD *)&Coors.x = *(_QWORD *)ScriptParams;
      Coors.z = 0.0;
      CColStore::RequestCollision(&Coors, CGame::currArea);
      return v3;
    case 1253:
    case 1254:
      CRunningScript::LocateObjectCommand(this, CurrCommand);
      return 0;
    case 1255:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0])
        && (v71 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8]) != 0 )
      {
        v39 = (*((_DWORD *)v71 + 17) >> 8) & 1;
      }
      else
      {
LABEL_96:
        LOBYTE(v39) = 0;
      }
      goto LABEL_106;
    case 1257:
    case 1258:
      CRunningScript::ObjectInAreaCheckCommand(this, CurrCommand);
      return 0;
    case 1259:
      CRunningScript::CollectParameters(this, 2);
      v72 = (CTaskSimpleDuckToggle *)CTask::operator new(0xCu);
      CTaskSimpleDuckToggle::CTaskSimpleDuckToggle(v72, ScriptParams[1]);
      CRunningScript::GivePedScriptedTask(this, ScriptParams[0], v72, 1259);
      return 0;
    case 1261:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&Coors, 0x10u);
      AnimationBlockIndex = CAnimManager::GetAnimationBlockIndex((const unsigned __int8 *)&Coors);
      CStreaming::RequestModel(AnimationBlockIndex + 25575, 4);
      CScriptResourceManager::AddToResourceManager(&CTheScripts::ScriptResourceManager, AnimationBlockIndex, 1u, this);
      return 0;
    case 1262:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&Coors, 0x10u);
      LOBYTE(v39) = CAnimManager::GetAnimationBlock((const unsigned __int8 *)&Coors)->m_loaded;
      goto LABEL_106;
    case 1263:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&Coors, 0x10u);
      v74 = CAnimManager::GetAnimationBlockIndex((const unsigned __int8 *)&Coors);
      if ( v74 != -1
        && CScriptResourceManager::RemoveFromResourceManager(&CTheScripts::ScriptResourceManager, v74, 1u, this) )
      {
        CStreaming::SetMissionDoesntRequireModel(v74 + 25575);
      }
      return 0;
    case 1264:
      CRunningScript::CollectParameters(this, 1);
      v75 = 1996;
      v76 = CPools::ms_pPedPool;
      goto LABEL_105;
    case 1265:
      CRunningScript::CollectParameters(this, 1);
      v75 = 2604;
      v76 = (int *)&CPools::ms_pVehiclePool;
LABEL_105:
      v39 = (*(_DWORD *)(**(_DWORD **)*v76 + ((unsigned int)ScriptParams[0] >> 8) * v75 + 28) >> 18) & 1;
LABEL_106:
      v77 = this;
LABEL_202:
      CRunningScript::UpdateCompareFlag(v77, v39);
      return 0;
    case 1268:
      CRunningScript::CollectParameters(this, 8);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v78 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v78 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v110 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v110 = 0;
      }
      CPed::AttachPedToEntity(
        v78,
        v110,
        *(CVector *)&ScriptParams[2],
        ScriptParams[5],
        (float)(*(float *)&ScriptParams[6] * 3.1416) / 180.0,
        (eWeaponType)ScriptParams[7]);
      return 0;
    case 1271:
      IndexOfGlobalVariable = CRunningScript::GetIndexOfGlobalVariable(this);
      CRunningScript::CollectParameters(this, 2);
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      CText::Get(&TheText, pStringToFill);
      COnscreenTimer::AddCounter(
        &CUserDisplay::OnscnTimer,
        IndexOfGlobalVariable,
        ScriptParams[0],
        pStringToFill,
        (unsigned __int16)(LOWORD(ScriptParams[1]) - 1));
      return 0;
    case 1272:
      CRunningScript::CollectParameters(this, 13);
      CSetPieces::AddOne(
        ScriptParams[0],
        *(CVector2D *)&ScriptParams[1],
        *(CVector2D *)&ScriptParams[3],
        *(CVector2D *)&ScriptParams[5],
        *(CVector2D *)&ScriptParams[7],
        *(CVector2D *)&ScriptParams[9],
        *(CVector2D *)&ScriptParams[11]);
      return 0;
    case 1273:
      CRunningScript::CollectParameters(this, 2);
      v80 = ScriptParams[0] - 1;
      if ( ScriptParams[1] )
      {
        CTimeCycle::StartExtraColour(v80, 1);
        return 0;
      }
      v3 = 0;
      CTimeCycle::StartExtraColour(v80, 0);
      return v3;
    case 1274:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        CTimeCycle::StopExtraColour(1);
        return 0;
      }
      v3 = 0;
      CTimeCycle::StopExtraColour(0);
      return v3;
    case 1276:
      CRunningScript::CollectParameters(this, 1);
      v81 = &CWorld::Players[ScriptParams[0]];
      v82 = *(_QWORD *)&v81->nBestBikeWheelieTimeMs;
      *(_QWORD *)ScriptParams = *(_QWORD *)&v81->nBestCarTwoWheelsTimeMs;
      *(_QWORD *)&ScriptParams[2] = v82;
      v83 = *(_QWORD *)&v81->nBestBikeStoppieTimeMs;
      ScriptParams[4] = v81->nBestBikeStoppieTimeMs;
      ScriptParams[5] = HIDWORD(v83);
      CRunningScript::StoreParameters(this, 6);
      *(_QWORD *)&v81->nBestCarTwoWheelsTimeMs = 0LL;
      *(_QWORD *)&v81->nBestBikeWheelieTimeMs = 0LL;
      v3 = 0;
      v81->nBestBikeStoppieTimeMs = 0;
      v81->fBestBikeStoppieDistM = 0.0;
      return v3;
    case 1278:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v84 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v84 = 0;
      }
      if ( *((_DWORD *)v84 + 360) != 9 )
      {
        v114 = *(void (**)(void))(*(_DWORD *)v84 + 180);
        goto LABEL_208;
      }
      if ( ScriptParams[1] == 2 )
      {
        v111 = 0;
      }
      else
      {
        if ( ScriptParams[1] != 3 )
          goto LABEL_207;
        v111 = 1;
      }
      ScriptParams[1] = v111;
LABEL_207:
      v114 = *(void (**)(void))(*(_DWORD *)v84 + 180);
LABEL_208:
      v114();
      return 0;
    case 1280:
      CRunningScript::CollectParameters(this, 2);
      v85 = CWorld::Players[ScriptParams[0]].PlayerPedData.m_pClothes->texturesKeyArray[ScriptParams[1]];
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&Coors, 0x10u);
      UppercaseKey = CKeyGen::GetUppercaseKey((const unsigned __int8 *)&Coors);
      v9 = 0;
      v3 = 0;
      if ( v85 == UppercaseKey )
        v9 = 1;
LABEL_21:
      CRunningScript::UpdateCompareFlag(this, v9);
      return v3;
    case 1281:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v87 = ScriptParams[1];
      if ( ScriptParams[1] )
        v87 = 1;
      CWorld::Players[ScriptParams[0]].bCanDoDriveBy = v87;
      return v3;
    case 1283:
      CRunningScript::CollectParameters(this, 5);
      v88 = *(_QWORD *)ScriptParams;
      Coors = *(CVector *)&ScriptParams[2];
      v89 = CRopes::CreateRopeForSwatPed(&Coors);
      v90 = CPopulation::AddPed((ePedType)v88, HIDWORD(v88), &Coors, 1);
      v91 = (CTaskComplexUseSwatRope *)CTask::operator new(0x1Cu);
      CTaskComplexUseSwatRope::CTaskComplexUseSwatRope(v91, v89);
      CTaskManager::SetTask(&v90->m_pPedIntelligence->m_taskManager, v91, 3, 0);
      VacantSlot = CPedScriptedTaskRecord::GetVacantSlot();
      CPedScriptedTaskRecordData::Set(&CPedScriptedTaskRecord::ms_scriptedTasks[VacantSlot], v90, 1283, v91);
      CPed::SetCharCreatedBy(v90, 2u);
      m_pPedIntelligence = v90->m_pPedIntelligence;
      *(_DWORD *)&v90->m_nPedFlags &= ~0x80000000;
      v94 = (CTaskSimpleStandStill *)CTask::operator new(0x20u);
      CTaskSimpleStandStill::CTaskSimpleStandStill(
        v94,
        (const int)"List_FillGlobeColPointsER8CPtrListRK8CColLineRP7CEntitybP15CStoredCollPoly",
        1,
        0,
        8.0);
      CTaskManager::SetTask(&m_pPedIntelligence->m_taskManager, v94, 4, 0);
      m_pMat = v90->m_pMat;
      p_tx = (CSimpleTransform *)&m_pMat->tx;
      if ( !m_pMat )
        p_tx = &v90->m_transform;
      v97 = *(_QWORD *)&p_tx->m_translate.x;
      pSuccess.z = p_tx->m_translate.z;
      *(_QWORD *)&pSuccess.x = v97;
      CTheScripts::ClearSpaceForMissionEntity(&pSuccess, v90);
      if ( this->IsThisAMissionScript )
        *(_DWORD *)&v90->m_nFlags |= 0x40000u;
      ++CPopulation::ms_nTotalMissionPeds;
      ScriptParams[0] = CPools::ms_pPedPool->m_aFlags[-1093107909
                                                    * (((char *)v90 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)v90 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2));
      CRunningScript::StoreParameters(this, 1);
      if ( this->IsThisAMissionScript )
        CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, ScriptParams[0], 2u);
      return 0;
    case 1286:
      CRunningScript::CollectParameters(this, 3);
      v3 = 0;
      CVehicleModelInfo::ms_compsToUse[0] = ScriptParams[1];
      CVehicleModelInfo::ms_compsToUse[1] = ScriptParams[2];
      return v3;
    case 1288:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v98 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v98 = 0;
      }
      CAutomobile::CloseAllDoors(v98);
      return 0;
    case 1289:
      CRunningScript::CollectParameters(this, 4);
      v99 = (float)((float)(*(float *)ScriptParams - *(float *)&ScriptParams[2])
                  * (float)(*(float *)ScriptParams - *(float *)&ScriptParams[2]))
          + (float)((float)(*(float *)&ScriptParams[1] - *(float *)&ScriptParams[3])
                  * (float)(*(float *)&ScriptParams[1] - *(float *)&ScriptParams[3]));
      goto LABEL_138;
    case 1290:
      CRunningScript::CollectParameters(this, 6);
      v99 = (float)((float)((float)(*(float *)ScriptParams - *(float *)&ScriptParams[3])
                          * (float)(*(float *)ScriptParams - *(float *)&ScriptParams[3]))
                  + (float)((float)(*(float *)&ScriptParams[1] - *(float *)&ScriptParams[4])
                          * (float)(*(float *)&ScriptParams[1] - *(float *)&ScriptParams[4])))
          + (float)((float)(*(float *)&ScriptParams[2] - *(float *)&ScriptParams[5])
                  * (float)(*(float *)&ScriptParams[2] - *(float *)&ScriptParams[5]));
LABEL_138:
      v68 = sqrtf(v99);
LABEL_139:
      *(float *)ScriptParams = v68;
      goto LABEL_144;
    case 1294:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v100 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v100 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v112 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v112 = 0;
      }
      *((_DWORD *)v100 + 75) = v112;
      return 0;
    case 1295:
      ScriptParams[0] = CWanted::MaximumWantedLevel;
LABEL_144:
      v101 = this;
      v102 = 1;
LABEL_155:
      CRunningScript::StoreParameters(v101, v102);
      return 0;
    case 1298:
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v103 = CText::Get(&TheText, pStringToFill);
      v104 = CTheScripts::bDisplayNonMiniGameHelpMessages == 0;
      if ( !CTheScripts::bDisplayNonMiniGameHelpMessages )
        v104 = this->bIsThisAMiniGameScript == 0;
      if ( !v104 || !CTheScripts::bMiniGameInProgress )
      {
        CHud::SetHelpMessage(pStringToFill, v103, 0, 1, 0, 0);
        if ( CTheScripts::bAddNextMessageToPreviousBriefs )
          CMessages::AddToPreviousBriefArray(pStringToFill, v103, -1, -1, -1, -1, -1, -1, 0);
      }
      v3 = 0;
      CTheScripts::bAddNextMessageToPreviousBriefs = 1;
      return v3;
    default:
      return -1;
  }
}
// 3507B8: fragmented variable at r3.4 may be wrong
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 6782D8: using guessed type char *CTheScripts::bDisplayNonMiniGameHelpMessages[3];
// 678534: using guessed type int *CPools::ms_pVehiclePool;

//----- (00351D74) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
Int8 __fastcall CRunningScript::ProcessCommands1300To1399(CRunningScript *this, Int32 CurrCommand)
{
  Int8 v3; // r6
  float v4; // s20
  Int32 v5; // s16
  Int32 v6; // s18
  int32 ParameterWithoutIncreasingPC; // r0
  float v8; // s20
  Int32 v9; // s18
  Int32 v10; // s16
  int32 v11; // r0
  uint8 *v12; // r4
  uint8 *v13; // r0
  uint8 *v14; // r0
  uint8 *v15; // r0
  uint8 *v16; // r0
  int v17; // r0
  uint8 *v18; // r1
  int v19; // r2
  unsigned int v20; // r3
  CVehiclePool *v21; // r0
  int32 m_nSize; // r1
  int v23; // r4
  int i; // r6
  uint8 *v25; // r10
  uint8 *v26; // r5
  int v27; // r1
  int v28; // r0
  uint8 *v29; // r1
  int v30; // r2
  unsigned int v31; // r3
  uint8 *v32; // r4
  uint8 *v33; // r0
  int v34; // r2
  uint8 *v35; // r0
  uint8 *v36; // r0
  uint8 *v37; // r1
  int v38; // r2
  unsigned int v39; // r6
  CPed *v40; // r0
  char v41; // r0
  CPlayerInfo *v42; // r6
  UInt8 MaxHealth; // r5
  float v44; // s0
  CPlayerPed *pPed; // r1
  float *p_m_nHealth; // r0
  CPlayerInfo *v47; // r6
  UInt8 MaxArmour; // r5
  CPlayerPed *v49; // r1
  CVehicle *v50; // r0
  CVehicle *v51; // r0
  CPlayerPed *v52; // r0
  eWeaponType m_eWeaponType; // r1
  uint8 *v54; // r0
  __int64 v55; // kr08_8 OVERLAPPED
  int v56; // r2
  Bool8 HasCollidedWith; // r1
  uint8 *v58; // r4
  const CVehicle *v59; // r0
  int IsLawEnforcementVehicle; // r0
  unsigned int v61; // r1
  CPedPool *v62; // r0
  int v63; // r2
  float GroundZForCoord; // s20
  RwReal v65; // s16
  Int32 v66; // s18
  int32 v67; // r0
  unsigned int v68; // r5
  uint8 *v69; // r0
  uint8 *v70; // r1
  int v71; // r2
  unsigned int v72; // r3
  uint8 *v73; // r2
  RwReal v74; // s2
  RwReal v75; // s4
  CEntity *v76; // r1
  CPed *v77; // r5
  CPed *v78; // r5
  int v79; // r1
  uint8 *v80; // r0
  uint8 *v81; // r1
  char v82; // r3
  int v83; // r0
  uint8 *v84; // r2
  bool v85; // r2
  uint8 *v86; // r3
  uint8 *v87; // r0
  uint8 *v88; // r0
  bool v89; // zf
  CPlayerInfo *v91; // r4
  CPlayerPed *v92; // r0
  __int64 Type; // [sp+0h] [bp-98h]
  CVector v94; // [sp+24h] [bp-74h] BYREF
  CVector v; // [sp+30h] [bp-68h] BYREF
  CWeapon pStringToFill; // [sp+40h] [bp-58h] BYREF
  CVector v97; // 0:r0.12
  CVector v98; // 0:r0.12
  CVector v99; // 0:r1.12

  v3 = 0;
  switch ( CurrCommand )
  {
    case 1301:
    case 1313:
    case 1314:
    case 1315:
    case 1316:
    case 1317:
    case 1344:
    case 1349:
    case 1352:
    case 1355:
    case 1357:
    case 1361:
    case 1362:
    case 1366:
    case 1367:
    case 1371:
    case 1385:
      return v3;
    case 1303:
      CRunningScript::CollectParameters(this, 3);
      v4 = *(float *)&ScriptParams[2];
      v5 = ScriptParams[0];
      v6 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v4 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]) + 0.5;
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 8u);
      CText::Get(&TheText, (const unsigned __int8 *)&pStringToFill);
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CPickups::GetActualPickupIndex(ParameterWithoutIncreasingPC);
      *(_QWORD *)&v97.x = __PAIR64__(v6, v5);
      v3 = 0;
      v97.z = v4;
      ScriptParams[0] = CPickups::GenerateNewOne(
                          v97,
                          MI_PICKUP_PROPERTY,
                          17,
                          0,
                          0,
                          0,
                          (unsigned __int8 *)&pStringToFill);
      goto LABEL_9;
    case 1304:
      CRunningScript::CollectParameters(this, 4);
      v8 = *(float *)&ScriptParams[2];
      v9 = ScriptParams[0];
      v10 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        v8 = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]) + 0.5;
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 8u);
      CText::Get(&TheText, (const unsigned __int8 *)&pStringToFill);
      v11 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CPickups::GetActualPickupIndex(v11);
      v98.z = v8;
      v3 = 0;
      *(_QWORD *)&v98.x = __PAIR64__(v10, v9);
      ScriptParams[0] = CPickups::GenerateNewOne(
                          v98,
                          MI_PICKUP_PROPERTY_FORSALE,
                          18,
                          ScriptParams[3],
                          0,
                          0,
                          (unsigned __int8 *)&pStringToFill);
LABEL_9:
      CRunningScript::StoreParameters(this, 1);
      return v3;
    case 1305:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v12 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v12 = 0;
      }
      v83 = *((_DWORD *)v12 + 17);
      if ( ScriptParams[1] )
      {
        *((_DWORD *)v12 + 17) = v83 | 0x200C;
        CPhysical::SkipPhysics((CPhysical *)v12);
        v3 = 0;
        *((_QWORD *)v12 + 9) = 0LL;
        *((_QWORD *)v12 + 10) = 0LL;
        *((_DWORD *)v12 + 22) = 0;
        *((_DWORD *)v12 + 23) = 0;
        return v3;
      }
      *((_DWORD *)v12 + 17) = v83 & 0xFFFFDFF3;
      return 0;
    case 1306:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v13 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v13 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v73 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( !v13 )
          goto LABEL_197;
      }
      else
      {
        v73 = 0;
        if ( !v13 )
          goto LABEL_197;
      }
      v80 = (uint8 *)*((_DWORD *)v13 + 475);
      HasCollidedWith = 0;
      if ( !v80 )
        goto LABEL_198;
      if ( v80 == v73 )
        HasCollidedWith = 1;
      if ( !(v73[1157] << 31) )
        goto LABEL_198;
      v81 = (uint8 *)*((_DWORD *)v73 + 356);
      v82 = 0;
      goto LABEL_178;
    case 1307:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v14 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v14 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v84 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v84 = 0;
      }
      HasCollidedWith = 0;
      if ( v14 )
      {
        v87 = (uint8 *)*((_DWORD *)v14 + 475);
        if ( v87 == v84 )
          HasCollidedWith = 1;
        HasCollidedWith &= v87 != 0;
      }
      goto LABEL_198;
    case 1308:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v15 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v15 = 0;
      }
      if ( ScriptParams[1] == -1
        || ScriptParams[1] < 0
        || CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] != LOBYTE(ScriptParams[1]) )
      {
        v73 = 0;
        if ( !v15 )
          goto LABEL_197;
      }
      else
      {
        v73 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( !v15 )
          goto LABEL_197;
      }
      v80 = (uint8 *)*((_DWORD *)v15 + 327);
      if ( !v80 )
        goto LABEL_197;
      if ( ScriptParams[1] == -1 )
      {
        HasCollidedWith = 0;
        v89 = (v80[58] & 7) == 3;
        goto LABEL_213;
      }
      HasCollidedWith = 0;
      v82 = 0;
      if ( v80 == v73 )
        HasCollidedWith = 1;
      if ( v73[1157] << 31 )
      {
        v81 = (uint8 *)*((_DWORD *)v73 + 356);
LABEL_178:
        v85 = v80 == v73;
        if ( v80 == v81 )
          v82 = 1;
        HasCollidedWith = v85 | v82;
      }
      goto LABEL_198;
    case 1309:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v16 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v16 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v86 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( !v16 )
          goto LABEL_197;
      }
      else
      {
        v86 = 0;
        if ( !v16 )
        {
LABEL_197:
          HasCollidedWith = 0;
          goto LABEL_198;
        }
      }
      v88 = (uint8 *)*((_DWORD *)v16 + 327);
      if ( !v88 )
        goto LABEL_197;
      HasCollidedWith = 0;
      if ( ScriptParams[1] == -1 )
        v89 = (v88[58] & 7) == 2;
      else
        v89 = v88 == v86;
LABEL_213:
      if ( v89 )
        HasCollidedWith = 1;
LABEL_198:
      CRunningScript::UpdateCompareFlag(this, HasCollidedWith);
      return 0;
    case 1310:
      v17 = CAudioEngine::GetCurrentRadioStationID(&AudioEngine) - 1;
      goto LABEL_201;
    case 1318:
      CRunningScript::CollectParameters(this, 2);
      v18 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v19 = *((_DWORD *)v18 + 290);
      v20 = v19 & 0xFF7FFFFF;
      if ( ScriptParams[1] )
        v20 = v19 | 0x800000;
      goto LABEL_100;
    case 1324:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v89 = LOBYTE(ScriptParams[1]) == 0;
      *(_WORD *)&CWorld::Players[ScriptParams[0]].PlayerPedData.m_nDrunkenness = LOBYTE(ScriptParams[1]);
      if ( !v89 )
        return v3;
      CMBlur::ClearDrunkBlur();
      return 0;
    case 1342:
      CRunningScript::CollectParameters(this, 5);
      v21 = CPools::ms_pVehiclePool;
      m_nSize = CPools::ms_pVehiclePool->m_nSize;
      if ( m_nSize )
      {
        v23 = m_nSize - 1;
        for ( i = m_nSize; ; --i )
        {
          if ( (v21->m_aFlags[v23] & 0x80u) == 0
            && (v25 = v21->m_aStorage[i], v26 = v25 - 2604, v25 != (uint8 *)&elf_hash_bucket[588])
            && (CVehicle::GetVehicleAppearance((const CVehicle *)(v25 - 2604)) == APR_CAR
             || CVehicle::GetVehicleAppearance((const CVehicle *)(v25 - 2604)) == APR_BIKE)
            && (ScriptParams[4] == *((__int16 *)v25 - 1283) || ScriptParams[4] <= -1)
            && CVehicle::CanBeDeleted((const CVehicle *)(v25 - 2604))
            && CPlaceable::IsWithinArea(
                 (const CPlaceable *)(v25 - 2604),
                 *(float *)ScriptParams,
                 *(float *)&ScriptParams[1],
                 *(float *)&ScriptParams[2],
                 *(float *)&ScriptParams[3]) )
          {
            v27 = -1075391197 * ((v26 - (uint8 *)CPools::ms_pVehiclePool->m_aStorage) >> 2);
            v28 = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                                  * ((v26 - (uint8 *)CPools::ms_pVehiclePool->m_aStorage) >> 2)];
            *((_DWORD *)v25 - 384) |= 0x20000u;
            v17 = v28 | (v27 << 8);
            if ( !v23 )
              break;
          }
          else
          {
            v17 = -1;
            if ( !v23 )
              break;
          }
          if ( v17 != -1 )
            break;
          --v23;
          v21 = CPools::ms_pVehiclePool;
        }
      }
      else
      {
        v17 = -1;
      }
LABEL_201:
      ScriptParams[0] = v17;
LABEL_202:
      CRunningScript::StoreParameters(this, 1);
      return 0;
    case 1343:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v29 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v30 = *((_DWORD *)v29 + 267);
      v31 = v30 | 0x80000000;
      if ( ScriptParams[1] )
        v31 = v30 & 0x7FFFFFFF;
      *((_DWORD *)v29 + 267) = v31;
      return v3;
    case 1345:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v32 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v32 = 0;
      }
      v3 = 0;
      if ( CTimer::m_snTimeInMilliseconds > *((_DWORD *)v32 + 313) + 150 )
      {
        CWeapon::CWeapon(&pStringToFill, WEAPONTYPE_MINIGUN, 5000);
        v = CAutomobile::vecHunterGunPos;
        operator*(&v94, *((const CMatrix **)v32 + 5), &v);
        v74 = (float)(CTimer::ms_fTimeStep * *((float *)v32 + 19)) + v94.y;
        v75 = (float)(CTimer::ms_fTimeStep * *((float *)v32 + 20)) + v94.z;
        v.x = (float)(CTimer::ms_fTimeStep * *((float *)v32 + 18)) + v94.x;
        v.y = v74;
        v.z = v75;
        CWeapon::FireInstantHit(&pStringToFill, (CEntity *)v32, &v, &v, 0, 0, 0, 0, 1);
        v94.x = 0.0;
        v94.y = 0.1;
        CWeapon::AddGunshell(&pStringToFill, (CEntity *)v32, &v, (const CVector2D *)&v94, 0.025);
        CAudioEngine::ReportWeaponEvent(&AudioEngine, 149, WEAPONTYPE_MINIGUN, (CPhysical *)v32);
        *((_DWORD *)v32 + 313) = CTimer::m_snTimeInMilliseconds;
      }
      return v3;
    case 1351:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v33 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v33 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v76 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v76 = 0;
      }
      if ( v33[1157] << 31 )
        v33 = (uint8 *)*((_DWORD *)v33 + 356);
      HasCollidedWith = CPhysical::GetHasCollidedWith((CPhysical *)v33, v76);
      goto LABEL_198;
    case 1354:
      CRunningScript::CollectParameters(this, 2);
      v18 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v34 = *((_DWORD *)v18 + 290);
      v20 = v34 & 0xFBFFFFFF;
      if ( ScriptParams[1] )
        v20 = v34 | 0x4000000;
      goto LABEL_100;
    case 1356:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 8u);
      CText::LoadMissionText(&TheText, (unsigned __int8 *)&pStringToFill);
      return 0;
    case 1358:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0
        || CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
      {
        return 0;
      }
      v35 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v3 = 0;
      if ( v35 )
        *((_DWORD *)v35 + 475) = 0;
      return v3;
    case 1359:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0
        || CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
      {
        return 0;
      }
      v36 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v3 = 0;
      if ( v36 )
        *((_DWORD *)v36 + 327) = 0;
      return v3;
    case 1360:
      CRunningScript::CollectParameters(this, 2);
      v37 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v38 = *((_DWORD *)v37 + 17);
      v39 = v38 | 0x2004;
      if ( !ScriptParams[1] )
        v39 = v38 & 0xFFFFDFFB;
      *((_DWORD *)v37 + 17) = v39;
      return 0;
    case 1365:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v40 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v40 = 0;
      }
      CPed::ClearWeapon(v40, (eWeaponType)ScriptParams[1]);
      return 0;
    case 1373:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v41 = ScriptParams[1];
      if ( ScriptParams[1] )
        v41 = 1;
      CWorld::Players[ScriptParams[0]].FireProof = v41;
      return v3;
    case 1374:
      CRunningScript::CollectParameters(this, 2);
      v42 = &CWorld::Players[ScriptParams[0]];
      MaxHealth = v42->MaxHealth;
      v44 = (float)(unsigned __int8)(LOBYTE(ScriptParams[1]) + MaxHealth);
      pPed = v42->pPed;
      v42->MaxHealth = LOBYTE(ScriptParams[1]) + MaxHealth;
      p_m_nHealth = &pPed->m_nHealth;
      goto LABEL_82;
    case 1375:
      CRunningScript::CollectParameters(this, 2);
      v47 = &CWorld::Players[ScriptParams[0]];
      MaxArmour = v47->MaxArmour;
      v44 = (float)(unsigned __int8)(LOBYTE(ScriptParams[1]) + MaxArmour);
      v49 = v47->pPed;
      v47->MaxArmour = LOBYTE(ScriptParams[1]) + MaxArmour;
      p_m_nHealth = &v49->m_nArmour;
LABEL_82:
      *p_m_nHealth = v44;
      return 0;
    case 1376:
      CRunningScript::CollectParameters(this, 1);
      v3 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v50 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v50 = 0;
      }
      v77 = CPopulation::AddPedInCar(v50, 1, -1, 0, 0, 0);
      CPed::SetCharCreatedBy(v77, 2u);
      CTaskManager::SetTask(&v77->m_pPedIntelligence->m_taskManager, 0, 3, 0);
      *(_DWORD *)&v77->m_nPedFlags &= ~0x80000000;
      ++CPopulation::ms_nTotalMissionPeds;
      ScriptParams[0] = CPools::ms_pPedPool->m_aFlags[-1093107909
                                                    * (((char *)v77 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)v77 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2));
      CRunningScript::StoreParameters(this, 1);
      if ( this->IsThisAMissionScript )
        goto LABEL_144;
      return v3;
    case 1377:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v51 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v51 = 0;
      }
      v78 = CPopulation::AddPedInCar(v51, 0, -1, ScriptParams[1], 0, 0);
      CPed::SetCharCreatedBy(v78, 2u);
      *(_DWORD *)&v78->m_nPedFlags &= ~0x80000000;
      ++CPopulation::ms_nTotalMissionPeds;
      ScriptParams[0] = CPools::ms_pPedPool->m_aFlags[-1093107909
                                                    * (((char *)v78 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)v78 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2));
      CRunningScript::StoreParameters(this, 1);
      if ( !this->IsThisAMissionScript )
        return v3;
LABEL_144:
      CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, ScriptParams[0], 2u);
      return 0;
    case 1379:
      CRunningScript::CollectParameters(this, 2);
      v52 = CWorld::Players[ScriptParams[0]].pPed;
      if ( *((unsigned __int8 *)&v52->m_nPedFlags + 1) << 31 )
      {
        m_eWeaponType = v52->m_WeaponSlots[4].m_eWeaponType;
        if ( m_eWeaponType )
        {
          if ( v52->m_WeaponSlots[4].m_nAmmoTotal < ScriptParams[1] )
            CPed::SetAmmo(v52, m_eWeaponType, ScriptParams[1]);
        }
        else
        {
          v91 = &CWorld::Players[ScriptParams[0]];
          CPed::GiveWeapon(v52, WEAPONTYPE_MICRO_UZI, ScriptParams[1], 1);
          v92 = v91->pPed;
          if ( v91->pPed->m_eStoredWeapon == WEAPONTYPE_UNIDENTIFIED )
          {
            v92->m_eStoredWeapon = v92->m_WeaponSlots[v92->m_nCurrentWeapon].m_eWeaponType;
            v92 = v91->pPed;
          }
          CPed::SetCurrentWeapon(v92, WEAPONTYPE_MICRO_UZI);
        }
      }
      return 0;
    case 1380:
      CRunningScript::CollectParameters(this, 1);
      v54 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( (unsigned __int8)(v54[958] - 57) < 2u )
        return 0;
      v3 = 0;
      v54[958] = 58;
      return v3;
    case 1381:
      CRunningScript::CollectParameters(this, 4);
      v3 = 0;
      v55 = *(_QWORD *)ScriptParams;
      Type = *(_QWORD *)&ScriptParams[1];
      CExplosion::AddExplosion(0, 0, (eExplosionType)ScriptParams[3], *(CVector *)&v55, 0, 0, -1.0, 0);
      return v3;
    case 1382:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][51] = ScriptParams[1];
      return v3;
    case 1384:
      CRunningScript::CollectParameters(this, 2);
      v18 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v56 = *((_DWORD *)v18 + 290);
      v20 = v56 & 0xEFFFFFFF;
      if ( ScriptParams[1] )
        v20 = v56 | 0x10000000;
LABEL_100:
      *((_DWORD *)v18 + 290) = v20;
      return 0;
    case 1386:
      HasCollidedWith = CCutsceneMgr::ms_wasCutsceneSkipped;
      goto LABEL_198;
    case 1388:
      CRunningScript::CollectParameters(this, 1);
      v58 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !(v58[1157] << 31) )
        goto LABEL_197;
      v59 = (const CVehicle *)*((_DWORD *)v58 + 356);
      if ( !v59 )
        goto LABEL_197;
      IsLawEnforcementVehicle = CVehicle::IsLawEnforcementVehicle(v59);
      HasCollidedWith = 0;
      if ( IsLawEnforcementVehicle && *(_WORD *)(*((_DWORD *)v58 + 356) + 38) != 430 )
        HasCollidedWith = 1;
      goto LABEL_198;
    case 1389:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0 )
        goto LABEL_197;
      v61 = (unsigned int)ScriptParams[0] >> 8;
      v62 = CPools::ms_pPedPool;
      if ( CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        goto LABEL_197;
      v63 = 1996;
      goto LABEL_114;
    case 1390:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0 )
        goto LABEL_197;
      v61 = (unsigned int)ScriptParams[0] >> 8;
      v62 = (CPedPool *)CPools::ms_pVehiclePool;
      if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        goto LABEL_197;
      v63 = 2604;
LABEL_114:
      HasCollidedWith = &(*v62->m_aStorage)[v61 * v63] != 0;
      goto LABEL_198;
    case 1392:
      CRunningScript::CollectParameters(this, 4);
      GroundZForCoord = *(float *)&ScriptParams[2];
      v65 = *(float *)ScriptParams;
      v66 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      v67 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CRadar::GetActualBlipArrayIndex(v67);
      v99.x = v65;
      *(_QWORD *)&v99.y = __PAIR64__(LODWORD(GroundZForCoord), v66);
      v68 = CRadar::SetShortRangeCoordBlip(BLIPTYPE_CONTACT, v99, 2u, BLIPDISPLAY_BOTH, this->ScriptName);
      CRadar::SetBlipSprite(v68, ScriptParams[3]);
      ScriptParams[0] = v68;
      goto LABEL_202;
    case 1394:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        if ( CCheat::m_aCheatFunctions[99] )
        {
          CCheat::m_aCheatFunctions[99]();
          return 0;
        }
        v3 = 0;
        CCheat::m_aCheatsActive[99] = CCheat::m_aCheatsActive[99] == 0;
      }
      else
      {
        v3 = 0;
        CCheat::m_aCheatsActive[99] = 0;
      }
      return v3;
    case 1396:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v69 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v69 = 0;
      }
      v79 = *((_DWORD *)v69 + 17);
      if ( ScriptParams[1] )
      {
        *((_DWORD *)v69 + 17) = v79 | 0x2004;
        return 0;
      }
      v3 = 0;
      v69[188] = 0;
      *((_DWORD *)v69 + 17) = v79 & 0xFFFFDFFB;
      return v3;
    case 1397:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v70 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v71 = *((_DWORD *)v70 + 17);
      v72 = v71 & 0xFFFFDFFF;
      if ( ScriptParams[1] )
        v72 = v71 | 0x2000;
      *((_DWORD *)v70 + 17) = v72;
      return v3;
    default:
      return -1;
  }
}
// 35268B: failed to expand linear variable kr08_8.8
// 0: using guessed type int dword_0;
// 60: using guessed type int dword_60;
// FC: using guessed type int elf_hash_bucket[16411];
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 678534: using guessed type int *CPools::ms_pVehiclePool;

//----- (00352FE0) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands1400To1499(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t d0_0; // d0
  float32x2_t v3; // d8
  char *v5; // r5
  Int8 v6; // r4
  Bool8 v7; // r0
  Int32 v8; // r6
  int DoesPointLieWithinZoneWithGivenName; // r0
  Bool8 v10; // r1
  uint8 *v11; // r5
  Int32 v12; // r5
  RwReal v13; // r6
  Int32 v14; // r9
  float StatValue; // r0
  int v16; // r1
  UInt32 IndexOfGlobalVariable; // r5
  int v18; // r8
  int v19; // r0
  __int16 v20; // r6
  Int32 v21; // r4
  int v22; // s0
  int v23; // r1
  int v24; // r2
  __int16 v25; // r3
  Int16 v26; // r0
  Int16 v27; // r1
  float *v28; // r1
  float v29; // s0
  uint8 *v30; // r4
  const CMatrix **v31; // r4
  char v32; // r1
  double v33; // d16
  double v34; // d18
  double v35; // d19
  double v36; // d17
  double v37; // d20
  float v38; // s0
  float v39; // s2
  char v40; // r0
  double v41; // d18
  float v42; // s4
  float v43; // s6
  float v44; // s8
  char v45; // r0
  char v46; // r1
  float v47; // s10
  double v48; // d17
  float v49; // s12
  char v50; // r0
  char v51; // r1
  float v52; // s14
  uint8 *v53; // r0
  uint8 *v54; // r6
  float *v55; // r1
  UInt8 v56; // r1
  char *PointerToScriptVariable; // r5
  UInt8 v58; // r1
  Int32 *v59; // r5
  int v60; // r0
  Int32 v61; // r4
  Int32 v62; // s2
  float v63; // s6
  Int32 v64; // s4
  Int32 v65; // s10
  float v66; // s7
  float v67; // s11
  float v68; // s6
  float v69; // s9
  float v70; // s8
  float v71; // s18
  float v72; // s11
  float v73; // s13
  float v74; // s9
  float v75; // s6
  float v76; // s8
  float v77; // s9
  Int32 v78; // s7
  Int32 v79; // s3
  Int32 v80; // s5
  float v81; // s12
  float v82; // s10
  float v83; // s10
  float v84; // s4
  float v85; // s2
  float v86; // s0
  Int32 v87; // r5
  Bool8 v88; // r1
  __int64 v89; // kr08_8
  CTaskSimpleRunAnim *v90; // r6
  int32 v91; // r1
  CTask *v92; // r2
  char *v93; // r0
  int32 v94; // r3
  __int64 v95; // kr10_8
  CTaskSimpleStandStill *v96; // r9
  __int64 v97; // kr18_8
  int v98; // r9
  CTaskComplexFallAndGetUp *v99; // r5
  CRunningScript *v100; // r0
  int32 v101; // r1
  CTask *v102; // r2
  int32 v103; // r3
  __int64 v104; // kr20_8
  CTaskComplexJump *v105; // r6
  __int64 v106; // kr28_8
  CTaskSimpleTired *v107; // r5
  int32 v108; // r5
  CTaskComplexDie *v109; // r6
  int32 v110; // r5
  __int64 v111; // kr30_8
  CTaskSimple *v112; // r4
  uint8 *v113; // r0
  CTask *v114; // r1
  int v115; // r2
  unsigned int v116; // r5
  CTaskSimpleShakeFist *v117; // r4
  Int32 v118; // r5
  void **v119; // r0
  __int64 v120; // kr38_8
  Int32 v121; // r4
  Int32 v122; // r5
  CTaskSimpleDuck *v123; // r0
  CTaskSimpleDuck *v124; // r6
  uint16 v125; // r2
  Int32 v126; // r5
  Int32 v127; // r5
  __int64 v128; // kr48_8
  Int32 v129; // r8
  __int64 v130; // kr58_8
  CVehicle *v131; // r9
  int v132; // r10
  CTaskComplexEnterCarAsPassengerTimed *v133; // r6
  Int32 v134; // r6
  uint8 *v135; // r9
  CTaskComplexEnterCarAsDriverTimed *v136; // r5
  CTaskComplexEnterCarAsDriverTimed *v137; // r0
  CVehicle *v138; // r1
  int v139; // r2
  __int64 v140; // kr68_8
  CVehicle *v141; // r6
  CVehicle *v142; // r9
  __int64 v143; // kr70_8
  CVehicle *v144; // r9
  int v145; // r9
  float v146; // s16
  __int64 v147; // kr78_8
  CVehicle *v148; // r5
  __int64 v149; // kr80_8
  __int64 v150; // kr88_8
  CTaskComplexGoToPointAndStandStill *v151; // r6
  Int32 v152; // r5
  float v153; // s16
  CTaskSimpleAchieveHeading *v154; // r6
  int v155; // r0
  char *v156; // r3
  Int32 v157; // r1
  __int64 v158; // kr90_8
  int v159; // r9
  CTaskComplexFollowPointRoute *v160; // r5
  __int64 v161; // kr98_8
  Int32 v162; // r4
  Int32 v163; // r9
  CEntity *v164; // r6
  Int32 v165; // r8
  float v166; // r6
  int v167; // r4
  CTaskComplexFleePoint *v168; // r5
  float v169; // s16
  int v170; // r4
  __int64 v171; // krB0_8
  CEntity *v172; // r6
  Int16 v173; // r1
  CRunningScript *v174; // r0
  int v175; // r2
  RwReal v176; // r0
  uint8 *v177; // r5
  __int64 v178; // d16
  float v179; // s4
  float v180; // s2
  __int64 v181; // d16
  __int64 v182; // d16
  __int64 v183; // d16
  __int64 v184; // d16
  float GroundZForCoord; // s0
  Int32 v186; // s16
  Int32 v187; // s18
  int v188; // r6
  int v189; // r10
  float v190; // s16
  CTaskComplexCarDriveWander *v191; // r6
  void *v192; // r5
  char v193; // r2
  CTaskComplexFleeEntity *v194; // r5
  int v195; // r1
  int v196; // r2
  CTaskComplexLeaveCar *v197; // r5
  CTaskComplexLeaveCarAndFlee *v198; // r5
  CTaskComplexGoToPointAndStandStillTimed *v199; // r0
  Int16 v200; // r1
  int *v201; // r1
  CTaskSimpleAffectSecondaryBehaviour *v202; // r5
  CEntity *v203; // r8
  CTaskSimpleTriggerLookAt *v204; // r6
  CPed *v205; // r2
  CEntity *v206; // r8
  CPed *v207; // r2
  int v208; // r4
  CTaskComplexDriveToPoint *v209; // r5
  RwV3d_0 ZType; // [sp+0h] [bp-360h] BYREF
  int32 v212; // [sp+2Ch] [bp-334h]
  CVector v1; // [sp+30h] [bp-330h] BYREF
  __int128 pos; // [sp+40h] [bp-320h] BYREF
  __int64 v215; // [sp+50h] [bp-310h]
  __int64 v216; // [sp+58h] [bp-308h]
  __int64 v217; // [sp+60h] [bp-300h]
  __int64 v218; // [sp+68h] [bp-2F8h]
  __int64 v219; // [sp+70h] [bp-2F0h]
  __int64 v220; // [sp+78h] [bp-2E8h]
  __int64 v221; // [sp+80h] [bp-2E0h]
  __int64 v222; // [sp+88h] [bp-2D8h]
  __int64 v223; // [sp+90h] [bp-2D0h]
  __int64 v224; // [sp+98h] [bp-2C8h]
  __int64 v225; // [sp+A0h] [bp-2C0h]
  __int64 v226; // [sp+A8h] [bp-2B8h]
  __int64 v227; // [sp+B0h] [bp-2B0h]
  __int64 v228; // [sp+B8h] [bp-2A8h]
  __int64 v229; // [sp+C0h] [bp-2A0h]
  __int64 v230; // [sp+C8h] [bp-298h]
  __int64 v231; // [sp+D0h] [bp-290h]
  __int64 v232; // [sp+D8h] [bp-288h]
  __int64 v233; // [sp+E0h] [bp-280h]
  __int64 v234; // [sp+E8h] [bp-278h]
  __int64 v235; // [sp+F0h] [bp-270h]
  __int64 v236; // [sp+F8h] [bp-268h]
  __int64 v237; // [sp+100h] [bp-260h]
  __int64 v238; // [sp+108h] [bp-258h]
  __int64 v239; // [sp+110h] [bp-250h]
  __int64 v240; // [sp+118h] [bp-248h]
  __int64 v241; // [sp+120h] [bp-240h]
  __int64 v242; // [sp+128h] [bp-238h]
  __int64 v243; // [sp+130h] [bp-230h]
  __int64 v244; // [sp+138h] [bp-228h]
  __int64 v245; // [sp+140h] [bp-220h]
  __int64 v246; // [sp+148h] [bp-218h]
  __int64 v247; // [sp+150h] [bp-210h]
  __int64 v248; // [sp+158h] [bp-208h]
  __int64 v249; // [sp+160h] [bp-200h]
  __int64 v250; // [sp+168h] [bp-1F8h]
  __int64 v251; // [sp+170h] [bp-1F0h]
  __int64 v252; // [sp+178h] [bp-1E8h]
  __int64 v253; // [sp+180h] [bp-1E0h]
  __int64 v254; // [sp+188h] [bp-1D8h]
  __int64 v255; // [sp+190h] [bp-1D0h]
  __int64 v256; // [sp+198h] [bp-1C8h]
  __int64 v257; // [sp+1A0h] [bp-1C0h]
  __int64 v258; // [sp+1A8h] [bp-1B8h]
  __int64 v259; // [sp+1B0h] [bp-1B0h]
  __int64 v260; // [sp+1B8h] [bp-1A8h]
  __int64 v261; // [sp+1C0h] [bp-1A0h]
  __int64 v262; // [sp+1C8h] [bp-198h]
  __int64 v263; // [sp+1D0h] [bp-190h]
  __int64 v264; // [sp+1D8h] [bp-188h]
  __int64 v265; // [sp+1E0h] [bp-180h]
  __int64 v266; // [sp+1E8h] [bp-178h]
  __int64 v267; // [sp+1F0h] [bp-170h]
  __int64 v268; // [sp+1F8h] [bp-168h]
  __int64 v269; // [sp+200h] [bp-160h]
  __int64 v270; // [sp+208h] [bp-158h]
  __int64 v271; // [sp+210h] [bp-150h]
  __int64 v272; // [sp+218h] [bp-148h]
  __int64 v273; // [sp+220h] [bp-140h]
  __int64 v274; // [sp+228h] [bp-138h]
  __int64 v275; // [sp+230h] [bp-130h]
  __int64 v276; // [sp+238h] [bp-128h]
  __int64 v277; // [sp+240h] [bp-120h]
  __int64 v278; // [sp+248h] [bp-118h]
  __int64 v279; // [sp+250h] [bp-110h]
  __int64 v280; // [sp+258h] [bp-108h]
  __int64 v281; // [sp+260h] [bp-100h]
  __int64 v282; // [sp+268h] [bp-F8h]
  __int64 v283; // [sp+270h] [bp-F0h]
  __int64 v284; // [sp+278h] [bp-E8h]
  __int64 v285; // [sp+280h] [bp-E0h]
  __int64 v286; // [sp+288h] [bp-D8h]
  __int64 v287; // [sp+290h] [bp-D0h]
  __int64 v288; // [sp+298h] [bp-C8h]
  __int64 v289; // [sp+2A0h] [bp-C0h]
  __int64 v290; // [sp+2A8h] [bp-B8h]
  UInt64 v291; // [sp+2B0h] [bp-B0h] BYREF
  CVector v; // [sp+2B8h] [bp-A8h] BYREF
  CVector v293; // [sp+2C8h] [bp-98h] BYREF
  CVector v2; // [sp+2D8h] [bp-88h] BYREF
  CVector v295; // [sp+2E8h] [bp-78h] BYREF
  CVector v296; // [sp+2F8h] [bp-68h] BYREF
  CVector pPoint; // [sp+308h] [bp-58h] BYREF
  Char v298[10]; // [sp+318h] [bp-48h] BYREF
  Char pStringToFill[8]; // [sp+322h] [bp-3Eh] BYREF
  CVector v300; // 0:r1.12

  v5 = "List_FillGlobeColPointsER8CPtrListRK8CColLineRP7CEntitybP15CStoredCollPoly";
  v6 = 0;
  switch ( CurrCommand )
  {
    case 1403:
    case 1405:
    case 1407:
    case 1413:
    case 1421:
    case 1422:
    case 1425:
    case 1426:
    case 1435:
    case 1457:
    case 1458:
    case 1459:
    case 1461:
    case 1463:
    case 1464:
    case 1478:
    case 1484:
    case 1486:
    case 1488:
    case 1493:
      return v6;
    case 1406:
      CRunningScript::CollectParameters(this, 1);
      v6 = 0;
      v7 = ScriptParams[0];
      if ( ScriptParams[0] )
        v7 = 1;
      CTheScripts::bPlayerIsOffTheMap = v7;
      return v6;
    case 1409:
      CRunningScript::CollectParameters(this, 1);
      v6 = 0;
      CHud::bScriptDontDisplayRadar = ScriptParams[0] == 0;
      return v6;
    case 1410:
      CRunningScript::CollectParameters(this, 2);
      CStats::RegisterBestPosition(ScriptParams[0], ScriptParams[1]);
      return 0;
    case 1411:
      CRunningScript::CollectParameters(this, 1);
      v8 = ScriptParams[0];
      CRunningScript::ReadTextLabelFromScript(this, pStringToFill, 8u);
      v6 = 0;
      v291 = 0LL;
      strcpy((char *)&v291, (const char *)pStringToFill);
      CPlayerInfo::GetPos((CVector *)&pos, &CWorld::Players[v8]);
      pPoint = (CVector)pos;
      DoesPointLieWithinZoneWithGivenName = CTheZones::DoesPointLieWithinZoneWithGivenName(
                                              &pPoint,
                                              v291,
                                              ZONE_INFORMATION);
      v10 = DoesPointLieWithinZoneWithGivenName;
      if ( DoesPointLieWithinZoneWithGivenName )
        v10 = 1;
      goto LABEL_74;
    case 1415:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v11 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v11 = 0;
      }
      v175 = *((_DWORD *)v11 + 17);
      goto LABEL_219;
    case 1416:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v11 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v11 = 0;
      }
      v175 = *((_DWORD *)v11 + 17);
LABEL_219:
      if ( ScriptParams[1] )
      {
        *((_DWORD *)v11 + 17) = v175 & 0xFFFFBFFF;
        if ( this->IsThisAMissionScript )
        {
          CWorld::Remove((CEntity *)v11);
          *((_DWORD *)v11 + 7) |= 0x40000u;
          CWorld::Add((CEntity *)v11);
        }
      }
      else
      {
        v195 = *((_DWORD *)v11 + 7);
        *((_DWORD *)v11 + 17) = v175 | 0x4000;
        if ( (v195 & 0x40000) != 0 )
        {
          v196 = *((_DWORD *)v11 + 8);
          *((_DWORD *)v11 + 7) = v195 & 0xFFFBFFFF;
          *((_DWORD *)v11 + 8) = v196;
          if ( (v195 & 4) == 0 )
            CPhysical::AddToMovingList((CPhysical *)v11);
        }
      }
      return 0;
    case 1418:
      CRunningScript::CollectParameters(this, 6);
      v12 = ScriptParams[1];
      v13 = *(float *)ScriptParams;
      v14 = ScriptParams[2];
      *(_QWORD *)&pos = *(_QWORD *)ScriptParams;
      DWORD2(pos) = ScriptParams[2];
      pPoint.y = *(float *)&ScriptParams[4] - *(float *)&ScriptParams[1];
      pPoint.x = *(float *)&ScriptParams[3] - *(float *)ScriptParams;
      pPoint.z = *(float *)&ScriptParams[5] - *(float *)&ScriptParams[2];
      CVector::Normalise(&pPoint);
      v6 = 0;
      memset(&ZType, 0, sizeof(ZType));
      *(_QWORD *)&v300.y = __PAIR64__(v14, v12);
      v300.x = v13;
      CPointLights::AddLight(0, v300, (CVector)ZType, 5.0, 1.0, 0.8, 0.0, 0, 0, 0);
      Fx_c::TriggerGunshot(&g_fx, 0, (CVector *)&pos, &pPoint, 1);
      return v6;
    case 1420:
      ScriptParams[0] = CStats::GetPercentageProgress();
      goto LABEL_241;
    case 1428:
      CRunningScript::CollectParameters(this, 2);
      CVisibilityPlugins::SetClumpAlpha(
        *(RpClump_0 **)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][24],
        ScriptParams[1]);
      return 0;
    case 1429:
      CStats::IncrementStat(0x93u, 1.0);
      StatValue = CStats::GetStatValue(0xB0u);
      CStats::IncrementStat(0xB1u, StatValue);
      v6 = 0;
      CStats::SetStatValue(0xB0u, 0.0);
      CTheScripts::LastMissionPassedTime = CTimer::m_snTimeInMilliseconds;
      return v6;
    case 1430:
      CRunningScript::CollectParameters(this, 1);
      goto LABEL_22;
    case 1431:
      CRunningScript::CollectParameters(this, 1);
      v16 = (*(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1156] >> 26) & 1;
      goto LABEL_49;
    case 1434:
LABEL_22:
      v6 = 0;
      CRunningScript::UpdateCompareFlag(this, 0);
      return v6;
    case 1436:
      IndexOfGlobalVariable = CRunningScript::GetIndexOfGlobalVariable(this);
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        COnscreenTimer::SetCounterFlashWhenFirstDisplayed(&CUserDisplay::OnscnTimer, IndexOfGlobalVariable, 1u);
        return 0;
      }
      v6 = 0;
      COnscreenTimer::SetCounterFlashWhenFirstDisplayed(&CUserDisplay::OnscnTimer, IndexOfGlobalVariable, 0);
      return v6;
    case 1437:
      v18 = 1;
      CRunningScript::CollectParameters(this, 1);
      memset(CTheScripts::CardStack, 0, sizeof(CTheScripts::CardStack));
      v217 = loc_353FA0;
      v218 = loc_353FA8;
      v219 = loc_353FD0;
      v220 = loc_353FD8;
      v221 = *(_QWORD *)a0123456789Abcd;
      v222 = *(_QWORD *)&a0123456789Abcd[4];
      v223 = *(_QWORD *)&a0123456789Abcd[8];
      v224 = *(_QWORD *)&a0123456789Abcd[12];
      v225 = *(_QWORD *)&a0123456789Abcd[16];
      v226 = *(_QWORD *)&a0123456789Abcd[20];
      v227 = *(_QWORD *)&a0123456789Abcd[24];
      v228 = *(_QWORD *)&a0123456789Abcd[28];
      v229 = *(_QWORD *)&a0123456789Abcd[32];
      v230 = *(_QWORD *)&a0123456789Abcd[36];
      v231 = *(_QWORD *)&a0123456789Abcd[40];
      v232 = *(_QWORD *)&a0123456789Abcd[44];
      v233 = *(_QWORD *)&a0123456789Abcd[48];
      v234 = *(_QWORD *)&a0123456789Abcd[52];
      v235 = *(_QWORD *)&a0123456789Abcd[56];
      v236 = *(_QWORD *)&a0123456789Abcd[60];
      v237 = *(_QWORD *)&a0123456789Abcd[64];
      v238 = *(_QWORD *)&a0123456789Abcd[68];
      v239 = *(_QWORD *)&a0123456789Abcd[72];
      v240 = *(_QWORD *)&a0123456789Abcd[76];
      v241 = *(_QWORD *)&a0123456789Abcd[80];
      v242 = *(_QWORD *)&a0123456789Abcd[84];
      v243 = *(_QWORD *)&a0123456789Abcd[88];
      v244 = *(_QWORD *)&a0123456789Abcd[92];
      v245 = loc_3540A0;
      v246 = loc_3540A8;
      v247 = loc_3540B0;
      v248 = loc_3540B8;
      v249 = loc_3540C0;
      v250 = loc_3540C8;
      *(_QWORD *)&pos = 0x3000200010000LL;
      *((_QWORD *)&pos + 1) = loc_353F98;
      v215 = *(_QWORD *)asc_353FB0;
      v216 = loc_353FB8;
      v253 = loc_3540F0;
      v254 = loc_3540F8;
      v251 = loc_354100;
      v252 = loc_354108;
      v255 = loc_354110;
      v256 = loc_354118;
      v257 = loc_354120;
      v258 = loc_354128;
      v259 = loc_354130;
      v260 = loc_354138;
      v261 = loc_354140;
      v262 = loc_354148;
      v263 = loc_354150;
      v264 = loc_354158;
      v265 = loc_354160;
      v266 = loc_354168;
      v267 = loc_354170;
      v268 = loc_354178;
      v269 = loc_3540E0;
      v270 = loc_3540E8;
      v271 = loc_354190;
      v272 = loc_354198;
      v273 = loc_3541A0;
      v274 = loc_3541A8;
      v275 = loc_3541B0;
      v276 = loc_3541B8;
      v277 = loc_3541C0;
      v278 = loc_3541C8;
      v279 = loc_3541D0;
      v280 = loc_3541D8;
      v281 = loc_3541E0;
      v282 = loc_3541E8;
      v283 = loc_3540D0;
      v284 = loc_3540D8;
      v285 = loc_353FC0;
      v286 = loc_353FC8;
      v19 = ScriptParams[0];
      v287 = loc_354180;
      v288 = loc_354188;
      v20 = 52 * LOWORD(ScriptParams[0]);
      v289 = loc_354200;
      v290 = loc_354208;
      do
      {
        if ( v19 >= 1 )
        {
          v21 = 0;
          do
          {
            v22 = (int)(float)((float)((float)(unsigned __int16)rand() * 0.000015259) * (float)v20);
            v23 = (__int16)v22;
            CTheScripts::CardStack[*(__int16 *)((char *)&pos + (v22 << 16 >> 15))] = v18;
            if ( (__int16)v22 < v20 )
            {
              do
              {
                v24 = v23 + 1;
                if ( v23 > 310 )
                  v25 = 0;
                else
                  v25 = *((_WORD *)&pos + v23 + 1);
                *((_WORD *)&pos + v23++) = v25;
              }
              while ( v20 != v24 );
            }
            v19 = ScriptParams[0];
            ++v21;
            --v20;
          }
          while ( v21 < ScriptParams[0] );
        }
        ++v18;
      }
      while ( v18 != 53 );
      v6 = 0;
      CTheScripts::CardStackPosition = 0;
      return v6;
    case 1438:
      v26 = CTheScripts::CardStack[CTheScripts::CardStackPosition];
      if ( v26 )
      {
        v27 = CTheScripts::CardStackPosition;
      }
      else
      {
        v27 = 0;
        v26 = CTheScripts::CardStack[0];
        CTheScripts::CardStackPosition = 0;
      }
      v200 = v27 + 1;
      if ( v200 == 312 )
        v200 = 0;
      CTheScripts::CardStackPosition = v200;
      ScriptParams[0] = v26;
      goto LABEL_241;
    case 1439:
      CRunningScript::CollectParameters(this, 1);
      v28 = (float *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      *(float *)ScriptParams = v28[18] * 50.0;
      *(float *)&ScriptParams[1] = v28[19] * 50.0;
      v29 = v28[20] * 50.0;
      goto LABEL_191;
    case 1440:
      LOBYTE(v16) = TheCamera.WorldViewerBeingUsed;
      goto LABEL_49;
    case 1441:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v30 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v30 = 0;
      }
      v176 = *((float *)v30 + 23);
      *(_QWORD *)&v296.x = *(_QWORD *)(v30 + 84);
      v296.z = v176;
      v.x = *(float *)&ScriptParams[1] / 50.0;
      v.y = *(float *)&ScriptParams[2] / 50.0;
      v.z = *(float *)&ScriptParams[3] / 50.0;
      Multiply3x3((CVector *)&pos, *((const CMatrix **)v30 + 5), &v);
      v177 = v30 + 84;
      v = (CVector)pos;
      v296.x = *(float *)&pos + v296.x;
      v296.y = *((float *)&pos + 1) + v296.y;
      v296.z = *((float *)&pos + 2) + v296.z;
      if ( (v30[28] & 4) != 0 )
      {
        (*(void (__fastcall **)(uint8 *, _DWORD))(*(_DWORD *)v30 + 20))(v30, 0);
        CPhysical::AddToMovingList((CPhysical *)v30);
      }
      v178 = *(_QWORD *)&v296.x;
      v6 = 0;
      *((_DWORD *)v177 + 2) = LODWORD(v296.z);
      *(_QWORD *)v177 = v178;
      return v6;
    case 1442:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v31 = (const CMatrix **)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v31 = 0;
      }
      v.x = *(float *)&ScriptParams[1] * CTimer::ms_fTimeStep;
      v.y = *(float *)&ScriptParams[2] * CTimer::ms_fTimeStep;
      v.z = *(float *)&ScriptParams[3] * CTimer::ms_fTimeStep;
      Multiply3x3((CVector *)&pos, v31[5], &v);
      v = (CVector)pos;
      if ( ((_BYTE)v31[7] & 4) != 0 )
      {
        ((void (__fastcall *)(const CMatrix **, _DWORD))LODWORD((*v31)->yy))(v31, 0);
        CPhysical::AddToMovingList((CPhysical *)v31);
      }
      v179 = v.z / 50.0;
      v180 = v.y / 50.0;
      *((float *)v31 + 21) = v.x / 50.0;
      *((float *)v31 + 22) = v180;
      *((float *)v31 + 23) = v179;
      return 0;
    case 1443:
      CRunningScript::CollectParameters(this, 1);
      v16 = *(_DWORD *)&CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][28] & 0x40004;
      if ( v16 )
        LOBYTE(v16) = 1;
LABEL_49:
      CRunningScript::UpdateCompareFlag(this, v16);
      return 0;
    case 1444:
      CRunningScript::CollectParameters(this, 4);
      *(float *)ScriptParams = (float)(acosf(
                                         (float)((float)(*(float *)ScriptParams * *(float *)&ScriptParams[2])
                                               + (float)(*(float *)&ScriptParams[1] * *(float *)&ScriptParams[3]))
                                       / (float)(sqrtf(
                                                   (float)(*(float *)ScriptParams * *(float *)ScriptParams)
                                                 + (float)(*(float *)&ScriptParams[1] * *(float *)&ScriptParams[1]))
                                               * sqrtf(
                                                   (float)(*(float *)&ScriptParams[2] * *(float *)&ScriptParams[2])
                                                 + (float)(*(float *)&ScriptParams[3] * *(float *)&ScriptParams[3]))))
                                     * 180.0)
                             / 3.1416;
      goto LABEL_241;
    case 1445:
      CRunningScript::CollectParameters(this, 8);
      v32 = 0;
      v6 = 0;
      v33 = *(float *)&ScriptParams[7] * 0.5;
      v34 = *(float *)&ScriptParams[3] * 0.5;
      v35 = *(float *)&ScriptParams[6] * 0.5;
      v36 = *(float *)&ScriptParams[2] * 0.5;
      v37 = *(float *)ScriptParams;
      v38 = v33 + *(float *)&ScriptParams[5];
      v39 = *(float *)&ScriptParams[1] - v34;
      v40 = 0;
      v41 = v34 + *(float *)&ScriptParams[1];
      if ( v39 <= v38 )
        v40 = 1;
      v43 = v41;
      v42 = *(float *)&ScriptParams[5] - v33;
      if ( v43 >= v42 )
        v32 = 1;
      v45 = v40 & v32;
      v46 = 0;
      v47 = v36 + v37;
      v48 = v37 - v36;
      v44 = *(float *)&ScriptParams[4] - v35;
      if ( v47 >= v44 )
        v46 = 1;
      v50 = v45 & v46;
      v51 = 0;
      v52 = v48;
      v49 = v35 + *(float *)&ScriptParams[4];
      if ( v52 <= v49 )
        v51 = 1;
      v10 = v51 & v50;
      goto LABEL_74;
    case 1446:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v53 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v53 = 0;
      }
      v181 = *(_QWORD *)(v53 + 84);
      v296.z = *((RwReal *)v53 + 23);
      *(_QWORD *)&v296.x = v181;
      Multiply3x3((CVector *)&pos, &v296, *((const CMatrix **)v53 + 5));
      v296 = (CVector)pos;
      v29 = *((float *)&pos + 2) * 50.0;
      *(float *)ScriptParams = *(float *)&pos * 50.0;
      *(float *)&ScriptParams[1] = *((float *)&pos + 1) * 50.0;
LABEL_191:
      *(float *)&ScriptParams[2] = v29;
      v174 = this;
      v173 = 3;
      goto LABEL_242;
    case 1447:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v54 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v54 = 0;
      }
      pPoint.x = (float)(CTimer::ms_fTimeStep * *(float *)&ScriptParams[1]) * 0.02;
      pPoint.y = (float)(CTimer::ms_fTimeStep * *(float *)&ScriptParams[2]) * 0.02;
      pPoint.z = (float)(CTimer::ms_fTimeStep * *(float *)&ScriptParams[3]) * 0.02;
      if ( (v54[28] & 4) != 0 )
        return 0;
      v182 = *((_QWORD *)v54 + 9);
      v1.z = *((RwReal *)v54 + 20);
      *(_QWORD *)&v1.x = v182;
      CVector::Normalise(&v1);
      v6 = 0;
      v293 = v1;
      if ( v1.z != 1.0 )
      {
        v2.x = 0.0;
        v2.y = 0.0;
        v2.z = 1.0;
        CrossProduct((CVector *)&pos, &v1, &v2);
        v295 = (CVector)pos;
        CVector::Normalise(&v295);
        CrossProduct((CVector *)&pos, &v295, &v293);
        v2 = (CVector)pos;
        CVector::Normalise(&v2);
        v183 = *((_QWORD *)v54 + 9);
        v1.z = *((RwReal *)v54 + 20);
        v1.z = (float)(pPoint.z * v2.z)
             + (float)((float)(pPoint.y * v293.z) + (float)((float)(pPoint.x * v295.z) + v1.z));
        v1.x = (float)(pPoint.z * v2.x)
             + (float)((float)(pPoint.y * v293.x) + (float)((float)(pPoint.x * v295.x) + *(float *)&v183));
        v1.y = (float)(pPoint.z * v2.y)
             + (float)((float)(pPoint.y * v293.y) + (float)((float)(pPoint.x * v295.y) + *((float *)&v183 + 1)));
        if ( (v54[28] & 4) != 0 )
        {
          (*(void (__fastcall **)(uint8 *, _DWORD))(*(_DWORD *)v54 + 20))(v54, 0);
          CPhysical::AddToMovingList((CPhysical *)v54);
        }
        v184 = *(_QWORD *)&v1.x;
        v6 = 0;
        *((_DWORD *)v54 + 20) = LODWORD(v1.z);
        *((_QWORD *)v54 + 9) = v184;
      }
      return v6;
    case 1448:
      CRunningScript::CollectParameters(this, 1);
      v55 = (float *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      *(float *)ScriptParams = sqrtf(
                                 (float)((float)(v55[18] * v55[18]) + (float)(v55[19] * v55[19]))
                               + (float)(v55[20] * v55[20]))
                             * 50.0;
LABEL_241:
      v174 = this;
      v173 = 1;
      goto LABEL_242;
    case 1449:
      v56 = 2;
      goto LABEL_69;
    case 1450:
      v56 = 1;
LABEL_69:
      PointerToScriptVariable = (char *)CRunningScript::GetPointerToScriptVariable(this, v56);
      CRunningScript::ReadTextLabelFromScript(this, v298, 8u);
      strncpy(PointerToScriptVariable, (const char *)v298, 8u);
      return 0;
    case 1453:
      v58 = 2;
      goto LABEL_72;
    case 1454:
      v58 = 1;
LABEL_72:
      v59 = CRunningScript::GetPointerToScriptVariable(this, v58);
      CRunningScript::ReadTextLabelFromScript(this, v298, 8u);
      v60 = strncmp((const char *)v59, (const char *)v298, 8u);
      v10 = 0;
      v6 = 0;
      if ( !v60 )
        v10 = 1;
LABEL_74:
      CRunningScript::UpdateCompareFlag(this, v10);
      return v6;
    case 1456:
      CRunningScript::CollectParameters(this, 8);
      v61 = -915135488;
      v62 = ScriptParams[6];
      v3.n64_u32[0] = ScriptParams[0];
      v63 = *(float *)&ScriptParams[4] - *(float *)&ScriptParams[6];
      d0_0.n64_u32[0] = ScriptParams[2];
      v64 = ScriptParams[1];
      v65 = ScriptParams[5];
      v66 = *(float *)&ScriptParams[1] - *(float *)&ScriptParams[3];
      v67 = *(float *)ScriptParams - *(float *)&ScriptParams[2];
      if ( (float)(*(float *)&ScriptParams[4] - *(float *)&ScriptParams[6]) == 0.0 )
        v63 = 0.000001;
      v68 = (float)(*(float *)&ScriptParams[5] - *(float *)&ScriptParams[7]) / v63;
      if ( (float)(*(float *)ScriptParams - *(float *)&ScriptParams[2]) == 0.0 )
        v67 = 0.000001;
      v69 = v66 / v67;
      v70 = v68 - (float)(v66 / v67);
      if ( v70 == 0.0 )
        goto LABEL_177;
      LODWORD(v71) = vmin_f32(v3, d0_0).n64_u32[0];
      v72 = *(float *)&ScriptParams[5] - (float)(*(float *)&ScriptParams[4] * v68);
      v73 = *(float *)&ScriptParams[1] - (float)(*(float *)ScriptParams * v69);
      v74 = (float)(v73 * v68) - (float)(v69 * v72);
      v75 = (float)(v73 - v72) / v70;
      if ( (float)(*(float *)ScriptParams - *(float *)&ScriptParams[2]) == 0.0 )
        v75 = *(float *)ScriptParams;
      v76 = v74 / v70;
      if ( v66 == 0.0 )
        v76 = *(float *)&ScriptParams[1];
      v77 = v71 + -0.01;
      if ( v75 < v77 )
        goto LABEL_177;
      v78 = ScriptParams[7];
      v79 = ScriptParams[4];
      if ( *(float *)&ScriptParams[5] > *(float *)&ScriptParams[7] )
        v78 = ScriptParams[5];
      if ( *(float *)&ScriptParams[4] > *(float *)&ScriptParams[6] )
        v79 = ScriptParams[6];
      if ( *(float *)&ScriptParams[5] > *(float *)&ScriptParams[7] )
        v65 = ScriptParams[7];
      v80 = ScriptParams[3];
      if ( *(float *)&ScriptParams[1] > *(float *)&ScriptParams[3] )
        v80 = ScriptParams[1];
      if ( *(float *)&ScriptParams[4] > *(float *)&ScriptParams[6] )
        v62 = ScriptParams[4];
      if ( *(float *)&ScriptParams[1] > *(float *)&ScriptParams[3] )
        v64 = ScriptParams[3];
      v81 = *(float *)&v78 + 0.01;
      if ( v76 > v81
        || (v82 = *(float *)&v65 + -0.01, v76 < v82)
        || (v83 = *(float *)&v80 + 0.01, v76 > v83)
        || (v84 = *(float *)&v64 + -0.01, v76 < v84)
        || (v85 = *(float *)&v62 + 0.01, v75 > v85)
        || (v86 = *(float *)&v79 + -0.01, v75 < v86) )
      {
LABEL_177:
        v88 = 0;
        v87 = -915135488;
      }
      else
      {
        v87 = LODWORD(v75);
        v88 = 1;
        v61 = LODWORD(v76);
      }
      CRunningScript::UpdateCompareFlag(this, v88);
      v173 = 2;
      ScriptParams[0] = v87;
      ScriptParams[1] = v61;
      v174 = this;
LABEL_242:
      CRunningScript::StoreParameters(v174, v173);
      return 0;
    case 1462:
      v6 = 0;
      this->PCPointer += 128;
      return v6;
    case 1465:
      CRunningScript::CollectParameters(this, 2);
      v89 = *(_QWORD *)ScriptParams;
      v90 = (CTaskSimpleRunAnim *)CTask::operator new(0x18u);
      CTaskSimple::CTaskSimple(v90);
      v6 = 0;
      LOWORD(v90->m_animGroup) = 0;
      v91 = v89;
      v90->m_animID = HIDWORD(v89);
      v90->m_pAnim = 0;
      *((_DWORD *)&v90->CTaskSimpleAnim + 3) = 0;
      v92 = v90;
      v93 = (char *)&`vtable for'CTaskSimplePause;
      v94 = 1465;
      goto LABEL_275;
    case 1466:
      CRunningScript::CollectParameters(this, 2);
      v95 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] == -1 )
      {
        v96 = (CTaskSimpleStandStill *)CTask::operator new(0x20u);
        v201 = &elf_hash_bucket[4937];
      }
      else
      {
        v96 = (CTaskSimpleStandStill *)CTask::operator new(0x20u);
        if ( HIDWORD(v95) == -2 )
        {
          CTaskSimpleStandStill::CTaskSimpleStandStill(
            v96,
            (const int)"List_FillGlobeColPointsER8CPtrListRK8CColLineRP7CEntitybP15CStoredCollPoly",
            1,
            0,
            8.0);
          goto LABEL_280;
        }
        v201 = (int *)HIDWORD(v95);
      }
      CTaskSimpleStandStill::CTaskSimpleStandStill(v96, (const int)v201, 0, 0, 8.0);
LABEL_280:
      v100 = this;
      v101 = v95;
      v102 = v96;
      v103 = 1466;
      goto LABEL_291;
    case 1467:
      CRunningScript::CollectParameters(this, 3);
      v97 = *(_QWORD *)ScriptParams;
      v98 = ScriptParams[2];
      v99 = (CTaskComplexFallAndGetUp *)CTask::operator new(0x18u);
      CTaskComplexFallAndGetUp::CTaskComplexFallAndGetUp(v99, SHIDWORD(v97), v98);
      v100 = this;
      v101 = v97;
      v102 = v99;
      v103 = 1467;
      goto LABEL_291;
    case 1468:
      CRunningScript::CollectParameters(this, 2);
      v104 = *(_QWORD *)ScriptParams;
      v105 = (CTaskComplexJump *)CTask::operator new(0x14u);
      v6 = 0;
      CTaskComplexJump::CTaskComplexJump(v105, 0);
      v105->m_bUsePlayerLaunchForce = HIDWORD(v104) != 0;
      CRunningScript::GivePedScriptedTask(this, v104, v105, 1468);
      return v6;
    case 1469:
      CRunningScript::CollectParameters(this, 2);
      v106 = *(_QWORD *)ScriptParams;
      v107 = (CTaskSimpleTired *)CTask::operator new(0x1Cu);
      CTaskSimpleTired::CTaskSimpleTired(v107, SHIDWORD(v106));
      v100 = this;
      v101 = v106;
      v102 = v107;
      v103 = 1469;
      goto LABEL_291;
    case 1470:
      CRunningScript::CollectParameters(this, 1);
      v108 = ScriptParams[0];
      v109 = (CTaskComplexDie *)CTask::operator new(0x28u);
      v6 = 0;
      CTaskComplexDie::CTaskComplexDie(v109, WEAPONTYPE_UNARMED, ANIM_STD_PED, ANIM_STD_KO_FRONT, 4.0, 0.0, 0, 0, 0, 0);
      CRunningScript::GivePedScriptedTask(this, v108, v109, 1470);
      return v6;
    case 1471:
      CRunningScript::CollectParameters(this, 3);
      v110 = ScriptParams[2];
      if ( ScriptParams[2] == -1 )
      {
        v110 = 20000;
      }
      else if ( ScriptParams[2] == -2 )
      {
        v110 = -1;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v203 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( ScriptParams[0] == -1 )
        {
LABEL_251:
          v204 = (CTaskSimpleTriggerLookAt *)CTask::operator new(0x30u);
          v6 = 0;
          memset(&ZType, 0, sizeof(ZType));
          CTaskSimpleTriggerLookAt::CTaskSimpleTriggerLookAt(v204, v203, v110, 5, ZType, 1u, 0.25, 1000, 3);
          goto LABEL_263;
        }
      }
      else
      {
        v203 = 0;
        if ( ScriptParams[0] == -1 )
          goto LABEL_251;
      }
      v6 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v205 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v205 = 0;
      }
      IKChainManager_c::LookAt(&g_ikChainMan, "COMMAND_TASK_LOOK_AT_CHAR", v205, v203, v110, 5, 0, 0, 0.25, 500, 6, 1);
      return v6;
    case 1472:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[2] == -1 )
      {
        v5 = (_BYTE *)(elf_hash_bucket + 19748);
      }
      else if ( ScriptParams[2] != -2 )
      {
        v5 = (char *)ScriptParams[2];
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v206 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( ScriptParams[0] == -1 )
          goto LABEL_262;
      }
      else
      {
        v206 = 0;
        if ( ScriptParams[0] == -1 )
        {
LABEL_262:
          v204 = (CTaskSimpleTriggerLookAt *)CTask::operator new(0x30u);
          v6 = 0;
          memset(&ZType, 0, sizeof(ZType));
          CTaskSimpleTriggerLookAt::CTaskSimpleTriggerLookAt(v204, v206, (int32)v5, -1, ZType, 1u, 0.25, 1000, 3);
LABEL_263:
          CTaskComplexSequence::AddTask(&CTaskSequences::ms_taskSequence[CTaskSequences::ms_iActiveSequence], v204);
          return v6;
        }
      }
      v6 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v207 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v207 = 0;
      }
      IKChainManager_c::LookAt(
        &g_ikChainMan,
        "COMMAND_TASK_LOOK_AT_VEHICLE",
        v207,
        v206,
        (int32)v5,
        -1,
        0,
        0,
        0.25,
        500,
        6,
        1);
      return v6;
    case 1473:
      CRunningScript::CollectParameters(this, 2);
      v111 = *(_QWORD *)ScriptParams;
      v112 = (CTaskSimple *)CTask::operator new(0x1Cu);
      CTaskSimple::CTaskSimple(v112);
      v112[1]._vptr$CTask = (int (**)(void))HIDWORD(v111);
      v112->_vptr$CTask = (int (**)(void))&off_665784;
      v112[1].m_pParent = (CTask *)-1;
      LOWORD(v112[3]._vptr$CTask) = 0;
      v112[2]._vptr$CTask = 0;
      v112[2].m_pParent = 0;
      if ( (_DWORD)v111 != -1 )
      {
        v113 = CPools::ms_pPedPool->m_aStorage[(unsigned int)v111 >> 8];
        v114 = v112;
        v115 = 2;
        goto LABEL_125;
      }
      v202 = (CTaskSimpleAffectSecondaryBehaviour *)CTask::operator new(0x14u);
      CTaskSimpleAffectSecondaryBehaviour::CTaskSimpleAffectSecondaryBehaviour(v202, 1, 2, v112);
      goto LABEL_246;
    case 1474:
      CRunningScript::CollectParameters(this, 1);
      v116 = ScriptParams[0];
      v117 = (CTaskSimpleShakeFist *)CTask::operator new(0x10u);
      CTaskSimpleShakeFist::CTaskSimpleShakeFist(v117);
      if ( v116 == -1 )
      {
        v202 = (CTaskSimpleAffectSecondaryBehaviour *)CTask::operator new(0x14u);
        CTaskSimpleAffectSecondaryBehaviour::CTaskSimpleAffectSecondaryBehaviour(v202, 1, 4, v117);
LABEL_246:
        CTaskComplexSequence::AddTask(&CTaskSequences::ms_taskSequence[CTaskSequences::ms_iActiveSequence], v202);
      }
      else
      {
        v113 = CPools::ms_pPedPool->m_aStorage[v116 >> 8];
        v114 = v117;
        v115 = 4;
LABEL_125:
        CTaskManager::SetTaskSecondary((CTaskManager *)(*((_DWORD *)v113 + 272) + 4), v114, v115);
      }
      return 0;
    case 1475:
      CRunningScript::CollectParameters(this, 1);
      v118 = ScriptParams[0];
      v90 = (CTaskSimpleRunAnim *)CTask::operator new(0x20u);
      v6 = 0;
      CTaskSimpleRunAnim::CTaskSimpleRunAnim(v90, ANIM_STD_PED, ANIM_STD_HANDSCOWER, 4.0, 412, "Cower", 0);
      v91 = v118;
      v92 = v90;
      v94 = 1475;
      v119 = &`vtable for'CTaskSimpleCower;
      goto LABEL_274;
    case 1476:
      CRunningScript::CollectParameters(this, 2);
      v120 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] == -1 )
      {
        v5 = (_BYTE *)(elf_hash_bucket + 19748);
      }
      else if ( ScriptParams[1] != -2 )
      {
        v5 = (char *)ScriptParams[1];
      }
      v90 = (CTaskSimpleRunAnim *)CTask::operator new(0x34u);
      v6 = 0;
      CTaskSimpleRunTimedAnim::CTaskSimpleRunTimedAnim(
        (CTaskSimpleRunTimedAnim *)v90,
        ANIM_STD_PED,
        ANIM_STD_HANDSUP,
        4.0,
        -4.0,
        (const int)v5,
        413,
        "HandsUp",
        0);
      v91 = v120;
      v92 = v90;
      v94 = 1476;
      v119 = &`vtable for'CTaskSimpleHandsUp;
      goto LABEL_274;
    case 1477:
      CRunningScript::CollectParameters(this, 2);
      v121 = ScriptParams[1];
      v122 = ScriptParams[0];
      if ( ScriptParams[1] == -2 )
      {
        v123 = (CTaskSimpleDuck *)CTask::operator new(0x28u);
        v124 = v123;
        v125 = 0;
      }
      else
      {
        v124 = (CTaskSimpleDuck *)CTask::operator new(0x28u);
        if ( v121 == -1 )
          v125 = CTaskSimpleDuck::ms_nLengthOfDuck;
        else
          v125 = v121;
        v123 = v124;
      }
      CTaskSimpleDuck::CTaskSimpleDuck(v123, 0, v125, -1);
      v100 = this;
      v101 = v122;
      v102 = v124;
      v103 = 1477;
      goto LABEL_291;
    case 1479:
      CRunningScript::CollectParameters(this, 1);
      v126 = ScriptParams[0];
      v90 = (CTaskSimpleRunAnim *)CTask::operator new(0x20u);
      v6 = 0;
      CTaskSimpleRunAnim::CTaskSimpleRunAnim(v90, ANIM_STD_PED, ANIM_STD_ATM, 4.0, 420, "UseAtm", 0);
      v91 = v126;
      v92 = v90;
      v94 = 1479;
      v119 = &`vtable for'CTaskSimpleUseAtm;
      goto LABEL_274;
    case 1480:
      CRunningScript::CollectParameters(this, 1);
      v127 = ScriptParams[0];
      v90 = (CTaskSimpleRunAnim *)CTask::operator new(0x20u);
      v6 = 0;
      CTaskSimpleRunAnim::CTaskSimpleRunAnim(v90, ANIM_STD_PED, ANIM_STD_XPRESS_SCRATCH, 4.0, 421, "ScratchHead", 0);
      v91 = v127;
      v92 = v90;
      v94 = 1480;
      v119 = &`vtable for'CTaskSimpleScratchHead;
      goto LABEL_274;
    case 1481:
      CRunningScript::CollectParameters(this, 2);
      v128 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] == -1 )
      {
        v5 = (_BYTE *)(elf_hash_bucket + 19748);
      }
      else if ( ScriptParams[1] != -2 )
      {
        v5 = (char *)ScriptParams[1];
      }
      v90 = (CTaskSimpleRunAnim *)CTask::operator new(0x34u);
      v6 = 0;
      CTaskSimpleRunTimedAnim::CTaskSimpleRunTimedAnim(
        (CTaskSimpleRunTimedAnim *)v90,
        ANIM_STD_PED,
        ANIM_STD_IDLE_HBHB,
        4.0,
        -4.0,
        (const int)v5,
        422,
        "LookAbout",
        0);
      v91 = v128;
      v92 = v90;
      v94 = 1481;
      v119 = &`vtable for'CTaskSimpleLookAbout;
LABEL_274:
      v93 = (char *)*v119;
LABEL_275:
      v90->_vptr$CTask = (int (**)(void))(v93 + 8);
      CRunningScript::GivePedScriptedTask(this, v91, v92, v94);
      return v6;
    case 1482:
      CRunningScript::CollectParameters(this, 4);
      v129 = ScriptParams[0];
      v130 = *(_QWORD *)&ScriptParams[2];
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v131 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( ScriptParams[3] == -1 )
          goto LABEL_142;
LABEL_226:
        v132 = CCarEnterExit::ComputeTargetDoorToEnterAsPassenger(v131, ScriptParams[3]);
        if ( (_DWORD)v130 != -2 )
          goto LABEL_143;
LABEL_227:
        v133 = (CTaskComplexEnterCarAsPassengerTimed *)CTask::operator new(0x2Cu);
        CTaskComplexEnterCarAsPassengerTimed::CTaskComplexEnterCarAsPassengerTimed(v133, v131, v132, -1, 1);
        goto LABEL_287;
      }
      v131 = 0;
      if ( ScriptParams[3] != -1 )
        goto LABEL_226;
LABEL_142:
      v132 = 0;
      if ( ScriptParams[2] == -2 )
        goto LABEL_227;
LABEL_143:
      v133 = (CTaskComplexEnterCarAsPassengerTimed *)CTask::operator new(0x2Cu);
      if ( (_DWORD)v130 == -1 )
        CTaskComplexEnterCarAsPassengerTimed::CTaskComplexEnterCarAsPassengerTimed(
          v133,
          v131,
          v132,
          (const int)&elf_hash_bucket[4937],
          1);
      else
        CTaskComplexEnterCarAsPassengerTimed::CTaskComplexEnterCarAsPassengerTimed(v133, v131, v132, v130, 1);
LABEL_287:
      v102 = v133;
      v103 = 1482;
      v133->m_iMoveState = CPedIntelligence::ms_iDesiredMoveState;
LABEL_288:
      CPedIntelligence::ms_iDesiredMoveState = 6;
      v100 = this;
      v101 = v129;
LABEL_291:
      CRunningScript::GivePedScriptedTask(v100, v101, v102, v103);
      return 0;
    case 1483:
      CRunningScript::CollectParameters(this, 3);
      v129 = ScriptParams[0];
      v134 = ScriptParams[2];
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v135 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( ScriptParams[2] != -2 )
        {
LABEL_148:
          v136 = (CTaskComplexEnterCarAsDriverTimed *)CTask::operator new(0x24u);
          if ( v134 == -1 )
          {
            v138 = (CVehicle *)v135;
            v139 = (int)&elf_hash_bucket[4937];
            v137 = v136;
          }
          else
          {
            v137 = v136;
            v138 = (CVehicle *)v135;
            v139 = v134;
          }
LABEL_282:
          CTaskComplexEnterCarAsDriverTimed::CTaskComplexEnterCarAsDriverTimed(v137, v138, v139);
          v102 = v136;
          v103 = 1483;
          v136->m_iMoveState = CPedIntelligence::ms_iDesiredMoveState;
          goto LABEL_288;
        }
      }
      else
      {
        v135 = 0;
        if ( ScriptParams[2] != -2 )
          goto LABEL_148;
      }
      v137 = (CTaskComplexEnterCarAsDriverTimed *)CTask::operator new(0x24u);
      v136 = v137;
      v138 = (CVehicle *)v135;
      v139 = -1;
      goto LABEL_282;
    case 1485:
      CRunningScript::CollectParameters(this, 2);
      v6 = 0;
      v140 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v141 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v141 = 0;
      }
      v197 = (CTaskComplexLeaveCar *)CTask::operator new(0x34u);
      CTaskComplexLeaveCar::CTaskComplexLeaveCar(v197, v141, 0, 0, 1, 0);
      CRunningScript::GivePedScriptedTask(this, v140, v197, 1485);
      return v6;
    case 1487:
      CRunningScript::CollectParameters(this, 5);
      v6 = 0;
      v212 = ScriptParams[0];
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v142 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v142 = 0;
      }
      *(_QWORD *)&pos = *(_QWORD *)&ScriptParams[2];
      DWORD2(pos) = ScriptParams[4];
      v198 = (CTaskComplexLeaveCarAndFlee *)CTask::operator new(0x28u);
      CTaskComplexLeaveCarAndFlee::CTaskComplexLeaveCarAndFlee(v198, v142, (const CVector *)&pos, 0, 0, 0);
      CRunningScript::GivePedScriptedTask(this, v212, v198, 1487);
      return v6;
    case 1489:
      CRunningScript::CollectParameters(this, 9);
      v143 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v144 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v144 = 0;
      }
      GroundZForCoord = *(float *)&ScriptParams[4];
      v186 = ScriptParams[2];
      v187 = ScriptParams[3];
      if ( *(float *)&ScriptParams[4] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[2], *(float *)&ScriptParams[3]);
      v188 = ScriptParams[7];
      v189 = ScriptParams[6];
      *(_QWORD *)&pos = __PAIR64__(v187, v186);
      v190 = *(float *)&ScriptParams[5];
      *((float *)&pos + 2) = GroundZForCoord;
      if ( ScriptParams[7] )
      {
        if ( ScriptParams[7] == 1 )
          v188 = 415;
      }
      else
      {
        v188 = -1;
      }
      v208 = ScriptParams[8];
      v209 = (CTaskComplexDriveToPoint *)CTask::operator new(0x3Cu);
      CTaskComplexDriveToPoint::CTaskComplexDriveToPoint(
        v209,
        v144,
        (const CVector *)&pos,
        v190,
        v189,
        v188,
        -1.0,
        v208);
      v100 = this;
      v101 = v143;
      v102 = v209;
      v103 = 1489;
      goto LABEL_291;
    case 1490:
      CRunningScript::CollectParameters(this, 4);
      v145 = ScriptParams[3];
      v146 = *(float *)&ScriptParams[2];
      v147 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v148 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v148 = 0;
      }
      v191 = (CTaskComplexCarDriveWander *)CTask::operator new(0x24u);
      CTaskComplexCarDriveWander::CTaskComplexCarDriveWander(v191, v148, v145, v146);
      v100 = this;
      v101 = v147;
      v102 = v191;
      v103 = 1490;
      goto LABEL_291;
    case 1491:
      CRunningScript::CollectParameters(this, 6);
      v149 = *(_QWORD *)ScriptParams;
      v150 = *(_QWORD *)&ScriptParams[4];
      LODWORD(pos) = ScriptParams[1];
      *(_QWORD *)((char *)&pos + 4) = *(_QWORD *)&ScriptParams[2];
      if ( ScriptParams[5] == -2 )
      {
        v151 = (CTaskComplexGoToPointAndStandStill *)CTask::operator new(0x28u);
        CTaskComplexGoToPointAndStandStill::CTaskComplexGoToPointAndStandStill(
          v151,
          v150,
          (const CVector *)&pos,
          0.5,
          2.0,
          0,
          1);
      }
      else
      {
        v199 = (CTaskComplexGoToPointAndStandStillTimed *)CTask::operator new(0x38u);
        v151 = v199;
        if ( HIDWORD(v150) == -1 )
          CTaskComplexGoToPointAndStandStillTimed::CTaskComplexGoToPointAndStandStillTimed(
            v199,
            v150,
            (const CVector *)&pos,
            0.5,
            2.0,
            (const int)&elf_hash_bucket[4937]);
        else
          CTaskComplexGoToPointAndStandStillTimed::CTaskComplexGoToPointAndStandStillTimed(
            v199,
            v150,
            (const CVector *)&pos,
            0.5,
            2.0,
            SHIDWORD(v150));
      }
      v100 = this;
      v101 = v149;
      v102 = v151;
      v103 = 1491;
      goto LABEL_291;
    case 1492:
      CRunningScript::CollectParameters(this, 2);
      v152 = ScriptParams[0];
      v153 = (float)(*(float *)&ScriptParams[1] * 3.1416) / 180.0;
      v154 = (CTaskSimpleAchieveHeading *)CTask::operator new(0x18u);
      CTaskSimpleAchieveHeading::CTaskSimpleAchieveHeading(v154, v153, 0.5, 0.2);
      v100 = this;
      v101 = v152;
      v102 = v154;
      v103 = 1492;
      goto LABEL_291;
    case 1494:
      v6 = 0;
      CTaskComplexFollowPointRoute::ms_pointRoute.m_iRouteSize = 0;
      return v6;
    case 1495:
      CRunningScript::CollectParameters(this, 3);
      if ( CTaskComplexFollowPointRoute::ms_pointRoute.m_iRouteSize > 7 )
        return 0;
      v155 = CTaskComplexFollowPointRoute::ms_pointRoute.m_iRouteSize + 1;
      v6 = 0;
      v156 = (char *)&CTaskComplexFollowPointRoute::ms_pointRoute
           + 12 * CTaskComplexFollowPointRoute::ms_pointRoute.m_iRouteSize;
      v157 = ScriptParams[2];
      *(_QWORD *)(v156 + 4) = *(_QWORD *)ScriptParams;
      *((_DWORD *)v156 + 3) = v157;
      CTaskComplexFollowPointRoute::ms_pointRoute.m_iRouteSize = v155;
      return v6;
    case 1496:
      CRunningScript::CollectParameters(this, 3);
      v158 = *(_QWORD *)ScriptParams;
      v159 = ScriptParams[2];
      v160 = (CTaskComplexFollowPointRoute *)CTask::operator new(0x3Cu);
      v6 = 0;
      CTaskComplexFollowPointRoute::CTaskComplexFollowPointRoute(
        v160,
        SHIDWORD(v158),
        &CTaskComplexFollowPointRoute::ms_pointRoute,
        v159,
        0.5,
        5.0,
        0,
        1,
        1);
      CRunningScript::GivePedScriptedTask(this, v158, v160, 1496);
      return v6;
    case 1497:
      CRunningScript::CollectParameters(this, 4);
      v161 = *(_QWORD *)ScriptParams;
      v163 = ScriptParams[3];
      v162 = ScriptParams[2];
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v164 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( ScriptParams[2] == -2 )
        {
LABEL_172:
          v162 = -1;
          goto LABEL_212;
        }
      }
      else
      {
        v164 = 0;
        if ( ScriptParams[2] == -2 )
          goto LABEL_172;
      }
      if ( ScriptParams[2] == -1 )
        v162 = 50000;
LABEL_212:
      v192 = CTask::operator new(0x4Cu);
      CTaskComplex::CTaskComplex((CTaskComplex *)v192);
      *((_DWORD *)v192 + 4) = v162;
      *((_DWORD *)v192 + 5) = 1000;
      *((_DWORD *)v192 + 6) = v163;
      *((_DWORD *)v192 + 7) = 0x40000000;
      *((_DWORD *)v192 + 8) = 0;
      *((_DWORD *)v192 + 9) = 0x40000000;
      *((_WORD *)v192 + 24) = 0;
      *((_WORD *)v192 + 30) = 0;
      *((_DWORD *)v192 + 10) = 0;
      *((_DWORD *)v192 + 11) = 0;
      *((_DWORD *)v192 + 13) = 0;
      *((_DWORD *)v192 + 14) = 0;
      *((_DWORD *)v192 + 17) = 6;
      v193 = *((_BYTE *)v192 + 72);
      *(_DWORD *)v192 = &off_6656D4;
      *((_DWORD *)v192 + 16) = &off_665710;
      *((_BYTE *)v192 + 72) = v193 & 0xF0 | 3;
      *((_DWORD *)v192 + 3) = v164;
      if ( v164 )
        CEntity::RegisterReference(v164, (CEntity **)v192 + 3);
      v100 = this;
      v101 = v161;
      v102 = (CTask *)v192;
      v103 = 1497;
      goto LABEL_291;
    case 1498:
      CRunningScript::CollectParameters(this, 6);
      v165 = ScriptParams[0];
      v166 = *(float *)&ScriptParams[4];
      v167 = ScriptParams[5];
      *(_QWORD *)&pos = *(_QWORD *)&ScriptParams[1];
      DWORD2(pos) = ScriptParams[3];
      v168 = (CTaskComplexFleePoint *)CTask::operator new(0x3Cu);
      CTaskComplexFleePoint::CTaskComplexFleePoint(v168, (const CVector *)&pos, 1, v166, v167);
      v100 = this;
      v101 = v165;
      v102 = v168;
      v103 = 1498;
      goto LABEL_291;
    case 1499:
      CRunningScript::CollectParameters(this, 4);
      v169 = (float)ScriptParams[2];
      v170 = ScriptParams[3];
      v171 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v172 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v172 = 0;
      }
      v194 = (CTaskComplexFleeEntity *)CTask::operator new(0x3Cu);
      CTaskComplexFleeEntity::CTaskComplexFleeEntity(v194, v172, 1, v169, v170, (const int)&elf_hash_bucket[187], 1.0);
      v100 = this;
      v101 = v171;
      v102 = v194;
      v103 = 1499;
      goto LABEL_291;
    default:
      return -1;
  }
}
// 353BA8: variable 'v3' is possibly undefined
// 353BA8: variable 'd0_0' is possibly undefined
// FC: using guessed type int elf_hash_bucket[16411];
// 353FB0: using guessed type __int16 asc_353FB0[4];
// 353FE0: using guessed type __int16 a0123456789Abcd[95];
// 6656D4: using guessed type void *off_6656D4;
// 665710: using guessed type void *off_665710;
// 665784: using guessed type void *off_665784;
// 676378: using guessed type void *`vtable for'CTaskSimpleCower;
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676D34: using guessed type void *`vtable for'CTaskSimpleHandsUp;
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 677568: using guessed type void *`vtable for'CTaskSimpleLookAbout;
// 6784D8: using guessed type void *`vtable for'CTaskSimpleScratchHead;
// 678534: using guessed type int *CPools::ms_pVehiclePool;
// 679BB0: using guessed type void *`vtable for'CTaskSimpleUseAtm;

//----- (0035543C) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands1500To1599(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  Int8 v7; // r5
  Int32 v8; // r8
  float v9; // r9
  int v10; // r6
  CTaskComplexSmartFleePoint *v11; // r5
  CRunningScript *v12; // r0
  int32 v13; // r1
  CTask *v14; // r2
  int32 v15; // r3
  float v16; // s16
  int v17; // r9
  __int64 v18; // kr08_8
  CEntity *v19; // r6
  int32 v20; // r8
  CTaskComplexWander *v21; // r6
  unsigned __int16 v22; // r0
  __int64 v23; // kr10_8
  CPed *v24; // r9
  Int16 v25; // r1
  CVehicle *v26; // r0
  CVehicle *v27; // r0
  CVehicle *v28; // r0
  CVehicle *v29; // r0
  uint8 *v30; // r4
  __int64 v31; // kr18_8
  int v32; // r9
  int v33; // r6
  uint8 *v34; // r0
  int v35; // r0
  int v36; // r0
  bool v37; // zf
  bool IsPlaybackGoingOnForCar; // r1
  __int64 v39; // kr20_8
  int v40; // r9
  CVehicle *v41; // r5
  float i; // s0
  int32 ParameterWithoutIncreasingPC; // r0
  int DecisionMaker; // r0
  uint8 *v45; // r4
  RwUInt8 v46; // r1
  __int16 v47; // r3
  intro_text_line *v48; // r0
  CVehicle *v49; // r0
  float v50; // s0
  uint8 *v51; // r5
  uint8 *v52; // r6
  uint8 *v53; // r6
  uint8 *v54; // r6
  uint8 *v55; // r6
  int32 v56; // r0
  unsigned int AvailableSlot; // r0
  int32 v58; // r5
  int32 NewUniqueScriptThingIndex; // r1
  UInt8 v60; // r2
  unsigned int v61; // r0
  __int64 v62; // kr28_8
  unsigned int v63; // r6
  CTaskComplexUseSequence *v64; // r5
  uint8 *v65; // r0
  uint8 *v66; // r6
  Int32 v67; // r5
  unsigned int v68; // r6
  CTaskComplexSequence *v69; // r1
  int m_iRefCount; // r2
  bool *p_m_bCanBeEmptied; // r1
  int32 v72; // r0
  int32 v73; // r5
  int32 v74; // r8
  __int64 v75; // kr30_8
  float v76; // r6
  float v77; // s0
  CTask v78; // d16
  C2dEffect *v79; // r0
  CTask v80; // d16
  CTask v81; // d16
  Int32 v82; // r5
  unsigned int v83; // r0
  Int32 v84; // r1
  UInt8 v85; // r2
  unsigned int v86; // r6
  CCopPed *v87; // r9
  __int64 v88; // kr38_8
  CVehicle *v89; // r9
  UInt32 v90; // r1
  float v91; // r2
  UInt32 v92; // r1
  float v93; // r2
  const CPed *v94; // r0
  int v95; // r8
  int32 v96; // r0
  int32 v97; // r6
  CPedGroup *v98; // r5
  unsigned int v99; // r4
  CPed *v100; // r5
  unsigned int v101; // r5
  uint8 *v102; // r9
  Int32 v103; // r5
  unsigned int v104; // r0
  int v105; // r6
  CPed *v106; // r0
  int32 v107; // r8
  CTaskComplex *v108; // r6
  __int64 v109; // kr50_8
  CPed *v110; // r6
  __int64 v111; // kr58_8
  CEntity *v112; // r9
  int32 v113; // r8
  float v114; // s16
  float v115; // s18
  CEntity *v116; // r9
  CPed *v117; // r4
  __int64 v118; // kr60_8
  CEntity *v119; // r6
  CTaskComplexSmartFleeEntity *v120; // r5
  CTaskComplexKillPedOnFoot *v121; // r6
  CEntity *v122; // r0
  CEntity *v123; // r0
  CEntity *v124; // r0
  CEntity *v125; // r0
  CTaskComplexGoToPointAnyMeans *v126; // r6
  int32 ActualScriptThingIndex; // r1
  CAnimBlendAssociation *Association; // r0
  CAnimBlendAssociation *v129; // r5
  uint16 m_bitsFlag; // r0
  uint16 v131; // r0
  CAnimBlendAssociation *v132; // r0
  float v133; // r0
  CAnimBlendAssociation *v134; // r5
  unsigned int *v135; // r0
  int v136; // r2
  int v137; // t1
  unsigned int v138; // r1
  unsigned int v139; // r2
  CAnimBlendAssociation *v140; // r0
  CTaskComplexLeaveCar *v141; // r6
  int Status; // r0
  CTaskComplexBeInGroup *v143; // r6
  CPedGroup *v144; // r4
  CTaskComplexBeInGroup *v145; // r4
  CVehicle *m_pMyVehicle; // r6
  CPedGroup *v147; // r10
  CPed *Leader; // r0
  CPed *v149; // r0
  CPed *v150; // r4
  bool v151; // zf
  int v152; // r0
  CTask *TaskByType; // r0
  bool v154; // zf
  int v155; // r1
  CTaskComplexKillPedOnFoot *v156; // r5
  CTaskSimpleGunControl *v157; // r6
  CTaskComplexGoToPointShooting *v158; // r10
  CTaskComplexTurnToFaceEntityOrCoord *v159; // r5
  char v160; // r0
  char v161; // r1
  CTaskSimpleSetStayInSamePlace *v162; // r0
  CPtrNode *m_pHead; // r6
  CPtrNode v164; // kr68_8
  int v165; // r0
  bool v166; // zf
  CTaskSimpleSetStayInSamePlace *v167; // r0
  CTask *v168; // r4
  char v169; // r1
  CTaskComplexFollowNodeRoute *v170; // r5
  int v171; // r5
  CEmergencyPed *v172; // r0
  C2dEffect *v173; // r8
  CMatrix *m_pMat; // r0
  CSimpleTransform *p_tx; // r1
  CTask v176; // d16
  CPedIntelligence *m_pPedIntelligence; // r5
  CTaskSimpleStandStill *v178; // r6
  unsigned __int16 v179; // r0
  void **v180; // r0
  unsigned __int16 v181; // r0
  char *v182; // r0
  CTaskComplexUseEffect *v183; // r6
  const CEventScriptCommand *v184; // r5
  int VacantSlot; // r0
  int v186; // r1
  CPedGroupIntelligence *p_m_intelligence; // r5
  int v189; // r0
  int v190; // r12
  CTaskSimpleCarDrive *v191; // r4
  const CTask *TaskDefault; // r0
  CTask *v193; // r0
  void *v194; // r9
  CVector alpha; // [sp+0h] [bp-1C8h] BYREF
  Int32 v196; // [sp+18h] [bp-1B0h]
  Int32 v197; // [sp+1Ch] [bp-1ACh]
  CTaskComplexSequence vecMovePos; // [sp+20h] [bp-1A8h] BYREF
  CEventEditableResponse v199; // [sp+64h] [bp-164h] BYREF
  CEntity *v200; // [sp+74h] [bp-154h] BYREF
  CEventScriptCommand v201; // [sp+78h] [bp-150h] BYREF
  CTaskComplexEnterCarAsPassenger vFleePos[3]; // [sp+90h] [bp-138h] BYREF

  v7 = 0;
  switch ( CurrCommand )
  {
    case 1500:
      CRunningScript::CollectParameters(this, 6);
      v8 = ScriptParams[0];
      v9 = *(float *)&ScriptParams[4];
      v10 = ScriptParams[5];
      vFleePos[0]._vptr$CTask = (int (**)(void))ScriptParams[1];
      vFleePos[0].m_pParent = (CTask *)ScriptParams[2];
      vFleePos[0].m_pSubTask = (CTask *)ScriptParams[3];
      v11 = (CTaskComplexSmartFleePoint *)CTask::operator new(0x44u);
      CTaskComplexSmartFleePoint::CTaskComplexSmartFleePoint(v11, (const CVector *)vFleePos, 1, v9, v10);
      v12 = this;
      v13 = v8;
      v14 = v11;
      v15 = 1500;
      goto LABEL_298;
    case 1501:
      CRunningScript::CollectParameters(this, 4);
      v16 = (float)ScriptParams[2];
      v17 = ScriptParams[3];
      v18 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v19 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v19 = 0;
      }
      v120 = (CTaskComplexSmartFleeEntity *)CTask::operator new(0x40u);
      CTaskComplexSmartFleeEntity::CTaskComplexSmartFleeEntity(
        v120,
        v19,
        1,
        v16,
        v17,
        (const int)&elf_hash_bucket[187],
        1.0);
      v12 = this;
      v13 = v18;
      v14 = v120;
      v15 = 1501;
      goto LABEL_298;
    case 1502:
      CRunningScript::CollectParameters(this, 1);
      v20 = ScriptParams[0];
      v21 = (CTaskComplexWander *)CTask::operator new(0x38u);
      v22 = rand();
      CTaskComplexWander::CTaskComplexWander(v21, 4, (int)(float)((float)((float)v22 * 0.000015259) * 8.0), 1, 0.5);
      v7 = 0;
      LOWORD(v21[1].m_pSubTask) = 0;
      v21[1].m_iMoveState = 0;
      v21[1]._vptr$CTask = 0;
      v21[1].m_pParent = 0;
      v21->_vptr$CTask = (int (**)(void))&off_66C58C;
      CRunningScript::GivePedScriptedTask(this, v20, v21, 1502);
      return v7;
    case 1503:
    case 1504:
    case 1505:
    case 1507:
    case 1508:
    case 1509:
    case 1510:
    case 1511:
    case 1512:
    case 1514:
    case 1519:
    case 1520:
    case 1544:
    case 1545:
    case 1548:
    case 1552:
    case 1559:
    case 1564:
    case 1567:
    case 1568:
    case 1579:
    case 1580:
    case 1581:
      return v7;
    case 1506:
      CRunningScript::CollectParameters(this, 2);
      v7 = 0;
      v23 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v24 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v24 = 0;
      }
      v121 = (CTaskComplexKillPedOnFoot *)CTask::operator new(0x38u);
      CTaskComplexKillPedOnFoot::CTaskComplexKillPedOnFoot(v121, v24, -1, 0, 0, 0, 1);
      CRunningScript::GivePedScriptedTask(this, v23, v121, 1506);
      return v7;
    case 1513:
      v25 = 2;
      goto LABEL_151;
    case 1515:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v26 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v26 = 0;
      }
      v7 = 0;
      CVehicleRecording::StartPlaybackRecordedCar(v26, ScriptParams[1], 0, 0);
      return v7;
    case 1516:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v27 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        if ( v27 )
          CVehicleRecording::StopPlaybackRecordedCar(v27);
      }
      return 0;
    case 1517:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v28 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v28 = 0;
      }
      CVehicleRecording::PausePlaybackRecordedCar(v28);
      return 0;
    case 1518:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v29 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v29 = 0;
      }
      CVehicleRecording::UnpausePlaybackRecordedCar(v29);
      return 0;
    case 1521:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v30 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v30 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v122 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v122 = 0;
      }
      *((_DWORD *)v30 + 264) = v122;
      CEntity::RegisterReference(v122, (CEntity **)v30 + 264);
      if ( (unsigned __int8)(v30[958] - 57) < 2u )
        return 0;
      v160 = 29;
      goto LABEL_269;
    case 1522:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v30 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v30 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v123 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v123 = 0;
      }
      *((_DWORD *)v30 + 264) = v123;
      CEntity::RegisterReference(v123, (CEntity **)v30 + 264);
      if ( (unsigned __int8)(v30[958] - 57) < 2u )
        return 0;
      v160 = 30;
      goto LABEL_269;
    case 1523:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v30 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v30 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v124 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v124 = 0;
      }
      *((_DWORD *)v30 + 264) = v124;
      CEntity::RegisterReference(v124, (CEntity **)v30 + 264);
      if ( (unsigned __int8)(v30[958] - 57) < 2u )
        return 0;
      v160 = 31;
      goto LABEL_269;
    case 1524:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v30 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v30 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v125 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v125 = 0;
      }
      *((_DWORD *)v30 + 264) = v125;
      CEntity::RegisterReference(v125, (CEntity **)v30 + 264);
      if ( (unsigned __int8)(v30[958] - 57) < 2u )
        return 0;
      v160 = 32;
LABEL_269:
      v30[958] = v160;
      return 0;
    case 1525:
      CRunningScript::CollectParameters(this, 6);
      v31 = *(_QWORD *)ScriptParams;
      v32 = ScriptParams[4];
      v33 = ScriptParams[5];
      vFleePos[0]._vptr$CTask = (int (**)(void))ScriptParams[1];
      vFleePos[0].m_pParent = (CTask *)ScriptParams[2];
      vFleePos[0].m_pSubTask = (CTask *)ScriptParams[3];
      if ( ScriptParams[5] == -2 )
      {
        v33 = -1;
      }
      else if ( ScriptParams[5] == -1 )
      {
        v33 = (int)&elf_hash_bucket[12437];
      }
      v170 = (CTaskComplexFollowNodeRoute *)CTask::operator new(0x60u);
      CTaskComplexFollowNodeRoute::CTaskComplexFollowNodeRoute(
        v170,
        v32,
        (const CVector *)vFleePos,
        0.5,
        3.0,
        2.0,
        1,
        v33,
        1);
      v12 = this;
      v13 = v31;
      v14 = v170;
      v15 = 1525;
      goto LABEL_298;
    case 1526:
    case 1527:
    case 1528:
    case 1529:
    case 1530:
    case 1531:
    case 1532:
    case 1533:
    case 1534:
    case 1535:
    case 1536:
    case 1537:
      CRunningScript::CharInAngledAreaCheckCommand(this, CurrCommand);
      return 0;
    case 1538:
      CRunningScript::CollectParameters(this, 1);
      v34 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !(v34[1157] << 31) )
        goto LABEL_162;
      v35 = *((_DWORD *)v34 + 356);
      if ( !v35 )
        goto LABEL_162;
      v36 = *(__int16 *)(v35 + 38);
      v37 = v36 == 438;
      if ( v36 != 438 )
        v37 = v36 == 420;
      if ( v37 )
        IsPlaybackGoingOnForCar = 1;
      else
LABEL_162:
        IsPlaybackGoingOnForCar = 0;
      goto LABEL_200;
    case 1539:
      CRunningScript::CollectParameters(this, 6);
      v39 = *(_QWORD *)ScriptParams;
      v40 = ScriptParams[4];
      vFleePos[0]._vptr$CTask = (int (**)(void))ScriptParams[1];
      vFleePos[0].m_pParent = (CTask *)ScriptParams[2];
      vFleePos[0].m_pSubTask = (CTask *)ScriptParams[3];
      if ( ScriptParams[5] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[5] >> 8] == LOBYTE(ScriptParams[5]) )
      {
        v41 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[5] >> 8];
      }
      else
      {
        v41 = 0;
      }
      v126 = (CTaskComplexGoToPointAnyMeans *)CTask::operator new(0x34u);
      CTaskComplexGoToPointAnyMeans::CTaskComplexGoToPointAnyMeans(v126, v40, (const CVector *)vFleePos, v41, 0.5, -1);
      v12 = this;
      v13 = v39;
      v14 = v126;
      v15 = 1539;
      goto LABEL_298;
    case 1540:
      CRunningScript::CollectParameters(this, 2);
      for ( i = (float)((float)(CGeneral::GetATanOfXY(*(float *)ScriptParams, *(float *)&ScriptParams[1]) * 180.0)
                      / 3.1416)
              + -90.0; i < 0.0; i = i + 360.0 )
        ;
      *(float *)ScriptParams = i;
      goto LABEL_320;
    case 1541:
      CRunningScript::PlayAnimScriptCommand(this, 1541);
      return 0;
    case 1542:
      CRunningScript::CollectParameters(this, 4);
      v2.n64_u32[0] = ScriptParams[0];
      v4.n64_u32[0] = ScriptParams[2];
      v3.n64_u32[0] = ScriptParams[1];
      v5.n64_u32[0] = ScriptParams[3];
      CPathFind::MakeRequestForNodesToBeLoaded(
        &ThePaths,
        vmin_f32(v2, v4).n64_f32[0],
        vmax_f32(v2, v4).n64_f32[0],
        vmin_f32(v3, v5).n64_f32[0],
        vmax_f32(v3, v5).n64_f32[0]);
      return 0;
    case 1543:
      CPathFind::ReleaseRequestedNodes(&ThePaths);
      return 0;
    case 1546:
      CRunningScript::CollectParameters(this, 1);
      CDecisionMakerTypesFileLoader::GetPedDMName(ScriptParams[0], (unsigned __int8 *)vFleePos);
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(ParameterWithoutIncreasingPC, 7u);
      DecisionMaker = CDecisionMakerTypesFileLoader::LoadDecisionMaker(
                        (const unsigned __int8 *)vFleePos,
                        0,
                        this->IsThisAMissionScript,
                        -1);
      ScriptParams[0] = CTheScripts::GetNewUniqueScriptThingIndex(DecisionMaker, 7u);
      CRunningScript::StoreParameters(this, 1);
      if ( this->IsThisAMissionScript )
        CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, ScriptParams[0], 9u);
      return 0;
    case 1547:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v45 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v45 = 0;
      }
      if ( ScriptParams[1] == -1 )
      {
        ActualScriptThingIndex = -1;
      }
      else
      {
        ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptParams[1], 7u);
        if ( ActualScriptThingIndex == -1 )
          return 0;
      }
      CPedIntelligence::SetPedDecisionMakerType(*((CPedIntelligence **)v45 + 272), ActualScriptThingIndex);
      return 0;
    case 1549:
      CRunningScript::CollectParameters(this, 5);
      CRGBA::CRGBA((CRGBA *)vFleePos, ScriptParams[1], ScriptParams[2], ScriptParams[3], ScriptParams[4]);
      v7 = 0;
      v46 = (RwUInt8)vFleePos[0]._vptr$CTask;
      v47 = *(_WORD *)((char *)&vFleePos[0]._vptr$CTask + 1);
      v48 = &CTheScripts::IntroTextLines[CTheScripts::NumberOfIntroTextLinesThisFrame];
      v48->ScriptTextDropShadowColour._anon_0._anon_0.alpha = HIBYTE(vFleePos[0]._vptr$CTask);
      *(_WORD *)&v48->ScriptTextDropShadowColour._anon_0._anon_0.green = v47;
      v48->ScriptTextDropShadowColour._anon_0._anon_0.red = v46;
      v48->ScriptTextDropShadow = ScriptParams[0];
      return v7;
    case 1550:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v49 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v49 = 0;
      }
      IsPlaybackGoingOnForCar = CVehicleRecording::IsPlaybackGoingOnForCar(v49);
      goto LABEL_200;
    case 1551:
      CRunningScript::CollectParameters(this, 2);
      v50 = *(float *)&ScriptParams[1];
      if ( ScriptParams[0] != -1 )
      {
        if ( ScriptParams[0] >= 0
          && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        {
          v51 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        }
        else
        {
          v51 = 0;
        }
        CPedIntelligence::SetSeeingRange(*((CPedIntelligence **)v51 + 272), *(const float *)&ScriptParams[1]);
        CPedIntelligence::SetHearingRange(*((CPedIntelligence **)v51 + 272), v50);
        return 0;
      }
      m_pHead = CWorld::ms_listMovingEntityPtrs.m_pHead;
      if ( !CWorld::ms_listMovingEntityPtrs.m_pHead )
        return 0;
      do
      {
        v164 = *m_pHead;
        m_pHead = m_pHead->m_pNext;
        v165 = *((_BYTE *)v164.m_pVoid + 58) & 7;
        v166 = v165 == 3;
        if ( v165 == 3 )
          v166 = *((_BYTE *)v164.m_pVoid + 1096) == 2;
        if ( v166 )
        {
          CPedIntelligence::SetSeeingRange(*((CPedIntelligence **)v164.m_pVoid + 272), v50);
          CPedIntelligence::SetHearingRange(*((CPedIntelligence **)v164.m_pVoid + 272), v50);
        }
        v7 = 0;
      }
      while ( m_pHead );
      return v7;
    case 1553:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v52 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v52 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, (Char *)vFleePos, 0x18u);
      Association = RpAnimBlendClumpGetAssociation(*((RpClump_0 **)v52 + 6), (const unsigned __int8 *)vFleePos);
      IsPlaybackGoingOnForCar = (char)Association;
      if ( Association )
        IsPlaybackGoingOnForCar = 1;
LABEL_200:
      CRunningScript::UpdateCompareFlag(this, IsPlaybackGoingOnForCar);
      return 0;
    case 1554:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v53 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v53 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, (Char *)vFleePos, 0x18u);
      v129 = RpAnimBlendClumpGetAssociation(*((RpClump_0 **)v53 + 6), (const unsigned __int8 *)vFleePos);
      CRunningScript::CollectParameters(this, 1);
      if ( v129 )
      {
        m_bitsFlag = v129->m_bitsFlag;
        if ( ScriptParams[0] )
          v131 = m_bitsFlag | 1;
        else
          v131 = m_bitsFlag & 0xFFFE;
        v129->m_bitsFlag = v131;
      }
      return 0;
    case 1555:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v54 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v54 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, (Char *)vFleePos, 0x18u);
      v132 = RpAnimBlendClumpGetAssociation(*((RpClump_0 **)v54 + 6), (const unsigned __int8 *)vFleePos);
      if ( v132 )
        v133 = v132->m_fCurrentTime / v132->m_pAnimBlendHierarchy->m_fTotalTime;
      else
        v133 = 0.0;
      goto LABEL_295;
    case 1556:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v55 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v55 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, (Char *)vFleePos, 0x18u);
      v134 = RpAnimBlendClumpGetAssociation(*((RpClump_0 **)v55 + 6), (const unsigned __int8 *)vFleePos);
      CRunningScript::CollectParameters(this, 1);
      if ( v134 )
        CAnimBlendAssociation::SetCurrentTime(v134, *(float *)ScriptParams * v134->m_pAnimBlendHierarchy->m_fTotalTime);
      return 0;
    case 1557:
      v56 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(v56, 4u);
      AvailableSlot = CTaskSequences::GetAvailableSlot(this->IsThisAMissionScript);
      v58 = AvailableSlot;
      if ( AvailableSlot > 0x3F )
        goto LABEL_270;
      CTaskSequences::ms_bIsOpened[AvailableSlot] = 1;
      CTaskComplexSequence::Flush(&CTaskSequences::ms_taskSequence[AvailableSlot]);
      CTaskSequences::ms_iActiveSequence = v58;
      NewUniqueScriptThingIndex = CTheScripts::GetNewUniqueScriptThingIndex(v58, 4u);
      ScriptParams[0] = NewUniqueScriptThingIndex;
      if ( !this->IsThisAMissionScript )
        goto LABEL_320;
      v60 = 8;
      goto LABEL_102;
    case 1558:
      CRunningScript::CollectParameters(this, 1);
      v61 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 4u);
      v7 = 0;
      if ( v61 <= 0x3F )
      {
        CTaskSequences::ms_bIsOpened[v61] = 0;
        CTaskSequences::ms_iActiveSequence = -1;
      }
      return v7;
    case 1560:
      CRunningScript::CollectParameters(this, 2);
      v62 = *(_QWORD *)ScriptParams;
      v63 = CTheScripts::GetActualScriptThingIndex(ScriptParams[1], 4u);
      if ( v63 > 0x3F )
        return 0;
      v64 = (CTaskComplexUseSequence *)CTask::operator new(0x1Cu);
      CTaskComplexUseSequence::CTaskComplexUseSequence(v64, v63);
      v12 = this;
      v13 = v62;
      v14 = v64;
      v15 = 1560;
      goto LABEL_298;
    case 1561:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v65 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v65 = 0;
      }
      v7 = 0;
      v137 = *((_DWORD *)v65 + 7);
      v135 = (unsigned int *)(v65 + 28);
      v136 = v137;
      v138 = v135[1];
      if ( ScriptParams[1] )
        v139 = v136 | 1;
      else
        v139 = v136 & 0xFFFFFFFE;
      *v135 = v139;
      v135[1] = v138;
      return v7;
    case 1562:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v66 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v66 = 0;
      }
      CRunningScript::ReadTextLabelFromScript(this, (Char *)vFleePos, 0x18u);
      v140 = RpAnimBlendClumpGetAssociation(*((RpClump_0 **)v66 + 6), (const unsigned __int8 *)vFleePos);
      if ( v140 )
        v133 = v140->m_pAnimBlendHierarchy->m_fTotalTime * 1000.0;
      else
        v133 = 0.0;
LABEL_295:
      *(float *)ScriptParams = v133;
      goto LABEL_320;
    case 1563:
      CRunningScript::CollectParameters(this, 1);
      v67 = ScriptParams[0];
      v68 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 4u);
      if ( v68 <= 0x3F )
      {
        v69 = &CTaskSequences::ms_taskSequence[v68];
        CTaskSequences::ms_bIsOpened[v68] = 0;
        m_iRefCount = v69->m_iRefCount;
        p_m_bCanBeEmptied = &v69->m_bCanBeEmptied;
        if ( m_iRefCount )
        {
          *p_m_bCanBeEmptied = 1;
        }
        else
        {
          *p_m_bCanBeEmptied = 0;
          CTaskComplexSequence::Flush(&CTaskSequences::ms_taskSequence[v68]);
        }
        CTheScripts::ScriptSequenceTaskArray[v68].bUsed = 0;
      }
      if ( !this->IsThisAMissionScript )
        return 0;
      v84 = v67;
      v85 = 8;
      goto LABEL_305;
    case 1565:
      CRunningScript::CollectParameters(this, 6);
      v72 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(v72, 6u);
      v73 = CScripted2dEffects::AddScripted2DEffect(-1.0);
      v74 = CTheScripts::GetActualScriptThingIndex(ScriptParams[5], 4u);
      if ( (v74 | (unsigned int)v73) > 0x3F )
        goto LABEL_270;
      v75 = *(_QWORD *)ScriptParams;
      v197 = ScriptParams[1];
      v196 = ScriptParams[2];
      vFleePos[0].m_pSubTask = 0;
      v76 = (float)(*(float *)&ScriptParams[3] * 3.1416) / 180.0;
      vFleePos[0]._vptr$CTask = (int (**)(void))(COERCE_UNSIGNED_INT(sinf(v76)) ^ 0x80000000);
      vFleePos[0].m_pParent = COERCE_CTASK_(cosf(v76));
      CVector::Normalise((CVector *)vFleePos);
      vecMovePos.m_pSubTask = 0;
      v77 = (float)(*(float *)&ScriptParams[4] * 3.1416) / 180.0;
      vecMovePos._vptr$CTask = (int (**)(void))(COERCE_UNSIGNED_INT(sinf(v77)) ^ 0x80000000);
      vecMovePos.m_pParent = COERCE_CTASK_(cosf(v77));
      CVector::Normalise((CVector *)&vecMovePos);
      v78 = vFleePos[0].CTask;
      CScripted2dEffects::ms_effectSequenceTaskIDs[v73] = v74;
      LODWORD(CScripted2dEffects::ms_effects[v73].m_posn.x) = v75;
      v79 = &CScripted2dEffects::ms_effects[v73];
      v79->m_type = 3;
      LODWORD(v79->m_posn.y) = v197;
      LODWORD(v79->m_posn.z) = v196;
      LODWORD(v79->attr.l.m_size) = vFleePos[0].m_pSubTask;
      *(CTask *)&v79->attr.l.m_colour._anon_0._anon_0.red = v78;
      v80 = vFleePos[0].CTask;
      LODWORD(v79->attr.q.m_useDir.z) = vFleePos[0].m_pSubTask;
      *(CTask *)&v79->attr.es.Coors2X = v80;
      v81 = vecMovePos.CTask;
      v79->attr.l.m_pCoronaTex = (RwTexture_0 *)vecMovePos.m_pSubTask;
      *(CTask *)&v79->attr.es.Coors3X = v81;
      v79->attr.q.m_type = 7;
      NewUniqueScriptThingIndex = CTheScripts::GetNewUniqueScriptThingIndex(v73, 6u);
      ScriptParams[0] = NewUniqueScriptThingIndex;
      if ( !this->IsThisAMissionScript )
        goto LABEL_320;
      v60 = 7;
LABEL_102:
      CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, NewUniqueScriptThingIndex, v60);
      goto LABEL_320;
    case 1566:
      CRunningScript::CollectParameters(this, 1);
      v82 = ScriptParams[0];
      v83 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 6u);
      if ( v83 <= 0x3F )
        CScripted2dEffects::ms_activated[v83] = 0;
      if ( !this->IsThisAMissionScript )
        return 0;
      v84 = v82;
      v85 = 7;
      goto LABEL_305;
    case 1569:
      CRunningScript::CollectParameters(this, 4);
      v86 = CTheScripts::GetActualScriptThingIndex(ScriptParams[2], 6u);
      if ( v86 > 0x3F )
      {
LABEL_270:
        ScriptParams[0] = -1;
      }
      else
      {
        CRunningScript::GetCorrectPedModelIndexForEmergencyServiceType(this, ScriptParams[0], &ScriptParams[1]);
        if ( ScriptParams[0] == 6 )
        {
          v87 = (CCopPed *)CPed::operator new(0x7CCu);
          CCopPed::CCopPed(v87, (eCopType)ScriptParams[1]);
        }
        else
        {
          v171 = ScriptParams[0] | 1;
          v172 = (CEmergencyPed *)CPed::operator new(0x7A4u);
          v87 = (CCopPed *)v172;
          if ( v171 == 19 )
            CEmergencyPed::CEmergencyPed(v172, ScriptParams[0], ScriptParams[1]);
          else
            CCivilianPed::CCivilianPed((CCivilianPed *)v172, (ePedType)ScriptParams[0], ScriptParams[1]);
        }
        CPed::SetCharCreatedBy(v87, 2u);
        *(_DWORD *)&v87->m_nPedFlags &= ~0x80000000;
        v173 = &CScripted2dEffects::ms_effects[v86];
        CPedAttractorPedPlacer::PlacePedAtEffect(v173, 0, v87, 0.01);
        m_pMat = v87->m_pMat;
        p_tx = (CSimpleTransform *)&m_pMat->tx;
        if ( !m_pMat )
          p_tx = &v87->m_transform;
        v176 = *(CTask *)&p_tx->m_translate.x;
        vecMovePos.m_pSubTask = (CTask *)LODWORD(p_tx->m_translate.z);
        vecMovePos.CTask = v176;
        CTheScripts::ClearSpaceForMissionEntity((const CVector *)&vecMovePos, v87);
        if ( this->IsThisAMissionScript )
          *(_DWORD *)&v87->m_nFlags |= 0x40000u;
        CWorld::Add(v87);
        switch ( ScriptParams[3] )
        {
          case 0x5BA:
            m_pPedIntelligence = v87->m_pPedIntelligence;
            v178 = (CTaskSimpleStandStill *)CTask::operator new(0x20u);
            CTaskSimpleStandStill::CTaskSimpleStandStill(v178, 0, 1, 0, 8.0);
            goto LABEL_316;
          case 0x5DF:
            goto LABEL_317;
          case 0x5E0:
            m_pPedIntelligence = v87->m_pPedIntelligence;
            v178 = (CTaskSimpleStandStill *)CTask::operator new(0x38u);
            v181 = rand();
            CTaskComplexWander::CTaskComplexWander(
              (CTaskComplexWander *)v178,
              4,
              (int)(float)((float)((float)v181 * 0.000015259) * 8.0),
              1,
              0.5);
            v180 = &`vtable for'CTaskComplexWanderCriminal;
            goto LABEL_315;
          default:
            m_pPedIntelligence = v87->m_pPedIntelligence;
            v178 = (CTaskSimpleStandStill *)CTask::operator new(0x38u);
            v179 = rand();
            CTaskComplexWander::CTaskComplexWander(
              (CTaskComplexWander *)v178,
              4,
              (int)(float)((float)((float)v179 * 0.000015259) * 8.0),
              1,
              0.5);
            v180 = &`vtable for'CTaskComplexWanderStandard;
LABEL_315:
            v182 = (char *)*v180;
            LOWORD(v178[1].m_timer.m_iDuration) = 0;
            *(_DWORD *)&v178[1].m_timer.m_bIsActive = 0;
            v178[1].m_iDuration = 0;
            v178[1].m_timer.m_iStartTime = 0;
            v178->_vptr$CTask = (int (**)(void))(v182 + 8);
LABEL_316:
            CTaskManager::SetTask(&m_pPedIntelligence->m_taskManager, v178, 4, 0);
LABEL_317:
            v183 = (CTaskComplexUseEffect *)CTask::operator new(0x24u);
            CTaskComplexUseEffect::CTaskComplexUseEffect(v183, v173, 0);
            CEventScriptCommand::CEventScriptCommand((CEventScriptCommand *)vFleePos, 3, v183, 0);
            v184 = (const CEventScriptCommand *)CEventGroup::Add(
                                                  &v87->m_pPedIntelligence->m_eventGroup,
                                                  (CEvent *)vFleePos,
                                                  0);
            VacantSlot = CPedScriptedTaskRecord::GetVacantSlot();
            CPedScriptedTaskRecordData::Set(&CPedScriptedTaskRecord::ms_scriptedTasks[VacantSlot], v87, 1569, v184);
            ++CPopulation::ms_nTotalMissionPeds;
            v186 = CPools::ms_pPedPool->m_aFlags[-1093107909
                                               * (((char *)v87 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2)] | (-662750464 * (((char *)v87 - (char *)CPools::ms_pPedPool->m_aStorage) >> 2));
            ScriptParams[0] = v186;
            if ( this->IsThisAMissionScript )
              CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, v186, 2u);
            CEventScriptCommand::~CEventScriptCommand((CEventScriptCommand *)vFleePos);
            break;
        }
      }
      goto LABEL_320;
    case 1570:
      CRunningScript::CollectParameters(this, 2);
      v7 = 0;
      v88 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v89 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v89 = 0;
      }
      v141 = (CTaskComplexLeaveCar *)CTask::operator new(0x34u);
      CTaskComplexLeaveCar::CTaskComplexLeaveCar(v141, v89, 0, 0, 0, 0);
      CRunningScript::GivePedScriptedTask(this, v88, v141, 1570);
      return v7;
    case 1571:
      CRunningScript::CollectParameters(this, 2);
      CStats::IncrementStat(ScriptParams[0], (float)ScriptParams[1]);
      goto LABEL_121;
    case 1572:
      CRunningScript::CollectParameters(this, 2);
      CStats::IncrementStat(ScriptParams[0], *(float *)&ScriptParams[1]);
      goto LABEL_123;
    case 1573:
      CRunningScript::CollectParameters(this, 2);
      CStats::DecrementStat(ScriptParams[0], (float)ScriptParams[1]);
      v90 = ScriptParams[0];
      v91 = (float)ScriptParams[1];
      goto LABEL_117;
    case 1574:
      CRunningScript::CollectParameters(this, 2);
      CStats::DecrementStat(ScriptParams[0], *(float *)&ScriptParams[1]);
      v91 = *(float *)&ScriptParams[1];
      v90 = ScriptParams[0];
LABEL_117:
      v7 = 0;
      CStats::DisplayScriptStatUpdateMessage(0, v90, v91);
      return v7;
    case 1575:
      CRunningScript::CollectParameters(this, 2);
      CStats::SetNewRecordStat(ScriptParams[0], (float)ScriptParams[1]);
      goto LABEL_121;
    case 1576:
      CRunningScript::CollectParameters(this, 2);
      CStats::SetNewRecordStat(ScriptParams[0], *(float *)&ScriptParams[1]);
      goto LABEL_123;
    case 1577:
      CRunningScript::CollectParameters(this, 2);
      CStats::SetStatValue(ScriptParams[0], (float)ScriptParams[1]);
LABEL_121:
      v92 = ScriptParams[0];
      v93 = (float)ScriptParams[1];
      goto LABEL_124;
    case 1578:
      CRunningScript::CollectParameters(this, 2);
      CStats::SetStatValue(ScriptParams[0], *(float *)&ScriptParams[1]);
LABEL_123:
      v93 = *(float *)&ScriptParams[1];
      v92 = ScriptParams[0];
LABEL_124:
      CStats::DisplayScriptStatUpdateMessage(1u, v92, v93);
      return 0;
    case 1582:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v94 = (const CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v94 = 0;
      }
      Status = CPedScriptedTaskRecord::GetStatus(v94, ScriptParams[1]);
      if ( Status == -1 )
        Status = 7;
      ScriptParams[0] = Status;
LABEL_320:
      CRunningScript::StoreParameters(this, 1);
      return 0;
    case 1583:
      CRunningScript::CollectParameters(this, 1);
      v95 = ScriptParams[0];
      v96 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(v96, 8u);
      v97 = CPedGroups::AddGroup();
      v98 = &CPedGroups::ms_groups[v97];
      CPedGroupIntelligence::SetDefaultTaskAllocatorType(&v98->m_intelligence, v95);
      v98->m_iGroupCreatedBy = 1;
      ScriptParams[0] = CTheScripts::GetNewUniqueScriptThingIndex(v97, 8u);
      CRunningScript::StoreParameters(this, 1);
      if ( this->IsThisAMissionScript )
        CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, ScriptParams[0], 5u);
      return 0;
    case 1584:
      CRunningScript::CollectParameters(this, 2);
      v99 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 8u);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v100 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( v99 > 7 )
          return 0;
      }
      else
      {
        v100 = 0;
        if ( v99 > 7 )
          return 0;
      }
      if ( !CPed::IsPlayer(v100) )
      {
        v143 = (CTaskComplexBeInGroup *)CTask::operator new(0x28u);
        CTaskComplexBeInGroup::CTaskComplexBeInGroup(v143, v99, 1);
        CEventScriptCommand::CEventScriptCommand((CEventScriptCommand *)vFleePos, 3, v143, 0);
        CEventGroup::Add(&v100->m_pPedIntelligence->m_eventGroup, (CEvent *)vFleePos, 0);
        CEventScriptCommand::~CEventScriptCommand((CEventScriptCommand *)vFleePos);
      }
      v144 = &CPedGroups::ms_groups[v99];
      CPedGroupMembership::SetLeader(&v144->m_membership, v100);
      CPedGroup::Process(v144);
      return 0;
    case 1585:
      CRunningScript::CollectParameters(this, 2);
      v101 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 8u);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v102 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( v101 > 7 )
          return 0;
      }
      else
      {
        v102 = 0;
        if ( v101 > 7 )
          return 0;
      }
      v145 = (CTaskComplexBeInGroup *)CTask::operator new(0x28u);
      CTaskComplexBeInGroup::CTaskComplexBeInGroup(v145, v101, 0);
      m_pMyVehicle = (CVehicle *)&v201;
      CEventScriptCommand::CEventScriptCommand(&v201, 3, v145, 0);
      CEventGroup::Add((CEventGroup *)(*((_DWORD *)v102 + 272) + 104), &v201, 0);
      v147 = &CPedGroups::ms_groups[v101];
      if ( CPedGroupMembership::CountMembersExcludingLeader(&v147->m_membership) >= 7 )
      {
        if ( CPedGroupMembership::GetLeader(&v147->m_membership) )
        {
          Leader = CPedGroupMembership::GetLeader(&v147->m_membership);
          if ( CPed::IsPlayer(Leader) )
            CPedGroupMembership::RemoveNFollowers(&v147->m_membership, 1);
        }
      }
      CPedGroupMembership::AddFollower(&v147->m_membership, (CPed *)v102);
      CPedGroup::Process(&CPedGroups::ms_groups[v101]);
      v149 = CPedGroupMembership::GetLeader(&v147->m_membership);
      v150 = v149;
      if ( !v149 )
        goto LABEL_334;
      v152 = *((unsigned __int8 *)&v149->m_nPedFlags + 1) << 31;
      v151 = v152 == 0;
      if ( v152 )
      {
        m_pMyVehicle = v150->m_pMyVehicle;
        v151 = m_pMyVehicle == 0;
      }
      if ( v151 )
      {
        TaskByType = CPedIntelligence::FindTaskByType(v150->m_pPedIntelligence, 701);
        v154 = TaskByType == 0;
        if ( TaskByType )
        {
          m_pMyVehicle = (CVehicle *)TaskByType[1].m_pParent;
          v154 = m_pMyVehicle == 0;
        }
        if ( v154 )
          goto LABEL_334;
      }
      if ( !m_pMyVehicle->m_nMaxPassengers )
        goto LABEL_334;
      v155 = 0;
      break;
    case 1586:
      CRunningScript::CollectParameters(this, 1);
      v103 = ScriptParams[0];
      v104 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 8u);
      v105 = v104;
      if ( v104 > 7 )
        goto LABEL_278;
      if ( CPedGroups::ms_activeGroups[v104]
        && CPedGroupMembership::GetLeader(&CPedGroups::ms_groups[v104].m_membership)
        && (v106 = CPedGroupMembership::GetLeader(&CPedGroups::ms_groups[v105].m_membership), CPed::IsPlayer(v106)) )
      {
        CPedGroups::RemoveAllFollowersFromGroup(v105);
      }
      else
      {
        CPedGroups::RemoveGroup(v105);
LABEL_278:
        if ( this->IsThisAMissionScript )
        {
          v84 = v103;
          v85 = 5;
LABEL_305:
          CMissionCleanup::RemoveEntityFromList(&CTheScripts::MissionCleanUp, v84, v85);
        }
      }
      return 0;
    case 1587:
      CRunningScript::CollectParameters(this, 1);
      v107 = ScriptParams[0];
      v108 = (CTaskComplex *)CTask::operator new(0x14u);
      CTaskComplex::CTaskComplex(v108);
      v7 = 0;
      v108[1]._vptr$CTask = 0;
      v108->_vptr$CTask = (int (**)(void))&off_66AF80;
      LOWORD(v108[1].m_pParent) = 1;
      CRunningScript::GivePedScriptedTask(this, v107, v108, 1587);
      return v7;
    case 1588:
      CRunningScript::CollectParameters(this, 5);
      v109 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v110 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v110 = 0;
      }
      v156 = (CTaskComplexKillPedOnFoot *)CTask::operator new(0x38u);
      CTaskComplexKillPedOnFoot::CTaskComplexKillPedOnFoot(
        v156,
        v110,
        -1,
        ScriptParams[2],
        ScriptParams[3],
        ScriptParams[4],
        1);
      v12 = this;
      v13 = v109;
      v14 = v156;
      v15 = 1588;
      goto LABEL_298;
    case 1589:
      CRunningScript::CollectParameters(this, 3);
      v7 = 0;
      v111 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v112 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v112 = 0;
      }
      v157 = (CTaskSimpleGunControl *)CTask::operator new(0x3Cu);
      CTaskSimpleGunControl::CTaskSimpleGunControl(v157, v112, 0, 0, 0, 1, ScriptParams[2]);
      CRunningScript::GivePedScriptedTask(this, v111, v157, 1589);
      return v7;
    case 1590:
      v25 = 9;
LABEL_151:
      CRunningScript::CollectParameters(this, v25);
      return 0;
    case 1591:
      CRunningScript::CollectParameters(this, 8);
      v7 = 0;
      v113 = ScriptParams[0];
      v114 = *(float *)&ScriptParams[5];
      v115 = *(float *)&ScriptParams[6];
      if ( ScriptParams[7] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[7] >> 8] == LOBYTE(ScriptParams[7]) )
      {
        v116 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[7] >> 8];
      }
      else
      {
        v116 = 0;
      }
      vecMovePos._vptr$CTask = (int (**)(void))ScriptParams[1];
      vecMovePos.m_pParent = (CTask *)ScriptParams[2];
      vecMovePos.m_pSubTask = (CTask *)ScriptParams[3];
      v158 = (CTaskComplexGoToPointShooting *)CTask::operator new(0x38u);
      memset(&alpha, 0, sizeof(alpha));
      CTaskComplexGoToPointShooting::CTaskComplexGoToPointShooting(
        v158,
        ScriptParams[4],
        (const CVector *)&vecMovePos,
        v116,
        alpha,
        v114,
        v115);
      CRunningScript::GivePedScriptedTask(this, v113, v158, 1591);
      return v7;
    case 1592:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] == -1 )
      {
        v167 = (CTaskSimpleSetStayInSamePlace *)CTask::operator new(0xCu);
        v168 = v167;
        v169 = ScriptParams[1];
        if ( ScriptParams[1] )
          v169 = 1;
        CTaskSimpleSetStayInSamePlace::CTaskSimpleSetStayInSamePlace(v167, v169);
        CTaskComplexSequence::AddTask(&CTaskSequences::ms_taskSequence[CTaskSequences::ms_iActiveSequence], v168);
      }
      else
      {
        if ( ScriptParams[0] >= 0
          && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        {
          v117 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        }
        else
        {
          v117 = 0;
        }
        v161 = ScriptParams[1];
        if ( ScriptParams[1] )
          v161 = 1;
        CTaskSimpleSetStayInSamePlace::CTaskSimpleSetStayInSamePlace((CTaskSimpleSetStayInSamePlace *)vFleePos, v161);
        CTaskSimpleSetStayInSamePlace::ProcessPed(v162, v117);
        CTaskSimpleSetStayInSamePlace::~CTaskSimpleSetStayInSamePlace((CTaskSimpleSetStayInSamePlace *)vFleePos);
      }
      return 0;
    case 1593:
      CRunningScript::CollectParameters(this, 2);
      v118 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v119 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v119 = 0;
      }
      v159 = (CTaskComplexTurnToFaceEntityOrCoord *)CTask::operator new(0x28u);
      CTaskComplexTurnToFaceEntityOrCoord::CTaskComplexTurnToFaceEntityOrCoord(v159, v119, 0.5, 0.2);
      v12 = this;
      v13 = v118;
      v14 = v159;
      v15 = 1593;
LABEL_298:
      CRunningScript::GivePedScriptedTask(v12, v13, v14, v15);
      return 0;
    default:
      return -1;
  }
  while ( m_pMyVehicle->pPassengers[v155] )
  {
    if ( ++v155 >= m_pMyVehicle->m_nMaxPassengers )
      goto LABEL_334;
  }
  CEventEditableResponse::CEventEditableResponse(&v199);
  v200 = m_pMyVehicle;
  v199._vptr$CEvent = (int (**)(void))&off_666E48;
  CEntity::RegisterReference(m_pMyVehicle, &v200);
  CEventEditableResponse::ComputeResponseTaskType(&v199, &CPedGroups::ms_groups[v101]);
  if ( v199.m_iTaskType == 1513 )
  {
    v194 = CEvent::operator new(0x14u);
    CEventEditableResponse::CEventEditableResponse((CEventEditableResponse *)v194);
    *(_DWORD *)v194 = &off_666E48;
    *((_DWORD *)v194 + 4) = m_pMyVehicle;
    CEntity::RegisterReference(m_pMyVehicle, (CEntity **)v194 + 4);
    CEventGroupEvent::CEventGroupEvent((CEventGroupEvent *)vFleePos, v150, (CEvent *)v194);
    CPedGroupIntelligence::AddEvent(&CPedGroups::ms_groups[v101].m_intelligence, (CEvent *)vFleePos);
    CEventGroupEvent::~CEventGroupEvent((CEventGroupEvent *)vFleePos);
  }
  else if ( v199.m_iTaskType == 1512 )
  {
    CTaskComplexEnterCarAsPassenger::CTaskComplexEnterCarAsPassenger(vFleePos, m_pMyVehicle, 0, 1);
    p_m_intelligence = &CPedGroups::ms_groups[v101].m_intelligence;
    CPedGroupIntelligence::SetScriptCommandTask(p_m_intelligence, (CPed *)v102, vFleePos);
    v189 = *((_DWORD *)v102 + 291);
    if ( (v189 & 0x2000000) == 0 )
    {
      v190 = *((_DWORD *)v102 + 292);
      *(_QWORD *)(v102 + 1156) = *(_QWORD *)(v102 + 1156);
      *((_DWORD *)v102 + 291) = v189 | 0x2000000;
      *((_DWORD *)v102 + 292) = v190;
      CTaskComplexSequence::CTaskComplexSequence(&vecMovePos);
      v191 = (CTaskSimpleCarDrive *)CTask::operator new(0x60u);
      CTaskSimpleCarDrive::CTaskSimpleCarDrive(v191, m_pMyVehicle, 0, 1);
      CTaskComplexSequence::AddTask(&vecMovePos, v191);
      TaskDefault = CPedGroupIntelligence::GetTaskDefault(p_m_intelligence, (CPed *)v102);
      if ( TaskDefault )
      {
        v193 = (CTask *)(*((int (__fastcall **)(const CTask *))TaskDefault->_vptr$CTask + 2))(TaskDefault);
        CTaskComplexSequence::AddTask(&vecMovePos, v193);
      }
      CPedGroupIntelligence::SetDefaultTask(p_m_intelligence, (CPed *)v102, &vecMovePos);
      CTaskComplexSequence::~CTaskComplexSequence(&vecMovePos);
    }
    CTaskComplexEnterCarAsPassenger::~CTaskComplexEnterCarAsPassenger(vFleePos);
  }
  v199._vptr$CEvent = (int (**)(void))&off_666E48;
  if ( v200 )
    CEntity::CleanUpOldReference(v200, &v200);
  CEvent::~CEvent((CEvent *)&v199);
LABEL_334:
  CEventScriptCommand::~CEventScriptCommand(&v201);
  return 0;
}
// 355A14: variable 'v2' is possibly undefined
// 355A14: variable 'v4' is possibly undefined
// 355A20: variable 'v3' is possibly undefined
// 355A20: variable 'v5' is possibly undefined
// 356CF6: variable 'v162' is possibly undefined
// FC: using guessed type int elf_hash_bucket[16411];
// 666E48: using guessed type void *off_666E48;
// 66AF80: using guessed type void *off_66AF80;
// 66C58C: using guessed type void *;
// 6760D4: using guessed type char (*CScripted2dEffects::ms_activated)[64];
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 677350: using guessed type char (*CPedGroups::ms_activeGroups)[8];
// 677A94: using guessed type void *`vtable for'CTaskComplexWanderStandard;
// 677A98: using guessed type void *`vtable for'CTaskComplexLeaveAnyCar;
// 6783D4: using guessed type void *`vtable for'CTaskComplexWanderCriminal;
// 678534: using guessed type int *CPools::ms_pVehiclePool;
// 6786D8: using guessed type C2dEffect (*CScripted2dEffects::ms_effects)[64];

//----- (003573C0) --------------------------------------------------------
void __fastcall CTaskSimplePause::~CTaskSimplePause(CTaskSimplePause *this)
{
  void *v1; // r0

  CTask::~CTask(this);
  sub_197118(v1);
}
// 3573CC: variable 'v1' is possibly undefined

//----- (003573D0) --------------------------------------------------------
CTask *__fastcall CTaskSimplePause::Clone(const CTaskSimplePause *this)
{
  CTaskSimple *v2; // r0
  CTask *m_iPauseTime; // r4
  CTask *result; // r0

  v2 = (CTaskSimple *)CTask::operator new(0x18u);
  m_iPauseTime = (CTask *)this->m_iPauseTime;
  CTaskSimple::CTaskSimple(v2);
  LOWORD(result[2]._vptr$CTask) = 0;
  result[2].m_pParent = m_iPauseTime;
  result[1]._vptr$CTask = 0;
  result[1].m_pParent = 0;
  result->_vptr$CTask = (int (**)(void))&off_665750;
  return result;
}
// 3573E6: variable 'result' is possibly undefined
// 665750: using guessed type void *off_665750;

//----- (003573FC) --------------------------------------------------------
int __fastcall CTaskSimplePause::GetTaskType(const CTaskSimplePause *this)
{
  return 202;
}

//----- (00357400) --------------------------------------------------------
bool __fastcall CTaskSimplePause::MakeAbortable(
        CTaskSimplePause *this,
        CPed *pPed,
        const int iPriority,
        const CEvent *pEvent)
{
  int v4; // r1

  v4 = CTimer::m_snTimeInMilliseconds;
  this->m_timer.m_bIsActive = 1;
  this->m_timer.m_iStartTime = v4;
  this->m_timer.m_iDuration = -1;
  return 1;
}

//----- (0035741C) --------------------------------------------------------
void __fastcall CTaskSimplePause::Serialize(CTaskSimplePause *this)
{
  int v2; // r5
  _DWORD *v3; // r6
  _DWORD *v4; // r5
  int v5; // r0

  v2 = (*((int (__fastcall **)(CTaskSimplePause *))this->_vptr$CTask + 5))(this);
  if ( UseDataFence )
    AddDataFence();
  v3 = malloc(4u);
  *v3 = v2;
  CGenericGameStorage::_SaveDataToWorkBuffer(v3, 4);
  free(v3);
  if ( (*((int (__fastcall **)(CTaskSimplePause *))this->_vptr$CTask + 5))(this) == 202 )
  {
    if ( UseDataFence )
      AddDataFence();
    v4 = malloc(4u);
    *v4 = this->m_iPauseTime;
    CGenericGameStorage::_SaveDataToWorkBuffer(v4, 4);
    j_free(v4);
  }
  else
  {
    v5 = (*((int (__fastcall **)(CTaskSimplePause *))this->_vptr$CTask + 5))(this);
    sub_1941C4(202, v5);
  }
}

//----- (003574B4) --------------------------------------------------------
bool __fastcall CTaskSimplePause::ProcessPed(CTaskSimplePause *this, CPed *pPed)
{
  int m_iPauseTime; // r2
  unsigned int v3; // r1
  int m_iStartTime; // r2

  if ( !this->m_timer.m_bIsActive )
  {
    m_iPauseTime = this->m_iPauseTime;
    this->m_timer.m_iStartTime = CTimer::m_snTimeInMilliseconds;
    this->m_timer.m_iDuration = m_iPauseTime;
    this->m_timer.m_bIsActive = 1;
  }
  if ( this->m_timer.m_bIsStopped )
  {
    v3 = CTimer::m_snTimeInMilliseconds;
    this->m_timer.m_bIsStopped = 0;
    this->m_timer.m_iStartTime = v3;
    m_iStartTime = v3;
  }
  else
  {
    m_iStartTime = this->m_timer.m_iStartTime;
    v3 = CTimer::m_snTimeInMilliseconds;
  }
  return m_iStartTime + this->m_timer.m_iDuration <= v3;
}

//----- (00357504) --------------------------------------------------------
void __fastcall CTaskSimpleSay::~CTaskSimpleSay(CTaskSimpleSay *this)
{
  void *v1; // r0

  CTask::~CTask(this);
  sub_197118(v1);
}
// 357510: variable 'v1' is possibly undefined

//----- (00357514) --------------------------------------------------------
CTask *__fastcall CTaskSimpleSay::Clone(const CTaskSimpleSay *this)
{
  CTaskSimple *v2; // r0
  CTask v3; // kr00_8
  CTask *result; // r0

  v2 = (CTaskSimple *)CTask::operator new(0x1Cu);
  v3 = *(CTask *)&this->m_iSayID;
  CTaskSimple::CTaskSimple(v2);
  result[1] = v3;
  LOWORD(result[3]._vptr$CTask) = 0;
  result[2]._vptr$CTask = 0;
  result[2].m_pParent = 0;
  result->_vptr$CTask = (int (**)(void))&off_665784;
  return result;
}
// 35752C: variable 'result' is possibly undefined
// 665784: using guessed type void *off_665784;

//----- (00357544) --------------------------------------------------------
int __fastcall CTaskSimpleSay::GetTaskType(const CTaskSimpleSay *this)
{
  return 301;
}

//----- (0035754A) --------------------------------------------------------
bool __fastcall CTaskSimpleSay::MakeAbortable(
        CTaskSimpleSay *this,
        CPed *pPed,
        const int iPriority,
        const CEvent *pEvent)
{
  return 1;
}

//----- (00357550) --------------------------------------------------------
void __fastcall CTaskSimpleSay::Serialize(CTaskSimpleSay *this)
{
  int v2; // r5
  _DWORD *v3; // r6
  _DWORD *v4; // r5
  _DWORD *v5; // r5
  int v6; // r0

  v2 = (*((int (__fastcall **)(CTaskSimpleSay *))this->_vptr$CTask + 5))(this);
  if ( UseDataFence )
    AddDataFence();
  v3 = malloc(4u);
  *v3 = v2;
  CGenericGameStorage::_SaveDataToWorkBuffer(v3, 4);
  free(v3);
  if ( (*((int (__fastcall **)(CTaskSimpleSay *))this->_vptr$CTask + 5))(this) == 301 )
  {
    if ( UseDataFence )
      AddDataFence();
    v4 = malloc(4u);
    *v4 = this->m_iSayID;
    CGenericGameStorage::_SaveDataToWorkBuffer(v4, 4);
    free(v4);
    if ( UseDataFence )
      AddDataFence();
    v5 = malloc(4u);
    *v5 = this->m_iSayDuration;
    CGenericGameStorage::_SaveDataToWorkBuffer(v5, 4);
    j_free(v5);
  }
  else
  {
    v6 = (*((int (__fastcall **)(CTaskSimpleSay *))this->_vptr$CTask + 5))(this);
    sub_1941C4(301, v6);
  }
}

//----- (0035761C) --------------------------------------------------------
bool __fastcall CTaskSimpleSay::ProcessPed(CTaskSimpleSay *this, CPed *pPed)
{
  int m_iSayDuration; // r2
  bool v4; // r5
  unsigned int v5; // r0
  int m_iStartTime; // r1

  if ( !this->m_timer.m_bIsActive )
  {
    m_iSayDuration = this->m_iSayDuration;
    this->m_timer.m_iStartTime = CTimer::m_snTimeInMilliseconds;
    this->m_timer.m_iDuration = m_iSayDuration;
    this->m_timer.m_bIsActive = 1;
  }
  v4 = 0;
  CPed::Say(pPed, this->m_iSayID, 0, 1.0, 0, 0, 0);
  if ( this->m_timer.m_bIsActive )
  {
    if ( this->m_timer.m_bIsStopped )
    {
      v5 = CTimer::m_snTimeInMilliseconds;
      this->m_timer.m_bIsStopped = 0;
      this->m_timer.m_iStartTime = v5;
      m_iStartTime = v5;
    }
    else
    {
      m_iStartTime = this->m_timer.m_iStartTime;
      v5 = CTimer::m_snTimeInMilliseconds;
    }
    return m_iStartTime + this->m_timer.m_iDuration <= v5;
  }
  return v4;
}

//----- (00357694) --------------------------------------------------------
void __fastcall CTaskSimpleCower::~CTaskSimpleCower(CTaskSimpleCower *this)
{
  void *v1; // r0

  CTaskSimpleAnim::~CTaskSimpleAnim(this);
  sub_197118(v1);
}
// 3576A0: variable 'v1' is possibly undefined

//----- (003576A4) --------------------------------------------------------
CTask *__fastcall CTaskSimpleCower::Clone(const CTaskSimpleCower *this)
{
  CTaskSimpleRunAnim *v1; // r0
  CTask *result; // r0

  v1 = (CTaskSimpleRunAnim *)CTask::operator new(0x20u);
  CTaskSimpleRunAnim::CTaskSimpleRunAnim(v1, ANIM_STD_PED, ANIM_STD_HANDSCOWER, 4.0, 412, "Cower", 0);
  result->_vptr$CTask = (int (**)(void))&off_6657B8;
  return result;
}
// 3576D4: variable 'result' is possibly undefined
// 6657B8: using guessed type void *;
// 676378: using guessed type void *`vtable for'CTaskSimpleCower;

//----- (003576E4) --------------------------------------------------------
int __fastcall CTaskSimpleRunAnim::GetTaskType(const CTaskSimpleRunAnim *this)
{
  return this->m_iTaskType;
}

//----- (003576E8) --------------------------------------------------------
void __fastcall CTaskSimpleCower::Serialize(CTaskSimpleCower *this)
{
  int v2; // r5
  _DWORD *v3; // r6
  int v4; // r0

  v2 = (*((int (__fastcall **)(CTaskSimpleCower *))this->_vptr$CTask + 5))(this);
  if ( UseDataFence )
    AddDataFence();
  v3 = malloc(4u);
  *v3 = v2;
  CGenericGameStorage::_SaveDataToWorkBuffer(v3, 4);
  free(v3);
  if ( (*((int (__fastcall **)(CTaskSimpleCower *))this->_vptr$CTask + 5))(this) != 412 )
  {
    v4 = (*((int (__fastcall **)(CTaskSimpleCower *))this->_vptr$CTask + 5))(this);
    sub_1941C4(412, v4);
  }
}

//----- (00357754) --------------------------------------------------------
bool __fastcall CTaskSimpleCower::IsInterruptable(const CTaskSimpleCower *this, const CPed *a2)
{
  return 0;
}

//----- (00357758) --------------------------------------------------------
void __fastcall CTaskSimpleHandsUp::~CTaskSimpleHandsUp(CTaskSimpleHandsUp *this)
{
  void *v1; // r0

  CTaskSimpleAnim::~CTaskSimpleAnim(this);
  sub_197118(v1);
}
// 357764: variable 'v1' is possibly undefined

//----- (00357768) --------------------------------------------------------
CTask *__fastcall CTaskSimpleHandsUp::Clone(const CTaskSimpleHandsUp *this)
{
  CTaskSimpleRunTimedAnim *v2; // r0
  CTask *result; // r0

  v2 = (CTaskSimpleRunTimedAnim *)CTask::operator new(0x34u);
  CTaskSimpleRunTimedAnim::CTaskSimpleRunTimedAnim(
    v2,
    ANIM_STD_PED,
    ANIM_STD_HANDSUP,
    4.0,
    -4.0,
    this->m_iDuration,
    413,
    "HandsUp",
    0);
  result->_vptr$CTask = (int (**)(void))&off_6657F0;
  return result;
}
// 3577A8: variable 'result' is possibly undefined
// 6657F0: using guessed type void *off_6657F0;
// 676D34: using guessed type void *`vtable for'CTaskSimpleHandsUp;

//----- (003577B8) --------------------------------------------------------
int __fastcall CTaskSimpleRunTimedAnim::GetTaskType(const CTaskSimpleRunTimedAnim *this)
{
  return this->m_iTaskType;
}

//----- (003577BC) --------------------------------------------------------
void __fastcall CTaskSimpleHandsUp::Serialize(CTaskSimpleHandsUp *this)
{
  int v2; // r5
  _DWORD *v3; // r6
  _DWORD *v4; // r5
  int v5; // r0

  v2 = (*((int (__fastcall **)(CTaskSimpleHandsUp *))this->_vptr$CTask + 5))(this);
  if ( UseDataFence )
    AddDataFence();
  v3 = malloc(4u);
  *v3 = v2;
  CGenericGameStorage::_SaveDataToWorkBuffer(v3, 4);
  free(v3);
  if ( (*((int (__fastcall **)(CTaskSimpleHandsUp *))this->_vptr$CTask + 5))(this) == 413 )
  {
    if ( UseDataFence )
      AddDataFence();
    v4 = malloc(4u);
    *v4 = this->m_iDuration;
    CGenericGameStorage::_SaveDataToWorkBuffer(v4, 4);
    j_free(v4);
  }
  else
  {
    v5 = (*((int (__fastcall **)(CTaskSimpleHandsUp *))this->_vptr$CTask + 5))(this);
    sub_1941C4(413, v5);
  }
}

//----- (0035785C) --------------------------------------------------------
bool __fastcall CTaskSimpleHandsUp::IsInterruptable(const CTaskSimpleHandsUp *this, const CPed *a2)
{
  return 0;
}

//----- (00357860) --------------------------------------------------------
void __fastcall CTaskSimpleUseAtm::~CTaskSimpleUseAtm(CTaskSimpleUseAtm *this)
{
  void *v1; // r0

  CTaskSimpleAnim::~CTaskSimpleAnim(this);
  sub_197118(v1);
}
// 35786C: variable 'v1' is possibly undefined

//----- (00357870) --------------------------------------------------------
CTask *__fastcall CTaskSimpleUseAtm::Clone(const CTaskSimpleUseAtm *this)
{
  CTaskSimpleRunAnim *v1; // r0
  CTask *result; // r0

  v1 = (CTaskSimpleRunAnim *)CTask::operator new(0x20u);
  CTaskSimpleRunAnim::CTaskSimpleRunAnim(v1, ANIM_STD_PED, ANIM_STD_ATM, 4.0, 420, "UseAtm", 0);
  result->_vptr$CTask = (int (**)(void))&off_665828;
  return result;
}
// 3578A0: variable 'result' is possibly undefined
// 665828: using guessed type void *;
// 679BB0: using guessed type void *`vtable for'CTaskSimpleUseAtm;

//----- (003578B0) --------------------------------------------------------
void __fastcall CTaskSimpleUseAtm::Serialize(CTaskSimpleUseAtm *this)
{
  int v2; // r5
  _DWORD *v3; // r6
  int v4; // r0

  v2 = (*((int (__fastcall **)(CTaskSimpleUseAtm *))this->_vptr$CTask + 5))(this);
  if ( UseDataFence )
    AddDataFence();
  v3 = malloc(4u);
  *v3 = v2;
  CGenericGameStorage::_SaveDataToWorkBuffer(v3, 4);
  free(v3);
  if ( (*((int (__fastcall **)(CTaskSimpleUseAtm *))this->_vptr$CTask + 5))(this) != 420 )
  {
    v4 = (*((int (__fastcall **)(CTaskSimpleUseAtm *))this->_vptr$CTask + 5))(this);
    sub_1941C4(420, v4);
  }
}

//----- (0035791C) --------------------------------------------------------
bool __fastcall CTaskSimpleUseAtm::IsInterruptable(const CTaskSimpleUseAtm *this, const CPed *a2)
{
  return 0;
}

//----- (00357920) --------------------------------------------------------
void __fastcall CTaskSimpleScratchHead::~CTaskSimpleScratchHead(CTaskSimpleScratchHead *this)
{
  void *v1; // r0

  CTaskSimpleAnim::~CTaskSimpleAnim(this);
  sub_197118(v1);
}
// 35792C: variable 'v1' is possibly undefined

//----- (00357930) --------------------------------------------------------
CTask *__fastcall CTaskSimpleScratchHead::Clone(const CTaskSimpleScratchHead *this)
{
  CTaskSimpleRunAnim *v1; // r0
  CTask *result; // r0

  v1 = (CTaskSimpleRunAnim *)CTask::operator new(0x20u);
  CTaskSimpleRunAnim::CTaskSimpleRunAnim(v1, ANIM_STD_PED, ANIM_STD_XPRESS_SCRATCH, 4.0, 421, "ScratchHead", 0);
  result->_vptr$CTask = (int (**)(void))&off_665860;
  return result;
}
// 357960: variable 'result' is possibly undefined
// 665860: using guessed type void *off_665860;
// 6784D8: using guessed type void *`vtable for'CTaskSimpleScratchHead;

//----- (00357970) --------------------------------------------------------
void __fastcall CTaskSimpleScratchHead::Serialize(CTaskSimpleScratchHead *this)
{
  int v2; // r5
  _DWORD *v3; // r6
  int v4; // r0

  v2 = (*((int (__fastcall **)(CTaskSimpleScratchHead *))this->_vptr$CTask + 5))(this);
  if ( UseDataFence )
    AddDataFence();
  v3 = malloc(4u);
  *v3 = v2;
  CGenericGameStorage::_SaveDataToWorkBuffer(v3, 4);
  free(v3);
  if ( (*((int (__fastcall **)(CTaskSimpleScratchHead *))this->_vptr$CTask + 5))(this) != 421 )
  {
    v4 = (*((int (__fastcall **)(CTaskSimpleScratchHead *))this->_vptr$CTask + 5))(this);
    sub_1941C4(421, v4);
  }
}

//----- (003579E0) --------------------------------------------------------
bool __fastcall CTaskSimpleScratchHead::IsInterruptable(const CTaskSimpleScratchHead *this, const CPed *a2)
{
  return 0;
}

//----- (003579E4) --------------------------------------------------------
void __fastcall CTaskSimpleLookAbout::~CTaskSimpleLookAbout(CTaskSimpleLookAbout *this)
{
  void *v1; // r0

  CTaskSimpleAnim::~CTaskSimpleAnim(this);
  sub_197118(v1);
}
// 3579F0: variable 'v1' is possibly undefined

//----- (003579F4) --------------------------------------------------------
CTask *__fastcall CTaskSimpleLookAbout::Clone(const CTaskSimpleLookAbout *this)
{
  CTaskSimpleRunTimedAnim *v2; // r0
  CTask *result; // r0

  v2 = (CTaskSimpleRunTimedAnim *)CTask::operator new(0x34u);
  CTaskSimpleRunTimedAnim::CTaskSimpleRunTimedAnim(
    v2,
    ANIM_STD_PED,
    ANIM_STD_IDLE_HBHB,
    4.0,
    -4.0,
    this->m_iDuration,
    422,
    "LookAbout",
    0);
  result->_vptr$CTask = (int (**)(void))&off_665898;
  return result;
}
// 357A34: variable 'result' is possibly undefined
// 665898: using guessed type void *;
// 677568: using guessed type void *`vtable for'CTaskSimpleLookAbout;

//----- (00357A44) --------------------------------------------------------
void __fastcall CTaskSimpleLookAbout::Serialize(CTaskSimpleLookAbout *this)
{
  int v2; // r5
  _DWORD *v3; // r6
  _DWORD *v4; // r5
  int v5; // r0

  v2 = (*((int (__fastcall **)(CTaskSimpleLookAbout *))this->_vptr$CTask + 5))(this);
  if ( UseDataFence )
    AddDataFence();
  v3 = malloc(4u);
  *v3 = v2;
  CGenericGameStorage::_SaveDataToWorkBuffer(v3, 4);
  free(v3);
  if ( (*((int (__fastcall **)(CTaskSimpleLookAbout *))this->_vptr$CTask + 5))(this) == 422 )
  {
    if ( UseDataFence )
      AddDataFence();
    v4 = malloc(4u);
    *v4 = this->m_iDuration;
    CGenericGameStorage::_SaveDataToWorkBuffer(v4, 4);
    j_free(v4);
  }
  else
  {
    v5 = (*((int (__fastcall **)(CTaskSimpleLookAbout *))this->_vptr$CTask + 5))(this);
    sub_1941C4(422, v5);
  }
}

//----- (00357AE0) --------------------------------------------------------
bool __fastcall CTaskSimpleLookAbout::IsInterruptable(const CTaskSimpleLookAbout *this, const CPed *a2)
{
  return 0;
}

//----- (00357AF0) --------------------------------------------------------
int32 __fastcall CTheScripts::AddScriptEffectSystem(FxSystem_c *pNewFXSystem)
{
  script_effect_struct *v1; // r2
  unsigned int v2; // r1
  int v3; // r3
  int bUsed; // t1

  v1 = CTheScripts::ScriptEffectSystemArray;
  v2 = -1;
  do
  {
    bUsed = v1->bUsed;
    ++v1;
    v3 = bUsed;
    ++v2;
  }
  while ( v2 <= 0x1F && v3 );
  v1[-1].pFXSystem = pNewFXSystem;
  v1[-1].bUsed = 1;
  return sub_19B184(v2, 1u);
}

//----- (00357B20) --------------------------------------------------------
void __fastcall CTheScripts::RemoveScriptEffectSystem(int32 ScriptEffectSystemIndex)
{
  int32 ActualScriptThingIndex; // r0

  ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptEffectSystemIndex, 1u);
  if ( ActualScriptThingIndex != -1 )
  {
    CTheScripts::ScriptEffectSystemArray[ActualScriptThingIndex].bUsed = 0;
    CTheScripts::ScriptEffectSystemArray[ActualScriptThingIndex].pFXSystem = 0;
  }
}
// 67982C: using guessed type script_effect_struct (*CTheScripts::ScriptEffectSystemArray)[32];

//----- (00357B48) --------------------------------------------------------
int32 __fastcall CTheScripts::AddScriptSearchLight(
        float NewSourceX,
        float NewSourceY,
        float NewSourceZ,
        CEntity *pSourceEntity,
        float NewPointAtX,
        float NewPointAtY,
        float NewPointAtZ,
        float NewRadius,
        float NewSourceRadius)
{
  script_effect_struct *v13; // r0
  unsigned int v14; // r1
  CEntity **p_pFXSystem; // r4
  unsigned int v16; // r6
  bool v17; // zf
  CEntity *v18; // r0
  CEntity **v19; // r2
  CEntity **v20; // r2
  CEntity *v21; // r0
  CEntity *v22; // r0
  CEntity *v23; // r0
  CEntity *v24; // r0

  v13 = &CTheScripts::ScriptEffectSystemArray[25];
  v14 = 0;
  do
  {
    p_pFXSystem = (CEntity **)&v13[15].pFXSystem;
    v16 = v14 + 1;
    if ( v14 > 7 )
      break;
    ++v14;
    v17 = v13[7].bUsed == 0;
    v13 = (script_effect_struct *)((char *)v13 + 124);
  }
  while ( !v17 );
  v18 = p_pFXSystem[1];
  *(p_pFXSystem - 17) = (CEntity *)-2147418111;
  v19 = p_pFXSystem - 4;
  *((float *)p_pFXSystem - 15) = NewSourceX;
  *((float *)p_pFXSystem - 14) = NewSourceY;
  *((float *)p_pFXSystem - 13) = NewSourceZ;
  *((float *)p_pFXSystem - 12) = NewPointAtX;
  *((float *)p_pFXSystem - 11) = NewPointAtY;
  *((float *)p_pFXSystem - 10) = NewPointAtZ;
  *((float *)p_pFXSystem - 9) = NewRadius;
  *((float *)p_pFXSystem - 8) = NewSourceRadius;
  *(_QWORD *)v19 = 0LL;
  *((_QWORD *)v19 + 1) = 0LL;
  v20 = p_pFXSystem - 7;
  *(_QWORD *)v20 = 0LL;
  *((_QWORD *)v20 + 1) = 0LL;
  if ( v18 )
    CEntity::CleanUpOldReference(v18, p_pFXSystem + 1);
  v21 = *p_pFXSystem;
  p_pFXSystem[1] = 0;
  if ( v21 )
    CEntity::CleanUpOldReference(v21, p_pFXSystem);
  *p_pFXSystem = pSourceEntity;
  if ( pSourceEntity )
    CEntity::RegisterReference(pSourceEntity, p_pFXSystem);
  v22 = p_pFXSystem[2];
  if ( v22 )
    CEntity::CleanUpOldReference(v22, p_pFXSystem + 2);
  v23 = p_pFXSystem[3];
  p_pFXSystem[2] = 0;
  if ( v23 )
    CEntity::CleanUpOldReference(v23, p_pFXSystem + 3);
  v24 = p_pFXSystem[4];
  p_pFXSystem[3] = 0;
  if ( v24 )
    CEntity::CleanUpOldReference(v24, p_pFXSystem + 4);
  p_pFXSystem[4] = 0;
  ++CTheScripts::NumberOfScriptSearchLights;
  return sub_19B184(v16 - 1, 2u);
}

//----- (00357C58) --------------------------------------------------------
void __fastcall CTheScripts::RemoveScriptSearchLight(int32 ScriptSearchLightIndex)
{
  int32 ActualScriptThingIndex; // r0
  int32 v2; // r5
  script_searchlight_struct *v3; // r1
  CEntity *pSearchLightTargetEntity; // r0
  CEntity **p_pSearchLightTargetEntity; // r4
  script_searchlight_struct *v6; // r4
  CEntity *v7; // r0
  CEntity **p_pSearchLightSourceEntity; // r4
  CEntity *pSearchLightSourceEntity; // t1
  script_searchlight_struct *v10; // r4
  CEntity *v11; // r0
  CEntity **p_pSearchLightBase; // r4
  CObject *pSearchLightBase; // t1
  script_searchlight_struct *v14; // r4
  CEntity *v15; // r0
  CEntity **p_pSearchLightHousing; // r4
  CObject *pSearchLightHousing; // t1
  script_searchlight_struct *v18; // r4
  CEntity *v19; // r0
  CEntity **p_pSearchLightBulb; // r4
  CObject *pSearchLightBulb; // t1

  ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptSearchLightIndex, 2u);
  if ( ActualScriptThingIndex != -1 )
  {
    v2 = ActualScriptThingIndex;
    v3 = &CTheScripts::ScriptSearchLightArray[ActualScriptThingIndex];
    p_pSearchLightTargetEntity = &v3->pSearchLightTargetEntity;
    pSearchLightTargetEntity = v3->pSearchLightTargetEntity;
    *(_QWORD *)&v3->SearchLightPoint2.x = 0LL;
    *(_QWORD *)&v3->SearchLightPoint2.z = 0LL;
    *(_QWORD *)&v3->SearchLightPoint1.x = 0LL;
    *(_QWORD *)&v3->SearchLightPoint1.z = 0LL;
    *(_QWORD *)&v3->SearchLightSource.x = 0LL;
    *(_QWORD *)&v3->SearchLightSource.z = 0LL;
    *(_DWORD *)&v3->bUsed = 0x10000;
    v3 = (script_searchlight_struct *)((char *)v3 + 24);
    *(_QWORD *)&v3->bUsed = 0LL;
    *(_QWORD *)&v3->SearchLightSource.x = 0LL;
    if ( pSearchLightTargetEntity )
      CEntity::CleanUpOldReference(pSearchLightTargetEntity, p_pSearchLightTargetEntity);
    *p_pSearchLightTargetEntity = 0;
    v6 = &CTheScripts::ScriptSearchLightArray[v2];
    pSearchLightSourceEntity = v6->pSearchLightSourceEntity;
    p_pSearchLightSourceEntity = &v6->pSearchLightSourceEntity;
    v7 = pSearchLightSourceEntity;
    if ( pSearchLightSourceEntity )
      CEntity::CleanUpOldReference(v7, p_pSearchLightSourceEntity);
    *p_pSearchLightSourceEntity = 0;
    v10 = &CTheScripts::ScriptSearchLightArray[v2];
    pSearchLightBase = v10->pSearchLightBase;
    p_pSearchLightBase = &v10->pSearchLightBase;
    v11 = pSearchLightBase;
    if ( pSearchLightBase )
      CEntity::CleanUpOldReference(v11, p_pSearchLightBase);
    *p_pSearchLightBase = 0;
    v14 = &CTheScripts::ScriptSearchLightArray[v2];
    pSearchLightHousing = v14->pSearchLightHousing;
    p_pSearchLightHousing = &v14->pSearchLightHousing;
    v15 = pSearchLightHousing;
    if ( pSearchLightHousing )
      CEntity::CleanUpOldReference(v15, p_pSearchLightHousing);
    *p_pSearchLightHousing = 0;
    v18 = &CTheScripts::ScriptSearchLightArray[v2];
    pSearchLightBulb = v18->pSearchLightBulb;
    p_pSearchLightBulb = &v18->pSearchLightBulb;
    v19 = pSearchLightBulb;
    if ( pSearchLightBulb )
      CEntity::CleanUpOldReference(v19, p_pSearchLightBulb);
    *p_pSearchLightBulb = 0;
    --CTheScripts::NumberOfScriptSearchLights;
  }
}

//----- (00357D4C) --------------------------------------------------------
Bool8 __fastcall CTheScripts::IsPointWithinSearchLight(CVector *Position, Int32 ActualSearchlightIndex)
{
  script_searchlight_struct *v3; // r6
  __int64 v4; // d16
  RwReal z; // r0
  float v6; // r4
  float v7; // r0
  float v8; // s0
  float v9; // s2
  float v10; // s4
  CVector v12; // [sp+0h] [bp-30h] BYREF
  CVector v13; // [sp+10h] [bp-20h] BYREF

  v3 = &CTheScripts::ScriptSearchLightArray[ActualSearchlightIndex];
  v4 = *(_QWORD *)&v3->vecEllipseForward.x;
  v13.z = v3->vecEllipseForward.z;
  z = v3->vecEllipseSide.z;
  *(_QWORD *)&v13.x = v4;
  v12.z = z;
  *(_QWORD *)&v12.x = *(_QWORD *)&v3->vecEllipseSide.x;
  v6 = CVector::NormaliseAndMag(&v13);
  v7 = CVector::NormaliseAndMag(&v12);
  v8 = Position->x - v3->vecEllipseCentre.x;
  v9 = Position->y - v3->vecEllipseCentre.y;
  v10 = Position->z - v3->vecEllipseCentre.z;
  return (float)((float)((float)((float)((float)((float)(v8 * v13.x) + (float)(v9 * v13.y)) + (float)(v10 * v13.z)) / v6)
                       * (float)((float)((float)((float)(v8 * v13.x) + (float)(v9 * v13.y)) + (float)(v10 * v13.z)) / v6))
               + (float)((float)((float)((float)((float)(v8 * v12.x) + (float)(v9 * v12.y)) + (float)(v10 * v12.z)) / v7)
                       * (float)((float)((float)((float)(v8 * v12.x) + (float)(v9 * v12.y)) + (float)(v10 * v12.z)) / v7))) <= 1.0;
}

//----- (00357E2C) --------------------------------------------------------
Bool8 __fastcall CTheScripts::IsEntityWithinSearchLight(int32 ScriptSearchLightIndex, CEntity *pEntityToCheck)
{
  int32 ActualScriptThingIndex; // r0
  int32 v4; // r0
  CMatrix *m_pMat; // r2
  CSimpleTransform *p_tx; // r3
  float x; // s16
  script_searchlight_struct *v8; // r5
  float y; // s18
  float z; // s20
  __int64 v11; // d16
  RwReal v12; // r0
  float v13; // r4
  float v14; // r0
  float v15; // s0
  float v16; // s2
  float v17; // s4
  CVector v19; // [sp+0h] [bp-40h] BYREF
  CVector v20; // [sp+10h] [bp-30h] BYREF

  ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptSearchLightIndex, 2u);
  if ( ActualScriptThingIndex < 0 )
    return 0;
  v4 = ActualScriptThingIndex;
  m_pMat = pEntityToCheck->m_pMat;
  p_tx = (CSimpleTransform *)&m_pMat->tx;
  if ( !m_pMat )
    p_tx = &pEntityToCheck->m_transform;
  x = p_tx->m_translate.x;
  v8 = &CTheScripts::ScriptSearchLightArray[v4];
  y = p_tx->m_translate.y;
  z = p_tx->m_translate.z;
  v11 = *(_QWORD *)&v8->vecEllipseForward.x;
  v20.z = v8->vecEllipseForward.z;
  v12 = v8->vecEllipseSide.z;
  *(_QWORD *)&v20.x = v11;
  v19.z = v12;
  *(_QWORD *)&v19.x = *(_QWORD *)&v8->vecEllipseSide.x;
  v13 = CVector::NormaliseAndMag(&v20);
  v14 = CVector::NormaliseAndMag(&v19);
  v15 = x - v8->vecEllipseCentre.x;
  v16 = y - v8->vecEllipseCentre.y;
  v17 = z - v8->vecEllipseCentre.z;
  return (float)((float)((float)((float)((float)((float)(v15 * v20.x) + (float)(v16 * v20.y)) + (float)(v17 * v20.z))
                               / v13)
                       * (float)((float)((float)((float)(v15 * v20.x) + (float)(v16 * v20.y)) + (float)(v17 * v20.z))
                               / v13))
               + (float)((float)((float)((float)((float)(v15 * v19.x) + (float)(v16 * v19.y)) + (float)(v17 * v19.z))
                               / v14)
                       * (float)((float)((float)((float)(v15 * v19.x) + (float)(v16 * v19.y)) + (float)(v17 * v19.z))
                               / v14))) <= 1.0;
}

//----- (00357F24) --------------------------------------------------------
Bool8 __fastcall CTheScripts::IsEntityWithinAnySearchLight(CEntity *pEntityToCheck, Int32 *pSearchLightIndex)
{
  CMatrix *m_pMat; // r2
  script_searchlight_struct *v4; // r5
  int v5; // r6
  CSimpleTransform *p_tx; // r1
  float x; // s16
  float y; // s18
  float z; // s20
  __int64 v10; // d16
  __int64 v11; // d16
  float v12; // r4
  float v13; // r0
  float v14; // s0
  float v15; // s2
  float v16; // s4
  CVector v19; // [sp+0h] [bp-58h] BYREF
  CVector v20; // [sp+10h] [bp-48h] BYREF

  *pSearchLightIndex = -1;
  m_pMat = pEntityToCheck->m_pMat;
  v4 = CTheScripts::ScriptSearchLightArray;
  v5 = 0;
  p_tx = (CSimpleTransform *)&m_pMat->tx;
  if ( !m_pMat )
    p_tx = &pEntityToCheck->m_transform;
  x = p_tx->m_translate.x;
  y = p_tx->m_translate.y;
  z = p_tx->m_translate.z;
  while ( 1 )
  {
    if ( v4->bUsed )
    {
      v10 = *(_QWORD *)&v4->vecEllipseForward.x;
      v20.z = v4->vecEllipseForward.z;
      *(_QWORD *)&v20.x = v10;
      v11 = *(_QWORD *)&v4->vecEllipseSide.x;
      v19.z = v4->vecEllipseSide.z;
      *(_QWORD *)&v19.x = v11;
      v12 = CVector::NormaliseAndMag(&v20);
      v13 = CVector::NormaliseAndMag(&v19);
      v14 = x - v4->vecEllipseCentre.x;
      v15 = y - v4->vecEllipseCentre.y;
      v16 = z - v4->vecEllipseCentre.z;
      if ( (float)((float)((float)((float)((float)((float)(v14 * v20.x) + (float)(v15 * v20.y)) + (float)(v16 * v20.z))
                                 / v12)
                         * (float)((float)((float)((float)(v14 * v20.x) + (float)(v15 * v20.y)) + (float)(v16 * v20.z))
                                 / v12))
                 + (float)((float)((float)((float)((float)(v14 * v19.x) + (float)(v15 * v19.y)) + (float)(v16 * v19.z))
                                 / v13)
                         * (float)((float)((float)((float)(v14 * v19.x) + (float)(v15 * v19.y)) + (float)(v16 * v19.z))
                                 / v13))) <= 1.0 )
        break;
    }
    ++v4;
    if ( v5++ >= 7 )
      return 0;
  }
  *pSearchLightIndex = v5 | (v4->ReferenceIndex << 16);
  return 1;
}

//----- (0035803C) --------------------------------------------------------
void __fastcall CTheScripts::MoveSearchLightBetweenTwoPoints(
        int32 ScriptSearchLightIndex,
        float X1,
        float Y1,
        float Z1,
        float X2,
        float Y2,
        float Z2,
        float Speed)
{
  int32 ActualScriptThingIndex; // r0
  float v12; // s12
  script_searchlight_struct *v13; // r4
  char v14; // r1
  CEntity *v15; // r0
  CEntity **p_pSearchLightTargetEntity; // r4
  CEntity *pSearchLightTargetEntity; // t1
  float v18; // s14
  float v19; // s1

  ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptSearchLightIndex, 2u);
  if ( ActualScriptThingIndex >= 0 )
  {
    v12 = X1;
    v13 = &CTheScripts::ScriptSearchLightArray[ActualScriptThingIndex];
    v14 = -126;
    pSearchLightTargetEntity = v13->pSearchLightTargetEntity;
    p_pSearchLightTargetEntity = &v13->pSearchLightTargetEntity;
    v15 = pSearchLightTargetEntity;
    v18 = *((float *)p_pSearchLightTargetEntity - 13);
    v19 = *((float *)p_pSearchLightTargetEntity - 12);
    *((float *)p_pSearchLightTargetEntity - 8) = v12;
    *((float *)p_pSearchLightTargetEntity - 7) = Y1;
    *((float *)p_pSearchLightTargetEntity - 6) = Z1;
    *((float *)p_pSearchLightTargetEntity - 5) = X2;
    *((float *)p_pSearchLightTargetEntity - 4) = Y2;
    *((float *)p_pSearchLightTargetEntity - 3) = Z2;
    *((float *)p_pSearchLightTargetEntity - 2) = Speed;
    if ( (float)((float)((float)(v18 - v12) * (float)(v18 - v12)) + (float)((float)(v19 - Y1) * (float)(v19 - Y1))) <= (float)((float)((float)(v18 - X2) * (float)(v18 - X2)) + (float)((float)(v19 - Y2) * (float)(v19 - Y2))) )
      v14 = -127;
    *((_BYTE *)p_pSearchLightTargetEntity - 69) = v14;
    if ( v15 )
      CEntity::CleanUpOldReference(v15, p_pSearchLightTargetEntity);
    *p_pSearchLightTargetEntity = 0;
  }
}

//----- (003580FC) --------------------------------------------------------
void __fastcall CTheScripts::MoveSearchLightToEntity(
        int32 ScriptSearchLightIndex,
        CEntity *pNewSearchLightTargetEntity,
        float Speed)
{
  int32 ActualScriptThingIndex; // r0
  float v6; // s0
  script_searchlight_struct *v7; // r5
  CEntity *v8; // r0
  CEntity **p_pSearchLightTargetEntity; // r5
  CEntity *pSearchLightTargetEntity; // t1
  CEntity **v11; // r1

  ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptSearchLightIndex, 2u);
  if ( ActualScriptThingIndex >= 0 )
  {
    v6 = Speed;
    v7 = &CTheScripts::ScriptSearchLightArray[ActualScriptThingIndex];
    pSearchLightTargetEntity = v7->pSearchLightTargetEntity;
    p_pSearchLightTargetEntity = &v7->pSearchLightTargetEntity;
    v8 = pSearchLightTargetEntity;
    *(p_pSearchLightTargetEntity - 4) = 0;
    *(p_pSearchLightTargetEntity - 3) = 0;
    *((_BYTE *)p_pSearchLightTargetEntity - 69) = -125;
    v11 = p_pSearchLightTargetEntity - 8;
    *((float *)p_pSearchLightTargetEntity - 2) = v6;
    *(_QWORD *)v11 = 0LL;
    *((_QWORD *)v11 + 1) = 0LL;
    if ( pSearchLightTargetEntity )
      CEntity::CleanUpOldReference(v8, p_pSearchLightTargetEntity);
    *p_pSearchLightTargetEntity = pNewSearchLightTargetEntity;
    sub_196050(pNewSearchLightTargetEntity, p_pSearchLightTargetEntity);
  }
}

//----- (00358160) --------------------------------------------------------
void __fastcall CTheScripts::MoveSearchLightToPointAndStop(
        int32 ScriptSearchLightIndex,
        float X1,
        float Y1,
        float Z1,
        float Speed)
{
  int32 ActualScriptThingIndex; // r0
  float v9; // s6
  script_searchlight_struct *v10; // r4
  CEntity *v11; // r0
  CEntity **p_pSearchLightTargetEntity; // r4
  CEntity *pSearchLightTargetEntity; // t1

  ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptSearchLightIndex, 2u);
  if ( ActualScriptThingIndex >= 0 )
  {
    v9 = X1;
    v10 = &CTheScripts::ScriptSearchLightArray[ActualScriptThingIndex];
    pSearchLightTargetEntity = v10->pSearchLightTargetEntity;
    p_pSearchLightTargetEntity = &v10->pSearchLightTargetEntity;
    v11 = pSearchLightTargetEntity;
    *((float *)p_pSearchLightTargetEntity - 8) = v9;
    *((float *)p_pSearchLightTargetEntity - 7) = Y1;
    *((float *)p_pSearchLightTargetEntity - 6) = Z1;
    *(p_pSearchLightTargetEntity - 5) = 0;
    *(p_pSearchLightTargetEntity - 4) = 0;
    *(p_pSearchLightTargetEntity - 3) = 0;
    *((float *)p_pSearchLightTargetEntity - 2) = Speed;
    *((_BYTE *)p_pSearchLightTargetEntity - 69) = -124;
    if ( pSearchLightTargetEntity )
      CEntity::CleanUpOldReference(v11, p_pSearchLightTargetEntity);
    *p_pSearchLightTargetEntity = 0;
  }
}

//----- (003581D0) --------------------------------------------------------
void __fastcall CTheScripts::AttachSearchlightToSearchlightObject(
        int32 ScriptSearchLightIndex,
        CObject *pBaseObject,
        CObject *pHousingObject,
        CObject *pBulbObject,
        float OffsetX,
        float OffsetY,
        float OffsetZ)
{
  int32 ActualScriptThingIndex; // r0
  int32 v11; // r5
  script_searchlight_struct *v12; // r4
  CEntity *v13; // r0
  CEntity **p_pSearchLightSourceEntity; // r4
  CEntity *pSearchLightSourceEntity; // t1
  script_searchlight_struct *v16; // r4
  CEntity *v17; // r0
  CEntity **p_pSearchLightBase; // r4
  CObject *pSearchLightBase; // t1
  script_searchlight_struct *v20; // r4
  CEntity *v21; // r0
  CEntity **p_pSearchLightHousing; // r4
  CObject *pSearchLightHousing; // t1
  script_searchlight_struct *v24; // r4
  CEntity *v25; // r0
  CEntity **p_pSearchLightBulb; // r4
  CObject *pSearchLightBulb; // t1

  ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptSearchLightIndex, 2u);
  if ( ActualScriptThingIndex >= 0 )
  {
    v11 = ActualScriptThingIndex;
    v12 = &CTheScripts::ScriptSearchLightArray[ActualScriptThingIndex];
    pSearchLightSourceEntity = v12->pSearchLightSourceEntity;
    p_pSearchLightSourceEntity = &v12->pSearchLightSourceEntity;
    v13 = pSearchLightSourceEntity;
    *((float *)p_pSearchLightSourceEntity - 15) = OffsetX;
    *((float *)p_pSearchLightSourceEntity - 14) = OffsetY;
    *((float *)p_pSearchLightSourceEntity - 13) = OffsetZ;
    if ( pSearchLightSourceEntity )
      CEntity::CleanUpOldReference(v13, p_pSearchLightSourceEntity);
    *p_pSearchLightSourceEntity = 0;
    v16 = &CTheScripts::ScriptSearchLightArray[v11];
    pSearchLightBase = v16->pSearchLightBase;
    p_pSearchLightBase = &v16->pSearchLightBase;
    v17 = pSearchLightBase;
    if ( pSearchLightBase )
      CEntity::CleanUpOldReference(v17, p_pSearchLightBase);
    *p_pSearchLightBase = pBaseObject;
    if ( pBaseObject )
      CEntity::RegisterReference(pBaseObject, p_pSearchLightBase);
    v20 = &CTheScripts::ScriptSearchLightArray[v11];
    pSearchLightHousing = v20->pSearchLightHousing;
    p_pSearchLightHousing = &v20->pSearchLightHousing;
    v21 = pSearchLightHousing;
    if ( pSearchLightHousing )
      CEntity::CleanUpOldReference(v21, p_pSearchLightHousing);
    *p_pSearchLightHousing = pHousingObject;
    if ( pHousingObject )
      CEntity::RegisterReference(pHousingObject, p_pSearchLightHousing);
    v24 = &CTheScripts::ScriptSearchLightArray[v11];
    pSearchLightBulb = v24->pSearchLightBulb;
    p_pSearchLightBulb = &v24->pSearchLightBulb;
    v25 = pSearchLightBulb;
    if ( pSearchLightBulb )
      CEntity::CleanUpOldReference(v25, p_pSearchLightBulb);
    *p_pSearchLightBulb = pBulbObject;
    if ( pBulbObject )
      sub_196050(pBulbObject, p_pSearchLightBulb);
  }
}

//----- (003582B8) --------------------------------------------------------
void CTheScripts::ProcessAllSearchLights()
{
  int i; // r8
  script_searchlight_struct *v1; // r0
  int SearchLightState; // r1
  script_searchlight_struct *v3; // r4
  RwReal v4; // s0
  RwReal v5; // s4
  float v6; // s8
  float MoveSpeed; // s0
  script_searchlight_struct *v8; // r1
  __int64 v9; // d16
  char v10; // r1
  CEntity *pSearchLightTargetEntity; // r1
  CMatrix *m_pMat; // r2
  float *p_tx; // r0
  RwReal v14; // s0
  RwReal v15; // s4
  float v16; // s8
  float v17; // s0
  __int64 v18; // d16
  script_searchlight_struct *v19; // r1
  script_searchlight_struct *v20; // r5
  RwReal v21; // s0
  RwReal v22; // s4
  float v23; // s8
  float v24; // s0
  float v25; // s6
  RwReal v26; // s0
  RwReal v27; // s2
  RwReal v28; // s4
  float v29; // s6
  RwReal v30; // s0
  float v31; // s12
  RwReal v32; // s4
  float v33; // s6
  RwReal v34; // s0
  RwReal v35; // s2
  RwReal v36; // s4
  float x; // s6
  script_searchlight_struct *v38; // r1
  __int64 v39; // d16
  script_searchlight_struct *v40; // r1
  __int64 v41; // d16
  CObject *pSearchLightBulb; // r0
  CMatrix *v43; // r1
  float *p_x; // r2
  RwReal v45; // s0
  RwReal v46; // s4
  float v47; // s16
  float y; // s18
  float v49; // r5
  float v50; // r6
  CMatrix *v51; // r0
  float tx; // s16
  float ty; // s18
  float tz; // s20
  CMatrix *v55; // r0
  float v56; // s2
  float v57; // s4
  CObject *v58; // r2
  RwObject_0 *m_pRwObject; // r0
  char *parent; // r1
  const CMatrix *v61; // r0
  RwMatrix *v62; // r1
  CMatrix *v63; // r0
  float v64; // s2
  float v65; // s4
  CObject *pSearchLightHousing; // r2
  RwObject_0 *v67; // r0
  char *v68; // r1
  const CMatrix *v69; // r0
  RwMatrix *v70; // r1
  CVector v71; // [sp+2Ch] [bp-44h] BYREF

  for ( i = 0; i != 8; ++i )
  {
    if ( CTheScripts::ScriptSearchLightArray[i].bUsed )
    {
      v1 = &CTheScripts::ScriptSearchLightArray[i];
      SearchLightState = (char)CTheScripts::ScriptSearchLightArray[i].SearchLightState;
      if ( SearchLightState <= -1 )
      {
        switch ( SearchLightState & 0x7F )
        {
          case 1:
            v3 = &CTheScripts::ScriptSearchLightArray[i];
            v4 = CTheScripts::ScriptSearchLightArray[i].SearchLightPoint1.x
               - CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.x;
            v5 = CTheScripts::ScriptSearchLightArray[i].SearchLightPoint1.z
               - CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.z;
            v6 = v4 * v4;
            v71.y = CTheScripts::ScriptSearchLightArray[i].SearchLightPoint1.y
                  - CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.y;
            v71.x = v4;
            MoveSpeed = CTheScripts::ScriptSearchLightArray[i].MoveSpeed;
            v71.z = v5;
            if ( sqrtf((float)(v6 + (float)(v71.y * v71.y)) + (float)(v5 * v5)) > MoveSpeed )
              goto LABEL_14;
            v8 = &CTheScripts::ScriptSearchLightArray[i];
            v9 = *(_QWORD *)&CTheScripts::ScriptSearchLightArray[i].SearchLightPoint1.x;
            v8->SearchLightPointAt.z = CTheScripts::ScriptSearchLightArray[i].SearchLightPoint1.z;
            *(_QWORD *)&v8->SearchLightPointAt.x = v9;
            v10 = -126;
            goto LABEL_17;
          case 2:
            v3 = &CTheScripts::ScriptSearchLightArray[i];
            v30 = CTheScripts::ScriptSearchLightArray[i].SearchLightPoint2.x
                - CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.x;
            v31 = CTheScripts::ScriptSearchLightArray[i].MoveSpeed;
            v32 = CTheScripts::ScriptSearchLightArray[i].SearchLightPoint2.z
                - CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.z;
            v71.y = CTheScripts::ScriptSearchLightArray[i].SearchLightPoint2.y
                  - CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.y;
            v71.x = v30;
            v71.z = v32;
            if ( sqrtf((float)((float)(v30 * v30) + (float)(v71.y * v71.y)) + (float)(v32 * v32)) > v31 )
              goto LABEL_14;
            v40 = &CTheScripts::ScriptSearchLightArray[i];
            v41 = *(_QWORD *)&CTheScripts::ScriptSearchLightArray[i].SearchLightPoint2.x;
            v40->SearchLightPointAt.z = CTheScripts::ScriptSearchLightArray[i].SearchLightPoint2.z;
            *(_QWORD *)&v40->SearchLightPointAt.x = v41;
            v10 = -127;
LABEL_17:
            v1->SearchLightState = v10;
            break;
          case 3:
            v3 = &CTheScripts::ScriptSearchLightArray[i];
            pSearchLightTargetEntity = CTheScripts::ScriptSearchLightArray[i].pSearchLightTargetEntity;
            m_pMat = pSearchLightTargetEntity->m_pMat;
            p_tx = &m_pMat->tx;
            if ( !m_pMat )
              p_tx = &pSearchLightTargetEntity->m_transform.m_translate.x;
            v14 = *p_tx - CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.x;
            v15 = p_tx[2] - CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.z;
            v16 = v14 * v14;
            v71.y = p_tx[1] - CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.y;
            v71.x = v14;
            v17 = v3->MoveSpeed;
            v71.z = v15;
            if ( sqrtf((float)(v16 + (float)(v71.y * v71.y)) + (float)(v15 * v15)) > v17 )
            {
LABEL_14:
              CVector::Normalise(&v71);
              v33 = v3->MoveSpeed;
              v34 = v33 * v71.x;
              v35 = v33 * v71.y;
              v36 = v33 * v71.z;
              x = v3->SearchLightPointAt.x;
              v71.x = v34;
              v71.y = v35;
              v71.z = v36;
              v3->SearchLightPointAt.x = v34 + x;
              v3->SearchLightPointAt.y = v35 + v3->SearchLightPointAt.y;
              v3->SearchLightPointAt.z = v36 + v3->SearchLightPointAt.z;
            }
            else
            {
              v18 = *(_QWORD *)p_tx;
              v19 = &CTheScripts::ScriptSearchLightArray[i];
              v19->SearchLightPointAt.z = p_tx[2];
              *(_QWORD *)&v19->SearchLightPointAt.x = v18;
            }
            break;
          case 4:
            v20 = &CTheScripts::ScriptSearchLightArray[i];
            v21 = CTheScripts::ScriptSearchLightArray[i].SearchLightPoint1.x
                - CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.x;
            v22 = CTheScripts::ScriptSearchLightArray[i].SearchLightPoint1.z
                - CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.z;
            v23 = v21 * v21;
            v71.y = CTheScripts::ScriptSearchLightArray[i].SearchLightPoint1.y
                  - CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.y;
            v71.x = v21;
            v24 = CTheScripts::ScriptSearchLightArray[i].MoveSpeed;
            v71.z = v22;
            if ( sqrtf((float)(v23 + (float)(v71.y * v71.y)) + (float)(v22 * v22)) <= v24 )
            {
              v38 = &CTheScripts::ScriptSearchLightArray[i];
              v39 = *(_QWORD *)&CTheScripts::ScriptSearchLightArray[i].SearchLightPoint1.x;
              v38->SearchLightPointAt.z = CTheScripts::ScriptSearchLightArray[i].SearchLightPoint1.z;
              *(_QWORD *)&v38->SearchLightPointAt.x = v39;
              v1->SearchLightState = 0x80;
              v20->SearchLightPoint1.x = 0.0;
              v20->SearchLightPoint1.y = 0.0;
              v20->SearchLightPoint1.z = 0.0;
              v20->MoveSpeed = 0.0;
            }
            else
            {
              CVector::Normalise(&v71);
              v25 = v20->MoveSpeed;
              v26 = v25 * v71.x;
              v27 = v25 * v71.y;
              v28 = v25 * v71.z;
              v29 = v20->SearchLightPointAt.x;
              v71.x = v26;
              v71.y = v27;
              v71.z = v28;
              v20->SearchLightPointAt.x = v26 + v29;
              v20->SearchLightPointAt.y = v27 + v20->SearchLightPointAt.y;
              v20->SearchLightPointAt.z = v28 + v20->SearchLightPointAt.z;
            }
            break;
          default:
            break;
        }
        pSearchLightBulb = CTheScripts::ScriptSearchLightArray[i].pSearchLightBulb;
        if ( pSearchLightBulb )
        {
          v43 = pSearchLightBulb->m_pMat;
          p_x = &v43->tx;
          if ( !v43 )
            p_x = &pSearchLightBulb->m_transform.m_translate.x;
          v45 = CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.x - *p_x;
          v46 = CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.z - p_x[2];
          v71.y = CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt.y - p_x[1];
          v71.x = v45;
          v71.z = v46;
          CVector::Normalise(&v71);
          v47 = v71.x;
          y = v71.y;
          v49 = atan2f(COERCE_FLOAT(LODWORD(v71.x) ^ 0x80000000), v71.y);
          v50 = atan2f(v71.z, sqrtf((float)(v47 * v47) + (float)(y * y)));
          v51 = CTheScripts::ScriptSearchLightArray[i].pSearchLightBulb->m_pMat;
          tx = v51->tx;
          ty = v51->ty;
          tz = v51->tz;
          CMatrix::SetRotateX(v51, v50);
          CMatrix::RotateZ(CTheScripts::ScriptSearchLightArray[i].pSearchLightBulb->m_pMat, v49);
          v55 = CTheScripts::ScriptSearchLightArray[i].pSearchLightBulb->m_pMat;
          v56 = ty + v55->ty;
          v57 = tz + v55->tz;
          v55->tx = tx + v55->tx;
          v55->ty = v56;
          v55->tz = v57;
          v58 = CTheScripts::ScriptSearchLightArray[i].pSearchLightBulb;
          m_pRwObject = v58->m_pRwObject;
          if ( m_pRwObject )
          {
            parent = (char *)m_pRwObject->parent;
            v61 = v58->m_pMat;
            v62 = (RwMatrix *)(parent + 16);
            if ( v61 )
              CMatrix::UpdateRwMatrix(v61, v62);
            else
              CSimpleTransform::UpdateRwMatrix(&v58->m_transform, v62);
          }
          CEntity::UpdateRwFrame(CTheScripts::ScriptSearchLightArray[i].pSearchLightBulb);
          CMatrix::SetRotateX(CTheScripts::ScriptSearchLightArray[i].pSearchLightHousing->m_pMat, v50);
          CMatrix::RotateZ(CTheScripts::ScriptSearchLightArray[i].pSearchLightHousing->m_pMat, v49);
          v63 = CTheScripts::ScriptSearchLightArray[i].pSearchLightHousing->m_pMat;
          v64 = ty + v63->ty;
          v65 = tz + v63->tz;
          v63->tx = tx + v63->tx;
          v63->ty = v64;
          v63->tz = v65;
          pSearchLightHousing = CTheScripts::ScriptSearchLightArray[i].pSearchLightHousing;
          v67 = pSearchLightHousing->m_pRwObject;
          if ( v67 )
          {
            v68 = (char *)v67->parent;
            v69 = pSearchLightHousing->m_pMat;
            v70 = (RwMatrix *)(v68 + 16);
            if ( v69 )
              CMatrix::UpdateRwMatrix(v69, v70);
            else
              CSimpleTransform::UpdateRwMatrix(&pSearchLightHousing->m_transform, v70);
          }
          CEntity::UpdateRwFrame(CTheScripts::ScriptSearchLightArray[i].pSearchLightHousing);
        }
      }
    }
  }
}

//----- (003587B0) --------------------------------------------------------
void CTheScripts::RenderAllSearchLights()
{
  Int32 v0; // r4
  int i; // r8
  CObject *pSearchLightSourceEntity; // r5
  __int64 v3; // d16
  const CMatrix *m_pMat; // r1
  CMatrix *v5; // r0
  float *p_tx; // r1
  bool8 clipIfColliding; // r5
  int doGroundLight; // r3
  CVector v9; // [sp+58h] [bp-38h] BYREF
  CVector v; // [sp+68h] [bp-28h] BYREF

  v0 = 534;
  for ( i = 0; i != 8; ++i )
  {
    if ( CTheScripts::ScriptSearchLightArray[i].bUsed )
    {
      pSearchLightSourceEntity = (CObject *)CTheScripts::ScriptSearchLightArray[i].pSearchLightSourceEntity;
      if ( pSearchLightSourceEntity
        || (pSearchLightSourceEntity = CTheScripts::ScriptSearchLightArray[i].pSearchLightBulb) != 0 )
      {
        v3 = *(_QWORD *)&CTheScripts::ScriptSearchLightArray[i].SearchLightSource.x;
        v.z = CTheScripts::ScriptSearchLightArray[i].SearchLightSource.z;
        *(_QWORD *)&v.x = v3;
        m_pMat = pSearchLightSourceEntity->m_pMat;
        if ( !m_pMat )
        {
          CPlaceable::AllocateMatrix(pSearchLightSourceEntity);
          CSimpleTransform::UpdateMatrix(&pSearchLightSourceEntity->m_transform, pSearchLightSourceEntity->m_pMat);
          m_pMat = pSearchLightSourceEntity->m_pMat;
        }
        Multiply3x3(&v9, m_pMat, &v);
        v = v9;
        v5 = pSearchLightSourceEntity->m_pMat;
        p_tx = &v5->tx;
        if ( !v5 )
          p_tx = &pSearchLightSourceEntity->m_transform.m_translate.x;
        clipIfColliding = CTheScripts::ScriptSearchLightArray[i].bClipIfColliding;
        doGroundLight = CTheScripts::ScriptSearchLightArray[i].bRenderGroundLight;
        v.x = *p_tx + v9.x;
        v.y = p_tx[1] + v9.y;
        v.z = p_tx[2] + v9.z;
        CHeli::SearchLightCone(
          v0,
          v,
          CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt,
          CTheScripts::ScriptSearchLightArray[i].Radius,
          1.0,
          clipIfColliding,
          doGroundLight,
          &CTheScripts::ScriptSearchLightArray[i].vecEllipseCentre,
          &CTheScripts::ScriptSearchLightArray[i].vecEllipseForward,
          &CTheScripts::ScriptSearchLightArray[i].vecEllipseSide,
          1,
          CTheScripts::ScriptSearchLightArray[i].SourceRadius,
          0.0,
          0.0,
          1.0);
      }
      else
      {
        CHeli::SearchLightCone(
          v0,
          CTheScripts::ScriptSearchLightArray[i].SearchLightSource,
          CTheScripts::ScriptSearchLightArray[i].SearchLightPointAt,
          CTheScripts::ScriptSearchLightArray[i].Radius,
          1.0,
          CTheScripts::ScriptSearchLightArray[i].bClipIfColliding,
          CTheScripts::ScriptSearchLightArray[i].bRenderGroundLight,
          &CTheScripts::ScriptSearchLightArray[i].vecEllipseCentre,
          &CTheScripts::ScriptSearchLightArray[i].vecEllipseForward,
          &CTheScripts::ScriptSearchLightArray[i].vecEllipseSide,
          1,
          CTheScripts::ScriptSearchLightArray[i].SourceRadius,
          0.0,
          0.0,
          1.0);
      }
    }
    ++v0;
  }
}

//----- (00358978) --------------------------------------------------------
int32 __fastcall CTheScripts::AddScriptCheckpoint(
        float NewX,
        float NewY,
        float NewZ,
        float PointAtX,
        float PointAtY,
        float PointAtZ,
        float Size,
        int32 CheckpointType)
{
  script_checkpoint_struct *v11; // r5
  unsigned int v13; // r0
  int v14; // r1
  int bUsed; // t1
  RwUInt8 green; // r1
  RwUInt8 blue; // r2
  RwUInt8 alpha; // r3
  int32 NewUniqueScriptThingIndex; // r9
  RwUInt8 red; // r0
  CVector pointDir; // [sp+20h] [bp-68h] BYREF
  CVector vecPosition; // [sp+2Ch] [bp-5Ch] BYREF

  v11 = CTheScripts::ScriptCheckpointArray;
  v13 = -1;
  do
  {
    bUsed = v11->bUsed;
    ++v11;
    v14 = bUsed;
    ++v13;
  }
  while ( v13 <= 0x13 && v14 );
  v11[-1].bUsed = 1;
  NewUniqueScriptThingIndex = CTheScripts::GetNewUniqueScriptThingIndex(v13, 3u);
  red = CheckpointType - 3;
  vecPosition.y = NewY;
  vecPosition.z = NewZ;
  pointDir.y = PointAtY;
  pointDir.z = PointAtZ;
  vecPosition.x = NewX;
  pointDir.x = PointAtX;
  if ( (unsigned int)(CheckpointType - 3) >= 6 )
  {
    if ( (unsigned int)CheckpointType <= 2 )
    {
      red = COLMISSIONTUBE._anon_0._anon_0.red;
      green = COLMISSIONTUBE._anon_0._anon_0.green;
      blue = COLMISSIONTUBE._anon_0._anon_0.blue;
      alpha = COLMISSIONTUBE._anon_0._anon_0.alpha;
    }
  }
  else
  {
    alpha = 96;
    red = COLMISSIONTORUS._anon_0._anon_0.red;
    green = COLMISSIONTORUS._anon_0._anon_0.green;
    blue = COLMISSIONTORUS._anon_0._anon_0.blue;
  }
  v11[-1].pCheckpoint = CCheckpoints::PlaceMarker(
                          NewUniqueScriptThingIndex,
                          CheckpointType,
                          &vecPosition,
                          &pointDir,
                          Size,
                          red,
                          green,
                          blue,
                          alpha,
                          0x400u,
                          0.075,
                          0);
  ++CTheScripts::NumberOfScriptCheckpoints;
  return NewUniqueScriptThingIndex;
}
// 358A3C: variable 'green' is possibly undefined
// 358A3C: variable 'blue' is possibly undefined
// 358A3C: variable 'alpha' is possibly undefined
// 67874C: using guessed type script_checkpoint_struct (*CTheScripts::ScriptCheckpointArray)[20];

//----- (00358A70) --------------------------------------------------------
void __fastcall CTheScripts::RemoveScriptCheckpoint(int32 ScriptCheckpointIndex)
{
  int32 ActualScriptThingIndex; // r0
  script_checkpoint_struct *v2; // r4
  CCheckpoint *v3; // r2
  CCheckpoint **p_pCheckpoint; // r4
  CCheckpoint *pCheckpoint; // t1

  ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptCheckpointIndex, 3u);
  if ( ActualScriptThingIndex != -1 )
  {
    v2 = &CTheScripts::ScriptCheckpointArray[ActualScriptThingIndex];
    pCheckpoint = v2->pCheckpoint;
    p_pCheckpoint = &v2->pCheckpoint;
    v3 = pCheckpoint;
    CTheScripts::ScriptCheckpointArray[ActualScriptThingIndex].bUsed = 0;
    if ( pCheckpoint )
      CCheckpoints::DeleteCP(v3->m_nIdentifier, v3->m_nType);
    *p_pCheckpoint = 0;
    --CTheScripts::NumberOfScriptCheckpoints;
  }
}
// 67874C: using guessed type script_checkpoint_struct (*CTheScripts::ScriptCheckpointArray)[20];

//----- (00358AB8) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands1600To1699(CRunningScript *this, Int32 CurrCommand)
{
  Int8 v3; // r6
  __int64 v4; // kr00_8
  unsigned int ActualScriptThingIndex; // r0
  const C2dEffect *v6; // r5
  CPedAttractorManager *PedAttractorManager; // r0
  CPed *PedUsingEffect; // r0
  bool v9; // r1
  uint8 *v10; // r2
  const CPed *v11; // r5
  CPed *v12; // r4
  int32 ParameterWithoutIncreasingPC; // r0
  float GroundZForCoord; // s0
  RwReal v15; // s16
  RwReal v16; // s18
  int v17; // r6
  FxSystem_c *v18; // r0
  script_effect_struct *v19; // r2
  unsigned int v20; // r1
  int v21; // r3
  int bUsed; // t1
  int32 NewUniqueScriptThingIndex; // r1
  int32 v24; // r0
  FxSystem_c *pFXSystem; // r0
  int32 v26; // r0
  FxSystem_c *v27; // r0
  int32 v28; // r5
  int32 v29; // r0
  FxSystem_c *v30; // r0
  int32 v31; // r0
  int32 v32; // r0
  FxSystem_c *v33; // r0
  int32 v34; // r0
  Int32 v35; // r1
  UInt8 v36; // r2
  uint8 *v37; // r1
  int v38; // r2
  unsigned int v39; // r3
  char *v40; // r4
  float v41; // r0
  float v42; // s0
  float v43; // s0
  uint8 *v44; // r4
  int32 ActualPickupIndex; // r0
  CPickup *v46; // r0
  Int32 v47; // s4
  float v48; // s0
  float v49; // r0
  Int32 v50; // r2
  float v51; // r1
  Int32 v52; // r5
  unsigned int v53; // r6
  Int32 v54; // r1
  __int64 v55; // kr08_8
  CTaskSimpleGunControl *v56; // r5
  __int64 v57; // kr10_8
  CTaskSimpleGunControl *v58; // r6
  CRunningScript *v59; // r0
  int32 v60; // r1
  CTask *v61; // r2
  int32 v62; // r3
  int32 v63; // r0
  uint8 *v64; // r5
  int32 v65; // r0
  uint8 *v66; // r5
  int32 v67; // r0
  uint8 *v68; // r5
  int32 v69; // r0
  uint8 *v70; // r5
  int32 v71; // r0
  uint8 *v72; // r5
  int32 v73; // r0
  uint8 *v74; // r5
  __int64 v75; // kr18_8
  CVehicle *v76; // r9
  __int64 v77; // kr20_8
  CTaskComplexEvasiveDiveAndGetUp *v78; // r5
  bool v79; // zf
  bool v80; // zf
  bool v81; // zf
  bool v82; // zf
  bool v83; // zf
  bool v84; // zf
  bool v85; // zf
  bool v86; // zf
  CVehicleModelInfo *v87; // r4
  CVehicle *v88; // r5
  int32 v89; // r4
  __int64 v90; // kr28_8
  __int64 v91; // r10
  CPed *v92; // r9
  float v93; // s0
  Int16 v94; // r0
  uint8 *v95; // r2
  float v96; // s0
  Int16 v97; // r0
  uint8 *v98; // r2
  uint8 *v99; // r1
  unsigned int v100; // r0
  unsigned int v101; // r0
  CEffectUserList *v102; // r2
  int v103; // r6
  int v104; // r1
  CEffectUserList *v105; // r2
  int v106; // t1
  CEffectUserList *v107; // r2
  int v108; // t1
  CEffectUserList *v109; // r2
  int v110; // t1
  int v111; // r3
  uint8 *v112; // r0
  uint8 *v113; // r0
  float v114; // s4
  float v115; // s0
  float v116; // s6
  float v117; // s2
  unsigned int v118; // r1
  CVehiclePool *v119; // r0
  int v120; // r2
  int v121; // r0
  CEntity *m_pEntLockOnTarget; // r1
  CPed *v123; // r8
  CAutomobile *v124; // r4
  CAutomobile *v125; // r4
  uint8 *v126; // r4
  char *v127; // r0
  __int64 v128; // r2
  Int32 v129; // r0
  float *v130; // r0
  Int32 v131; // s2
  Int32 v132; // s4
  CAutomobile *v133; // r4
  CAutomobile *v134; // r4
  CAutomobile *v135; // r0
  float *v136; // r1
  Int32 v137; // s4
  Int32 v138; // s0
  CTask *v139; // r0
  Int32 v140; // r5
  int32 CarNodeIndexFromDoor; // r8
  float v142; // s0
  RwReal v143; // s16
  RwReal v144; // s18
  int v145; // r0
  int v146; // r6
  FxSystem_c *v147; // r0
  script_effect_struct *v148; // r2
  unsigned int v149; // r1
  int v150; // r3
  int v151; // t1
  float v152; // s0
  RwReal v153; // s16
  RwReal v154; // s18
  int v155; // r0
  int v156; // r6
  FxSystem_c *v157; // r0
  script_effect_struct *v158; // r2
  unsigned int v159; // r1
  int v160; // r3
  int v161; // t1
  float v162; // s0
  RwReal v163; // s16
  RwReal v164; // s18
  int v165; // r0
  int v166; // r6
  FxSystem_c *v167; // r0
  script_effect_struct *v168; // r2
  unsigned int v169; // r1
  int v170; // r3
  int v171; // t1
  float v172; // s0
  RwReal v173; // s16
  RwReal v174; // s18
  int v175; // r0
  int v176; // r6
  FxSystem_c *v177; // r0
  script_effect_struct *v178; // r2
  unsigned int v179; // r1
  int v180; // r3
  int v181; // t1
  float v182; // s0
  RwReal v183; // s16
  RwReal v184; // s18
  int v185; // r0
  int v186; // r6
  FxSystem_c *v187; // r0
  script_effect_struct *v188; // r2
  unsigned int v189; // r1
  int v190; // r3
  int v191; // t1
  float v192; // s0
  RwReal v193; // s16
  RwReal v194; // s18
  int v195; // r0
  int v196; // r6
  FxSystem_c *v197; // r0
  script_effect_struct *v198; // r2
  unsigned int v199; // r1
  int v200; // r3
  int v201; // t1
  CTaskComplexDestroyCar *v202; // r5
  CTaskComplexShuffleSeats *v203; // r6
  uint8 *v204; // r1
  __int64 v205; // kr30_8
  int32 v206; // r1
  eDoors v207; // r5
  int32 v208; // r0
  CTaskComplex *v209; // r5
  int v210; // r1
  uint8 v211; // r0
  uint8 *v212; // r9
  int v213; // r5
  int v214; // r4
  unsigned __int16 v215; // r10
  CTaskComplex *v216; // r6
  int v217; // r1
  __int64 v218; // kr38_8
  int32 CarNodeIndexFromPanel; // r1
  ePanels v220; // r5
  int32 v221; // r0
  int v222; // r2
  int v223; // r3
  int v224; // r6
  float v225; // s0
  int v226; // s4
  __int64 v227; // kr40_8
  Int32 v228; // r5
  CTaskSimpleClearLookAt *v229; // r4
  CRunningScript *v230; // r0
  Int16 v231; // r1
  Int32 v232; // r5
  Int32 v233; // r6
  Int32 v234; // r8
  CEntity *v236; // r8
  CTaskSimpleTriggerLookAt *v237; // r5
  CPed *v238; // r2
  RwV3d_0 nFiringTask[3]; // [sp+0h] [bp-E0h] BYREF
  CRunningScript *v240; // [sp+28h] [bp-B8h]
  CVector dir; // [sp+2Ch] [bp-B4h] BYREF
  CVector pos; // [sp+38h] [bp-A8h] BYREF
  RwV3d_0 offsetPos; // [sp+44h] [bp-9Ch] BYREF
  RwMatrix pStringToFill; // [sp+64h] [bp-7Ch] BYREF

  v3 = 0;
  switch ( CurrCommand )
  {
    case 1602:
      CRunningScript::CollectParameters(this, 2);
      v4 = *(_QWORD *)ScriptParams;
      ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptParams[1], 6u);
      if ( ActualScriptThingIndex > 0x3F )
        goto LABEL_216;
      v6 = &CScripted2dEffects::ms_effects[ActualScriptThingIndex];
      PedAttractorManager = GetPedAttractorManager();
      PedUsingEffect = CPedAttractorManager::GetPedUsingEffect(PedAttractorManager, v6, 0);
      if ( (_DWORD)v4 == -1 )
      {
        v9 = PedUsingEffect != 0;
      }
      else
      {
        v9 = 0;
        if ( (int)v4 >= 0 && CPools::ms_pPedPool->m_aFlags[(unsigned int)v4 >> 8] == (unsigned __int8)v4 )
          v10 = CPools::ms_pPedPool->m_aStorage[(unsigned int)v4 >> 8];
        else
          v10 = 0;
        if ( v10 == (uint8 *)PedUsingEffect )
          v9 = 1;
      }
      goto LABEL_233;
    case 1603:
      CRunningScript::CollectParameters(this, 2);
      if ( (unsigned int)CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 4u) > 0x3F )
        return 0;
      v3 = 0;
      CTaskSequences::ms_taskSequence[CTaskSequences::ms_iActiveSequence].m_iRepeatMode = ScriptParams[1];
      return v3;
    case 1606:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v11 = (const CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v11 = 0;
      }
      if ( CPedScriptedTaskRecord::GetStatus(v11, 1560) )
      {
        v139 = v11->m_pPedIntelligence->m_taskManager.m_tasks[3];
        if ( v139 )
          v41 = *(float *)&v139[2]._vptr$CTask;
        else
          v41 = NAN;
      }
      else
      {
        v41 = NAN;
      }
      goto LABEL_424;
    case 1607:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] == -1 )
      {
        v229 = (CTaskSimpleClearLookAt *)CTask::operator new(8u);
        CTaskSimpleClearLookAt::CTaskSimpleClearLookAt(v229);
        goto LABEL_422;
      }
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v12 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v12 = 0;
      }
      if ( IKChainManager_c::IsLooking(&g_ikChainMan, v12) )
        IKChainManager_c::AbortLookAt(&g_ikChainMan, v12, 500);
      return 0;
    case 1608:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      *(_DWORD *)(*(_DWORD *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1088] + 204) = ScriptParams[1];
      return v3;
    case 1610:
    case 1613:
    case 1617:
    case 1625:
    case 1626:
    case 1638:
    case 1647:
    case 1648:
    case 1649:
    case 1653:
    case 1656:
    case 1679:
    case 1692:
    case 1693:
    case 1694:
    case 1695:
    case 1696:
    case 1697:
      return v3;
    case 1611:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 0x20u);
      CRunningScript::CollectParameters(this, 4);
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(ParameterWithoutIncreasingPC, 1u);
      GroundZForCoord = *(float *)&ScriptParams[2];
      v15 = *(float *)ScriptParams;
      v16 = *(float *)&ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      offsetPos.y = v16;
      offsetPos.x = v15;
      offsetPos.z = GroundZForCoord;
      v17 = ScriptParams[3];
      if ( ScriptParams[3] )
        v17 = 1;
      v18 = FxManager_c::CreateFxSystem(&g_fxMan, (unsigned __int8 *)&pStringToFill, &offsetPos, 0, v17);
      if ( !v18 )
        goto LABEL_415;
      v19 = CTheScripts::ScriptEffectSystemArray;
      v20 = -1;
      do
      {
        bUsed = v19->bUsed;
        ++v19;
        v21 = bUsed;
        ++v20;
      }
      while ( v20 <= 0x1F && v21 );
      v19[-1].pFXSystem = v18;
      v19[-1].bUsed = 1;
      NewUniqueScriptThingIndex = CTheScripts::GetNewUniqueScriptThingIndex(v20, 1u);
      ScriptParams[0] = NewUniqueScriptThingIndex;
      if ( this->IsThisAMissionScript )
        goto LABEL_339;
      goto LABEL_425;
    case 1612:
      CRunningScript::CollectParameters(this, 1);
      v24 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 1u);
      if ( v24 >= 0 )
      {
        pFXSystem = CTheScripts::ScriptEffectSystemArray[v24].pFXSystem;
        if ( pFXSystem )
          FxSystem_c::Play(pFXSystem);
      }
      return 0;
    case 1614:
      CRunningScript::CollectParameters(this, 1);
      v26 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 1u);
      if ( v26 >= 0 )
      {
        v27 = CTheScripts::ScriptEffectSystemArray[v26].pFXSystem;
        if ( v27 )
          FxSystem_c::Stop(v27);
      }
      return 0;
    case 1615:
      CRunningScript::CollectParameters(this, 1);
      v28 = ScriptParams[0];
      v29 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 1u);
      if ( v29 >= 0 )
      {
        v30 = CTheScripts::ScriptEffectSystemArray[v29].pFXSystem;
        if ( v30 )
        {
          FxSystem_c::PlayAndKill(v30);
          v31 = CTheScripts::GetActualScriptThingIndex(v28, 1u);
          if ( v31 != -1 )
          {
            CTheScripts::ScriptEffectSystemArray[v31].bUsed = 0;
            CTheScripts::ScriptEffectSystemArray[v31].pFXSystem = 0;
          }
          if ( this->IsThisAMissionScript )
            goto LABEL_50;
        }
      }
      return 0;
    case 1616:
      CRunningScript::CollectParameters(this, 1);
      v28 = ScriptParams[0];
      v32 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 1u);
      if ( v32 < 0 )
        return 0;
      v33 = CTheScripts::ScriptEffectSystemArray[v32].pFXSystem;
      if ( !v33 )
        return 0;
      FxSystem_c::Kill(v33);
      v34 = CTheScripts::GetActualScriptThingIndex(v28, 1u);
      if ( v34 != -1 )
      {
        CTheScripts::ScriptEffectSystemArray[v34].bUsed = 0;
        CTheScripts::ScriptEffectSystemArray[v34].pFXSystem = 0;
      }
      if ( !this->IsThisAMissionScript )
        return 0;
LABEL_50:
      v35 = v28;
      v36 = 4;
      goto LABEL_78;
    case 1618:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = (int)CStats::GetStatValue(ScriptParams[0]);
      goto LABEL_425;
    case 1619:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CStats::GetStatValue(ScriptParams[0]);
      goto LABEL_425;
    case 1620:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v37 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      v38 = *((_DWORD *)v37 + 17);
      v39 = v38 & 0xDFFFFFFF;
      if ( ScriptParams[1] )
        v39 = v38 | 0x20000000;
      *((_DWORD *)v37 + 17) = v39;
      return v3;
    case 1621:
      CRunningScript::CollectParameters(this, 3);
      v40 = (char *)ScriptParams[2];
      if ( ScriptParams[2] == -1 )
      {
        v40 = (_BYTE *)(elf_hash_bucket + 19748);
        if ( ScriptParams[1] < 0 )
          goto LABEL_435;
      }
      else
      {
        if ( ScriptParams[2] == -2 )
          v40 = "List_FillGlobeColPointsER8CPtrListRK8CColLineRP7CEntitybP15CStoredCollPoly";
        if ( ScriptParams[1] < 0 )
          goto LABEL_435;
      }
      if ( CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v236 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
        if ( ScriptParams[0] != -1 )
          goto LABEL_436;
        goto LABEL_434;
      }
LABEL_435:
      v236 = 0;
      if ( ScriptParams[0] != -1 )
      {
LABEL_436:
        v3 = 0;
        if ( ScriptParams[0] >= 0
          && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        {
          v238 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        }
        else
        {
          v238 = 0;
        }
        IKChainManager_c::LookAt(
          &g_ikChainMan,
          "COMMAND_TASK_LOOK_AT_OBJECT",
          v238,
          v236,
          (int32)v40,
          -1,
          0,
          0,
          0.25,
          500,
          6,
          1);
        return v3;
      }
LABEL_434:
      v237 = (CTaskSimpleTriggerLookAt *)CTask::operator new(0x30u);
      v3 = 0;
      memset(nFiringTask, 0, 12);
      CTaskSimpleTriggerLookAt::CTaskSimpleTriggerLookAt(v237, v236, (int32)v40, -1, nFiringTask[0], 1u, 0.25, 1000, 3);
      CTaskComplexSequence::AddTask(&CTaskSequences::ms_taskSequence[CTaskSequences::ms_iActiveSequence], v237);
      return v3;
    case 1622:
      CRunningScript::CollectParameters(this, 1);
      v41 = *(float *)ScriptParams;
      v42 = *(float *)ScriptParams;
      if ( *(float *)ScriptParams < 0.0 )
      {
        do
          v42 = v42 + 360.0;
        while ( v42 < 0.0 );
        v41 = v42;
      }
      v43 = v41;
      if ( v41 > 360.0 )
      {
        do
          v43 = v43 + -360.0;
        while ( v43 > 360.0 );
        v41 = v43;
      }
LABEL_424:
      *(float *)ScriptParams = v41;
      goto LABEL_425;
    case 1623:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v44 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v44 = 0;
      }
      v140 = ScriptParams[1];
      CarNodeIndexFromDoor = CDamageManager::GetCarNodeIndexFromDoor((eDoors)ScriptParams[1]);
      if ( (*(int (__fastcall **)(uint8 *, Int32))(*(_DWORD *)v44 + 136))(v44, v140)
        || !*(_DWORD *)&v44[4 * CarNodeIndexFromDoor + 1628] )
      {
        return 0;
      }
      v3 = 0;
      (*(void (__fastcall **)(uint8 *, _DWORD, int32, Int32, int, int))(*(_DWORD *)v44 + 112))(
        v44,
        0,
        CarNodeIndexFromDoor,
        v140,
        1065353216,
        1);
      return v3;
    case 1627:
      CRunningScript::CollectParameters(this, 1);
      ActualPickupIndex = CPickups::GetActualPickupIndex(ScriptParams[0]);
      if ( ActualPickupIndex == -1 )
      {
        v49 = -100.0;
        v51 = 0.0;
        v50 = 0;
      }
      else
      {
        v46 = &CPickups::aPickUps[ActualPickupIndex];
        *(float *)&v47 = (float)v46->CoorsY * 0.125;
        v48 = (float)v46->CoorsX * 0.125;
        v49 = (float)v46->CoorsZ * 0.125;
        v50 = v47;
        v51 = v48;
      }
      *(float *)ScriptParams = v51;
      ScriptParams[1] = v50;
      *(float *)&ScriptParams[2] = v49;
      goto LABEL_419;
    case 1628:
      CRunningScript::CollectParameters(this, 1);
      v52 = ScriptParams[0];
      v53 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 7u);
      if ( v53 <= 0x13
        && CScriptResourceManager::RemoveFromResourceManager(&CTheScripts::ScriptResourceManager, v52, 3u, this) )
      {
        CDecisionMakerTypesFileLoader::UnloadDecisionMaker(v53);
      }
      if ( !this->IsThisAMissionScript )
        return 0;
      v35 = v52;
      v36 = 9;
LABEL_78:
      CMissionCleanup::RemoveEntityFromList(&CTheScripts::MissionCleanUp, v35, v36);
      return 0;
    case 1629:
    case 1630:
    case 1631:
    case 1632:
      CRunningScript::GetIndexOfGlobalVariable(this);
      goto LABEL_3;
    case 1633:
    case 1634:
LABEL_3:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 0x46u);
      return 0;
    case 1635:
    case 1636:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 0x46u);
      CRunningScript::CollectParameters(this, 1);
      return 0;
    case 1637:
      CRunningScript::CollectParameters(this, 1);
      v54 = *(__int16 *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][38];
      goto LABEL_416;
    case 1639:
      CRunningScript::CollectParameters(this, 5);
      v55 = *(_QWORD *)ScriptParams;
      LODWORD(pStringToFill.right.x) = ScriptParams[1];
      *(_QWORD *)&pStringToFill.right.y = *(_QWORD *)&ScriptParams[2];
      v56 = (CTaskSimpleGunControl *)CTask::operator new(0x3Cu);
      v3 = 0;
      CTaskSimpleGunControl::CTaskSimpleGunControl(v56, 0, (const CVector *)&pStringToFill, 0, 0, 500, ScriptParams[4]);
      CRunningScript::GivePedScriptedTask(this, v55, v56, 1639);
      return v3;
    case 1640:
      CRunningScript::CollectParameters(this, 5);
      v57 = *(_QWORD *)ScriptParams;
      offsetPos = *(RwV3d_0 *)&ScriptParams[1];
      if ( ScriptParams[0] == -1
        || !(BYTE1(CWeaponInfo::GetWeaponInfo(
                     *(eWeaponType *)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][28 * (char)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1820] + 1444],
                     1)->m_nFlags) << 31)
        || (v58 = (CTaskSimpleGunControl *)CTask::operator new(0x1Cu),
            CTaskSimpleThrowControl::CTaskSimpleThrowControl(
              (CTaskSimpleThrowControl *)v58,
              0,
              (const CVector *)&offsetPos),
            !v58) )
      {
        v58 = (CTaskSimpleGunControl *)CTask::operator new(0x3Cu);
        CTaskSimpleGunControl::CTaskSimpleGunControl(v58, 0, (const CVector *)&offsetPos, 0, 3, 5, ScriptParams[4]);
      }
      v59 = this;
      v60 = v57;
      v61 = v58;
      v62 = 1640;
      goto LABEL_344;
    case 1641:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 0x20u);
      CRunningScript::CollectParameters(this, 5);
      v63 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(v63, 1u);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v64 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v64 = 0;
      }
      v142 = *(float *)&ScriptParams[3];
      v143 = *(float *)&ScriptParams[1];
      v144 = *(float *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        v142 = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      offsetPos.y = v144;
      offsetPos.x = v143;
      offsetPos.z = v142;
      v145 = *((_DWORD *)v64 + 6);
      if ( !v145 )
      {
        (*(void (__fastcall **)(uint8 *))(*(_DWORD *)v64 + 32))(v64);
        v145 = *((_DWORD *)v64 + 6);
        if ( !v145 )
          goto LABEL_415;
      }
      v146 = ScriptParams[4];
      if ( ScriptParams[4] )
        v146 = 1;
      v147 = FxManager_c::CreateFxSystem(
               &g_fxMan,
               (unsigned __int8 *)&pStringToFill,
               &offsetPos,
               (RwMatrix *)(*(_DWORD *)(v145 + 4) + 16),
               v146);
      if ( !v147 )
        goto LABEL_415;
      v148 = CTheScripts::ScriptEffectSystemArray;
      v149 = -1;
      do
      {
        v151 = v148->bUsed;
        ++v148;
        v150 = v151;
        ++v149;
      }
      while ( v149 <= 0x1F && v150 );
      v148[-1].pFXSystem = v147;
      v148[-1].bUsed = 1;
      NewUniqueScriptThingIndex = CTheScripts::GetNewUniqueScriptThingIndex(v149, 1u);
      ScriptParams[0] = NewUniqueScriptThingIndex;
      if ( this->IsThisAMissionScript )
        goto LABEL_339;
      goto LABEL_425;
    case 1642:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&offsetPos, 0x20u);
      CRunningScript::CollectParameters(this, 8);
      v65 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(v65, 1u);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v66 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v66 = 0;
      }
      v152 = *(float *)&ScriptParams[3];
      v153 = *(float *)&ScriptParams[1];
      v154 = *(float *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        v152 = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      pos.y = v154;
      pos.x = v153;
      pos.z = v152;
      dir = *(CVector *)&ScriptParams[4];
      Fx_c::CreateMatFromVec(&g_fx, &pStringToFill, &pos, &dir);
      v155 = *((_DWORD *)v66 + 6);
      if ( !v155 )
      {
        (*(void (__fastcall **)(uint8 *))(*(_DWORD *)v66 + 32))(v66);
        v155 = *((_DWORD *)v66 + 6);
        if ( !v155 )
          goto LABEL_415;
      }
      v156 = ScriptParams[7];
      if ( ScriptParams[7] )
        v156 = 1;
      v157 = FxManager_c::CreateFxSystem(
               &g_fxMan,
               (unsigned __int8 *)&offsetPos,
               &pStringToFill,
               (RwMatrix *)(*(_DWORD *)(v155 + 4) + 16),
               v156);
      if ( !v157 )
        goto LABEL_415;
      v158 = CTheScripts::ScriptEffectSystemArray;
      v159 = -1;
      do
      {
        v161 = v158->bUsed;
        ++v158;
        v160 = v161;
        ++v159;
      }
      while ( v159 <= 0x1F && v160 );
      v158[-1].pFXSystem = v157;
      v158[-1].bUsed = 1;
      NewUniqueScriptThingIndex = CTheScripts::GetNewUniqueScriptThingIndex(v159, 1u);
      ScriptParams[0] = NewUniqueScriptThingIndex;
      if ( this->IsThisAMissionScript )
        goto LABEL_339;
      goto LABEL_425;
    case 1643:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 0x20u);
      CRunningScript::CollectParameters(this, 5);
      v67 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(v67, 1u);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v68 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v68 = 0;
      }
      v162 = *(float *)&ScriptParams[3];
      v163 = *(float *)&ScriptParams[1];
      v164 = *(float *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        v162 = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      offsetPos.y = v164;
      offsetPos.x = v163;
      offsetPos.z = v162;
      v165 = *((_DWORD *)v68 + 6);
      if ( !v165 )
      {
        (*(void (__fastcall **)(uint8 *))(*(_DWORD *)v68 + 32))(v68);
        v165 = *((_DWORD *)v68 + 6);
        if ( !v165 )
          goto LABEL_415;
      }
      v166 = ScriptParams[4];
      if ( ScriptParams[4] )
        v166 = 1;
      v167 = FxManager_c::CreateFxSystem(
               &g_fxMan,
               (unsigned __int8 *)&pStringToFill,
               &offsetPos,
               (RwMatrix *)(*(_DWORD *)(v165 + 4) + 16),
               v166);
      if ( !v167 )
        goto LABEL_415;
      v168 = CTheScripts::ScriptEffectSystemArray;
      v169 = -1;
      do
      {
        v171 = v168->bUsed;
        ++v168;
        v170 = v171;
        ++v169;
      }
      while ( v169 <= 0x1F && v170 );
      v168[-1].pFXSystem = v167;
      v168[-1].bUsed = 1;
      NewUniqueScriptThingIndex = CTheScripts::GetNewUniqueScriptThingIndex(v169, 1u);
      ScriptParams[0] = NewUniqueScriptThingIndex;
      if ( this->IsThisAMissionScript )
        goto LABEL_339;
      goto LABEL_425;
    case 1644:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&offsetPos, 0x20u);
      CRunningScript::CollectParameters(this, 8);
      v69 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(v69, 1u);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v70 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v70 = 0;
      }
      v172 = *(float *)&ScriptParams[3];
      v173 = *(float *)&ScriptParams[1];
      v174 = *(float *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        v172 = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      pos.y = v174;
      pos.x = v173;
      pos.z = v172;
      dir = *(CVector *)&ScriptParams[4];
      Fx_c::CreateMatFromVec(&g_fx, &pStringToFill, &pos, &dir);
      v175 = *((_DWORD *)v70 + 6);
      if ( !v175 )
      {
        (*(void (__fastcall **)(uint8 *))(*(_DWORD *)v70 + 32))(v70);
        v175 = *((_DWORD *)v70 + 6);
        if ( !v175 )
          goto LABEL_415;
      }
      v176 = ScriptParams[7];
      if ( ScriptParams[7] )
        v176 = 1;
      v177 = FxManager_c::CreateFxSystem(
               &g_fxMan,
               (unsigned __int8 *)&offsetPos,
               &pStringToFill,
               (RwMatrix *)(*(_DWORD *)(v175 + 4) + 16),
               v176);
      if ( !v177 )
        goto LABEL_415;
      v178 = CTheScripts::ScriptEffectSystemArray;
      v179 = -1;
      do
      {
        v181 = v178->bUsed;
        ++v178;
        v180 = v181;
        ++v179;
      }
      while ( v179 <= 0x1F && v180 );
      v178[-1].pFXSystem = v177;
      v178[-1].bUsed = 1;
      NewUniqueScriptThingIndex = CTheScripts::GetNewUniqueScriptThingIndex(v179, 1u);
      ScriptParams[0] = NewUniqueScriptThingIndex;
      if ( this->IsThisAMissionScript )
        goto LABEL_339;
      goto LABEL_425;
    case 1645:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 0x20u);
      CRunningScript::CollectParameters(this, 5);
      v71 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(v71, 1u);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v72 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v72 = 0;
      }
      v182 = *(float *)&ScriptParams[3];
      v183 = *(float *)&ScriptParams[1];
      v184 = *(float *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        v182 = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      offsetPos.y = v184;
      offsetPos.x = v183;
      offsetPos.z = v182;
      v185 = *((_DWORD *)v72 + 6);
      if ( !v185 )
      {
        (*(void (__fastcall **)(uint8 *))(*(_DWORD *)v72 + 32))(v72);
        v185 = *((_DWORD *)v72 + 6);
        if ( !v185 )
          goto LABEL_415;
      }
      v186 = ScriptParams[4];
      if ( ScriptParams[4] )
        v186 = 1;
      v187 = FxManager_c::CreateFxSystem(
               &g_fxMan,
               (unsigned __int8 *)&pStringToFill,
               &offsetPos,
               (RwMatrix *)(*(_DWORD *)(v185 + 4) + 16),
               v186);
      if ( !v187 )
        goto LABEL_415;
      v188 = CTheScripts::ScriptEffectSystemArray;
      v189 = -1;
      do
      {
        v191 = v188->bUsed;
        ++v188;
        v190 = v191;
        ++v189;
      }
      while ( v189 <= 0x1F && v190 );
      v188[-1].pFXSystem = v187;
      v188[-1].bUsed = 1;
      NewUniqueScriptThingIndex = CTheScripts::GetNewUniqueScriptThingIndex(v189, 1u);
      ScriptParams[0] = NewUniqueScriptThingIndex;
      if ( this->IsThisAMissionScript )
        goto LABEL_339;
      goto LABEL_425;
    case 1646:
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&offsetPos, 0x20u);
      CRunningScript::CollectParameters(this, 8);
      v73 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(v73, 1u);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v74 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v74 = 0;
      }
      v192 = *(float *)&ScriptParams[3];
      v193 = *(float *)&ScriptParams[1];
      v194 = *(float *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        v192 = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      pos.y = v194;
      pos.x = v193;
      pos.z = v192;
      dir = *(CVector *)&ScriptParams[4];
      Fx_c::CreateMatFromVec(&g_fx, &pStringToFill, &pos, &dir);
      v195 = *((_DWORD *)v74 + 6);
      if ( !v195 )
      {
        (*(void (__fastcall **)(uint8 *))(*(_DWORD *)v74 + 32))(v74);
        v195 = *((_DWORD *)v74 + 6);
        if ( !v195 )
          goto LABEL_415;
      }
      v196 = ScriptParams[7];
      if ( ScriptParams[7] )
        v196 = 1;
      v197 = FxManager_c::CreateFxSystem(
               &g_fxMan,
               (unsigned __int8 *)&offsetPos,
               &pStringToFill,
               (RwMatrix *)(*(_DWORD *)(v195 + 4) + 16),
               v196);
      if ( v197 )
      {
        v198 = CTheScripts::ScriptEffectSystemArray;
        v199 = -1;
        do
        {
          v201 = v198->bUsed;
          ++v198;
          v200 = v201;
          ++v199;
        }
        while ( v199 <= 0x1F && v200 );
        v198[-1].pFXSystem = v197;
        v198[-1].bUsed = 1;
        NewUniqueScriptThingIndex = CTheScripts::GetNewUniqueScriptThingIndex(v199, 1u);
        ScriptParams[0] = NewUniqueScriptThingIndex;
        if ( this->IsThisAMissionScript )
LABEL_339:
          CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, NewUniqueScriptThingIndex, 4u);
      }
      else
      {
LABEL_415:
        v54 = -1;
LABEL_416:
        ScriptParams[0] = v54;
      }
LABEL_425:
      v230 = this;
      v231 = 1;
LABEL_426:
      CRunningScript::StoreParameters(v230, v231);
      return 0;
    case 1650:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      v75 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v76 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v76 = 0;
      }
      v202 = (CTaskComplexDestroyCar *)CTask::operator new(0x20u);
      CTaskComplexDestroyCar::CTaskComplexDestroyCar(v202, v76, 0, 0, 0);
      CRunningScript::GivePedScriptedTask(this, v75, v202, 1650);
      return v3;
    case 1651:
      CRunningScript::CollectParameters(this, 4);
      v3 = 0;
      v77 = *(_QWORD *)ScriptParams;
      LODWORD(pStringToFill.right.x) = ScriptParams[1];
      *(_QWORD *)&pStringToFill.right.y = (unsigned int)ScriptParams[2];
      CVector::Normalise((CVector *)&pStringToFill);
      v78 = (CTaskComplexEvasiveDiveAndGetUp *)CTask::operator new(0x24u);
      CTaskComplexEvasiveDiveAndGetUp::CTaskComplexEvasiveDiveAndGetUp(
        v78,
        0,
        ScriptParams[3],
        (const CVector *)&pStringToFill,
        1);
      CRunningScript::GivePedScriptedTask(this, v77, v78, 1651);
      return v3;
    case 1652:
      CRunningScript::CollectParameters(this, 1);
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&pStringToFill, 9u);
      v79 = LOBYTE(pStringToFill.right.x) == 95;
      if ( LOBYTE(pStringToFill.right.x) != 95 )
        v79 = LOBYTE(pStringToFill.right.x) == 0;
      if ( v79 )
        LOBYTE(pStringToFill.right.x) = 32;
      v80 = BYTE1(pStringToFill.right.x) == 0;
      if ( BYTE1(pStringToFill.right.x) )
        v80 = BYTE1(pStringToFill.right.x) == 95;
      if ( v80 )
        BYTE1(pStringToFill.right.x) = 32;
      v81 = BYTE2(pStringToFill.right.x) == 95;
      if ( BYTE2(pStringToFill.right.x) != 95 )
        v81 = BYTE2(pStringToFill.right.x) == 0;
      if ( v81 )
        BYTE2(pStringToFill.right.x) = 32;
      v82 = HIBYTE(pStringToFill.right.x) == 95;
      if ( HIBYTE(pStringToFill.right.x) != 95 )
        v82 = HIBYTE(pStringToFill.right.x) == 0;
      if ( v82 )
        HIBYTE(pStringToFill.right.x) = 32;
      v83 = LOBYTE(pStringToFill.right.y) == 95;
      if ( LOBYTE(pStringToFill.right.y) != 95 )
        v83 = LOBYTE(pStringToFill.right.y) == 0;
      if ( v83 )
        LOBYTE(pStringToFill.right.y) = 32;
      v84 = BYTE1(pStringToFill.right.y) == 95;
      if ( BYTE1(pStringToFill.right.y) != 95 )
        v84 = BYTE1(pStringToFill.right.y) == 0;
      if ( v84 )
        BYTE1(pStringToFill.right.y) = 32;
      v85 = BYTE2(pStringToFill.right.y) == 95;
      if ( BYTE2(pStringToFill.right.y) != 95 )
        v85 = BYTE2(pStringToFill.right.y) == 0;
      if ( v85 )
        BYTE2(pStringToFill.right.y) = 32;
      v86 = HIBYTE(pStringToFill.right.y) == 95;
      if ( HIBYTE(pStringToFill.right.y) != 95 )
        v86 = HIBYTE(pStringToFill.right.y) == 0;
      if ( v86 )
        HIBYTE(pStringToFill.right.y) = 32;
      LOBYTE(pStringToFill.right.z) = 0;
      v87 = (CVehicleModelInfo *)CModelInfo::ms_modelInfoPtrs[ScriptParams[0]];
      if ( v87
        && (*((int (__fastcall **)(CBaseModelInfo *))v87->_vptr$CBaseModelInfo + 5))(CModelInfo::ms_modelInfoPtrs[ScriptParams[0]]) == 6
        && v87->pCustomPlateMaterial )
      {
        CVehicleModelInfo::SetCustomCarPlateText(v87, (unsigned __int8 *)&pStringToFill);
      }
      return 0;
    case 1654:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v88 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v88 = 0;
      }
      v203 = (CTaskComplexShuffleSeats *)CTask::operator new(0x2Cu);
      CTaskComplexShuffleSeats::CTaskComplexShuffleSeats(v203, v88);
      v61 = v203;
      v62 = 1654;
      v60 = ScriptParams[0];
      v59 = this;
LABEL_344:
      CRunningScript::GivePedScriptedTask(v59, v60, v61, v62);
      return 0;
    case 1655:
      v89 = 4;
      v240 = this;
      CRunningScript::CollectParameters(this, 4);
      v3 = 0;
      v90 = *(_QWORD *)ScriptParams;
      v91 = *(_QWORD *)&ScriptParams[2];
      if ( ScriptParams[2] )
        LOBYTE(v91) = 1;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v92 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v92 = 0;
      }
      CTask::operator new(0x78u);
      if ( HIDWORD(v91) )
        v89 = -1;
      memset(&nFiringTask[1].y, 0, sizeof(RwV3d_0));
      CTaskComplexPartnerChat::CTaskComplexPartnerChat(
        (CTaskComplexPartnerChat *)HIDWORD(v90),
        "COMMAND_TASK_CHAT_WITH_CHAR",
        v92,
        v91,
        0.5,
        v89,
        1,
        1u,
        *(CVector *)&nFiringTask[1].y);
      CRunningScript::GivePedScriptedTask(v240, v90, (CTask *)HIDWORD(v90), 1655);
      return v3;
    case 1657:
      CRunningScript::CollectParameters(this, 9);
      v93 = *(float *)&ScriptParams[7];
      v94 = ScriptParams[8];
      LODWORD(pStringToFill.right.x) = ScriptParams[1];
      *(_QWORD *)&pStringToFill.right.y = *(_QWORD *)&ScriptParams[2];
      offsetPos = *(RwV3d_0 *)&ScriptParams[4];
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v95 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v95 = 0;
      }
      goto LABEL_442;
    case 1658:
      CRunningScript::CollectParameters(this, 7);
      v96 = *(float *)&ScriptParams[5];
      v97 = ScriptParams[6];
      LODWORD(pStringToFill.right.x) = ScriptParams[1];
      *(_QWORD *)&pStringToFill.right.y = *(_QWORD *)&ScriptParams[2];
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v98 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        if ( ScriptParams[4] < 0 )
          goto LABEL_397;
      }
      else
      {
        v98 = 0;
        if ( ScriptParams[4] < 0 )
          goto LABEL_397;
      }
      if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[4] >> 8] == LOBYTE(ScriptParams[4]) )
      {
        v99 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[4] >> 8];
        goto LABEL_446;
      }
LABEL_397:
      v99 = 0;
      goto LABEL_446;
    case 1659:
      CRunningScript::CollectParameters(this, 7);
      v96 = *(float *)&ScriptParams[5];
      v97 = ScriptParams[6];
      LODWORD(pStringToFill.right.x) = ScriptParams[1];
      *(_QWORD *)&pStringToFill.right.y = *(_QWORD *)&ScriptParams[2];
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v98 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        if ( ScriptParams[4] < 0 )
        {
LABEL_171:
          v99 = 0;
          goto LABEL_446;
        }
      }
      else
      {
        v98 = 0;
        if ( ScriptParams[4] < 0 )
          goto LABEL_171;
      }
      if ( CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[4] >> 8] == LOBYTE(ScriptParams[4]) )
        v99 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[4] >> 8];
      else
        v99 = 0;
      goto LABEL_446;
    case 1660:
      CRunningScript::CollectParameters(this, 9);
      v93 = *(float *)&ScriptParams[7];
      v94 = ScriptParams[8];
      LODWORD(pStringToFill.right.x) = ScriptParams[1];
      *(_QWORD *)&pStringToFill.right.y = *(_QWORD *)&ScriptParams[2];
      offsetPos = *(RwV3d_0 *)&ScriptParams[4];
      if ( ScriptParams[0] < 0 )
      {
        v95 = 0;
      }
      else if ( CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v95 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v95 = 0;
      }
LABEL_442:
      v3 = 0;
      CCamera::TakeControlAttachToEntity(
        &TheCamera,
        0,
        (CEntity *)v95,
        (CVector *)&pStringToFill,
        (CVector *)&offsetPos,
        v93,
        v94,
        1);
      return v3;
    case 1661:
      CRunningScript::CollectParameters(this, 7);
      v96 = *(float *)&ScriptParams[5];
      v97 = ScriptParams[6];
      LODWORD(pStringToFill.right.x) = ScriptParams[1];
      *(_QWORD *)&pStringToFill.right.y = *(_QWORD *)&ScriptParams[2];
      if ( ScriptParams[4] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[4] >> 8] == LOBYTE(ScriptParams[4]) )
      {
        v99 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[4] >> 8];
        if ( ScriptParams[0] < 0 )
        {
LABEL_178:
          v98 = 0;
          goto LABEL_446;
        }
      }
      else
      {
        v99 = 0;
        if ( ScriptParams[0] < 0 )
          goto LABEL_178;
      }
      if ( CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        v98 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      else
        v98 = 0;
      goto LABEL_446;
    case 1662:
      CRunningScript::CollectParameters(this, 7);
      v96 = *(float *)&ScriptParams[5];
      v97 = ScriptParams[6];
      LODWORD(pStringToFill.right.x) = ScriptParams[1];
      *(_QWORD *)&pStringToFill.right.y = *(_QWORD *)&ScriptParams[2];
      if ( ScriptParams[4] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[4] >> 8] == LOBYTE(ScriptParams[4]) )
      {
        v99 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[4] >> 8];
        if ( ScriptParams[0] < 0 )
        {
LABEL_182:
          v98 = 0;
          goto LABEL_446;
        }
      }
      else
      {
        v99 = 0;
        if ( ScriptParams[0] < 0 )
          goto LABEL_182;
      }
      if ( CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        v98 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      else
        v98 = 0;
LABEL_446:
      CCamera::TakeControlAttachToEntity(
        &TheCamera,
        (CEntity *)v99,
        (CEntity *)v98,
        (CVector *)&pStringToFill,
        (CVector *)&offsetPos,
        v96,
        v97,
        1);
      return 0;
    case 1663:
      CRunningScript::CollectParameters(this, 2);
      v3 = 0;
      CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1202] = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1202] & 0xE7 | (8 * (ScriptParams[1] & 3));
      return v3;
    case 1664:
      CRunningScript::CollectParameters(this, 2);
      v100 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 6u);
      if ( v100 > 0x3F )
        return 0;
      v101 = v100;
      v102 = &CScripted2dEffects::ms_userLists[v101];
      v103 = v102->m_userTypes[0];
      v104 = ScriptParams[1];
      v102->m_bUseList = 1;
      if ( v103 == -1 )
      {
        v111 = 0;
      }
      else
      {
        v105 = &CScripted2dEffects::ms_userLists[v101];
        v106 = v105->m_userTypes[1];
        v102 = (CEffectUserList *)&v105->m_userTypes[1];
        if ( v106 == -1 )
        {
          v111 = 1;
        }
        else
        {
          v107 = &CScripted2dEffects::ms_userLists[v101];
          v108 = v107->m_userTypes[2];
          v102 = (CEffectUserList *)&v107->m_userTypes[2];
          if ( v108 == -1 )
          {
            v111 = 2;
          }
          else
          {
            v109 = &CScripted2dEffects::ms_userLists[v101];
            v110 = v109->m_userTypes[3];
            v102 = (CEffectUserList *)&v109->m_userTypes[3];
            if ( v110 != -1 )
              return 0;
            v111 = 3;
          }
        }
      }
      v102->m_userTypes[0] = -2;
      v3 = 0;
      CScripted2dEffects::ms_userLists[v101].m_userTypesByPedType[v111] = v104;
      return v3;
    case 1665:
      CRunningScript::CollectParameters(this, 8);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v112 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v112 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v204 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v204 = 0;
      }
      goto LABEL_449;
    case 1666:
      CRunningScript::CollectParameters(this, 5);
      if ( ScriptParams[0] < 0 )
        return 0;
      if ( CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        return 0;
      v113 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !v113 || !*((_DWORD *)v113 + 64) )
        return 0;
      v114 = *(float *)&ScriptParams[2] * -3.1416;
      v115 = *(float *)&ScriptParams[3];
      v116 = *(float *)&ScriptParams[1] * 3.1416;
      goto LABEL_206;
    case 1667:
      CRunningScript::CollectParameters(this, 8);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v112 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v112 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v204 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v204 = 0;
      }
      v222 = ScriptParams[2];
      v223 = ScriptParams[3];
      v224 = ScriptParams[4];
      offsetPos = *(RwV3d_0 *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[2] <= -999.9 )
      {
        v3 = 0;
        CPhysical::AttachEntityToEntity((CPhysical *)v112, (CEntity *)v204, 0, 0);
        return v3;
      }
      v225 = *(float *)&ScriptParams[5] * 3.1416;
      *(float *)&v226 = (float)(*(float *)&ScriptParams[6] * 3.1416) / 180.0;
LABEL_450:
      CPhysical::AttachEntityToEntity((int)v112, (CEntity *)v204, v222, v223, v224, COERCE__DWORD_(v225 / 180.0), v226);
      return 0;
    case 1668:
      CRunningScript::CollectParameters(this, 5);
      if ( ScriptParams[0] < 0 )
        return 0;
      if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        return 0;
      v113 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( !v113 || !*((_DWORD *)v113 + 64) )
        return 0;
      v114 = *(float *)&ScriptParams[2] * -3.1416;
      v115 = *(float *)&ScriptParams[3];
      v116 = *(float *)&ScriptParams[1] * 3.1416;
LABEL_206:
      v117 = v114 / 180.0;
      if ( ScriptParams[4] )
      {
        CPhysical::DettachEntityFromEntity((CPhysical *)v113, v116 / 180.0, v117, v115, 1);
        return 0;
      }
      v3 = 0;
      CPhysical::DettachEntityFromEntity((CPhysical *)v113, v116 / 180.0, v117, v115, 0);
      return v3;
    case 1669:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0 )
        goto LABEL_216;
      v118 = (unsigned int)ScriptParams[0] >> 8;
      v119 = (CVehiclePool *)CPools::ms_pObjectPool;
      if ( CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        goto LABEL_216;
      v120 = 420;
      goto LABEL_214;
    case 1670:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] < 0 )
        goto LABEL_216;
      v118 = (unsigned int)ScriptParams[0] >> 8;
      v119 = CPools::ms_pVehiclePool;
      if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] != LOBYTE(ScriptParams[0]) )
        goto LABEL_216;
      v120 = 2604;
LABEL_214:
      v121 = (int)&(*v119->m_aStorage)[v118 * v120];
      if ( v121 )
      {
        m_pEntLockOnTarget = *(CEntity **)(v121 + 256);
LABEL_232:
        v9 = m_pEntLockOnTarget != 0;
      }
      else
      {
LABEL_216:
        v9 = 0;
      }
LABEL_233:
      CRunningScript::UpdateCompareFlag(this, v9);
      return 0;
    case 1671:
      CRunningScript::CollectParameters(this, 1);
      CPedIntelligence::ClearTasks(
        *(CPedIntelligence **)&CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][1088],
        1,
        1);
      return 0;
    case 1672:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] == -1 )
      {
        v229 = (CTaskSimpleClearLookAt *)CTask::operator new(0xCu);
        v232 = ScriptParams[1];
        v233 = ScriptParams[2];
        v234 = ScriptParams[3];
        CTaskSimple::CTaskSimple(v229);
        LOBYTE(v229[1]._vptr$CTask) = v232 != 0;
        v229->_vptr$CTask = (int (**)(void))&off_66A7AC;
        BYTE1(v229[1]._vptr$CTask) = v233 != 0;
        BYTE2(v229[1]._vptr$CTask) = v234 != 0;
LABEL_422:
        CTaskComplexSequence::AddTask(&CTaskSequences::ms_taskSequence[CTaskSequences::ms_iActiveSequence], v229);
      }
      else
      {
        if ( ScriptParams[0] >= 0
          && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
        {
          v123 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
        }
        else
        {
          v123 = 0;
        }
        v227 = *(_QWORD *)&ScriptParams[1];
        v228 = ScriptParams[3];
        CTaskSimple::CTaskSimple((CTaskSimple *)&pStringToFill);
        LOBYTE(pStringToFill.right.z) = (_DWORD)v227 != 0;
        LODWORD(pStringToFill.right.x) = &off_66A7AC;
        BYTE1(pStringToFill.right.z) = HIDWORD(v227) != 0;
        BYTE2(pStringToFill.right.z) = v228 != 0;
        CTaskSimpleTogglePedThreatScanner::ProcessPed((CTaskSimpleTogglePedThreatScanner *)&pStringToFill, v123);
        CTask::~CTask((CTask *)&pStringToFill);
      }
      return 0;
    case 1673:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v124 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v124 = 0;
      }
      v205 = *(_QWORD *)&ScriptParams[1];
      v206 = CDamageManager::GetCarNodeIndexFromDoor((eDoors)ScriptParams[1]);
      CAutomobile::PopDoor(v124, v206, (eDoors)v205, HIDWORD(v205) != 0);
      return 0;
    case 1674:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v125 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v125 = 0;
      }
      v207 = ScriptParams[1];
      v208 = CDamageManager::GetCarNodeIndexFromDoor((eDoors)ScriptParams[1]);
      CAutomobile::FixDoor(v125, v208, v207);
      return 0;
    case 1675:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v126 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v126 = 0;
      }
      if ( *((_DWORD *)v126 + 281) )
      {
        v209 = (CTaskComplex *)CTask::operator new(0x14u);
        CTaskComplex::CTaskComplex(v209);
        v209[1]._vptr$CTask = 0;
        LOWORD(v209[1].m_pParent) = 1;
        v209->_vptr$CTask = (int (**)(void))&off_66AF80;
        v210 = -1093107909
             * ((signed int)(*((_DWORD *)v126 + 281) - (unsigned int)CPools::ms_pPedPool->m_aStorage) >> 2);
        CRunningScript::GivePedScriptedTask(this, CPools::ms_pPedPool->m_aFlags[v210] | (v210 << 8), v209, 1675);
      }
      v211 = v126[1164];
      if ( !v211 )
        return 0;
      v212 = v126 + 1128;
      v213 = 250;
      v240 = (CRunningScript *)v126;
      v214 = 0;
      do
      {
        if ( *(_DWORD *)&v212[4 * v214] )
        {
          v215 = rand();
          v216 = (CTaskComplex *)CTask::operator new(0x14u);
          CTaskComplex::CTaskComplex(v216);
          v216->_vptr$CTask = (int (**)(void))&off_66AF80;
          LOWORD(v216[1].m_pParent) = 1;
          v216[1]._vptr$CTask = (int (**)(void))((int)(float)((float)((float)v215 * 0.000015259) * 500.0) + v213);
          v217 = -1093107909
               * ((signed int)(*(_DWORD *)&v212[4 * v214] - (unsigned int)CPools::ms_pPedPool->m_aStorage) >> 2);
          CRunningScript::GivePedScriptedTask(this, CPools::ms_pPedPool->m_aFlags[v217] | (v217 << 8), v216, 1675);
          v211 = v240[4].Locals[20];
        }
        v213 += 500;
        ++v214;
        v3 = 0;
      }
      while ( v214 < v211 );
      return v3;
    case 1676:
      CRunningScript::CollectParameters(this, 1);
      m_pEntLockOnTarget = CWorld::Players[ScriptParams[0]].pPed->m_pEntLockOnTarget;
      goto LABEL_232;
    case 1677:
      v127 = (char *)&TheCamera + 528 * TheCamera.ActiveCam;
      v128 = *(_QWORD *)(v127 + 740);
      v129 = *((_DWORD *)v127 + 187);
      *(_QWORD *)ScriptParams = v128;
      ScriptParams[2] = v129;
      goto LABEL_419;
    case 1678:
      v130 = (float *)((char *)&TheCamera + 528 * TheCamera.ActiveCam);
      *(float *)&v131 = v130[186] + v130[183];
      *(float *)&v132 = v130[187] + v130[184];
      *(float *)ScriptParams = v130[185] + v130[182];
      ScriptParams[1] = v131;
      ScriptParams[2] = v132;
      goto LABEL_419;
    case 1687:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v133 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v133 = 0;
      }
      v218 = *(_QWORD *)&ScriptParams[1];
      CarNodeIndexFromPanel = CDamageManager::GetCarNodeIndexFromPanel((ePanels)ScriptParams[1]);
      CAutomobile::PopPanel(v133, CarNodeIndexFromPanel, (ePanels)v218, HIDWORD(v218) != 0);
      return 0;
    case 1688:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v134 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v134 = 0;
      }
      v220 = ScriptParams[1];
      v221 = CDamageManager::GetCarNodeIndexFromPanel((ePanels)ScriptParams[1]);
      CAutomobile::FixPanel(v134, v221, v220);
      return 0;
    case 1689:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v135 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v135 = 0;
      }
      CAutomobile::FixTyre(v135, (eWheels)ScriptParams[1]);
      return 0;
    case 1690:
      CRunningScript::CollectParameters(this, 8);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v112 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v112 = 0;
      }
      if ( ScriptParams[1] < 0 )
      {
        v204 = 0;
      }
      else if ( CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v204 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v204 = 0;
      }
      goto LABEL_449;
    case 1691:
      CRunningScript::CollectParameters(this, 8);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v112 = CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v112 = 0;
      }
      if ( ScriptParams[1] < 0 )
      {
        v204 = 0;
      }
      else if ( CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v204 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v204 = 0;
      }
LABEL_449:
      v225 = *(float *)&ScriptParams[5] * 3.1416;
      v222 = ScriptParams[2];
      v223 = ScriptParams[3];
      v224 = ScriptParams[4];
      offsetPos = *(RwV3d_0 *)&ScriptParams[2];
      *(float *)&v226 = (float)(*(float *)&ScriptParams[6] * 3.1416) / 180.0;
      goto LABEL_450;
    case 1698:
      CRunningScript::CollectParameters(this, 1);
      v136 = (float *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      *(float *)&v137 = v136[19] * 50.0;
      *(float *)&v138 = v136[20] * 50.0;
      *(float *)ScriptParams = v136[18] * 50.0;
      ScriptParams[1] = v137;
      ScriptParams[2] = v138;
LABEL_419:
      v230 = this;
      v231 = 3;
      goto LABEL_426;
    case 1699:
      CRunningScript::CollectParameters(this, 1);
      v54 = *(_DWORD *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][144];
      goto LABEL_416;
    default:
      return -1;
  }
}
// FC: using guessed type int elf_hash_bucket[16411];
// 66A7AC: using guessed type void *;
// 66AF80: using guessed type void *off_66AF80;
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 677A98: using guessed type void *`vtable for'CTaskComplexLeaveAnyCar;
// 678534: using guessed type int *CPools::ms_pVehiclePool;
// 6786D8: using guessed type C2dEffect (*CScripted2dEffects::ms_effects)[64];
// 67982C: using guessed type script_effect_struct (*CTheScripts::ScriptEffectSystemArray)[32];

//----- (0035B130) --------------------------------------------------------
Int8 __fastcall CRunningScript::ProcessCommands1700To1799(CRunningScript *this, Int32 CurrCommand)
{
  float32x2_t v2; // d0
  float32x2_t v3; // d1
  float32x2_t v4; // d2
  float32x2_t v5; // d3
  Int8 v7; // r6
  __int64 v8; // r8
  CTaskComplexEvasiveDiveAndGetUp *v9; // r5
  CPed *v10; // r0
  __int64 v11; // kr00_8
  float v12; // s0
  __int64 v13; // kr08_8
  CEntity *v14; // r10
  char *v15; // r4
  RwReal v16; // s18
  Int32 v17; // s20
  Int32 v18; // s16
  CPed *v19; // r2
  uint8 *v20; // r4
  uint8 *v21; // r0
  uint8 *v22; // r1
  unsigned int ActualScriptThingIndex; // r4
  int32 v24; // r1
  int32 ParameterWithoutIncreasingPC; // r0
  int DecisionMaker; // r0
  CPlayerPedData *m_pPlayerData; // r0
  __int64 v28; // kr10_8
  CTaskComplexSitDownThenIdleThenStandUp *v29; // r6
  CTaskComplexSitDownThenIdleThenStandUp *v30; // r0
  int *v31; // r1
  int32 v32; // r0
  Int32 v33; // r1
  Int32 v34; // r1
  UInt8 v35; // r2
  bool v36; // r1
  __int64 v37; // kr18_8
  float v38; // s16
  float v39; // s18
  Int32 v40; // r5
  float v41; // s20
  float v42; // s22
  int32 v43; // r0
  script_searchlight_struct *v44; // r4
  char v45; // r1
  CEntity *v46; // r0
  CEntity **p_pSearchLightTargetEntity; // r4
  CEntity *pSearchLightTargetEntity; // t1
  float v49; // s0
  float v50; // s2
  Int32 v51; // r5
  Int32 v52; // r9
  Int32 v53; // r10
  Int32 v54; // r8
  int32 v55; // r0
  script_searchlight_struct *v56; // r4
  CEntity *v57; // t1
  Int32 *v58; // r1
  uint8 *v59; // r8
  uint8 *v60; // r1
  bool IsLineOfSightClear; // r1
  RwReal v62; // r8
  RwReal v63; // r9
  RwReal v64; // r10
  CTaskComplexTurnToFaceEntityOrCoord *v65; // r5
  int32 v66; // r1
  CRunningScript *v67; // r0
  CTask *v68; // r2
  int32 v69; // r3
  __int64 v70; // kr20_8
  CVehicle *v71; // r9
  int bCheckDummies; // r0
  CAutomobile *v73; // r0
  int32 v74; // r0
  CEntity *v75; // r3
  float v76; // s16
  float v77; // s18
  uint8 *v78; // r0
  int32 v79; // r0
  unsigned int v80; // r5
  CVehicle *v81; // r0
  __int64 v82; // kr28_8
  CVehicle *v83; // r9
  char **v84; // r1
  CPed *v85; // r4
  CObject *v86; // r1
  UInt8 v87; // r1
  char *PointerToScriptVariable; // r5
  int32 v89; // r0
  script_checkpoint_struct *v90; // r6
  RwReal v91; // r4
  RwReal v92; // r5
  RwReal v93; // r8
  __int64 v94; // kr30_8
  float v95; // s16
  unsigned int v96; // r0
  int v97; // r1
  int bUsed; // t1
  int32 NewUniqueScriptThingIndex; // r0
  RwUInt8 blue; // r2
  RwUInt8 alpha; // r3
  RwUInt8 green; // r1
  int32 v103; // r0
  script_checkpoint_struct *v104; // r5
  CCheckpoint *v105; // r2
  CCheckpoint **p_pCheckpoint; // r5
  CCheckpoint *pCheckpoint; // t1
  char v108; // r3
  CTrain *v109; // r0
  CTrain *v110; // r0
  __int64 v111; // kr40_8
  CVehicle *v112; // r9
  __int64 v113; // kr48_8
  CEntity *v114; // r9
  __int64 v115; // kr50_8
  CTaskSimpleRunAnim *v116; // r6
  AnimationId v117; // r2
  __int64 v118; // kr58_8
  CPed *v119; // r6
  int32 Index; // r0
  unsigned int m_flags; // r1
  int v122; // r0
  Int32 v123; // r1
  CVehicle *v124; // r0
  CVehicle *v125; // r0
  Int32 v126; // r0
  Int32 v127; // r0
  bool HasVehicleUpgradeLoaded; // r0
  Int32 v129; // r4
  int32 OtherUpgrade; // r0
  const CPed *v131; // r5
  unsigned int v132; // r0
  unsigned int v133; // r0
  CVector *ScriptFireCoords; // r0
  __int64 v135; // d16
  RwReal z; // r0
  float GroundZForCoord; // s0
  CPathFind *v138; // s16
  Int32 v139; // s18
  float NodeOrientationForCarPlacement; // r5
  CNodeAddress *NthNodeClosestToCoors; // r8
  char v142; // r6
  int IsEntityWithinSearchLight; // r0
  CVehicle *v144; // r0
  int v145; // r3
  CVehicle *v146; // r0
  CVehicle *v147; // r0
  CTrain *v148; // r0
  const CPed *v149; // r5
  uint8 *v150; // r4
  __int64 v151; // kr60_8
  CTaskSimpleCarSetTempAction *v152; // r5
  CEntity *v153; // r1
  void *v154; // r5
  Int32 v155; // r4
  int32 v156; // r0
  float v157; // r10
  CTaskComplexDrivePointRoute *v158; // r5
  float CarRoll; // r0
  script_searchlight_struct *v160; // r5
  CEntity *v161; // r0
  CEntity **v162; // r5
  CEntity *v163; // t1
  CEntity **v164; // r1
  UInt8 v165; // r2
  __int64 v166; // kr68_8
  RwReal v167; // r8
  RwReal v168; // r9
  CTaskComplexGoToPointAiming *v169; // r5
  CPedGroup *PedsGroup; // r0
  CPedGroup *v171; // r5
  CObject *v172; // r2
  CTrain *Caboose; // r0
  CEntity *v174; // r10
  __int64 v175; // kr78_8
  void *v176; // r5
  char v177; // r1
  CTaskComplexArrestPed *v178; // r5
  Int32 v179; // r1
  Int32 v180; // r1
  unsigned int v181; // r0
  int v182; // r6
  int32 m_nSize; // r2
  uint8 *v184; // r1
  float32x2_t v185; // d16
  int v186; // r3
  float v187; // s2
  int v188; // r1
  int v189; // r2
  CPool<CPed,CCopPed>::StorageType *m_aStorage; // r5
  CPool<CPed,CCopPed>::StorageType *v191; // r6
  bool v192; // zf
  uint8 *v193; // r4
  CVector *v194; // r5
  CVector *v195; // r6
  float32x2_t v196; // d17
  unsigned __int64 v197; // d3
  CObject *v198; // r3
  int v199; // r4
  int v200; // r6
  float v201; // s16
  CTaskComplexCarDriveMission *v202; // r5
  unsigned int v203; // r0
  float v204; // s20
  RwReal v205; // s16
  RwReal v206; // s18
  int v207; // r0
  unsigned __int8 v208; // r1
  char v209; // r0
  CRunningScript *v210; // r0
  Int16 v211; // r1
  CRunningScript *v212; // r0
  char v213; // r3
  unsigned int v214; // r3
  int v215; // r1
  int v216; // r2
  uint8 v217; // r6
  unsigned int v218; // r3
  CTaskSimpleTriggerLookAt *v219; // r5
  Int32 v220; // r5
  CVector bAchieveHeadingFirst; // [sp+0h] [bp-1A8h]
  RwV3d_0 bAchieveHeadingFirsta; // [sp+0h] [bp-1A8h]
  CEntity *pAimEntity; // [sp+20h] [bp-188h]
  CEntity *pAimEntitya; // [sp+20h] [bp-188h]
  Int32 v226; // [sp+24h] [bp-184h]
  RwReal v227; // [sp+28h] [bp-180h]
  Int32 v228; // [sp+28h] [bp-180h]
  Int32 v229; // [sp+2Ch] [bp-17Ch]
  unsigned int v230; // [sp+2Ch] [bp-17Ch]
  CRect area; // [sp+30h] [bp-178h] BYREF
  CTrain *v232; // [sp+48h] [bp-160h] BYREF
  CVector pEndCoors; // [sp+4Ch] [bp-15Ch] BYREF
  CVector pStartCoors; // [sp+58h] [bp-150h] BYREF
  CVector vDiveDir; // [sp+64h] [bp-144h] BYREF
  CVector v236; // 0:r2.8,8:^0.4

  *(_QWORD *)&area.left = loc_35B640;
  *(_QWORD *)&area.right = loc_35B648;
  v7 = 0;
  switch ( CurrCommand )
  {
    case 1700:
    case 1702:
    case 1734:
    case 1739:
    case 1742:
    case 1780:
    case 1782:
    case 1783:
    case 1785:
    case 1787:
    case 1790:
    case 1792:
      return v7;
    case 1701:
      CRunningScript::CollectParameters(this, 2);
      v8 = *(_QWORD *)ScriptParams;
      v9 = (CTaskComplexEvasiveDiveAndGetUp *)CTask::operator new(0x24u);
      v7 = 0;
      memset(&vDiveDir, 0, sizeof(vDiveDir));
      CTaskComplexEvasiveDiveAndGetUp::CTaskComplexEvasiveDiveAndGetUp(v9, 0, SHIDWORD(v8), &vDiveDir, 1);
      v9->_vptr$CTask = (int (**)(void))&off_66B950;
      CRunningScript::GivePedScriptedTask(this, v8, v9, 1701);
      return v7;
    case 1703:
      CRunningScript::CollectParameters(this, 9);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v10 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v10 = 0;
      }
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v153 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v153 = 0;
      }
      CPed::AttachPedToBike(
        v10,
        v153,
        *(CVector *)&ScriptParams[2],
        ScriptParams[5],
        (float)(*(float *)&ScriptParams[6] * 3.1416) / 180.0,
        (float)(*(float *)&ScriptParams[7] * 3.1416) / 180.0,
        (eWeaponType)ScriptParams[8]);
      return 0;
    case 1704:
      CRunningScript::CollectParameters(this, 5);
      v11 = *(_QWORD *)ScriptParams;
      v12 = *(float *)&ScriptParams[4] * 3.1416;
      v13 = *(_QWORD *)&ScriptParams[2];
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v14 = (CEntity *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v14 = 0;
      }
      v154 = CTask::operator new(0x54u);
      CTaskComplex::CTaskComplex((CTaskComplex *)v154);
      *(_DWORD *)v154 = &off_6658D0;
      *((_DWORD *)v154 + 3) = v14;
      *((_DWORD *)v154 + 17) = 0;
      if ( (int)v13 <= -1 )
        *((_DWORD *)v154 + 4) = 50000;
      else
        *((_DWORD *)v154 + 4) = v13;
      *((_DWORD *)v154 + 5) = 1000;
      *((_WORD *)v154 + 24) = 0;
      *((_WORD *)v154 + 30) = 0;
      *((_DWORD *)v154 + 10) = 0;
      *((_DWORD *)v154 + 11) = 0;
      *((_DWORD *)v154 + 13) = 0;
      *((_DWORD *)v154 + 14) = 0;
      *((_DWORD *)v154 + 18) = 0;
      *((_QWORD *)v154 + 3) = 0x400000003F800000LL;
      *((_QWORD *)v154 + 4) = 0x4000000000000000LL;
      v213 = *((_BYTE *)v154 + 80);
      *((_DWORD *)v154 + 19) = 6;
      *((_DWORD *)v154 + 16) = &off_66D3C0;
      *((_BYTE *)v154 + 80) = v213 & 0xF0 | 3;
      if ( v14 )
        CEntity::RegisterReference(v14, (CEntity **)v154 + 3);
      v68 = (CTask *)v154;
      *((_DWORD *)v154 + 17) = HIDWORD(v13);
      v69 = 1704;
      *((float *)v154 + 18) = v12 / 180.0;
      *((_DWORD *)v154 + 19) = CPedIntelligence::ms_iDesiredMoveState;
      CPedIntelligence::ms_iDesiredMoveState = 6;
      v67 = this;
      v66 = v11;
      goto LABEL_346;
    case 1705:
      CRunningScript::CollectParameters(this, 5);
      v15 = (char *)ScriptParams[4];
      v16 = *(float *)&ScriptParams[1];
      v17 = ScriptParams[2];
      v18 = ScriptParams[3];
      if ( ScriptParams[4] != -1 )
      {
        if ( ScriptParams[4] == -2 )
          v15 = "List_FillGlobeColPointsER8CPtrListRK8CColLineRP7CEntitybP15CStoredCollPoly";
        if ( ScriptParams[0] != -1 )
          goto LABEL_13;
LABEL_358:
        v219 = (CTaskSimpleTriggerLookAt *)CTask::operator new(0x30u);
        v7 = 0;
        bAchieveHeadingFirsta.x = v16;
        *(_QWORD *)&bAchieveHeadingFirsta.y = __PAIR64__(v18, v17);
        CTaskSimpleTriggerLookAt::CTaskSimpleTriggerLookAt(
          v219,
          0,
          (int32)v15,
          -1,
          bAchieveHeadingFirsta,
          1u,
          0.25,
          1000,
          3);
        CTaskComplexSequence::AddTask(&CTaskSequences::ms_taskSequence[CTaskSequences::ms_iActiveSequence], v219);
        return v7;
      }
      v15 = (_BYTE *)(elf_hash_bucket + 19748);
      if ( ScriptParams[0] == -1 )
        goto LABEL_358;
LABEL_13:
      v7 = 0;
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v19 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v19 = 0;
      }
      vDiveDir = *(CVector *)&ScriptParams[1];
      IKChainManager_c::LookAt(
        &g_ikChainMan,
        "COMMAND_TASK_LOOK_AT_COORD",
        v19,
        0,
        (int32)v15,
        -1,
        &vDiveDir,
        0,
        0.25,
        500,
        6,
        1);
      return v7;
    case 1706:
      CRunningScript::CollectParameters(this, 1);
      v7 = 0;
      CRunningScript::UpdateCompareFlag(this, 0);
      return v7;
    case 1707:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v20 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v20 = 0;
      }
      if ( ScriptParams[1] )
      {
        CPed::RemoveWeaponForScriptedCutscene((CPed *)v20);
        return 0;
      }
      CPed::ReplaceWeaponForScriptedCutscene((CPed *)v20);
      v7 = 0;
      if ( v20[1157] << 31 )
        CPed::RemoveWeaponWhenEnteringVehicle((CPed *)v20, 0);
      return v7;
    case 1708:
      CRunningScript::CollectParameters(this, 1);
      v21 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      if ( v21[1157] << 31 )
        v22 = (uint8 *)*((_DWORD *)v21 + 356);
      else
        v22 = 0;
      if ( v22 )
        v21 = v22;
      *(float *)ScriptParams = sqrtf(
                                 (float)((float)(*((float *)v21 + 18) * *((float *)v21 + 18))
                                       + (float)(*((float *)v21 + 19) * *((float *)v21 + 19)))
                               + (float)(*((float *)v21 + 20) * *((float *)v21 + 20)))
                             * 50.0;
      goto LABEL_387;
    case 1709:
      CRunningScript::CollectParameters(this, 2);
      ActualScriptThingIndex = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 8u);
      if ( ActualScriptThingIndex <= 7 )
      {
        if ( ScriptParams[1] == -1 )
          v24 = -1;
        else
          v24 = CTheScripts::GetActualScriptThingIndex(ScriptParams[1], 7u);
        CPedGroupIntelligence::SetGroupDecisionMakerType(
          &CPedGroups::ms_groups[ActualScriptThingIndex].m_intelligence,
          v24);
      }
      return 0;
    case 1710:
      CRunningScript::CollectParameters(this, 1);
      CDecisionMakerTypesFileLoader::GetGrpDMName(ScriptParams[0], (unsigned __int8 *)&vDiveDir);
      ParameterWithoutIncreasingPC = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(ParameterWithoutIncreasingPC, 7u);
      DecisionMaker = CDecisionMakerTypesFileLoader::LoadDecisionMaker(
                        (const unsigned __int8 *)&vDiveDir,
                        1u,
                        this->IsThisAMissionScript,
                        -1);
      ScriptParams[0] = CTheScripts::GetNewUniqueScriptThingIndex(DecisionMaker, 7u);
      CRunningScript::StoreParameters(this, 1);
      if ( this->IsThisAMissionScript )
        CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, ScriptParams[0], 9u);
      return 0;
    case 1711:
      CRunningScript::CollectParameters(this, 2);
      m_pPlayerData = CWorld::Players[ScriptParams[0]].pPed->m_pPlayerData;
      v7 = 0;
      if ( ScriptParams[1] )
        m_pPlayerData->m_bPlayerSprintDisabled = 1;
      else
        m_pPlayerData->m_bPlayerSprintDisabled = 0;
      return v7;
    case 1712:
      CRunningScript::CollectParameters(this, 2);
      v28 = *(_QWORD *)ScriptParams;
      v29 = (CTaskComplexSitDownThenIdleThenStandUp *)CTask::operator new(0x14u);
      if ( HIDWORD(v28) == -1 )
      {
        v31 = &elf_hash_bucket[4937];
        v30 = v29;
      }
      else
      {
        v30 = v29;
        v31 = (int *)HIDWORD(v28);
      }
      CTaskComplexSitDownThenIdleThenStandUp::CTaskComplexSitDownThenIdleThenStandUp(v30, (const int)v31, 0, 0);
      v67 = this;
      v66 = v28;
      v68 = v29;
      v69 = 1712;
      goto LABEL_346;
    case 1713:
      CRunningScript::CollectParameters(this, 8);
      v32 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(v32, 2u);
      v33 = CTheScripts::AddScriptSearchLight(
              *(float *)ScriptParams,
              *(float *)&ScriptParams[1],
              *(float *)&ScriptParams[2],
              0,
              *(float *)&ScriptParams[3],
              *(float *)&ScriptParams[4],
              *(float *)&ScriptParams[5],
              *(float *)&ScriptParams[6],
              *(float *)&ScriptParams[7]);
      ScriptParams[0] = v33;
      if ( this->IsThisAMissionScript )
        goto LABEL_243;
      goto LABEL_387;
    case 1714:
      CRunningScript::CollectParameters(this, 1);
      if ( CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 2u) < 0 )
        return 0;
      CTheScripts::RemoveScriptSearchLight(ScriptParams[0]);
      if ( !this->IsThisAMissionScript )
        return 0;
      v34 = ScriptParams[0];
      v35 = 11;
      goto LABEL_116;
    case 1715:
      CRunningScript::CollectParameters(this, 1);
      v36 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 2u) >= 0;
      goto LABEL_363;
    case 1716:
      CRunningScript::CollectParameters(this, 8);
      v37 = *(_QWORD *)&ScriptParams[6];
      v38 = *(float *)&ScriptParams[4];
      v39 = *(float *)&ScriptParams[5];
      v40 = ScriptParams[3];
      v41 = *(float *)&ScriptParams[1];
      v42 = *(float *)&ScriptParams[2];
      v43 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 2u);
      if ( v43 < 0 )
        return 0;
      v44 = &CTheScripts::ScriptSearchLightArray[v43];
      v45 = -126;
      pSearchLightTargetEntity = v44->pSearchLightTargetEntity;
      p_pSearchLightTargetEntity = &v44->pSearchLightTargetEntity;
      v46 = pSearchLightTargetEntity;
      v49 = *((float *)p_pSearchLightTargetEntity - 13);
      v50 = *((float *)p_pSearchLightTargetEntity - 12);
      *(p_pSearchLightTargetEntity - 6) = (CEntity *)v40;
      *((float *)p_pSearchLightTargetEntity - 8) = v41;
      *((float *)p_pSearchLightTargetEntity - 7) = v42;
      *((float *)p_pSearchLightTargetEntity - 5) = v38;
      *((float *)p_pSearchLightTargetEntity - 4) = v39;
      *(_QWORD *)(p_pSearchLightTargetEntity - 3) = v37;
      if ( (float)((float)((float)(v49 - v41) * (float)(v49 - v41)) + (float)((float)(v50 - v42) * (float)(v50 - v42))) <= (float)((float)((float)(v49 - v38) * (float)(v49 - v38)) + (float)((float)(v50 - v39) * (float)(v50 - v39))) )
        v45 = -127;
      goto LABEL_47;
    case 1717:
      CRunningScript::CollectParameters(this, 5);
      v51 = ScriptParams[1];
      v52 = ScriptParams[2];
      v53 = ScriptParams[3];
      v54 = ScriptParams[4];
      v55 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 2u);
      v7 = 0;
      if ( v55 < 0 )
        return v7;
      v56 = &CTheScripts::ScriptSearchLightArray[v55];
      v57 = v56->pSearchLightTargetEntity;
      p_pSearchLightTargetEntity = &v56->pSearchLightTargetEntity;
      v46 = v57;
      v58 = (Int32 *)(p_pSearchLightTargetEntity - 8);
      *v58 = v51;
      v58[1] = v52;
      v58[2] = v53;
      v45 = -124;
      *(p_pSearchLightTargetEntity - 5) = 0;
      *(p_pSearchLightTargetEntity - 4) = 0;
      *(p_pSearchLightTargetEntity - 3) = 0;
      *(p_pSearchLightTargetEntity - 2) = (CEntity *)v54;
LABEL_47:
      *((_BYTE *)p_pSearchLightTargetEntity - 69) = v45;
      if ( v46 )
        CEntity::CleanUpOldReference(v46, p_pSearchLightTargetEntity);
      v7 = 0;
      *p_pSearchLightTargetEntity = 0;
      return v7;
    case 1718:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v59 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v59 = 0;
      }
      v155 = ScriptParams[2];
      v156 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 2u);
      v7 = 0;
      if ( v156 >= 0 )
        goto LABEL_238;
      return v7;
    case 1719:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v60 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v60 = 0;
      }
      goto LABEL_360;
    case 1721:
      IsLineOfSightClear = 0;
      v7 = 0;
      if ( CCutsceneMgr::ms_cutsceneLoadStatus == 2 )
        IsLineOfSightClear = 1;
      goto LABEL_67;
    case 1722:
      CRunningScript::CollectParameters(this, 4);
      v62 = *(float *)&ScriptParams[1];
      v63 = *(float *)&ScriptParams[2];
      v64 = *(float *)&ScriptParams[3];
      v65 = (CTaskComplexTurnToFaceEntityOrCoord *)CTask::operator new(0x28u);
      vDiveDir.x = v62;
      vDiveDir.y = v63;
      vDiveDir.z = v64;
      CTaskComplexTurnToFaceEntityOrCoord::CTaskComplexTurnToFaceEntityOrCoord(v65, &vDiveDir, 0.5, 0.2);
      v66 = ScriptParams[0];
      v67 = this;
      v68 = v65;
      v69 = 1722;
      goto LABEL_346;
    case 1723:
      CRunningScript::CollectParameters(this, 3);
      v7 = 0;
      v70 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v71 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v71 = 0;
      }
      v157 = *(float *)&ScriptParams[2];
      v158 = (CTaskComplexDrivePointRoute *)CTask::operator new(0x2Cu);
      CTaskComplexDrivePointRoute::CTaskComplexDrivePointRoute(
        v158,
        v71,
        &CTaskComplexFollowPointRoute::ms_pointRoute,
        v157,
        2,
        -1,
        -1.0,
        0);
      CRunningScript::GivePedScriptedTask(this, v70, v158, 1723);
      return v7;
    case 1724:
      CRunningScript::CollectParameters(this, 7);
      pStartCoors = *(CVector *)ScriptParams;
      pEndCoors = *(CVector *)&ScriptParams[3];
      FireOneInstantHitRound(&pStartCoors, &pEndCoors, ScriptParams[6]);
      return 0;
    case 1725:
      CRunningScript::CollectParameters(this, 11);
      pStartCoors = *(CVector *)ScriptParams;
      v7 = 0;
      bCheckDummies = ScriptParams[10];
      pEndCoors = *(CVector *)&ScriptParams[3];
      if ( ScriptParams[10] )
        bCheckDummies = 1;
      IsLineOfSightClear = CWorld::GetIsLineOfSightClear(
                             &pStartCoors,
                             &pEndCoors,
                             ScriptParams[6] != 0,
                             ScriptParams[7] != 0,
                             ScriptParams[8] != 0,
                             ScriptParams[9] != 0,
                             bCheckDummies,
                             0,
                             0);
LABEL_67:
      CRunningScript::UpdateCompareFlag(this, IsLineOfSightClear);
      return v7;
    case 1726:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v73 = (CAutomobile *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v73 = 0;
      }
      CarRoll = CAutomobile::GetCarRoll(v73);
      goto LABEL_274;
    case 1727:
      CRunningScript::CollectParameters(this, 3);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v59 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v59 = 0;
      }
      v155 = ScriptParams[2];
      v156 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 2u);
      v7 = 0;
      if ( v156 < 0 )
        return v7;
LABEL_238:
      v160 = &CTheScripts::ScriptSearchLightArray[v156];
      v163 = v160->pSearchLightTargetEntity;
      v162 = &v160->pSearchLightTargetEntity;
      v161 = v163;
      *((_BYTE *)v162 - 69) = -125;
      v164 = v162 - 8;
      *(v162 - 4) = 0;
      *(v162 - 3) = 0;
      *(v162 - 2) = (CEntity *)v155;
      *(_QWORD *)v164 = 0LL;
      *((_QWORD *)v164 + 1) = 0LL;
      if ( v163 )
        CEntity::CleanUpOldReference(v161, v162);
      *v162 = (CEntity *)v59;
      CEntity::RegisterReference((CEntity *)v59, v162);
      return 0;
    case 1728:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[1] < 0 )
      {
        v60 = 0;
      }
      else if ( CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v60 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v60 = 0;
      }
LABEL_360:
      IsEntityWithinSearchLight = CTheScripts::IsEntityWithinSearchLight(ScriptParams[0], (CEntity *)v60);
      goto LABEL_361;
    case 1729:
      CRunningScript::CollectParameters(this, 9);
      v74 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(v74, 2u);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v75 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v75 = 0;
      }
      v33 = CTheScripts::AddScriptSearchLight(
              *(float *)&ScriptParams[1],
              *(float *)&ScriptParams[2],
              *(float *)&ScriptParams[3],
              v75,
              *(float *)&ScriptParams[4],
              *(float *)&ScriptParams[5],
              *(float *)&ScriptParams[6],
              *(float *)&ScriptParams[7],
              *(float *)&ScriptParams[8]);
      ScriptParams[0] = v33;
      if ( !this->IsThisAMissionScript )
        goto LABEL_387;
LABEL_243:
      v165 = 11;
      goto LABEL_370;
    case 1730:
      CRunningScript::CollectParameters(this, 11);
      v76 = *(float *)&ScriptParams[5];
      v77 = *(float *)&ScriptParams[6];
      v229 = ScriptParams[0];
      if ( ScriptParams[7] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[7] >> 8] == LOBYTE(ScriptParams[7]) )
      {
        v78 = CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[7] >> 8];
      }
      else
      {
        v78 = 0;
      }
      pAimEntitya = (CEntity *)v78;
      v166 = *(_QWORD *)&ScriptParams[1];
      v167 = *(float *)&ScriptParams[3];
      v168 = *(float *)&ScriptParams[8];
      v228 = ScriptParams[9];
      v226 = ScriptParams[10];
      v169 = (CTaskComplexGoToPointAiming *)CTask::operator new(0x38u);
      *(_QWORD *)&vDiveDir.x = v166;
      bAchieveHeadingFirst.x = v168;
      *(_QWORD *)&bAchieveHeadingFirst.y = __PAIR64__(v226, v228);
      vDiveDir.z = v167;
      CTaskComplexGoToPointAiming::CTaskComplexGoToPointAiming(
        v169,
        ScriptParams[4],
        &vDiveDir,
        pAimEntitya,
        bAchieveHeadingFirst,
        v76,
        v77);
      v67 = this;
      v66 = v229;
      v68 = v169;
      v69 = 1730;
      goto LABEL_346;
    case 1731:
      CRunningScript::CollectParameters(this, 4);
      pStartCoors = *(CVector *)ScriptParams;
      ScriptParams[0] = CFireManager::GetNumFiresInRange(&gFireManager, &pStartCoors, *(float *)&ScriptParams[3]);
      goto LABEL_387;
    case 1732:
      CRunningScript::CollectParameters(this, 1);
      CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 2u);
      v79 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CRadar::GetActualBlipArrayIndex(v79);
      v7 = 0;
      v80 = CRadar::SetEntityBlip(BLIPTYPE_SEARCHLIGHT, ScriptParams[0], 0, BLIPDISPLAY_BOTH, this->ScriptName);
      CRadar::ChangeBlipScale(v80, 3);
      ScriptParams[0] = v80;
      goto LABEL_122;
    case 1733:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v81 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v81 = 0;
      }
      CVehicleRecording::SkipToEndAndStopPlaybackRecordedCar(v81);
      return 0;
    case 1735:
      CRunningScript::CollectParameters(this, 4);
      v82 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] == -1
        || ScriptParams[1] < 0
        || CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] != LOBYTE(ScriptParams[1]) )
      {
        v83 = 0;
      }
      else
      {
        v83 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      v151 = *(_QWORD *)&ScriptParams[2];
      v152 = (CTaskSimpleCarSetTempAction *)CTask::operator new(0x68u);
      CTaskSimpleCarSetTempAction::CTaskSimpleCarSetTempAction(v152, v83, v151, SHIDWORD(v151));
      v67 = this;
      v66 = v82;
      v68 = v152;
      v69 = 1735;
      goto LABEL_346;
    case 1736:
      CRunningScript::CollectParameters(this, 1);
      v84 = gbLARiots_ptr;
      goto LABEL_187;
    case 1737:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v85 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v85 = 0;
      }
      PedsGroup = CPedGroups::GetPedsGroup(v85);
      v171 = PedsGroup;
      if ( PedsGroup && !CPedGroupMembership::IsLeader(&PedsGroup->m_membership, v85) )
      {
        CPedGroupMembership::RemoveMember(&v171->m_membership, v85);
        CPedGroup::Process(v171);
      }
      return 0;
    case 1738:
      CRunningScript::CollectParameters(this, 7);
      if ( ScriptParams[1] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v86 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v86 = 0;
      }
      if ( ScriptParams[2] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[2] >> 8] == LOBYTE(ScriptParams[2]) )
      {
        v172 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[2] >> 8];
      }
      else
      {
        v172 = 0;
      }
      if ( ScriptParams[3] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[3] >> 8] == LOBYTE(ScriptParams[3]) )
      {
        v198 = (CObject *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[3] >> 8];
      }
      else
      {
        v198 = 0;
      }
      CTheScripts::AttachSearchlightToSearchlightObject(
        ScriptParams[0],
        v86,
        v172,
        v198,
        *(float *)&ScriptParams[4],
        *(float *)&ScriptParams[5],
        *(float *)&ScriptParams[6]);
      return 0;
    case 1743:
      CRunningScript::CollectParameters(this, 1);
      return 0;
    case 1744:
      CRunningScript::CollectParameters(this, 1);
      v84 = (char **)&CCarCtrl::bAllowEmergencyServicesToBeCreated;
      goto LABEL_187;
    case 1745:
      v87 = 2;
      goto LABEL_103;
    case 1746:
      v87 = 1;
LABEL_103:
      PointerToScriptVariable = (char *)CRunningScript::GetPointerToScriptVariable(this, v87);
      CRunningScript::ReadTextLabelFromScript(this, (Char *)&vDiveDir, 0x10u);
      strncpy(PointerToScriptVariable, (const char *)&vDiveDir, 0x10u);
      return 0;
    case 1749:
      CRunningScript::CollectParameters(this, 8);
      v89 = CRunningScript::CollectNextParameterWithoutIncreasingPC(this);
      CTheScripts::GetActualScriptThingIndex(v89, 3u);
      v90 = CTheScripts::ScriptCheckpointArray;
      v230 = ScriptParams[0];
      v91 = *(float *)&ScriptParams[1];
      v92 = *(float *)&ScriptParams[2];
      v93 = *(float *)&ScriptParams[3];
      v227 = *(float *)&ScriptParams[4];
      v94 = *(_QWORD *)&ScriptParams[5];
      v95 = *(float *)&ScriptParams[7];
      v96 = -1;
      do
      {
        bUsed = v90->bUsed;
        ++v90;
        v97 = bUsed;
        ++v96;
      }
      while ( v96 <= 0x13 && v97 );
      v90[-1].bUsed = 1;
      NewUniqueScriptThingIndex = CTheScripts::GetNewUniqueScriptThingIndex(v96, 3u);
      vDiveDir.x = v91;
      vDiveDir.y = v92;
      vDiveDir.z = v93;
      *(_QWORD *)&pStartCoors.y = v94;
      pStartCoors.x = v227;
      green = v230 - 3;
      if ( v230 - 3 >= 6 )
      {
        if ( v230 <= 2 )
        {
          LOBYTE(v93) = COLMISSIONTUBE._anon_0._anon_0.red;
          green = COLMISSIONTUBE._anon_0._anon_0.green;
          blue = COLMISSIONTUBE._anon_0._anon_0.blue;
          alpha = COLMISSIONTUBE._anon_0._anon_0.alpha;
        }
      }
      else
      {
        alpha = 96;
        LOBYTE(v93) = COLMISSIONTORUS._anon_0._anon_0.red;
        green = COLMISSIONTORUS._anon_0._anon_0.green;
        blue = COLMISSIONTORUS._anon_0._anon_0.blue;
      }
      v220 = NewUniqueScriptThingIndex;
      v90[-1].pCheckpoint = CCheckpoints::PlaceMarker(
                              NewUniqueScriptThingIndex,
                              v230,
                              &vDiveDir,
                              &pStartCoors,
                              v95,
                              LOBYTE(v93),
                              green,
                              blue,
                              alpha,
                              0x400u,
                              0.075,
                              0);
      ScriptParams[0] = v220;
      ++CTheScripts::NumberOfScriptCheckpoints;
      if ( !this->IsThisAMissionScript )
        goto LABEL_387;
      v33 = v220;
      v165 = 12;
LABEL_370:
      CMissionCleanup::AddEntityToList(&CTheScripts::MissionCleanUp, v33, v165);
      goto LABEL_387;
    case 1750:
      CRunningScript::CollectParameters(this, 1);
      if ( CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 3u) >= 0 )
      {
        v103 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 3u);
        if ( v103 != -1 )
        {
          v104 = &CTheScripts::ScriptCheckpointArray[v103];
          pCheckpoint = v104->pCheckpoint;
          p_pCheckpoint = &v104->pCheckpoint;
          v105 = pCheckpoint;
          CTheScripts::ScriptCheckpointArray[v103].bUsed = 0;
          if ( pCheckpoint )
            CCheckpoints::DeleteCP(v105->m_nIdentifier, v105->m_nType);
          *p_pCheckpoint = 0;
          --CTheScripts::NumberOfScriptCheckpoints;
        }
        if ( this->IsThisAMissionScript )
        {
          v34 = ScriptParams[0];
          v35 = 12;
LABEL_116:
          CMissionCleanup::RemoveEntityFromList(&CTheScripts::MissionCleanUp, v34, v35);
        }
      }
      return 0;
    case 1751:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] )
      {
        v7 = 0;
        CTrain::DisableRandomTrains(0);
        return v7;
      }
      CTrain::DisableRandomTrains(1);
      return 0;
    case 1752:
      CRunningScript::CollectParameters(this, 5);
      v7 = 0;
      v108 = ScriptParams[4];
      if ( ScriptParams[4] )
        v108 = 1;
      CTrain::CreateMissionTrain(*(CVector *)&ScriptParams[1], v108, ScriptParams[0], &v232, 0, -1, -1, 1);
      ScriptParams[0] = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                                        * (((char *)v232 - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2)] | (-422239488 * (((char *)v232 - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2));
LABEL_122:
      CRunningScript::StoreParameters(this, 1);
      return v7;
    case 1753:
      CTrain::RemoveMissionTrains();
      return 0;
    case 1754:
      CTrain::ReleaseMissionTrains();
      return 0;
    case 1755:
      CTrain::RemoveAllTrains();
      return 0;
    case 1756:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v109 = (CTrain *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v109 = 0;
      }
      v232 = v109;
      CTrain::SetTrainSpeed(v109, *(float *)&ScriptParams[1]);
      return 0;
    case 1757:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v148 = (CTrain *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v148 = 0;
      }
      v232 = v148;
      CTrain::SetTrainCruiseSpeed(v148, *(float *)&ScriptParams[1]);
      return 0;
    case 1758:
      CRunningScript::CollectParameters(this, 1);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v110 = (CTrain *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v110 = 0;
      }
      v232 = v110;
      Caboose = CTrain::FindCaboose(v110);
      ScriptParams[0] = CPools::ms_pVehiclePool->m_aFlags[-1075391197
                                                        * (((char *)Caboose - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2)] | (-422239488 * (((char *)Caboose - (char *)CPools::ms_pVehiclePool->m_aStorage) >> 2));
      goto LABEL_387;
    case 1759:
      CRunningScript::CollectParameters(this, 1);
      CPlayerPed::RemovePlayerPed(ScriptParams[0]);
      return 0;
    case 1760:
      CRunningScript::CollectParameters(this, 1);
      CCamera::StartCooperativeCamMode(&TheCamera);
      return 0;
    case 1761:
      CRunningScript::CollectParameters(this, 6);
      v111 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v112 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v112 = 0;
      }
      if ( ScriptParams[2] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[2] >> 8] == LOBYTE(ScriptParams[2]) )
      {
        v174 = (CEntity *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[2] >> 8];
      }
      else
      {
        v174 = 0;
      }
      v199 = ScriptParams[3];
      v200 = ScriptParams[5];
      v201 = *(float *)&ScriptParams[4];
      v202 = (CTaskComplexCarDriveMission *)CTask::operator new(0x2Cu);
      CTaskComplexCarDriveMission::CTaskComplexCarDriveMission(v202, v112, v174, v199, v200, v201);
      v67 = this;
      v66 = v111;
      v68 = v202;
      v69 = 1761;
      goto LABEL_346;
    case 1762:
      CRunningScript::CollectParameters(this, 4);
      v113 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pObjectPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v114 = (CEntity *)CPools::ms_pObjectPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v114 = 0;
      }
      v175 = *(_QWORD *)&ScriptParams[2];
      v176 = CTask::operator new(0x4Cu);
      CTaskComplex::CTaskComplex((CTaskComplex *)v176);
      *(_DWORD *)v176 = &off_6656D4;
      *((_DWORD *)v176 + 4) = v175;
      *((_DWORD *)v176 + 5) = 1000;
      *((_DWORD *)v176 + 6) = HIDWORD(v175);
      *((_DWORD *)v176 + 7) = 0x40000000;
      *((_DWORD *)v176 + 8) = 0;
      *((_DWORD *)v176 + 9) = 0x40000000;
      *((_WORD *)v176 + 24) = 0;
      *((_WORD *)v176 + 30) = 0;
      *((_DWORD *)v176 + 10) = 0;
      *((_DWORD *)v176 + 11) = 0;
      *((_DWORD *)v176 + 13) = 0;
      *((_DWORD *)v176 + 14) = 0;
      v177 = *((_BYTE *)v176 + 72);
      *((_DWORD *)v176 + 16) = &off_665710;
      *((_DWORD *)v176 + 17) = 6;
      *((_BYTE *)v176 + 72) = v177 & 0xF0 | 3;
      *((_DWORD *)v176 + 3) = v114;
      if ( v114 )
        CEntity::RegisterReference(v114, (CEntity **)v176 + 3);
      v67 = this;
      v66 = v113;
      v68 = (CTask *)v176;
      v69 = 1762;
      goto LABEL_346;
    case 1763:
      CRunningScript::CollectParameters(this, 2);
      v115 = *(_QWORD *)ScriptParams;
      v116 = (CTaskSimpleRunAnim *)CTask::operator new(0x20u);
      if ( HIDWORD(v115) )
        v117 = ANIM_STD_WEAPON_CROUCH_RIGHT;
      else
        v117 = ANIM_STD_WEAPON_CROUCH_LEFT;
      CTaskSimpleRunAnim::CTaskSimpleRunAnim(v116, ANIM_STD_PED, v117, 4.0, 0);
      v67 = this;
      v66 = v115;
      v68 = v116;
      v69 = 1763;
      goto LABEL_346;
    case 1764:
      CRunningScript::CollectParameters(this, 2);
      v118 = *(_QWORD *)ScriptParams;
      if ( ScriptParams[1] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[1] >> 8] == LOBYTE(ScriptParams[1]) )
      {
        v119 = (CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[1] >> 8];
      }
      else
      {
        v119 = 0;
      }
      v178 = (CTaskComplexArrestPed *)CTask::operator new(0x24u);
      CTaskComplexArrestPed::CTaskComplexArrestPed(v178, v119);
      v67 = this;
      v66 = v118;
      v68 = v178;
      v69 = 1764;
LABEL_346:
      CRunningScript::GivePedScriptedTask(v67, v66, v68, v69);
      return 0;
    case 1765:
      CRunningScript::CollectParameters(this, 2);
      ScriptParams[0] = *(&CModelInfo::ms_modelInfoPtrs[*(__int16 *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][38]][15].m_dynamicIndex
                        + ScriptParams[1]);
      goto LABEL_387;
    case 1766:
      CRunningScript::CollectParameters(this, 1);
      Index = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        Index = CTheScripts::UsedObjectArray[-ScriptParams[0]].Index;
      m_flags = CModelInfo::ms_modelInfoPtrs[Index]->m_flags;
      v122 = (m_flags >> 10) & 0x1F;
      if ( (m_flags & 0x100) != 0 )
      {
        switch ( v122 )
        {
          case 1:
            v123 = 11;
            goto LABEL_386;
          case 2:
            v123 = 12;
            goto LABEL_386;
          case 12:
            v123 = 14;
            goto LABEL_386;
          case 13:
            v123 = 15;
            goto LABEL_386;
          case 19:
            v123 = 13;
            goto LABEL_386;
          case 20:
          case 21:
          case 22:
            v123 = 16;
LABEL_386:
            ScriptParams[0] = v123;
            break;
          default:
            goto LABEL_387;
        }
      }
      else
      {
        switch ( v122 )
        {
          case 0:
            v123 = 0;
            goto LABEL_386;
          case 1:
          case 2:
            v123 = 1;
            goto LABEL_386;
          case 6:
            v123 = 2;
            goto LABEL_386;
          case 8:
          case 9:
            v123 = 3;
            goto LABEL_386;
          case 10:
            v123 = 4;
            goto LABEL_386;
          case 11:
            v123 = 5;
            goto LABEL_386;
          case 12:
            v123 = 6;
            goto LABEL_386;
          case 14:
            v123 = 7;
            goto LABEL_386;
          case 15:
            v123 = 8;
            goto LABEL_386;
          case 16:
            v123 = 9;
            goto LABEL_386;
          case 17:
            v123 = 10;
            goto LABEL_386;
          default:
            goto LABEL_387;
        }
      }
      goto LABEL_387;
    case 1767:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v124 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v124 = 0;
      }
      v179 = ScriptParams[1];
      if ( ScriptParams[1] <= -1 )
        v179 = CTheScripts::UsedObjectArray[-ScriptParams[1]].Index;
      CarRoll = COERCE_FLOAT(CVehicle::AddVehicleUpgrade(v124, v179));
LABEL_274:
      *(float *)ScriptParams = CarRoll;
      goto LABEL_387;
    case 1768:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v125 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v125 = 0;
      }
      v180 = ScriptParams[1];
      if ( ScriptParams[1] <= -1 )
        v180 = CTheScripts::UsedObjectArray[-ScriptParams[1]].Index;
      CVehicle::RemoveVehicleUpgrade(v125, v180);
      return 0;
    case 1769:
      CRunningScript::CollectParameters(this, 1);
      v126 = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        v126 = CTheScripts::UsedObjectArray[-ScriptParams[0]].Index;
      CStreaming::RequestVehicleUpgrade(v126, 12);
      return 0;
    case 1770:
      CRunningScript::CollectParameters(this, 1);
      v127 = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        v127 = CTheScripts::UsedObjectArray[-ScriptParams[0]].Index;
      HasVehicleUpgradeLoaded = CStreaming::HasVehicleUpgradeLoaded(v127);
      goto LABEL_318;
    case 1771:
      CRunningScript::CollectParameters(this, 1);
      v129 = ScriptParams[0];
      if ( ScriptParams[0] <= -1 )
        v129 = CTheScripts::UsedObjectArray[-ScriptParams[0]].Index;
      CStreaming::SetMissionDoesntRequireModel(v129);
      OtherUpgrade = CVehicleModelInfo::CLinkedUpgradeList::FindOtherUpgrade(
                       &CVehicleModelInfo::ms_linkedUpgrades,
                       v129);
      if ( OtherUpgrade != -1 )
        CStreaming::SetMissionDoesntRequireModel(OtherUpgrade);
      return 0;
    case 1772:
      CRunningScript::CollectParameters(this, 1);
      ScriptParams[0] = CVehicleModelInfo::GetNumRemaps((CVehicleModelInfo *)CModelInfo::ms_modelInfoPtrs[*(__int16 *)&CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8][38]]);
      goto LABEL_387;
    case 1773:
      CRunningScript::CollectParameters(this, 2);
      CVehicle::SetRemap(
        (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8],
        ScriptParams[1]);
      return 0;
    case 1774:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v149 = (const CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v149 = 0;
      }
      v203 = CTheScripts::GetActualScriptThingIndex(ScriptParams[1], 8u);
      if ( v203 > 7 || !CPedGroups::ms_activeGroups[v203] )
        goto LABEL_319;
      HasVehicleUpgradeLoaded = CPedGroupMembership::IsMember(&CPedGroups::ms_groups[v203].m_membership, v149);
      goto LABEL_318;
    case 1775:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v131 = (const CPed *)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v131 = 0;
      }
      v181 = CTheScripts::GetActualScriptThingIndex(ScriptParams[1], 8u);
      if ( v181 > 7 )
        goto LABEL_319;
      HasVehicleUpgradeLoaded = CPedGroupMembership::IsLeader(&CPedGroups::ms_groups[v181].m_membership, v131);
LABEL_318:
      v36 = HasVehicleUpgradeLoaded;
      goto LABEL_363;
    case 1776:
      CRunningScript::CollectParameters(this, 2);
      v132 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 8u);
      if ( v132 > 7 )
        return 0;
      v7 = 0;
      LODWORD(CPedGroups::ms_groups[v132].m_membership.m_fMaxSeparation) = ScriptParams[1];
      return v7;
    case 1777:
      CRunningScript::CollectParameters(this, 1);
      v7 = 0;
      CGameLogic::bLimitPlayerDistance = 1;
      CGameLogic::MaxPlayerDistance = *(float *)ScriptParams;
      return v7;
    case 1778:
      v7 = 0;
      CGameLogic::bLimitPlayerDistance = 0;
      return v7;
    case 1779:
      CRunningScript::CollectParameters(this, 1);
      v7 = 0;
      CGameLogic::bPlayersCannotTargetEachother = ScriptParams[0] == 0;
      return v7;
    case 1781:
      CRunningScript::CollectParameters(this, 1);
      v133 = CTheScripts::GetActualScriptThingIndex(ScriptParams[0], 5u);
      if ( v133 > 0x3B )
      {
        z = 0.0;
        ScriptParams[0] = 0;
        ScriptParams[1] = 0;
      }
      else
      {
        ScriptFireCoords = CFireManager::GetScriptFireCoords(&gFireManager, v133);
        v135 = *(_QWORD *)&ScriptFireCoords->x;
        z = ScriptFireCoords->z;
        *(_QWORD *)&pStartCoors.x = v135;
        *(_QWORD *)ScriptParams = v135;
        pStartCoors.z = z;
      }
      *(RwReal *)&ScriptParams[2] = z;
      v210 = this;
      v211 = 3;
      goto LABEL_388;
    case 1784:
      CRunningScript::CollectParameters(this, 4);
      GroundZForCoord = *(float *)&ScriptParams[2];
      v138 = (CPathFind *)ScriptParams[0];
      v139 = ScriptParams[1];
      if ( *(float *)&ScriptParams[2] <= -100.0 )
        GroundZForCoord = CWorld::FindGroundZForCoord(*(float *)ScriptParams, *(float *)&ScriptParams[1]);
      *(_QWORD *)&v236.x = __PAIR64__(LODWORD(GroundZForCoord), v139);
      NodeOrientationForCarPlacement = 0.0;
      v236.z = 0.0;
      NthNodeClosestToCoors = CPathFind::FindNthNodeClosestToCoors(
                                (CNodeAddress *)&ThePaths,
                                v138,
                                v236,
                                1000000.0,
                                0.0,
                                1,
                                ScriptParams[3] - 1,
                                0,
                                0,
                                0,
                                (CNodeAddress *)pAimEntity);
      CPathFind::FindNodeCoorsForScript(&vDiveDir, &ThePaths, (CNodeAddress)NthNodeClosestToCoors, (bool *)&pStartCoors);
      if ( LOBYTE(pStartCoors.x) )
      {
        *(CVector *)ScriptParams = vDiveDir;
        NodeOrientationForCarPlacement = CPathFind::FindNodeOrientationForCarPlacement(
                                           &ThePaths,
                                           (CNodeAddress)NthNodeClosestToCoors);
        v142 = 1;
      }
      else
      {
        v142 = 0;
        ScriptParams[0] = 0;
        ScriptParams[1] = 0;
        ScriptParams[2] = 0;
      }
      *(float *)&ScriptParams[3] = NodeOrientationForCarPlacement;
      CRunningScript::StoreParameters(this, 4);
      v212 = this;
      v36 = v142;
      goto LABEL_364;
    case 1786:
      CRunningScript::CollectParameters(this, 1);
      v84 = CGameLogic::bPlayersCanBeInSeparateCars;
LABEL_187:
      v7 = 0;
      **v84 = ScriptParams[0] != 0;
      return v7;
    case 1788:
      CRunningScript::CollectParameters(this, 1);
      IsEntityWithinSearchLight = CStuckCarCheck::IsCarInStuckCarArray(&CTheScripts::StuckCars, ScriptParams[0]);
LABEL_361:
      v36 = IsEntityWithinSearchLight;
      if ( IsEntityWithinSearchLight )
        v36 = 1;
      goto LABEL_363;
    case 1789:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v144 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v144 = 0;
      }
      CVehicleRecording::SetPlaybackSpeed(v144, *(float *)&ScriptParams[1]);
      return 0;
    case 1791:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pPedPool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v145 = (int)CPools::ms_pPedPool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v145 = 0;
      }
      v182 = *(_DWORD *)(v145 + 20);
      m_nSize = CPools::ms_pPedPool->m_nSize;
      v184 = (uint8 *)(v182 + 48);
      if ( !v182 )
        v184 = (uint8 *)(v145 + 4);
      if ( !m_nSize )
        goto LABEL_319;
      v185.n64_u64[0] = *(unsigned __int64 *)(v184 + 4);
      v186 = -v145;
      v187 = *(float *)v184;
      v188 = m_nSize;
      v189 = m_nSize - 1;
      while ( 1 )
      {
        if ( (CPools::ms_pPedPool->m_aFlags[v189] & 0x80u) == 0 )
        {
          m_aStorage = CPools::ms_pPedPool->m_aStorage;
          v191 = CPools::ms_pPedPool->m_aStorage - 1;
          v192 = v191[v188] == 0;
          if ( v191[v188] )
            v192 = &(*v191)[v186 + v188 * 1996] == 0;
          if ( !v192 )
          {
            v193 = m_aStorage[v188];
            v194 = *(CVector **)&m_aStorage[v188 - 1][20];
            v195 = v194 + 4;
            if ( !v194 )
              v195 = (CVector *)(v193 - 1992);
            pStartCoors = *v195;
            v196.n64_u64[0] = vsub_f32(*(float32x2_t *)&pStartCoors.y, v185).n64_u64[0];
            v197 = vmul_f32(v196, v196).n64_u64[0];
            if ( (float)((float)((float)((float)(pStartCoors.x - v187) * (float)(pStartCoors.x - v187)) + *(float *)&v197)
                       + *((float *)&v197 + 1)) < (float)(*(float *)&ScriptParams[1] * *(float *)&ScriptParams[1]) )
              break;
          }
        }
        --v189;
        --v188;
        if ( v189 == -1 )
        {
LABEL_319:
          v36 = 0;
          goto LABEL_363;
        }
      }
      v36 = 1;
LABEL_363:
      v212 = this;
LABEL_364:
      CRunningScript::UpdateCompareFlag(v212, v36);
      return 0;
    case 1793:
      v7 = 0;
      this->EndOfScriptedCutscenePC = 0;
      return v7;
    case 1794:
      CRunningScript::CollectParameters(this, 4);
      v2.n64_u32[0] = ScriptParams[0];
      v4.n64_u32[0] = ScriptParams[2];
      v3.n64_u32[0] = ScriptParams[1];
      v5.n64_u32[0] = ScriptParams[3];
      LODWORD(area.left) = vmin_f32(v2, v4).n64_u32[0];
      LODWORD(area.top) = vmax_f32(v3, v5).n64_u32[0];
      LODWORD(area.right) = vmax_f32(v2, v4).n64_u32[0];
      LODWORD(area.bottom) = vmin_f32(v3, v5).n64_u32[0];
      ScriptParams[0] = CTagManager::GetPercentageTaggedInArea(&area);
LABEL_387:
      v210 = this;
      v211 = 1;
LABEL_388:
      CRunningScript::StoreParameters(v210, v211);
      return 0;
    case 1795:
      CRunningScript::CollectParameters(this, 5);
      v2.n64_u32[0] = ScriptParams[0];
      v4.n64_u32[0] = ScriptParams[2];
      v3.n64_u32[0] = ScriptParams[1];
      v5.n64_u32[0] = ScriptParams[3];
      LODWORD(area.left) = vmin_f32(v2, v4).n64_u32[0];
      LODWORD(area.top) = vmax_f32(v3, v5).n64_u32[0];
      LODWORD(area.right) = vmax_f32(v2, v4).n64_u32[0];
      LODWORD(area.bottom) = vmin_f32(v3, v5).n64_u32[0];
      if ( ScriptParams[4] )
      {
        CTagManager::SetAlphaInArea(&area, 0xFFu);
        return 0;
      }
      v7 = 0;
      CTagManager::SetAlphaInArea(&area, 0);
      return v7;
    case 1796:
      CRunningScript::CollectParameters(this, 4);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v150 = CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v150 = 0;
      }
      v204 = *(float *)&ScriptParams[3];
      v205 = *(float *)&ScriptParams[1];
      v206 = *(float *)&ScriptParams[2];
      if ( *(float *)&ScriptParams[3] <= -100.0 )
        v204 = CWorld::FindGroundZForCoord(*(float *)&ScriptParams[1], *(float *)&ScriptParams[2]);
      vDiveDir.y = v206;
      vDiveDir.x = v205;
      vDiveDir.z = v204 + CEntity::GetDistanceFromCentreOfMassToBaseOfModel((CEntity *)v150);
      v207 = CCarCtrl::JoinCarWithRoadSystemGotoCoors((CVehicle *)v150, &vDiveDir, 0, 0);
      v208 = v150[958] - 57;
      if ( v207 )
      {
        if ( v208 < 2u )
          goto LABEL_352;
        v209 = 9;
      }
      else
      {
        if ( v208 < 2u )
          goto LABEL_352;
        v209 = 33;
      }
      v150[958] = v209;
LABEL_352:
      v214 = v150[980];
      v215 = *((_DWORD *)v150 + 267);
      v216 = *((_DWORD *)v150 + 268);
      v217 = v150[58];
      if ( v214 <= 1 )
        LOBYTE(v214) = 1;
      v150[980] = v214;
      v218 = v215 & 0xFFFFFFEF;
      v150[58] = v217 & 7 | 0x18;
      if ( (v216 & 0x200) == 0 )
        v218 = v215 | 0x10;
      *((_DWORD *)v150 + 267) = v218;
      v7 = 0;
      *((_DWORD *)v150 + 236) = CTimer::m_snTimeInMilliseconds;
      return v7;
    case 1797:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v146 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v146 = 0;
      }
      v7 = 0;
      CVehicleRecording::StartPlaybackRecordedCar(v146, ScriptParams[1], 1, 0);
      return v7;
    case 1798:
      CRunningScript::CollectParameters(this, 2);
      if ( ScriptParams[0] >= 0
        && CPools::ms_pVehiclePool->m_aFlags[(unsigned int)ScriptParams[0] >> 8] == LOBYTE(ScriptParams[0]) )
      {
        v147 = (CVehicle *)CPools::ms_pVehiclePool->m_aStorage[(unsigned int)ScriptParams[0] >> 8];
      }
      else
      {
        v147 = 0;
      }
      CVehicleRecording::SkipForwardInRecording(v147, *(float *)&ScriptParams[1]);
      return 0;
    case 1799:
      CRunningScript::CollectParameters(this, 1);
      v7 = 0;
      this->EndOfScriptedCutscenePC = ScriptParams[0];
      return v7;
    default:
      return -1;
  }
}
// 35C5D2: variable 'pAimEntity' is possibly undefined
// 35C70A: variable 'v2' is possibly undefined
// 35C70A: variable 'v4' is possibly undefined
// 35C712: variable 'v3' is possibly undefined
// 35C712: variable 'v5' is possibly undefined
// 35D31A: variable 'blue' is possibly undefined
// 35D31A: variable 'alpha' is possibly undefined
// FC: using guessed type int elf_hash_bucket[16411];
// 6656D4: using guessed type void *off_6656D4;
// 665710: using guessed type void *off_665710;
// 6658D0: using guessed type void *;
// 66B950: using guessed type void *;
// 66D3C0: using guessed type void *;
// 675F04: using guessed type void *`vtable for'CTaskComplexDiveFromAttachedEntityAndGetUp;
// 676438: using guessed type CFireManager *gFireManager_ptr;
// 676868: using guessed type char *CGameLogic::bPlayersCanBeInSeparateCars[2];
// 676C84: using guessed type int CPools::ms_pPedPool[2];
// 676F70: using guessed type int (*ScriptParams_ptr)[32];
// 677350: using guessed type char (*CPedGroups::ms_activeGroups)[8];
// 678534: using guessed type int *CPools::ms_pVehiclePool;
// 67874C: using guessed type script_checkpoint_struct (*CTheScripts::ScriptCheckpointArray)[20];
// 678910: using guessed type char *gbLARiots_ptr[8];

//----- (0035D5E4) --------------------------------------------------------
void __fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset>::~CTaskComplexSeekEntity(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset> *this)
{
  CEntity *m_pEntity; // r0
  CEntity **p_m_pEntity; // r1

  p_m_pEntity = &this->m_pEntity;
  m_pEntity = this->m_pEntity;
  this->_vptr$CTask = (int (**)(void))&off_6658D0;
  if ( m_pEntity )
    CEntity::CleanUpOldReference(m_pEntity, p_m_pEntity);
  sub_18EDB4(this);
}
// 6658D0: using guessed type void *off_6658D0;

//----- (0035D610) --------------------------------------------------------
void __fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset>::~CTaskComplexSeekEntity(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset> *this)
{
  CEntity *m_pEntity; // r0
  CEntity **p_m_pEntity; // r1
  void *v4; // r0

  p_m_pEntity = &this->m_pEntity;
  m_pEntity = this->m_pEntity;
  this->_vptr$CTask = (int (**)(void))&off_6658D0;
  if ( m_pEntity )
    CEntity::CleanUpOldReference(m_pEntity, p_m_pEntity);
  CTaskComplex::~CTaskComplex(this);
  sub_197118(v4);
}
// 35D638: variable 'v4' is possibly undefined
// 6658D0: using guessed type void *off_6658D0;

//----- (0035D640) --------------------------------------------------------
CTask *__fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset>::Clone(
        const CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset> *this)
{
  char *v2; // r5
  __int64 v3; // d8
  __int64 v4; // d9
  CEntity *m_pEntity; // r8
  float m_fFollowNodeThresholdHeightChange; // r6
  char v7; // r9
  char v8; // r2
  char v9; // r0

  v2 = (char *)CTask::operator new(0x54u);
  v3 = *(_QWORD *)&this->m_iMaxSeekTime;
  v4 = *(_QWORD *)&this->m_fTargetRadius;
  m_pEntity = this->m_pEntity;
  m_fFollowNodeThresholdHeightChange = this->m_fFollowNodeThresholdHeightChange;
  v7 = *((_BYTE *)this + 80);
  CTaskComplex::CTaskComplex((CTaskComplex *)v2);
  *((_QWORD *)v2 + 2) = v3;
  *((_QWORD *)v2 + 3) = v4;
  *((_DWORD *)v2 + 19) = 6;
  v8 = v2[80];
  *((_DWORD *)v2 + 8) = 0;
  *((float *)v2 + 9) = m_fFollowNodeThresholdHeightChange;
  *((_WORD *)v2 + 24) = 0;
  *((_WORD *)v2 + 30) = 0;
  *((_DWORD *)v2 + 10) = 0;
  *((_DWORD *)v2 + 11) = 0;
  *((_DWORD *)v2 + 13) = 0;
  *((_DWORD *)v2 + 14) = 0;
  *((_DWORD *)v2 + 18) = 0;
  *(_DWORD *)v2 = &off_6658D0;
  *((_DWORD *)v2 + 16) = &off_66D3C0;
  v9 = v7 & 1 | v8 & 0xF0 | 2;
  v2[80] = v9;
  *((_DWORD *)v2 + 17) = 0;
  *((_DWORD *)v2 + 3) = m_pEntity;
  if ( m_pEntity )
  {
    CEntity::RegisterReference(m_pEntity, (CEntity **)v2 + 3);
    v9 = v2[80];
  }
  *(_QWORD *)(v2 + 68) = *(_QWORD *)&this->m_entitySeekPosCalculator.m_fRadius;
  *((_DWORD *)v2 + 19) = this->m_iMoveState;
  v2[80] = v9 & 0xF7 | *((_BYTE *)this + 80) & 8;
  *((_DWORD *)v2 + 8) = LODWORD(this->m_fGoToPointDistance);
  *((_DWORD *)v2 + 19) = this->m_iMoveState;
  return (CTask *)v2;
}
// 6658D0: using guessed type void *off_6658D0;
// 66D3C0: using guessed type void *off_66D3C0;

//----- (0035D714) --------------------------------------------------------
int __fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset>::GetTaskType(
        const CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset> *this)
{
  return 907;
}

//----- (0035D71C) --------------------------------------------------------
bool __fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset>::MakeAbortable(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset> *this,
        CPed *pPed,
        const int iPriority,
        const CEvent *pEvent)
{
  int v5; // lr
  int v6; // r0
  int v7; // r1

  if ( !iPriority )
  {
    this->m_iMaxSeekTime = -1;
    v5 = CTimer::m_snTimeInMilliseconds;
    this->m_seekTimer.m_bIsActive = 1;
    this->m_seekTimer.m_iStartTime = v5;
    this->m_seekTimer.m_iDuration = -1;
  }
  v6 = (*((int (__fastcall **)(CTask *, CPed *))this->m_pSubTask->CTaskComplex::_vptr$CTask + 7))(
         this->m_pSubTask,
         pPed);
  if ( v6 == 1 )
  {
    v7 = CTimer::m_snTimeInMilliseconds;
    this->m_scanTimer.m_bIsActive = 1;
    this->m_scanTimer.m_iStartTime = v7;
    this->m_scanTimer.m_iDuration = 0;
  }
  return v6;
}

//----- (0035D76C) --------------------------------------------------------
void __fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset>::Serialize(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset> *this)
{
  _DWORD *v2; // r5
  int v3; // r5
  _DWORD *v4; // r6
  CEntity *m_pEntity; // r0
  int v6; // r6
  _DWORD *v7; // r5
  CEntity *v8; // r0
  int v9; // r1
  int v10; // r4
  int v11; // r0
  _DWORD *v12; // r4
  _DWORD *v13; // r5

  if ( UseDataFence )
    AddDataFence();
  v2 = malloc(4u);
  *v2 = 2;
  CGenericGameStorage::_SaveDataToWorkBuffer(v2, 4);
  free(v2);
  v3 = (*((int (__fastcall **)(CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset> *))this->_vptr$CTask + 5))(this);
  if ( UseDataFence )
    AddDataFence();
  v4 = malloc(4u);
  *v4 = v3;
  CGenericGameStorage::_SaveDataToWorkBuffer(v4, 4);
  free(v4);
  if ( (*((int (__fastcall **)(CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset> *))this->_vptr$CTask + 5))(this) == 907 )
  {
    m_pEntity = this->m_pEntity;
    if ( m_pEntity )
    {
      v6 = *(_BYTE *)&m_pEntity->m_info & 7;
      if ( UseDataFence )
        AddDataFence();
      v7 = malloc(4u);
      *v7 = v6;
      CGenericGameStorage::_SaveDataToWorkBuffer(v7, 4);
      free(v7);
      v8 = this->m_pEntity;
      v9 = *(_BYTE *)&v8->m_info & 7;
      switch ( v9 )
      {
        case 2:
          v10 = GettPoolVehicleRef((CVehicle *)v8);
          break;
        case 4:
          v10 = GettPoolObjRef((CObject *)v8);
          break;
        case 3:
          v10 = GettPoolPedRef((CPed *)v8);
          break;
        default:
          return;
      }
      if ( UseDataFence )
        AddDataFence();
      v13 = malloc(4u);
      *v13 = v10;
      CGenericGameStorage::_SaveDataToWorkBuffer(v13, 4);
      j_free(v13);
    }
    else
    {
      if ( UseDataFence )
        AddDataFence();
      v12 = malloc(4u);
      *v12 = 0;
      CGenericGameStorage::_SaveDataToWorkBuffer(v12, 4);
      j_free(v12);
    }
  }
  else
  {
    v11 = (*((int (__fastcall **)(CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset> *))this->_vptr$CTask
           + 5))(this);
    sub_1941C4(907, v11);
  }
}

//----- (0035D8D8) --------------------------------------------------------
CTask *__fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset>::CreateNextSubTask(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset> *this,
        CPed *pPed)
{
  int v4; // r0
  CTaskSimpleStandStill *v5; // r6
  CTaskSimpleCarDrive *v6; // r0
  int v7; // r0
  bool v8; // zf
  CMatrix *m_pMat; // r6
  CSimpleTransform *p_tx; // r0
  float32x2_t v11; // d16
  unsigned __int64 v12; // d0
  float v13; // s0
  float m_fGoToPointDistance; // s2
  int v15; // r1
  CTaskSimpleStandStill *v17; // r0
  char v18; // r0
  CTaskSimpleStandStill vSeekPos; // [sp+8h] [bp-30h] BYREF

  if ( this->m_pEntity )
  {
    v4 = (*((int (__fastcall **)(CTask *))this->m_pSubTask->CTaskComplex::_vptr$CTask + 5))(this->m_pSubTask);
    v5 = 0;
    if ( v4 > 718 )
    {
      if ( v4 != 719 )
      {
        v8 = v4 == 903;
        if ( v4 != 903 )
          v8 = v4 == 906;
        if ( v8 )
        {
          m_pMat = pPed->m_pMat;
          CEntitySeekPosCalculatorRadiusAngleOffset::ComputeEntitySeekPos(
            &this->m_entitySeekPosCalculator,
            pPed,
            this->m_pEntity,
            (CVector *)&vSeekPos);
          p_tx = (CSimpleTransform *)&m_pMat->tx;
          if ( !m_pMat )
            p_tx = &pPed->m_transform;
          v11.n64_u64[0] = vsub_f32(*(float32x2_t *)&p_tx->m_translate.x, (float32x2_t)vSeekPos.CTaskSimple).n64_u64[0];
          v12 = vmul_f32(v11, v11).n64_u64[0];
          v13 = (float)(*(float *)&v12 + *((float *)&v12 + 1)) + 0.0;
          if ( v13 <= (float)(this->m_fTargetRadius * this->m_fTargetRadius) )
          {
            v18 = *((_BYTE *)this + 80);
            *((_BYTE *)this + 80) = v18 | 4;
            v15 = 920;
            if ( (v18 & 2) == 0 )
              v15 = 1302;
          }
          else
          {
            m_fGoToPointDistance = this->m_fGoToPointDistance;
            if ( m_fGoToPointDistance == 0.0 )
            {
              v15 = 906;
            }
            else if ( v13 <= (float)(m_fGoToPointDistance * m_fGoToPointDistance) )
            {
              v15 = 903;
            }
            else
            {
              v15 = 906;
            }
          }
          return CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset>::CreateSubTask(this, v15, pPed);
        }
        return v5;
      }
    }
    else
    {
      if ( v4 != 203 )
      {
        if ( v4 == 219 )
        {
          v5 = 0;
          CTaskSimpleStandStill::CTaskSimpleStandStill(&vSeekPos, -1, 0, 0, 8.0);
          CTaskSimpleStandStill::ProcessPed(v17, pPed);
          CTaskSimpleStandStill::~CTaskSimpleStandStill(&vSeekPos);
        }
        else if ( v4 == 704 )
        {
          v5 = 0;
          if ( !(*((unsigned __int8 *)&pPed->m_nPedFlags + 1) << 31) )
          {
            v6 = (CTaskSimpleCarDrive *)CTask::operator new(0x70u);
            CTaskSimpleCarDrive::CTaskSimpleCarDrive(v6, pPed->m_pMyVehicle, 0, 0);
            *(_DWORD *)(v7 + 96) = 2000;
            *(_WORD *)(v7 + 108) = 0;
            *(_DWORD *)(v7 + 100) = 0;
            *(_DWORD *)(v7 + 104) = 0;
            v5 = (CTaskSimpleStandStill *)v7;
            *(_DWORD *)v7 = &off_66571C;
          }
        }
        return v5;
      }
      if ( pPed->m_pAttachToEntity )
      {
        v5 = (CTaskSimpleStandStill *)CTask::operator new(0x20u);
        CTaskSimpleStandStill::CTaskSimpleStandStill(v5, 2000, 0, 0, 8.0);
        return v5;
      }
    }
    return (CTask *)(*((int (__fastcall **)(CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset> *, CPed *))this->_vptr$CTask
                     + 11))(
                      this,
                      pPed);
  }
  return 0;
}
// 35D932: variable 'v7' is possibly undefined
// 35DA26: variable 'v17' is possibly undefined
// 66571C: using guessed type void *off_66571C;

//----- (0035DA70) --------------------------------------------------------
CTask *__fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset>::CreateFirstSubTask(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset> *this,
        CPed *pPed)
{
  __int64 v4; // kr00_8
  int v5; // r1
  CEntity *m_pEntity; // r2
  bool v7; // zf
  CMatrix *m_pMat; // r0
  CSimpleTransform *p_tx; // r1
  float32x2_t v10; // d16
  unsigned __int64 v11; // d0
  float v12; // s0
  int v13; // r1
  CTaskSimpleTired *v14; // r0
  float m_fGoToPointDistance; // s2
  CTaskComplexLeaveCar *v16; // r0
  CTask *result; // r0
  CVector vSeekPos; // [sp+8h] [bp-18h] BYREF

  v4 = *(_QWORD *)&this->m_iMaxSeekTime;
  v5 = CTimer::m_snTimeInMilliseconds;
  this->m_scanTimer.m_bIsActive = 1;
  this->m_scanTimer.m_iStartTime = v5;
  this->m_scanTimer.m_iDuration = HIDWORD(v4);
  if ( (_DWORD)v4 != -1 )
  {
    this->m_seekTimer.m_bIsActive = 1;
    this->m_seekTimer.m_iStartTime = v5;
    this->m_seekTimer.m_iDuration = v4;
  }
  m_pEntity = this->m_pEntity;
  if ( m_pEntity )
  {
    v7 = *((unsigned __int8 *)&pPed->m_nPedFlags + 1) << 31 == 0;
    if ( *((unsigned __int8 *)&pPed->m_nPedFlags + 1) << 31 )
      v7 = pPed->m_pMyVehicle == 0;
    if ( v7 )
    {
      CEntitySeekPosCalculatorRadiusAngleOffset::ComputeEntitySeekPos(
        &this->m_entitySeekPosCalculator,
        pPed,
        m_pEntity,
        &vSeekPos);
      m_pMat = pPed->m_pMat;
      p_tx = (CSimpleTransform *)&m_pMat->tx;
      if ( !m_pMat )
        p_tx = &pPed->m_transform;
      v10.n64_u64[0] = vsub_f32(*(float32x2_t *)&p_tx->m_translate.x, *(float32x2_t *)&vSeekPos.x).n64_u64[0];
      v11 = vmul_f32(v10, v10).n64_u64[0];
      v12 = (float)(*(float *)&v11 + *((float *)&v11 + 1)) + 0.0;
      if ( v12 >= (float)(this->m_fTargetRadius * this->m_fTargetRadius) )
      {
        m_fGoToPointDistance = this->m_fGoToPointDistance;
        if ( m_fGoToPointDistance == 0.0 )
        {
          v13 = 906;
        }
        else
        {
          v13 = 903;
          if ( v12 > (float)(m_fGoToPointDistance * m_fGoToPointDistance) )
            v13 = 906;
        }
      }
      else
      {
        *((_BYTE *)this + 80) |= 4u;
        CPed::SetMoveState(pPed, PEDMOVE_STILL);
        v13 = 244;
      }
      return CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset>::CreateSubTask(this, v13, pPed);
    }
    else
    {
      v16 = (CTaskComplexLeaveCar *)CTask::operator new(0x34u);
      CTaskComplexLeaveCar::CTaskComplexLeaveCar(v16, pPed->m_pMyVehicle, 0, 0, 1, 0);
    }
  }
  else
  {
    v14 = (CTaskSimpleTired *)CTask::operator new(0x1Cu);
    CTaskSimpleTired::CTaskSimpleTired(v14, 1000);
  }
  return result;
}

//----- (0035DB7C) --------------------------------------------------------
CTask *__fastcall CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset>::ControlSubTask(
        CTaskComplexSeekEntity<CEntitySeekPosCalculatorRadiusAngleOffset> *this,
        CPed *pPed)
{
  CEntity *m_pEntity; // r4
  CTaskSimpleStandStill *m_pSubTask; // r6
  RwReal y; // r8
  CPhysical *m_pGroundPhysical; // r0
  bool v8; // zf
  CPhysical *v9; // r0
  bool v10; // zf
  CEntity *m_pAttachToEntity; // r0
  CMatrix *m_pMat; // r0
  float *v13; // r4
  int v14; // r1
  CSimpleTransform *p_tx; // r2
  float *v16; // r0
  float v17; // s2
  float z; // s4
  float x; // s16
  RwReal v20; // s18
  RwReal v21; // s20
  float *v22; // r1
  float v23; // s4
  float v24; // s6
  int v25; // r0
  float v26; // s18
  float v27; // s20
  float v28; // s16
  int v29; // r0
  float RadianAngleBetweenPoints; // r0
  float v31; // r0
  CEntity *v32; // r2
  unsigned int v33; // r0
  int m_iStartTime; // r1
  __int64 v35; // r0
  CMatrix *v36; // r0
  CSimpleTransform *p_m_transform; // r1
  float v38; // s16
  float m_fGoToPointDistance; // s0
  int m_iMoveState; // r4
  CTask *v41; // r0
  char m_pParent; // r1
  float v43; // s0
  int v44; // r4
  float m_fTargetRadius; // r2
  float m_fSlowDownDistance; // s0
  CTask v47; // d16
  CEntity *v48; // r0
  CPlayerPed *PlayerPed; // r0
  CVector v51; // [sp+14h] [bp-BCh] BYREF
  CMatrix output; // [sp+20h] [bp-B0h] BYREF
  CVector pCoors; // [sp+68h] [bp-68h] BYREF
  CVector v54; // [sp+78h] [bp-58h] BYREF
  CVector v; // [sp+88h] [bp-48h] BYREF

  m_pEntity = this->m_pEntity;
  m_pSubTask = (CTaskSimpleStandStill *)this->m_pSubTask;
  if ( m_pEntity && (*(_BYTE *)&m_pEntity->m_info & 7) == 3 && CPedGroups::AreInSameGroup(pPed, (const CPed *)m_pEntity) )
  {
    if ( BYTE1(m_pEntity[1].m_transform.m_translate.y) << 31 )
      goto LABEL_15;
    y = m_pEntity[23].m_transform.m_translate.y;
    if ( y != 0.0 && (*(_BYTE *)(LODWORD(y) + 58) & 7) == 2 )
    {
      m_pGroundPhysical = pPed->m_pGroundPhysical;
      v8 = m_pGroundPhysical == (CPhysical *)LODWORD(y);
      if ( m_pGroundPhysical != (CPhysical *)LODWORD(y) )
        v8 = pPed->m_pEntityStandingOn == (CEntity *)LODWORD(y);
      if ( v8 )
        goto LABEL_67;
    }
    y = *(float *)&m_pEntity[23].RandomSeed;
    if ( y == 0.0 || (*(_BYTE *)(LODWORD(y) + 58) & 7) != 2 )
      goto LABEL_15;
    v9 = pPed->m_pGroundPhysical;
    v10 = v9 == (CPhysical *)LODWORD(y);
    if ( v9 != (CPhysical *)LODWORD(y) )
      v10 = pPed->m_pEntityStandingOn == (CEntity *)LODWORD(y);
    if ( v10 )
    {
LABEL_67:
      if ( *(_DWORD *)(LODWORD(y) + 1440) != 5 )
        y = 0.0;
    }
    else
    {
LABEL_15:
      y = 0.0;
    }
    m_pAttachToEntity = pPed->m_pAttachToEntity;
    if ( y == 0.0 && m_pAttachToEntity )
    {
      CPed::DettachPedFromEntity(pPed);
    }
    else if ( y != 0.0
           && !m_pAttachToEntity
           && (*((int (__fastcall **)(CTask *))this->m_pSubTask->CTaskComplex::_vptr$CTask + 5))(this->m_pSubTask) != 203
           && (*((int (__fastcall **)(CTask *, CPed *, int, _DWORD))this->m_pSubTask->CTaskComplex::_vptr$CTask + 7))(
                this->m_pSubTask,
                pPed,
                1,
                0) == 1 )
    {
      m_pMat = pPed->m_pMat;
      v13 = (float *)(LODWORD(y) + 4);
      v14 = *(int *)((char *)&dword_14 + LODWORD(y));
      p_tx = (CSimpleTransform *)&m_pMat->tx;
      if ( !m_pMat )
        p_tx = &pPed->m_transform;
      v16 = (float *)(LODWORD(y) + 4);
      v17 = p_tx->m_translate.y;
      z = p_tx->m_translate.z;
      if ( v14 )
        v16 = (float *)(v14 + 48);
      v.x = *v16 - p_tx->m_translate.x;
      x = v.x;
      v.y = v16[1] - v17;
      v20 = v.y;
      v21 = v16[2] - z;
      v.z = v21;
      v54.z = v21;
      *(_QWORD *)&v54.x = *(_QWORD *)&v.x;
      CVector::Normalise(&v54);
      v22 = (float *)(LODWORD(y) + 4);
      v23 = v20 - (float)(v54.y * 0.25);
      v24 = v21 - (float)(v54.z * 0.25);
      v.y = v23;
      v.z = v24;
      v25 = *(int *)((char *)&dword_14 + LODWORD(y));
      if ( v25 )
        v22 = (float *)(v25 + 48);
      v26 = *v22 - (float)(x - (float)(v54.x * 0.25));
      v.x = v26;
      v27 = v22[1] - v23;
      v.y = v27;
      v28 = v22[2] - v24;
      v.z = v28;
      pCoors.z = v28;
      *(_QWORD *)&pCoors.x = *(_QWORD *)&v.x;
      if ( CPedPlacement::FindZCoorForPed(&pCoors) )
      {
        v = pCoors;
        v28 = pCoors.z;
        v27 = pCoors.y;
        v26 = pCoors.x;
      }
      v29 = *(int *)((char *)&dword_14 + LODWORD(y));
      if ( v29 )
        v13 = (float *)(v29 + 48);
      v.x = v26 - *v13;
      v.y = v27 - v13[1];
      v.z = v28 - v13[2];
      output.m_pRwMat = 0;
      output.m_owner = 0;
      Invert(*(const CMatrix **)((char *)&dword_14 + LODWORD(y)), &output);
      CVector::FromMultiply3X3(&v51, &output, &v);
      RadianAngleBetweenPoints = CGeneral::GetRadianAngleBetweenPoints(v54.x, v54.y, 0.0, 0.0);
      v31 = CGeneral::LimitRadianAngle(RadianAngleBetweenPoints);
      CPed::AttachPedToEntity(
        pPed,
        (CEntity *)LODWORD(y),
        v51,
        (unsigned int)v31,
        0.2,
        pPed->m_WeaponSlots[pPed->m_nCurrentWeapon].m_eWeaponType);
      m_pSubTask = (CTaskSimpleStandStill *)CTask::operator new(0x20u);
      CTaskSimpleStandStill::CTaskSimpleStandStill(m_pSubTask, 2000, 0, 0, 8.0);
      CMatrix::~CMatrix(&output);
      return m_pSubTask;
    }
  }
  if ( (*((int (__fastcall **)(CTask *))this->m_pSubTask->CTaskComplex::_vptr$CTask + 5))(this->m_pSubTask) == 906
    || (*((int (__fastcall **)(CTask *))this->m_pSubTask->CTaskComplex::_vptr$CTask + 5))(this->m_pSubTask) == 903 )
  {
    v32 = this->m_pEntity;
    if ( v32 )
    {
      if ( this->m_seekTimer.m_bIsActive
        && (!this->m_seekTimer.m_bIsStopped ? (m_iStartTime = this->m_seekTimer.m_iStartTime,
                                               v33 = CTimer::m_snTimeInMilliseconds) : (v33 = CTimer::m_snTimeInMilliseconds,
                                                                                        this->m_seekTimer.m_bIsStopped = 0,
                                                                                        this->m_seekTimer.m_iStartTime = v33,
                                                                                        m_iStartTime = v33),
            m_iStartTime + this->m_seekTimer.m_iDuration <= v33) )
      {
        if ( (*((int (__fastcall **)(CTask *, CPed *, int, _DWORD))this->m_pSubTask->CTaskComplex::_vptr$CTask + 7))(
               this->m_pSubTask,
               pPed,
               1,
               0) == 1 )
        {
          if ( *((unsigned __int8 *)this + 80) << 31 )
          {
            m_pSubTask = (CTaskSimpleStandStill *)CTask::operator new(0x1Cu);
            CTaskSimpleTired::CTaskSimpleTired((CTaskSimpleTired *)m_pSubTask, 1000);
          }
          else
          {
            m_pSubTask = 0;
          }
        }
      }
      else if ( this->m_scanTimer.m_bIsActive )
      {
        if ( this->m_scanTimer.m_bIsStopped )
        {
          LODWORD(v35) = CTimer::m_snTimeInMilliseconds;
          this->m_scanTimer.m_bIsStopped = 0;
          this->m_scanTimer.m_iStartTime = v35;
          HIDWORD(v35) = v35;
        }
        else
        {
          HIDWORD(v35) = this->m_scanTimer.m_iStartTime;
          LODWORD(v35) = CTimer::m_snTimeInMilliseconds;
        }
        if ( HIDWORD(v35) + this->m_scanTimer.m_iDuration <= (unsigned int)v35 )
        {
          HIDWORD(v35) = this->m_iPeriod;
          this->m_scanTimer.m_bIsActive = 1;
          *(_QWORD *)&this->m_scanTimer.m_iStartTime = v35;
          CEntitySeekPosCalculatorRadiusAngleOffset::ComputeEntitySeekPos(
            &this->m_entitySeekPosCalculator,
            pPed,
            v32,
            &v);
          v36 = pPed->m_pMat;
          p_m_transform = (CSimpleTransform *)&v36->tx;
          if ( !v36 )
            p_m_transform = &pPed->m_transform;
          v38 = (float)((float)((float)(p_m_transform->m_translate.x - v.x) * (float)(p_m_transform->m_translate.x - v.x))
                      + (float)((float)(p_m_transform->m_translate.y - v.y) * (float)(p_m_transform->m_translate.y - v.y)))
              + 0.0;
          if ( (*((int (__fastcall **)(CTask *))this->m_pSubTask->CTaskComplex::_vptr$CTask + 5))(this->m_pSubTask) == 906 )
          {
            m_fGoToPointDistance = this->m_fGoToPointDistance;
            if ( m_fGoToPointDistance == 0.0
              || v38 >= (float)((float)(m_fGoToPointDistance + -1.0) * (float)(m_fGoToPointDistance + -1.0)) )
            {
              CTaskComplexFollowNodeRoute::SetTarget(
                (CTaskComplexFollowNodeRoute *)this->m_pSubTask,
                pPed,
                &v,
                this->m_fTargetRadius,
                this->m_fSlowDownDistance,
                this->m_fFollowNodeThresholdHeightChange,
                0);
            }
            else if ( (*((int (__fastcall **)(CTask *, CPed *, int, _DWORD))this->m_pSubTask->CTaskComplex::_vptr$CTask
                       + 7))(
                        this->m_pSubTask,
                        pPed,
                        1,
                        0) == 1 )
            {
              m_pSubTask = (CTaskSimpleStandStill *)CTask::operator new(0x28u);
              m_iMoveState = this->m_iMoveState;
              CEntitySeekPosCalculatorRadiusAngleOffset::ComputeEntitySeekPos(
                &this->m_entitySeekPosCalculator,
                pPed,
                this->m_pEntity,
                (CVector *)&output);
              CTaskComplexGoToPointAndStandStill::CTaskComplexGoToPointAndStandStill(
                (CTaskComplexGoToPointAndStandStill *)m_pSubTask,
                m_iMoveState,
                (const CVector *)&output,
                this->m_fTargetRadius,
                this->m_fSlowDownDistance,
                0,
                0);
              LOBYTE(m_pSubTask[1].m_pParent) = *((_BYTE *)this + 80) & 8 | (int)m_pSubTask[1].m_pParent & 0xF7;
              return m_pSubTask;
            }
          }
          else
          {
            v41 = this->m_pSubTask;
            m_pParent = (char)v41[4].m_pParent;
            if ( (m_pParent & 0x10) == 0 )
            {
              v43 = this->m_fGoToPointDistance;
              if ( v43 == 0.0 || v38 <= (float)((float)(v43 + 1.0) * (float)(v43 + 1.0)) )
              {
                m_fTargetRadius = this->m_fTargetRadius;
                m_fSlowDownDistance = this->m_fSlowDownDistance;
                if ( *(float *)&v41[2]._vptr$CTask != v.x
                  || *(float *)&v41[2].m_pParent != v.y
                  || *(float *)&v41[3]._vptr$CTask != v.z
                  || *(float *)&v41[4]._vptr$CTask != m_fSlowDownDistance )
                {
                  v47 = *(CTask *)&v.x;
                  v41[3]._vptr$CTask = (int (**)(void))LODWORD(v.z);
                  *(float *)&v41[3].m_pParent = m_fTargetRadius;
                  *(float *)&v41[4]._vptr$CTask = m_fSlowDownDistance;
                  LOBYTE(v41[4].m_pParent) = m_pParent | 4;
                  v41[2] = v47;
                }
              }
              else if ( (*((int (__fastcall **)(CTask *, CPed *, int, _DWORD))v41->_vptr$CTask + 7))(v41, pPed, 1, 0) == 1 )
              {
                m_pSubTask = (CTaskSimpleStandStill *)CTask::operator new(0x60u);
                v44 = this->m_iMoveState;
                CEntitySeekPosCalculatorRadiusAngleOffset::ComputeEntitySeekPos(
                  &this->m_entitySeekPosCalculator,
                  pPed,
                  this->m_pEntity,
                  (CVector *)&output);
                CTaskComplexFollowNodeRoute::CTaskComplexFollowNodeRoute(
                  (CTaskComplexFollowNodeRoute *)m_pSubTask,
                  v44,
                  (const CVector *)&output,
                  this->m_fTargetRadius,
                  this->m_fSlowDownDistance,
                  this->m_fFollowNodeThresholdHeightChange,
                  0,
                  -1,
                  1);
                return m_pSubTask;
              }
            }
          }
          m_pSubTask = (CTaskSimpleStandStill *)this->m_pSubTask;
        }
      }
    }
    else if ( (*((int (__fastcall **)(CTask *, CPed *, int, _DWORD))this->m_pSubTask->CTaskComplex::_vptr$CTask + 7))(
                this->m_pSubTask,
                pPed,
                1,
                0) )
    {
      m_pSubTask = 0;
    }
  }
  v48 = this->m_pEntity;
  if ( v48 )
  {
    if ( (*(_BYTE *)&v48->m_info & 7) == 3 && CPed::IsPlayer((const CPed *)v48) )
    {
      